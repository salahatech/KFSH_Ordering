function KM(t,r){for(var n=0;n<r.length;n++){const i=r[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x5={exports:{}},G0={};var xT;function bV(){if(xT)return G0;xT=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(i,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:t,type:i,key:o,ref:a!==void 0?a:null,props:s}}return G0.Fragment=r,G0.jsx=n,G0.jsxs=n,G0}var vT;function jV(){return vT||(vT=1,x5.exports=bV()),x5.exports}var e=jV(),v5={exports:{}},jn={};var bT;function wV(){if(bT)return jn;bT=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=x&&$[x]||$["@@iterator"],typeof $=="function"?$:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function T($,X,se){this.props=$,this.context=X,this.refs=N,this.updater=se||w}T.prototype.isReactComponent={},T.prototype.setState=function($,X){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,X,"setState")},T.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function O(){}O.prototype=T.prototype;function D($,X,se){this.props=$,this.context=X,this.refs=N,this.updater=se||w}var M=D.prototype=new O;M.constructor=D,C(M,T.prototype),M.isPureReactComponent=!0;var Y=Array.isArray;function q(){}var W={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function z($,X,se){var H=se.ref;return{$$typeof:t,type:$,key:X,ref:H!==void 0?H:null,props:se}}function G($,X){return z($.type,X,$.props)}function ne($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function Z($){var X={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(se){return X[se]})}var ie=/\/+/g;function me($,X){return typeof $=="object"&&$!==null&&$.key!=null?Z(""+$.key):X.toString(36)}function ce($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(q,q):($.status="pending",$.then(function(X){$.status==="pending"&&($.status="fulfilled",$.value=X)},function(X){$.status==="pending"&&($.status="rejected",$.reason=X)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function Q($,X,se,H,oe){var ge=typeof $;(ge==="undefined"||ge==="boolean")&&($=null);var be=!1;if($===null)be=!0;else switch(ge){case"bigint":case"string":case"number":be=!0;break;case"object":switch($.$$typeof){case t:case r:be=!0;break;case f:return be=$._init,Q(be($._payload),X,se,H,oe)}}if(be)return oe=oe($),be=H===""?"."+me($,0):H,Y(oe)?(se="",be!=null&&(se=be.replace(ie,"$&/")+"/"),Q(oe,X,se,"",function(He){return He})):oe!=null&&(ne(oe)&&(oe=G(oe,se+(oe.key==null||$&&$.key===oe.key?"":(""+oe.key).replace(ie,"$&/")+"/")+be)),X.push(oe)),1;be=0;var Le=H===""?".":H+":";if(Y($))for(var ke=0;ke<$.length;ke++)H=$[ke],ge=Le+me(H,ke),be+=Q(H,X,se,ge,oe);else if(ke=v($),typeof ke=="function")for($=ke.call($),ke=0;!(H=$.next()).done;)H=H.value,ge=Le+me(H,ke++),be+=Q(H,X,se,ge,oe);else if(ge==="object"){if(typeof $.then=="function")return Q(ce($),X,se,H,oe);throw X=String($),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return be}function de($,X,se){if($==null)return $;var H=[],oe=0;return Q($,H,"","",function(ge){return X.call(se,ge,oe++)}),H}function le($){if($._status===-1){var X=$._result;X=X(),X.then(function(se){($._status===0||$._status===-1)&&($._status=1,$._result=se)},function(se){($._status===0||$._status===-1)&&($._status=2,$._result=se)}),$._status===-1&&($._status=0,$._result=X)}if($._status===1)return $._result.default;throw $._result}var ye=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Se={map:de,forEach:function($,X,se){de($,function(){X.apply(this,arguments)},se)},count:function($){var X=0;return de($,function(){X++}),X},toArray:function($){return de($,function(X){return X})||[]},only:function($){if(!ne($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return jn.Activity=p,jn.Children=Se,jn.Component=T,jn.Fragment=n,jn.Profiler=a,jn.PureComponent=D,jn.StrictMode=i,jn.Suspense=u,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,jn.__COMPILER_RUNTIME={__proto__:null,c:function($){return W.H.useMemoCache($)}},jn.cache=function($){return function(){return $.apply(null,arguments)}},jn.cacheSignal=function(){return null},jn.cloneElement=function($,X,se){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var H=C({},$.props),oe=$.key;if(X!=null)for(ge in X.key!==void 0&&(oe=""+X.key),X)!J.call(X,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&X.ref===void 0||(H[ge]=X[ge]);var ge=arguments.length-2;if(ge===1)H.children=se;else if(1<ge){for(var be=Array(ge),Le=0;Le<ge;Le++)be[Le]=arguments[Le+2];H.children=be}return z($.type,oe,H)},jn.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},jn.createElement=function($,X,se){var H,oe={},ge=null;if(X!=null)for(H in X.key!==void 0&&(ge=""+X.key),X)J.call(X,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(oe[H]=X[H]);var be=arguments.length-2;if(be===1)oe.children=se;else if(1<be){for(var Le=Array(be),ke=0;ke<be;ke++)Le[ke]=arguments[ke+2];oe.children=Le}if($&&$.defaultProps)for(H in be=$.defaultProps,be)oe[H]===void 0&&(oe[H]=be[H]);return z($,ge,oe)},jn.createRef=function(){return{current:null}},jn.forwardRef=function($){return{$$typeof:l,render:$}},jn.isValidElement=ne,jn.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:le}},jn.memo=function($,X){return{$$typeof:d,type:$,compare:X===void 0?null:X}},jn.startTransition=function($){var X=W.T,se={};W.T=se;try{var H=$(),oe=W.S;oe!==null&&oe(se,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(q,ye)}catch(ge){ye(ge)}finally{X!==null&&se.types!==null&&(X.types=se.types),W.T=X}},jn.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},jn.use=function($){return W.H.use($)},jn.useActionState=function($,X,se){return W.H.useActionState($,X,se)},jn.useCallback=function($,X){return W.H.useCallback($,X)},jn.useContext=function($){return W.H.useContext($)},jn.useDebugValue=function(){},jn.useDeferredValue=function($,X){return W.H.useDeferredValue($,X)},jn.useEffect=function($,X){return W.H.useEffect($,X)},jn.useEffectEvent=function($){return W.H.useEffectEvent($)},jn.useId=function(){return W.H.useId()},jn.useImperativeHandle=function($,X,se){return W.H.useImperativeHandle($,X,se)},jn.useInsertionEffect=function($,X){return W.H.useInsertionEffect($,X)},jn.useLayoutEffect=function($,X){return W.H.useLayoutEffect($,X)},jn.useMemo=function($,X){return W.H.useMemo($,X)},jn.useOptimistic=function($,X){return W.H.useOptimistic($,X)},jn.useReducer=function($,X,se){return W.H.useReducer($,X,se)},jn.useRef=function($){return W.H.useRef($)},jn.useState=function($){return W.H.useState($)},jn.useSyncExternalStore=function($,X,se){return W.H.useSyncExternalStore($,X,se)},jn.useTransition=function(){return W.H.useTransition()},jn.version="19.2.3",jn}var jT;function Hp(){return jT||(jT=1,v5.exports=wV()),v5.exports}var k=Hp();const qf=hc(k),SV=KM({__proto__:null,default:qf},[k]);var b5={exports:{}},K0={},j5={exports:{}},w5={};var wT;function CV(){return wT||(wT=1,(function(t){function r(Q,de){var le=Q.length;Q.push(de);e:for(;0<le;){var ye=le-1>>>1,Se=Q[ye];if(0<a(Se,de))Q[ye]=de,Q[le]=Se,le=ye;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var de=Q[0],le=Q.pop();if(le!==de){Q[0]=le;e:for(var ye=0,Se=Q.length,$=Se>>>1;ye<$;){var X=2*(ye+1)-1,se=Q[X],H=X+1,oe=Q[H];if(0>a(se,le))H<Se&&0>a(oe,se)?(Q[ye]=oe,Q[H]=le,ye=H):(Q[ye]=se,Q[X]=le,ye=X);else if(H<Se&&0>a(oe,le))Q[ye]=oe,Q[H]=le,ye=H;else break e}}return de}function a(Q,de){var le=Q.sortIndex-de.sortIndex;return le!==0?le:Q.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,x=3,v=!1,w=!1,C=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function M(Q){for(var de=n(d);de!==null;){if(de.callback===null)i(d);else if(de.startTime<=Q)i(d),de.sortIndex=de.expirationTime,r(u,de);else break;de=n(d)}}function Y(Q){if(C=!1,M(Q),!w)if(n(u)!==null)w=!0,q||(q=!0,Z());else{var de=n(d);de!==null&&ce(Y,de.startTime-Q)}}var q=!1,W=-1,J=5,z=-1;function G(){return N?!0:!(t.unstable_now()-z<J)}function ne(){if(N=!1,q){var Q=t.unstable_now();z=Q;var de=!0;try{e:{w=!1,C&&(C=!1,O(W),W=-1),v=!0;var le=x;try{t:{for(M(Q),p=n(u);p!==null&&!(p.expirationTime>Q&&G());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,x=p.priorityLevel;var Se=ye(p.expirationTime<=Q);if(Q=t.unstable_now(),typeof Se=="function"){p.callback=Se,M(Q),de=!0;break t}p===n(u)&&i(u),M(Q)}else i(u);p=n(u)}if(p!==null)de=!0;else{var $=n(d);$!==null&&ce(Y,$.startTime-Q),de=!1}}break e}finally{p=null,x=le,v=!1}de=void 0}}finally{de?Z():q=!1}}}var Z;if(typeof D=="function")Z=function(){D(ne)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,me=ie.port2;ie.port1.onmessage=ne,Z=function(){me.postMessage(null)}}else Z=function(){T(ne,0)};function ce(Q,de){W=T(function(){Q(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var de=3;break;default:de=x}var le=x;x=de;try{return Q()}finally{x=le}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(Q,de){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var le=x;x=Q;try{return de()}finally{x=le}},t.unstable_scheduleCallback=function(Q,de,le){var ye=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ye+le:ye):le=ye,Q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=le+Se,Q={id:f++,callback:de,priorityLevel:Q,startTime:le,expirationTime:Se,sortIndex:-1},le>ye?(Q.sortIndex=le,r(d,Q),n(u)===null&&Q===n(d)&&(C?(O(W),W=-1):C=!0,ce(Y,le-ye))):(Q.sortIndex=Se,r(u,Q),w||v||(w=!0,q||(q=!0,Z()))),Q},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(Q){var de=x;return function(){var le=x;x=de;try{return Q.apply(this,arguments)}finally{x=le}}}})(w5)),w5}var ST;function NV(){return ST||(ST=1,j5.exports=CV()),j5.exports}var S5={exports:{}},bl={};var CT;function AV(){if(CT)return bl;CT=1;var t=Hp();function r(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(u,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:u,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return bl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bl.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return s(u,d,null,f)},bl.flushSync=function(u){var d=o.T,f=i.p;try{if(o.T=null,i.p=2,u)return u()}finally{o.T=d,i.p=f,i.d.f()}},bl.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(u,d))},bl.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},bl.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:v}):f==="script"&&i.d.X(u,{crossOrigin:p,integrity:x,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},bl.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(u)},bl.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);i.d.L(u,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},bl.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);i.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(u)},bl.requestFormReset=function(u){i.d.r(u)},bl.unstable_batchedUpdates=function(u,d){return u(d)},bl.useFormState=function(u,d,f){return o.H.useFormState(u,d,f)},bl.useFormStatus=function(){return o.H.useHostTransitionStatus()},bl.version="19.2.3",bl}var NT;function QM(){if(NT)return S5.exports;NT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),S5.exports=AV(),S5.exports}var AT;function EV(){if(AT)return K0;AT=1;var t=NV(),r=Hp(),n=QM();function i(c){var m="https://react.dev/errors/"+c;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)m+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+c+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var m=c,j=c;if(c.alternate)for(;m.return;)m=m.return;else{c=m;do m=c,(m.flags&4098)!==0&&(j=m.return),c=m.return;while(c)}return m.tag===3?j:null}function o(c){if(c.tag===13){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function l(c){if(c.tag===31){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function u(c){if(s(c)!==c)throw Error(i(188))}function d(c){var m=c.alternate;if(!m){if(m=s(c),m===null)throw Error(i(188));return m!==c?null:c}for(var j=c,_=m;;){var F=j.return;if(F===null)break;var K=F.alternate;if(K===null){if(_=F.return,_!==null){j=_;continue}break}if(F.child===K.child){for(K=F.child;K;){if(K===j)return u(F),c;if(K===_)return u(F),m;K=K.sibling}throw Error(i(188))}if(j.return!==_.return)j=F,_=K;else{for(var pe=!1,Te=F.child;Te;){if(Te===j){pe=!0,j=F,_=K;break}if(Te===_){pe=!0,_=F,j=K;break}Te=Te.sibling}if(!pe){for(Te=K.child;Te;){if(Te===j){pe=!0,j=K,_=F;break}if(Te===_){pe=!0,_=K,j=F;break}Te=Te.sibling}if(!pe)throw Error(i(189))}}if(j.alternate!==_)throw Error(i(190))}if(j.tag!==3)throw Error(i(188));return j.stateNode.current===j?c:m}function f(c){var m=c.tag;if(m===5||m===26||m===27||m===6)return c;for(c=c.child;c!==null;){if(m=f(c),m!==null)return m;c=c.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function Z(c){return c===null||typeof c!="object"?null:(c=ne&&c[ne]||c["@@iterator"],typeof c=="function"?c:null)}var ie=Symbol.for("react.client.reference");function me(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===ie?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case C:return"Fragment";case T:return"Profiler";case N:return"StrictMode";case Y:return"Suspense";case q:return"SuspenseList";case z:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case w:return"Portal";case D:return c.displayName||"Context";case O:return(c._context.displayName||"Context")+".Consumer";case M:var m=c.render;return c=c.displayName,c||(c=m.displayName||m.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case W:return m=c.displayName||null,m!==null?m:me(c.type)||"Memo";case J:m=c._payload,c=c._init;try{return me(c(m))}catch{}}return null}var ce=Array.isArray,Q=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ye=[],Se=-1;function $(c){return{current:c}}function X(c){0>Se||(c.current=ye[Se],ye[Se]=null,Se--)}function se(c,m){Se++,ye[Se]=c.current,c.current=m}var H=$(null),oe=$(null),ge=$(null),be=$(null);function Le(c,m){switch(se(ge,m),se(oe,c),se(H,null),m.nodeType){case 9:case 11:c=(c=m.documentElement)&&(c=c.namespaceURI)?q4(c):0;break;default:if(c=m.tagName,m=m.namespaceURI)m=q4(m),c=U4(m,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}X(H),se(H,c)}function ke(){X(H),X(oe),X(ge)}function He(c){c.memoizedState!==null&&se(be,c);var m=H.current,j=U4(m,c.type);m!==j&&(se(oe,c),se(H,j))}function Je(c){oe.current===c&&(X(H),X(oe)),be.current===c&&(X(be),W0._currentValue=le)}var Qe,vt;function Pt(c){if(Qe===void 0)try{throw Error()}catch(j){var m=j.stack.trim().match(/\n( *(at )?)/);Qe=m&&m[1]||"",vt=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+c+vt}var Oe=!1;function at(c,m){if(!c||Oe)return"";Oe=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(m){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(jt){var gt=jt}Reflect.construct(c,[],Mt)}else{try{Mt.call()}catch(jt){gt=jt}c.call(Mt.prototype)}}else{try{throw Error()}catch(jt){gt=jt}(Mt=c())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(jt){if(jt&&gt&&typeof jt.stack=="string")return[jt.stack,gt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=_.DetermineComponentFrameRoot(),pe=K[0],Te=K[1];if(pe&&Te){var Ue=pe.split(`
`),ft=Te.split(`
`);for(F=_=0;_<Ue.length&&!Ue[_].includes("DetermineComponentFrameRoot");)_++;for(;F<ft.length&&!ft[F].includes("DetermineComponentFrameRoot");)F++;if(_===Ue.length||F===ft.length)for(_=Ue.length-1,F=ft.length-1;1<=_&&0<=F&&Ue[_]!==ft[F];)F--;for(;1<=_&&0<=F;_--,F--)if(Ue[_]!==ft[F]){if(_!==1||F!==1)do if(_--,F--,0>F||Ue[_]!==ft[F]){var It=`
`+Ue[_].replace(" at new "," at ");return c.displayName&&It.includes("<anonymous>")&&(It=It.replace("<anonymous>",c.displayName)),It}while(1<=_&&0<=F);break}}}finally{Oe=!1,Error.prepareStackTrace=j}return(j=c?c.displayName||c.name:"")?Pt(j):""}function Wt(c,m){switch(c.tag){case 26:case 27:case 5:return Pt(c.type);case 16:return Pt("Lazy");case 13:return c.child!==m&&m!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return at(c.type,!1);case 11:return at(c.type.render,!1);case 1:return at(c.type,!0);case 31:return Pt("Activity");default:return""}}function Bt(c){try{var m="",j=null;do m+=Wt(c,j),j=c,c=c.return;while(c);return m}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var yt=Object.prototype.hasOwnProperty,rr=t.unstable_scheduleCallback,St=t.unstable_cancelCallback,xr=t.unstable_shouldYield,hr=t.unstable_requestPaint,zr=t.unstable_now,yn=t.unstable_getCurrentPriorityLevel,Ir=t.unstable_ImmediatePriority,xn=t.unstable_UserBlockingPriority,Yr=t.unstable_NormalPriority,tr=t.unstable_LowPriority,tn=t.unstable_IdlePriority,fr=t.log,Ki=t.unstable_setDisableYieldValue,Er=null,wt=null;function sr(c){if(typeof fr=="function"&&Ki(c),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Er,c)}catch{}}var ur=Math.clz32?Math.clz32:Fr,Yt=Math.log,Kn=Math.LN2;function Fr(c){return c>>>=0,c===0?32:31-(Yt(c)/Kn|0)|0}var Gr=256,Sr=262144,Kr=4194304;function _r(c){var m=c&42;if(m!==0)return m;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function On(c,m,j){var _=c.pendingLanes;if(_===0)return 0;var F=0,K=c.suspendedLanes,pe=c.pingedLanes;c=c.warmLanes;var Te=_&134217727;return Te!==0?(_=Te&~K,_!==0?F=_r(_):(pe&=Te,pe!==0?F=_r(pe):j||(j=Te&~c,j!==0&&(F=_r(j))))):(Te=_&~K,Te!==0?F=_r(Te):pe!==0?F=_r(pe):j||(j=_&~c,j!==0&&(F=_r(j)))),F===0?0:m!==0&&m!==F&&(m&K)===0&&(K=F&-F,j=m&-m,K>=j||K===32&&(j&4194048)!==0)?m:F}function Qi(c,m){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&m)===0}function Ta(c,m){switch(c){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vi(){var c=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),c}function $a(c){for(var m=[],j=0;31>j;j++)m.push(c);return m}function vr(c,m){c.pendingLanes|=m,m!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Ia(c,m,j,_,F,K){var pe=c.pendingLanes;c.pendingLanes=j,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=j,c.entangledLanes&=j,c.errorRecoveryDisabledLanes&=j,c.shellSuspendCounter=0;var Te=c.entanglements,Ue=c.expirationTimes,ft=c.hiddenUpdates;for(j=pe&~j;0<j;){var It=31-ur(j),Mt=1<<It;Te[It]=0,Ue[It]=-1;var gt=ft[It];if(gt!==null)for(ft[It]=null,It=0;It<gt.length;It++){var jt=gt[It];jt!==null&&(jt.lane&=-536870913)}j&=~Mt}_!==0&&ml(c,_,0),K!==0&&F===0&&c.tag!==0&&(c.suspendedLanes|=K&~(pe&~m))}function ml(c,m,j){c.pendingLanes|=m,c.suspendedLanes&=~m;var _=31-ur(m);c.entangledLanes|=m,c.entanglements[_]=c.entanglements[_]|1073741824|j&261930}function pa(c,m){var j=c.entangledLanes|=m;for(c=c.entanglements;j;){var _=31-ur(j),F=1<<_;F&m|c[_]&m&&(c[_]|=m),j&=~F}}function Ds(c,m){var j=m&-m;return j=(j&42)!==0?1:Xr(j),(j&(c.suspendedLanes|m))!==0?0:j}function Xr(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function $t(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Qn(){var c=de.p;return c!==0?c:(c=window.event,c===void 0?32:uT(c.type))}function er(c,m){var j=de.p;try{return de.p=c,m()}finally{de.p=j}}var Yi=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Yi,vn="__reactProps$"+Yi,Bi="__reactContainer$"+Yi,Zi="__reactEvents$"+Yi,cs="__reactListeners$"+Yi,ds="__reactHandles$"+Yi,Vo="__reactResources$"+Yi,$o="__reactMarker$"+Yi;function Ga(c){delete c[Yn],delete c[vn],delete c[Zi],delete c[cs],delete c[ds]}function fi(c){var m=c[Yn];if(m)return m;for(var j=c.parentNode;j;){if(m=j[Bi]||j[Yn]){if(j=m.alternate,m.child!==null||j!==null&&j.child!==null)for(c=Q4(c);c!==null;){if(j=c[Yn])return j;c=Q4(c)}return m}c=j,j=c.parentNode}return null}function kn(c){if(c=c[Yn]||c[Bi]){var m=c.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return c}return null}function Go(c){var m=c.tag;if(m===5||m===26||m===27||m===6)return c.stateNode;throw Error(i(33))}function Ka(c){var m=c[Vo];return m||(m=c[Vo]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Oi(c){c[$o]=!0}var Rt=new Set,io={};function zn(c,m){us(c,m),us(c+"Capture",m)}function us(c,m){for(io[c]=m,c=0;c<m.length;c++)Rt.add(m[c])}var kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_n={},An={};function on(c){return yt.call(An,c)?!0:yt.call(_n,c)?!1:kl.test(c)?An[c]=!0:(_n[c]=!0,!1)}function Jr(c,m,j){if(on(m))if(j===null)c.removeAttribute(m);else{switch(typeof j){case"undefined":case"function":case"symbol":c.removeAttribute(m);return;case"boolean":var _=m.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){c.removeAttribute(m);return}}c.setAttribute(m,""+j)}}function Rn(c,m,j){if(j===null)c.removeAttribute(m);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttribute(m,""+j)}}function hs(c,m,j,_){if(_===null)c.removeAttribute(j);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(j);return}c.setAttributeNS(m,j,""+_)}}function Mr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Qa(c){var m=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ao(c,m,j){var _=Object.getOwnPropertyDescriptor(c.constructor.prototype,m);if(!c.hasOwnProperty(m)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var F=_.get,K=_.set;return Object.defineProperty(c,m,{configurable:!0,get:function(){return F.call(this)},set:function(pe){j=""+pe,K.call(this,pe)}}),Object.defineProperty(c,m,{enumerable:_.enumerable}),{getValue:function(){return j},setValue:function(pe){j=""+pe},stopTracking:function(){c._valueTracker=null,delete c[m]}}}}function ir(c){if(!c._valueTracker){var m=Qa(c)?"checked":"value";c._valueTracker=Ao(c,m,""+c[m])}}function Bn(c){if(!c)return!1;var m=c._valueTracker;if(!m)return!0;var j=m.getValue(),_="";return c&&(_=Qa(c)?c.checked?"true":"false":c.value),c=_,c!==j?(m.setValue(c),!0):!1}function Ya(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var di=/[\n"\\]/g;function Or(c){return c.replace(di,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Xi(c,m,j,_,F,K,pe,Te){c.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?c.type=pe:c.removeAttribute("type"),m!=null?pe==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+Mr(m)):c.value!==""+Mr(m)&&(c.value=""+Mr(m)):pe!=="submit"&&pe!=="reset"||c.removeAttribute("value"),m!=null?Pe(c,pe,Mr(m)):j!=null?Pe(c,pe,Mr(j)):_!=null&&c.removeAttribute("value"),F==null&&K!=null&&(c.defaultChecked=!!K),F!=null&&(c.checked=F&&typeof F!="function"&&typeof F!="symbol"),Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?c.name=""+Mr(Te):c.removeAttribute("name")}function nt(c,m,j,_,F,K,pe,Te){if(K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(c.type=K),m!=null||j!=null){if(!(K!=="submit"&&K!=="reset"||m!=null)){ir(c);return}j=j!=null?""+Mr(j):"",m=m!=null?""+Mr(m):j,Te||m===c.value||(c.value=m),c.defaultValue=m}_=_??F,_=typeof _!="function"&&typeof _!="symbol"&&!!_,c.checked=Te?c.checked:!!_,c.defaultChecked=!!_,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(c.name=pe),ir(c)}function Pe(c,m,j){m==="number"&&Ya(c.ownerDocument)===c||c.defaultValue===""+j||(c.defaultValue=""+j)}function Ht(c,m,j,_){if(c=c.options,m){m={};for(var F=0;F<j.length;F++)m["$"+j[F]]=!0;for(j=0;j<c.length;j++)F=m.hasOwnProperty("$"+c[j].value),c[j].selected!==F&&(c[j].selected=F),F&&_&&(c[j].defaultSelected=!0)}else{for(j=""+Mr(j),m=null,F=0;F<c.length;F++){if(c[F].value===j){c[F].selected=!0,_&&(c[F].defaultSelected=!0);return}m!==null||c[F].disabled||(m=c[F])}m!==null&&(m.selected=!0)}}function ri(c,m,j){if(m!=null&&(m=""+Mr(m),m!==c.value&&(c.value=m),j==null)){c.defaultValue!==m&&(c.defaultValue=m);return}c.defaultValue=j!=null?""+Mr(j):""}function la(c,m,j,_){if(m==null){if(_!=null){if(j!=null)throw Error(i(92));if(ce(_)){if(1<_.length)throw Error(i(93));_=_[0]}j=_}j==null&&(j=""),m=j}j=Mr(m),c.defaultValue=j,_=c.textContent,_===j&&_!==""&&_!==null&&(c.value=_),ir(c)}function Ps(c,m){if(m){var j=c.firstChild;if(j&&j===c.lastChild&&j.nodeType===3){j.nodeValue=m;return}}c.textContent=m}var Ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ga(c,m,j){var _=m.indexOf("--")===0;j==null||typeof j=="boolean"||j===""?_?c.setProperty(m,""):m==="float"?c.cssFloat="":c[m]="":_?c.setProperty(m,j):typeof j!="number"||j===0||Ko.has(m)?m==="float"?c.cssFloat=j:c[m]=(""+j).trim():c[m]=j+"px"}function Cr(c,m,j){if(m!=null&&typeof m!="object")throw Error(i(62));if(c=c.style,j!=null){for(var _ in j)!j.hasOwnProperty(_)||m!=null&&m.hasOwnProperty(_)||(_.indexOf("--")===0?c.setProperty(_,""):_==="float"?c.cssFloat="":c[_]="");for(var F in m)_=m[F],m.hasOwnProperty(F)&&j[F]!==_&&ga(c,F,_)}else for(var K in m)m.hasOwnProperty(K)&&ga(c,K,m[K])}function Jn(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(c){return Uc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function Za(){}var Eo=null;function Pl(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var bi=null,Ft=null;function ca(c){var m=kn(c);if(m&&(c=m.stateNode)){var j=c[vn]||null;e:switch(c=m.stateNode,m.type){case"input":if(Xi(c,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name),m=j.name,j.type==="radio"&&m!=null){for(j=c;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll('input[name="'+Or(""+m)+'"][type="radio"]'),m=0;m<j.length;m++){var _=j[m];if(_!==c&&_.form===c.form){var F=_[vn]||null;if(!F)throw Error(i(90));Xi(_,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(m=0;m<j.length;m++)_=j[m],_.form===c.form&&Bn(_)}break e;case"textarea":ri(c,j.value,j.defaultValue);break e;case"select":m=j.value,m!=null&&Ht(c,!!j.multiple,m,!1)}}}var Zt=!1;function hd(c,m,j){if(Zt)return c(m,j);Zt=!0;try{var _=c(m);return _}finally{if(Zt=!1,(bi!==null||Ft!==null)&&(fx(),bi&&(m=bi,c=Ft,Ft=bi=null,ca(m),c)))for(m=0;m<c.length;m++)ca(c[m])}}function Lr(c,m){var j=c.stateNode;if(j===null)return null;var _=j[vn]||null;if(_===null)return null;j=_[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(c=c.type,_=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!_;break e;default:c=!1}if(c)return null;if(j&&typeof j!="function")throw Error(i(231,m,typeof j));return j}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(Tn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){gc=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{gc=!1}var fs=null,Xa=null,mi=null;function Ks(){if(mi)return mi;var c,m=Xa,j=m.length,_,F="value"in fs?fs.value:fs.textContent,K=F.length;for(c=0;c<j&&m[c]===F[c];c++);var pe=j-c;for(_=1;_<=pe&&m[j-_]===F[K-_];_++);return mi=F.slice(c,1<_?1-_:void 0)}function Ja(c){var m=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&m===13&&(c=13)):c=m,c===10&&(c=13),32<=c||c===13?c:0}function Qo(){return!0}function yc(){return!1}function ki(c){function m(j,_,F,K,pe){this._reactName=j,this._targetInst=F,this.type=_,this.nativeEvent=K,this.target=pe,this.currentTarget=null;for(var Te in c)c.hasOwnProperty(Te)&&(j=c[Te],this[Te]=j?j(K):K[Te]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Qo:yc,this.isPropagationStopped=yc,this}return p(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var j=this.nativeEvent;j&&(j.preventDefault?j.preventDefault():typeof j.returnValue!="unknown"&&(j.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var j=this.nativeEvent;j&&(j.stopPropagation?j.stopPropagation():typeof j.cancelBubble!="unknown"&&(j.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),m}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=ki(ms),Yo=p({},ms,{view:0,detail:0}),mn=ki(Yo),$l,ya,ao,Gl=p({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ao&&(ao&&c.type==="mousemove"?($l=c.screenX-ao.screenX,ya=c.screenY-ao.screenY):ya=$l=0,ao=c),$l)},movementY:function(c){return"movementY"in c?c.movementY:ya}}),Fn=ki(Gl),_o=p({},Gl,{dataTransfer:0}),To=ki(_o),Io=p({},Yo,{relatedTarget:0}),Rl=ki(Io),pt=p({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),ee=ki(pt),we=p({},ms,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Re=ki(we),We=p({},ms,{data:0}),et=ki(We),Ct={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(c){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(c):(c=ar[c])?!!m[c]:!1}function Ur(){return Gt}var lr=p({},Yo,{key:function(c){if(c.key){var m=Ct[c.key]||c.key;if(m!=="Unidentified")return m}return c.type==="keypress"?(c=Ja(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Lt[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(c){return c.type==="keypress"?Ja(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ja(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Sn=ki(lr),ei=p({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zr=ki(ei),Xt=p({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),xa=ki(Xt),rn=p({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ei=ki(rn),es=p({},Gl,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),ts=ki(es),ka=p({},ms,{newState:0,oldState:0}),Zo=ki(ka),Da=[9,13,27,32],so=Tn&&"CompositionEvent"in window,oo=null;Tn&&"documentMode"in document&&(oo=document.documentMode);var Kl=Tn&&"TextEvent"in window&&!oo,Xo=Tn&&(!so||oo&&8<oo&&11>=oo),wi=" ",pl=!1;function Ql(c,m){switch(c){case"keyup":return Da.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jo(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var gl=!1;function qn(c,m){switch(c){case"compositionend":return Jo(m);case"keypress":return m.which!==32?null:(pl=!0,wi);case"textInput":return c=m.data,c===wi&&pl?null:c;default:return null}}function rs(c,m){if(gl)return c==="compositionend"||!so&&Ql(c,m)?(c=Ks(),mi=Xa=fs=null,gl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Xo&&m.locale!=="ko"?null:m.data;default:return null}}var ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qs(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m==="input"?!!ns[c.type]:m==="textarea"}function Fi(c,m,j,_){bi?Ft?Ft.push(_):Ft=[_]:bi=_,m=bx(m,"onChange"),0<m.length&&(j=new ji("onChange","change",null,j,_),c.push({event:j,listeners:m}))}var ps=null,el=null;function Ml(c){R4(c,0)}function lo(c){var m=Go(c);if(Bn(m))return c}function da(c,m){if(c==="change")return m}var Ys=!1;if(Tn){var _i;if(Tn){var is="oninput"in document;if(!is){var ln=document.createElement("div");ln.setAttribute("oninput","return;"),is=typeof ln.oninput=="function"}_i=is}else _i=!1;Ys=_i&&(!document.documentMode||9<document.documentMode)}function Zs(){ps&&(ps.detachEvent("onpropertychange",je),el=ps=null)}function je(c){if(c.propertyName==="value"&&lo(el)){var m=[];Fi(m,el,c,Pl(c)),hd(Ml,m)}}function h(c,m,j){c==="focusin"?(Zs(),ps=m,el=j,ps.attachEvent("onpropertychange",je)):c==="focusout"&&Zs()}function g(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return lo(el)}function b(c,m){if(c==="click")return lo(m)}function S(c,m){if(c==="input"||c==="change")return lo(m)}function A(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var I=typeof Object.is=="function"?Object.is:A;function R(c,m){if(I(c,m))return!0;if(typeof c!="object"||c===null||typeof m!="object"||m===null)return!1;var j=Object.keys(c),_=Object.keys(m);if(j.length!==_.length)return!1;for(_=0;_<j.length;_++){var F=j[_];if(!yt.call(m,F)||!I(c[F],m[F]))return!1}return!0}function V(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function te(c,m){var j=V(c);c=0;for(var _;j;){if(j.nodeType===3){if(_=c+j.textContent.length,c<=m&&_>=m)return{node:j,offset:m-c};c=_}e:{for(;j;){if(j.nextSibling){j=j.nextSibling;break e}j=j.parentNode}j=void 0}j=V(j)}}function ue(c,m){return c&&m?c===m?!0:c&&c.nodeType===3?!1:m&&m.nodeType===3?ue(c,m.parentNode):"contains"in c?c.contains(m):c.compareDocumentPosition?!!(c.compareDocumentPosition(m)&16):!1:!1}function ve(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var m=Ya(c.document);m instanceof c.HTMLIFrameElement;){try{var j=typeof m.contentWindow.location.href=="string"}catch{j=!1}if(j)c=m.contentWindow;else break;m=Ya(c.document)}return m}function Ne(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m&&(m==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||m==="textarea"||c.contentEditable==="true")}var Me=Tn&&"documentMode"in document&&11>=document.documentMode,qe=null,$e=null,Xe=null,ct=!1;function Tt(c,m,j){var _=j.window===j?j.document:j.nodeType===9?j:j.ownerDocument;ct||qe==null||qe!==Ya(_)||(_=qe,"selectionStart"in _&&Ne(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Xe&&R(Xe,_)||(Xe=_,_=bx($e,"onSelect"),0<_.length&&(m=new ji("onSelect","select",null,m,j),c.push({event:m,listeners:_}),m.target=qe)))}function _t(c,m){var j={};return j[c.toLowerCase()]=m.toLowerCase(),j["Webkit"+c]="webkit"+m,j["Moz"+c]="moz"+m,j}var At={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionrun:_t("Transition","TransitionRun"),transitionstart:_t("Transition","TransitionStart"),transitioncancel:_t("Transition","TransitionCancel"),transitionend:_t("Transition","TransitionEnd")},Tr={},qr={};Tn&&(qr=document.createElement("div").style,"AnimationEvent"in window||(delete At.animationend.animation,delete At.animationiteration.animation,delete At.animationstart.animation),"TransitionEvent"in window||delete At.transitionend.transition);function Mn(c){if(Tr[c])return Tr[c];if(!At[c])return c;var m=At[c],j;for(j in m)if(m.hasOwnProperty(j)&&j in qr)return Tr[c]=m[j];return c}var ua=Mn("animationend"),Pa=Mn("animationiteration"),Un=Mn("animationstart"),Ra=Mn("transitionrun"),Ms=Mn("transitionstart"),xc=Mn("transitioncancel"),Oo=Mn("transitionend"),ju=new Map,ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ko.push("scrollEnd");function tl(c,m){ju.set(c,m),zn(m,[c])}var Pd=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},rl=[],co=0,wu=0;function Rd(){for(var c=co,m=wu=co=0;m<c;){var j=rl[m];rl[m++]=null;var _=rl[m];rl[m++]=null;var F=rl[m];rl[m++]=null;var K=rl[m];if(rl[m++]=null,_!==null&&F!==null){var pe=_.pending;pe===null?F.next=F:(F.next=pe.next,pe.next=F),_.pending=F}K!==0&&bc(j,F,K)}}function vc(c,m,j,_){rl[co++]=c,rl[co++]=m,rl[co++]=j,rl[co++]=_,wu|=_,c.lanes|=_,c=c.alternate,c!==null&&(c.lanes|=_)}function wh(c,m,j,_){return vc(c,m,j,_),Ls(c)}function yl(c,m){return vc(c,null,null,m),Ls(c)}function bc(c,m,j){c.lanes|=j;var _=c.alternate;_!==null&&(_.lanes|=j);for(var F=!1,K=c.return;K!==null;)K.childLanes|=j,_=K.alternate,_!==null&&(_.childLanes|=j),K.tag===22&&(c=K.stateNode,c===null||c._visibility&1||(F=!0)),c=K,K=K.return;return c.tag===3?(K=c.stateNode,F&&m!==null&&(F=31-ur(j),c=K.hiddenUpdates,_=c[F],_===null?c[F]=[m]:_.push(m),m.lane=j|536870912),K):null}function Ls(c){if(50<M0)throw M0=0,Uj=null,Error(i(185));for(var m=c.return;m!==null;)c=m,m=c.return;return c.tag===3?c.stateNode:null}var gs={};function Sh(c,m,j,_){this.tag=c,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(c,m,j,_){return new Sh(c,m,j,_)}function Su(c){return c=c.prototype,!(!c||!c.isReactComponent)}function nl(c,m){var j=c.alternate;return j===null?(j=zs(c.tag,m,c.key,c.mode),j.elementType=c.elementType,j.type=c.type,j.stateNode=c.stateNode,j.alternate=c,c.alternate=j):(j.pendingProps=m,j.type=c.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=c.flags&65011712,j.childLanes=c.childLanes,j.lanes=c.lanes,j.child=c.child,j.memoizedProps=c.memoizedProps,j.memoizedState=c.memoizedState,j.updateQueue=c.updateQueue,m=c.dependencies,j.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},j.sibling=c.sibling,j.index=c.index,j.ref=c.ref,j.refCleanup=c.refCleanup,j}function Md(c,m){c.flags&=65011714;var j=c.alternate;return j===null?(c.childLanes=0,c.lanes=m,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=j.childLanes,c.lanes=j.lanes,c.child=j.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=j.memoizedProps,c.memoizedState=j.memoizedState,c.updateQueue=j.updateQueue,c.type=j.type,m=j.dependencies,c.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),c}function fd(c,m,j,_,F,K){var pe=0;if(_=c,typeof c=="function")Su(c)&&(pe=1);else if(typeof c=="string")pe=lV(c,j,H.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case z:return c=zs(31,j,m,F),c.elementType=z,c.lanes=K,c;case C:return Wc(j.children,F,K,m);case N:pe=8,F|=24;break;case T:return c=zs(12,j,m,F|2),c.elementType=T,c.lanes=K,c;case Y:return c=zs(13,j,m,F),c.elementType=Y,c.lanes=K,c;case q:return c=zs(19,j,m,F),c.elementType=q,c.lanes=K,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case D:pe=10;break e;case O:pe=9;break e;case M:pe=11;break e;case W:pe=14;break e;case J:pe=16,_=null;break e}pe=29,j=Error(i(130,c===null?"null":typeof c,"")),_=null}return m=zs(pe,j,m,F),m.elementType=c,m.type=_,m.lanes=K,m}function Wc(c,m,j,_){return c=zs(7,c,_,m),c.lanes=j,c}function Ld(c,m,j){return c=zs(6,c,null,m),c.lanes=j,c}function Cu(c){var m=zs(18,null,null,0);return m.stateNode=c,m}function zd(c,m,j){return m=zs(4,c.children!==null?c.children:[],c.key,m),m.lanes=j,m.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},m}var y=new WeakMap;function E(c,m){if(typeof c=="object"&&c!==null){var j=y.get(c);return j!==void 0?j:(m={value:c,source:m,stack:Bt(m)},y.set(c,m),m)}return{value:c,source:m,stack:Bt(m)}}var B=[],re=0,fe=null,Ee=0,Fe=[],tt=0,mt=null,kt=1,Kt="";function br(c,m){B[re++]=Ee,B[re++]=fe,fe=c,Ee=m}function Cn(c,m,j){Fe[tt++]=kt,Fe[tt++]=Kt,Fe[tt++]=mt,mt=c;var _=kt;c=Kt;var F=32-ur(_)-1;_&=~(1<<F),j+=1;var K=32-ur(m)+F;if(30<K){var pe=F-F%5;K=(_&(1<<pe)-1).toString(32),_>>=pe,F-=pe,kt=1<<32-ur(m)+F|j<<F|_,Kt=K+c}else kt=1<<K|j<<F|_,Kt=c}function Bs(c){c.return!==null&&(br(c,1),Cn(c,1,0))}function va(c){for(;c===fe;)fe=B[--re],B[re]=null,Ee=B[--re],B[re]=null;for(;c===mt;)mt=Fe[--tt],Fe[tt]=null,Kt=Fe[--tt],Fe[tt]=null,kt=Fe[--tt],Fe[tt]=null}function il(c,m){Fe[tt++]=kt,Fe[tt++]=Kt,Fe[tt++]=mt,kt=m.id,Kt=m.overflow,mt=c}var ni=null,ii=null,Ln=!1,uo=null,ha=!1,xl=Error(i(519));function Hc(c){var m=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bd(E(m,c)),xl}function Ch(c){var m=c.stateNode,j=c.type,_=c.memoizedProps;switch(m[Yn]=c,m[vn]=_,j){case"dialog":Vn("cancel",m),Vn("close",m);break;case"iframe":case"object":case"embed":Vn("load",m);break;case"video":case"audio":for(j=0;j<z0.length;j++)Vn(z0[j],m);break;case"source":Vn("error",m);break;case"img":case"image":case"link":Vn("error",m),Vn("load",m);break;case"details":Vn("toggle",m);break;case"input":Vn("invalid",m),nt(m,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":Vn("invalid",m);break;case"textarea":Vn("invalid",m),la(m,_.value,_.defaultValue,_.children)}j=_.children,typeof j!="string"&&typeof j!="number"&&typeof j!="bigint"||m.textContent===""+j||_.suppressHydrationWarning===!0||B4(m.textContent,j)?(_.popover!=null&&(Vn("beforetoggle",m),Vn("toggle",m)),_.onScroll!=null&&Vn("scroll",m),_.onScrollEnd!=null&&Vn("scrollend",m),_.onClick!=null&&(m.onclick=Za),m=!0):m=!1,m||Hc(c,!0)}function pi(c){for(ni=c.return;ni;)switch(ni.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:ni=ni.return}}function Ma(c){if(c!==ni)return!1;if(!Ln)return pi(c),Ln=!0,!1;var m=c.tag,j;if((j=m!==3&&m!==27)&&((j=m===5)&&(j=c.type,j=!(j!=="form"&&j!=="button")||n5(c.type,c.memoizedProps)),j=!j),j&&ii&&Hc(c),pi(c),m===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));ii=K4(c)}else if(m===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));ii=K4(c)}else m===27?(m=ii,zh(c.type)?(c=l5,l5=null,ii=c):ii=m):ii=ni?Gc(c.stateNode.nextSibling):null;return!0}function md(){ii=ni=null,Ln=!1}function bf(){var c=uo;return c!==null&&(rc===null?rc=c:rc.push.apply(rc,c),uo=null),c}function Bd(c){uo===null?uo=[c]:uo.push(c)}var Fd=$(null),jc=null,Yl=null;function qd(c,m,j){se(Fd,m._currentValue),m._currentValue=j}function Zl(c){c._currentValue=Fd.current,X(Fd)}function Nh(c,m,j){for(;c!==null;){var _=c.alternate;if((c.childLanes&m)!==m?(c.childLanes|=m,_!==null&&(_.childLanes|=m)):_!==null&&(_.childLanes&m)!==m&&(_.childLanes|=m),c===j)break;c=c.return}}function Nu(c,m,j,_){var F=c.child;for(F!==null&&(F.return=c);F!==null;){var K=F.dependencies;if(K!==null){var pe=F.child;K=K.firstContext;e:for(;K!==null;){var Te=K;K=F;for(var Ue=0;Ue<m.length;Ue++)if(Te.context===m[Ue]){K.lanes|=j,Te=K.alternate,Te!==null&&(Te.lanes|=j),Nh(K.return,j,c),_||(pe=null);break e}K=Te.next}}else if(F.tag===18){if(pe=F.return,pe===null)throw Error(i(341));pe.lanes|=j,K=pe.alternate,K!==null&&(K.lanes|=j),Nh(pe,j,c),pe=null}else pe=F.child;if(pe!==null)pe.return=F;else for(pe=F;pe!==null;){if(pe===c){pe=null;break}if(F=pe.sibling,F!==null){F.return=pe.return,pe=F;break}pe=pe.return}F=pe}}function Ud(c,m,j,_){c=null;for(var F=m,K=!1;F!==null;){if(!K){if((F.flags&524288)!==0)K=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var pe=F.alternate;if(pe===null)throw Error(i(387));if(pe=pe.memoizedProps,pe!==null){var Te=F.type;I(F.pendingProps.value,pe.value)||(c!==null?c.push(Te):c=[Te])}}else if(F===be.current){if(pe=F.alternate,pe===null)throw Error(i(387));pe.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(c!==null?c.push(W0):c=[W0])}F=F.return}c!==null&&Nu(m,c,j,_),m.flags|=262144}function Im(c){for(c=c.firstContext;c!==null;){if(!I(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Wd(c){jc=c,Yl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ho(c){return Ky(jc,c)}function Om(c,m){return jc===null&&Wd(c),Ky(c,m)}function Ky(c,m){var j=m._currentValue;if(m={context:m,memoizedValue:j,next:null},Yl===null){if(c===null)throw Error(i(308));Yl=m,c.dependencies={lanes:0,firstContext:m},c.flags|=524288}else Yl=Yl.next=m;return j}var oj=typeof AbortController<"u"?AbortController:function(){var c=[],m=this.signal={aborted:!1,addEventListener:function(j,_){c.push(_)}};this.abort=function(){m.aborted=!0,c.forEach(function(j){return j()})}},lj=t.unstable_scheduleCallback,cj=t.unstable_NormalPriority,as={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new oj,data:new Map,refCount:0}}function jf(c){c.refCount--,c.refCount===0&&lj(cj,function(){c.controller.abort()})}var wf=null,km=0,P=0,U=null;function ae(c,m){if(wf===null){var j=wf=[];km=0,P=Kj(),U={status:"pending",value:void 0,then:function(_){j.push(_)}}}return km++,m.then(he,he),m}function he(){if(--km===0&&wf!==null){U!==null&&(U.status="fulfilled");var c=wf;wf=null,P=0,U=null;for(var m=0;m<c.length;m++)(0,c[m])()}}function Ce(c,m){var j=[],_={status:"pending",value:null,reason:null,then:function(F){j.push(F)}};return c.then(function(){_.status="fulfilled",_.value=m;for(var F=0;F<j.length;F++)(0,j[F])(m)},function(F){for(_.status="rejected",_.reason=F,F=0;F<j.length;F++)(0,j[F])(void 0)}),_}var Ae=Q.S;Q.S=function(c,m){c4=zr(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&ae(c,m),Ae!==null&&Ae(c,m)};var _e=$(null);function Ie(){var c=_e.current;return c!==null?c:ea.pooledCache}function De(c,m){m===null?se(_e,_e.current):se(_e,m.pool)}function Be(){var c=Ie();return c===null?null:{parent:as._currentValue,pool:c}}var Ge=Error(i(460)),dt=Error(i(474)),ze=Error(i(542)),Ye={then:function(){}};function it(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Et(c,m,j){switch(j=c[j],j===void 0?c.push(m):j!==m&&(m.then(Za,Za),m=j),m.status){case"fulfilled":return m.value;case"rejected":throw c=m.reason,qt(c),c;default:if(typeof m.status=="string")m.then(Za,Za);else{if(c=ea,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=m,c.status="pending",c.then(function(_){if(m.status==="pending"){var F=m;F.status="fulfilled",F.value=_}},function(_){if(m.status==="pending"){var F=m;F.status="rejected",F.reason=_}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw c=m.reason,qt(c),c}throw Nt=m,Ge}}function lt(c){try{var m=c._init;return m(c._payload)}catch(j){throw j!==null&&typeof j=="object"&&typeof j.then=="function"?(Nt=j,Ge):j}}var Nt=null;function Ot(){if(Nt===null)throw Error(i(459));var c=Nt;return Nt=null,c}function qt(c){if(c===Ge||c===ze)throw Error(i(483))}var zt=null,Nr=0;function cr(c){var m=Nr;return Nr+=1,zt===null&&(zt=[]),Et(zt,c,m)}function un(c,m){m=m.props.ref,c.ref=m!==void 0?m:null}function gr(c,m){throw m.$$typeof===x?Error(i(525)):(c=Object.prototype.toString.call(m),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":c)))}function Wn(c){function m(rt,Ke){if(c){var ht=rt.deletions;ht===null?(rt.deletions=[Ke],rt.flags|=16):ht.push(Ke)}}function j(rt,Ke){if(!c)return null;for(;Ke!==null;)m(rt,Ke),Ke=Ke.sibling;return null}function _(rt){for(var Ke=new Map;rt!==null;)rt.key!==null?Ke.set(rt.key,rt):Ke.set(rt.index,rt),rt=rt.sibling;return Ke}function F(rt,Ke){return rt=nl(rt,Ke),rt.index=0,rt.sibling=null,rt}function K(rt,Ke,ht){return rt.index=ht,c?(ht=rt.alternate,ht!==null?(ht=ht.index,ht<Ke?(rt.flags|=67108866,Ke):ht):(rt.flags|=67108866,Ke)):(rt.flags|=1048576,Ke)}function pe(rt){return c&&rt.alternate===null&&(rt.flags|=67108866),rt}function Te(rt,Ke,ht,Dt){return Ke===null||Ke.tag!==6?(Ke=Ld(ht,rt.mode,Dt),Ke.return=rt,Ke):(Ke=F(Ke,ht),Ke.return=rt,Ke)}function Ue(rt,Ke,ht,Dt){var Vr=ht.type;return Vr===C?It(rt,Ke,ht.props.children,Dt,ht.key):Ke!==null&&(Ke.elementType===Vr||typeof Vr=="object"&&Vr!==null&&Vr.$$typeof===J&&lt(Vr)===Ke.type)?(Ke=F(Ke,ht.props),un(Ke,ht),Ke.return=rt,Ke):(Ke=fd(ht.type,ht.key,ht.props,null,rt.mode,Dt),un(Ke,ht),Ke.return=rt,Ke)}function ft(rt,Ke,ht,Dt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==ht.containerInfo||Ke.stateNode.implementation!==ht.implementation?(Ke=zd(ht,rt.mode,Dt),Ke.return=rt,Ke):(Ke=F(Ke,ht.children||[]),Ke.return=rt,Ke)}function It(rt,Ke,ht,Dt,Vr){return Ke===null||Ke.tag!==7?(Ke=Wc(ht,rt.mode,Dt,Vr),Ke.return=rt,Ke):(Ke=F(Ke,ht),Ke.return=rt,Ke)}function Mt(rt,Ke,ht){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ke=Ld(""+Ke,rt.mode,ht),Ke.return=rt,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:return ht=fd(Ke.type,Ke.key,Ke.props,null,rt.mode,ht),un(ht,Ke),ht.return=rt,ht;case w:return Ke=zd(Ke,rt.mode,ht),Ke.return=rt,Ke;case J:return Ke=lt(Ke),Mt(rt,Ke,ht)}if(ce(Ke)||Z(Ke))return Ke=Wc(Ke,rt.mode,ht,null),Ke.return=rt,Ke;if(typeof Ke.then=="function")return Mt(rt,cr(Ke),ht);if(Ke.$$typeof===D)return Mt(rt,Om(rt,Ke),ht);gr(rt,Ke)}return null}function gt(rt,Ke,ht,Dt){var Vr=Ke!==null?Ke.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Vr!==null?null:Te(rt,Ke,""+ht,Dt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case v:return ht.key===Vr?Ue(rt,Ke,ht,Dt):null;case w:return ht.key===Vr?ft(rt,Ke,ht,Dt):null;case J:return ht=lt(ht),gt(rt,Ke,ht,Dt)}if(ce(ht)||Z(ht))return Vr!==null?null:It(rt,Ke,ht,Dt,null);if(typeof ht.then=="function")return gt(rt,Ke,cr(ht),Dt);if(ht.$$typeof===D)return gt(rt,Ke,Om(rt,ht),Dt);gr(rt,ht)}return null}function jt(rt,Ke,ht,Dt,Vr){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return rt=rt.get(ht)||null,Te(Ke,rt,""+Dt,Vr);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case v:return rt=rt.get(Dt.key===null?ht:Dt.key)||null,Ue(Ke,rt,Dt,Vr);case w:return rt=rt.get(Dt.key===null?ht:Dt.key)||null,ft(Ke,rt,Dt,Vr);case J:return Dt=lt(Dt),jt(rt,Ke,ht,Dt,Vr)}if(ce(Dt)||Z(Dt))return rt=rt.get(ht)||null,It(Ke,rt,Dt,Vr,null);if(typeof Dt.then=="function")return jt(rt,Ke,ht,cr(Dt),Vr);if(Dt.$$typeof===D)return jt(rt,Ke,ht,Om(Ke,Dt),Vr);gr(Ke,Dt)}return null}function jr(rt,Ke,ht,Dt){for(var Vr=null,gi=null,Dr=Ke,In=Ke=0,Xn=null;Dr!==null&&In<ht.length;In++){Dr.index>In?(Xn=Dr,Dr=null):Xn=Dr.sibling;var yi=gt(rt,Dr,ht[In],Dt);if(yi===null){Dr===null&&(Dr=Xn);break}c&&Dr&&yi.alternate===null&&m(rt,Dr),Ke=K(yi,Ke,In),gi===null?Vr=yi:gi.sibling=yi,gi=yi,Dr=Xn}if(In===ht.length)return j(rt,Dr),Ln&&br(rt,In),Vr;if(Dr===null){for(;In<ht.length;In++)Dr=Mt(rt,ht[In],Dt),Dr!==null&&(Ke=K(Dr,Ke,In),gi===null?Vr=Dr:gi.sibling=Dr,gi=Dr);return Ln&&br(rt,In),Vr}for(Dr=_(Dr);In<ht.length;In++)Xn=jt(Dr,rt,In,ht[In],Dt),Xn!==null&&(c&&Xn.alternate!==null&&Dr.delete(Xn.key===null?In:Xn.key),Ke=K(Xn,Ke,In),gi===null?Vr=Xn:gi.sibling=Xn,gi=Xn);return c&&Dr.forEach(function(Wh){return m(rt,Wh)}),Ln&&br(rt,In),Vr}function nn(rt,Ke,ht,Dt){if(ht==null)throw Error(i(151));for(var Vr=null,gi=null,Dr=Ke,In=Ke=0,Xn=null,yi=ht.next();Dr!==null&&!yi.done;In++,yi=ht.next()){Dr.index>In?(Xn=Dr,Dr=null):Xn=Dr.sibling;var Wh=gt(rt,Dr,yi.value,Dt);if(Wh===null){Dr===null&&(Dr=Xn);break}c&&Dr&&Wh.alternate===null&&m(rt,Dr),Ke=K(Wh,Ke,In),gi===null?Vr=Wh:gi.sibling=Wh,gi=Wh,Dr=Xn}if(yi.done)return j(rt,Dr),Ln&&br(rt,In),Vr;if(Dr===null){for(;!yi.done;In++,yi=ht.next())yi=Mt(rt,yi.value,Dt),yi!==null&&(Ke=K(yi,Ke,In),gi===null?Vr=yi:gi.sibling=yi,gi=yi);return Ln&&br(rt,In),Vr}for(Dr=_(Dr);!yi.done;In++,yi=ht.next())yi=jt(Dr,rt,In,yi.value,Dt),yi!==null&&(c&&yi.alternate!==null&&Dr.delete(yi.key===null?In:yi.key),Ke=K(yi,Ke,In),gi===null?Vr=yi:gi.sibling=yi,gi=yi);return c&&Dr.forEach(function(vV){return m(rt,vV)}),Ln&&br(rt,In),Vr}function Hi(rt,Ke,ht,Dt){if(typeof ht=="object"&&ht!==null&&ht.type===C&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case v:e:{for(var Vr=ht.key;Ke!==null;){if(Ke.key===Vr){if(Vr=ht.type,Vr===C){if(Ke.tag===7){j(rt,Ke.sibling),Dt=F(Ke,ht.props.children),Dt.return=rt,rt=Dt;break e}}else if(Ke.elementType===Vr||typeof Vr=="object"&&Vr!==null&&Vr.$$typeof===J&&lt(Vr)===Ke.type){j(rt,Ke.sibling),Dt=F(Ke,ht.props),un(Dt,ht),Dt.return=rt,rt=Dt;break e}j(rt,Ke);break}else m(rt,Ke);Ke=Ke.sibling}ht.type===C?(Dt=Wc(ht.props.children,rt.mode,Dt,ht.key),Dt.return=rt,rt=Dt):(Dt=fd(ht.type,ht.key,ht.props,null,rt.mode,Dt),un(Dt,ht),Dt.return=rt,rt=Dt)}return pe(rt);case w:e:{for(Vr=ht.key;Ke!==null;){if(Ke.key===Vr)if(Ke.tag===4&&Ke.stateNode.containerInfo===ht.containerInfo&&Ke.stateNode.implementation===ht.implementation){j(rt,Ke.sibling),Dt=F(Ke,ht.children||[]),Dt.return=rt,rt=Dt;break e}else{j(rt,Ke);break}else m(rt,Ke);Ke=Ke.sibling}Dt=zd(ht,rt.mode,Dt),Dt.return=rt,rt=Dt}return pe(rt);case J:return ht=lt(ht),Hi(rt,Ke,ht,Dt)}if(ce(ht))return jr(rt,Ke,ht,Dt);if(Z(ht)){if(Vr=Z(ht),typeof Vr!="function")throw Error(i(150));return ht=Vr.call(ht),nn(rt,Ke,ht,Dt)}if(typeof ht.then=="function")return Hi(rt,Ke,cr(ht),Dt);if(ht.$$typeof===D)return Hi(rt,Ke,Om(rt,ht),Dt);gr(rt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,Ke!==null&&Ke.tag===6?(j(rt,Ke.sibling),Dt=F(Ke,ht),Dt.return=rt,rt=Dt):(j(rt,Ke),Dt=Ld(ht,rt.mode,Dt),Dt.return=rt,rt=Dt),pe(rt)):j(rt,Ke)}return function(rt,Ke,ht,Dt){try{Nr=0;var Vr=Hi(rt,Ke,ht,Dt);return zt=null,Vr}catch(Dr){if(Dr===Ge||Dr===ze)throw Dr;var gi=zs(29,Dr,null,rt.mode);return gi.lanes=Dt,gi.return=rt,gi}}}var Ji=Wn(!0),bn=Wn(!1),dr=!1;function Jt(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ba(c,m){c=c.updateQueue,m.updateQueue===c&&(m.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function en(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Nn(c,m,j){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,(Ni&2)!==0){var F=_.pending;return F===null?m.next=m:(m.next=F.next,F.next=m),_.pending=m,m=Ls(c),bc(c,null,j),m}return vc(c,_,m,j),Ls(c)}function Si(c,m,j){if(m=m.updateQueue,m!==null&&(m=m.shared,(j&4194048)!==0)){var _=m.lanes;_&=c.pendingLanes,j|=_,m.lanes=j,pa(c,j)}}function Fs(c,m){var j=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,j===_)){var F=null,K=null;if(j=j.firstBaseUpdate,j!==null){do{var pe={lane:j.lane,tag:j.tag,payload:j.payload,callback:null,next:null};K===null?F=K=pe:K=K.next=pe,j=j.next}while(j!==null);K===null?F=K=m:K=K.next=m}else F=K=m;j={baseState:_.baseState,firstBaseUpdate:F,lastBaseUpdate:K,shared:_.shared,callbacks:_.callbacks},c.updateQueue=j;return}c=j.lastBaseUpdate,c===null?j.firstBaseUpdate=m:c.next=m,j.lastBaseUpdate=m}var fo=!1;function qi(){if(fo){var c=U;if(c!==null)throw c}}function ys(c,m,j,_){fo=!1;var F=c.updateQueue;dr=!1;var K=F.firstBaseUpdate,pe=F.lastBaseUpdate,Te=F.shared.pending;if(Te!==null){F.shared.pending=null;var Ue=Te,ft=Ue.next;Ue.next=null,pe===null?K=ft:pe.next=ft,pe=Ue;var It=c.alternate;It!==null&&(It=It.updateQueue,Te=It.lastBaseUpdate,Te!==pe&&(Te===null?It.firstBaseUpdate=ft:Te.next=ft,It.lastBaseUpdate=Ue))}if(K!==null){var Mt=F.baseState;pe=0,It=ft=Ue=null,Te=K;do{var gt=Te.lane&-536870913,jt=gt!==Te.lane;if(jt?(Zn&gt)===gt:(_&gt)===gt){gt!==0&&gt===P&&(fo=!0),It!==null&&(It=It.next={lane:0,tag:Te.tag,payload:Te.payload,callback:null,next:null});e:{var jr=c,nn=Te;gt=m;var Hi=j;switch(nn.tag){case 1:if(jr=nn.payload,typeof jr=="function"){Mt=jr.call(Hi,Mt,gt);break e}Mt=jr;break e;case 3:jr.flags=jr.flags&-65537|128;case 0:if(jr=nn.payload,gt=typeof jr=="function"?jr.call(Hi,Mt,gt):jr,gt==null)break e;Mt=p({},Mt,gt);break e;case 2:dr=!0}}gt=Te.callback,gt!==null&&(c.flags|=64,jt&&(c.flags|=8192),jt=F.callbacks,jt===null?F.callbacks=[gt]:jt.push(gt))}else jt={lane:gt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},It===null?(ft=It=jt,Ue=Mt):It=It.next=jt,pe|=gt;if(Te=Te.next,Te===null){if(Te=F.shared.pending,Te===null)break;jt=Te,Te=jt.next,jt.next=null,F.lastBaseUpdate=jt,F.shared.pending=null}}while(!0);It===null&&(Ue=Mt),F.baseState=Ue,F.firstBaseUpdate=ft,F.lastBaseUpdate=It,K===null&&(F.shared.lanes=0),Dh|=pe,c.lanes=pe,c.memoizedState=Mt}}function Do(c,m){if(typeof c!="function")throw Error(i(191,c));c.call(m)}function xs(c,m){var j=c.callbacks;if(j!==null)for(c.callbacks=null,c=0;c<j.length;c++)Do(j[c],m)}var Dn=$(null),ai=$(0);function ja(c,m){c=Ru,se(ai,c),se(Dn,m),Ru=c|m.baseLanes}function ui(){se(ai,Ru),se(Dn,Dn.current)}function qs(){Ru=ai.current,X(Dn),X(ai)}var wa=$(null),si=null;function ss(c){var m=c.alternate;se(ti,ti.current&1),se(wa,c),si===null&&(m===null||Dn.current!==null||m.memoizedState!==null)&&(si=c)}function Ci(c){se(ti,ti.current),se(wa,c),si===null&&(si=c)}function vs(c){c.tag===22?(se(ti,ti.current),se(wa,c),si===null&&(si=c)):bs()}function bs(){se(ti,ti.current),se(wa,wa.current)}function Di(c){X(wa),si===c&&(si=null),X(ti)}var ti=$(0);function Po(c){for(var m=c;m!==null;){if(m.tag===13){var j=m.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||s5(j)||o5(j)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var La=0,Wr=null,Hr=null,oi=null,vl=!1,Xl=!1,al=!1,js=0,Hd=0,Vd=null,Dm=0;function Ui(){throw Error(i(321))}function x0(c,m){if(m===null)return!1;for(var j=0;j<m.length&&j<c.length;j++)if(!I(c[j],m[j]))return!1;return!0}function v0(c,m,j,_,F,K){return La=K,Wr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Q.H=c===null||c.memoizedState===null?b3:yj,al=!1,K=j(_,F),al=!1,Xl&&(K=pd(m,j,_,F)),Pm(c),K}function Pm(c){Q.H=E0;var m=Hr!==null&&Hr.next!==null;if(La=0,oi=Hr=Wr=null,vl=!1,Hd=0,Vd=null,m)throw Error(i(300));c===null||Js||(c=c.dependencies,c!==null&&Im(c)&&(Js=!0))}function pd(c,m,j,_){Wr=c;var F=0;do{if(Xl&&(Vd=null),Hd=0,Xl=!1,25<=F)throw Error(i(301));if(F+=1,oi=Hr=null,c.updateQueue!=null){var K=c.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}Q.H=j3,K=m(j,_)}while(Xl);return K}function dj(){var c=Q.H,m=c.useState()[0];return m=typeof m.then=="function"?$d(m):m,c=c.useState()[0],(Hr!==null?Hr.memoizedState:null)!==c&&(Wr.flags|=1024),m}function b0(){var c=js!==0;return js=0,c}function j0(c,m,j){m.updateQueue=c.updateQueue,m.flags&=-2053,c.lanes&=~j}function Rm(c){if(vl){for(c=c.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}vl=!1}La=0,oi=Hr=Wr=null,Xl=!1,Hd=js=0,Vd=null}function Xs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Wr.memoizedState=oi=c:oi=oi.next=c,oi}function za(){if(Hr===null){var c=Wr.alternate;c=c!==null?c.memoizedState:null}else c=Hr.next;var m=oi===null?Wr.memoizedState:oi.next;if(m!==null)oi=m,Hr=c;else{if(c===null)throw Wr.alternate===null?Error(i(467)):Error(i(310));Hr=c,c={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},oi===null?Wr.memoizedState=oi=c:oi=oi.next=c}return oi}function Sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $d(c){var m=Hd;return Hd+=1,Vd===null&&(Vd=[]),c=Et(Vd,c,m),m=Wr,(oi===null?m.memoizedState:oi.next)===null&&(m=m.alternate,Q.H=m===null||m.memoizedState===null?b3:yj),c}function Eh(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return $d(c);if(c.$$typeof===D)return ho(c)}throw Error(i(438,String(c)))}function Au(c){var m=null,j=Wr.updateQueue;if(j!==null&&(m=j.memoCache),m==null){var _=Wr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(m={data:_.data.map(function(F){return F.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),j===null&&(j=Sf(),Wr.updateQueue=j),j.memoCache=m,j=m.data[m.index],j===void 0)for(j=m.data[m.index]=Array(c),_=0;_<c;_++)j[_]=G;return m.index++,j}function Vc(c,m){return typeof m=="function"?m(c):m}function Mm(c){var m=za();return _h(m,Hr,c)}function _h(c,m,j){var _=c.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=j;var F=c.baseQueue,K=_.pending;if(K!==null){if(F!==null){var pe=F.next;F.next=K.next,K.next=pe}m.baseQueue=F=K,_.pending=null}if(K=c.baseState,F===null)c.memoizedState=K;else{m=F.next;var Te=pe=null,Ue=null,ft=m,It=!1;do{var Mt=ft.lane&-536870913;if(Mt!==ft.lane?(Zn&Mt)===Mt:(La&Mt)===Mt){var gt=ft.revertLane;if(gt===0)Ue!==null&&(Ue=Ue.next={lane:0,revertLane:0,gesture:null,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),Mt===P&&(It=!0);else if((La&gt)===gt){ft=ft.next,gt===P&&(It=!0);continue}else Mt={lane:0,revertLane:ft.revertLane,gesture:null,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Ue===null?(Te=Ue=Mt,pe=K):Ue=Ue.next=Mt,Wr.lanes|=gt,Dh|=gt;Mt=ft.action,al&&j(K,Mt),K=ft.hasEagerState?ft.eagerState:j(K,Mt)}else gt={lane:Mt,revertLane:ft.revertLane,gesture:ft.gesture,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Ue===null?(Te=Ue=gt,pe=K):Ue=Ue.next=gt,Wr.lanes|=Mt,Dh|=Mt;ft=ft.next}while(ft!==null&&ft!==m);if(Ue===null?pe=K:Ue.next=Te,!I(K,c.memoizedState)&&(Js=!0,It&&(j=U,j!==null)))throw j;c.memoizedState=K,c.baseState=pe,c.baseQueue=Ue,_.lastRenderedState=K}return F===null&&(_.lanes=0),[c.memoizedState,_.dispatch]}function Lm(c){var m=za(),j=m.queue;if(j===null)throw Error(i(311));j.lastRenderedReducer=c;var _=j.dispatch,F=j.pending,K=m.memoizedState;if(F!==null){j.pending=null;var pe=F=F.next;do K=c(K,pe.action),pe=pe.next;while(pe!==F);I(K,m.memoizedState)||(Js=!0),m.memoizedState=K,m.baseQueue===null&&(m.baseState=K),j.lastRenderedState=K}return[K,_]}function zm(c,m,j){var _=Wr,F=za(),K=Ln;if(K){if(j===void 0)throw Error(i(407));j=j()}else j=m();var pe=!I((Hr||F).memoizedState,j);if(pe&&(F.memoizedState=j,Js=!0),F=F.queue,uj(S0.bind(null,_,F,c),[c]),F.getSnapshot!==m||pe||oi!==null&&oi.memoizedState.tag&1){if(_.flags|=2048,_u(9,{destroy:void 0},w0.bind(null,_,F,j,m),null),ea===null)throw Error(i(349));K||(La&127)!==0||gd(_,m,j)}return j}function gd(c,m,j){c.flags|=16384,c={getSnapshot:m,value:j},m=Wr.updateQueue,m===null?(m=Sf(),Wr.updateQueue=m,m.stores=[c]):(j=m.stores,j===null?m.stores=[c]:j.push(c))}function w0(c,m,j,_){m.value=j,m.getSnapshot=_,Qy(m)&&C0(c)}function S0(c,m,j){return j(function(){Qy(m)&&C0(c)})}function Qy(c){var m=c.getSnapshot;c=c.value;try{var j=m();return!I(c,j)}catch{return!0}}function C0(c){var m=yl(c,2);m!==null&&nc(m,c,2)}function Gd(c){var m=Xs();if(typeof c=="function"){var j=c;if(c=j(),al){sr(!0);try{j()}finally{sr(!1)}}}return m.memoizedState=m.baseState=c,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:c},m}function Yy(c,m,j,_){return c.baseState=j,_h(c,Hr,typeof _=="function"?_:Vc)}function Zy(c,m,j,_,F){if(tx(c))throw Error(i(485));if(c=m.action,c!==null){var K={payload:F,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){K.listeners.push(pe)}};Q.T!==null?j(!0):K.isTransition=!1,_(K),j=m.pending,j===null?(K.next=m.pending=K,Xy(m,K)):(K.next=j.next,m.pending=j.next=K)}}function Xy(c,m){var j=m.action,_=m.payload,F=c.state;if(m.isTransition){var K=Q.T,pe={};Q.T=pe;try{var Te=j(F,_),Ue=Q.S;Ue!==null&&Ue(pe,Te),N0(c,m,Te)}catch(ft){Eu(c,m,ft)}finally{K!==null&&pe.types!==null&&(K.types=pe.types),Q.T=K}}else try{K=j(F,_),N0(c,m,K)}catch(ft){Eu(c,m,ft)}}function N0(c,m,j){j!==null&&typeof j=="object"&&typeof j.then=="function"?j.then(function(_){Jy(c,m,_)},function(_){return Eu(c,m,_)}):Jy(c,m,j)}function Jy(c,m,j){m.status="fulfilled",m.value=j,Bm(m),c.state=j,m=c.pending,m!==null&&(j=m.next,j===m?c.pending=null:(j=j.next,m.next=j,Xy(c,j)))}function Eu(c,m,j){var _=c.pending;if(c.pending=null,_!==null){_=_.next;do m.status="rejected",m.reason=j,Bm(m),m=m.next;while(m!==_)}c.action=null}function Bm(c){c=c.listeners;for(var m=0;m<c.length;m++)(0,c[m])()}function Cf(c,m){return m}function $c(c,m){if(Ln){var j=ea.formState;if(j!==null){e:{var _=Wr;if(Ln){if(ii){t:{for(var F=ii,K=ha;F.nodeType!==8;){if(!K){F=null;break t}if(F=Gc(F.nextSibling),F===null){F=null;break t}}K=F.data,F=K==="F!"||K==="F"?F:null}if(F){ii=Gc(F.nextSibling),_=F.data==="F!";break e}}Hc(_)}_=!1}_&&(m=j[0])}}return j=Xs(),j.memoizedState=j.baseState=m,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:m},j.queue=_,j=y3.bind(null,Wr,_),_.dispatch=j,_=Gd(!1),K=gj.bind(null,Wr,!1,_.queue),_=Xs(),F={state:m,dispatch:null,action:c,pending:null},_.queue=F,j=Zy.bind(null,Wr,F,K,j),F.dispatch=j,_.memoizedState=c,[m,j,!1]}function yd(c){var m=za();return xd(m,Hr,c)}function xd(c,m,j){if(m=_h(c,m,Cf)[0],c=Mm(Vc)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var _=$d(m)}catch(pe){throw pe===Ge?ze:pe}else _=m;m=za();var F=m.queue,K=F.dispatch;return j!==m.memoizedState&&(Wr.flags|=2048,_u(9,{destroy:void 0},Fm.bind(null,F,j),null)),[_,K,c]}function Fm(c,m){c.action=m}function qm(c){var m=za(),j=Hr;if(j!==null)return xd(m,j,c);za(),m=m.memoizedState,j=za();var _=j.queue.dispatch;return j.memoizedState=c,[m,_,!1]}function _u(c,m,j,_){return c={tag:c,create:j,deps:_,inst:m,next:null},m=Wr.updateQueue,m===null&&(m=Sf(),Wr.updateQueue=m),j=m.lastEffect,j===null?m.lastEffect=c.next=c:(_=j.next,j.next=c,c.next=_,m.lastEffect=c),c}function ex(){return za().memoizedState}function Th(c,m,j,_){var F=Xs();Wr.flags|=c,F.memoizedState=_u(1|m,{destroy:void 0},j,_===void 0?null:_)}function Ih(c,m,j,_){var F=za();_=_===void 0?null:_;var K=F.memoizedState.inst;Hr!==null&&_!==null&&x0(_,Hr.memoizedState.deps)?F.memoizedState=_u(m,K,j,_):(Wr.flags|=c,F.memoizedState=_u(1|m,K,j,_))}function n3(c,m){Th(8390656,8,c,m)}function uj(c,m){Ih(2048,8,c,m)}function fH(c){Wr.flags|=4;var m=Wr.updateQueue;if(m===null)m=Sf(),Wr.updateQueue=m,m.events=[c];else{var j=m.events;j===null?m.events=[c]:j.push(c)}}function i3(c){var m=za().memoizedState;return fH({ref:m,nextImpl:c}),function(){if((Ni&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}function a3(c,m){return Ih(4,2,c,m)}function s3(c,m){return Ih(4,4,c,m)}function o3(c,m){if(typeof m=="function"){c=c();var j=m(c);return function(){typeof j=="function"?j():m(null)}}if(m!=null)return c=c(),m.current=c,function(){m.current=null}}function l3(c,m,j){j=j!=null?j.concat([c]):null,Ih(4,4,o3.bind(null,m,c),j)}function hj(){}function c3(c,m){var j=za();m=m===void 0?null:m;var _=j.memoizedState;return m!==null&&x0(m,_[1])?_[0]:(j.memoizedState=[c,m],c)}function d3(c,m){var j=za();m=m===void 0?null:m;var _=j.memoizedState;if(m!==null&&x0(m,_[1]))return _[0];if(_=c(),al){sr(!0);try{c()}finally{sr(!1)}}return j.memoizedState=[_,m],_}function fj(c,m,j){return j===void 0||(La&1073741824)!==0&&(Zn&261930)===0?c.memoizedState=m:(c.memoizedState=j,c=u4(),Wr.lanes|=c,Dh|=c,j)}function u3(c,m,j,_){return I(j,m)?j:Dn.current!==null?(c=fj(c,j,_),I(c,m)||(Js=!0),c):(La&42)===0||(La&1073741824)!==0&&(Zn&261930)===0?(Js=!0,c.memoizedState=j):(c=u4(),Wr.lanes|=c,Dh|=c,m)}function h3(c,m,j,_,F){var K=de.p;de.p=K!==0&&8>K?K:8;var pe=Q.T,Te={};Q.T=Te,gj(c,!1,m,j);try{var Ue=F(),ft=Q.S;if(ft!==null&&ft(Te,Ue),Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var It=Ce(Ue,_);A0(c,m,It,Cc(c))}else A0(c,m,_,Cc(c))}catch(Mt){A0(c,m,{then:function(){},status:"rejected",reason:Mt},Cc())}finally{de.p=K,pe!==null&&Te.types!==null&&(pe.types=Te.types),Q.T=pe}}function mH(){}function mj(c,m,j,_){if(c.tag!==5)throw Error(i(476));var F=f3(c).queue;h3(c,F,m,le,j===null?mH:function(){return m3(c),j(_)})}function f3(c){var m=c.memoizedState;if(m!==null)return m;m={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:le},next:null};var j={};return m.next={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:j},next:null},c.memoizedState=m,c=c.alternate,c!==null&&(c.memoizedState=m),m}function m3(c){var m=f3(c);m.next===null&&(m=c.alternate.memoizedState),A0(c,m.next.queue,{},Cc())}function pj(){return ho(W0)}function p3(){return za().memoizedState}function g3(){return za().memoizedState}function pH(c){for(var m=c.return;m!==null;){switch(m.tag){case 24:case 3:var j=Cc();c=en(j);var _=Nn(m,c,j);_!==null&&(nc(_,m,j),Si(_,m,j)),m={cache:Ah()},c.payload=m;return}m=m.return}}function gH(c,m,j){var _=Cc();j={lane:_,revertLane:0,gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},tx(c)?x3(m,j):(j=wh(c,m,j,_),j!==null&&(nc(j,c,_),v3(j,m,_)))}function y3(c,m,j){var _=Cc();A0(c,m,j,_)}function A0(c,m,j,_){var F={lane:_,revertLane:0,gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null};if(tx(c))x3(m,F);else{var K=c.alternate;if(c.lanes===0&&(K===null||K.lanes===0)&&(K=m.lastRenderedReducer,K!==null))try{var pe=m.lastRenderedState,Te=K(pe,j);if(F.hasEagerState=!0,F.eagerState=Te,I(Te,pe))return vc(c,m,F,0),ea===null&&Rd(),!1}catch{}if(j=wh(c,m,F,_),j!==null)return nc(j,c,_),v3(j,m,_),!0}return!1}function gj(c,m,j,_){if(_={lane:2,revertLane:Kj(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},tx(c)){if(m)throw Error(i(479))}else m=wh(c,j,_,2),m!==null&&nc(m,c,2)}function tx(c){var m=c.alternate;return c===Wr||m!==null&&m===Wr}function x3(c,m){Xl=vl=!0;var j=c.pending;j===null?m.next=m:(m.next=j.next,j.next=m),c.pending=m}function v3(c,m,j){if((j&4194048)!==0){var _=m.lanes;_&=c.pendingLanes,j|=_,m.lanes=j,pa(c,j)}}var E0={readContext:ho,use:Eh,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useLayoutEffect:Ui,useInsertionEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useSyncExternalStore:Ui,useId:Ui,useHostTransitionStatus:Ui,useFormState:Ui,useActionState:Ui,useOptimistic:Ui,useMemoCache:Ui,useCacheRefresh:Ui};E0.useEffectEvent=Ui;var b3={readContext:ho,use:Eh,useCallback:function(c,m){return Xs().memoizedState=[c,m===void 0?null:m],c},useContext:ho,useEffect:n3,useImperativeHandle:function(c,m,j){j=j!=null?j.concat([c]):null,Th(4194308,4,o3.bind(null,m,c),j)},useLayoutEffect:function(c,m){return Th(4194308,4,c,m)},useInsertionEffect:function(c,m){Th(4,2,c,m)},useMemo:function(c,m){var j=Xs();m=m===void 0?null:m;var _=c();if(al){sr(!0);try{c()}finally{sr(!1)}}return j.memoizedState=[_,m],_},useReducer:function(c,m,j){var _=Xs();if(j!==void 0){var F=j(m);if(al){sr(!0);try{j(m)}finally{sr(!1)}}}else F=m;return _.memoizedState=_.baseState=F,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:F},_.queue=c,c=c.dispatch=gH.bind(null,Wr,c),[_.memoizedState,c]},useRef:function(c){var m=Xs();return c={current:c},m.memoizedState=c},useState:function(c){c=Gd(c);var m=c.queue,j=y3.bind(null,Wr,m);return m.dispatch=j,[c.memoizedState,j]},useDebugValue:hj,useDeferredValue:function(c,m){var j=Xs();return fj(j,c,m)},useTransition:function(){var c=Gd(!1);return c=h3.bind(null,Wr,c.queue,!0,!1),Xs().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,m,j){var _=Wr,F=Xs();if(Ln){if(j===void 0)throw Error(i(407));j=j()}else{if(j=m(),ea===null)throw Error(i(349));(Zn&127)!==0||gd(_,m,j)}F.memoizedState=j;var K={value:j,getSnapshot:m};return F.queue=K,n3(S0.bind(null,_,K,c),[c]),_.flags|=2048,_u(9,{destroy:void 0},w0.bind(null,_,K,j,m),null),j},useId:function(){var c=Xs(),m=ea.identifierPrefix;if(Ln){var j=Kt,_=kt;j=(_&~(1<<32-ur(_)-1)).toString(32)+j,m="_"+m+"R_"+j,j=js++,0<j&&(m+="H"+j.toString(32)),m+="_"}else j=Dm++,m="_"+m+"r_"+j.toString(32)+"_";return c.memoizedState=m},useHostTransitionStatus:pj,useFormState:$c,useActionState:$c,useOptimistic:function(c){var m=Xs();m.memoizedState=m.baseState=c;var j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=j,m=gj.bind(null,Wr,!0,j),j.dispatch=m,[c,m]},useMemoCache:Au,useCacheRefresh:function(){return Xs().memoizedState=pH.bind(null,Wr)},useEffectEvent:function(c){var m=Xs(),j={impl:c};return m.memoizedState=j,function(){if((Ni&2)!==0)throw Error(i(440));return j.impl.apply(void 0,arguments)}}},yj={readContext:ho,use:Eh,useCallback:c3,useContext:ho,useEffect:uj,useImperativeHandle:l3,useInsertionEffect:a3,useLayoutEffect:s3,useMemo:d3,useReducer:Mm,useRef:ex,useState:function(){return Mm(Vc)},useDebugValue:hj,useDeferredValue:function(c,m){var j=za();return u3(j,Hr.memoizedState,c,m)},useTransition:function(){var c=Mm(Vc)[0],m=za().memoizedState;return[typeof c=="boolean"?c:$d(c),m]},useSyncExternalStore:zm,useId:p3,useHostTransitionStatus:pj,useFormState:yd,useActionState:yd,useOptimistic:function(c,m){var j=za();return Yy(j,Hr,c,m)},useMemoCache:Au,useCacheRefresh:g3};yj.useEffectEvent=i3;var j3={readContext:ho,use:Eh,useCallback:c3,useContext:ho,useEffect:uj,useImperativeHandle:l3,useInsertionEffect:a3,useLayoutEffect:s3,useMemo:d3,useReducer:Lm,useRef:ex,useState:function(){return Lm(Vc)},useDebugValue:hj,useDeferredValue:function(c,m){var j=za();return Hr===null?fj(j,c,m):u3(j,Hr.memoizedState,c,m)},useTransition:function(){var c=Lm(Vc)[0],m=za().memoizedState;return[typeof c=="boolean"?c:$d(c),m]},useSyncExternalStore:zm,useId:p3,useHostTransitionStatus:pj,useFormState:qm,useActionState:qm,useOptimistic:function(c,m){var j=za();return Hr!==null?Yy(j,Hr,c,m):(j.baseState=c,[c,j.queue.dispatch])},useMemoCache:Au,useCacheRefresh:g3};j3.useEffectEvent=i3;function xj(c,m,j,_){m=c.memoizedState,j=j(_,m),j=j==null?m:p({},m,j),c.memoizedState=j,c.lanes===0&&(c.updateQueue.baseState=j)}var vj={enqueueSetState:function(c,m,j){c=c._reactInternals;var _=Cc(),F=en(_);F.payload=m,j!=null&&(F.callback=j),m=Nn(c,F,_),m!==null&&(nc(m,c,_),Si(m,c,_))},enqueueReplaceState:function(c,m,j){c=c._reactInternals;var _=Cc(),F=en(_);F.tag=1,F.payload=m,j!=null&&(F.callback=j),m=Nn(c,F,_),m!==null&&(nc(m,c,_),Si(m,c,_))},enqueueForceUpdate:function(c,m){c=c._reactInternals;var j=Cc(),_=en(j);_.tag=2,m!=null&&(_.callback=m),m=Nn(c,_,j),m!==null&&(nc(m,c,j),Si(m,c,j))}};function w3(c,m,j,_,F,K,pe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,K,pe):m.prototype&&m.prototype.isPureReactComponent?!R(j,_)||!R(F,K):!0}function S3(c,m,j,_){c=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(j,_),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(j,_),m.state!==c&&vj.enqueueReplaceState(m,m.state,null)}function Nf(c,m){var j=m;if("ref"in m){j={};for(var _ in m)_!=="ref"&&(j[_]=m[_])}if(c=c.defaultProps){j===m&&(j=p({},j));for(var F in c)j[F]===void 0&&(j[F]=c[F])}return j}function C3(c){Pd(c)}function N3(c){console.error(c)}function A3(c){Pd(c)}function rx(c,m){try{var j=c.onUncaughtError;j(m.value,{componentStack:m.stack})}catch(_){setTimeout(function(){throw _})}}function E3(c,m,j){try{var _=c.onCaughtError;_(j.value,{componentStack:j.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function bj(c,m,j){return j=en(j),j.tag=3,j.payload={element:null},j.callback=function(){rx(c,m)},j}function _3(c){return c=en(c),c.tag=3,c}function T3(c,m,j,_){var F=j.type.getDerivedStateFromError;if(typeof F=="function"){var K=_.value;c.payload=function(){return F(K)},c.callback=function(){E3(m,j,_)}}var pe=j.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(c.callback=function(){E3(m,j,_),typeof F!="function"&&(Ph===null?Ph=new Set([this]):Ph.add(this));var Te=_.stack;this.componentDidCatch(_.value,{componentStack:Te!==null?Te:""})})}function yH(c,m,j,_,F){if(j.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(m=j.alternate,m!==null&&Ud(m,j,F,!0),j=wa.current,j!==null){switch(j.tag){case 31:case 13:return si===null?mx():j.alternate===null&&ws===0&&(ws=3),j.flags&=-257,j.flags|=65536,j.lanes=F,_===Ye?j.flags|=16384:(m=j.updateQueue,m===null?j.updateQueue=new Set([_]):m.add(_),Vj(c,_,F)),!1;case 22:return j.flags|=65536,_===Ye?j.flags|=16384:(m=j.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([_])},j.updateQueue=m):(j=m.retryQueue,j===null?m.retryQueue=new Set([_]):j.add(_)),Vj(c,_,F)),!1}throw Error(i(435,j.tag))}return Vj(c,_,F),mx(),!1}if(Ln)return m=wa.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=F,_!==xl&&(c=Error(i(422),{cause:_}),Bd(E(c,j)))):(_!==xl&&(m=Error(i(423),{cause:_}),Bd(E(m,j))),c=c.current.alternate,c.flags|=65536,F&=-F,c.lanes|=F,_=E(_,j),F=bj(c.stateNode,_,F),Fs(c,F),ws!==4&&(ws=2)),!1;var K=Error(i(520),{cause:_});if(K=E(K,j),R0===null?R0=[K]:R0.push(K),ws!==4&&(ws=2),m===null)return!0;_=E(_,j),j=m;do{switch(j.tag){case 3:return j.flags|=65536,c=F&-F,j.lanes|=c,c=bj(j.stateNode,_,c),Fs(j,c),!1;case 1:if(m=j.type,K=j.stateNode,(j.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Ph===null||!Ph.has(K))))return j.flags|=65536,F&=-F,j.lanes|=F,F=_3(F),T3(F,c,j,_),Fs(j,F),!1}j=j.return}while(j!==null);return!1}var jj=Error(i(461)),Js=!1;function sl(c,m,j,_){m.child=c===null?bn(m,null,j,_):Ji(m,c.child,j,_)}function I3(c,m,j,_,F){j=j.render;var K=m.ref;if("ref"in _){var pe={};for(var Te in _)Te!=="ref"&&(pe[Te]=_[Te])}else pe=_;return Wd(m),_=v0(c,m,j,pe,K,F),Te=b0(),c!==null&&!Js?(j0(c,m,F),Tu(c,m,F)):(Ln&&Te&&Bs(m),m.flags|=1,sl(c,m,_,F),m.child)}function O3(c,m,j,_,F){if(c===null){var K=j.type;return typeof K=="function"&&!Su(K)&&K.defaultProps===void 0&&j.compare===null?(m.tag=15,m.type=K,k3(c,m,K,_,F)):(c=fd(j.type,null,_,m,m.mode,F),c.ref=m.ref,c.return=m,m.child=c)}if(K=c.child,!Tj(c,F)){var pe=K.memoizedProps;if(j=j.compare,j=j!==null?j:R,j(pe,_)&&c.ref===m.ref)return Tu(c,m,F)}return m.flags|=1,c=nl(K,_),c.ref=m.ref,c.return=m,m.child=c}function k3(c,m,j,_,F){if(c!==null){var K=c.memoizedProps;if(R(K,_)&&c.ref===m.ref)if(Js=!1,m.pendingProps=_=K,Tj(c,F))(c.flags&131072)!==0&&(Js=!0);else return m.lanes=c.lanes,Tu(c,m,F)}return wj(c,m,j,_,F)}function D3(c,m,j,_){var F=_.children,K=c!==null?c.memoizedState:null;if(c===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((m.flags&128)!==0){if(K=K!==null?K.baseLanes|j:j,c!==null){for(_=m.child=c.child,F=0;_!==null;)F=F|_.lanes|_.childLanes,_=_.sibling;_=F&~K}else _=0,m.child=null;return P3(c,m,K,j,_)}if((j&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},c!==null&&De(m,K!==null?K.cachePool:null),K!==null?ja(m,K):ui(),vs(m);else return _=m.lanes=536870912,P3(c,m,K!==null?K.baseLanes|j:j,j,_)}else K!==null?(De(m,K.cachePool),ja(m,K),bs(),m.memoizedState=null):(c!==null&&De(m,null),ui(),bs());return sl(c,m,F,j),m.child}function _0(c,m){return c!==null&&c.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function P3(c,m,j,_,F){var K=Ie();return K=K===null?null:{parent:as._currentValue,pool:K},m.memoizedState={baseLanes:j,cachePool:K},c!==null&&De(m,null),ui(),vs(m),c!==null&&Ud(c,m,_,!0),m.childLanes=F,null}function nx(c,m){return m=ax({mode:m.mode,children:m.children},c.mode),m.ref=c.ref,c.child=m,m.return=c,m}function R3(c,m,j){return Ji(m,c.child,null,j),c=nx(m,m.pendingProps),c.flags|=2,Di(m),m.memoizedState=null,c}function xH(c,m,j){var _=m.pendingProps,F=(m.flags&128)!==0;if(m.flags&=-129,c===null){if(Ln){if(_.mode==="hidden")return c=nx(m,_),m.lanes=536870912,_0(null,c);if(Ci(m),(c=ii)?(c=G4(c,ha),c=c!==null&&c.data==="&"?c:null,c!==null&&(m.memoizedState={dehydrated:c,treeContext:mt!==null?{id:kt,overflow:Kt}:null,retryLane:536870912,hydrationErrors:null},j=Cu(c),j.return=m,m.child=j,ni=m,ii=null)):c=null,c===null)throw Hc(m);return m.lanes=536870912,null}return nx(m,_)}var K=c.memoizedState;if(K!==null){var pe=K.dehydrated;if(Ci(m),F)if(m.flags&256)m.flags&=-257,m=R3(c,m,j);else if(m.memoizedState!==null)m.child=c.child,m.flags|=128,m=null;else throw Error(i(558));else if(Js||Ud(c,m,j,!1),F=(j&c.childLanes)!==0,Js||F){if(_=ea,_!==null&&(pe=Ds(_,j),pe!==0&&pe!==K.retryLane))throw K.retryLane=pe,yl(c,pe),nc(_,c,pe),jj;mx(),m=R3(c,m,j)}else c=K.treeContext,ii=Gc(pe.nextSibling),ni=m,Ln=!0,uo=null,ha=!1,c!==null&&il(m,c),m=nx(m,_),m.flags|=4096;return m}return c=nl(c.child,{mode:_.mode,children:_.children}),c.ref=m.ref,m.child=c,c.return=m,c}function ix(c,m){var j=m.ref;if(j===null)c!==null&&c.ref!==null&&(m.flags|=4194816);else{if(typeof j!="function"&&typeof j!="object")throw Error(i(284));(c===null||c.ref!==j)&&(m.flags|=4194816)}}function wj(c,m,j,_,F){return Wd(m),j=v0(c,m,j,_,void 0,F),_=b0(),c!==null&&!Js?(j0(c,m,F),Tu(c,m,F)):(Ln&&_&&Bs(m),m.flags|=1,sl(c,m,j,F),m.child)}function M3(c,m,j,_,F,K){return Wd(m),m.updateQueue=null,j=pd(m,_,j,F),Pm(c),_=b0(),c!==null&&!Js?(j0(c,m,K),Tu(c,m,K)):(Ln&&_&&Bs(m),m.flags|=1,sl(c,m,j,K),m.child)}function L3(c,m,j,_,F){if(Wd(m),m.stateNode===null){var K=gs,pe=j.contextType;typeof pe=="object"&&pe!==null&&(K=ho(pe)),K=new j(_,K),m.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=vj,m.stateNode=K,K._reactInternals=m,K=m.stateNode,K.props=_,K.state=m.memoizedState,K.refs={},Jt(m),pe=j.contextType,K.context=typeof pe=="object"&&pe!==null?ho(pe):gs,K.state=m.memoizedState,pe=j.getDerivedStateFromProps,typeof pe=="function"&&(xj(m,j,pe,_),K.state=m.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(pe=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),pe!==K.state&&vj.enqueueReplaceState(K,K.state,null),ys(m,_,K,F),qi(),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308),_=!0}else if(c===null){K=m.stateNode;var Te=m.memoizedProps,Ue=Nf(j,Te);K.props=Ue;var ft=K.context,It=j.contextType;pe=gs,typeof It=="object"&&It!==null&&(pe=ho(It));var Mt=j.getDerivedStateFromProps;It=typeof Mt=="function"||typeof K.getSnapshotBeforeUpdate=="function",Te=m.pendingProps!==Te,It||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(Te||ft!==pe)&&S3(m,K,_,pe),dr=!1;var gt=m.memoizedState;K.state=gt,ys(m,_,K,F),qi(),ft=m.memoizedState,Te||gt!==ft||dr?(typeof Mt=="function"&&(xj(m,j,Mt,_),ft=m.memoizedState),(Ue=dr||w3(m,j,Ue,_,gt,ft,pe))?(It||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=_,m.memoizedState=ft),K.props=_,K.state=ft,K.context=pe,_=Ue):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),_=!1)}else{K=m.stateNode,ba(c,m),pe=m.memoizedProps,It=Nf(j,pe),K.props=It,Mt=m.pendingProps,gt=K.context,ft=j.contextType,Ue=gs,typeof ft=="object"&&ft!==null&&(Ue=ho(ft)),Te=j.getDerivedStateFromProps,(ft=typeof Te=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==Mt||gt!==Ue)&&S3(m,K,_,Ue),dr=!1,gt=m.memoizedState,K.state=gt,ys(m,_,K,F),qi();var jt=m.memoizedState;pe!==Mt||gt!==jt||dr||c!==null&&c.dependencies!==null&&Im(c.dependencies)?(typeof Te=="function"&&(xj(m,j,Te,_),jt=m.memoizedState),(It=dr||w3(m,j,It,_,gt,jt,Ue)||c!==null&&c.dependencies!==null&&Im(c.dependencies))?(ft||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(_,jt,Ue),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(_,jt,Ue)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||pe===c.memoizedProps&&gt===c.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===c.memoizedProps&&gt===c.memoizedState||(m.flags|=1024),m.memoizedProps=_,m.memoizedState=jt),K.props=_,K.state=jt,K.context=Ue,_=It):(typeof K.componentDidUpdate!="function"||pe===c.memoizedProps&&gt===c.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===c.memoizedProps&&gt===c.memoizedState||(m.flags|=1024),_=!1)}return K=_,ix(c,m),_=(m.flags&128)!==0,K||_?(K=m.stateNode,j=_&&typeof j.getDerivedStateFromError!="function"?null:K.render(),m.flags|=1,c!==null&&_?(m.child=Ji(m,c.child,null,F),m.child=Ji(m,null,j,F)):sl(c,m,j,F),m.memoizedState=K.state,c=m.child):c=Tu(c,m,F),c}function z3(c,m,j,_){return md(),m.flags|=256,sl(c,m,j,_),m.child}var Sj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cj(c){return{baseLanes:c,cachePool:Be()}}function Nj(c,m,j){return c=c!==null?c.childLanes&~j:0,m&&(c|=Sc),c}function B3(c,m,j){var _=m.pendingProps,F=!1,K=(m.flags&128)!==0,pe;if((pe=K)||(pe=c!==null&&c.memoizedState===null?!1:(ti.current&2)!==0),pe&&(F=!0,m.flags&=-129),pe=(m.flags&32)!==0,m.flags&=-33,c===null){if(Ln){if(F?ss(m):bs(),(c=ii)?(c=G4(c,ha),c=c!==null&&c.data!=="&"?c:null,c!==null&&(m.memoizedState={dehydrated:c,treeContext:mt!==null?{id:kt,overflow:Kt}:null,retryLane:536870912,hydrationErrors:null},j=Cu(c),j.return=m,m.child=j,ni=m,ii=null)):c=null,c===null)throw Hc(m);return o5(c)?m.lanes=32:m.lanes=536870912,null}var Te=_.children;return _=_.fallback,F?(bs(),F=m.mode,Te=ax({mode:"hidden",children:Te},F),_=Wc(_,F,j,null),Te.return=m,_.return=m,Te.sibling=_,m.child=Te,_=m.child,_.memoizedState=Cj(j),_.childLanes=Nj(c,pe,j),m.memoizedState=Sj,_0(null,_)):(ss(m),Aj(m,Te))}var Ue=c.memoizedState;if(Ue!==null&&(Te=Ue.dehydrated,Te!==null)){if(K)m.flags&256?(ss(m),m.flags&=-257,m=Ej(c,m,j)):m.memoizedState!==null?(bs(),m.child=c.child,m.flags|=128,m=null):(bs(),Te=_.fallback,F=m.mode,_=ax({mode:"visible",children:_.children},F),Te=Wc(Te,F,j,null),Te.flags|=2,_.return=m,Te.return=m,_.sibling=Te,m.child=_,Ji(m,c.child,null,j),_=m.child,_.memoizedState=Cj(j),_.childLanes=Nj(c,pe,j),m.memoizedState=Sj,m=_0(null,_));else if(ss(m),o5(Te)){if(pe=Te.nextSibling&&Te.nextSibling.dataset,pe)var ft=pe.dgst;pe=ft,_=Error(i(419)),_.stack="",_.digest=pe,Bd({value:_,source:null,stack:null}),m=Ej(c,m,j)}else if(Js||Ud(c,m,j,!1),pe=(j&c.childLanes)!==0,Js||pe){if(pe=ea,pe!==null&&(_=Ds(pe,j),_!==0&&_!==Ue.retryLane))throw Ue.retryLane=_,yl(c,_),nc(pe,c,_),jj;s5(Te)||mx(),m=Ej(c,m,j)}else s5(Te)?(m.flags|=192,m.child=c.child,m=null):(c=Ue.treeContext,ii=Gc(Te.nextSibling),ni=m,Ln=!0,uo=null,ha=!1,c!==null&&il(m,c),m=Aj(m,_.children),m.flags|=4096);return m}return F?(bs(),Te=_.fallback,F=m.mode,Ue=c.child,ft=Ue.sibling,_=nl(Ue,{mode:"hidden",children:_.children}),_.subtreeFlags=Ue.subtreeFlags&65011712,ft!==null?Te=nl(ft,Te):(Te=Wc(Te,F,j,null),Te.flags|=2),Te.return=m,_.return=m,_.sibling=Te,m.child=_,_0(null,_),_=m.child,Te=c.child.memoizedState,Te===null?Te=Cj(j):(F=Te.cachePool,F!==null?(Ue=as._currentValue,F=F.parent!==Ue?{parent:Ue,pool:Ue}:F):F=Be(),Te={baseLanes:Te.baseLanes|j,cachePool:F}),_.memoizedState=Te,_.childLanes=Nj(c,pe,j),m.memoizedState=Sj,_0(c.child,_)):(ss(m),j=c.child,c=j.sibling,j=nl(j,{mode:"visible",children:_.children}),j.return=m,j.sibling=null,c!==null&&(pe=m.deletions,pe===null?(m.deletions=[c],m.flags|=16):pe.push(c)),m.child=j,m.memoizedState=null,j)}function Aj(c,m){return m=ax({mode:"visible",children:m},c.mode),m.return=c,c.child=m}function ax(c,m){return c=zs(22,c,null,m),c.lanes=0,c}function Ej(c,m,j){return Ji(m,c.child,null,j),c=Aj(m,m.pendingProps.children),c.flags|=2,m.memoizedState=null,c}function F3(c,m,j){c.lanes|=m;var _=c.alternate;_!==null&&(_.lanes|=m),Nh(c.return,m,j)}function _j(c,m,j,_,F,K){var pe=c.memoizedState;pe===null?c.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:_,tail:j,tailMode:F,treeForkCount:K}:(pe.isBackwards=m,pe.rendering=null,pe.renderingStartTime=0,pe.last=_,pe.tail=j,pe.tailMode=F,pe.treeForkCount=K)}function q3(c,m,j){var _=m.pendingProps,F=_.revealOrder,K=_.tail;_=_.children;var pe=ti.current,Te=(pe&2)!==0;if(Te?(pe=pe&1|2,m.flags|=128):pe&=1,se(ti,pe),sl(c,m,_,j),_=Ln?Ee:0,!Te&&c!==null&&(c.flags&128)!==0)e:for(c=m.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&F3(c,j,m);else if(c.tag===19)F3(c,j,m);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===m)break e;for(;c.sibling===null;){if(c.return===null||c.return===m)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(F){case"forwards":for(j=m.child,F=null;j!==null;)c=j.alternate,c!==null&&Po(c)===null&&(F=j),j=j.sibling;j=F,j===null?(F=m.child,m.child=null):(F=j.sibling,j.sibling=null),_j(m,!1,F,j,K,_);break;case"backwards":case"unstable_legacy-backwards":for(j=null,F=m.child,m.child=null;F!==null;){if(c=F.alternate,c!==null&&Po(c)===null){m.child=F;break}c=F.sibling,F.sibling=j,j=F,F=c}_j(m,!0,j,null,K,_);break;case"together":_j(m,!1,null,null,void 0,_);break;default:m.memoizedState=null}return m.child}function Tu(c,m,j){if(c!==null&&(m.dependencies=c.dependencies),Dh|=m.lanes,(j&m.childLanes)===0)if(c!==null){if(Ud(c,m,j,!1),(j&m.childLanes)===0)return null}else return null;if(c!==null&&m.child!==c.child)throw Error(i(153));if(m.child!==null){for(c=m.child,j=nl(c,c.pendingProps),m.child=j,j.return=m;c.sibling!==null;)c=c.sibling,j=j.sibling=nl(c,c.pendingProps),j.return=m;j.sibling=null}return m.child}function Tj(c,m){return(c.lanes&m)!==0?!0:(c=c.dependencies,!!(c!==null&&Im(c)))}function vH(c,m,j){switch(m.tag){case 3:Le(m,m.stateNode.containerInfo),qd(m,as,c.memoizedState.cache),md();break;case 27:case 5:He(m);break;case 4:Le(m,m.stateNode.containerInfo);break;case 10:qd(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Ci(m),null;break;case 13:var _=m.memoizedState;if(_!==null)return _.dehydrated!==null?(ss(m),m.flags|=128,null):(j&m.child.childLanes)!==0?B3(c,m,j):(ss(m),c=Tu(c,m,j),c!==null?c.sibling:null);ss(m);break;case 19:var F=(c.flags&128)!==0;if(_=(j&m.childLanes)!==0,_||(Ud(c,m,j,!1),_=(j&m.childLanes)!==0),F){if(_)return q3(c,m,j);m.flags|=128}if(F=m.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),se(ti,ti.current),_)break;return null;case 22:return m.lanes=0,D3(c,m,j,m.pendingProps);case 24:qd(m,as,c.memoizedState.cache)}return Tu(c,m,j)}function U3(c,m,j){if(c!==null)if(c.memoizedProps!==m.pendingProps)Js=!0;else{if(!Tj(c,j)&&(m.flags&128)===0)return Js=!1,vH(c,m,j);Js=(c.flags&131072)!==0}else Js=!1,Ln&&(m.flags&1048576)!==0&&Cn(m,Ee,m.index);switch(m.lanes=0,m.tag){case 16:e:{var _=m.pendingProps;if(c=lt(m.elementType),m.type=c,typeof c=="function")Su(c)?(_=Nf(c,_),m.tag=1,m=L3(null,m,c,_,j)):(m.tag=0,m=wj(null,m,c,_,j));else{if(c!=null){var F=c.$$typeof;if(F===M){m.tag=11,m=I3(null,m,c,_,j);break e}else if(F===W){m.tag=14,m=O3(null,m,c,_,j);break e}}throw m=me(c)||c,Error(i(306,m,""))}}return m;case 0:return wj(c,m,m.type,m.pendingProps,j);case 1:return _=m.type,F=Nf(_,m.pendingProps),L3(c,m,_,F,j);case 3:e:{if(Le(m,m.stateNode.containerInfo),c===null)throw Error(i(387));_=m.pendingProps;var K=m.memoizedState;F=K.element,ba(c,m),ys(m,_,null,j);var pe=m.memoizedState;if(_=pe.cache,qd(m,as,_),_!==K.cache&&Nu(m,[as],j,!0),qi(),_=pe.element,K.isDehydrated)if(K={element:_,isDehydrated:!1,cache:pe.cache},m.updateQueue.baseState=K,m.memoizedState=K,m.flags&256){m=z3(c,m,_,j);break e}else if(_!==F){F=E(Error(i(424)),m),Bd(F),m=z3(c,m,_,j);break e}else for(c=m.stateNode.containerInfo,c.nodeType===9?c=c.body:c=c.nodeName==="HTML"?c.ownerDocument.body:c,ii=Gc(c.firstChild),ni=m,Ln=!0,uo=null,ha=!0,j=bn(m,null,_,j),m.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling;else{if(md(),_===F){m=Tu(c,m,j);break e}sl(c,m,_,j)}m=m.child}return m;case 26:return ix(c,m),c===null?(j=J4(m.type,null,m.pendingProps,null))?m.memoizedState=j:Ln||(j=m.type,c=m.pendingProps,_=jx(ge.current).createElement(j),_[Yn]=m,_[vn]=c,ol(_,j,c),Oi(_),m.stateNode=_):m.memoizedState=J4(m.type,c.memoizedProps,m.pendingProps,c.memoizedState),null;case 27:return He(m),c===null&&Ln&&(_=m.stateNode=Y4(m.type,m.pendingProps,ge.current),ni=m,ha=!0,F=ii,zh(m.type)?(l5=F,ii=Gc(_.firstChild)):ii=F),sl(c,m,m.pendingProps.children,j),ix(c,m),c===null&&(m.flags|=4194304),m.child;case 5:return c===null&&Ln&&((F=_=ii)&&(_=QH(_,m.type,m.pendingProps,ha),_!==null?(m.stateNode=_,ni=m,ii=Gc(_.firstChild),ha=!1,F=!0):F=!1),F||Hc(m)),He(m),F=m.type,K=m.pendingProps,pe=c!==null?c.memoizedProps:null,_=K.children,n5(F,K)?_=null:pe!==null&&n5(F,pe)&&(m.flags|=32),m.memoizedState!==null&&(F=v0(c,m,dj,null,null,j),W0._currentValue=F),ix(c,m),sl(c,m,_,j),m.child;case 6:return c===null&&Ln&&((c=j=ii)&&(j=YH(j,m.pendingProps,ha),j!==null?(m.stateNode=j,ni=m,ii=null,c=!0):c=!1),c||Hc(m)),null;case 13:return B3(c,m,j);case 4:return Le(m,m.stateNode.containerInfo),_=m.pendingProps,c===null?m.child=Ji(m,null,_,j):sl(c,m,_,j),m.child;case 11:return I3(c,m,m.type,m.pendingProps,j);case 7:return sl(c,m,m.pendingProps,j),m.child;case 8:return sl(c,m,m.pendingProps.children,j),m.child;case 12:return sl(c,m,m.pendingProps.children,j),m.child;case 10:return _=m.pendingProps,qd(m,m.type,_.value),sl(c,m,_.children,j),m.child;case 9:return F=m.type._context,_=m.pendingProps.children,Wd(m),F=ho(F),_=_(F),m.flags|=1,sl(c,m,_,j),m.child;case 14:return O3(c,m,m.type,m.pendingProps,j);case 15:return k3(c,m,m.type,m.pendingProps,j);case 19:return q3(c,m,j);case 31:return xH(c,m,j);case 22:return D3(c,m,j,m.pendingProps);case 24:return Wd(m),_=ho(as),c===null?(F=Ie(),F===null&&(F=ea,K=Ah(),F.pooledCache=K,K.refCount++,K!==null&&(F.pooledCacheLanes|=j),F=K),m.memoizedState={parent:_,cache:F},Jt(m),qd(m,as,F)):((c.lanes&j)!==0&&(ba(c,m),ys(m,null,null,j),qi()),F=c.memoizedState,K=m.memoizedState,F.parent!==_?(F={parent:_,cache:_},m.memoizedState=F,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=F),qd(m,as,_)):(_=K.cache,qd(m,as,_),_!==F.cache&&Nu(m,[as],j,!0))),sl(c,m,m.pendingProps.children,j),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function Iu(c){c.flags|=4}function Ij(c,m,j,_,F){if((m=(c.mode&32)!==0)&&(m=!1),m){if(c.flags|=16777216,(F&335544128)===F)if(c.stateNode.complete)c.flags|=8192;else if(p4())c.flags|=8192;else throw Nt=Ye,dt}else c.flags&=-16777217}function W3(c,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!iT(m))if(p4())c.flags|=8192;else throw Nt=Ye,dt}function sx(c,m){m!==null&&(c.flags|=4),c.flags&16384&&(m=c.tag!==22?vi():536870912,c.lanes|=m,Vm|=m)}function T0(c,m){if(!Ln)switch(c.tailMode){case"hidden":m=c.tail;for(var j=null;m!==null;)m.alternate!==null&&(j=m),m=m.sibling;j===null?c.tail=null:j.sibling=null;break;case"collapsed":j=c.tail;for(var _=null;j!==null;)j.alternate!==null&&(_=j),j=j.sibling;_===null?m||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function Sa(c){var m=c.alternate!==null&&c.alternate.child===c.child,j=0,_=0;if(m)for(var F=c.child;F!==null;)j|=F.lanes|F.childLanes,_|=F.subtreeFlags&65011712,_|=F.flags&65011712,F.return=c,F=F.sibling;else for(F=c.child;F!==null;)j|=F.lanes|F.childLanes,_|=F.subtreeFlags,_|=F.flags,F.return=c,F=F.sibling;return c.subtreeFlags|=_,c.childLanes=j,m}function bH(c,m,j){var _=m.pendingProps;switch(va(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sa(m),null;case 1:return Sa(m),null;case 3:return j=m.stateNode,_=null,c!==null&&(_=c.memoizedState.cache),m.memoizedState.cache!==_&&(m.flags|=2048),Zl(as),ke(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(Ma(m)?Iu(m):c===null||c.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,bf())),Sa(m),null;case 26:var F=m.type,K=m.memoizedState;return c===null?(Iu(m),K!==null?(Sa(m),W3(m,K)):(Sa(m),Ij(m,F,null,_,j))):K?K!==c.memoizedState?(Iu(m),Sa(m),W3(m,K)):(Sa(m),m.flags&=-16777217):(c=c.memoizedProps,c!==_&&Iu(m),Sa(m),Ij(m,F,c,_,j)),null;case 27:if(Je(m),j=ge.current,F=m.type,c!==null&&m.stateNode!=null)c.memoizedProps!==_&&Iu(m);else{if(!_){if(m.stateNode===null)throw Error(i(166));return Sa(m),null}c=H.current,Ma(m)?Ch(m):(c=Y4(F,_,j),m.stateNode=c,Iu(m))}return Sa(m),null;case 5:if(Je(m),F=m.type,c!==null&&m.stateNode!=null)c.memoizedProps!==_&&Iu(m);else{if(!_){if(m.stateNode===null)throw Error(i(166));return Sa(m),null}if(K=H.current,Ma(m))Ch(m);else{var pe=jx(ge.current);switch(K){case 1:K=pe.createElementNS("http://www.w3.org/2000/svg",F);break;case 2:K=pe.createElementNS("http://www.w3.org/1998/Math/MathML",F);break;default:switch(F){case"svg":K=pe.createElementNS("http://www.w3.org/2000/svg",F);break;case"math":K=pe.createElementNS("http://www.w3.org/1998/Math/MathML",F);break;case"script":K=pe.createElement("div"),K.innerHTML="<script><\/script>",K=K.removeChild(K.firstChild);break;case"select":K=typeof _.is=="string"?pe.createElement("select",{is:_.is}):pe.createElement("select"),_.multiple?K.multiple=!0:_.size&&(K.size=_.size);break;default:K=typeof _.is=="string"?pe.createElement(F,{is:_.is}):pe.createElement(F)}}K[Yn]=m,K[vn]=_;e:for(pe=m.child;pe!==null;){if(pe.tag===5||pe.tag===6)K.appendChild(pe.stateNode);else if(pe.tag!==4&&pe.tag!==27&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===m)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===m)break e;pe=pe.return}pe.sibling.return=pe.return,pe=pe.sibling}m.stateNode=K;e:switch(ol(K,F,_),F){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&Iu(m)}}return Sa(m),Ij(m,m.type,c===null?null:c.memoizedProps,m.pendingProps,j),null;case 6:if(c&&m.stateNode!=null)c.memoizedProps!==_&&Iu(m);else{if(typeof _!="string"&&m.stateNode===null)throw Error(i(166));if(c=ge.current,Ma(m)){if(c=m.stateNode,j=m.memoizedProps,_=null,F=ni,F!==null)switch(F.tag){case 27:case 5:_=F.memoizedProps}c[Yn]=m,c=!!(c.nodeValue===j||_!==null&&_.suppressHydrationWarning===!0||B4(c.nodeValue,j)),c||Hc(m,!0)}else c=jx(c).createTextNode(_),c[Yn]=m,m.stateNode=c}return Sa(m),null;case 31:if(j=m.memoizedState,c===null||c.memoizedState!==null){if(_=Ma(m),j!==null){if(c===null){if(!_)throw Error(i(318));if(c=m.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(557));c[Yn]=m}else md(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Sa(m),c=!1}else j=bf(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=j),c=!0;if(!c)return m.flags&256?(Di(m),m):(Di(m),null);if((m.flags&128)!==0)throw Error(i(558))}return Sa(m),null;case 13:if(_=m.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(F=Ma(m),_!==null&&_.dehydrated!==null){if(c===null){if(!F)throw Error(i(318));if(F=m.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(i(317));F[Yn]=m}else md(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Sa(m),F=!1}else F=bf(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=F),F=!0;if(!F)return m.flags&256?(Di(m),m):(Di(m),null)}return Di(m),(m.flags&128)!==0?(m.lanes=j,m):(j=_!==null,c=c!==null&&c.memoizedState!==null,j&&(_=m.child,F=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(F=_.alternate.memoizedState.cachePool.pool),K=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(K=_.memoizedState.cachePool.pool),K!==F&&(_.flags|=2048)),j!==c&&j&&(m.child.flags|=8192),sx(m,m.updateQueue),Sa(m),null);case 4:return ke(),c===null&&Xj(m.stateNode.containerInfo),Sa(m),null;case 10:return Zl(m.type),Sa(m),null;case 19:if(X(ti),_=m.memoizedState,_===null)return Sa(m),null;if(F=(m.flags&128)!==0,K=_.rendering,K===null)if(F)T0(_,!1);else{if(ws!==0||c!==null&&(c.flags&128)!==0)for(c=m.child;c!==null;){if(K=Po(c),K!==null){for(m.flags|=128,T0(_,!1),c=K.updateQueue,m.updateQueue=c,sx(m,c),m.subtreeFlags=0,c=j,j=m.child;j!==null;)Md(j,c),j=j.sibling;return se(ti,ti.current&1|2),Ln&&br(m,_.treeForkCount),m.child}c=c.sibling}_.tail!==null&&zr()>ux&&(m.flags|=128,F=!0,T0(_,!1),m.lanes=4194304)}else{if(!F)if(c=Po(K),c!==null){if(m.flags|=128,F=!0,c=c.updateQueue,m.updateQueue=c,sx(m,c),T0(_,!0),_.tail===null&&_.tailMode==="hidden"&&!K.alternate&&!Ln)return Sa(m),null}else 2*zr()-_.renderingStartTime>ux&&j!==536870912&&(m.flags|=128,F=!0,T0(_,!1),m.lanes=4194304);_.isBackwards?(K.sibling=m.child,m.child=K):(c=_.last,c!==null?c.sibling=K:m.child=K,_.last=K)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=zr(),c.sibling=null,j=ti.current,se(ti,F?j&1|2:j&1),Ln&&br(m,_.treeForkCount),c):(Sa(m),null);case 22:case 23:return Di(m),qs(),_=m.memoizedState!==null,c!==null?c.memoizedState!==null!==_&&(m.flags|=8192):_&&(m.flags|=8192),_?(j&536870912)!==0&&(m.flags&128)===0&&(Sa(m),m.subtreeFlags&6&&(m.flags|=8192)):Sa(m),j=m.updateQueue,j!==null&&sx(m,j.retryQueue),j=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(j=c.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==j&&(m.flags|=2048),c!==null&&X(_e),null;case 24:return j=null,c!==null&&(j=c.memoizedState.cache),m.memoizedState.cache!==j&&(m.flags|=2048),Zl(as),Sa(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function jH(c,m){switch(va(m),m.tag){case 1:return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 3:return Zl(as),ke(),c=m.flags,(c&65536)!==0&&(c&128)===0?(m.flags=c&-65537|128,m):null;case 26:case 27:case 5:return Je(m),null;case 31:if(m.memoizedState!==null){if(Di(m),m.alternate===null)throw Error(i(340));md()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 13:if(Di(m),c=m.memoizedState,c!==null&&c.dehydrated!==null){if(m.alternate===null)throw Error(i(340));md()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 19:return X(ti),null;case 4:return ke(),null;case 10:return Zl(m.type),null;case 22:case 23:return Di(m),qs(),c!==null&&X(_e),c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 24:return Zl(as),null;case 25:return null;default:return null}}function H3(c,m){switch(va(m),m.tag){case 3:Zl(as),ke();break;case 26:case 27:case 5:Je(m);break;case 4:ke();break;case 31:m.memoizedState!==null&&Di(m);break;case 13:Di(m);break;case 19:X(ti);break;case 10:Zl(m.type);break;case 22:case 23:Di(m),qs(),c!==null&&X(_e);break;case 24:Zl(as)}}function I0(c,m){try{var j=m.updateQueue,_=j!==null?j.lastEffect:null;if(_!==null){var F=_.next;j=F;do{if((j.tag&c)===c){_=void 0;var K=j.create,pe=j.inst;_=K(),pe.destroy=_}j=j.next}while(j!==F)}}catch(Te){Ri(m,m.return,Te)}}function Oh(c,m,j){try{var _=m.updateQueue,F=_!==null?_.lastEffect:null;if(F!==null){var K=F.next;_=K;do{if((_.tag&c)===c){var pe=_.inst,Te=pe.destroy;if(Te!==void 0){pe.destroy=void 0,F=m;var Ue=j,ft=Te;try{ft()}catch(It){Ri(F,Ue,It)}}}_=_.next}while(_!==K)}}catch(It){Ri(m,m.return,It)}}function V3(c){var m=c.updateQueue;if(m!==null){var j=c.stateNode;try{xs(m,j)}catch(_){Ri(c,c.return,_)}}}function $3(c,m,j){j.props=Nf(c.type,c.memoizedProps),j.state=c.memoizedState;try{j.componentWillUnmount()}catch(_){Ri(c,m,_)}}function O0(c,m){try{var j=c.ref;if(j!==null){switch(c.tag){case 26:case 27:case 5:var _=c.stateNode;break;case 30:_=c.stateNode;break;default:_=c.stateNode}typeof j=="function"?c.refCleanup=j(_):j.current=_}}catch(F){Ri(c,m,F)}}function Kd(c,m){var j=c.ref,_=c.refCleanup;if(j!==null)if(typeof _=="function")try{_()}catch(F){Ri(c,m,F)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof j=="function")try{j(null)}catch(F){Ri(c,m,F)}else j.current=null}function G3(c){var m=c.type,j=c.memoizedProps,_=c.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":j.autoFocus&&_.focus();break e;case"img":j.src?_.src=j.src:j.srcSet&&(_.srcset=j.srcSet)}}catch(F){Ri(c,c.return,F)}}function Oj(c,m,j){try{var _=c.stateNode;WH(_,c.type,j,m),_[vn]=m}catch(F){Ri(c,c.return,F)}}function K3(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&zh(c.type)||c.tag===4}function kj(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||K3(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&zh(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Dj(c,m,j){var _=c.tag;if(_===5||_===6)c=c.stateNode,m?(j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j).insertBefore(c,m):(m=j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j,m.appendChild(c),j=j._reactRootContainer,j!=null||m.onclick!==null||(m.onclick=Za));else if(_!==4&&(_===27&&zh(c.type)&&(j=c.stateNode,m=null),c=c.child,c!==null))for(Dj(c,m,j),c=c.sibling;c!==null;)Dj(c,m,j),c=c.sibling}function ox(c,m,j){var _=c.tag;if(_===5||_===6)c=c.stateNode,m?j.insertBefore(c,m):j.appendChild(c);else if(_!==4&&(_===27&&zh(c.type)&&(j=c.stateNode),c=c.child,c!==null))for(ox(c,m,j),c=c.sibling;c!==null;)ox(c,m,j),c=c.sibling}function Q3(c){var m=c.stateNode,j=c.memoizedProps;try{for(var _=c.type,F=m.attributes;F.length;)m.removeAttributeNode(F[0]);ol(m,_,j),m[Yn]=c,m[vn]=j}catch(K){Ri(c,c.return,K)}}var Ou=!1,eo=!1,Pj=!1,Y3=typeof WeakSet=="function"?WeakSet:Set,Ro=null;function wH(c,m){if(c=c.containerInfo,t5=_x,c=ve(c),Ne(c)){if("selectionStart"in c)var j={start:c.selectionStart,end:c.selectionEnd};else e:{j=(j=c.ownerDocument)&&j.defaultView||window;var _=j.getSelection&&j.getSelection();if(_&&_.rangeCount!==0){j=_.anchorNode;var F=_.anchorOffset,K=_.focusNode;_=_.focusOffset;try{j.nodeType,K.nodeType}catch{j=null;break e}var pe=0,Te=-1,Ue=-1,ft=0,It=0,Mt=c,gt=null;t:for(;;){for(var jt;Mt!==j||F!==0&&Mt.nodeType!==3||(Te=pe+F),Mt!==K||_!==0&&Mt.nodeType!==3||(Ue=pe+_),Mt.nodeType===3&&(pe+=Mt.nodeValue.length),(jt=Mt.firstChild)!==null;)gt=Mt,Mt=jt;for(;;){if(Mt===c)break t;if(gt===j&&++ft===F&&(Te=pe),gt===K&&++It===_&&(Ue=pe),(jt=Mt.nextSibling)!==null)break;Mt=gt,gt=Mt.parentNode}Mt=jt}j=Te===-1||Ue===-1?null:{start:Te,end:Ue}}else j=null}j=j||{start:0,end:0}}else j=null;for(r5={focusedElem:c,selectionRange:j},_x=!1,Ro=m;Ro!==null;)if(m=Ro,c=m.child,(m.subtreeFlags&1028)!==0&&c!==null)c.return=m,Ro=c;else for(;Ro!==null;){switch(m=Ro,K=m.alternate,c=m.flags,m.tag){case 0:if((c&4)!==0&&(c=m.updateQueue,c=c!==null?c.events:null,c!==null))for(j=0;j<c.length;j++)F=c[j],F.ref.impl=F.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&K!==null){c=void 0,j=m,F=K.memoizedProps,K=K.memoizedState,_=j.stateNode;try{var jr=Nf(j.type,F);c=_.getSnapshotBeforeUpdate(jr,K),_.__reactInternalSnapshotBeforeUpdate=c}catch(nn){Ri(j,j.return,nn)}}break;case 3:if((c&1024)!==0){if(c=m.stateNode.containerInfo,j=c.nodeType,j===9)a5(c);else if(j===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":a5(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=m.sibling,c!==null){c.return=m.return,Ro=c;break}Ro=m.return}}function Z3(c,m,j){var _=j.flags;switch(j.tag){case 0:case 11:case 15:Du(c,j),_&4&&I0(5,j);break;case 1:if(Du(c,j),_&4)if(c=j.stateNode,m===null)try{c.componentDidMount()}catch(pe){Ri(j,j.return,pe)}else{var F=Nf(j.type,m.memoizedProps);m=m.memoizedState;try{c.componentDidUpdate(F,m,c.__reactInternalSnapshotBeforeUpdate)}catch(pe){Ri(j,j.return,pe)}}_&64&&V3(j),_&512&&O0(j,j.return);break;case 3:if(Du(c,j),_&64&&(c=j.updateQueue,c!==null)){if(m=null,j.child!==null)switch(j.child.tag){case 27:case 5:m=j.child.stateNode;break;case 1:m=j.child.stateNode}try{xs(c,m)}catch(pe){Ri(j,j.return,pe)}}break;case 27:m===null&&_&4&&Q3(j);case 26:case 5:Du(c,j),m===null&&_&4&&G3(j),_&512&&O0(j,j.return);break;case 12:Du(c,j);break;case 31:Du(c,j),_&4&&e4(c,j);break;case 13:Du(c,j),_&4&&t4(c,j),_&64&&(c=j.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(j=OH.bind(null,j),ZH(c,j))));break;case 22:if(_=j.memoizedState!==null||Ou,!_){m=m!==null&&m.memoizedState!==null||eo,F=Ou;var K=eo;Ou=_,(eo=m)&&!K?Pu(c,j,(j.subtreeFlags&8772)!==0):Du(c,j),Ou=F,eo=K}break;case 30:break;default:Du(c,j)}}function X3(c){var m=c.alternate;m!==null&&(c.alternate=null,X3(m)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(m=c.stateNode,m!==null&&Ga(m)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Ba=null,Jl=!1;function ku(c,m,j){for(j=j.child;j!==null;)J3(c,m,j),j=j.sibling}function J3(c,m,j){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Er,j)}catch{}switch(j.tag){case 26:eo||Kd(j,m),ku(c,m,j),j.memoizedState?j.memoizedState.count--:j.stateNode&&(j=j.stateNode,j.parentNode.removeChild(j));break;case 27:eo||Kd(j,m);var _=Ba,F=Jl;zh(j.type)&&(Ba=j.stateNode,Jl=!1),ku(c,m,j),F0(j.stateNode),Ba=_,Jl=F;break;case 5:eo||Kd(j,m);case 6:if(_=Ba,F=Jl,Ba=null,ku(c,m,j),Ba=_,Jl=F,Ba!==null)if(Jl)try{(Ba.nodeType===9?Ba.body:Ba.nodeName==="HTML"?Ba.ownerDocument.body:Ba).removeChild(j.stateNode)}catch(K){Ri(j,m,K)}else try{Ba.removeChild(j.stateNode)}catch(K){Ri(j,m,K)}break;case 18:Ba!==null&&(Jl?(c=Ba,V4(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,j.stateNode),Jm(c)):V4(Ba,j.stateNode));break;case 4:_=Ba,F=Jl,Ba=j.stateNode.containerInfo,Jl=!0,ku(c,m,j),Ba=_,Jl=F;break;case 0:case 11:case 14:case 15:Oh(2,j,m),eo||Oh(4,j,m),ku(c,m,j);break;case 1:eo||(Kd(j,m),_=j.stateNode,typeof _.componentWillUnmount=="function"&&$3(j,m,_)),ku(c,m,j);break;case 21:ku(c,m,j);break;case 22:eo=(_=eo)||j.memoizedState!==null,ku(c,m,j),eo=_;break;default:ku(c,m,j)}}function e4(c,m){if(m.memoizedState===null&&(c=m.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{Jm(c)}catch(j){Ri(m,m.return,j)}}}function t4(c,m){if(m.memoizedState===null&&(c=m.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Jm(c)}catch(j){Ri(m,m.return,j)}}function SH(c){switch(c.tag){case 31:case 13:case 19:var m=c.stateNode;return m===null&&(m=c.stateNode=new Y3),m;case 22:return c=c.stateNode,m=c._retryCache,m===null&&(m=c._retryCache=new Y3),m;default:throw Error(i(435,c.tag))}}function lx(c,m){var j=SH(c);m.forEach(function(_){if(!j.has(_)){j.add(_);var F=kH.bind(null,c,_);_.then(F,F)}})}function ec(c,m){var j=m.deletions;if(j!==null)for(var _=0;_<j.length;_++){var F=j[_],K=c,pe=m,Te=pe;e:for(;Te!==null;){switch(Te.tag){case 27:if(zh(Te.type)){Ba=Te.stateNode,Jl=!1;break e}break;case 5:Ba=Te.stateNode,Jl=!1;break e;case 3:case 4:Ba=Te.stateNode.containerInfo,Jl=!0;break e}Te=Te.return}if(Ba===null)throw Error(i(160));J3(K,pe,F),Ba=null,Jl=!1,K=F.alternate,K!==null&&(K.return=null),F.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)r4(m,c),m=m.sibling}var vd=null;function r4(c,m){var j=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ec(m,c),tc(c),_&4&&(Oh(3,c,c.return),I0(3,c),Oh(5,c,c.return));break;case 1:ec(m,c),tc(c),_&512&&(eo||j===null||Kd(j,j.return)),_&64&&Ou&&(c=c.updateQueue,c!==null&&(_=c.callbacks,_!==null&&(j=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=j===null?_:j.concat(_))));break;case 26:var F=vd;if(ec(m,c),tc(c),_&512&&(eo||j===null||Kd(j,j.return)),_&4){var K=j!==null?j.memoizedState:null;if(_=c.memoizedState,j===null)if(_===null)if(c.stateNode===null){e:{_=c.type,j=c.memoizedProps,F=F.ownerDocument||F;t:switch(_){case"title":K=F.getElementsByTagName("title")[0],(!K||K[$o]||K[Yn]||K.namespaceURI==="http://www.w3.org/2000/svg"||K.hasAttribute("itemprop"))&&(K=F.createElement(_),F.head.insertBefore(K,F.querySelector("head > title"))),ol(K,_,j),K[Yn]=c,Oi(K),_=K;break e;case"link":var pe=rT("link","href",F).get(_+(j.href||""));if(pe){for(var Te=0;Te<pe.length;Te++)if(K=pe[Te],K.getAttribute("href")===(j.href==null||j.href===""?null:j.href)&&K.getAttribute("rel")===(j.rel==null?null:j.rel)&&K.getAttribute("title")===(j.title==null?null:j.title)&&K.getAttribute("crossorigin")===(j.crossOrigin==null?null:j.crossOrigin)){pe.splice(Te,1);break t}}K=F.createElement(_),ol(K,_,j),F.head.appendChild(K);break;case"meta":if(pe=rT("meta","content",F).get(_+(j.content||""))){for(Te=0;Te<pe.length;Te++)if(K=pe[Te],K.getAttribute("content")===(j.content==null?null:""+j.content)&&K.getAttribute("name")===(j.name==null?null:j.name)&&K.getAttribute("property")===(j.property==null?null:j.property)&&K.getAttribute("http-equiv")===(j.httpEquiv==null?null:j.httpEquiv)&&K.getAttribute("charset")===(j.charSet==null?null:j.charSet)){pe.splice(Te,1);break t}}K=F.createElement(_),ol(K,_,j),F.head.appendChild(K);break;default:throw Error(i(468,_))}K[Yn]=c,Oi(K),_=K}c.stateNode=_}else nT(F,c.type,c.stateNode);else c.stateNode=tT(F,_,c.memoizedProps);else K!==_?(K===null?j.stateNode!==null&&(j=j.stateNode,j.parentNode.removeChild(j)):K.count--,_===null?nT(F,c.type,c.stateNode):tT(F,_,c.memoizedProps)):_===null&&c.stateNode!==null&&Oj(c,c.memoizedProps,j.memoizedProps)}break;case 27:ec(m,c),tc(c),_&512&&(eo||j===null||Kd(j,j.return)),j!==null&&_&4&&Oj(c,c.memoizedProps,j.memoizedProps);break;case 5:if(ec(m,c),tc(c),_&512&&(eo||j===null||Kd(j,j.return)),c.flags&32){F=c.stateNode;try{Ps(F,"")}catch(jr){Ri(c,c.return,jr)}}_&4&&c.stateNode!=null&&(F=c.memoizedProps,Oj(c,F,j!==null?j.memoizedProps:F)),_&1024&&(Pj=!0);break;case 6:if(ec(m,c),tc(c),_&4){if(c.stateNode===null)throw Error(i(162));_=c.memoizedProps,j=c.stateNode;try{j.nodeValue=_}catch(jr){Ri(c,c.return,jr)}}break;case 3:if(Cx=null,F=vd,vd=wx(m.containerInfo),ec(m,c),vd=F,tc(c),_&4&&j!==null&&j.memoizedState.isDehydrated)try{Jm(m.containerInfo)}catch(jr){Ri(c,c.return,jr)}Pj&&(Pj=!1,n4(c));break;case 4:_=vd,vd=wx(c.stateNode.containerInfo),ec(m,c),tc(c),vd=_;break;case 12:ec(m,c),tc(c);break;case 31:ec(m,c),tc(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,lx(c,_)));break;case 13:ec(m,c),tc(c),c.child.flags&8192&&c.memoizedState!==null!=(j!==null&&j.memoizedState!==null)&&(dx=zr()),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,lx(c,_)));break;case 22:F=c.memoizedState!==null;var Ue=j!==null&&j.memoizedState!==null,ft=Ou,It=eo;if(Ou=ft||F,eo=It||Ue,ec(m,c),eo=It,Ou=ft,tc(c),_&8192)e:for(m=c.stateNode,m._visibility=F?m._visibility&-2:m._visibility|1,F&&(j===null||Ue||Ou||eo||Af(c)),j=null,m=c;;){if(m.tag===5||m.tag===26){if(j===null){Ue=j=m;try{if(K=Ue.stateNode,F)pe=K.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Te=Ue.stateNode;var Mt=Ue.memoizedProps.style,gt=Mt!=null&&Mt.hasOwnProperty("display")?Mt.display:null;Te.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(jr){Ri(Ue,Ue.return,jr)}}}else if(m.tag===6){if(j===null){Ue=m;try{Ue.stateNode.nodeValue=F?"":Ue.memoizedProps}catch(jr){Ri(Ue,Ue.return,jr)}}}else if(m.tag===18){if(j===null){Ue=m;try{var jt=Ue.stateNode;F?$4(jt,!0):$4(Ue.stateNode,!1)}catch(jr){Ri(Ue,Ue.return,jr)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===c)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break e;for(;m.sibling===null;){if(m.return===null||m.return===c)break e;j===m&&(j=null),m=m.return}j===m&&(j=null),m.sibling.return=m.return,m=m.sibling}_&4&&(_=c.updateQueue,_!==null&&(j=_.retryQueue,j!==null&&(_.retryQueue=null,lx(c,j))));break;case 19:ec(m,c),tc(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,lx(c,_)));break;case 30:break;case 21:break;default:ec(m,c),tc(c)}}function tc(c){var m=c.flags;if(m&2){try{for(var j,_=c.return;_!==null;){if(K3(_)){j=_;break}_=_.return}if(j==null)throw Error(i(160));switch(j.tag){case 27:var F=j.stateNode,K=kj(c);ox(c,K,F);break;case 5:var pe=j.stateNode;j.flags&32&&(Ps(pe,""),j.flags&=-33);var Te=kj(c);ox(c,Te,pe);break;case 3:case 4:var Ue=j.stateNode.containerInfo,ft=kj(c);Dj(c,ft,Ue);break;default:throw Error(i(161))}}catch(It){Ri(c,c.return,It)}c.flags&=-3}m&4096&&(c.flags&=-4097)}function n4(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var m=c;n4(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),c=c.sibling}}function Du(c,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)Z3(c,m.alternate,m),m=m.sibling}function Af(c){for(c=c.child;c!==null;){var m=c;switch(m.tag){case 0:case 11:case 14:case 15:Oh(4,m,m.return),Af(m);break;case 1:Kd(m,m.return);var j=m.stateNode;typeof j.componentWillUnmount=="function"&&$3(m,m.return,j),Af(m);break;case 27:F0(m.stateNode);case 26:case 5:Kd(m,m.return),Af(m);break;case 22:m.memoizedState===null&&Af(m);break;case 30:Af(m);break;default:Af(m)}c=c.sibling}}function Pu(c,m,j){for(j=j&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var _=m.alternate,F=c,K=m,pe=K.flags;switch(K.tag){case 0:case 11:case 15:Pu(F,K,j),I0(4,K);break;case 1:if(Pu(F,K,j),_=K,F=_.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(ft){Ri(_,_.return,ft)}if(_=K,F=_.updateQueue,F!==null){var Te=_.stateNode;try{var Ue=F.shared.hiddenCallbacks;if(Ue!==null)for(F.shared.hiddenCallbacks=null,F=0;F<Ue.length;F++)Do(Ue[F],Te)}catch(ft){Ri(_,_.return,ft)}}j&&pe&64&&V3(K),O0(K,K.return);break;case 27:Q3(K);case 26:case 5:Pu(F,K,j),j&&_===null&&pe&4&&G3(K),O0(K,K.return);break;case 12:Pu(F,K,j);break;case 31:Pu(F,K,j),j&&pe&4&&e4(F,K);break;case 13:Pu(F,K,j),j&&pe&4&&t4(F,K);break;case 22:K.memoizedState===null&&Pu(F,K,j),O0(K,K.return);break;case 30:break;default:Pu(F,K,j)}m=m.sibling}}function Rj(c,m){var j=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(j=c.memoizedState.cachePool.pool),c=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(c=m.memoizedState.cachePool.pool),c!==j&&(c!=null&&c.refCount++,j!=null&&jf(j))}function Mj(c,m){c=null,m.alternate!==null&&(c=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==c&&(m.refCount++,c!=null&&jf(c))}function bd(c,m,j,_){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)i4(c,m,j,_),m=m.sibling}function i4(c,m,j,_){var F=m.flags;switch(m.tag){case 0:case 11:case 15:bd(c,m,j,_),F&2048&&I0(9,m);break;case 1:bd(c,m,j,_);break;case 3:bd(c,m,j,_),F&2048&&(c=null,m.alternate!==null&&(c=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==c&&(m.refCount++,c!=null&&jf(c)));break;case 12:if(F&2048){bd(c,m,j,_),c=m.stateNode;try{var K=m.memoizedProps,pe=K.id,Te=K.onPostCommit;typeof Te=="function"&&Te(pe,m.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Ue){Ri(m,m.return,Ue)}}else bd(c,m,j,_);break;case 31:bd(c,m,j,_);break;case 13:bd(c,m,j,_);break;case 23:break;case 22:K=m.stateNode,pe=m.alternate,m.memoizedState!==null?K._visibility&2?bd(c,m,j,_):k0(c,m):K._visibility&2?bd(c,m,j,_):(K._visibility|=2,Um(c,m,j,_,(m.subtreeFlags&10256)!==0||!1)),F&2048&&Rj(pe,m);break;case 24:bd(c,m,j,_),F&2048&&Mj(m.alternate,m);break;default:bd(c,m,j,_)}}function Um(c,m,j,_,F){for(F=F&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var K=c,pe=m,Te=j,Ue=_,ft=pe.flags;switch(pe.tag){case 0:case 11:case 15:Um(K,pe,Te,Ue,F),I0(8,pe);break;case 23:break;case 22:var It=pe.stateNode;pe.memoizedState!==null?It._visibility&2?Um(K,pe,Te,Ue,F):k0(K,pe):(It._visibility|=2,Um(K,pe,Te,Ue,F)),F&&ft&2048&&Rj(pe.alternate,pe);break;case 24:Um(K,pe,Te,Ue,F),F&&ft&2048&&Mj(pe.alternate,pe);break;default:Um(K,pe,Te,Ue,F)}m=m.sibling}}function k0(c,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var j=c,_=m,F=_.flags;switch(_.tag){case 22:k0(j,_),F&2048&&Rj(_.alternate,_);break;case 24:k0(j,_),F&2048&&Mj(_.alternate,_);break;default:k0(j,_)}m=m.sibling}}var D0=8192;function Wm(c,m,j){if(c.subtreeFlags&D0)for(c=c.child;c!==null;)a4(c,m,j),c=c.sibling}function a4(c,m,j){switch(c.tag){case 26:Wm(c,m,j),c.flags&D0&&c.memoizedState!==null&&cV(j,vd,c.memoizedState,c.memoizedProps);break;case 5:Wm(c,m,j);break;case 3:case 4:var _=vd;vd=wx(c.stateNode.containerInfo),Wm(c,m,j),vd=_;break;case 22:c.memoizedState===null&&(_=c.alternate,_!==null&&_.memoizedState!==null?(_=D0,D0=16777216,Wm(c,m,j),D0=_):Wm(c,m,j));break;default:Wm(c,m,j)}}function s4(c){var m=c.alternate;if(m!==null&&(c=m.child,c!==null)){m.child=null;do m=c.sibling,c.sibling=null,c=m;while(c!==null)}}function P0(c){var m=c.deletions;if((c.flags&16)!==0){if(m!==null)for(var j=0;j<m.length;j++){var _=m[j];Ro=_,l4(_,c)}s4(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)o4(c),c=c.sibling}function o4(c){switch(c.tag){case 0:case 11:case 15:P0(c),c.flags&2048&&Oh(9,c,c.return);break;case 3:P0(c);break;case 12:P0(c);break;case 22:var m=c.stateNode;c.memoizedState!==null&&m._visibility&2&&(c.return===null||c.return.tag!==13)?(m._visibility&=-3,cx(c)):P0(c);break;default:P0(c)}}function cx(c){var m=c.deletions;if((c.flags&16)!==0){if(m!==null)for(var j=0;j<m.length;j++){var _=m[j];Ro=_,l4(_,c)}s4(c)}for(c=c.child;c!==null;){switch(m=c,m.tag){case 0:case 11:case 15:Oh(8,m,m.return),cx(m);break;case 22:j=m.stateNode,j._visibility&2&&(j._visibility&=-3,cx(m));break;default:cx(m)}c=c.sibling}}function l4(c,m){for(;Ro!==null;){var j=Ro;switch(j.tag){case 0:case 11:case 15:Oh(8,j,m);break;case 23:case 22:if(j.memoizedState!==null&&j.memoizedState.cachePool!==null){var _=j.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:jf(j.memoizedState.cache)}if(_=j.child,_!==null)_.return=j,Ro=_;else e:for(j=c;Ro!==null;){_=Ro;var F=_.sibling,K=_.return;if(X3(_),_===j){Ro=null;break e}if(F!==null){F.return=K,Ro=F;break e}Ro=K}}}var CH={getCacheForType:function(c){var m=ho(as),j=m.data.get(c);return j===void 0&&(j=c(),m.data.set(c,j)),j},cacheSignal:function(){return ho(as).controller.signal}},NH=typeof WeakMap=="function"?WeakMap:Map,Ni=0,ea=null,Hn=null,Zn=0,Pi=0,wc=null,kh=!1,Hm=!1,Lj=!1,Ru=0,ws=0,Dh=0,Ef=0,zj=0,Sc=0,Vm=0,R0=null,rc=null,Bj=!1,dx=0,c4=0,ux=1/0,hx=null,Ph=null,mo=0,Rh=null,$m=null,Mu=0,Fj=0,qj=null,d4=null,M0=0,Uj=null;function Cc(){return(Ni&2)!==0&&Zn!==0?Zn&-Zn:Q.T!==null?Kj():Qn()}function u4(){if(Sc===0)if((Zn&536870912)===0||Ln){var c=Sr;Sr<<=1,(Sr&3932160)===0&&(Sr=262144),Sc=c}else Sc=536870912;return c=wa.current,c!==null&&(c.flags|=32),Sc}function nc(c,m,j){(c===ea&&(Pi===2||Pi===9)||c.cancelPendingCommit!==null)&&(Gm(c,0),Mh(c,Zn,Sc,!1)),vr(c,j),((Ni&2)===0||c!==ea)&&(c===ea&&((Ni&2)===0&&(Ef|=j),ws===4&&Mh(c,Zn,Sc,!1)),Qd(c))}function h4(c,m,j){if((Ni&6)!==0)throw Error(i(327));var _=!j&&(m&127)===0&&(m&c.expiredLanes)===0||Qi(c,m),F=_?_H(c,m):Hj(c,m,!0),K=_;do{if(F===0){Hm&&!_&&Mh(c,m,0,!1);break}else{if(j=c.current.alternate,K&&!AH(j)){F=Hj(c,m,!1),K=!1;continue}if(F===2){if(K=m,c.errorRecoveryDisabledLanes&K)var pe=0;else pe=c.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){m=pe;e:{var Te=c;F=R0;var Ue=Te.current.memoizedState.isDehydrated;if(Ue&&(Gm(Te,pe).flags|=256),pe=Hj(Te,pe,!1),pe!==2){if(Lj&&!Ue){Te.errorRecoveryDisabledLanes|=K,Ef|=K,F=4;break e}K=rc,rc=F,K!==null&&(rc===null?rc=K:rc.push.apply(rc,K))}F=pe}if(K=!1,F!==2)continue}}if(F===1){Gm(c,0),Mh(c,m,0,!0);break}e:{switch(_=c,K=F,K){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:Mh(_,m,Sc,!kh);break e;case 2:rc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(F=dx+300-zr(),10<F)){if(Mh(_,m,Sc,!kh),On(_,0,!0)!==0)break e;Mu=m,_.timeoutHandle=W4(f4.bind(null,_,j,rc,hx,Bj,m,Sc,Ef,Vm,kh,K,"Throttled",-0,0),F);break e}f4(_,j,rc,hx,Bj,m,Sc,Ef,Vm,kh,K,null,-0,0)}}break}while(!0);Qd(c)}function f4(c,m,j,_,F,K,pe,Te,Ue,ft,It,Mt,gt,jt){if(c.timeoutHandle=-1,Mt=m.subtreeFlags,Mt&8192||(Mt&16785408)===16785408){Mt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},a4(m,K,Mt);var jr=(K&62914560)===K?dx-zr():(K&4194048)===K?c4-zr():0;if(jr=dV(Mt,jr),jr!==null){Mu=K,c.cancelPendingCommit=jr(j4.bind(null,c,m,K,j,_,F,pe,Te,Ue,It,Mt,null,gt,jt)),Mh(c,K,pe,!ft);return}}j4(c,m,K,j,_,F,pe,Te,Ue)}function AH(c){for(var m=c;;){var j=m.tag;if((j===0||j===11||j===15)&&m.flags&16384&&(j=m.updateQueue,j!==null&&(j=j.stores,j!==null)))for(var _=0;_<j.length;_++){var F=j[_],K=F.getSnapshot;F=F.value;try{if(!I(K(),F))return!1}catch{return!1}}if(j=m.child,m.subtreeFlags&16384&&j!==null)j.return=m,m=j;else{if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Mh(c,m,j,_){m&=~zj,m&=~Ef,c.suspendedLanes|=m,c.pingedLanes&=~m,_&&(c.warmLanes|=m),_=c.expirationTimes;for(var F=m;0<F;){var K=31-ur(F),pe=1<<K;_[K]=-1,F&=~pe}j!==0&&ml(c,j,m)}function fx(){return(Ni&6)===0?(L0(0),!1):!0}function Wj(){if(Hn!==null){if(Pi===0)var c=Hn.return;else c=Hn,Yl=jc=null,Rm(c),zt=null,Nr=0,c=Hn;for(;c!==null;)H3(c.alternate,c),c=c.return;Hn=null}}function Gm(c,m){var j=c.timeoutHandle;j!==-1&&(c.timeoutHandle=-1,$H(j)),j=c.cancelPendingCommit,j!==null&&(c.cancelPendingCommit=null,j()),Mu=0,Wj(),ea=c,Hn=j=nl(c.current,null),Zn=m,Pi=0,wc=null,kh=!1,Hm=Qi(c,m),Lj=!1,Vm=Sc=zj=Ef=Dh=ws=0,rc=R0=null,Bj=!1,(m&8)!==0&&(m|=m&32);var _=c.entangledLanes;if(_!==0)for(c=c.entanglements,_&=m;0<_;){var F=31-ur(_),K=1<<F;m|=c[F],_&=~K}return Ru=m,Rd(),j}function m4(c,m){Wr=null,Q.H=E0,m===Ge||m===ze?(m=Ot(),Pi=3):m===dt?(m=Ot(),Pi=4):Pi=m===jj?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,wc=m,Hn===null&&(ws=1,rx(c,E(m,c.current)))}function p4(){var c=wa.current;return c===null?!0:(Zn&4194048)===Zn?si===null:(Zn&62914560)===Zn||(Zn&536870912)!==0?c===si:!1}function g4(){var c=Q.H;return Q.H=E0,c===null?E0:c}function y4(){var c=Q.A;return Q.A=CH,c}function mx(){ws=4,kh||(Zn&4194048)!==Zn&&wa.current!==null||(Hm=!0),(Dh&134217727)===0&&(Ef&134217727)===0||ea===null||Mh(ea,Zn,Sc,!1)}function Hj(c,m,j){var _=Ni;Ni|=2;var F=g4(),K=y4();(ea!==c||Zn!==m)&&(hx=null,Gm(c,m)),m=!1;var pe=ws;e:do try{if(Pi!==0&&Hn!==null){var Te=Hn,Ue=wc;switch(Pi){case 8:Wj(),pe=6;break e;case 3:case 2:case 9:case 6:wa.current===null&&(m=!0);var ft=Pi;if(Pi=0,wc=null,Km(c,Te,Ue,ft),j&&Hm){pe=0;break e}break;default:ft=Pi,Pi=0,wc=null,Km(c,Te,Ue,ft)}}EH(),pe=ws;break}catch(It){m4(c,It)}while(!0);return m&&c.shellSuspendCounter++,Yl=jc=null,Ni=_,Q.H=F,Q.A=K,Hn===null&&(ea=null,Zn=0,Rd()),pe}function EH(){for(;Hn!==null;)x4(Hn)}function _H(c,m){var j=Ni;Ni|=2;var _=g4(),F=y4();ea!==c||Zn!==m?(hx=null,ux=zr()+500,Gm(c,m)):Hm=Qi(c,m);e:do try{if(Pi!==0&&Hn!==null){m=Hn;var K=wc;t:switch(Pi){case 1:Pi=0,wc=null,Km(c,m,K,1);break;case 2:case 9:if(it(K)){Pi=0,wc=null,v4(m);break}m=function(){Pi!==2&&Pi!==9||ea!==c||(Pi=7),Qd(c)},K.then(m,m);break e;case 3:Pi=7;break e;case 4:Pi=5;break e;case 7:it(K)?(Pi=0,wc=null,v4(m)):(Pi=0,wc=null,Km(c,m,K,7));break;case 5:var pe=null;switch(Hn.tag){case 26:pe=Hn.memoizedState;case 5:case 27:var Te=Hn;if(pe?iT(pe):Te.stateNode.complete){Pi=0,wc=null;var Ue=Te.sibling;if(Ue!==null)Hn=Ue;else{var ft=Te.return;ft!==null?(Hn=ft,px(ft)):Hn=null}break t}}Pi=0,wc=null,Km(c,m,K,5);break;case 6:Pi=0,wc=null,Km(c,m,K,6);break;case 8:Wj(),ws=6;break e;default:throw Error(i(462))}}TH();break}catch(It){m4(c,It)}while(!0);return Yl=jc=null,Q.H=_,Q.A=F,Ni=j,Hn!==null?0:(ea=null,Zn=0,Rd(),ws)}function TH(){for(;Hn!==null&&!xr();)x4(Hn)}function x4(c){var m=U3(c.alternate,c,Ru);c.memoizedProps=c.pendingProps,m===null?px(c):Hn=m}function v4(c){var m=c,j=m.alternate;switch(m.tag){case 15:case 0:m=M3(j,m,m.pendingProps,m.type,void 0,Zn);break;case 11:m=M3(j,m,m.pendingProps,m.type.render,m.ref,Zn);break;case 5:Rm(m);default:H3(j,m),m=Hn=Md(m,Ru),m=U3(j,m,Ru)}c.memoizedProps=c.pendingProps,m===null?px(c):Hn=m}function Km(c,m,j,_){Yl=jc=null,Rm(m),zt=null,Nr=0;var F=m.return;try{if(yH(c,F,m,j,Zn)){ws=1,rx(c,E(j,c.current)),Hn=null;return}}catch(K){if(F!==null)throw Hn=F,K;ws=1,rx(c,E(j,c.current)),Hn=null;return}m.flags&32768?(Ln||_===1?c=!0:Hm||(Zn&536870912)!==0?c=!1:(kh=c=!0,(_===2||_===9||_===3||_===6)&&(_=wa.current,_!==null&&_.tag===13&&(_.flags|=16384))),b4(m,c)):px(m)}function px(c){var m=c;do{if((m.flags&32768)!==0){b4(m,kh);return}c=m.return;var j=bH(m.alternate,m,Ru);if(j!==null){Hn=j;return}if(m=m.sibling,m!==null){Hn=m;return}Hn=m=c}while(m!==null);ws===0&&(ws=5)}function b4(c,m){do{var j=jH(c.alternate,c);if(j!==null){j.flags&=32767,Hn=j;return}if(j=c.return,j!==null&&(j.flags|=32768,j.subtreeFlags=0,j.deletions=null),!m&&(c=c.sibling,c!==null)){Hn=c;return}Hn=c=j}while(c!==null);ws=6,Hn=null}function j4(c,m,j,_,F,K,pe,Te,Ue){c.cancelPendingCommit=null;do gx();while(mo!==0);if((Ni&6)!==0)throw Error(i(327));if(m!==null){if(m===c.current)throw Error(i(177));if(K=m.lanes|m.childLanes,K|=wu,Ia(c,j,K,pe,Te,Ue),c===ea&&(Hn=ea=null,Zn=0),$m=m,Rh=c,Mu=j,Fj=K,qj=F,d4=_,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,DH(Yr,function(){return A4(),null})):(c.callbackNode=null,c.callbackPriority=0),_=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||_){_=Q.T,Q.T=null,F=de.p,de.p=2,pe=Ni,Ni|=4;try{wH(c,m,j)}finally{Ni=pe,de.p=F,Q.T=_}}mo=1,w4(),S4(),C4()}}function w4(){if(mo===1){mo=0;var c=Rh,m=$m,j=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||j){j=Q.T,Q.T=null;var _=de.p;de.p=2;var F=Ni;Ni|=4;try{r4(m,c);var K=r5,pe=ve(c.containerInfo),Te=K.focusedElem,Ue=K.selectionRange;if(pe!==Te&&Te&&Te.ownerDocument&&ue(Te.ownerDocument.documentElement,Te)){if(Ue!==null&&Ne(Te)){var ft=Ue.start,It=Ue.end;if(It===void 0&&(It=ft),"selectionStart"in Te)Te.selectionStart=ft,Te.selectionEnd=Math.min(It,Te.value.length);else{var Mt=Te.ownerDocument||document,gt=Mt&&Mt.defaultView||window;if(gt.getSelection){var jt=gt.getSelection(),jr=Te.textContent.length,nn=Math.min(Ue.start,jr),Hi=Ue.end===void 0?nn:Math.min(Ue.end,jr);!jt.extend&&nn>Hi&&(pe=Hi,Hi=nn,nn=pe);var rt=te(Te,nn),Ke=te(Te,Hi);if(rt&&Ke&&(jt.rangeCount!==1||jt.anchorNode!==rt.node||jt.anchorOffset!==rt.offset||jt.focusNode!==Ke.node||jt.focusOffset!==Ke.offset)){var ht=Mt.createRange();ht.setStart(rt.node,rt.offset),jt.removeAllRanges(),nn>Hi?(jt.addRange(ht),jt.extend(Ke.node,Ke.offset)):(ht.setEnd(Ke.node,Ke.offset),jt.addRange(ht))}}}}for(Mt=[],jt=Te;jt=jt.parentNode;)jt.nodeType===1&&Mt.push({element:jt,left:jt.scrollLeft,top:jt.scrollTop});for(typeof Te.focus=="function"&&Te.focus(),Te=0;Te<Mt.length;Te++){var Dt=Mt[Te];Dt.element.scrollLeft=Dt.left,Dt.element.scrollTop=Dt.top}}_x=!!t5,r5=t5=null}finally{Ni=F,de.p=_,Q.T=j}}c.current=m,mo=2}}function S4(){if(mo===2){mo=0;var c=Rh,m=$m,j=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||j){j=Q.T,Q.T=null;var _=de.p;de.p=2;var F=Ni;Ni|=4;try{Z3(c,m.alternate,m)}finally{Ni=F,de.p=_,Q.T=j}}mo=3}}function C4(){if(mo===4||mo===3){mo=0,hr();var c=Rh,m=$m,j=Mu,_=d4;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?mo=5:(mo=0,$m=Rh=null,N4(c,c.pendingLanes));var F=c.pendingLanes;if(F===0&&(Ph=null),$t(j),m=m.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Er,m,void 0,(m.current.flags&128)===128)}catch{}if(_!==null){m=Q.T,F=de.p,de.p=2,Q.T=null;try{for(var K=c.onRecoverableError,pe=0;pe<_.length;pe++){var Te=_[pe];K(Te.value,{componentStack:Te.stack})}}finally{Q.T=m,de.p=F}}(Mu&3)!==0&&gx(),Qd(c),F=c.pendingLanes,(j&261930)!==0&&(F&42)!==0?c===Uj?M0++:(M0=0,Uj=c):M0=0,L0(0)}}function N4(c,m){(c.pooledCacheLanes&=m)===0&&(m=c.pooledCache,m!=null&&(c.pooledCache=null,jf(m)))}function gx(){return w4(),S4(),C4(),A4()}function A4(){if(mo!==5)return!1;var c=Rh,m=Fj;Fj=0;var j=$t(Mu),_=Q.T,F=de.p;try{de.p=32>j?32:j,Q.T=null,j=qj,qj=null;var K=Rh,pe=Mu;if(mo=0,$m=Rh=null,Mu=0,(Ni&6)!==0)throw Error(i(331));var Te=Ni;if(Ni|=4,o4(K.current),i4(K,K.current,pe,j),Ni=Te,L0(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Er,K)}catch{}return!0}finally{de.p=F,Q.T=_,N4(c,m)}}function E4(c,m,j){m=E(j,m),m=bj(c.stateNode,m,2),c=Nn(c,m,2),c!==null&&(vr(c,2),Qd(c))}function Ri(c,m,j){if(c.tag===3)E4(c,c,j);else for(;m!==null;){if(m.tag===3){E4(m,c,j);break}else if(m.tag===1){var _=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ph===null||!Ph.has(_))){c=E(j,c),j=_3(2),_=Nn(m,j,2),_!==null&&(T3(j,_,m,c),vr(_,2),Qd(_));break}}m=m.return}}function Vj(c,m,j){var _=c.pingCache;if(_===null){_=c.pingCache=new NH;var F=new Set;_.set(m,F)}else F=_.get(m),F===void 0&&(F=new Set,_.set(m,F));F.has(j)||(Lj=!0,F.add(j),c=IH.bind(null,c,m,j),m.then(c,c))}function IH(c,m,j){var _=c.pingCache;_!==null&&_.delete(m),c.pingedLanes|=c.suspendedLanes&j,c.warmLanes&=~j,ea===c&&(Zn&j)===j&&(ws===4||ws===3&&(Zn&62914560)===Zn&&300>zr()-dx?(Ni&2)===0&&Gm(c,0):zj|=j,Vm===Zn&&(Vm=0)),Qd(c)}function _4(c,m){m===0&&(m=vi()),c=yl(c,m),c!==null&&(vr(c,m),Qd(c))}function OH(c){var m=c.memoizedState,j=0;m!==null&&(j=m.retryLane),_4(c,j)}function kH(c,m){var j=0;switch(c.tag){case 31:case 13:var _=c.stateNode,F=c.memoizedState;F!==null&&(j=F.retryLane);break;case 19:_=c.stateNode;break;case 22:_=c.stateNode._retryCache;break;default:throw Error(i(314))}_!==null&&_.delete(m),_4(c,j)}function DH(c,m){return rr(c,m)}var yx=null,Qm=null,$j=!1,xx=!1,Gj=!1,Lh=0;function Qd(c){c!==Qm&&c.next===null&&(Qm===null?yx=Qm=c:Qm=Qm.next=c),xx=!0,$j||($j=!0,RH())}function L0(c,m){if(!Gj&&xx){Gj=!0;do for(var j=!1,_=yx;_!==null;){if(c!==0){var F=_.pendingLanes;if(F===0)var K=0;else{var pe=_.suspendedLanes,Te=_.pingedLanes;K=(1<<31-ur(42|c)+1)-1,K&=F&~(pe&~Te),K=K&201326741?K&201326741|1:K?K|2:0}K!==0&&(j=!0,k4(_,K))}else K=Zn,K=On(_,_===ea?K:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(K&3)===0||Qi(_,K)||(j=!0,k4(_,K));_=_.next}while(j);Gj=!1}}function PH(){T4()}function T4(){xx=$j=!1;var c=0;Lh!==0&&VH()&&(c=Lh);for(var m=zr(),j=null,_=yx;_!==null;){var F=_.next,K=I4(_,m);K===0?(_.next=null,j===null?yx=F:j.next=F,F===null&&(Qm=j)):(j=_,(c!==0||(K&3)!==0)&&(xx=!0)),_=F}mo!==0&&mo!==5||L0(c),Lh!==0&&(Lh=0)}function I4(c,m){for(var j=c.suspendedLanes,_=c.pingedLanes,F=c.expirationTimes,K=c.pendingLanes&-62914561;0<K;){var pe=31-ur(K),Te=1<<pe,Ue=F[pe];Ue===-1?((Te&j)===0||(Te&_)!==0)&&(F[pe]=Ta(Te,m)):Ue<=m&&(c.expiredLanes|=Te),K&=~Te}if(m=ea,j=Zn,j=On(c,c===m?j:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_=c.callbackNode,j===0||c===m&&(Pi===2||Pi===9)||c.cancelPendingCommit!==null)return _!==null&&_!==null&&St(_),c.callbackNode=null,c.callbackPriority=0;if((j&3)===0||Qi(c,j)){if(m=j&-j,m===c.callbackPriority)return m;switch(_!==null&&St(_),$t(j)){case 2:case 8:j=xn;break;case 32:j=Yr;break;case 268435456:j=tn;break;default:j=Yr}return _=O4.bind(null,c),j=rr(j,_),c.callbackPriority=m,c.callbackNode=j,m}return _!==null&&_!==null&&St(_),c.callbackPriority=2,c.callbackNode=null,2}function O4(c,m){if(mo!==0&&mo!==5)return c.callbackNode=null,c.callbackPriority=0,null;var j=c.callbackNode;if(gx()&&c.callbackNode!==j)return null;var _=Zn;return _=On(c,c===ea?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_===0?null:(h4(c,_,m),I4(c,zr()),c.callbackNode!=null&&c.callbackNode===j?O4.bind(null,c):null)}function k4(c,m){if(gx())return null;h4(c,m,!0)}function RH(){GH(function(){(Ni&6)!==0?rr(Ir,PH):T4()})}function Kj(){if(Lh===0){var c=P;c===0&&(c=Gr,Gr<<=1,(Gr&261888)===0&&(Gr=256)),Lh=c}return Lh}function D4(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Oa(""+c)}function P4(c,m){var j=m.ownerDocument.createElement("input");return j.name=m.name,j.value=m.value,c.id&&j.setAttribute("form",c.id),m.parentNode.insertBefore(j,m),c=new FormData(c),j.parentNode.removeChild(j),c}function MH(c,m,j,_,F){if(m==="submit"&&j&&j.stateNode===F){var K=D4((F[vn]||null).action),pe=_.submitter;pe&&(m=(m=pe[vn]||null)?D4(m.formAction):pe.getAttribute("formAction"),m!==null&&(K=m,pe=null));var Te=new ji("action","action",null,_,F);c.push({event:Te,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Lh!==0){var Ue=pe?P4(F,pe):new FormData(F);mj(j,{pending:!0,data:Ue,method:F.method,action:K},null,Ue)}}else typeof K=="function"&&(Te.preventDefault(),Ue=pe?P4(F,pe):new FormData(F),mj(j,{pending:!0,data:Ue,method:F.method,action:K},K,Ue))},currentTarget:F}]})}}for(var Qj=0;Qj<ko.length;Qj++){var Yj=ko[Qj],LH=Yj.toLowerCase(),zH=Yj[0].toUpperCase()+Yj.slice(1);tl(LH,"on"+zH)}tl(ua,"onAnimationEnd"),tl(Pa,"onAnimationIteration"),tl(Un,"onAnimationStart"),tl("dblclick","onDoubleClick"),tl("focusin","onFocus"),tl("focusout","onBlur"),tl(Ra,"onTransitionRun"),tl(Ms,"onTransitionStart"),tl(xc,"onTransitionCancel"),tl(Oo,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var z0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(z0));function R4(c,m){m=(m&4)!==0;for(var j=0;j<c.length;j++){var _=c[j],F=_.event;_=_.listeners;e:{var K=void 0;if(m)for(var pe=_.length-1;0<=pe;pe--){var Te=_[pe],Ue=Te.instance,ft=Te.currentTarget;if(Te=Te.listener,Ue!==K&&F.isPropagationStopped())break e;K=Te,F.currentTarget=ft;try{K(F)}catch(It){Pd(It)}F.currentTarget=null,K=Ue}else for(pe=0;pe<_.length;pe++){if(Te=_[pe],Ue=Te.instance,ft=Te.currentTarget,Te=Te.listener,Ue!==K&&F.isPropagationStopped())break e;K=Te,F.currentTarget=ft;try{K(F)}catch(It){Pd(It)}F.currentTarget=null,K=Ue}}}}function Vn(c,m){var j=m[Zi];j===void 0&&(j=m[Zi]=new Set);var _=c+"__bubble";j.has(_)||(M4(m,c,2,!1),j.add(_))}function Zj(c,m,j){var _=0;m&&(_|=4),M4(j,c,_,m)}var vx="_reactListening"+Math.random().toString(36).slice(2);function Xj(c){if(!c[vx]){c[vx]=!0,Rt.forEach(function(j){j!=="selectionchange"&&(BH.has(j)||Zj(j,!1,c),Zj(j,!0,c))});var m=c.nodeType===9?c:c.ownerDocument;m===null||m[vx]||(m[vx]=!0,Zj("selectionchange",!1,m))}}function M4(c,m,j,_){switch(uT(m)){case 2:var F=fV;break;case 8:F=mV;break;default:F=f5}j=F.bind(null,m,j,c),F=void 0,!gc||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(F=!0),_?F!==void 0?c.addEventListener(m,j,{capture:!0,passive:F}):c.addEventListener(m,j,!0):F!==void 0?c.addEventListener(m,j,{passive:F}):c.addEventListener(m,j,!1)}function Jj(c,m,j,_,F){var K=_;if((m&1)===0&&(m&2)===0&&_!==null)e:for(;;){if(_===null)return;var pe=_.tag;if(pe===3||pe===4){var Te=_.stateNode.containerInfo;if(Te===F)break;if(pe===4)for(pe=_.return;pe!==null;){var Ue=pe.tag;if((Ue===3||Ue===4)&&pe.stateNode.containerInfo===F)return;pe=pe.return}for(;Te!==null;){if(pe=fi(Te),pe===null)return;if(Ue=pe.tag,Ue===5||Ue===6||Ue===26||Ue===27){_=K=pe;continue e}Te=Te.parentNode}}_=_.return}hd(function(){var ft=K,It=Pl(j),Mt=[];e:{var gt=ju.get(c);if(gt!==void 0){var jt=ji,jr=c;switch(c){case"keypress":if(Ja(j)===0)break e;case"keydown":case"keyup":jt=Sn;break;case"focusin":jr="focus",jt=Rl;break;case"focusout":jr="blur",jt=Rl;break;case"beforeblur":case"afterblur":jt=Rl;break;case"click":if(j.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=To;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=xa;break;case ua:case Pa:case Un:jt=ee;break;case Oo:jt=Ei;break;case"scroll":case"scrollend":jt=mn;break;case"wheel":jt=ts;break;case"copy":case"cut":case"paste":jt=Re;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=Zr;break;case"toggle":case"beforetoggle":jt=Zo}var nn=(m&4)!==0,Hi=!nn&&(c==="scroll"||c==="scrollend"),rt=nn?gt!==null?gt+"Capture":null:gt;nn=[];for(var Ke=ft,ht;Ke!==null;){var Dt=Ke;if(ht=Dt.stateNode,Dt=Dt.tag,Dt!==5&&Dt!==26&&Dt!==27||ht===null||rt===null||(Dt=Lr(Ke,rt),Dt!=null&&nn.push(B0(Ke,Dt,ht))),Hi)break;Ke=Ke.return}0<nn.length&&(gt=new jt(gt,jr,null,j,It),Mt.push({event:gt,listeners:nn}))}}if((m&7)===0){e:{if(gt=c==="mouseover"||c==="pointerover",jt=c==="mouseout"||c==="pointerout",gt&&j!==Eo&&(jr=j.relatedTarget||j.fromElement)&&(fi(jr)||jr[Bi]))break e;if((jt||gt)&&(gt=It.window===It?It:(gt=It.ownerDocument)?gt.defaultView||gt.parentWindow:window,jt?(jr=j.relatedTarget||j.toElement,jt=ft,jr=jr?fi(jr):null,jr!==null&&(Hi=s(jr),nn=jr.tag,jr!==Hi||nn!==5&&nn!==27&&nn!==6)&&(jr=null)):(jt=null,jr=ft),jt!==jr)){if(nn=Fn,Dt="onMouseLeave",rt="onMouseEnter",Ke="mouse",(c==="pointerout"||c==="pointerover")&&(nn=Zr,Dt="onPointerLeave",rt="onPointerEnter",Ke="pointer"),Hi=jt==null?gt:Go(jt),ht=jr==null?gt:Go(jr),gt=new nn(Dt,Ke+"leave",jt,j,It),gt.target=Hi,gt.relatedTarget=ht,Dt=null,fi(It)===ft&&(nn=new nn(rt,Ke+"enter",jr,j,It),nn.target=ht,nn.relatedTarget=Hi,Dt=nn),Hi=Dt,jt&&jr)t:{for(nn=FH,rt=jt,Ke=jr,ht=0,Dt=rt;Dt;Dt=nn(Dt))ht++;Dt=0;for(var Vr=Ke;Vr;Vr=nn(Vr))Dt++;for(;0<ht-Dt;)rt=nn(rt),ht--;for(;0<Dt-ht;)Ke=nn(Ke),Dt--;for(;ht--;){if(rt===Ke||Ke!==null&&rt===Ke.alternate){nn=rt;break t}rt=nn(rt),Ke=nn(Ke)}nn=null}else nn=null;jt!==null&&L4(Mt,gt,jt,nn,!1),jr!==null&&Hi!==null&&L4(Mt,Hi,jr,nn,!0)}}e:{if(gt=ft?Go(ft):window,jt=gt.nodeName&&gt.nodeName.toLowerCase(),jt==="select"||jt==="input"&&gt.type==="file")var gi=da;else if(Qs(gt))if(Ys)gi=S;else{gi=g;var Dr=h}else jt=gt.nodeName,!jt||jt.toLowerCase()!=="input"||gt.type!=="checkbox"&&gt.type!=="radio"?ft&&Jn(ft.elementType)&&(gi=da):gi=b;if(gi&&(gi=gi(c,ft))){Fi(Mt,gi,j,It);break e}Dr&&Dr(c,gt,ft),c==="focusout"&&ft&&gt.type==="number"&&ft.memoizedProps.value!=null&&Pe(gt,"number",gt.value)}switch(Dr=ft?Go(ft):window,c){case"focusin":(Qs(Dr)||Dr.contentEditable==="true")&&(qe=Dr,$e=ft,Xe=null);break;case"focusout":Xe=$e=qe=null;break;case"mousedown":ct=!0;break;case"contextmenu":case"mouseup":case"dragend":ct=!1,Tt(Mt,j,It);break;case"selectionchange":if(Me)break;case"keydown":case"keyup":Tt(Mt,j,It)}var In;if(so)e:{switch(c){case"compositionstart":var Xn="onCompositionStart";break e;case"compositionend":Xn="onCompositionEnd";break e;case"compositionupdate":Xn="onCompositionUpdate";break e}Xn=void 0}else gl?Ql(c,j)&&(Xn="onCompositionEnd"):c==="keydown"&&j.keyCode===229&&(Xn="onCompositionStart");Xn&&(Xo&&j.locale!=="ko"&&(gl||Xn!=="onCompositionStart"?Xn==="onCompositionEnd"&&gl&&(In=Ks()):(fs=It,Xa="value"in fs?fs.value:fs.textContent,gl=!0)),Dr=bx(ft,Xn),0<Dr.length&&(Xn=new et(Xn,c,null,j,It),Mt.push({event:Xn,listeners:Dr}),In?Xn.data=In:(In=Jo(j),In!==null&&(Xn.data=In)))),(In=Kl?qn(c,j):rs(c,j))&&(Xn=bx(ft,"onBeforeInput"),0<Xn.length&&(Dr=new et("onBeforeInput","beforeinput",null,j,It),Mt.push({event:Dr,listeners:Xn}),Dr.data=In)),MH(Mt,c,ft,j,It)}R4(Mt,m)})}function B0(c,m,j){return{instance:c,listener:m,currentTarget:j}}function bx(c,m){for(var j=m+"Capture",_=[];c!==null;){var F=c,K=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||K===null||(F=Lr(c,j),F!=null&&_.unshift(B0(c,F,K)),F=Lr(c,m),F!=null&&_.push(B0(c,F,K))),c.tag===3)return _;c=c.return}return[]}function FH(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function L4(c,m,j,_,F){for(var K=m._reactName,pe=[];j!==null&&j!==_;){var Te=j,Ue=Te.alternate,ft=Te.stateNode;if(Te=Te.tag,Ue!==null&&Ue===_)break;Te!==5&&Te!==26&&Te!==27||ft===null||(Ue=ft,F?(ft=Lr(j,K),ft!=null&&pe.unshift(B0(j,ft,Ue))):F||(ft=Lr(j,K),ft!=null&&pe.push(B0(j,ft,Ue)))),j=j.return}pe.length!==0&&c.push({event:m,listeners:pe})}var qH=/\r\n?/g,UH=/\u0000|\uFFFD/g;function z4(c){return(typeof c=="string"?c:""+c).replace(qH,`
`).replace(UH,"")}function B4(c,m){return m=z4(m),z4(c)===m}function Wi(c,m,j,_,F,K){switch(j){case"children":typeof _=="string"?m==="body"||m==="textarea"&&_===""||Ps(c,_):(typeof _=="number"||typeof _=="bigint")&&m!=="body"&&Ps(c,""+_);break;case"className":Rn(c,"class",_);break;case"tabIndex":Rn(c,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(c,j,_);break;case"style":Cr(c,_,K);break;case"data":if(m!=="object"){Rn(c,"data",_);break}case"src":case"href":if(_===""&&(m!=="a"||j!=="href")){c.removeAttribute(j);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(j);break}_=Oa(""+_),c.setAttribute(j,_);break;case"action":case"formAction":if(typeof _=="function"){c.setAttribute(j,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof K=="function"&&(j==="formAction"?(m!=="input"&&Wi(c,m,"name",F.name,F,null),Wi(c,m,"formEncType",F.formEncType,F,null),Wi(c,m,"formMethod",F.formMethod,F,null),Wi(c,m,"formTarget",F.formTarget,F,null)):(Wi(c,m,"encType",F.encType,F,null),Wi(c,m,"method",F.method,F,null),Wi(c,m,"target",F.target,F,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(j);break}_=Oa(""+_),c.setAttribute(j,_);break;case"onClick":_!=null&&(c.onclick=Za);break;case"onScroll":_!=null&&Vn("scroll",c);break;case"onScrollEnd":_!=null&&Vn("scrollend",c);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(j=_.__html,j!=null){if(F.children!=null)throw Error(i(60));c.innerHTML=j}}break;case"multiple":c.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":c.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){c.removeAttribute("xlink:href");break}j=Oa(""+_),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(j,""+_):c.removeAttribute(j);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(j,""):c.removeAttribute(j);break;case"capture":case"download":_===!0?c.setAttribute(j,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(j,_):c.removeAttribute(j);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?c.setAttribute(j,_):c.removeAttribute(j);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?c.removeAttribute(j):c.setAttribute(j,_);break;case"popover":Vn("beforetoggle",c),Vn("toggle",c),Jr(c,"popover",_);break;case"xlinkActuate":hs(c,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":hs(c,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":hs(c,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":hs(c,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":hs(c,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":hs(c,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":hs(c,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":hs(c,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":hs(c,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Jr(c,"is",_);break;case"innerText":case"textContent":break;default:(!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(j=Dl.get(j)||j,Jr(c,j,_))}}function e5(c,m,j,_,F,K){switch(j){case"style":Cr(c,_,K);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(j=_.__html,j!=null){if(F.children!=null)throw Error(i(60));c.innerHTML=j}}break;case"children":typeof _=="string"?Ps(c,_):(typeof _=="number"||typeof _=="bigint")&&Ps(c,""+_);break;case"onScroll":_!=null&&Vn("scroll",c);break;case"onScrollEnd":_!=null&&Vn("scrollend",c);break;case"onClick":_!=null&&(c.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(j))e:{if(j[0]==="o"&&j[1]==="n"&&(F=j.endsWith("Capture"),m=j.slice(2,F?j.length-7:void 0),K=c[vn]||null,K=K!=null?K[j]:null,typeof K=="function"&&c.removeEventListener(m,K,F),typeof _=="function")){typeof K!="function"&&K!==null&&(j in c?c[j]=null:c.hasAttribute(j)&&c.removeAttribute(j)),c.addEventListener(m,_,F);break e}j in c?c[j]=_:_===!0?c.setAttribute(j,""):Jr(c,j,_)}}}function ol(c,m,j){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vn("error",c),Vn("load",c);var _=!1,F=!1,K;for(K in j)if(j.hasOwnProperty(K)){var pe=j[K];if(pe!=null)switch(K){case"src":_=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Wi(c,m,K,pe,j,null)}}F&&Wi(c,m,"srcSet",j.srcSet,j,null),_&&Wi(c,m,"src",j.src,j,null);return;case"input":Vn("invalid",c);var Te=K=pe=F=null,Ue=null,ft=null;for(_ in j)if(j.hasOwnProperty(_)){var It=j[_];if(It!=null)switch(_){case"name":F=It;break;case"type":pe=It;break;case"checked":Ue=It;break;case"defaultChecked":ft=It;break;case"value":K=It;break;case"defaultValue":Te=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(i(137,m));break;default:Wi(c,m,_,It,j,null)}}nt(c,K,Te,Ue,ft,pe,F,!1);return;case"select":Vn("invalid",c),_=pe=K=null;for(F in j)if(j.hasOwnProperty(F)&&(Te=j[F],Te!=null))switch(F){case"value":K=Te;break;case"defaultValue":pe=Te;break;case"multiple":_=Te;default:Wi(c,m,F,Te,j,null)}m=K,j=pe,c.multiple=!!_,m!=null?Ht(c,!!_,m,!1):j!=null&&Ht(c,!!_,j,!0);return;case"textarea":Vn("invalid",c),K=F=_=null;for(pe in j)if(j.hasOwnProperty(pe)&&(Te=j[pe],Te!=null))switch(pe){case"value":_=Te;break;case"defaultValue":F=Te;break;case"children":K=Te;break;case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(91));break;default:Wi(c,m,pe,Te,j,null)}la(c,_,F,K);return;case"option":for(Ue in j)j.hasOwnProperty(Ue)&&(_=j[Ue],_!=null)&&(Ue==="selected"?c.selected=_&&typeof _!="function"&&typeof _!="symbol":Wi(c,m,Ue,_,j,null));return;case"dialog":Vn("beforetoggle",c),Vn("toggle",c),Vn("cancel",c),Vn("close",c);break;case"iframe":case"object":Vn("load",c);break;case"video":case"audio":for(_=0;_<z0.length;_++)Vn(z0[_],c);break;case"image":Vn("error",c),Vn("load",c);break;case"details":Vn("toggle",c);break;case"embed":case"source":case"link":Vn("error",c),Vn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in j)if(j.hasOwnProperty(ft)&&(_=j[ft],_!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Wi(c,m,ft,_,j,null)}return;default:if(Jn(m)){for(It in j)j.hasOwnProperty(It)&&(_=j[It],_!==void 0&&e5(c,m,It,_,j,void 0));return}}for(Te in j)j.hasOwnProperty(Te)&&(_=j[Te],_!=null&&Wi(c,m,Te,_,j,null))}function WH(c,m,j,_){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,K=null,pe=null,Te=null,Ue=null,ft=null,It=null;for(jt in j){var Mt=j[jt];if(j.hasOwnProperty(jt)&&Mt!=null)switch(jt){case"checked":break;case"value":break;case"defaultValue":Ue=Mt;default:_.hasOwnProperty(jt)||Wi(c,m,jt,null,_,Mt)}}for(var gt in _){var jt=_[gt];if(Mt=j[gt],_.hasOwnProperty(gt)&&(jt!=null||Mt!=null))switch(gt){case"type":K=jt;break;case"name":F=jt;break;case"checked":ft=jt;break;case"defaultChecked":It=jt;break;case"value":pe=jt;break;case"defaultValue":Te=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(i(137,m));break;default:jt!==Mt&&Wi(c,m,gt,jt,_,Mt)}}Xi(c,pe,Te,Ue,ft,It,K,F);return;case"select":jt=pe=Te=gt=null;for(K in j)if(Ue=j[K],j.hasOwnProperty(K)&&Ue!=null)switch(K){case"value":break;case"multiple":jt=Ue;default:_.hasOwnProperty(K)||Wi(c,m,K,null,_,Ue)}for(F in _)if(K=_[F],Ue=j[F],_.hasOwnProperty(F)&&(K!=null||Ue!=null))switch(F){case"value":gt=K;break;case"defaultValue":Te=K;break;case"multiple":pe=K;default:K!==Ue&&Wi(c,m,F,K,_,Ue)}m=Te,j=pe,_=jt,gt!=null?Ht(c,!!j,gt,!1):!!_!=!!j&&(m!=null?Ht(c,!!j,m,!0):Ht(c,!!j,j?[]:"",!1));return;case"textarea":jt=gt=null;for(Te in j)if(F=j[Te],j.hasOwnProperty(Te)&&F!=null&&!_.hasOwnProperty(Te))switch(Te){case"value":break;case"children":break;default:Wi(c,m,Te,null,_,F)}for(pe in _)if(F=_[pe],K=j[pe],_.hasOwnProperty(pe)&&(F!=null||K!=null))switch(pe){case"value":gt=F;break;case"defaultValue":jt=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(91));break;default:F!==K&&Wi(c,m,pe,F,_,K)}ri(c,gt,jt);return;case"option":for(var jr in j)gt=j[jr],j.hasOwnProperty(jr)&&gt!=null&&!_.hasOwnProperty(jr)&&(jr==="selected"?c.selected=!1:Wi(c,m,jr,null,_,gt));for(Ue in _)gt=_[Ue],jt=j[Ue],_.hasOwnProperty(Ue)&&gt!==jt&&(gt!=null||jt!=null)&&(Ue==="selected"?c.selected=gt&&typeof gt!="function"&&typeof gt!="symbol":Wi(c,m,Ue,gt,_,jt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nn in j)gt=j[nn],j.hasOwnProperty(nn)&&gt!=null&&!_.hasOwnProperty(nn)&&Wi(c,m,nn,null,_,gt);for(ft in _)if(gt=_[ft],jt=j[ft],_.hasOwnProperty(ft)&&gt!==jt&&(gt!=null||jt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,m));break;default:Wi(c,m,ft,gt,_,jt)}return;default:if(Jn(m)){for(var Hi in j)gt=j[Hi],j.hasOwnProperty(Hi)&&gt!==void 0&&!_.hasOwnProperty(Hi)&&e5(c,m,Hi,void 0,_,gt);for(It in _)gt=_[It],jt=j[It],!_.hasOwnProperty(It)||gt===jt||gt===void 0&&jt===void 0||e5(c,m,It,gt,_,jt);return}}for(var rt in j)gt=j[rt],j.hasOwnProperty(rt)&&gt!=null&&!_.hasOwnProperty(rt)&&Wi(c,m,rt,null,_,gt);for(Mt in _)gt=_[Mt],jt=j[Mt],!_.hasOwnProperty(Mt)||gt===jt||gt==null&&jt==null||Wi(c,m,Mt,gt,_,jt)}function F4(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HH(){if(typeof performance.getEntriesByType=="function"){for(var c=0,m=0,j=performance.getEntriesByType("resource"),_=0;_<j.length;_++){var F=j[_],K=F.transferSize,pe=F.initiatorType,Te=F.duration;if(K&&Te&&F4(pe)){for(pe=0,Te=F.responseEnd,_+=1;_<j.length;_++){var Ue=j[_],ft=Ue.startTime;if(ft>Te)break;var It=Ue.transferSize,Mt=Ue.initiatorType;It&&F4(Mt)&&(Ue=Ue.responseEnd,pe+=It*(Ue<Te?1:(Te-ft)/(Ue-ft)))}if(--_,m+=8*(K+pe)/(F.duration/1e3),c++,10<c)break}}if(0<c)return m/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var t5=null,r5=null;function jx(c){return c.nodeType===9?c:c.ownerDocument}function q4(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U4(c,m){if(c===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&m==="foreignObject"?0:c}function n5(c,m){return c==="textarea"||c==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var i5=null;function VH(){var c=window.event;return c&&c.type==="popstate"?c===i5?!1:(i5=c,!0):(i5=null,!1)}var W4=typeof setTimeout=="function"?setTimeout:void 0,$H=typeof clearTimeout=="function"?clearTimeout:void 0,H4=typeof Promise=="function"?Promise:void 0,GH=typeof queueMicrotask=="function"?queueMicrotask:typeof H4<"u"?function(c){return H4.resolve(null).then(c).catch(KH)}:W4;function KH(c){setTimeout(function(){throw c})}function zh(c){return c==="head"}function V4(c,m){var j=m,_=0;do{var F=j.nextSibling;if(c.removeChild(j),F&&F.nodeType===8)if(j=F.data,j==="/$"||j==="/&"){if(_===0){c.removeChild(F),Jm(m);return}_--}else if(j==="$"||j==="$?"||j==="$~"||j==="$!"||j==="&")_++;else if(j==="html")F0(c.ownerDocument.documentElement);else if(j==="head"){j=c.ownerDocument.head,F0(j);for(var K=j.firstChild;K;){var pe=K.nextSibling,Te=K.nodeName;K[$o]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&K.rel.toLowerCase()==="stylesheet"||j.removeChild(K),K=pe}}else j==="body"&&F0(c.ownerDocument.body);j=F}while(j);Jm(m)}function $4(c,m){var j=c;c=0;do{var _=j.nextSibling;if(j.nodeType===1?m?(j._stashedDisplay=j.style.display,j.style.display="none"):(j.style.display=j._stashedDisplay||"",j.getAttribute("style")===""&&j.removeAttribute("style")):j.nodeType===3&&(m?(j._stashedText=j.nodeValue,j.nodeValue=""):j.nodeValue=j._stashedText||""),_&&_.nodeType===8)if(j=_.data,j==="/$"){if(c===0)break;c--}else j!=="$"&&j!=="$?"&&j!=="$~"&&j!=="$!"||c++;j=_}while(j)}function a5(c){var m=c.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var j=m;switch(m=m.nextSibling,j.nodeName){case"HTML":case"HEAD":case"BODY":a5(j),Ga(j);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(j.rel.toLowerCase()==="stylesheet")continue}c.removeChild(j)}}function QH(c,m,j,_){for(;c.nodeType===1;){var F=j;if(c.nodeName.toLowerCase()!==m.toLowerCase()){if(!_&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(_){if(!c[$o])switch(m){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(K=c.getAttribute("rel"),K==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(K!==F.rel||c.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||c.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||c.getAttribute("title")!==(F.title==null?null:F.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(K=c.getAttribute("src"),(K!==(F.src==null?null:F.src)||c.getAttribute("type")!==(F.type==null?null:F.type)||c.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&K&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(m==="input"&&c.type==="hidden"){var K=F.name==null?null:""+F.name;if(F.type==="hidden"&&c.getAttribute("name")===K)return c}else return c;if(c=Gc(c.nextSibling),c===null)break}return null}function YH(c,m,j){if(m==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!j||(c=Gc(c.nextSibling),c===null))return null;return c}function G4(c,m){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Gc(c.nextSibling),c===null))return null;return c}function s5(c){return c.data==="$?"||c.data==="$~"}function o5(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function ZH(c,m){var j=c.ownerDocument;if(c.data==="$~")c._reactRetry=m;else if(c.data!=="$?"||j.readyState!=="loading")m();else{var _=function(){m(),j.removeEventListener("DOMContentLoaded",_)};j.addEventListener("DOMContentLoaded",_),c._reactRetry=_}}function Gc(c){for(;c!=null;c=c.nextSibling){var m=c.nodeType;if(m===1||m===3)break;if(m===8){if(m=c.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return c}var l5=null;function K4(c){c=c.nextSibling;for(var m=0;c;){if(c.nodeType===8){var j=c.data;if(j==="/$"||j==="/&"){if(m===0)return Gc(c.nextSibling);m--}else j!=="$"&&j!=="$!"&&j!=="$?"&&j!=="$~"&&j!=="&"||m++}c=c.nextSibling}return null}function Q4(c){c=c.previousSibling;for(var m=0;c;){if(c.nodeType===8){var j=c.data;if(j==="$"||j==="$!"||j==="$?"||j==="$~"||j==="&"){if(m===0)return c;m--}else j!=="/$"&&j!=="/&"||m++}c=c.previousSibling}return null}function Y4(c,m,j){switch(m=jx(j),c){case"html":if(c=m.documentElement,!c)throw Error(i(452));return c;case"head":if(c=m.head,!c)throw Error(i(453));return c;case"body":if(c=m.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}function F0(c){for(var m=c.attributes;m.length;)c.removeAttributeNode(m[0]);Ga(c)}var Kc=new Map,Z4=new Set;function wx(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Lu=de.d;de.d={f:XH,r:JH,D:eV,C:tV,L:rV,m:nV,X:aV,S:iV,M:sV};function XH(){var c=Lu.f(),m=fx();return c||m}function JH(c){var m=kn(c);m!==null&&m.tag===5&&m.type==="form"?m3(m):Lu.r(c)}var Ym=typeof document>"u"?null:document;function X4(c,m,j){var _=Ym;if(_&&typeof m=="string"&&m){var F=Or(m);F='link[rel="'+c+'"][href="'+F+'"]',typeof j=="string"&&(F+='[crossorigin="'+j+'"]'),Z4.has(F)||(Z4.add(F),c={rel:c,crossOrigin:j,href:m},_.querySelector(F)===null&&(m=_.createElement("link"),ol(m,"link",c),Oi(m),_.head.appendChild(m)))}}function eV(c){Lu.D(c),X4("dns-prefetch",c,null)}function tV(c,m){Lu.C(c,m),X4("preconnect",c,m)}function rV(c,m,j){Lu.L(c,m,j);var _=Ym;if(_&&c&&m){var F='link[rel="preload"][as="'+Or(m)+'"]';m==="image"&&j&&j.imageSrcSet?(F+='[imagesrcset="'+Or(j.imageSrcSet)+'"]',typeof j.imageSizes=="string"&&(F+='[imagesizes="'+Or(j.imageSizes)+'"]')):F+='[href="'+Or(c)+'"]';var K=F;switch(m){case"style":K=Zm(c);break;case"script":K=Xm(c)}Kc.has(K)||(c=p({rel:"preload",href:m==="image"&&j&&j.imageSrcSet?void 0:c,as:m},j),Kc.set(K,c),_.querySelector(F)!==null||m==="style"&&_.querySelector(q0(K))||m==="script"&&_.querySelector(U0(K))||(m=_.createElement("link"),ol(m,"link",c),Oi(m),_.head.appendChild(m)))}}function nV(c,m){Lu.m(c,m);var j=Ym;if(j&&c){var _=m&&typeof m.as=="string"?m.as:"script",F='link[rel="modulepreload"][as="'+Or(_)+'"][href="'+Or(c)+'"]',K=F;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":K=Xm(c)}if(!Kc.has(K)&&(c=p({rel:"modulepreload",href:c},m),Kc.set(K,c),j.querySelector(F)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(j.querySelector(U0(K)))return}_=j.createElement("link"),ol(_,"link",c),Oi(_),j.head.appendChild(_)}}}function iV(c,m,j){Lu.S(c,m,j);var _=Ym;if(_&&c){var F=Ka(_).hoistableStyles,K=Zm(c);m=m||"default";var pe=F.get(K);if(!pe){var Te={loading:0,preload:null};if(pe=_.querySelector(q0(K)))Te.loading=5;else{c=p({rel:"stylesheet",href:c,"data-precedence":m},j),(j=Kc.get(K))&&c5(c,j);var Ue=pe=_.createElement("link");Oi(Ue),ol(Ue,"link",c),Ue._p=new Promise(function(ft,It){Ue.onload=ft,Ue.onerror=It}),Ue.addEventListener("load",function(){Te.loading|=1}),Ue.addEventListener("error",function(){Te.loading|=2}),Te.loading|=4,Sx(pe,m,_)}pe={type:"stylesheet",instance:pe,count:1,state:Te},F.set(K,pe)}}}function aV(c,m){Lu.X(c,m);var j=Ym;if(j&&c){var _=Ka(j).hoistableScripts,F=Xm(c),K=_.get(F);K||(K=j.querySelector(U0(F)),K||(c=p({src:c,async:!0},m),(m=Kc.get(F))&&d5(c,m),K=j.createElement("script"),Oi(K),ol(K,"link",c),j.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},_.set(F,K))}}function sV(c,m){Lu.M(c,m);var j=Ym;if(j&&c){var _=Ka(j).hoistableScripts,F=Xm(c),K=_.get(F);K||(K=j.querySelector(U0(F)),K||(c=p({src:c,async:!0,type:"module"},m),(m=Kc.get(F))&&d5(c,m),K=j.createElement("script"),Oi(K),ol(K,"link",c),j.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},_.set(F,K))}}function J4(c,m,j,_){var F=(F=ge.current)?wx(F):null;if(!F)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof j.precedence=="string"&&typeof j.href=="string"?(m=Zm(j.href),j=Ka(F).hoistableStyles,_=j.get(m),_||(_={type:"style",instance:null,count:0,state:null},j.set(m,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(j.rel==="stylesheet"&&typeof j.href=="string"&&typeof j.precedence=="string"){c=Zm(j.href);var K=Ka(F).hoistableStyles,pe=K.get(c);if(pe||(F=F.ownerDocument||F,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},K.set(c,pe),(K=F.querySelector(q0(c)))&&!K._p&&(pe.instance=K,pe.state.loading=5),Kc.has(c)||(j={rel:"preload",as:"style",href:j.href,crossOrigin:j.crossOrigin,integrity:j.integrity,media:j.media,hrefLang:j.hrefLang,referrerPolicy:j.referrerPolicy},Kc.set(c,j),K||oV(F,c,j,pe.state))),m&&_===null)throw Error(i(528,""));return pe}if(m&&_!==null)throw Error(i(529,""));return null;case"script":return m=j.async,j=j.src,typeof j=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Xm(j),j=Ka(F).hoistableScripts,_=j.get(m),_||(_={type:"script",instance:null,count:0,state:null},j.set(m,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function Zm(c){return'href="'+Or(c)+'"'}function q0(c){return'link[rel="stylesheet"]['+c+"]"}function eT(c){return p({},c,{"data-precedence":c.precedence,precedence:null})}function oV(c,m,j,_){c.querySelector('link[rel="preload"][as="style"]['+m+"]")?_.loading=1:(m=c.createElement("link"),_.preload=m,m.addEventListener("load",function(){return _.loading|=1}),m.addEventListener("error",function(){return _.loading|=2}),ol(m,"link",j),Oi(m),c.head.appendChild(m))}function Xm(c){return'[src="'+Or(c)+'"]'}function U0(c){return"script[async]"+c}function tT(c,m,j){if(m.count++,m.instance===null)switch(m.type){case"style":var _=c.querySelector('style[data-href~="'+Or(j.href)+'"]');if(_)return m.instance=_,Oi(_),_;var F=p({},j,{"data-href":j.href,"data-precedence":j.precedence,href:null,precedence:null});return _=(c.ownerDocument||c).createElement("style"),Oi(_),ol(_,"style",F),Sx(_,j.precedence,c),m.instance=_;case"stylesheet":F=Zm(j.href);var K=c.querySelector(q0(F));if(K)return m.state.loading|=4,m.instance=K,Oi(K),K;_=eT(j),(F=Kc.get(F))&&c5(_,F),K=(c.ownerDocument||c).createElement("link"),Oi(K);var pe=K;return pe._p=new Promise(function(Te,Ue){pe.onload=Te,pe.onerror=Ue}),ol(K,"link",_),m.state.loading|=4,Sx(K,j.precedence,c),m.instance=K;case"script":return K=Xm(j.src),(F=c.querySelector(U0(K)))?(m.instance=F,Oi(F),F):(_=j,(F=Kc.get(K))&&(_=p({},j),d5(_,F)),c=c.ownerDocument||c,F=c.createElement("script"),Oi(F),ol(F,"link",_),c.head.appendChild(F),m.instance=F);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(_=m.instance,m.state.loading|=4,Sx(_,j.precedence,c));return m.instance}function Sx(c,m,j){for(var _=j.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=_.length?_[_.length-1]:null,K=F,pe=0;pe<_.length;pe++){var Te=_[pe];if(Te.dataset.precedence===m)K=Te;else if(K!==F)break}K?K.parentNode.insertBefore(c,K.nextSibling):(m=j.nodeType===9?j.head:j,m.insertBefore(c,m.firstChild))}function c5(c,m){c.crossOrigin==null&&(c.crossOrigin=m.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=m.referrerPolicy),c.title==null&&(c.title=m.title)}function d5(c,m){c.crossOrigin==null&&(c.crossOrigin=m.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=m.referrerPolicy),c.integrity==null&&(c.integrity=m.integrity)}var Cx=null;function rT(c,m,j){if(Cx===null){var _=new Map,F=Cx=new Map;F.set(j,_)}else F=Cx,_=F.get(j),_||(_=new Map,F.set(j,_));if(_.has(c))return _;for(_.set(c,null),j=j.getElementsByTagName(c),F=0;F<j.length;F++){var K=j[F];if(!(K[$o]||K[Yn]||c==="link"&&K.getAttribute("rel")==="stylesheet")&&K.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=K.getAttribute(m)||"";pe=c+pe;var Te=_.get(pe);Te?Te.push(K):_.set(pe,[K])}}return _}function nT(c,m,j){c=c.ownerDocument||c,c.head.insertBefore(j,m==="title"?c.querySelector("head > title"):null)}function lV(c,m,j){if(j===1||m.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;return m.rel==="stylesheet"?(c=m.disabled,typeof m.precedence=="string"&&c==null):!0;case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function iT(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function cV(c,m,j,_){if(j.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(j.state.loading&4)===0){if(j.instance===null){var F=Zm(_.href),K=m.querySelector(q0(F));if(K){m=K._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(c.count++,c=Nx.bind(c),m.then(c,c)),j.state.loading|=4,j.instance=K,Oi(K);return}K=m.ownerDocument||m,_=eT(_),(F=Kc.get(F))&&c5(_,F),K=K.createElement("link"),Oi(K);var pe=K;pe._p=new Promise(function(Te,Ue){pe.onload=Te,pe.onerror=Ue}),ol(K,"link",_),j.instance=K}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(j,m),(m=j.state.preload)&&(j.state.loading&3)===0&&(c.count++,j=Nx.bind(c),m.addEventListener("load",j),m.addEventListener("error",j))}}var u5=0;function dV(c,m){return c.stylesheets&&c.count===0&&Ex(c,c.stylesheets),0<c.count||0<c.imgCount?function(j){var _=setTimeout(function(){if(c.stylesheets&&Ex(c,c.stylesheets),c.unsuspend){var K=c.unsuspend;c.unsuspend=null,K()}},6e4+m);0<c.imgBytes&&u5===0&&(u5=62500*HH());var F=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&Ex(c,c.stylesheets),c.unsuspend)){var K=c.unsuspend;c.unsuspend=null,K()}},(c.imgBytes>u5?50:800)+m);return c.unsuspend=j,function(){c.unsuspend=null,clearTimeout(_),clearTimeout(F)}}:null}function Nx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ex(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Ax=null;function Ex(c,m){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Ax=new Map,m.forEach(uV,c),Ax=null,Nx.call(c))}function uV(c,m){if(!(m.state.loading&4)){var j=Ax.get(c);if(j)var _=j.get(null);else{j=new Map,Ax.set(c,j);for(var F=c.querySelectorAll("link[data-precedence],style[data-precedence]"),K=0;K<F.length;K++){var pe=F[K];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(j.set(pe.dataset.precedence,pe),_=pe)}_&&j.set(null,_)}F=m.instance,pe=F.getAttribute("data-precedence"),K=j.get(pe)||_,K===_&&j.set(null,F),j.set(pe,F),this.count++,_=Nx.bind(this),F.addEventListener("load",_),F.addEventListener("error",_),K?K.parentNode.insertBefore(F,K.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(F,c.firstChild)),m.state.loading|=4}}var W0={$$typeof:D,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function hV(c,m,j,_,F,K,pe,Te,Ue){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.hiddenUpdates=$a(null),this.identifierPrefix=_,this.onUncaughtError=F,this.onCaughtError=K,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ue,this.incompleteTransitions=new Map}function aT(c,m,j,_,F,K,pe,Te,Ue,ft,It,Mt){return c=new hV(c,m,j,pe,Ue,ft,It,Mt,Te),m=1,K===!0&&(m|=24),K=zs(3,null,null,m),c.current=K,K.stateNode=c,m=Ah(),m.refCount++,c.pooledCache=m,m.refCount++,K.memoizedState={element:_,isDehydrated:j,cache:m},Jt(K),c}function sT(c){return c?(c=gs,c):gs}function oT(c,m,j,_,F,K){F=sT(F),_.context===null?_.context=F:_.pendingContext=F,_=en(m),_.payload={element:j},K=K===void 0?null:K,K!==null&&(_.callback=K),j=Nn(c,_,m),j!==null&&(nc(j,c,m),Si(j,c,m))}function lT(c,m){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var j=c.retryLane;c.retryLane=j!==0&&j<m?j:m}}function h5(c,m){lT(c,m),(c=c.alternate)&&lT(c,m)}function cT(c){if(c.tag===13||c.tag===31){var m=yl(c,67108864);m!==null&&nc(m,c,67108864),h5(c,67108864)}}function dT(c){if(c.tag===13||c.tag===31){var m=Cc();m=Xr(m);var j=yl(c,m);j!==null&&nc(j,c,m),h5(c,m)}}var _x=!0;function fV(c,m,j,_){var F=Q.T;Q.T=null;var K=de.p;try{de.p=2,f5(c,m,j,_)}finally{de.p=K,Q.T=F}}function mV(c,m,j,_){var F=Q.T;Q.T=null;var K=de.p;try{de.p=8,f5(c,m,j,_)}finally{de.p=K,Q.T=F}}function f5(c,m,j,_){if(_x){var F=m5(_);if(F===null)Jj(c,m,_,Tx,j),hT(c,_);else if(gV(F,c,m,j,_))_.stopPropagation();else if(hT(c,_),m&4&&-1<pV.indexOf(c)){for(;F!==null;){var K=kn(F);if(K!==null)switch(K.tag){case 3:if(K=K.stateNode,K.current.memoizedState.isDehydrated){var pe=_r(K.pendingLanes);if(pe!==0){var Te=K;for(Te.pendingLanes|=2,Te.entangledLanes|=2;pe;){var Ue=1<<31-ur(pe);Te.entanglements[1]|=Ue,pe&=~Ue}Qd(K),(Ni&6)===0&&(ux=zr()+500,L0(0))}}break;case 31:case 13:Te=yl(K,2),Te!==null&&nc(Te,K,2),fx(),h5(K,2)}if(K=m5(_),K===null&&Jj(c,m,_,Tx,j),K===F)break;F=K}F!==null&&_.stopPropagation()}else Jj(c,m,_,null,j)}}function m5(c){return c=Pl(c),p5(c)}var Tx=null;function p5(c){if(Tx=null,c=fi(c),c!==null){var m=s(c);if(m===null)c=null;else{var j=m.tag;if(j===13){if(c=o(m),c!==null)return c;c=null}else if(j===31){if(c=l(m),c!==null)return c;c=null}else if(j===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;c=null}else m!==c&&(c=null)}}return Tx=c,null}function uT(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yn()){case Ir:return 2;case xn:return 8;case Yr:case tr:return 32;case tn:return 268435456;default:return 32}default:return 32}}var g5=!1,Bh=null,Fh=null,qh=null,H0=new Map,V0=new Map,Uh=[],pV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hT(c,m){switch(c){case"focusin":case"focusout":Bh=null;break;case"dragenter":case"dragleave":Fh=null;break;case"mouseover":case"mouseout":qh=null;break;case"pointerover":case"pointerout":H0.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":V0.delete(m.pointerId)}}function $0(c,m,j,_,F,K){return c===null||c.nativeEvent!==K?(c={blockedOn:m,domEventName:j,eventSystemFlags:_,nativeEvent:K,targetContainers:[F]},m!==null&&(m=kn(m),m!==null&&cT(m)),c):(c.eventSystemFlags|=_,m=c.targetContainers,F!==null&&m.indexOf(F)===-1&&m.push(F),c)}function gV(c,m,j,_,F){switch(m){case"focusin":return Bh=$0(Bh,c,m,j,_,F),!0;case"dragenter":return Fh=$0(Fh,c,m,j,_,F),!0;case"mouseover":return qh=$0(qh,c,m,j,_,F),!0;case"pointerover":var K=F.pointerId;return H0.set(K,$0(H0.get(K)||null,c,m,j,_,F)),!0;case"gotpointercapture":return K=F.pointerId,V0.set(K,$0(V0.get(K)||null,c,m,j,_,F)),!0}return!1}function fT(c){var m=fi(c.target);if(m!==null){var j=s(m);if(j!==null){if(m=j.tag,m===13){if(m=o(j),m!==null){c.blockedOn=m,er(c.priority,function(){dT(j)});return}}else if(m===31){if(m=l(j),m!==null){c.blockedOn=m,er(c.priority,function(){dT(j)});return}}else if(m===3&&j.stateNode.current.memoizedState.isDehydrated){c.blockedOn=j.tag===3?j.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Ix(c){if(c.blockedOn!==null)return!1;for(var m=c.targetContainers;0<m.length;){var j=m5(c.nativeEvent);if(j===null){j=c.nativeEvent;var _=new j.constructor(j.type,j);Eo=_,j.target.dispatchEvent(_),Eo=null}else return m=kn(j),m!==null&&cT(m),c.blockedOn=j,!1;m.shift()}return!0}function mT(c,m,j){Ix(c)&&j.delete(m)}function yV(){g5=!1,Bh!==null&&Ix(Bh)&&(Bh=null),Fh!==null&&Ix(Fh)&&(Fh=null),qh!==null&&Ix(qh)&&(qh=null),H0.forEach(mT),V0.forEach(mT)}function Ox(c,m){c.blockedOn===m&&(c.blockedOn=null,g5||(g5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yV)))}var kx=null;function pT(c){kx!==c&&(kx=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kx===c&&(kx=null);for(var m=0;m<c.length;m+=3){var j=c[m],_=c[m+1],F=c[m+2];if(typeof _!="function"){if(p5(_||j)===null)continue;break}var K=kn(j);K!==null&&(c.splice(m,3),m-=3,mj(K,{pending:!0,data:F,method:j.method,action:_},_,F))}}))}function Jm(c){function m(Ue){return Ox(Ue,c)}Bh!==null&&Ox(Bh,c),Fh!==null&&Ox(Fh,c),qh!==null&&Ox(qh,c),H0.forEach(m),V0.forEach(m);for(var j=0;j<Uh.length;j++){var _=Uh[j];_.blockedOn===c&&(_.blockedOn=null)}for(;0<Uh.length&&(j=Uh[0],j.blockedOn===null);)fT(j),j.blockedOn===null&&Uh.shift();if(j=(c.ownerDocument||c).$$reactFormReplay,j!=null)for(_=0;_<j.length;_+=3){var F=j[_],K=j[_+1],pe=F[vn]||null;if(typeof K=="function")pe||pT(j);else if(pe){var Te=null;if(K&&K.hasAttribute("formAction")){if(F=K,pe=K[vn]||null)Te=pe.formAction;else if(p5(F)!==null)continue}else Te=pe.action;typeof Te=="function"?j[_+1]=Te:(j.splice(_,3),_-=3),pT(j)}}}function gT(){function c(K){K.canIntercept&&K.info==="react-transition"&&K.intercept({handler:function(){return new Promise(function(pe){return F=pe})},focusReset:"manual",scroll:"manual"})}function m(){F!==null&&(F(),F=null),_||setTimeout(j,20)}function j(){if(!_&&!navigation.transition){var K=navigation.currentEntry;K&&K.url!=null&&navigation.navigate(K.url,{state:K.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,F=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(j,100),function(){_=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),F!==null&&(F(),F=null)}}}function y5(c){this._internalRoot=c}Dx.prototype.render=y5.prototype.render=function(c){var m=this._internalRoot;if(m===null)throw Error(i(409));var j=m.current,_=Cc();oT(j,_,c,m,null,null)},Dx.prototype.unmount=y5.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var m=c.containerInfo;oT(c.current,2,null,c,null,null),fx(),m[Bi]=null}};function Dx(c){this._internalRoot=c}Dx.prototype.unstable_scheduleHydration=function(c){if(c){var m=Qn();c={blockedOn:null,target:c,priority:m};for(var j=0;j<Uh.length&&m!==0&&m<Uh[j].priority;j++);Uh.splice(j,0,c),j===0&&fT(c)}};var yT=r.version;if(yT!=="19.2.3")throw Error(i(527,yT,"19.2.3"));de.findDOMNode=function(c){var m=c._reactInternals;if(m===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=d(m),c=c!==null?f(c):null,c=c===null?null:c.stateNode,c};var xV={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Px=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Px.isDisabled&&Px.supportsFiber)try{Er=Px.inject(xV),wt=Px}catch{}}return K0.createRoot=function(c,m){if(!a(c))throw Error(i(299));var j=!1,_="",F=C3,K=N3,pe=A3;return m!=null&&(m.unstable_strictMode===!0&&(j=!0),m.identifierPrefix!==void 0&&(_=m.identifierPrefix),m.onUncaughtError!==void 0&&(F=m.onUncaughtError),m.onCaughtError!==void 0&&(K=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError)),m=aT(c,1,!1,null,null,j,_,null,F,K,pe,gT),c[Bi]=m.current,Xj(c),new y5(m)},K0.hydrateRoot=function(c,m,j){if(!a(c))throw Error(i(299));var _=!1,F="",K=C3,pe=N3,Te=A3,Ue=null;return j!=null&&(j.unstable_strictMode===!0&&(_=!0),j.identifierPrefix!==void 0&&(F=j.identifierPrefix),j.onUncaughtError!==void 0&&(K=j.onUncaughtError),j.onCaughtError!==void 0&&(pe=j.onCaughtError),j.onRecoverableError!==void 0&&(Te=j.onRecoverableError),j.formState!==void 0&&(Ue=j.formState)),m=aT(c,1,!0,m,j??null,_,F,Ue,K,pe,Te,gT),m.context=sT(null),j=m.current,_=Cc(),_=Xr(_),F=en(_),F.callback=null,Nn(j,F,_),j=_,m.current.lanes=j,vr(m,j),Qd(m),c[Bi]=m.current,Xj(c),new Dx(m)},K0.version="19.2.3",K0}var ET;function _V(){if(ET)return b5.exports;ET=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),b5.exports=EV(),b5.exports}var TV=_V();const IV=hc(TV);var _T="popstate";function OV(t={}){function r(i,a){let{pathname:s,search:o,hash:l}=i.location;return NC("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Mg(a)}return DV(r,n,null,t)}function Wa(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function nd(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function kV(){return Math.random().toString(36).substring(2,10)}function TT(t,r){return{usr:t.state,key:t.key,idx:r}}function NC(t,r,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof r=="string"?Vp(r):r,state:n,key:r&&r.key||i||kV()}}function Mg({pathname:t="/",search:r="",hash:n=""}){return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Vp(t){let r={};if(t){let n=t.indexOf("#");n>=0&&(r.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(r.search=t.substring(i),t=t.substring(0,i)),t&&(r.pathname=t)}return r}function DV(t,r,n,i={}){let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,l="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let N=f(),T=N==null?null:N-d;d=N,u&&u({action:l,location:C.location,delta:T})}function x(N,T){l="PUSH";let O=NC(C.location,N,T);d=f()+1;let D=TT(O,d),M=C.createHref(O);try{o.pushState(D,"",M)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(M)}s&&u&&u({action:l,location:C.location,delta:1})}function v(N,T){l="REPLACE";let O=NC(C.location,N,T);d=f();let D=TT(O,d),M=C.createHref(O);o.replaceState(D,"",M),s&&u&&u({action:l,location:C.location,delta:0})}function w(N){return PV(N)}let C={get action(){return l},get location(){return t(a,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(_T,p),u=N,()=>{a.removeEventListener(_T,p),u=null}},createHref(N){return r(a,N)},createURL:w,encodeLocation(N){let T=w(N);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:v,go(N){return o.go(N)}};return C}function PV(t,r=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Wa(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Mg(t);return i=i.replace(/ $/,"%20"),!r&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function YM(t,r,n="/"){return RV(t,r,n,!1)}function RV(t,r,n,i){let a=typeof r=="string"?Vp(r):r,s=th(a.pathname||"/",n);if(s==null)return null;let o=ZM(t);MV(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=GV(s);l=VV(o[u],d,i)}return l}function ZM(t,r=[],n=[],i="",a=!1){let s=(o,l,u=a,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(i)&&u)return;Wa(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length)}let p=Zu([i,f.relativePath]),x=n.concat(f);o.children&&o.children.length>0&&(Wa(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),ZM(o.children,r,x,p,u)),!(o.path==null&&!o.index)&&r.push({path:p,score:WV(p,o.index),routesMeta:x})};return t.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))s(o,l);else for(let u of XM(o.path))s(o,l,!0,u)}),r}function XM(t){let r=t.split("/");if(r.length===0)return[];let[n,...i]=r,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let o=XM(i.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),a&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function MV(t){t.sort((r,n)=>r.score!==n.score?n.score-r.score:HV(r.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var LV=/^:[\w-]+$/,zV=3,BV=2,FV=1,qV=10,UV=-2,IT=t=>t==="*";function WV(t,r){let n=t.split("/"),i=n.length;return n.some(IT)&&(i+=UV),r&&(i+=BV),n.filter(a=>!IT(a)).reduce((a,s)=>a+(LV.test(s)?zV:s===""?FV:qV),i)}function HV(t,r){return t.length===r.length&&t.slice(0,-1).every((i,a)=>i===r[a])?t[t.length-1]-r[r.length-1]:0}function VV(t,r,n=!1){let{routesMeta:i}=t,a={},s="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],d=l===i.length-1,f=s==="/"?r:r.slice(s.length)||"/",p=Tv({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),x=u.route;if(!p&&d&&n&&!i[i.length-1].route.index&&(p=Tv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Zu([s,p.pathname]),pathnameBase:ZV(Zu([s,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(s=Zu([s,p.pathnameBase]))}return o}function Tv(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=$V(t.path,t.caseSensitive,t.end),a=r.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:i.reduce((d,{paramName:f,isOptional:p},x)=>{if(f==="*"){let w=l[x]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=l[x];return p&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function $V(t,r=!1,n=!0){nd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),i]}function GV(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return nd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),t}}function th(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var JM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KV=t=>JM.test(t);function QV(t,r="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Vp(t):t,s;if(n)if(KV(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),nd(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=OT(n.substring(1),"/"):s=OT(n,r)}else s=r;return{pathname:s,search:XV(i),hash:JV(a)}}function OT(t,r){let n=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function C5(t,r,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${r}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YV(t){return t.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function gA(t){let r=YV(t);return r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase)}function yA(t,r,n,i=!1){let a;typeof t=="string"?a=Vp(t):(a={...t},Wa(!a.pathname||!a.pathname.includes("?"),C5("?","pathname","search",a)),Wa(!a.pathname||!a.pathname.includes("#"),C5("#","pathname","hash",a)),Wa(!a.search||!a.search.includes("#"),C5("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let p=r.length-1;if(!i&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),p-=1;a.pathname=x.join("/")}l=p>=0?r[p]:"/"}let u=QV(a,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Zu=t=>t.join("/").replace(/\/\/+/g,"/"),ZV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,e$=class{constructor(t,r,n,i=!1){this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function t$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function r$(t){return t.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var eL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tL(t,r){let n=t;if(typeof n!="string"||!JM.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,a=!1;if(eL)try{let s=new URL(window.location.href),o=n.startsWith("//")?new URL(s.protocol+n):new URL(n),l=th(o.pathname,r);o.origin===s.origin&&l!=null?n=l+o.search+o.hash:a=!0}catch{nd(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rL=["POST","PUT","PATCH","DELETE"];new Set(rL);var n$=["GET",...rL];new Set(n$);var $p=k.createContext(null);$p.displayName="DataRouter";var Gb=k.createContext(null);Gb.displayName="DataRouterState";var i$=k.createContext(!1),nL=k.createContext({isTransitioning:!1});nL.displayName="ViewTransition";var a$=k.createContext(new Map);a$.displayName="Fetchers";var s$=k.createContext(null);s$.displayName="Await";var Fc=k.createContext(null);Fc.displayName="Navigation";var ly=k.createContext(null);ly.displayName="Location";var Td=k.createContext({outlet:null,matches:[],isDataRoute:!1});Td.displayName="Route";var xA=k.createContext(null);xA.displayName="RouteError";var iL="REACT_ROUTER_ERROR",o$="REDIRECT",l$="ROUTE_ERROR_RESPONSE";function c$(t){if(t.startsWith(`${iL}:${o$}:{`))try{let r=JSON.parse(t.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function d$(t){if(t.startsWith(`${iL}:${l$}:{`))try{let r=JSON.parse(t.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new e$(r.status,r.statusText,r.data)}catch{}}function u$(t,{relative:r}={}){Wa(Gp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=k.useContext(Fc),{hash:a,pathname:s,search:o}=cy(t,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:Zu([n,s])),i.createHref({pathname:l,search:o,hash:a})}function Gp(){return k.useContext(ly)!=null}function cd(){return Wa(Gp(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(ly).location}var aL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sL(t){k.useContext(Fc).static||k.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=k.useContext(Td);return t?C$():h$()}function h$(){Wa(Gp(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext($p),{basename:r,navigator:n}=k.useContext(Fc),{matches:i}=k.useContext(Td),{pathname:a}=cd(),s=JSON.stringify(gA(i)),o=k.useRef(!1);return sL(()=>{o.current=!0}),k.useCallback((u,d={})=>{if(nd(o.current,aL),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=yA(u,JSON.parse(s),a,d.relative==="path");t==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:Zu([r,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[r,n,s,a,t])}k.createContext(null);function hl(){let{matches:t}=k.useContext(Td),r=t[t.length-1];return r?r.params:{}}function cy(t,{relative:r}={}){let{matches:n}=k.useContext(Td),{pathname:i}=cd(),a=JSON.stringify(gA(n));return k.useMemo(()=>yA(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function f$(t,r){return oL(t,r)}function oL(t,r,n,i,a){Wa(Gp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(Fc),{matches:o}=k.useContext(Td),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let O=p&&p.path||"";cL(d,!p||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let x=cd(),v;if(r){let O=typeof r=="string"?Vp(r):r;Wa(f==="/"||O.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${O.pathname}" was given in the \`location\` prop.`),v=O}else v=x;let w=v.pathname||"/",C=w;if(f!=="/"){let O=f.replace(/^\//,"").split("/");C="/"+w.replace(/^\//,"").split("/").slice(O.length).join("/")}let N=YM(t,{pathname:C});nd(p||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),nd(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=x$(N&&N.map(O=>Object.assign({},O,{params:Object.assign({},u,O.params),pathname:Zu([f,s.encodeLocation?s.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?f:Zu([f,s.encodeLocation?s.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),o,n,i,a);return r&&T?k.createElement(ly.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function m$(){let t=S$(),r=t$(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},r),n?k.createElement("pre",{style:a},n):null,o)}var p$=k.createElement(m$,null),lL=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){this.props.onError?this.props.onError(t,r):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=d$(t.digest);n&&(t=n)}let r=t!==void 0?k.createElement(Td.Provider,{value:this.props.routeContext},k.createElement(xA.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?k.createElement(g$,{error:t},r):r}};lL.contextType=i$;var N5=new WeakMap;function g$({children:t,error:r}){let{basename:n}=k.useContext(Fc);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let i=c$(r.digest);if(i){let a=N5.get(r);if(a)throw a;let s=tL(i.location,n);if(eL&&!N5.get(r))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw N5.set(r,o),o}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function y$({routeContext:t,match:r,children:n}){let i=k.useContext($p);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Td.Provider,{value:t},n)}function x$(t,r=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n?.errors;if(o!=null){let f=s.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Wa(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,u=-1;if(n)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:x,errors:v}=n,w=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let d=n&&i?(f,p)=>{i(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:r$(n.matches),errorInfo:p})}:void 0;return s.reduceRight((f,p,x)=>{let v,w=!1,C=null,N=null;n&&(v=o&&p.route.id?o[p.route.id]:void 0,C=p.route.errorElement||p$,l&&(u<0&&x===0?(cL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):u===x&&(w=!0,N=p.route.hydrateFallbackElement||null)));let T=r.concat(s.slice(0,x+1)),O=()=>{let D;return v?D=C:w?D=N:p.route.Component?D=k.createElement(p.route.Component,null):p.route.element?D=p.route.element:D=f,k.createElement(y$,{match:p,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:D})};return n&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?k.createElement(lL,{location:n.location,revalidation:n.revalidation,component:C,error:v,children:O(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):O()},null)}function vA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v$(t){let r=k.useContext($p);return Wa(r,vA(t)),r}function b$(t){let r=k.useContext(Gb);return Wa(r,vA(t)),r}function j$(t){let r=k.useContext(Td);return Wa(r,vA(t)),r}function bA(t){let r=j$(t),n=r.matches[r.matches.length-1];return Wa(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function w$(){return bA("useRouteId")}function S$(){let t=k.useContext(xA),r=b$("useRouteError"),n=bA("useRouteError");return t!==void 0?t:r.errors?.[n]}function C$(){let{router:t}=v$("useNavigate"),r=bA("useNavigate"),n=k.useRef(!1);return sL(()=>{n.current=!0}),k.useCallback(async(a,s={})=>{nd(n.current,aL),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:r,...s}))},[t,r])}var kT={};function cL(t,r,n){!r&&!kT[t]&&(kT[t]=!0,nd(!1,n))}k.memo(N$);function N$({routes:t,future:r,state:n,onError:i}){return oL(t,void 0,n,i,r)}function Kf({to:t,replace:r,state:n,relative:i}){Wa(Gp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(Fc);nd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(Td),{pathname:o}=cd(),l=Qr(),u=yA(t,gA(s),o,i==="path"),d=JSON.stringify(u);return k.useEffect(()=>{l(JSON.parse(d),{replace:r,state:n,relative:i})},[l,d,i,r,n]),null}function Vt(t){Wa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A$({basename:t="/",children:r=null,location:n,navigationType:i="POP",navigator:a,static:s=!1,unstable_useTransitions:o}){Wa(!Gp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:a,static:s,unstable_useTransitions:o,future:{}}),[l,a,s,o]);typeof n=="string"&&(n=Vp(n));let{pathname:d="/",search:f="",hash:p="",state:x=null,key:v="default"}=n,w=k.useMemo(()=>{let C=th(d,l);return C==null?null:{location:{pathname:C,search:f,hash:p,state:x,key:v},navigationType:i}},[l,d,f,p,x,v,i]);return nd(w!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:k.createElement(Fc.Provider,{value:u},k.createElement(ly.Provider,{children:r,value:w}))}function Mx({children:t,location:r}){return f$(AC(t),r)}function AC(t,r=[]){let n=[];return k.Children.forEach(t,(i,a)=>{if(!k.isValidElement(i))return;let s=[...r,a];if(i.type===k.Fragment){n.push.apply(n,AC(i.props.children,s));return}Wa(i.type===Vt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wa(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=AC(i.props.children,s)),n.push(o)}),n}var lv="get",cv="application/x-www-form-urlencoded";function Kb(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function E$(t){return Kb(t)&&t.tagName.toLowerCase()==="button"}function _$(t){return Kb(t)&&t.tagName.toLowerCase()==="form"}function T$(t){return Kb(t)&&t.tagName.toLowerCase()==="input"}function I$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O$(t,r){return t.button===0&&(!r||r==="_self")&&!I$(t)}var Lx=null;function k$(){if(Lx===null)try{new FormData(document.createElement("form"),0),Lx=!1}catch{Lx=!0}return Lx}var D$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function A5(t){return t!=null&&!D$.has(t)?(nd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cv}"`),null):t}function P$(t,r){let n,i,a,s,o;if(_$(t)){let l=t.getAttribute("action");i=l?th(l,r):null,n=t.getAttribute("method")||lv,a=A5(t.getAttribute("enctype"))||cv,s=new FormData(t)}else if(E$(t)||T$(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?th(u,r):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||lv,a=A5(t.getAttribute("formenctype"))||A5(l.getAttribute("enctype"))||cv,s=new FormData(l,t),!k$()){let{name:d,type:f,value:p}=t;if(f==="image"){let x=d?`${d}.`:"";s.append(`${x}x`,"0"),s.append(`${x}y`,"0")}else d&&s.append(d,p)}}else{if(Kb(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lv,i=null,a=cv,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jA(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function R$(t,r,n,i){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:r&&th(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function M$(t,r){if(t.id in r)return r[t.id];try{let n=await import(t.module);return r[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function L$(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function z$(t,r,n){let i=await Promise.all(t.map(async a=>{let s=r.routes[a.route.id];if(s){let o=await M$(s,n);return o.links?o.links():[]}return[]}));return U$(i.flat(1).filter(L$).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function DT(t,r,n,i,a,s){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return s==="assets"?r.filter((u,d)=>o(u,d)||l(u,d)):s==="data"?r.filter((u,d)=>{let f=i.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function B$(t,r,{includeHydrateFallback:n}={}){return F$(t.map(i=>{let a=r.routes[i.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function F$(t){return[...new Set(t)]}function q$(t){let r={},n=Object.keys(t).sort();for(let i of n)r[i]=t[i];return r}function U$(t,r){let n=new Set;return new Set(r),t.reduce((i,a)=>{let s=JSON.stringify(q$(a));return n.has(s)||(n.add(s),i.push({key:s,link:a})),i},[])}function dL(){let t=k.useContext($p);return jA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function W$(){let t=k.useContext(Gb);return jA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wA=k.createContext(void 0);wA.displayName="FrameworkContext";function uL(){let t=k.useContext(wA);return jA(t,"You must render this element inside a <HydratedRouter> element"),t}function H$(t,r){let n=k.useContext(wA),[i,a]=k.useState(!1),[s,o]=k.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=r,x=k.useRef(null);k.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=T=>{T.forEach(O=>{o(O.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return x.current&&N.observe(x.current),()=>{N.disconnect()}}},[t]),k.useEffect(()=>{if(i){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[i]);let v=()=>{a(!0)},w=()=>{a(!1),o(!1)};return n?t!=="intent"?[s,x,{}]:[s,x,{onFocus:Q0(l,v),onBlur:Q0(u,w),onMouseEnter:Q0(d,v),onMouseLeave:Q0(f,w),onTouchStart:Q0(p,v)}]:[!1,x,{}]}function Q0(t,r){return n=>{t&&t(n),n.defaultPrevented||r(n)}}function V$({page:t,...r}){let{router:n}=dL(),i=k.useMemo(()=>YM(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?k.createElement(G$,{page:t,matches:i,...r}):null}function $$(t){let{manifest:r,routeModules:n}=uL(),[i,a]=k.useState([]);return k.useEffect(()=>{let s=!1;return z$(t,r,n).then(o=>{s||a(o)}),()=>{s=!0}},[t,r,n]),i}function G$({page:t,matches:r,...n}){let i=cd(),{future:a,manifest:s,routeModules:o}=uL(),{basename:l}=dL(),{loaderData:u,matches:d}=W$(),f=k.useMemo(()=>DT(t,r,d,s,i,"data"),[t,r,d,s,i]),p=k.useMemo(()=>DT(t,r,d,s,i,"assets"),[t,r,d,s,i]),x=k.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let C=new Set,N=!1;if(r.forEach(O=>{let D=s.routes[O.route.id];!D||!D.hasLoader||(!f.some(M=>M.route.id===O.route.id)&&O.route.id in u&&o[O.route.id]?.shouldRevalidate||D.hasClientLoader?N=!0:C.add(O.route.id))}),C.size===0)return[];let T=R$(t,l,a.unstable_trailingSlashAwareDataRequests,"data");return N&&C.size>0&&T.searchParams.set("_routes",r.filter(O=>C.has(O.route.id)).map(O=>O.route.id).join(",")),[T.pathname+T.search]},[l,a.unstable_trailingSlashAwareDataRequests,u,i,s,f,r,t,o]),v=k.useMemo(()=>B$(p,s),[p,s]),w=$$(p);return k.createElement(k.Fragment,null,x.map(C=>k.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),v.map(C=>k.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),w.map(({key:C,link:N})=>k.createElement("link",{key:C,nonce:n.nonce,...N})))}function K$(...t){return r=>{t.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var Q$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Q$&&(window.__reactRouterVersion="7.12.0")}catch{}function Y$({basename:t,children:r,unstable_useTransitions:n,window:i}){let a=k.useRef();a.current==null&&(a.current=OV({window:i,v5Compat:!0}));let s=a.current,[o,l]=k.useState({action:s.action,location:s.location}),u=k.useCallback(d=>{n===!1?l(d):k.startTransition(()=>l(d))},[n]);return k.useLayoutEffect(()=>s.listen(u),[s,u]),k.createElement(A$,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n})}var hL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nr=k.forwardRef(function({onClick:r,discover:n="render",prefetch:i="none",relative:a,reloadDocument:s,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:x,...v},w){let{basename:C,unstable_useTransitions:N}=k.useContext(Fc),T=typeof d=="string"&&hL.test(d),O=tL(d,C);d=O.to;let D=u$(d,{relative:a}),[M,Y,q]=H$(i,v),W=eG(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:a,viewTransition:p,unstable_defaultShouldRevalidate:x,unstable_useTransitions:N});function J(G){r&&r(G),G.defaultPrevented||W(G)}let z=k.createElement("a",{...v,...q,href:O.absoluteURL||D,onClick:O.isExternal||s?r:J,ref:K$(w,Y),target:u,"data-discover":!T&&n==="render"?"true":void 0});return M&&!T?k.createElement(k.Fragment,null,z,k.createElement(V$,{page:D})):z});nr.displayName="Link";var Z$=k.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:i="",end:a=!1,style:s,to:o,viewTransition:l,children:u,...d},f){let p=cy(o,{relative:d.relative}),x=cd(),v=k.useContext(Gb),{navigator:w,basename:C}=k.useContext(Fc),N=v!=null&&aG(p)&&l===!0,T=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,O=x.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(O=O.toLowerCase(),D=D?D.toLowerCase():null,T=T.toLowerCase()),D&&C&&(D=th(D,C)||D);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let Y=O===T||!a&&O.startsWith(T)&&O.charAt(M)==="/",q=D!=null&&(D===T||!a&&D.startsWith(T)&&D.charAt(T.length)==="/"),W={isActive:Y,isPending:q,isTransitioning:N},J=Y?r:void 0,z;typeof i=="function"?z=i(W):z=[i,Y?"active":null,q?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let G=typeof s=="function"?s(W):s;return k.createElement(nr,{...d,"aria-current":J,className:z,ref:f,style:G,to:o,viewTransition:l},typeof u=="function"?u(W):u)});Z$.displayName="NavLink";var X$=k.forwardRef(({discover:t="render",fetcherKey:r,navigate:n,reloadDocument:i,replace:a,state:s,method:o=lv,action:l,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:x,...v},w)=>{let{unstable_useTransitions:C}=k.useContext(Fc),N=nG(),T=iG(l,{relative:d}),O=o.toLowerCase()==="get"?"get":"post",D=typeof l=="string"&&hL.test(l),M=Y=>{if(u&&u(Y),Y.defaultPrevented)return;Y.preventDefault();let q=Y.nativeEvent.submitter,W=q?.getAttribute("formmethod")||o,J=()=>N(q||Y.currentTarget,{fetcherKey:r,method:W,navigate:n,replace:a,state:s,relative:d,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:x});C&&n!==!1?k.startTransition(()=>J()):J()};return k.createElement("form",{ref:w,method:O,action:T,onSubmit:i?u:M,...v,"data-discover":!D&&t==="render"?"true":void 0})});X$.displayName="Form";function J$(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fL(t){let r=k.useContext($p);return Wa(r,J$(t)),r}function eG(t,{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:u}={}){let d=Qr(),f=cd(),p=cy(t,{relative:s});return k.useCallback(x=>{if(O$(x,r)){x.preventDefault();let v=n!==void 0?n:Mg(f)===Mg(p),w=()=>d(t,{replace:v,state:i,preventScrollReset:a,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:l});u?k.startTransition(()=>w()):w()}},[f,d,p,n,i,r,t,a,s,o,l,u])}var tG=0,rG=()=>`__${String(++tG)}__`;function nG(){let{router:t}=fL("useSubmit"),{basename:r}=k.useContext(Fc),n=w$(),i=t.fetch,a=t.navigate;return k.useCallback(async(s,o={})=>{let{action:l,method:u,encType:d,formData:f,body:p}=P$(s,r);if(o.navigate===!1){let x=o.fetcherKey||rG();await i(x,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,a,r,n])}function iG(t,{relative:r}={}){let{basename:n}=k.useContext(Fc),i=k.useContext(Td);Wa(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={...cy(t||".",{relative:r})},o=cd();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(f=>f==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Zu([n,s.pathname])),Mg(s)}function aG(t,{relative:r}={}){let n=k.useContext(nL);Wa(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=fL("useViewTransitionState"),a=cy(t,{relative:r});if(!n.isTransitioning)return!1;let s=th(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=th(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Tv(a.pathname,o)!=null||Tv(a.pathname,s)!=null}var SA=QM(),Kp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sG={setTimeout:(t,r)=>setTimeout(t,r),clearTimeout:t=>clearTimeout(t),setInterval:(t,r)=>setInterval(t,r),clearInterval:t=>clearInterval(t)},oG=class{#e=sG;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,r){return this.#e.setTimeout(t,r)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,r){return this.#e.setInterval(t,r)}clearInterval(t){this.#e.clearInterval(t)}},Uf=new oG;function lG(t){setTimeout(t,0)}var rm=typeof window>"u"||"Deno"in globalThis;function zl(){}function cG(t,r){return typeof t=="function"?t(r):t}function EC(t){return typeof t=="number"&&t>=0&&t!==1/0}function mL(t,r){return Math.max(t+(r||0)-Date.now(),0)}function rf(t,r){return typeof t=="function"?t(r):t}function ed(t,r){return typeof t=="function"?t(r):t}function PT(t,r){const{type:n="all",exact:i,fetchStatus:a,predicate:s,queryKey:o,stale:l}=t;if(o){if(i){if(r.queryHash!==CA(o,r.options))return!1}else if(!Lg(r.queryKey,o))return!1}if(n!=="all"){const u=r.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&r.isStale()!==l||a&&a!==r.state.fetchStatus||s&&!s(r))}function RT(t,r){const{exact:n,status:i,predicate:a,mutationKey:s}=t;if(s){if(!r.options.mutationKey)return!1;if(n){if(nm(r.options.mutationKey)!==nm(s))return!1}else if(!Lg(r.options.mutationKey,s))return!1}return!(i&&r.state.status!==i||a&&!a(r))}function CA(t,r){return(r?.queryKeyHashFn||nm)(t)}function nm(t){return JSON.stringify(t,(r,n)=>_C(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function Lg(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(n=>Lg(t[n],r[n])):!1}var dG=Object.prototype.hasOwnProperty;function pL(t,r,n=0){if(t===r)return t;if(n>500)return r;const i=MT(t)&&MT(r);if(!i&&!(_C(t)&&_C(r)))return r;const s=(i?t:Object.keys(t)).length,o=i?r:Object.keys(r),l=o.length,u=i?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=i?f:o[f],x=t[p],v=r[p];if(x===v){u[p]=x,(i?f<s:dG.call(t,p))&&d++;continue}if(x===null||v===null||typeof x!="object"||typeof v!="object"){u[p]=v;continue}const w=pL(x,v,n+1);u[p]=w,w===x&&d++}return s===l&&d===s?t:u}function Iv(t,r){if(!r||Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}function MT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _C(t){if(!LT(t))return!1;const r=t.constructor;if(r===void 0)return!0;const n=r.prototype;return!(!LT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function LT(t){return Object.prototype.toString.call(t)==="[object Object]"}function uG(t){return new Promise(r=>{Uf.setTimeout(r,t)})}function TC(t,r,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,r):n.structuralSharing!==!1?pL(t,r):r}function hG(t,r,n=0){const i=[...t,r];return n&&i.length>n?i.slice(1):i}function fG(t,r,n=0){const i=[r,...t];return n&&i.length>n?i.slice(0,-1):i}var NA=Symbol();function gL(t,r){return!t.queryFn&&r?.initialPromise?()=>r.initialPromise:!t.queryFn||t.queryFn===NA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function AA(t,r){return typeof t=="function"?t(...r):!!t}function mG(t,r,n){let i=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??=r(),i||(i=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),t}var pG=class extends Kp{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!rm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},EA=new pG;function IC(){let t,r;const n=new Promise((a,s)=>{t=a,r=s});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),t(a)},n.reject=a=>{i({status:"rejected",reason:a}),r(a)},n}var gG=lG;function yG(){let t=[],r=0,n=l=>{l()},i=l=>{l()},a=gG;const s=l=>{r?t.push(l):a(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{i(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;r++;try{u=l()}finally{r--,r||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{a=l}}}var go=yG(),xG=class extends Kp{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!rm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Ov=new xG;function vG(t){return Math.min(1e3*2**t,3e4)}function yL(t){return(t??"online")==="online"?Ov.isOnline():!0}var OC=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function xL(t){let r=!1,n=0,i;const a=IC(),s=()=>a.status!=="pending",o=C=>{if(!s()){const N=new OC(C);x(N),t.onCancel?.(N)}},l=()=>{r=!0},u=()=>{r=!1},d=()=>EA.isFocused()&&(t.networkMode==="always"||Ov.isOnline())&&t.canRun(),f=()=>yL(t.networkMode)&&t.canRun(),p=C=>{s()||(i?.(),a.resolve(C))},x=C=>{s()||(i?.(),a.reject(C))},v=()=>new Promise(C=>{i=N=>{(s()||d())&&C(N)},t.onPause?.()}).then(()=>{i=void 0,s()||t.onContinue?.()}),w=()=>{if(s())return;let C;const N=n===0?t.initialPromise:void 0;try{C=N??t.fn()}catch(T){C=Promise.reject(T)}Promise.resolve(C).then(p).catch(T=>{if(s())return;const O=t.retry??(rm?0:3),D=t.retryDelay??vG,M=typeof D=="function"?D(n,T):D,Y=O===!0||typeof O=="number"&&n<O||typeof O=="function"&&O(n,T);if(r||!Y){x(T);return}n++,t.onFail?.(n,T),uG(M).then(()=>d()?void 0:v()).then(()=>{r?x(T):w()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(i?.(),a),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():v().then(w),a)}}var vL=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),EC(this.gcTime)&&(this.#e=Uf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rm?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Uf.clearTimeout(this.#e),this.#e=void 0)}},bG=class extends vL{#e;#t;#r;#i;#n;#s;#o;constructor(t){super(),this.#o=!1,this.#s=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#r=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=BT(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){if(this.options={...this.#s,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=BT(this.options);r.data!==void 0&&(this.setState(zT(r.data,r.dataUpdatedAt)),this.#e=r)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,r){const n=TC(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),n}setState(t,r){this.#a({type:"setState",state:t,setStateOptions:r})}cancel(t){const r=this.#n?.promise;return this.#n?.cancel(t),r?r.then(zl).catch(zl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>ed(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===NA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>rf(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!mL(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,r){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,i=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},a=()=>{const l=gL(this.options,r),d=(()=>{const f={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(f),f})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:a};return i(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=xL({initialPromise:r?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof OC&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,u)=>{this.#a({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof OC){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#a({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#a(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...bL(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...zT(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?i:void 0,i;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),go.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function bL(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yL(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zT(t,r){return{data:t,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function BT(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,n=r!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jG=class extends Kp{constructor(t,r){super(),this.options=r,this.#e=t,this.#a=null,this.#o=IC(),this.bindMethods(),this.setOptions(r)}#e;#t=void 0;#r=void 0;#i=void 0;#n;#s;#o;#a;#p;#h;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),FT(this.#t,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kC(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kC(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#j(),this.#t.removeObserver(this)}setOptions(t){const r=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ed(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),r._defaulted&&!Iv(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&qT(this.#t,n,this.options,r)&&this.#u(),this.updateResult(),i&&(this.#t!==n||ed(this.options.enabled,this.#t)!==ed(r.enabled,this.#t)||rf(this.options.staleTime,this.#t)!==rf(r.staleTime,this.#t))&&this.#g();const a=this.#y();i&&(this.#t!==n||ed(this.options.enabled,this.#t)!==ed(r.enabled,this.#t)||a!==this.#l)&&this.#x(a)}getOptimisticResult(t){const r=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(r,t);return SG(this,n)&&(this.#i=n,this.#s=this.options,this.#n=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,r){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),r?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#u(t){this.#w();let r=this.#t.fetch(this.options,t);return t?.throwOnError||(r=r.catch(zl)),r}#g(){this.#b();const t=rf(this.options.staleTime,this.#t);if(rm||this.#i.isStale||!EC(t))return;const n=mL(this.#i.dataUpdatedAt,t)+1;this.#c=Uf.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(t){this.#j(),this.#l=t,!(rm||ed(this.options.enabled,this.#t)===!1||!EC(this.#l)||this.#l===0)&&(this.#d=Uf.setInterval(()=>{(this.options.refetchIntervalInBackground||EA.isFocused())&&this.#u()},this.#l))}#v(){this.#g(),this.#x(this.#y())}#b(){this.#c&&(Uf.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(Uf.clearInterval(this.#d),this.#d=void 0)}createResult(t,r){const n=this.#t,i=this.options,a=this.#i,s=this.#n,o=this.#s,u=t!==n?t.state:this.#r,{state:d}=t;let f={...d},p=!1,x;if(r._optimisticResults){const J=this.hasListeners(),z=!J&&FT(t,r),G=J&&qT(t,n,r,i);(z||G)&&(f={...f,...bL(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:C}=f;x=f.data;let N=!1;if(r.placeholderData!==void 0&&x===void 0&&C==="pending"){let J;a?.isPlaceholderData&&r.placeholderData===o?.placeholderData?(J=a.data,N=!0):J=typeof r.placeholderData=="function"?r.placeholderData(this.#f?.state.data,this.#f):r.placeholderData,J!==void 0&&(C="success",x=TC(a?.data,J,r),p=!0)}if(r.select&&x!==void 0&&!N)if(a&&x===s?.data&&r.select===this.#p)x=this.#h;else try{this.#p=r.select,x=r.select(x),x=TC(a?.data,x,r),this.#h=x,this.#a=null}catch(J){this.#a=J}this.#a&&(v=this.#a,x=this.#h,w=Date.now(),C="error");const T=f.fetchStatus==="fetching",O=C==="pending",D=C==="error",M=O&&T,Y=x!==void 0,W={status:C,fetchStatus:f.fetchStatus,isPending:O,isSuccess:C==="success",isError:D,isInitialLoading:M,isLoading:M,data:x,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!O,isLoadingError:D&&!Y,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:D&&Y,isStale:_A(t,r),refetch:this.refetch,promise:this.#o,isEnabled:ed(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const J=W.data!==void 0,z=W.status==="error"&&!J,G=ie=>{z?ie.reject(W.error):J&&ie.resolve(W.data)},ne=()=>{const ie=this.#o=W.promise=IC();G(ie)},Z=this.#o;switch(Z.status){case"pending":t.queryHash===n.queryHash&&G(Z);break;case"fulfilled":(z||W.data!==Z.value)&&ne();break;case"rejected":(!z||W.error!==Z.reason)&&ne();break}}return W}updateResult(){const t=this.#i,r=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#s=this.options,this.#n.data!==void 0&&(this.#f=this.#t),Iv(r,t))return;this.#i=r;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!this.#m.size)return!0;const s=new Set(a??this.#m);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(o=>{const l=o;return this.#i[l]!==t[l]&&s.has(l)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const r=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(r?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){go.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function wG(t,r){return ed(r.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&r.retryOnMount===!1)}function FT(t,r){return wG(t,r)||t.state.data!==void 0&&kC(t,r,r.refetchOnMount)}function kC(t,r,n){if(ed(r.enabled,t)!==!1&&rf(r.staleTime,t)!=="static"){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&_A(t,r)}return!1}function qT(t,r,n,i){return(t!==r||ed(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_A(t,n)}function _A(t,r){return ed(r.enabled,t)!==!1&&t.isStaleByTime(rf(r.staleTime,t))}function SG(t,r){return!Iv(t.getCurrentResult(),r)}function UT(t){return{onFetch:(r,n)=>{const i=r.options,a=r.fetchOptions?.meta?.fetchMore?.direction,s=r.state.data?.pages||[],o=r.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let f=!1;const p=w=>{mG(w,()=>r.signal,()=>f=!0)},x=gL(r.options,r.fetchOptions),v=async(w,C,N)=>{if(f)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const O=(()=>{const q={client:r.client,queryKey:r.queryKey,pageParam:C,direction:N?"backward":"forward",meta:r.options.meta};return p(q),q})(),D=await x(O),{maxPages:M}=r.options,Y=N?fG:hG;return{pages:Y(w.pages,D,M),pageParams:Y(w.pageParams,C,M)}};if(a&&s.length){const w=a==="backward",C=w?CG:WT,N={pages:s,pageParams:o},T=C(i,N);l=await v(N,T,w)}else{const w=t??s.length;do{const C=u===0?o[0]??i.initialPageParam:WT(i,l);if(u>0&&C==null)break;l=await v(l,C),u++}while(u<w)}return l};r.options.persister?r.fetchFn=()=>r.options.persister?.(d,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},n):r.fetchFn=d}}}function WT(t,{pages:r,pageParams:n}){const i=r.length-1;return r.length>0?t.getNextPageParam(r[i],r,n[i],n):void 0}function CG(t,{pages:r,pageParams:n}){return r.length>0?t.getPreviousPageParam?.(r[0],r,n[0],n):void 0}var NG=class extends vL{#e;#t;#r;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#r=t.mutationCache,this.#t=[],this.state=t.state||jL(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(r=>r!==t),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{this.#n({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=xL({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,o)=>{this.#n({type:"failed",failureCount:s,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const i=this.state.status==="pending",a=!this.#i.canStart();try{if(i)r();else{this.#n({type:"pending",variables:t,isPaused:a}),await this.#r.config.onMutate?.(t,this,n);const o=await this.options.onMutate?.(t,n);o!==this.state.context&&this.#n({type:"pending",context:o,variables:t,isPaused:a})}const s=await this.#i.start();return await this.#r.config.onSuccess?.(s,t,this.state.context,this,n),await this.options.onSuccess?.(s,t,this.state.context,n),await this.#r.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,t,this.state.context,n),this.#n({type:"success",data:s}),s}catch(s){try{await this.#r.config.onError?.(s,t,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onError?.(s,t,this.state.context,n)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,s,t,this.state.context,n)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:s}),s}finally{this.#r.runNext(this)}}#n(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),go.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#r.notify({mutation:this,type:"updated",action:t})})}};function jL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var AG=class extends Kp{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,r,n){const i=new NG({client:t,mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){this.#e.add(t);const r=zx(t);if(typeof r=="string"){const n=this.#t.get(r);n?n.push(t):this.#t.set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const r=zx(t);if(typeof r=="string"){const n=this.#t.get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&this.#t.delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=zx(t);if(typeof r=="string"){const i=this.#t.get(r)?.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){const r=zx(t);return typeof r=="string"?this.#t.get(r)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){go.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const r={exact:!0,...t};return this.getAll().find(n=>RT(r,n))}findAll(t={}){return this.getAll().filter(r=>RT(t,r))}notify(t){go.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return go.batch(()=>Promise.all(t.map(r=>r.continue().catch(zl))))}};function zx(t){return t.options.scope?.id}var EG=class extends Kp{#e;#t=void 0;#r;#i;constructor(r,n){super(),this.#e=r,this.setOptions(n),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){const n=this.options;this.options=this.#e.defaultMutationOptions(r),Iv(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&nm(n.mutationKey)!==nm(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#n(),this.#s(r)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#s()}mutate(r,n){return this.#i=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(r)}#n(){const r=this.#r?.state??jL();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#s(r){go.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(r?.type==="success"){try{this.#i.onSuccess?.(r.data,n,i,a)}catch(s){Promise.reject(s)}try{this.#i.onSettled?.(r.data,null,n,i,a)}catch(s){Promise.reject(s)}}else if(r?.type==="error"){try{this.#i.onError?.(r.error,n,i,a)}catch(s){Promise.reject(s)}try{this.#i.onSettled?.(void 0,r.error,n,i,a)}catch(s){Promise.reject(s)}}}this.listeners.forEach(n=>{n(this.#t)})})}},_G=class extends Kp{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,r,n){const i=r.queryKey,a=r.queryHash??CA(i,r);let s=this.get(a);return s||(s=new bG({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=this.#e.get(t.queryHash);r&&(t.destroy(),r===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){go.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>PT(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>PT(t,n)):r}notify(t){go.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){go.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){go.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},TG=class{#e;#t;#r;#i;#n;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new _G,this.#t=t.mutationCache||new AG,this.#r=t.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=EA.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ov.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),n=this.#e.build(this,r),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(rf(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(i))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:r,state:n})=>{const i=n.data;return[r,i]})}setQueryData(t,r,n){const i=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(i.queryHash)?.state.data,o=cG(r,s);if(o!==void 0)return this.#e.build(this,i).setData(o,{...n,manual:!0})}setQueriesData(t,r,n){return go.batch(()=>this.#e.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,r,n)]))}getQueryState(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state}removeQueries(t){const r=this.#e;go.batch(()=>{r.findAll(t).forEach(n=>{r.remove(n)})})}resetQueries(t,r){const n=this.#e;return go.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const n={revert:!0,...r},i=go.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(i).then(zl).catch(zl)}invalidateQueries(t,r={}){return go.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},r)))}refetchQueries(t,r={}){const n={...r,cancelRefetch:r.cancelRefetch??!0},i=go.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(zl)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(zl)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const n=this.#e.build(this,r);return n.isStaleByTime(rf(r.staleTime,n))?n.fetch(r):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(zl).catch(zl)}fetchInfiniteQuery(t){return t.behavior=UT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(zl).catch(zl)}ensureInfiniteQueryData(t){return t.behavior=UT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ov.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,r){this.#i.set(nm(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...this.#i.values()],n={};return r.forEach(i=>{Lg(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,r){this.#n.set(nm(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...this.#n.values()],n={};return r.forEach(i=>{Lg(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const r={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=CA(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===NA&&(r.enabled=!1),r}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},wL=k.createContext(void 0),pr=t=>{const r=k.useContext(wL);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},IG=({client:t,children:r})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(wL.Provider,{value:t,children:r})),SL=k.createContext(!1),OG=()=>k.useContext(SL);SL.Provider;function kG(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var DG=k.createContext(kG()),PG=()=>k.useContext(DG),RG=(t,r,n)=>{const i=n?.state.error&&typeof t.throwOnError=="function"?AA(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||i)&&(r.isReset()||(t.retryOnMount=!1))},MG=t=>{k.useEffect(()=>{t.clearReset()},[t])},LG=({result:t,errorResetBoundary:r,throwOnError:n,query:i,suspense:a})=>t.isError&&!r.isReset()&&!t.isFetching&&i&&(a&&t.data===void 0||AA(n,[t.error,i])),zG=t=>{if(t.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...a)=>n(i(...a)):n(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},BG=(t,r)=>t.isLoading&&t.isFetching&&!r,FG=(t,r)=>t?.suspense&&r.isPending,HT=(t,r,n)=>r.fetchOptimistic(t).catch(()=>{n.clearReset()});function qG(t,r,n){const i=OG(),a=PG(),s=pr(),o=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=i?"isRestoring":"optimistic",zG(o),RG(o,a,l),MG(a);const u=!s.getQueryCache().get(o.queryHash),[d]=k.useState(()=>new r(s,o)),f=d.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(x=>{const v=p?d.subscribe(go.batchCalls(x)):zl;return d.updateResult(),v},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),k.useEffect(()=>{d.setOptions(o)},[o,d]),FG(o,f))throw HT(o,d,a);if(LG({result:f,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!rm&&BG(f,i)&&(u?HT(o,d,a):l?.promise)?.catch(zl).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?f:d.trackResult(f)}function Ve(t,r){return qG(t,jG)}function ot(t,r){const n=pr(),[i]=k.useState(()=>new EG(n,t));k.useEffect(()=>{i.setOptions(t)},[i,t]);const a=k.useSyncExternalStore(k.useCallback(o=>i.subscribe(go.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=k.useCallback((o,l)=>{i.mutate(o,l).catch(zl)},[i]);if(a.error&&AA(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const VT=t=>{let r;const n=new Set,i=(d,f)=>{const p=typeof d=="function"?d(r):d;if(!Object.is(p,r)){const x=r;r=f??(typeof p!="object"||p===null)?p:Object.assign({},r,p),n.forEach(v=>v(r,x))}},a=()=>r,l={setState:i,getState:a,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=r=t(i,a,l);return l},UG=(t=>t?VT(t):VT),WG=t=>t;function HG(t,r=WG){const n=qf.useSyncExternalStore(t.subscribe,qf.useCallback(()=>r(t.getState()),[t,r]),qf.useCallback(()=>r(t.getInitialState()),[t,r]));return qf.useDebugValue(n),n}const $T=t=>{const r=UG(t),n=i=>HG(r,i);return Object.assign(n,r),n},dy=(t=>t?$T(t):$T);function CL(t,r){return function(){return t.apply(r,arguments)}}const{toString:VG}=Object.prototype,{getPrototypeOf:TA}=Object,{iterator:Qb,toStringTag:NL}=Symbol,Yb=(t=>r=>{const n=VG.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Id=t=>(t=t.toLowerCase(),r=>Yb(r)===t),Zb=t=>r=>typeof r===t,{isArray:Qp}=Array,Rp=Zb("undefined");function uy(t){return t!==null&&!Rp(t)&&t.constructor!==null&&!Rp(t.constructor)&&ac(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const AL=Id("ArrayBuffer");function $G(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&AL(t.buffer),r}const GG=Zb("string"),ac=Zb("function"),EL=Zb("number"),hy=t=>t!==null&&typeof t=="object",KG=t=>t===!0||t===!1,dv=t=>{if(Yb(t)!=="object")return!1;const r=TA(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(NL in t)&&!(Qb in t)},QG=t=>{if(!hy(t)||uy(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},YG=Id("Date"),ZG=Id("File"),XG=Id("Blob"),JG=Id("FileList"),eK=t=>hy(t)&&ac(t.pipe),tK=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||ac(t.append)&&((r=Yb(t))==="formdata"||r==="object"&&ac(t.toString)&&t.toString()==="[object FormData]"))},rK=Id("URLSearchParams"),[nK,iK,aK,sK]=["ReadableStream","Request","Response","Headers"].map(Id),oK=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fy(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,a;if(typeof t!="object"&&(t=[t]),Qp(t))for(i=0,a=t.length;i<a;i++)r.call(null,t[i],i,t);else{if(uy(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(i=0;i<o;i++)l=s[i],r.call(null,t[l],l,t)}}function _L(t,r){if(uy(t))return null;r=r.toLowerCase();const n=Object.keys(t);let i=n.length,a;for(;i-- >0;)if(a=n[i],r===a.toLowerCase())return a;return null}const Wf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,TL=t=>!Rp(t)&&t!==Wf;function DC(){const{caseless:t,skipUndefined:r}=TL(this)&&this||{},n={},i=(a,s)=>{const o=t&&_L(n,s)||s;dv(n[o])&&dv(a)?n[o]=DC(n[o],a):dv(a)?n[o]=DC({},a):Qp(a)?n[o]=a.slice():(!r||!Rp(a))&&(n[o]=a)};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&fy(arguments[a],i);return n}const lK=(t,r,n,{allOwnKeys:i}={})=>(fy(r,(a,s)=>{n&&ac(a)?t[s]=CL(a,n):t[s]=a},{allOwnKeys:i}),t),cK=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dK=(t,r,n,i)=>{t.prototype=Object.create(r.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},uK=(t,r,n,i)=>{let a,s,o;const l={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),s=a.length;s-- >0;)o=a[s],(!i||i(o,t,r))&&!l[o]&&(r[o]=t[o],l[o]=!0);t=n!==!1&&TA(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},hK=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const i=t.indexOf(r,n);return i!==-1&&i===n},fK=t=>{if(!t)return null;if(Qp(t))return t;let r=t.length;if(!EL(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},mK=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&TA(Uint8Array)),pK=(t,r)=>{const i=(t&&t[Qb]).call(t);let a;for(;(a=i.next())&&!a.done;){const s=a.value;r.call(t,s[0],s[1])}},gK=(t,r)=>{let n;const i=[];for(;(n=t.exec(r))!==null;)i.push(n);return i},yK=Id("HTMLFormElement"),xK=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),GT=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),vK=Id("RegExp"),IL=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),i={};fy(n,(a,s)=>{let o;(o=r(a,s,t))!==!1&&(i[s]=o||a)}),Object.defineProperties(t,i)},bK=t=>{IL(t,(r,n)=>{if(ac(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(ac(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jK=(t,r)=>{const n={},i=a=>{a.forEach(s=>{n[s]=!0})};return Qp(t)?i(t):i(String(t).split(r)),n},wK=()=>{},SK=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function CK(t){return!!(t&&ac(t.append)&&t[NL]==="FormData"&&t[Qb])}const NK=t=>{const r=new Array(10),n=(i,a)=>{if(hy(i)){if(r.indexOf(i)>=0)return;if(uy(i))return i;if(!("toJSON"in i)){r[a]=i;const s=Qp(i)?[]:{};return fy(i,(o,l)=>{const u=n(o,a+1);!Rp(u)&&(s[l]=u)}),r[a]=void 0,s}}return i};return n(t,0)},AK=Id("AsyncFunction"),EK=t=>t&&(hy(t)||ac(t))&&ac(t.then)&&ac(t.catch),OL=((t,r)=>t?setImmediate:r?((n,i)=>(Wf.addEventListener("message",({source:a,data:s})=>{a===Wf&&s===n&&i.length&&i.shift()()},!1),a=>{i.push(a),Wf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ac(Wf.postMessage)),_K=typeof queueMicrotask<"u"?queueMicrotask.bind(Wf):typeof process<"u"&&process.nextTick||OL,TK=t=>t!=null&&ac(t[Qb]),bt={isArray:Qp,isArrayBuffer:AL,isBuffer:uy,isFormData:tK,isArrayBufferView:$G,isString:GG,isNumber:EL,isBoolean:KG,isObject:hy,isPlainObject:dv,isEmptyObject:QG,isReadableStream:nK,isRequest:iK,isResponse:aK,isHeaders:sK,isUndefined:Rp,isDate:YG,isFile:ZG,isBlob:XG,isRegExp:vK,isFunction:ac,isStream:eK,isURLSearchParams:rK,isTypedArray:mK,isFileList:JG,forEach:fy,merge:DC,extend:lK,trim:oK,stripBOM:cK,inherits:dK,toFlatObject:uK,kindOf:Yb,kindOfTest:Id,endsWith:hK,toArray:fK,forEachEntry:pK,matchAll:gK,isHTMLForm:yK,hasOwnProperty:GT,hasOwnProp:GT,reduceDescriptors:IL,freezeMethods:bK,toObjectSet:jK,toCamelCase:xK,noop:wK,toFiniteNumber:SK,findKey:_L,global:Wf,isContextDefined:TL,isSpecCompliantForm:CK,toJSONObject:NK,isAsyncFn:AK,isThenable:EK,setImmediate:OL,asap:_K,isIterable:TK};function En(t,r,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}bt.inherits(En,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bt.toJSONObject(this.config),code:this.code,status:this.status}}});const kL=En.prototype,DL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{DL[t]={value:t}});Object.defineProperties(En,DL);Object.defineProperty(kL,"isAxiosError",{value:!0});En.from=(t,r,n,i,a,s)=>{const o=Object.create(kL);bt.toFlatObject(t,o,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const l=t&&t.message?t.message:"Error",u=r==null&&t?t.code:r;return En.call(o,l,u,n,i,a),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const IK=null;function PC(t){return bt.isPlainObject(t)||bt.isArray(t)}function PL(t){return bt.endsWith(t,"[]")?t.slice(0,-2):t}function KT(t,r,n){return t?t.concat(r).map(function(a,s){return a=PL(a),!n&&s?"["+a+"]":a}).join(n?".":""):r}function OK(t){return bt.isArray(t)&&!t.some(PC)}const kK=bt.toFlatObject(bt,{},null,function(r){return/^is[A-Z]/.test(r)});function Xb(t,r,n){if(!bt.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=bt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,N){return!bt.isUndefined(N[C])});const i=n.metaTokens,a=n.visitor||f,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&bt.isSpecCompliantForm(r);if(!bt.isFunction(a))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(bt.isDate(w))return w.toISOString();if(bt.isBoolean(w))return w.toString();if(!u&&bt.isBlob(w))throw new En("Blob is not supported. Use a Buffer instead.");return bt.isArrayBuffer(w)||bt.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,C,N){let T=w;if(w&&!N&&typeof w=="object"){if(bt.endsWith(C,"{}"))C=i?C:C.slice(0,-2),w=JSON.stringify(w);else if(bt.isArray(w)&&OK(w)||(bt.isFileList(w)||bt.endsWith(C,"[]"))&&(T=bt.toArray(w)))return C=PL(C),T.forEach(function(D,M){!(bt.isUndefined(D)||D===null)&&r.append(o===!0?KT([C],M,s):o===null?C:C+"[]",d(D))}),!1}return PC(w)?!0:(r.append(KT(N,C,s),d(w)),!1)}const p=[],x=Object.assign(kK,{defaultVisitor:f,convertValue:d,isVisitable:PC});function v(w,C){if(!bt.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+C.join("."));p.push(w),bt.forEach(w,function(T,O){(!(bt.isUndefined(T)||T===null)&&a.call(r,T,bt.isString(O)?O.trim():O,C,x))===!0&&v(T,C?C.concat(O):[O])}),p.pop()}}if(!bt.isObject(t))throw new TypeError("data must be an object");return v(t),r}function QT(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function IA(t,r){this._pairs=[],t&&Xb(t,this,r)}const RL=IA.prototype;RL.append=function(r,n){this._pairs.push([r,n])};RL.toString=function(r){const n=r?function(i){return r.call(this,i,QT)}:QT;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function DK(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ML(t,r,n){if(!r)return t;const i=n&&n.encode||DK;bt.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(a?s=a(r,n):s=bt.isURLSearchParams(r)?r.toString():new IA(r,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class YT{constructor(){this.handlers=[]}use(r,n,i){return this.handlers.push({fulfilled:r,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){bt.forEach(this.handlers,function(i){i!==null&&r(i)})}}const LL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PK=typeof URLSearchParams<"u"?URLSearchParams:IA,RK=typeof FormData<"u"?FormData:null,MK=typeof Blob<"u"?Blob:null,LK={isBrowser:!0,classes:{URLSearchParams:PK,FormData:RK,Blob:MK},protocols:["http","https","file","blob","url","data"]},OA=typeof window<"u"&&typeof document<"u",RC=typeof navigator=="object"&&navigator||void 0,zK=OA&&(!RC||["ReactNative","NativeScript","NS"].indexOf(RC.product)<0),BK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FK=OA&&window.location.href||"http://localhost",qK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:OA,hasStandardBrowserEnv:zK,hasStandardBrowserWebWorkerEnv:BK,navigator:RC,origin:FK},Symbol.toStringTag,{value:"Module"})),El={...qK,...LK};function UK(t,r){return Xb(t,new El.classes.URLSearchParams,{visitor:function(n,i,a,s){return El.isNode&&bt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...r})}function WK(t){return bt.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function HK(t){const r={},n=Object.keys(t);let i;const a=n.length;let s;for(i=0;i<a;i++)s=n[i],r[s]=t[s];return r}function zL(t){function r(n,i,a,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&bt.isArray(a)?a.length:o,u?(bt.hasOwnProp(a,o)?a[o]=[a[o],i]:a[o]=i,!l):((!a[o]||!bt.isObject(a[o]))&&(a[o]=[]),r(n,i,a[o],s)&&bt.isArray(a[o])&&(a[o]=HK(a[o])),!l)}if(bt.isFormData(t)&&bt.isFunction(t.entries)){const n={};return bt.forEachEntry(t,(i,a)=>{r(WK(i),a,n,0)}),n}return null}function VK(t,r,n){if(bt.isString(t))try{return(r||JSON.parse)(t),bt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const my={transitional:LL,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,s=bt.isObject(r);if(s&&bt.isHTMLForm(r)&&(r=new FormData(r)),bt.isFormData(r))return a?JSON.stringify(zL(r)):r;if(bt.isArrayBuffer(r)||bt.isBuffer(r)||bt.isStream(r)||bt.isFile(r)||bt.isBlob(r)||bt.isReadableStream(r))return r;if(bt.isArrayBufferView(r))return r.buffer;if(bt.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return UK(r,this.formSerializer).toString();if((l=bt.isFileList(r))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xb(l?{"files[]":r}:r,u&&new u,this.formSerializer)}}return s||a?(n.setContentType("application/json",!1),VK(r)):r}],transformResponse:[function(r){const n=this.transitional||my.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(bt.isResponse(r)||bt.isReadableStream(r))return r;if(r&&bt.isString(r)&&(i&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(r,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?En.from(l,En.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:El.classes.FormData,Blob:El.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bt.forEach(["delete","get","head","post","put","patch"],t=>{my.headers[t]={}});const $K=bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),GK=t=>{const r={};let n,i,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),i=o.substring(a+1).trim(),!(!n||r[n]&&$K[n])&&(n==="set-cookie"?r[n]?r[n].push(i):r[n]=[i]:r[n]=r[n]?r[n]+", "+i:i)}),r},ZT=Symbol("internals");function Y0(t){return t&&String(t).trim().toLowerCase()}function uv(t){return t===!1||t==null?t:bt.isArray(t)?t.map(uv):String(t)}function KK(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)r[i[1]]=i[2];return r}const QK=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function E5(t,r,n,i,a){if(bt.isFunction(i))return i.call(this,r,n);if(a&&(r=n),!!bt.isString(r)){if(bt.isString(i))return r.indexOf(i)!==-1;if(bt.isRegExp(i))return i.test(r)}}function YK(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,i)=>n.toUpperCase()+i)}function ZK(t,r){const n=bt.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(a,s,o){return this[i].call(this,r,a,s,o)},configurable:!0})})}let sc=class{constructor(r){r&&this.set(r)}set(r,n,i){const a=this;function s(l,u,d){const f=Y0(u);if(!f)throw new Error("header name must be a non-empty string");const p=bt.findKey(a,f);(!p||a[p]===void 0||d===!0||d===void 0&&a[p]!==!1)&&(a[p||u]=uv(l))}const o=(l,u)=>bt.forEach(l,(d,f)=>s(d,f,u));if(bt.isPlainObject(r)||r instanceof this.constructor)o(r,n);else if(bt.isString(r)&&(r=r.trim())&&!QK(r))o(GK(r),n);else if(bt.isObject(r)&&bt.isIterable(r)){let l={},u,d;for(const f of r){if(!bt.isArray(f))throw TypeError("Object iterator must return a key-value pair");l[d=f[0]]=(u=l[d])?bt.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(l,n)}else r!=null&&s(n,r,i);return this}get(r,n){if(r=Y0(r),r){const i=bt.findKey(this,r);if(i){const a=this[i];if(!n)return a;if(n===!0)return KK(a);if(bt.isFunction(n))return n.call(this,a,i);if(bt.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=Y0(r),r){const i=bt.findKey(this,r);return!!(i&&this[i]!==void 0&&(!n||E5(this,this[i],i,n)))}return!1}delete(r,n){const i=this;let a=!1;function s(o){if(o=Y0(o),o){const l=bt.findKey(i,o);l&&(!n||E5(i,i[l],l,n))&&(delete i[l],a=!0)}}return bt.isArray(r)?r.forEach(s):s(r),a}clear(r){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const s=n[i];(!r||E5(this,this[s],s,r,!0))&&(delete this[s],a=!0)}return a}normalize(r){const n=this,i={};return bt.forEach(this,(a,s)=>{const o=bt.findKey(i,s);if(o){n[o]=uv(a),delete n[s];return}const l=r?YK(s):String(s).trim();l!==s&&delete n[s],n[l]=uv(a),i[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return bt.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=r&&bt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const i=new this(r);return n.forEach(a=>i.set(a)),i}static accessor(r){const i=(this[ZT]=this[ZT]={accessors:{}}).accessors,a=this.prototype;function s(o){const l=Y0(o);i[l]||(ZK(a,o),i[l]=!0)}return bt.isArray(r)?r.forEach(s):s(r),this}};sc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);bt.reduceDescriptors(sc.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(i){this[n]=i}}});bt.freezeMethods(sc);function _5(t,r){const n=this||my,i=r||n,a=sc.from(i.headers);let s=i.data;return bt.forEach(t,function(l){s=l.call(n,s,a.normalize(),r?r.status:void 0)}),a.normalize(),s}function BL(t){return!!(t&&t.__CANCEL__)}function Yp(t,r,n){En.call(this,t??"canceled",En.ERR_CANCELED,r,n),this.name="CanceledError"}bt.inherits(Yp,En,{__CANCEL__:!0});function FL(t,r,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(new En("Request failed with status code "+n.status,[En.ERR_BAD_REQUEST,En.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function XK(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function JK(t,r){t=t||10;const n=new Array(t),i=new Array(t);let a=0,s=0,o;return r=r!==void 0?r:1e3,function(u){const d=Date.now(),f=i[s];o||(o=d),n[a]=u,i[a]=d;let p=s,x=0;for(;p!==a;)x+=n[p++],p=p%t;if(a=(a+1)%t,a===s&&(s=(s+1)%t),d-o<r)return;const v=f&&d-f;return v?Math.round(x*1e3/v):void 0}}function eQ(t,r){let n=0,i=1e3/r,a,s;const o=(d,f=Date.now())=>{n=f,a=null,s&&(clearTimeout(s),s=null),t(...d)};return[(...d)=>{const f=Date.now(),p=f-n;p>=i?o(d,f):(a=d,s||(s=setTimeout(()=>{s=null,o(a)},i-p)))},()=>a&&o(a)]}const kv=(t,r,n=3)=>{let i=0;const a=JK(50,250);return eQ(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-i,d=a(u),f=o<=l;i=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:d||void 0,estimated:d&&l&&f?(l-o)/d:void 0,event:s,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(p)},n)},XT=(t,r)=>{const n=t!=null;return[i=>r[0]({lengthComputable:n,total:t,loaded:i}),r[1]]},JT=t=>(...r)=>bt.asap(()=>t(...r)),tQ=El.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,El.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(El.origin),El.navigator&&/(msie|trident)/i.test(El.navigator.userAgent)):()=>!0,rQ=El.hasStandardBrowserEnv?{write(t,r,n,i,a,s,o){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(r)}`];bt.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),bt.isString(i)&&l.push(`path=${i}`),bt.isString(a)&&l.push(`domain=${a}`),s===!0&&l.push("secure"),bt.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nQ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function iQ(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function qL(t,r,n){let i=!nQ(r);return t&&(i||n==!1)?iQ(t,r):r}const e8=t=>t instanceof sc?{...t}:t;function im(t,r){r=r||{};const n={};function i(d,f,p,x){return bt.isPlainObject(d)&&bt.isPlainObject(f)?bt.merge.call({caseless:x},d,f):bt.isPlainObject(f)?bt.merge({},f):bt.isArray(f)?f.slice():f}function a(d,f,p,x){if(bt.isUndefined(f)){if(!bt.isUndefined(d))return i(void 0,d,p,x)}else return i(d,f,p,x)}function s(d,f){if(!bt.isUndefined(f))return i(void 0,f)}function o(d,f){if(bt.isUndefined(f)){if(!bt.isUndefined(d))return i(void 0,d)}else return i(void 0,f)}function l(d,f,p){if(p in r)return i(d,f);if(p in t)return i(void 0,d)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,f,p)=>a(e8(d),e8(f),p,!0)};return bt.forEach(Object.keys({...t,...r}),function(f){const p=u[f]||a,x=p(t[f],r[f],f);bt.isUndefined(x)&&p!==l||(n[f]=x)}),n}const UL=t=>{const r=im({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=r;if(r.headers=o=sc.from(o),r.url=ML(qL(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),bt.isFormData(n)){if(El.hasStandardBrowserEnv||El.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(bt.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{d.includes(f.toLowerCase())&&o.set(f,p)})}}if(El.hasStandardBrowserEnv&&(i&&bt.isFunction(i)&&(i=i(r)),i||i!==!1&&tQ(r.url))){const u=a&&s&&rQ.read(s);u&&o.set(a,u)}return r},aQ=typeof XMLHttpRequest<"u",sQ=aQ&&function(t){return new Promise(function(n,i){const a=UL(t);let s=a.data;const o=sc.from(a.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:d}=a,f,p,x,v,w;function C(){v&&v(),w&&w(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let N=new XMLHttpRequest;N.open(a.method.toUpperCase(),a.url,!0),N.timeout=a.timeout;function T(){if(!N)return;const D=sc.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),Y={data:!l||l==="text"||l==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:D,config:t,request:N};FL(function(W){n(W),C()},function(W){i(W),C()},Y),N=null}"onloadend"in N?N.onloadend=T:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(T)},N.onabort=function(){N&&(i(new En("Request aborted",En.ECONNABORTED,t,N)),N=null)},N.onerror=function(M){const Y=M&&M.message?M.message:"Network Error",q=new En(Y,En.ERR_NETWORK,t,N);q.event=M||null,i(q),N=null},N.ontimeout=function(){let M=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const Y=a.transitional||LL;a.timeoutErrorMessage&&(M=a.timeoutErrorMessage),i(new En(M,Y.clarifyTimeoutError?En.ETIMEDOUT:En.ECONNABORTED,t,N)),N=null},s===void 0&&o.setContentType(null),"setRequestHeader"in N&&bt.forEach(o.toJSON(),function(M,Y){N.setRequestHeader(Y,M)}),bt.isUndefined(a.withCredentials)||(N.withCredentials=!!a.withCredentials),l&&l!=="json"&&(N.responseType=a.responseType),d&&([x,w]=kv(d,!0),N.addEventListener("progress",x)),u&&N.upload&&([p,v]=kv(u),N.upload.addEventListener("progress",p),N.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(f=D=>{N&&(i(!D||D.type?new Yp(null,t,N):D),N.abort(),N=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const O=XK(a.url);if(O&&El.protocols.indexOf(O)===-1){i(new En("Unsupported protocol "+O+":",En.ERR_BAD_REQUEST,t));return}N.send(s||null)})},oQ=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let i=new AbortController,a;const s=function(d){if(!a){a=!0,l();const f=d instanceof Error?d:this.reason;i.abort(f instanceof En?f:new Yp(f instanceof Error?f.message:f))}};let o=r&&setTimeout(()=>{o=null,s(new En(`timeout ${r} of ms exceeded`,En.ETIMEDOUT))},r);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:u}=i;return u.unsubscribe=()=>bt.asap(l),u}},lQ=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let i=0,a;for(;i<n;)a=i+r,yield t.slice(i,a),i=a},cQ=async function*(t,r){for await(const n of dQ(t))yield*lQ(n,r)},dQ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)break;yield i}}finally{await r.cancel()}},t8=(t,r,n,i)=>{const a=cQ(t,r);let s=0,o,l=u=>{o||(o=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await a.next();if(d){l(),u.close();return}let p=f.byteLength;if(n){let x=s+=p;n(x)}u.enqueue(new Uint8Array(f))}catch(d){throw l(d),d}},cancel(u){return l(u),a.return()}},{highWaterMark:2})},r8=64*1024,{isFunction:Bx}=bt,uQ=(({Request:t,Response:r})=>({Request:t,Response:r}))(bt.global),{ReadableStream:n8,TextEncoder:i8}=bt.global,a8=(t,...r)=>{try{return!!t(...r)}catch{return!1}},hQ=t=>{t=bt.merge.call({skipUndefined:!0},uQ,t);const{fetch:r,Request:n,Response:i}=t,a=r?Bx(r):typeof fetch=="function",s=Bx(n),o=Bx(i);if(!a)return!1;const l=a&&Bx(n8),u=a&&(typeof i8=="function"?(w=>C=>w.encode(C))(new i8):async w=>new Uint8Array(await new n(w).arrayBuffer())),d=s&&l&&a8(()=>{let w=!1;const C=new n(El.origin,{body:new n8,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!C}),f=o&&l&&a8(()=>bt.isReadableStream(new i("").body)),p={stream:f&&(w=>w.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(C,N)=>{let T=C&&C[w];if(T)return T.call(C);throw new En(`Response type '${w}' is not supported`,En.ERR_NOT_SUPPORT,N)})});const x=async w=>{if(w==null)return 0;if(bt.isBlob(w))return w.size;if(bt.isSpecCompliantForm(w))return(await new n(El.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(bt.isArrayBufferView(w)||bt.isArrayBuffer(w))return w.byteLength;if(bt.isURLSearchParams(w)&&(w=w+""),bt.isString(w))return(await u(w)).byteLength},v=async(w,C)=>{const N=bt.toFiniteNumber(w.getContentLength());return N??x(C)};return async w=>{let{url:C,method:N,data:T,signal:O,cancelToken:D,timeout:M,onDownloadProgress:Y,onUploadProgress:q,responseType:W,headers:J,withCredentials:z="same-origin",fetchOptions:G}=UL(w),ne=r||fetch;W=W?(W+"").toLowerCase():"text";let Z=oQ([O,D&&D.toAbortSignal()],M),ie=null;const me=Z&&Z.unsubscribe&&(()=>{Z.unsubscribe()});let ce;try{if(q&&d&&N!=="get"&&N!=="head"&&(ce=await v(J,T))!==0){let $=new n(C,{method:"POST",body:T,duplex:"half"}),X;if(bt.isFormData(T)&&(X=$.headers.get("content-type"))&&J.setContentType(X),$.body){const[se,H]=XT(ce,kv(JT(q)));T=t8($.body,r8,se,H)}}bt.isString(z)||(z=z?"include":"omit");const Q=s&&"credentials"in n.prototype,de={...G,signal:Z,method:N.toUpperCase(),headers:J.normalize().toJSON(),body:T,duplex:"half",credentials:Q?z:void 0};ie=s&&new n(C,de);let le=await(s?ne(ie,G):ne(C,de));const ye=f&&(W==="stream"||W==="response");if(f&&(Y||ye&&me)){const $={};["status","statusText","headers"].forEach(oe=>{$[oe]=le[oe]});const X=bt.toFiniteNumber(le.headers.get("content-length")),[se,H]=Y&&XT(X,kv(JT(Y),!0))||[];le=new i(t8(le.body,r8,se,()=>{H&&H(),me&&me()}),$)}W=W||"text";let Se=await p[bt.findKey(p,W)||"text"](le,w);return!ye&&me&&me(),await new Promise(($,X)=>{FL($,X,{data:Se,headers:sc.from(le.headers),status:le.status,statusText:le.statusText,config:w,request:ie})})}catch(Q){throw me&&me(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new En("Network Error",En.ERR_NETWORK,w,ie),{cause:Q.cause||Q}):En.from(Q,Q&&Q.code,w,ie)}}},fQ=new Map,WL=t=>{let r=t&&t.env||{};const{fetch:n,Request:i,Response:a}=r,s=[i,a,n];let o=s.length,l=o,u,d,f=fQ;for(;l--;)u=s[l],d=f.get(u),d===void 0&&f.set(u,d=l?new Map:hQ(r)),f=d;return d};WL();const kA={http:IK,xhr:sQ,fetch:{get:WL}};bt.forEach(kA,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const s8=t=>`- ${t}`,mQ=t=>bt.isFunction(t)||t===null||t===!1;function pQ(t,r){t=bt.isArray(t)?t:[t];const{length:n}=t;let i,a;const s={};for(let o=0;o<n;o++){i=t[o];let l;if(a=i,!mQ(i)&&(a=kA[(l=String(i)).toLowerCase()],a===void 0))throw new En(`Unknown adapter '${l}'`);if(a&&(bt.isFunction(a)||(a=a.get(r))))break;s[l||"#"+o]=a}if(!a){const o=Object.entries(s).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(s8).join(`
`):" "+s8(o[0]):"as no adapter specified";throw new En("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const HL={getAdapter:pQ,adapters:kA};function T5(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yp(null,t)}function o8(t){return T5(t),t.headers=sc.from(t.headers),t.data=_5.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),HL.getAdapter(t.adapter||my.adapter,t)(t).then(function(i){return T5(t),i.data=_5.call(t,t.transformResponse,i),i.headers=sc.from(i.headers),i},function(i){return BL(i)||(T5(t),i&&i.response&&(i.response.data=_5.call(t,t.transformResponse,i.response),i.response.headers=sc.from(i.response.headers))),Promise.reject(i)})}const VL="1.13.2",Jb={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Jb[t]=function(i){return typeof i===t||"a"+(r<1?"n ":" ")+t}});const l8={};Jb.transitional=function(r,n,i){function a(s,o){return"[Axios v"+VL+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,l)=>{if(r===!1)throw new En(a(o," has been removed"+(n?" in "+n:"")),En.ERR_DEPRECATED);return n&&!l8[o]&&(l8[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(s,o,l):!0}};Jb.spelling=function(r){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function gQ(t,r,n){if(typeof t!="object")throw new En("options must be an object",En.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let a=i.length;for(;a-- >0;){const s=i[a],o=r[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new En("option "+s+" must be "+u,En.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new En("Unknown option "+s,En.ERR_BAD_OPTION)}}const hv={assertOptions:gQ,validators:Jb},Yd=hv.validators;let Qf=class{constructor(r){this.defaults=r||{},this.interceptors={request:new YT,response:new YT}}async request(r,n){try{return await this._request(r,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=im(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:s}=n;i!==void 0&&hv.assertOptions(i,{silentJSONParsing:Yd.transitional(Yd.boolean),forcedJSONParsing:Yd.transitional(Yd.boolean),clarifyTimeoutError:Yd.transitional(Yd.boolean)},!1),a!=null&&(bt.isFunction(a)?n.paramsSerializer={serialize:a}:hv.assertOptions(a,{encode:Yd.function,serialize:Yd.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),hv.assertOptions(n,{baseUrl:Yd.spelling("baseURL"),withXsrfToken:Yd.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&bt.merge(s.common,s[n.method]);s&&bt.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=sc.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(u=u&&C.synchronous,l.unshift(C.fulfilled,C.rejected))});const d=[];this.interceptors.response.forEach(function(C){d.push(C.fulfilled,C.rejected)});let f,p=0,x;if(!u){const w=[o8.bind(this),void 0];for(w.unshift(...l),w.push(...d),x=w.length,f=Promise.resolve(n);p<x;)f=f.then(w[p++],w[p++]);return f}x=l.length;let v=n;for(;p<x;){const w=l[p++],C=l[p++];try{v=w(v)}catch(N){C.call(this,N);break}}try{f=o8.call(this,v)}catch(w){return Promise.reject(w)}for(p=0,x=d.length;p<x;)f=f.then(d[p++],d[p++]);return f}getUri(r){r=im(this.defaults,r);const n=qL(r.baseURL,r.url,r.allowAbsoluteUrls);return ML(n,r.params,r.paramsSerializer)}};bt.forEach(["delete","get","head","options"],function(r){Qf.prototype[r]=function(n,i){return this.request(im(i||{},{method:r,url:n,data:(i||{}).data}))}});bt.forEach(["post","put","patch"],function(r){function n(i){return function(s,o,l){return this.request(im(l||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Qf.prototype[r]=n(),Qf.prototype[r+"Form"]=n(!0)});let yQ=class $L{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(a=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](a);i._listeners=null}),this.promise.then=a=>{let s;const o=new Promise(l=>{i.subscribe(l),s=l}).then(a);return o.cancel=function(){i.unsubscribe(s)},o},r(function(s,o,l){i.reason||(i.reason=new Yp(s,o,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=i=>{r.abort(i)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new $L(function(a){r=a}),cancel:r}}};function xQ(t){return function(n){return t.apply(null,n)}}function vQ(t){return bt.isObject(t)&&t.isAxiosError===!0}const MC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(MC).forEach(([t,r])=>{MC[r]=t});function GL(t){const r=new Qf(t),n=CL(Qf.prototype.request,r);return bt.extend(n,Qf.prototype,r,{allOwnKeys:!0}),bt.extend(n,r,null,{allOwnKeys:!0}),n.create=function(a){return GL(im(t,a))},n}const _s=GL(my);_s.Axios=Qf;_s.CanceledError=Yp;_s.CancelToken=yQ;_s.isCancel=BL;_s.VERSION=VL;_s.toFormData=Xb;_s.AxiosError=En;_s.Cancel=_s.CanceledError;_s.all=function(r){return Promise.all(r)};_s.spread=xQ;_s.isAxiosError=vQ;_s.mergeConfig=im;_s.AxiosHeaders=sc;_s.formToJSON=t=>zL(bt.isHTMLForm(t)?new FormData(t):t);_s.getAdapter=HL.getAdapter;_s.HttpStatusCode=MC;_s.default=_s;const{Axios:zEe,AxiosError:BEe,CanceledError:FEe,isCancel:qEe,CancelToken:UEe,VERSION:WEe,all:HEe,Cancel:VEe,isAxiosError:$Ee,spread:GEe,toFormData:KEe,AxiosHeaders:QEe,HttpStatusCode:YEe,formToJSON:ZEe,getAdapter:XEe,mergeConfig:JEe}=_s,xe=_s.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});xe.interceptors.request.use(t=>{const r=localStorage.getItem("accessToken");return r&&(t.headers.Authorization=`Bearer ${r}`),t});xe.interceptors.response.use(t=>t,async t=>{const r=t.config;if(t.response?.status===401&&!r._retry){r._retry=!0;const n=localStorage.getItem("refreshToken");if(n)try{const{data:i}=await _s.post("/api/auth/refresh",{refreshToken:n});return localStorage.setItem("accessToken",i.accessToken),r.headers.Authorization=`Bearer ${i.accessToken}`,xe(r)}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login"}else window.location.href="/login"}return Promise.reject(t)});const Il=dy((t,r)=>({user:null,isAuthenticated:!1,isLoading:!0,login:async(n,i)=>{const{data:a}=await xe.post("/auth/login",{email:n,password:i});localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken);const s=await xe.get("/auth/me");t({user:s.data,isAuthenticated:!0})},logout:async()=>{const n=localStorage.getItem("refreshToken");try{await xe.post("/auth/logout",{refreshToken:n})}catch{}localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t({user:null,isAuthenticated:!1})},checkAuth:async()=>{if(!localStorage.getItem("accessToken")){t({isLoading:!1,isAuthenticated:!1});return}try{const{data:i}=await xe.get("/auth/me");t({user:i,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t({user:null,isAuthenticated:!1,isLoading:!1})}},hasPermission:n=>{const{user:i}=r();return i?i.role==="Admin"?!0:i.permissions.includes(n):!1},setUser:n=>{t({user:n})}}));const bQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,i)=>i?i.toUpperCase():n.toLowerCase()),c8=t=>{const r=jQ(t);return r.charAt(0).toUpperCase()+r.slice(1)},KL=(...t)=>t.filter((r,n,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===n).join(" ").trim(),wQ=t=>{for(const r in t)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var SQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CQ=k.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:o,...l},u)=>k.createElement("svg",{ref:u,...SQ,width:r,height:r,stroke:t,strokeWidth:i?Number(n)*24/Number(r):n,className:KL("lucide",a),...!s&&!wQ(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,f])=>k.createElement(d,f)),...Array.isArray(s)?s:[s]]));const xt=(t,r)=>{const n=k.forwardRef(({className:i,...a},s)=>k.createElement(CQ,{ref:s,iconNode:r,className:KL(`lucide-${bQ(c8(t))}`,`lucide-${t}`,i),...a}));return n.displayName=c8(t),n};const NQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Mc=xt("activity",NQ);const AQ=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],zg=xt("archive",AQ);const EQ=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],d8=xt("arrow-left-right",EQ);const _Q=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],aa=xt("arrow-left",_Q);const TQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],oc=xt("arrow-right",TQ);const IQ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],ou=xt("atom",IQ);const OQ=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kQ=xt("award",OQ);const DQ=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],QL=xt("ban",DQ);const PQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],dc=xt("beaker",PQ);const RQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xo=xt("bell",RQ);const MQ=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],rh=xt("box",MQ);const LQ=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],YL=xt("boxes",LQ);const zQ=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Ts=xt("building-2",zQ);const BQ=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Mp=xt("building",BQ);const FQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],qQ=xt("calculator",FQ);const UQ=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],WQ=xt("calendar-clock",UQ);const HQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],LC=xt("calendar-check",HQ);const VQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],u8=xt("calendar-days",VQ);const $Q=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$n=xt("calendar",$Q);const GQ=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Dv=xt("camera",GQ);const KQ=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],ZL=xt("car",KQ);const QQ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],e2=xt("chart-column",QQ);const YQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ZQ=xt("chart-pie",YQ);const XQ=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],XL=xt("check-check",XQ);const JQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ai=xt("check",JQ);const eY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bo=xt("chevron-down",eY);const tY=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Zp=xt("chevron-left",tY);const rY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jo=xt("chevron-right",rY);const nY=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nh=xt("chevron-up",nY);const iY=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],aY=xt("chevrons-left",iY);const sY=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],oY=xt("chevrons-right",sY);const lY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],sn=xt("circle-alert",lY);const cY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ut=xt("circle-check-big",cY);const dY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uY=xt("circle-check",dY);const hY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],am=xt("circle-question-mark",hY);const fY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ci=xt("circle-x",fY);const mY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],I5=xt("circle",mY);const pY=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],af=xt("clipboard-check",pY);const gY=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],JL=xt("clipboard-list",gY);const yY=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Pv=xt("clipboard",yY);const xY=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qt=xt("clock",xY);const vY=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],h8=xt("cloud",vY);const bY=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],DA=xt("coins",bY);const jY=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],wY=xt("command",jY);const SY=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],PA=xt("copy",SY);const CY=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ul=xt("credit-card",CY);const NY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],AY=xt("crosshair",NY);const EY=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],f8=xt("database",EY);const _Y=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],sf=xt("dollar-sign",_Y);const TY=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xp=xt("download",TY);const IY=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],OY=xt("droplets",IY);const kY=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ez=xt("ellipsis-vertical",kY);const DY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ih=xt("external-link",DY);const PY=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ag=xt("eye-off",PY);const RY=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],os=xt("eye",RY);const MY=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],lu=xt("factory",MY);const LY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],gu=xt("file-check",LY);const zY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],BY=xt("file-down",zY);const FY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fv=xt("file-exclamation-point",FY);const qY=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],tz=xt("file-pen-line",qY);const UY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],WY=xt("file-question-mark",UY);const HY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],VY=xt("file-spreadsheet",HY);const $Y=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Pr=xt("file-text",$Y);const GY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],KY=xt("file-type",GY);const QY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],rz=xt("file",QY);const YY=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],ZY=xt("flag",YY);const XY=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],sa=xt("flask-conical",XY);const JY=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],nz=xt("folder-open",JY);const eZ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fl=xt("funnel",eZ);const tZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],sm=xt("globe",tZ);const rZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],mv=xt("grid-3x3",rZ);const nZ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],iZ=xt("grip-vertical",nZ);const aZ=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],RA=xt("hash",aZ);const sZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],jm=xt("history",sZ);const oZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],iz=xt("house",oZ);const lZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Rv=xt("image",lZ);const cZ=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],dZ=xt("inbox",cZ);const uZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],of=xt("info",uZ);const hZ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Bg=xt("key",hZ);const fZ=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],mZ=xt("keyboard",fZ);const pZ=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],py=xt("languages",pZ);const gZ=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],MA=xt("layers",gZ);const yZ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LA=xt("layout-dashboard",yZ);const xZ=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],m8=xt("link-2",xZ);const vZ=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],bZ=xt("list-ordered",vZ);const jZ=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Fg=xt("list-todo",jZ);const wZ=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],SZ=xt("list",wZ);const CZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Eg=xt("loader-circle",CZ);const NZ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zC=xt("lock",NZ);const AZ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],zA=xt("log-out",AZ);const EZ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uc=xt("mail",EZ);const _Z=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ea=xt("map-pin",_Z);const TZ=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],IZ=xt("map",TZ);const OZ=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],az=xt("megaphone",OZ);const kZ=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],BC=xt("menu",kZ);const DZ=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],t2=xt("message-circle",DZ);const PZ=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Jp=xt("message-square",PZ);const RZ=[["path",{d:"M5 12h14",key:"1ays0h"}]],sz=xt("minus",RZ);const MZ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],LZ=xt("monitor",MZ);const zZ=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],oz=xt("moon",zZ);const BZ=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],FZ=xt("navigation",BZ);const qZ=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],lz=xt("octagon-alert",qZ);const UZ=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],WZ=xt("package-check",UZ);const HZ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Rr=xt("package",HZ);const VZ=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ah=xt("paperclip",VZ);const $Z=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],FC=xt("pause",$Z);const GZ=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],qg=xt("pen-tool",GZ);const KZ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ha=xt("pen",KZ);const QZ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Kh=xt("pencil",QZ);const YZ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],p8=xt("percent",YZ);const ZZ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vo=xt("phone",ZZ);const XZ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],_g=xt("pill",XZ);const JZ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yo=xt("play",JZ);const eX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cn=xt("plus",eX);const tX=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],wm=xt("printer",tX);const rX=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],rd=xt("receipt",rX);const nX=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cu=xt("refresh-cw",nX);const iX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],g8=xt("rotate-ccw",iX);const aX=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],cz=xt("route",aX);const sX=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lc=xt("save",sX);const oX=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],dz=xt("scan-line",oX);const lX=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gs=xt("search",lX);const cX=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gi=xt("send",cX);const dX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lf=xt("settings",dX);const uX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hX=xt("shield-check",uX);const fX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ia=xt("shield",fX);const mX=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qo=xt("shopping-cart",mX);const pX=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],e0=xt("square-pen",pX);const gX=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],yX=xt("star-off",gX);const xX=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],y8=xt("star",xX);const vX=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],uz=xt("sun",vX);const bX=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],Bf=xt("syringe",bX);const jX=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],r2=xt("tag",jX);const wX=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],qC=xt("thermometer",wX);const SX=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Sm=xt("ticket",SX);const CX=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],vp=xt("timer",CX);const NX=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ra=xt("trash-2",NX);const AX=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],hz=xt("trending-down",AX);const EX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],t0=xt("trending-up",EX);const _X=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$r=xt("triangle-alert",_X);const TX=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],dn=xt("truck",TX);const IX=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],om=xt("upload",IX);const OX=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],UC=xt("user-check",OX);const kX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Np=xt("user-plus",kX);const DX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],x8=xt("user-x",DX);const PX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Uo=xt("user",PX);const RX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cc=xt("users",RX);const MX=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],lm=xt("warehouse",MX);const LX=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],fz=xt("wrench",LX);const zX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kr=xt("x",zX);const BX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Lp=xt("zap",BX),mz=k.createContext(null);function gn(){const t=k.useContext(mz);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function FX({children:t}){const[r,n]=k.useState([]),i=k.useCallback(d=>{n(f=>f.filter(p=>p.id!==d))},[]),a=k.useCallback(d=>{const f=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,p={...d,id:f};n(v=>[...v,p]);const x=d.duration??(d.type==="error"?8e3:5e3);x>0&&setTimeout(()=>i(f),x)},[i]),s=k.useCallback((d,f)=>{a({type:"success",title:d,message:f})},[a]),o=k.useCallback((d,f)=>{a({type:"error",title:d,message:f,duration:8e3})},[a]),l=k.useCallback((d,f)=>{a({type:"warning",title:d,message:f})},[a]),u=k.useCallback((d,f)=>{a({type:"info",title:d,message:f})},[a]);return e.jsxs(mz.Provider,{value:{toasts:r,addToast:a,removeToast:i,success:s,error:o,warning:l,info:u},children:[t,e.jsx(qX,{toasts:r,removeToast:i})]})}function qX({toasts:t,removeToast:r}){return t.length===0?null:e.jsx("div",{style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",zIndex:9999,display:"flex",flexDirection:"column",gap:"0.75rem",maxWidth:"400px"},children:t.map(n=>e.jsx(UX,{toast:n,onClose:()=>r(n.id)},n.id))})}function UX({toast:t,onClose:r}){const[n,i]=k.useState(!1),a=()=>{i(!0),setTimeout(r,200)},s={success:e.jsx(Ut,{size:20}),error:e.jsx(sn,{size:20}),warning:e.jsx($r,{size:20}),info:e.jsx(of,{size:20})},l={success:{bg:"#dcfce7",border:"#22c55e",icon:"#16a34a",text:"#166534"},error:{bg:"#fee2e2",border:"#ef4444",icon:"#dc2626",text:"#991b1b"},warning:{bg:"#fef3c7",border:"#f59e0b",icon:"#d97706",text:"#92400e"},info:{bg:"#dbeafe",border:"#3b82f6",icon:"#2563eb",text:"#1e40af"}}[t.type];return e.jsxs("div",{style:{backgroundColor:l.bg,border:`1px solid ${l.border}`,borderRadius:"var(--radius)",padding:"1rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",display:"flex",gap:"0.75rem",alignItems:"flex-start",animation:n?"slideOut 0.2s ease-out":"slideIn 0.3s ease-out"},children:[e.jsx("div",{style:{color:l.icon,flexShrink:0,marginTop:"2px"},children:s[t.type]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,color:l.text,marginBottom:t.message?"0.25rem":0},children:t.title}),t.message&&e.jsx("div",{style:{fontSize:"0.875rem",color:l.text,opacity:.9},children:t.message}),t.action&&e.jsx("button",{onClick:t.action.onClick,style:{marginTop:"0.5rem",padding:"0.25rem 0.75rem",fontSize:"0.8125rem",fontWeight:500,background:l.icon,color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:t.action.label})]}),e.jsx("button",{onClick:a,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:l.text,opacity:.6,borderRadius:"4px"},children:e.jsx(kr,{size:16})})]})}const pn=t=>typeof t=="string",Z0=()=>{let t,r;const n=new Promise((i,a)=>{t=i,r=a});return n.resolve=t,n.reject=r,n},v8=t=>t==null?"":""+t,WX=(t,r,n)=>{t.forEach(i=>{r[i]&&(n[i]=r[i])})},HX=/###/g,b8=t=>t&&t.indexOf("###")>-1?t.replace(HX,"."):t,j8=t=>!t||pn(t),Tg=(t,r,n)=>{const i=pn(r)?r.split("."):r;let a=0;for(;a<i.length-1;){if(j8(t))return{};const s=b8(i[a]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++a}return j8(t)?{}:{obj:t,k:b8(i[a])}},w8=(t,r,n)=>{const{obj:i,k:a}=Tg(t,r,Object);if(i!==void 0||r.length===1){i[a]=n;return}let s=r[r.length-1],o=r.slice(0,r.length-1),l=Tg(t,o,Object);for(;l.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),l=Tg(t,o,Object),l?.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=n},VX=(t,r,n,i)=>{const{obj:a,k:s}=Tg(t,r,Object);a[s]=a[s]||[],a[s].push(n)},Mv=(t,r)=>{const{obj:n,k:i}=Tg(t,r);if(n&&Object.prototype.hasOwnProperty.call(n,i))return n[i]},$X=(t,r,n)=>{const i=Mv(t,n);return i!==void 0?i:Mv(r,n)},pz=(t,r,n)=>{for(const i in r)i!=="__proto__"&&i!=="constructor"&&(i in t?pn(t[i])||t[i]instanceof String||pn(r[i])||r[i]instanceof String?n&&(t[i]=r[i]):pz(t[i],r[i],n):t[i]=r[i]);return t},ep=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var GX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const KX=t=>pn(t)?t.replace(/[&<>"'\/]/g,r=>GX[r]):t;class QX{constructor(r){this.capacity=r,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(r){const n=this.regExpMap.get(r);if(n!==void 0)return n;const i=new RegExp(r);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(r,i),this.regExpQueue.push(r),i}}const YX=[" ",",","?","!",";"],ZX=new QX(20),XX=(t,r,n)=>{r=r||"",n=n||"";const i=YX.filter(o=>r.indexOf(o)<0&&n.indexOf(o)<0);if(i.length===0)return!0;const a=ZX.getRegExp(`(${i.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!a.test(t);if(!s){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(s=!0)}return s},WC=(t,r,n=".")=>{if(!t)return;if(t[r])return Object.prototype.hasOwnProperty.call(t,r)?t[r]:void 0;const i=r.split(n);let a=t;for(let s=0;s<i.length;){if(!a||typeof a!="object")return;let o,l="";for(let u=s;u<i.length;++u)if(u!==s&&(l+=n),l+=i[u],o=a[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<i.length-1)continue;s+=u-s+1;break}a=o}return a},Ug=t=>t?.replace("_","-"),JX={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,r){console?.[t]?.apply?.(console,r)}};class Lv{constructor(r,n={}){this.init(r,n)}init(r,n={}){this.prefix=n.prefix||"i18next:",this.logger=r||JX,this.options=n,this.debug=n.debug}log(...r){return this.forward(r,"log","",!0)}warn(...r){return this.forward(r,"warn","",!0)}error(...r){return this.forward(r,"error","")}deprecate(...r){return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(r,n,i,a){return a&&!this.debug?null:(pn(r[0])&&(r[0]=`${i}${this.prefix} ${r[0]}`),this.logger[n](r))}create(r){return new Lv(this.logger,{prefix:`${this.prefix}:${r}:`,...this.options})}clone(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new Lv(this.logger,r)}}var iu=new Lv;let n2=class{constructor(){this.observers={}}on(r,n){return r.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const a=this.observers[i].get(n)||0;this.observers[i].set(n,a+1)}),this}off(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r].delete(n)}}emit(r,...n){this.observers[r]&&Array.from(this.observers[r].entries()).forEach(([a,s])=>{for(let o=0;o<s;o++)a(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,s])=>{for(let o=0;o<s;o++)a.apply(a,[r,...n])})}};class S8 extends n2{constructor(r,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=r||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}removeNamespaces(r){const n=this.options.ns.indexOf(r);n>-1&&this.options.ns.splice(n,1)}getResource(r,n,i,a={}){const s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;r.indexOf(".")>-1?l=r.split("."):(l=[r,n],i&&(Array.isArray(i)?l.push(...i):pn(i)&&s?l.push(...i.split(s)):l.push(i)));const u=Mv(this.data,l);return!u&&!n&&!i&&r.indexOf(".")>-1&&(r=l[0],n=l[1],i=l.slice(2).join(".")),u||!o||!pn(i)?u:WC(this.data?.[r]?.[n],i,s)}addResource(r,n,i,a,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[r,n];i&&(l=l.concat(o?i.split(o):i)),r.indexOf(".")>-1&&(l=r.split("."),a=n,n=l[1]),this.addNamespaces(n),w8(this.data,l,a),s.silent||this.emit("added",r,n,i,a)}addResources(r,n,i,a={silent:!1}){for(const s in i)(pn(i[s])||Array.isArray(i[s]))&&this.addResource(r,n,s,i[s],{silent:!0});a.silent||this.emit("added",r,n,i)}addResourceBundle(r,n,i,a,s,o={silent:!1,skipCopy:!1}){let l=[r,n];r.indexOf(".")>-1&&(l=r.split("."),a=i,i=n,n=l[1]),this.addNamespaces(n);let u=Mv(this.data,l)||{};o.skipCopy||(i=JSON.parse(JSON.stringify(i))),a?pz(u,i,s):u={...u,...i},w8(this.data,l,u),o.silent||this.emit("added",r,n,i)}removeResourceBundle(r,n){this.hasResourceBundle(r,n)&&delete this.data[r][n],this.removeNamespaces(n),this.emit("removed",r,n)}hasResourceBundle(r,n){return this.getResource(r,n)!==void 0}getResourceBundle(r,n){return n||(n=this.options.defaultNS),this.getResource(r,n)}getDataByLanguage(r){return this.data[r]}hasLanguageSomeTranslations(r){const n=this.getDataByLanguage(r);return!!(n&&Object.keys(n)||[]).find(a=>n[a]&&Object.keys(n[a]).length>0)}toJSON(){return this.data}}var gz={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,r,n,i,a){return t.forEach(s=>{r=this.processors[s]?.process(r,n,i,a)??r}),r}};const yz=Symbol("i18next/PATH_KEY");function eJ(){const t=[],r=Object.create(null);let n;return r.get=(i,a)=>(n?.revoke?.(),a===yz?t:(t.push(a),n=Proxy.revocable(i,r),n.proxy)),Proxy.revocable(Object.create(null),r).proxy}function HC(t,r){const{[yz]:n}=t(eJ());return n.join(r?.keySeparator??".")}const C8={},O5=t=>!pn(t)&&typeof t!="boolean"&&typeof t!="number";class zv extends n2{constructor(r,n={}){super(),WX(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=iu.create("translator")}changeLanguage(r){r&&(this.language=r)}exists(r,n={interpolation:{}}){const i={...n};if(r==null)return!1;const a=this.resolve(r,i);if(a?.res===void 0)return!1;const s=O5(a.res);return!(i.returnObjects===!1&&s)}extractFromKey(r,n){let i=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=i&&r.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!XX(r,i,a);if(o&&!l){const u=r.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:r,namespaces:pn(s)?[s]:s};const d=r.split(i);(i!==a||i===a&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),r=d.join(a)}return{key:r,namespaces:pn(s)?[s]:s}}translate(r,n,i){let a=typeof n=="object"?{...n}:n;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),r==null)return"";typeof r=="function"&&(r=HC(r,{...this.options,...a})),Array.isArray(r)||(r=[String(r)]);const s=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:l,namespaces:u}=this.extractFromKey(r[r.length-1],a),d=u[u.length-1];let f=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const p=a.lng||this.language,x=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p?.toLowerCase()==="cimode")return x?s?{res:`${d}${f}${l}`,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:`${d}${f}${l}`:s?{res:l,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:l;const v=this.resolve(r,a);let w=v?.res;const C=v?.usedKey||l,N=v?.exactUsedKey||l,T=["[object Number]","[object Function]","[object RegExp]"],O=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,D=!this.i18nFormat||this.i18nFormat.handleAsObject,M=a.count!==void 0&&!pn(a.count),Y=zv.hasDefaultValue(a),q=M?this.pluralResolver.getSuffix(p,a.count,a):"",W=a.ordinal&&M?this.pluralResolver.getSuffix(p,a.count,{ordinal:!1}):"",J=M&&!a.ordinal&&a.count===0,z=J&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${q}`]||a[`defaultValue${W}`]||a.defaultValue;let G=w;D&&!w&&Y&&(G=z);const ne=O5(G),Z=Object.prototype.toString.apply(G);if(D&&G&&ne&&T.indexOf(Z)<0&&!(pn(O)&&Array.isArray(G))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ie=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,G,{...a,ns:u}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(v.res=ie,v.usedParams=this.getUsedParamsDetails(a),v):ie}if(o){const ie=Array.isArray(G),me=ie?[]:{},ce=ie?N:C;for(const Q in G)if(Object.prototype.hasOwnProperty.call(G,Q)){const de=`${ce}${o}${Q}`;Y&&!w?me[Q]=this.translate(de,{...a,defaultValue:O5(z)?z[Q]:void 0,joinArrays:!1,ns:u}):me[Q]=this.translate(de,{...a,joinArrays:!1,ns:u}),me[Q]===de&&(me[Q]=G[Q])}w=me}}else if(D&&pn(O)&&Array.isArray(w))w=w.join(O),w&&(w=this.extendTranslation(w,r,a,i));else{let ie=!1,me=!1;!this.isValidLookup(w)&&Y&&(ie=!0,w=z),this.isValidLookup(w)||(me=!0,w=l);const Q=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:w,de=Y&&z!==w&&this.options.updateMissing;if(me||ie||de){if(this.logger.log(de?"updateKey":"missingKey",p,d,l,de?z:w),o){const $=this.resolve(l,{...a,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let le=[];const ye=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ye&&ye[0])for(let $=0;$<ye.length;$++)le.push(ye[$]);else this.options.saveMissingTo==="all"?le=this.languageUtils.toResolveHierarchy(a.lng||this.language):le.push(a.lng||this.language);const Se=($,X,se)=>{const H=Y&&se!==w?se:Q;this.options.missingKeyHandler?this.options.missingKeyHandler($,d,X,H,de,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing($,d,X,H,de,a),this.emit("missingKey",$,d,X,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?le.forEach($=>{const X=this.pluralResolver.getSuffixes($,a);J&&a[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(se=>{Se([$],l+se,a[`defaultValue${se}`]||z)})}):Se(le,l,z))}w=this.extendTranslation(w,r,a,v,i),me&&w===l&&this.options.appendNamespaceToMissingKey&&(w=`${d}${f}${l}`),(me||ie)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${f}${l}`:l,ie?w:void 0,a))}return s?(v.res=w,v.usedParams=this.getUsedParamsDetails(a),v):w}extendTranslation(r,n,i,a,s){if(this.i18nFormat?.parse)r=this.i18nFormat.parse(r,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=pn(r)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const p=r.match(this.interpolator.nestingRegexp);d=p&&p.length}let f=i.replace&&!pn(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),r=this.interpolator.interpolate(r,f,i.lng||this.language||a.usedLng,i),u){const p=r.match(this.interpolator.nestingRegexp),x=p&&p.length;d<x&&(i.nest=!1)}!i.lng&&a&&a.res&&(i.lng=this.language||a.usedLng),i.nest!==!1&&(r=this.interpolator.nest(r,(...p)=>s?.[0]===p[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,l=pn(o)?[o]:o;return r!=null&&l?.length&&i.applyPostProcessor!==!1&&(r=gz.handle(l,r,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),r}resolve(r,n={}){let i,a,s,o,l;return pn(r)&&(r=[r]),r.forEach(u=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(u,n),f=d.key;a=f;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const x=n.count!==void 0&&!pn(n.count),v=x&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(pn(n.context)||typeof n.context=="number")&&n.context!=="",C=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(N=>{this.isValidLookup(i)||(l=N,!C8[`${C[0]}-${N}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(C8[`${C[0]}-${N}`]=!0,this.logger.warn(`key "${a}" for languages "${C.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(T=>{if(this.isValidLookup(i))return;o=T;const O=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(O,f,T,N,n);else{let M;x&&(M=this.pluralResolver.getSuffix(T,n.count,n));const Y=`${this.options.pluralSeparator}zero`,q=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(n.ordinal&&M.indexOf(q)===0&&O.push(f+M.replace(q,this.options.pluralSeparator)),O.push(f+M),v&&O.push(f+Y)),w){const W=`${f}${this.options.contextSeparator||"_"}${n.context}`;O.push(W),x&&(n.ordinal&&M.indexOf(q)===0&&O.push(W+M.replace(q,this.options.pluralSeparator)),O.push(W+M),v&&O.push(W+Y))}}let D;for(;D=O.pop();)this.isValidLookup(i)||(s=D,i=this.getResource(T,N,D,n))}))})}),{res:i,usedKey:a,exactUsedKey:s,usedLng:o,usedNS:l}}isValidLookup(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}getResource(r,n,i,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(r,n,i,a):this.resourceStore.getResource(r,n,i,a)}getUsedParamsDetails(r={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=r.replace&&!pn(r.replace);let a=i?r.replace:r;if(i&&typeof r.count<"u"&&(a.count=r.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!i){a={...a};for(const s of n)delete a[s]}return a}static hasDefaultValue(r){const n="defaultValue";for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&n===i.substring(0,n.length)&&r[i]!==void 0)return!0;return!1}}class N8{constructor(r){this.options=r,this.supportedLngs=this.options.supportedLngs||!1,this.logger=iu.create("languageUtils")}getScriptPartFromCode(r){if(r=Ug(r),!r||r.indexOf("-")<0)return null;const n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(r){if(r=Ug(r),!r||r.indexOf("-")<0)return r;const n=r.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(r){if(pn(r)&&r.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(r)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?r.toLowerCase():r)}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}isSupportedCode(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}getBestMatchFromCodes(r){if(!r)return null;let n;return r.forEach(i=>{if(n)return;const a=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&r.forEach(i=>{if(n)return;const a=this.getScriptPartFromCode(i);if(this.isSupportedCode(a))return n=a;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),pn(r)&&(r=[r]),Array.isArray(r))return r;if(!n)return r.default||[];let i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}toResolveHierarchy(r,n){const i=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],r),a=[],s=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return pn(r)&&(r.indexOf("-")>-1||r.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(r))):pn(r)&&s(this.formatLanguageCode(r)),i.forEach(o=>{a.indexOf(o)<0&&s(this.formatLanguageCode(o))}),a}}const A8={zero:0,one:1,two:2,few:3,many:4,other:5},E8={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class tJ{constructor(r,n={}){this.languageUtils=r,this.options=n,this.logger=iu.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(r,n={}){const i=Ug(r==="dev"?"en":r),a=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:a});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(i,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),E8;if(!r.match(/-|_/))return E8;const u=this.languageUtils.getLanguagePartFromCode(r);o=this.getRule(u,n)}return this.pluralRulesCache[s]=o,o}needsPlural(r,n={}){let i=this.getRule(r,n);return i||(i=this.getRule("dev",n)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(r,n,i={}){return this.getSuffixes(r,i).map(a=>`${n}${a}`)}getSuffixes(r,n={}){let i=this.getRule(r,n);return i||(i=this.getRule("dev",n)),i?i.resolvedOptions().pluralCategories.sort((a,s)=>A8[a]-A8[s]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(r,n,i={}){const a=this.getRule(r,i);return a?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:(this.logger.warn(`no plural rule found for: ${r}`),this.getSuffix("dev",n,i))}}const _8=(t,r,n,i=".",a=!0)=>{let s=$X(t,r,n);return!s&&a&&pn(n)&&(s=WC(t,n,i),s===void 0&&(s=WC(r,n,i))),s},k5=t=>t.replace(/\$/g,"$$$$");class T8{constructor(r={}){this.logger=iu.create("interpolator"),this.options=r,this.format=r?.interpolation?.format||(n=>n),this.init(r)}init(r={}){r.interpolation||(r.interpolation={escapeValue:!0});const{escape:n,escapeValue:i,useRawValueToEscape:a,prefix:s,prefixEscaped:o,suffix:l,suffixEscaped:u,formatSeparator:d,unescapeSuffix:f,unescapePrefix:p,nestingPrefix:x,nestingPrefixEscaped:v,nestingSuffix:w,nestingSuffixEscaped:C,nestingOptionsSeparator:N,maxReplaces:T,alwaysFormat:O}=r.interpolation;this.escape=n!==void 0?n:KX,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=s?ep(s):o||"{{",this.suffix=l?ep(l):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=f?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=x?ep(x):v||ep("$t("),this.nestingSuffix=w?ep(w):C||ep(")"),this.nestingOptionsSeparator=N||",",this.maxReplaces=T||1e3,this.alwaysFormat=O!==void 0?O:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const r=(n,i)=>n?.source===i?(n.lastIndex=0,n):new RegExp(i,"g");this.regexp=r(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=r(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=r(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(r,n,i,a){let s,o,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const T=_8(n,u,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,i,{...a,...n,interpolationkey:v}):T}const w=v.split(this.formatSeparator),C=w.shift().trim(),N=w.join(this.formatSeparator).trim();return this.format(_8(n,u,C,this.options.keySeparator,this.options.ignoreJSONStructure),N,i,{...a,...n,interpolationkey:C})};this.resetRegExp();const f=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>k5(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?k5(this.escape(v)):k5(v)}].forEach(v=>{for(l=0;s=v.regex.exec(r);){const w=s[1].trim();if(o=d(w),o===void 0)if(typeof f=="function"){const N=f(r,s,a);o=pn(N)?N:""}else if(a&&Object.prototype.hasOwnProperty.call(a,w))o="";else if(p){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${r}`),o="";else!pn(o)&&!this.useRawValueToEscape&&(o=v8(o));const C=v.safeValue(o);if(r=r.replace(s[0],C),p?(v.regex.lastIndex+=o.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),r}nest(r,n,i={}){let a,s,o;const l=(u,d)=>{const f=this.nestingOptionsSeparator;if(u.indexOf(f)<0)return u;const p=u.split(new RegExp(`${f}[ ]*{`));let x=`{${p[1]}`;u=p[0],x=this.interpolate(x,o);const v=x.match(/'/g),w=x.match(/"/g);((v?.length??0)%2===0&&!w||w.length%2!==0)&&(x=x.replace(/'/g,'"'));try{o=JSON.parse(x),d&&(o={...d,...o})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,C),`${u}${f}${x}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;a=this.nestingRegexp.exec(r);){let u=[];o={...i},o=o.replace&&!pn(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const d=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(d!==-1&&(u=a[1].slice(d).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),a[1]=a[1].slice(0,d)),s=n(l.call(this,a[1].trim(),o),o),s&&a[0]===r&&!pn(s))return s;pn(s)||(s=v8(s)),s||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${r}`),s=""),u.length&&(s=u.reduce((f,p)=>this.format(f,p,i.lng,{...i,interpolationkey:a[1].trim()}),s.trim())),r=r.replace(a[0],s),this.regexp.lastIndex=0}return r}}const rJ=t=>{let r=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const i=t.split("(");r=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);r==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):r==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(o=>{if(o){const[l,...u]=o.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();n[f]||(n[f]=d),d==="false"&&(n[f]=!1),d==="true"&&(n[f]=!0),isNaN(d)||(n[f]=parseInt(d,10))}})}return{formatName:r,formatOptions:n}},I8=t=>{const r={};return(n,i,a)=>{let s=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(s={...s,[a.interpolationkey]:void 0});const o=i+JSON.stringify(s);let l=r[o];return l||(l=t(Ug(i),a),r[o]=l),l(n)}},nJ=t=>(r,n,i)=>t(Ug(n),i)(r);class iJ{constructor(r={}){this.logger=iu.create("formatter"),this.options=r,this.init(r)}init(r,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const i=n.cacheInBuiltFormats?I8:nJ;this.formats={number:i((a,s)=>{const o=new Intl.NumberFormat(a,{...s});return l=>o.format(l)}),currency:i((a,s)=>{const o=new Intl.NumberFormat(a,{...s,style:"currency"});return l=>o.format(l)}),datetime:i((a,s)=>{const o=new Intl.DateTimeFormat(a,{...s});return l=>o.format(l)}),relativetime:i((a,s)=>{const o=new Intl.RelativeTimeFormat(a,{...s});return l=>o.format(l,s.range||"day")}),list:i((a,s)=>{const o=new Intl.ListFormat(a,{...s});return l=>o.format(l)})}}add(r,n){this.formats[r.toLowerCase().trim()]=n}addCached(r,n){this.formats[r.toLowerCase().trim()]=I8(n)}format(r,n,i,a={}){const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(u=>u.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,u)=>{const{formatName:d,formatOptions:f}=rJ(u);if(this.formats[d]){let p=l;try{const x=a?.formatParams?.[a.interpolationkey]||{},v=x.locale||x.lng||a.locale||a.lng||i;p=this.formats[d](l,v,{...f,...a,...x})}catch(x){this.logger.warn(x)}return p}else this.logger.warn(`there was no format function for ${d}`);return l},r)}}const aJ=(t,r)=>{t.pending[r]!==void 0&&(delete t.pending[r],t.pendingCount--)};class sJ extends n2{constructor(r,n,i,a={}){super(),this.backend=r,this.store=n,this.services=i,this.languageUtils=i.languageUtils,this.options=a,this.logger=iu.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,a.backend,a)}queueLoad(r,n,i,a){const s={},o={},l={},u={};return r.forEach(d=>{let f=!0;n.forEach(p=>{const x=`${d}|${p}`;!i.reload&&this.store.hasResourceBundle(d,p)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?o[x]===void 0&&(o[x]=!0):(this.state[x]=1,f=!1,o[x]===void 0&&(o[x]=!0),s[x]===void 0&&(s[x]=!0),u[p]===void 0&&(u[p]=!0)))}),f||(l[d]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(r,n,i){const a=r.split("|"),s=a[0],o=a[1];n&&this.emit("failedLoading",s,o,n),!n&&i&&this.store.addResourceBundle(s,o,i,void 0,void 0,{skipCopy:!0}),this.state[r]=n?-1:2,n&&i&&(this.state[r]=0);const l={};this.queue.forEach(u=>{VX(u.loaded,[s],o),aJ(u,r),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{l[d]||(l[d]={});const f=u.loaded[d];f.length&&f.forEach(p=>{l[d][p]===void 0&&(l[d][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(r,n,i,a=0,s=this.retryTimeout,o){if(!r.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:n,fcName:i,tried:a,wait:s,callback:o});return}this.readingCalls++;const l=(d,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&f&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,r,n,i,a+1,s*2,o)},s);return}o(d,f)},u=this.backend[i].bind(this.backend);if(u.length===2){try{const d=u(r,n);d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}return}return u(r,n,l)}prepareLoading(r,n,i={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();pn(r)&&(r=this.languageUtils.toResolveHierarchy(r)),pn(n)&&(n=[n]);const s=this.queueLoad(r,n,i,a);if(!s.toLoad.length)return s.pending.length||a(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(r,n,i){this.prepareLoading(r,n,{},i)}reload(r,n,i){this.prepareLoading(r,n,{reload:!0},i)}loadOne(r,n=""){const i=r.split("|"),a=i[0],s=i[1];this.read(a,s,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${a} failed`,o),!o&&l&&this.logger.log(`${n}loaded namespace ${s} for language ${a}`,l),this.loaded(r,o,l)})}saveMissing(r,n,i,a,s,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${i}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const u={...o,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let f;d.length===5?f=d(r,n,i,a,u):f=d(r,n,i,a),f&&typeof f.then=="function"?f.then(p=>l(null,p)).catch(l):l(null,f)}catch(f){l(f)}else d(r,n,i,a,l,u)}!r||!r[0]||this.store.addResource(r[0],n,i,a)}}}const D5=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let r={};if(typeof t[1]=="object"&&(r=t[1]),pn(t[1])&&(r.defaultValue=t[1]),pn(t[2])&&(r.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(i=>{r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),O8=t=>(pn(t.ns)&&(t.ns=[t.ns]),pn(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),pn(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Fx=()=>{},oJ=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ig extends n2{constructor(r={},n){if(super(),this.options=O8(r),this.services={},this.logger=iu,this.modules={external:[]},oJ(this),n&&!this.isInitialized&&!r.isClone){if(!this.options.initAsync)return this.init(r,n),this;setTimeout(()=>{this.init(r,n)},0)}}init(r={},n){this.isInitializing=!0,typeof r=="function"&&(n=r,r={}),r.defaultNS==null&&r.ns&&(pn(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const i=D5();this.options={...i,...this.options,...O8(r)},this.options.interpolation={...i.interpolation,...this.options.interpolation},r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=i.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const a=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?iu.init(a(this.modules.logger),this.options):iu.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=iJ;const f=new N8(this.options);this.store=new S8(this.options.resources,this.options);const p=this.services;p.logger=iu,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new tJ(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(p.formatter=a(d),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new T8(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new sJ(a(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(v,...w)=>{this.emit(v,...w)}),this.modules.languageDetector&&(p.languageDetector=a(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=a(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new zv(this.services,this.options),this.translator.on("*",(v,...w)=>{this.emit(v,...w)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Fx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...f)=>this.store[d](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...f)=>(this.store[d](...f),this)});const l=Z0(),u=()=>{const d=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),n(f,p)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(r,n=Fx){let i=n;const a=pn(r)?r:this.language;if(typeof r=="function"&&(i=r),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const s=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};a?o(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>o(u)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(l)})}else i(null)}reloadResources(r,n,i){const a=Z0();return typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=void 0),r||(r=this.languages),n||(n=this.options.ns),i||(i=Fx),this.services.backendConnector.reload(r,n,s=>{a.resolve(),i(s)}),a}use(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&gz.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}setResolvedLanguage(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1)){for(let n=0;n<this.languages.length;n++){const i=this.languages[n];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(r)<0&&this.store.hasLanguageSomeTranslations(r)&&(this.resolvedLanguage=r,this.languages.unshift(r))}}changeLanguage(r,n){this.isLanguageChangingTo=r;const i=Z0();this.emit("languageChanging",r);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},s=(l,u)=>{u?this.isLanguageChangingTo===r&&(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve((...d)=>this.t(...d)),n&&n(l,(...d)=>this.t(...d))},o=l=>{!r&&!l&&this.services.languageDetector&&(l=[]);const u=pn(l)?l:l&&l[0],d=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(pn(l)?[l]:l);d&&(this.language||a(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,f=>{s(f,d)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(r),i}getFixedT(r,n,i){const a=(s,o,...l)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([s,o].concat(l)):u={...o},u.lng=u.lng||a.lng,u.lngs=u.lngs||a.lngs,u.ns=u.ns||a.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||i||a.keyPrefix);const d=this.options.keySeparator||".";let f;return u.keyPrefix&&Array.isArray(s)?f=s.map(p=>(typeof p=="function"&&(p=HC(p,{...this.options,...o})),`${u.keyPrefix}${d}${p}`)):(typeof s=="function"&&(s=HC(s,{...this.options,...o})),f=u.keyPrefix?`${u.keyPrefix}${d}${s}`:s),this.t(f,u)};return pn(r)?a.lng=r:a.lngs=r,a.ns=n,a.keyPrefix=i,a}t(...r){return this.translator?.translate(...r)}exists(...r){return this.translator?.exists(...r)}setDefaultNamespace(r){this.options.defaultNS=r}hasLoadedNamespace(r,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const o=(l,u)=>{const d=this.services.backendConnector.state[`${l}|${u}`];return d===-1||d===0||d===2};if(n.precheck){const l=n.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(i,r)&&(!a||o(s,r)))}loadNamespaces(r,n){const i=Z0();return this.options.ns?(pn(r)&&(r=[r]),r.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{i.resolve(),n&&n(a)}),i):(n&&n(),Promise.resolve())}loadLanguages(r,n){const i=Z0();pn(r)&&(r=[r]);const a=this.options.preload||[],s=r.filter(o=>a.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=a.concat(s),this.loadResources(o=>{i.resolve(),n&&n(o)}),i):(n&&n(),Promise.resolve())}dir(r){if(r||(r=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!r)return"rtl";try{const a=new Intl.Locale(r);if(a&&a.getTextInfo){const s=a.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new N8(D5());return r.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(i.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(r={},n){const i=new Ig(r,n);return i.createInstance=Ig.createInstance,i}cloneInstance(r={},n=Fx){const i=r.forkResourceStore;i&&delete r.forkResourceStore;const a={...this.options,...r,isClone:!0},s=new Ig(a);if((r.debug!==void 0||r.prefix!==void 0)&&(s.logger=s.logger.clone(r)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const l=Object.keys(this.store.data).reduce((u,d)=>(u[d]={...this.store.data[d]},u[d]=Object.keys(u[d]).reduce((f,p)=>(f[p]={...u[d][p]},f),u[d]),u),{});s.store=new S8(l,a),s.services.resourceStore=s.store}if(r.interpolation){const u={...D5().interpolation,...this.options.interpolation,...r.interpolation},d={...a,interpolation:u};s.services.interpolator=new T8(d)}return s.translator=new zv(s.services,a),s.translator.on("*",(l,...u)=>{s.emit(l,...u)}),s.init(a,n),s.translator.options=a,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ol=Ig.createInstance();Ol.createInstance;Ol.dir;Ol.init;Ol.loadResources;Ol.reloadResources;Ol.use;Ol.changeLanguage;Ol.getFixedT;Ol.t;Ol.exists;Ol.setDefaultNamespace;Ol.hasLoadedNamespace;Ol.loadNamespaces;Ol.loadLanguages;const lJ=(t,r,n,i)=>{const a=[n,{code:r,...i||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(a,"warn","react-i18next::",!0);cm(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...a):console?.warn&&console.warn(...a)},k8={},xz=(t,r,n,i)=>{cm(n)&&k8[n]||(cm(n)&&(k8[n]=new Date),lJ(t,r,n,i))},vz=(t,r)=>()=>{if(t.isInitialized)r();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),r()};t.on("initialized",n)}},VC=(t,r,n)=>{t.loadNamespaces(r,vz(t,n))},D8=(t,r,n,i)=>{if(cm(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(r)>-1)return VC(t,n,i);n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(r,vz(t,i))},cJ=(t,r,n={})=>!r.languages||!r.languages.length?(xz(r,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:r.languages}),!0):r.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!a(i.isLanguageChangingTo,t))return!1}}),cm=t=>typeof t=="string",dJ=t=>typeof t=="object"&&t!==null,uJ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,hJ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},fJ=t=>hJ[t],mJ=t=>t.replace(uJ,fJ);let $C={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:mJ,transDefaultProps:void 0};const pJ=(t={})=>{$C={...$C,...t}},gJ=()=>$C;let bz;const yJ=t=>{bz=t},xJ=()=>bz,vJ={type:"3rdParty",init(t){pJ(t.options.react),yJ(t)}},bJ=k.createContext();class jJ{constructor(){this.usedNamespaces={}}addUsedNamespaces(r){r.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var P5={exports:{}},R5={};var P8;function wJ(){if(P8)return R5;P8=1;var t=Hp();function r(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var n=typeof Object.is=="function"?Object.is:r,i=t.useState,a=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(p,x){var v=x(),w=i({inst:{value:v,getSnapshot:x}}),C=w[0].inst,N=w[1];return s(function(){C.value=v,C.getSnapshot=x,u(C)&&N({inst:C})},[p,v,x]),a(function(){return u(C)&&N({inst:C}),p(function(){u(C)&&N({inst:C})})},[p]),o(v),v}function u(p){var x=p.getSnapshot;p=p.value;try{var v=x();return!n(p,v)}catch{return!0}}function d(p,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return R5.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,R5}var R8;function jz(){return R8||(R8=1,P5.exports=wJ()),P5.exports}var SJ=jz();const CJ=(t,r)=>cm(r)?r:dJ(r)&&cm(r.defaultValue)?r.defaultValue:Array.isArray(t)?t[t.length-1]:t,NJ={t:CJ,ready:!1},AJ=()=>()=>{},BA=(t,r={})=>{const{i18n:n}=r,{i18n:i,defaultNS:a}=k.useContext(bJ)||{},s=n||i||xJ();s&&!s.reportNamespaces&&(s.reportNamespaces=new jJ),s||xz(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=k.useMemo(()=>({...gJ(),...s?.options?.react,...r}),[s,r]),{useSuspense:l,keyPrefix:u}=o,d=a||s?.options?.defaultNS,f=cm(d)?[d]:d||["translation"],p=k.useMemo(()=>f,f);s?.reportNamespaces?.addUsedNamespaces?.(p);const x=k.useRef(0),v=k.useCallback(z=>{if(!s)return AJ;const{bindI18n:G,bindI18nStore:ne}=o,Z=()=>{x.current+=1,z()};return G&&s.on(G,Z),ne&&s.store.on(ne,Z),()=>{G&&G.split(" ").forEach(ie=>s.off(ie,Z)),ne&&ne.split(" ").forEach(ie=>s.store.off(ie,Z))}},[s,o]),w=k.useRef(),C=k.useCallback(()=>{if(!s)return NJ;const z=!!(s.isInitialized||s.initializedStoreOnce)&&p.every(ce=>cJ(ce,s,o)),G=r.lng||s.language,ne=x.current,Z=w.current;if(Z&&Z.ready===z&&Z.lng===G&&Z.keyPrefix===u&&Z.revision===ne)return Z;const me={t:s.getFixedT(G,o.nsMode==="fallback"?p:p[0],u),ready:z,lng:G,keyPrefix:u,revision:ne};return w.current=me,me},[s,p,u,o,r.lng]),[N,T]=k.useState(0),{t:O,ready:D}=SJ.useSyncExternalStore(v,C,C);k.useEffect(()=>{if(s&&!D&&!l){const z=()=>T(G=>G+1);r.lng?D8(s,r.lng,p,z):VC(s,p,z)}},[s,r.lng,p,D,l,N]);const M=s||{},Y=k.useRef(null),q=k.useRef(),W=z=>{const G=Object.getOwnPropertyDescriptors(z);G.__original&&delete G.__original;const ne=Object.create(Object.getPrototypeOf(z),G);if(!Object.prototype.hasOwnProperty.call(ne,"__original"))try{Object.defineProperty(ne,"__original",{value:z,writable:!1,enumerable:!1,configurable:!1})}catch{}return ne},J=k.useMemo(()=>{const z=M,G=z?.language;let ne=z;z&&(Y.current&&Y.current.__original===z?q.current!==G?(ne=W(z),Y.current=ne,q.current=G):ne=Y.current:(ne=W(z),Y.current=ne,q.current=G));const Z=[O,ne,D];return Z.t=O,Z.i18n=ne,Z.ready=D,Z},[O,M,D,M.resolvedLanguage,M.language,M.languages]);if(s&&l&&!D)throw new Promise(z=>{const G=()=>z();r.lng?D8(s,r.lng,p,G):VC(s,p,G)});return J},{slice:EJ,forEach:_J}=[];function TJ(t){return _J.call(EJ.call(arguments,1),r=>{if(r)for(const n in r)t[n]===void 0&&(t[n]=r[n])}),t}function IJ(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const M8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OJ=function(t,r){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(r);let s=`${t}=${a}`;if(i.maxAge>0){const o=i.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(i.domain){if(!M8.test(i.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${i.domain}`}if(i.path){if(!M8.test(i.path))throw new TypeError("option path is invalid");s+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(s+="; Partitioned"),s},L8={create(t,r,n,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+n*60*1e3)),i&&(a.domain=i),document.cookie=OJ(t,r,a)},read(t){const r=`${t}=`,n=document.cookie.split(";");for(let i=0;i<n.length;i++){let a=n[i];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(r)===0)return a.substring(r.length,a.length)}return null},remove(t,r){this.create(t,"",-1,r)}};var kJ={name:"cookie",lookup(t){let{lookupCookie:r}=t;if(r&&typeof document<"u")return L8.read(r)||void 0},cacheUserLanguage(t,r){let{lookupCookie:n,cookieMinutes:i,cookieDomain:a,cookieOptions:s}=r;n&&typeof document<"u"&&L8.create(n,t,i,a,s)}},DJ={name:"querystring",lookup(t){let{lookupQuerystring:r}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const s=i.substring(1).split("&");for(let o=0;o<s.length;o++){const l=s[o].indexOf("=");l>0&&s[o].substring(0,l)===r&&(n=s[o].substring(l+1))}}return n}},PJ={name:"hash",lookup(t){let{lookupHash:r,lookupFromHashIndex:n}=t,i;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const s=a.substring(1);if(r){const o=s.split("&");for(let l=0;l<o.length;l++){const u=o[l].indexOf("=");u>0&&o[l].substring(0,u)===r&&(i=o[l].substring(u+1))}}if(i)return i;if(!i&&n>-1){const o=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof n=="number"?n:0]?.replace("/",""):void 0}}}return i}};let tp=null;const z8=()=>{if(tp!==null)return tp;try{if(tp=typeof window<"u"&&window.localStorage!==null,!tp)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{tp=!1}return tp};var RJ={name:"localStorage",lookup(t){let{lookupLocalStorage:r}=t;if(r&&z8())return window.localStorage.getItem(r)||void 0},cacheUserLanguage(t,r){let{lookupLocalStorage:n}=r;n&&z8()&&window.localStorage.setItem(n,t)}};let rp=null;const B8=()=>{if(rp!==null)return rp;try{if(rp=typeof window<"u"&&window.sessionStorage!==null,!rp)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{rp=!1}return rp};var MJ={name:"sessionStorage",lookup(t){let{lookupSessionStorage:r}=t;if(r&&B8())return window.sessionStorage.getItem(r)||void 0},cacheUserLanguage(t,r){let{lookupSessionStorage:n}=r;n&&B8()&&window.sessionStorage.setItem(n,t)}},LJ={name:"navigator",lookup(t){const r=[];if(typeof navigator<"u"){const{languages:n,userLanguage:i,language:a}=navigator;if(n)for(let s=0;s<n.length;s++)r.push(n[s]);i&&r.push(i),a&&r.push(a)}return r.length>0?r:void 0}},zJ={name:"htmlTag",lookup(t){let{htmlTag:r}=t,n;const i=r||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},BJ={name:"path",lookup(t){let{lookupFromPathIndex:r}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof r=="number"?r:0]?.replace("/",""):void 0}},FJ={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:r}=t;const n=typeof r=="number"?r+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[n]}};let wz=!1;try{document.cookie,wz=!0}catch{}const Sz=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];wz||Sz.splice(1,1);const qJ=()=>({order:Sz,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Cz{constructor(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(r,n)}init(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r,this.options=TJ(n,this.options||{},qJ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(kJ),this.addDetector(DJ),this.addDetector(RJ),this.addDetector(MJ),this.addDetector(LJ),this.addDetector(zJ),this.addDetector(BJ),this.addDetector(FJ),this.addDetector(PJ)}addDetector(r){return this.detectors[r.name]=r,this}detect(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return r.forEach(i=>{if(this.detectors[i]){let a=this.detectors[i].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(n=n.concat(a))}}),n=n.filter(i=>i!=null&&!IJ(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(r)>-1||n.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(r,this.options)}))}}Cz.type="languageDetector";const UJ={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",create:"Create",update:"Update",search:"Search",filter:"Filter",clear:"Clear",close:"Close",confirm:"Confirm",submit:"Submit",reset:"Reset",back:"Back",next:"Next",previous:"Previous",loading:"Loading...",noData:"No data available",actions:"Actions",status:"Status",date:"Date",time:"Time",name:"Name",code:"Code",description:"Description",notes:"Notes",active:"Active",inactive:"Inactive",yes:"Yes",no:"No",all:"All",total:"Total",quantity:"Quantity",amount:"Amount",price:"Price",view:"View",details:"Details",export:"Export",import:"Import",download:"Download",upload:"Upload",approve:"Approve",reject:"Reject",pending:"Pending",completed:"Completed",viewAll:"View All",showMore:"Show More",showLess:"Show Less"},WJ={login:"Login",logout:"Logout",email:"Email",password:"Password",rememberMe:"Remember me",forgotPassword:"Forgot password?",signIn:"Sign In",signOut:"Sign Out",welcomeBack:"Welcome back",loginSuccess:"Login successful",loginFailed:"Login failed",invalidCredentials:"Invalid email or password"},HJ={dashboard:"Dashboard",customers:"Customers",products:"Products",orders:"Orders",planner:"Planner",productionSchedule:"Production Schedule",batches:"Batches",qc:"QC Tests",release:"QP Release",dispensing:"Dispensing",shipments:"Shipments",drivers:"Drivers",availability:"Availability",reservations:"Reservations",contracts:"Contracts",invoices:"Invoices",payments:"Payments",users:"Users",approvals:"Approvals",reports:"Reports",settings:"Settings",auditLog:"Audit Log",roles:"Roles",notifications:"Notifications",materials:"Materials",recipes:"Recipes",suppliers:"Suppliers",purchaseOrders:"Purchase Orders",warehouses:"Warehouses",goodsReceiving:"Goods Receiving",inventory:"Inventory",manufacturing:"Manufacturing",oosInvestigations:"OOS/OOT Investigations",profile:"Profile"},VJ={title:"Operations Command Center",subtitle:"Real-time overview of production, quality, logistics, and procurement operations",ordersProduction:"Orders & Production",logistics:"Logistics",procurementInventory:"Procurement & Inventory",todaysOrders:"Today's Orders",batchesInProgress:"Batches in Progress",pendingQC:"Pending QC",pendingRelease:"Pending Release",shipmentsToday:"Shipments Today",deliveriesCompleted:"Deliveries Completed",onTimeDelivery:"On-Time Delivery",driversActive:"Drivers Active",posPendingApproval:"POs Pending Approval",grnPendingQC:"GRN Pending QC",lowStockItems:"Low Stock Items",batchesInProduction:"Batches in Production",recentOrders:"Recent Orders",orderQueue:"Order Queue",batchQueue:"Batch Queue",qcQueue:"QC Queue",shipmentQueue:"Shipment Queue",poApprovalQueue:"PO Approval Queue",grnQcQueue:"GRN QC Queue",manufacturingQueue:"Manufacturing Queue"},$J={title:"Orders",newOrder:"New Order",orderNumber:"Order Number",customer:"Customer",product:"Product",deliveryDate:"Delivery Date",requestedActivity:"Requested Activity",status:"Status",createdAt:"Created At",totalOrders:"Total Orders",pendingOrders:"Pending Orders",confirmedOrders:"Confirmed Orders",deliveredOrders:"Delivered Orders"},GJ={title:"Customers",newCustomer:"New Customer",customerName:"Customer Name",email:"Email",phone:"Phone",address:"Address",city:"City",country:"Country",status:"Status",totalCustomers:"Total Customers",activeCustomers:"Active Customers"},KJ={title:"Products",newProduct:"New Product",productName:"Product Name",productCode:"Product Code",category:"Category",halfLife:"Half Life",defaultActivity:"Default Activity",status:"Status"},QJ={title:"Batches",batchNumber:"Batch Number",product:"Product",plannedQty:"Planned Qty",actualQty:"Actual Qty",status:"Status",scheduledDate:"Scheduled Date",journey:"Journey"},YJ={title:"Quality Control",tests:"QC Tests",testName:"Test Name",testType:"Test Type",result:"Result",specification:"Specification",passed:"Passed",failed:"Failed",pending:"Pending",inProgress:"In Progress"},ZJ={title:"QP Release",batchRelease:"Batch Release",releasedBy:"Released By",releaseDate:"Release Date",signature:"Signature",comments:"Comments"},XJ={title:"Dispensing",doseNumber:"Dose Number",patient:"Patient",activity:"Activity",dispensedAt:"Dispensed At",dispensedBy:"Dispensed By"},JJ={title:"Shipments",newShipment:"New Shipment",shipmentNumber:"Shipment Number",driver:"Driver",vehicle:"Vehicle",departureTime:"Departure Time",arrivalTime:"Arrival Time",status:"Status",tracking:"Tracking"},eee={title:"Invoices",newInvoice:"New Invoice",invoiceNumber:"Invoice Number",customer:"Customer",amount:"Amount",dueDate:"Due Date",status:"Status",paid:"Paid",unpaid:"Unpaid",overdue:"Overdue"},tee={title:"Purchase Orders",newPO:"New Purchase Order",poNumber:"PO Number",supplier:"Supplier",expectedDate:"Expected Date",totalAmount:"Total Amount",status:"Status",items:"Items",approve:"Approve",reject:"Reject",send:"Send to Supplier"},ree={title:"Goods Receiving",newGRN:"New GRN",grnNumber:"GRN Number",purchaseOrder:"Purchase Order",receivedDate:"Received Date",receivedBy:"Received By",status:"Status",items:"Items"},nee={title:"Materials",newMaterial:"New Material",materialCode:"Material Code",materialName:"Material Name",category:"Category",unit:"Unit",currentStock:"Current Stock",reorderLevel:"Reorder Level"},iee={title:"Suppliers",newSupplier:"New Supplier",supplierName:"Supplier Name",contactPerson:"Contact Person",email:"Email",phone:"Phone",address:"Address"},aee={title:"Warehouses",newWarehouse:"New Warehouse",warehouseName:"Warehouse Name",warehouseCode:"Warehouse Code",type:"Type",location:"Location",capacity:"Capacity"},see={title:"Inventory",material:"Material",warehouse:"Warehouse",location:"Location",quantity:"Quantity",status:"Status",lastMovement:"Last Movement"},oee={title:"Manufacturing Execution",batchRecord:"Batch Record",recipe:"Recipe",startTime:"Start Time",endTime:"End Time",operator:"Operator",steps:"Steps",progress:"Progress"},lee={title:"Users",newUser:"New User",firstName:"First Name",lastName:"Last Name",email:"Email",role:"Role",status:"Status",lastLogin:"Last Login"},cee={title:"Settings",general:"General",system:"System Settings",countries:"Countries",cities:"Cities",regions:"Regions",categories:"Categories",couriers:"Couriers",vehicles:"Vehicles",doseUnits:"Dose Units",productTypes:"Product Types",productionMethods:"Production Methods",currencies:"Currencies",attachments:"Attachment Types",notifications:"Notifications",timezone:"Timezone",language:"Language",currency:"Currency"},dee={title:"My Profile",subtitle:"Manage your account settings and preferences",editProfile:"Edit Profile",firstName:"First Name",lastName:"Last Name",email:"Email",phone:"Phone",security:"Security",changePassword:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm New Password",updatePassword:"Update Password",passwordChanged:"Password changed successfully",profileUpdated:"Profile updated successfully"},uee={title:"Notifications",markAllRead:"Mark all as read",noNotifications:"No notifications",unread:"Unread",all:"All"},hee={title:"Approvals",pendingApprovals:"Pending Approvals",approved:"Approved",rejected:"Rejected",approvedBy:"Approved By",rejectedBy:"Rejected By"},fee={title:"Reports",generate:"Generate Report",exportPDF:"Export PDF",exportExcel:"Export Excel",dateRange:"Date Range",fromDate:"From Date",toDate:"To Date"},mee={title:"Audit Log",action:"Action",entity:"Entity",user:"User",timestamp:"Timestamp",changes:"Changes",before:"Before",after:"After"},pee={draft:"Draft",pending:"Pending",pendingApproval:"Pending Approval",approved:"Approved",rejected:"Rejected",confirmed:"Confirmed",inProgress:"In Progress",completed:"Completed",cancelled:"Cancelled",delivered:"Delivered",shipped:"Shipped",received:"Received",partiallyReceived:"Partially Received",closed:"Closed",active:"Active",inactive:"Inactive",sent:"Sent",acknowledged:"Acknowledged"},gee={required:"This field is required",invalidEmail:"Invalid email address",minLength:"Minimum {{count}} characters required",maxLength:"Maximum {{count}} characters allowed",passwordMismatch:"Passwords do not match",invalidPhone:"Invalid phone number"},yee={saveSuccess:"Saved successfully",saveFailed:"Failed to save",deleteSuccess:"Deleted successfully",deleteFailed:"Failed to delete",updateSuccess:"Updated successfully",updateFailed:"Failed to update",confirmDelete:"Are you sure you want to delete this item?",noResults:"No results found",loadingError:"Error loading data"},xee={common:UJ,auth:WJ,nav:HJ,dashboard:VJ,orders:$J,customers:GJ,products:KJ,batches:QJ,qc:YJ,release:ZJ,dispensing:XJ,shipments:JJ,invoices:eee,purchaseOrders:tee,grn:ree,materials:nee,suppliers:iee,warehouses:aee,inventory:see,manufacturing:oee,users:lee,settings:cee,profile:dee,notifications:uee,approvals:hee,reports:fee,audit:mee,statuses:pee,validation:gee,messages:yee},vee={save:"",cancel:"",delete:"",edit:"",add:"",create:"",update:"",search:"",filter:"",clear:"",close:"",confirm:"",submit:"",reset:" ",back:"",next:"",previous:"",loading:" ...",noData:"  ",actions:"",status:"",date:"",time:"",name:"",code:"",description:"",notes:"",active:"",inactive:" ",yes:"",no:"",all:"",total:"",quantity:"",amount:"",price:"",view:"",details:"",export:"",import:"",download:"",upload:"",approve:"",reject:"",pending:" ",completed:"",viewAll:" ",showMore:" ",showLess:" "},bee={login:" ",logout:" ",email:" ",password:" ",rememberMe:"",forgotPassword:"  ",signIn:"",signOut:"",welcomeBack:" ",loginSuccess:"   ",loginFailed:"  ",invalidCredentials:"      "},jee={dashboard:" ",customers:"",products:"",orders:"",planner:"",batches:"",qc:" ",release:" ",dispensing:"",shipments:"",drivers:"",availability:"",reservations:"",contracts:"",invoices:"",payments:"",users:"",approvals:"",reports:"",settings:"",auditLog:" ",roles:"",notifications:"",materials:"",recipes:"",suppliers:"",purchaseOrders:" ",warehouses:"",goodsReceiving:" ",inventory:"",manufacturing:"",oosInvestigations:" ",profile:" "},wee={title:"  ",subtitle:"          ",ordersProduction:" ",logistics:"",procurementInventory:" ",todaysOrders:" ",batchesInProgress:"  ",pendingQC:" ",pendingRelease:" ",shipmentsToday:" ",deliveriesCompleted:" ",onTimeDelivery:"  ",driversActive:" ",posPendingApproval:"   ",grnPendingQC:"  ",lowStockItems:"  ",batchesInProduction:"  ",recentOrders:" ",orderQueue:" ",batchQueue:" ",qcQueue:" ",shipmentQueue:" ",poApprovalQueue:"  ",grnQcQueue:"  ",manufacturingQueue:" "},See={title:"",newOrder:" ",orderNumber:" ",customer:"",product:"",deliveryDate:" ",requestedActivity:" ",status:"",createdAt:" ",totalOrders:" ",pendingOrders:"  ",confirmedOrders:" ",deliveredOrders:"  "},Cee={title:"",newCustomer:" ",customerName:" ",email:" ",phone:"",address:"",city:"",country:"",status:"",totalCustomers:" ",activeCustomers:" "},Nee={title:"",newProduct:" ",productName:" ",productCode:" ",category:"",halfLife:" ",defaultActivity:" ",status:""},Aee={title:"",batchNumber:" ",product:"",plannedQty:" ",actualQty:" ",status:"",scheduledDate:" ",journey:""},Eee={title:" ",tests:" ",testName:" ",testType:" ",result:"",specification:"",passed:"",failed:"",pending:" ",inProgress:" "},_ee={title:" ",batchRelease:" ",releasedBy:" ",releaseDate:" ",signature:"",comments:""},Tee={title:"",doseNumber:" ",patient:"",activity:"",dispensedAt:" ",dispensedBy:" "},Iee={title:"",newShipment:" ",shipmentNumber:" ",driver:"",vehicle:"",departureTime:" ",arrivalTime:" ",status:"",tracking:""},Oee={title:"",newInvoice:" ",invoiceNumber:" ",customer:"",amount:"",dueDate:" ",status:"",paid:"",unpaid:" ",overdue:""},kee={title:" ",newPO:"  ",poNumber:"  ",supplier:"",expectedDate:" ",totalAmount:" ",status:"",items:"",approve:"",reject:"",send:" "},Dee={title:" ",newGRN:" ",grnNumber:" ",purchaseOrder:" ",receivedDate:" ",receivedBy:" ",status:"",items:""},Pee={title:"",newMaterial:" ",materialCode:" ",materialName:" ",category:"",unit:"",currentStock:" ",reorderLevel:"  "},Ree={title:"",newSupplier:" ",supplierName:" ",contactPerson:" ",email:" ",phone:"",address:""},Mee={title:"",newWarehouse:" ",warehouseName:" ",warehouseCode:" ",type:"",location:"",capacity:""},Lee={title:"",material:"",warehouse:"",location:"",quantity:"",status:"",lastMovement:" "},zee={title:" ",batchRecord:" ",recipe:"",startTime:" ",endTime:" ",operator:"",steps:"",progress:""},Bee={title:"",newUser:" ",firstName:" ",lastName:" ",email:" ",role:"",status:"",lastLogin:"  "},Fee={title:"",general:"",system:" ",countries:"",cities:"",regions:"",categories:"",couriers:" ",vehicles:"",doseUnits:" ",productTypes:" ",productionMethods:" ",currencies:"",attachments:" ",notifications:"",timezone:" ",language:"",currency:""},qee={title:" ",subtitle:"   ",editProfile:" ",firstName:" ",lastName:" ",email:" ",phone:"",security:"",changePassword:"  ",currentPassword:"  ",newPassword:"  ",confirmPassword:"   ",updatePassword:"  ",passwordChanged:"    ",profileUpdated:"    "},Uee={title:"",markAllRead:"  ",noNotifications:"  ",unread:" ",all:""},Wee={title:"",pendingApprovals:"  ",approved:" ",rejected:"",approvedBy:" ",rejectedBy:" "},Hee={title:"",generate:" ",exportPDF:" PDF",exportExcel:" Excel",dateRange:" ",fromDate:" ",toDate:" "},Vee={title:" ",action:"",entity:"",user:"",timestamp:"",changes:"",before:"",after:""},$ee={draft:"",pending:" ",pendingApproval:" ",approved:" ",rejected:"",confirmed:"",inProgress:" ",completed:"",cancelled:"",delivered:" ",shipped:" ",received:"",partiallyReceived:" ",closed:"",active:"",inactive:" ",sent:"",acknowledged:" "},Gee={required:"  ",invalidEmail:"    ",minLength:"  {{count}}  ",maxLength:"  {{count}}  ",passwordMismatch:"   ",invalidPhone:"   "},Kee={saveSuccess:"  ",saveFailed:"  ",deleteSuccess:"  ",deleteFailed:"  ",updateSuccess:"  ",updateFailed:"  ",confirmDelete:"       ",noResults:"    ",loadingError:"   "},Qee={common:vee,auth:bee,nav:jee,dashboard:wee,orders:See,customers:Cee,products:Nee,batches:Aee,qc:Eee,release:_ee,dispensing:Tee,shipments:Iee,invoices:Oee,purchaseOrders:kee,grn:Dee,materials:Pee,suppliers:Ree,warehouses:Mee,inventory:Lee,manufacturing:zee,users:Bee,settings:Fee,profile:qee,notifications:Uee,approvals:Wee,reports:Hee,audit:Vee,statuses:$ee,validation:Gee,messages:Kee},Yee={en:{translation:xee},ar:{translation:Qee}};Ol.use(Cz).use(vJ).init({resources:Yee,fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const i2=dy(t=>({language:localStorage.getItem("i18nextLng")||"en",direction:(localStorage.getItem("i18nextLng")||"en")==="ar"?"rtl":"ltr",setLanguage:r=>{Ol.changeLanguage(r),localStorage.setItem("i18nextLng",r);const n=r==="ar"?"rtl":"ltr";document.documentElement.dir=n,document.documentElement.lang=r,t({language:r,direction:n})}})),Zee=()=>{const t=localStorage.getItem("i18nextLng")||"en",r=t==="ar"?"rtl":"ltr";document.documentElement.dir=r,document.documentElement.lang=t};function Xee(t,r){let n;try{n=t()}catch{return}return{getItem:a=>{var s;const o=u=>u===null?null:JSON.parse(u,void 0),l=(s=n.getItem(a))!=null?s:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,s)=>n.setItem(a,JSON.stringify(s,void 0)),removeItem:a=>n.removeItem(a)}}const GC=t=>r=>{try{const n=t(r);return n instanceof Promise?n:{then(i){return GC(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return GC(i)(n)}}}},Jee=(t,r)=>(n,i,a)=>{let s={storage:Xee(()=>localStorage),partialize:N=>N,version:0,merge:(N,T)=>({...T,...N}),...r},o=!1,l=0;const u=new Set,d=new Set;let f=s.storage;if(!f)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...N)},i,a);const p=()=>{const N=s.partialize({...i()});return f.setItem(s.name,{state:N,version:s.version})},x=a.setState;a.setState=(N,T)=>(x(N,T),p());const v=t((...N)=>(n(...N),p()),i,a);a.getInitialState=()=>v;let w;const C=()=>{var N,T;if(!f)return;const O=++l;o=!1,u.forEach(M=>{var Y;return M((Y=i())!=null?Y:v)});const D=((T=s.onRehydrateStorage)==null?void 0:T.call(s,(N=i())!=null?N:v))||void 0;return GC(f.getItem.bind(f))(s.name).then(M=>{if(M)if(typeof M.version=="number"&&M.version!==s.version){if(s.migrate){const Y=s.migrate(M.state,M.version);return Y instanceof Promise?Y.then(q=>[!0,q]):[!0,Y]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,M.state];return[!1,void 0]}).then(M=>{var Y;if(O!==l)return;const[q,W]=M;if(w=s.merge(W,(Y=i())!=null?Y:v),n(w,!0),q)return p()}).then(()=>{O===l&&(D?.(w,void 0),w=i(),o=!0,d.forEach(M=>M(w)))}).catch(M=>{O===l&&D?.(void 0,M)})};return a.persist={setOptions:N=>{s={...s,...N},N.storage&&(f=N.storage)},clearStorage:()=>{f?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>C(),hasHydrated:()=>o,onHydrate:N=>(u.add(N),()=>{u.delete(N)}),onFinishHydration:N=>(d.add(N),()=>{d.delete(N)})},s.skipHydration||C(),w||v},FA=Jee,ete=dy()(FA((t,r)=>({favorites:[],addFavorite:n=>{t(i=>({favorites:i.favorites.includes(n)?i.favorites:[...i.favorites,n]}))},removeFavorite:n=>{t(i=>({favorites:i.favorites.filter(a=>a!==n)}))},toggleFavorite:n=>{const{favorites:i}=r();i.includes(n)?t({favorites:i.filter(a=>a!==n)}):t({favorites:[...i,n]})},isFavorite:n=>r().favorites.includes(n)}),{name:"radiopharma-favorites"})),qA=dy()(FA(t=>({currency:"SAR",setCurrency:r=>t({currency:r})}),{name:"currency-preference"})),Nz=6048e5,tte=864e5,UA=6e4,Az=36e5,qx=43200,F8=1440,q8=Symbol.for("constructDateFrom");function id(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&q8 in t?t[q8](r):t instanceof Date?new t.constructor(r):new Date(r)}function Is(t,r){return id(r||t,t)}function ul(t,r,n){const i=Is(t,n?.in);return isNaN(r)?id(t,NaN):(r&&i.setDate(i.getDate()+r),i)}let rte={};function r0(){return rte}function cf(t,r){const n=r0(),i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Is(t,r?.in),s=a.getDay(),o=(s<i?7:0)+s-i;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Bv(t,r){return cf(t,{...r,weekStartsOn:1})}function Ez(t,r){const n=Is(t,r?.in),i=n.getFullYear(),a=id(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const s=Bv(a),o=id(n,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const l=Bv(o);return n.getTime()>=s.getTime()?i+1:n.getTime()>=l.getTime()?i:i-1}function Fv(t){const r=Is(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function n0(t,...r){const n=id.bind(null,t||r.find(i=>typeof i=="object"));return r.map(n)}function Yf(t,r){const n=Is(t,r?.in);return n.setHours(0,0,0,0),n}function _z(t,r,n){const[i,a]=n0(n?.in,t,r),s=Yf(i),o=Yf(a),l=+s-Fv(s),u=+o-Fv(o);return Math.round((l-u)/tte)}function nte(t,r){const n=Ez(t,r),i=id(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Bv(i)}function Tz(t,r,n){return ul(t,r*7,n)}function pv(t,r){const n=+Is(t)-+Is(r);return n<0?-1:n>0?1:n}function ite(t){return id(t,Date.now())}function ate(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ste(t){return!(!ate(t)&&typeof t!="number"||isNaN(+Is(t)))}function ote(t,r,n){const[i,a]=n0(n?.in,t,r),s=i.getFullYear()-a.getFullYear(),o=i.getMonth()-a.getMonth();return s*12+o}function lte(t,r,n){const[i,a]=n0(n?.in,t,r),s=U8(i,a),o=Math.abs(_z(i,a));i.setDate(i.getDate()-s*o);const l=+(U8(i,a)===-s),u=s*(o-l);return u===0?0:u}function U8(t,r){const n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function Iz(t){return r=>{const n=Math.trunc,i=n(r);return i===0?0:i}}function Oz(t,r){return+Is(t)-+Is(r)}function Ux(t,r,n){const i=Oz(t,r)/UA;return Iz()(i)}function cte(t,r){const n=Is(t,r?.in);return n.setHours(23,59,59,999),n}function dte(t,r){const n=Is(t,r?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function ute(t,r){const n=Is(t,r?.in);return+cte(n,r)==+dte(n,r)}function hte(t,r,n){const[i,a,s]=n0(n?.in,t,t,r),o=pv(a,s),l=Math.abs(ote(a,s));if(l<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*l);let u=pv(a,s)===-o;ute(i)&&l===1&&pv(i,s)===1&&(u=!1);const d=o*(l-+u);return d===0?0:d}function fte(t,r,n){const i=Oz(t,r)/1e3;return Iz()(i)}function mte(t,r){const[n,i]=n0(t,r.start,r.end);return{start:n,end:i}}function pte(t,r){const{start:n,end:i}=mte(r?.in,t);let a=+n>+i;const s=a?+n:+i,o=a?i:n;o.setHours(0,0,0,0);let l=1;const u=[];for(;+o<=s;)u.push(id(n,o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?u.reverse():u}function gte(t,r){const n=Is(t,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function yte(t,r){const n=r?.weekStartsOn,i=Is(t,r?.in),a=i.getDay(),s=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const xte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vte=(t,r,n)=>{let i;const a=xte[t];return typeof a=="string"?i=a:r===1?i=a.one:i=a.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function M5(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ste={date:M5({formats:bte,defaultWidth:"full"}),time:M5({formats:jte,defaultWidth:"full"}),dateTime:M5({formats:wte,defaultWidth:"full"})},Cte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Nte=(t,r,n,i)=>Cte[t];function X0(t){return(r,n)=>{const i=n?.context?String(n.context):"standalone";let a;if(i==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n?.width?String(n.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n?.width?String(n.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(r):r;return a[s]}}const Ate={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ete={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_te={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ite={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ote={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kte=(t,r)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Dte={ordinalNumber:kte,era:X0({values:Ate,defaultWidth:"wide"}),quarter:X0({values:Ete,defaultWidth:"wide",argumentCallback:t=>t-1}),month:X0({values:_te,defaultWidth:"wide"}),day:X0({values:Tte,defaultWidth:"wide"}),dayPeriod:X0({values:Ite,defaultWidth:"wide",formattingValues:Ote,defaultFormattingWidth:"wide"})};function J0(t){return(r,n={})=>{const i=n.width,a=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=r.match(a);if(!s)return null;const o=s[0],l=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?Rte(l,p=>p.test(o)):Pte(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=r.slice(o.length);return{value:d,rest:f}}}function Pte(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Rte(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function Mte(t){return(r,n={})=>{const i=r.match(t.matchPattern);if(!i)return null;const a=i[0],s=r.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=r.slice(a.length);return{value:o,rest:l}}}const Lte=/^(\d+)(th|st|nd|rd)?/i,zte=/\d+/i,Bte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Fte={any:[/^b/i,/^(a|c)/i]},qte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ute={any:[/1/i,/2/i,/3/i,/4/i]},Wte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$te={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qte={ordinalNumber:Mte({matchPattern:Lte,parsePattern:zte,valueCallback:t=>parseInt(t,10)}),era:J0({matchPatterns:Bte,defaultMatchWidth:"wide",parsePatterns:Fte,defaultParseWidth:"any"}),quarter:J0({matchPatterns:qte,defaultMatchWidth:"wide",parsePatterns:Ute,defaultParseWidth:"any",valueCallback:t=>t+1}),month:J0({matchPatterns:Wte,defaultMatchWidth:"wide",parsePatterns:Hte,defaultParseWidth:"any"}),day:J0({matchPatterns:Vte,defaultMatchWidth:"wide",parsePatterns:$te,defaultParseWidth:"any"}),dayPeriod:J0({matchPatterns:Gte,defaultMatchWidth:"any",parsePatterns:Kte,defaultParseWidth:"any"})},kz={code:"en-US",formatDistance:vte,formatLong:Ste,formatRelative:Nte,localize:Dte,match:Qte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yte(t,r){const n=Is(t,r?.in);return _z(n,gte(n))+1}function Zte(t,r){const n=Is(t,r?.in),i=+Bv(n)-+nte(n);return Math.round(i/Nz)+1}function Dz(t,r){const n=Is(t,r?.in),i=n.getFullYear(),a=r0(),s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=id(r?.in||t,0);o.setFullYear(i+1,0,s),o.setHours(0,0,0,0);const l=cf(o,r),u=id(r?.in||t,0);u.setFullYear(i,0,s),u.setHours(0,0,0,0);const d=cf(u,r);return+n>=+l?i+1:+n>=+d?i:i-1}function Xte(t,r){const n=r0(),i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=Dz(t,r),s=id(r?.in||t,0);return s.setFullYear(a,0,i),s.setHours(0,0,0,0),cf(s,r)}function Jte(t,r){const n=Is(t,r?.in),i=+cf(n,r)-+Xte(n,r);return Math.round(i/Nz)+1}function Mi(t,r){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(r,"0");return n+i}const Hh={y(t,r){const n=t.getFullYear(),i=n>0?n:1-n;return Mi(r==="yy"?i%100:i,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):Mi(n+1,2)},d(t,r){return Mi(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,r){return Mi(t.getHours()%12||12,r.length)},H(t,r){return Mi(t.getHours(),r.length)},m(t,r){return Mi(t.getMinutes(),r.length)},s(t,r){return Mi(t.getSeconds(),r.length)},S(t,r){const n=r.length,i=t.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Mi(a,r.length)}},np={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},W8={G:function(t,r,n){const i=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const i=t.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Hh.y(t,r)},Y:function(t,r,n,i){const a=Dz(t,i),s=a>0?a:1-a;if(r==="YY"){const o=s%100;return Mi(o,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):Mi(s,r.length)},R:function(t,r){const n=Ez(t);return Mi(n,r.length)},u:function(t,r){const n=t.getFullYear();return Mi(n,r.length)},Q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return Mi(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return Mi(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,r,n){const i=t.getMonth();switch(r){case"M":case"MM":return Hh.M(t,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,r,n){const i=t.getMonth();switch(r){case"L":return String(i+1);case"LL":return Mi(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,r,n,i){const a=Jte(t,i);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):Mi(a,r.length)},I:function(t,r,n){const i=Zte(t);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):Mi(i,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Hh.d(t,r)},D:function(t,r,n){const i=Yte(t);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Mi(i,r.length)},E:function(t,r,n){const i=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,r,n,i){const a=t.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return Mi(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,n,i){const a=t.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return Mi(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,n){const i=t.getDay(),a=i===0?7:i;switch(r){case"i":return String(a);case"ii":return Mi(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,r,n){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,n){const i=t.getHours();let a;switch(i===12?a=np.noon:i===0?a=np.midnight:a=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,n){const i=t.getHours();let a;switch(i>=17?a=np.evening:i>=12?a=np.afternoon:i>=4?a=np.morning:a=np.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Hh.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Hh.H(t,r)},K:function(t,r,n){const i=t.getHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Mi(i,r.length)},k:function(t,r,n){let i=t.getHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):Mi(i,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Hh.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Hh.s(t,r)},S:function(t,r){return Hh.S(t,r)},X:function(t,r,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(r){case"X":return V8(i);case"XXXX":case"XX":return kf(i);default:return kf(i,":")}},x:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"x":return V8(i);case"xxxx":case"xx":return kf(i);default:return kf(i,":")}},O:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+H8(i,":");default:return"GMT"+kf(i,":")}},z:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+H8(i,":");default:return"GMT"+kf(i,":")}},t:function(t,r,n){const i=Math.trunc(+t/1e3);return Mi(i,r.length)},T:function(t,r,n){return Mi(+t,r.length)}};function H8(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),a=Math.trunc(i/60),s=i%60;return s===0?n+String(a):n+String(a)+r+Mi(s,2)}function V8(t,r){return t%60===0?(t>0?"-":"+")+Mi(Math.abs(t)/60,2):kf(t,r)}function kf(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),a=Mi(Math.trunc(i/60),2),s=Mi(i%60,2);return n+a+r+s}const $8=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});default:return r.date({width:"full"})}},Pz=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});default:return r.time({width:"full"})}},ere=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return $8(t,r);let s;switch(i){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",$8(i,r)).replace("{{time}}",Pz(a,r))},tre={p:Pz,P:ere},rre=/^D+$/,nre=/^Y+$/,ire=["D","DD","YY","YYYY"];function are(t){return rre.test(t)}function sre(t){return nre.test(t)}function ore(t,r,n){const i=lre(t,r,n);if(console.warn(i),ire.includes(t))throw new RangeError(i)}function lre(t,r,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ure=/^'([^]*?)'?$/,hre=/''/g,fre=/[a-zA-Z]/;function Ze(t,r,n){const i=r0(),a=n?.locale??i.locale??kz,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=Is(t,n?.in);if(!ste(l))throw new RangeError("Invalid time value");let u=r.match(dre).map(f=>{const p=f[0];if(p==="p"||p==="P"){const x=tre[p];return x(f,a.formatLong)}return f}).join("").match(cre).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:mre(f)};if(W8[p])return{isToken:!0,value:f};if(p.match(fre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(u=a.localize.preprocessor(l,u));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return u.map(f=>{if(!f.isToken)return f.value;const p=f.value;(!n?.useAdditionalWeekYearTokens&&sre(p)||!n?.useAdditionalDayOfYearTokens&&are(p))&&ore(p,r,String(t));const x=W8[p[0]];return x(l,p,a.localize,d)}).join("")}function mre(t){const r=t.match(ure);return r?r[1].replace(hre,"'"):t}function pre(t,r,n){const i=r0(),a=n?.locale??i.locale??kz,s=2520,o=pv(t,r);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o}),[u,d]=n0(n?.in,...o>0?[r,t]:[t,r]),f=fte(d,u),p=(Fv(d)-Fv(u))/1e3,x=Math.round((f-p)/60);let v;if(x<2)return n?.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,l):f<10?a.formatDistance("lessThanXSeconds",10,l):f<20?a.formatDistance("lessThanXSeconds",20,l):f<40?a.formatDistance("halfAMinute",0,l):f<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):x===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",x,l);if(x<45)return a.formatDistance("xMinutes",x,l);if(x<90)return a.formatDistance("aboutXHours",1,l);if(x<F8){const w=Math.round(x/60);return a.formatDistance("aboutXHours",w,l)}else{if(x<s)return a.formatDistance("xDays",1,l);if(x<qx){const w=Math.round(x/F8);return a.formatDistance("xDays",w,l)}else if(x<qx*2)return v=Math.round(x/qx),a.formatDistance("aboutXMonths",v,l)}if(v=hte(d,u),v<12){const w=Math.round(x/qx);return a.formatDistance("xMonths",w,l)}else{const w=v%12,C=Math.trunc(v/12);return w<3?a.formatDistance("aboutXYears",C,l):w<9?a.formatDistance("overXYears",C,l):a.formatDistance("almostXYears",C+1,l)}}function gre(t,r){return pre(t,ite(t),r)}function yre(){return Object.assign({},r0())}function WA(t,r,n){return ul(t,-r,n)}function G8(t,r){const n=()=>id(r?.in,NaN),a=jre(t);let s;if(a.date){const d=wre(a.date,2);s=Sre(d.restDateString,d.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,u;if(a.time&&(l=Cre(a.time),isNaN(l)))return n();if(a.timezone){if(u=Nre(a.timezone),isNaN(u))return n()}else{const d=new Date(o+l),f=Is(0,r?.in);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return Is(o+l+u,r?.in)}const Wx={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},xre=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,vre=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bre=/^([+-])(\d{2})(?::?(\d{2}))?$/;function jre(t){const r={},n=t.split(Wx.dateTimeDelimiter);let i;if(n.length>2)return r;if(/:/.test(n[0])?i=n[0]:(r.date=n[0],i=n[1],Wx.timeZoneDelimiter.test(r.date)&&(r.date=t.split(Wx.timeZoneDelimiter)[0],i=t.substr(r.date.length,t.length))),i){const a=Wx.timezone.exec(i);a?(r.time=i.replace(a[1],""),r.timezone=a[1]):r.time=i}return r}function wre(t,r){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?a:s*100,restDateString:t.slice((i[1]||i[2]).length)}}function Sre(t,r){if(r===null)return new Date(NaN);const n=t.match(xre);if(!n)return new Date(NaN);const i=!!n[4],a=eg(n[1]),s=eg(n[2])-1,o=eg(n[3]),l=eg(n[4]),u=eg(n[5])-1;if(i)return Ire(r,l,u)?Are(r,l,u):new Date(NaN);{const d=new Date(0);return!_re(r,s,o)||!Tre(r,a)?new Date(NaN):(d.setUTCFullYear(r,s,Math.max(a,o)),d)}}function eg(t){return t?parseInt(t):1}function Cre(t){const r=t.match(vre);if(!r)return NaN;const n=L5(r[1]),i=L5(r[2]),a=L5(r[3]);return Ore(n,i,a)?n*Az+i*UA+a*1e3:NaN}function L5(t){return t&&parseFloat(t.replace(",","."))||0}function Nre(t){if(t==="Z")return 0;const r=t.match(bre);if(!r)return 0;const n=r[1]==="+"?-1:1,i=parseInt(r[2]),a=r[3]&&parseInt(r[3])||0;return kre(i,a)?n*(i*Az+a*UA):NaN}function Are(t,r,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const a=i.getUTCDay()||7,s=(r-1)*7+n+1-a;return i.setUTCDate(i.getUTCDate()+s),i}const Ere=[31,null,31,30,31,30,31,31,30,31,30,31];function Rz(t){return t%400===0||t%4===0&&t%100!==0}function _re(t,r,n){return r>=0&&r<=11&&n>=1&&n<=(Ere[r]||(Rz(t)?29:28))}function Tre(t,r){return r>=1&&r<=(Rz(t)?366:365)}function Ire(t,r,n){return r>=1&&r<=53&&n>=0&&n<=6}function Ore(t,r,n){return t===24?r===0&&n===0:n>=0&&n<60&&r>=0&&r<60&&t>=0&&t<25}function kre(t,r){return r>=0&&r<=59}function Dre(t,r,n){return Tz(t,-1,n)}function K8(t,r,n){const i=yre(),a=Mre(t,n.timeZone,n.locale??i.locale);return"formatToParts"in a?Pre(a,r):Rre(a,r)}function Pre(t,r){const n=t.formatToParts(r);for(let i=n.length-1;i>=0;--i)if(n[i].type==="timeZoneName")return n[i].value}function Rre(t,r){const n=t.format(r).replace(/\u200E/g,""),i=/ [\w-+ ]+$/.exec(n);return i?i[0].substr(1):""}function Mre(t,r,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:r,timeZoneName:t})}function Lre(t,r){const n=Ure(r);return"formatToParts"in n?Bre(n,t):Fre(n,t)}const zre={year:0,month:1,day:2,hour:3,minute:4,second:5};function Bre(t,r){try{const n=t.formatToParts(r),i=[];for(let a=0;a<n.length;a++){const s=zre[n[a].type];s!==void 0&&(i[s]=parseInt(n[a].value,10))}return i}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Fre(t,r){const n=t.format(r),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(i[3],10),parseInt(i[1],10),parseInt(i[2],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10)]}const z5={},Q8=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),qre=Q8==="06/25/2014, 00:00:00"||Q8==="06/25/2014 00:00:00";function Ure(t){return z5[t]||(z5[t]=qre?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),z5[t]}function Mz(t,r,n,i,a,s,o){const l=new Date(0);return l.setUTCFullYear(t,r,n),l.setUTCHours(i,a,s,o),l}const Y8=36e5,Wre=6e4,B5={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function HA(t,r,n){if(!t)return 0;let i=B5.timezoneZ.exec(t);if(i)return 0;let a,s;if(i=B5.timezoneHH.exec(t),i)return a=parseInt(i[1],10),Z8(a)?-(a*Y8):NaN;if(i=B5.timezoneHHMM.exec(t),i){a=parseInt(i[2],10);const o=parseInt(i[3],10);return Z8(a,o)?(s=Math.abs(a)*Y8+o*Wre,i[1]==="+"?-s:s):NaN}if($re(t)){r=new Date(r||Date.now());const o=n?r:Hre(r),l=KC(o,t);return-(n?l:Vre(r,l,t))}return NaN}function Hre(t){return Mz(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function KC(t,r){const n=Lre(t,r),i=Mz(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let a=t.getTime();const s=a%1e3;return a-=s>=0?s:1e3+s,i-a}function Vre(t,r,n){let a=t.getTime()-r;const s=KC(new Date(a),n);if(r===s)return r;a-=s-r;const o=KC(new Date(a),n);return s===o?s:Math.max(s,o)}function Z8(t,r){return-23<=t&&t<=23&&(r==null||0<=r&&r<=59)}const X8={};function $re(t){if(X8[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),X8[t]=!0,!0}catch{return!1}}const Gre=60*1e3,Kre={X:function(t,r,n){const i=F5(n.timeZone,t);if(i===0)return"Z";switch(r){case"X":return J8(i);case"XXXX":case"XX":return pp(i);default:return pp(i,":")}},x:function(t,r,n){const i=F5(n.timeZone,t);switch(r){case"x":return J8(i);case"xxxx":case"xx":return pp(i);default:return pp(i,":")}},O:function(t,r,n){const i=F5(n.timeZone,t);switch(r){case"O":case"OO":case"OOO":return"GMT"+Qre(i,":");default:return"GMT"+pp(i,":")}},z:function(t,r,n){switch(r){case"z":case"zz":case"zzz":return K8("short",t,n);default:return K8("long",t,n)}}};function F5(t,r){const n=t?HA(t,r,!0)/Gre:r?.getTimezoneOffset()??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+t);return n}function qv(t,r){const n=t<0?"-":"";let i=Math.abs(t).toString();for(;i.length<r;)i="0"+i;return n+i}function pp(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),a=qv(Math.floor(i/60),2),s=qv(Math.floor(i%60),2);return n+a+r+s}function J8(t,r){return t%60===0?(t>0?"-":"+")+qv(Math.abs(t)/60,2):pp(t,r)}function Qre(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),a=Math.floor(i/60),s=i%60;return s===0?n+String(a):n+String(a)+r+qv(s,2)}function e6(t){const r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+t-+r}const Yre=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,q5=36e5,t6=6e4,Zre=2,Fl={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Yre};function Lz(t,r={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const n=r.additionalDigits==null?Zre:Number(r.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const i=Xre(t),{year:a,restDateString:s}=Jre(i.date,n),o=ene(s,a);if(o===null||isNaN(o.getTime()))return new Date(NaN);if(o){const l=o.getTime();let u=0,d;if(i.time&&(u=tne(i.time),u===null||isNaN(u)))return new Date(NaN);if(i.timeZone||r.timeZone){if(d=HA(i.timeZone||r.timeZone,new Date(l+u)),isNaN(d))return new Date(NaN)}else d=e6(new Date(l+u)),d=e6(new Date(l+u+d));return new Date(l+u+d)}else return new Date(NaN)}function Xre(t){const r={};let n=Fl.dateTimePattern.exec(t),i;if(n?(r.date=n[1],i=n[3]):(n=Fl.datePattern.exec(t),n?(r.date=n[1],i=n[2]):(r.date=null,i=t)),i){const a=Fl.timeZone.exec(i);a?(r.time=i.replace(a[1],""),r.timeZone=a[1].trim()):r.time=i}return r}function Jre(t,r){if(t){const n=Fl.YYY[r],i=Fl.YYYYY[r];let a=Fl.YYYY.exec(t)||i.exec(t);if(a){const s=a[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(a=Fl.YY.exec(t)||n.exec(t),a){const s=a[1];return{year:parseInt(s,10)*100,restDateString:t.slice(s.length)}}}return{year:null}}function ene(t,r){if(r===null)return null;let n,i,a;if(!t||!t.length)return n=new Date(0),n.setUTCFullYear(r),n;let s=Fl.MM.exec(t);if(s)return n=new Date(0),i=parseInt(s[1],10)-1,n6(r,i)?(n.setUTCFullYear(r,i),n):new Date(NaN);if(s=Fl.DDD.exec(t),s){n=new Date(0);const o=parseInt(s[1],10);return ine(r,o)?(n.setUTCFullYear(r,0,o),n):new Date(NaN)}if(s=Fl.MMDD.exec(t),s){n=new Date(0),i=parseInt(s[1],10)-1;const o=parseInt(s[2],10);return n6(r,i,o)?(n.setUTCFullYear(r,i,o),n):new Date(NaN)}if(s=Fl.Www.exec(t),s)return a=parseInt(s[1],10)-1,i6(a)?r6(r,a):new Date(NaN);if(s=Fl.WwwD.exec(t),s){a=parseInt(s[1],10)-1;const o=parseInt(s[2],10)-1;return i6(a,o)?r6(r,a,o):new Date(NaN)}return null}function tne(t){let r,n,i=Fl.HH.exec(t);if(i)return r=parseFloat(i[1].replace(",",".")),U5(r)?r%24*q5:NaN;if(i=Fl.HHMM.exec(t),i)return r=parseInt(i[1],10),n=parseFloat(i[2].replace(",",".")),U5(r,n)?r%24*q5+n*t6:NaN;if(i=Fl.HHMMSS.exec(t),i){r=parseInt(i[1],10),n=parseInt(i[2],10);const a=parseFloat(i[3].replace(",","."));return U5(r,n,a)?r%24*q5+n*t6+a*1e3:NaN}return null}function r6(t,r,n){r=r||0,n=n||0;const i=new Date(0);i.setUTCFullYear(t,0,4);const a=i.getUTCDay()||7,s=r*7+n+1-a;return i.setUTCDate(i.getUTCDate()+s),i}const rne=[31,28,31,30,31,30,31,31,30,31,30,31],nne=[31,29,31,30,31,30,31,31,30,31,30,31];function zz(t){return t%400===0||t%4===0&&t%100!==0}function n6(t,r,n){if(r<0||r>11)return!1;if(n!=null){if(n<1)return!1;const i=zz(t);if(i&&n>nne[r]||!i&&n>rne[r])return!1}return!0}function ine(t,r){if(r<1)return!1;const n=zz(t);return!(n&&r>366||!n&&r>365)}function i6(t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function U5(t,r,n){return!(t<0||t>=25||r!=null&&(r<0||r>=60)||n!=null&&(n<0||n>=60))}const ane=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function sne(t,r,n={}){r=String(r);const i=r.match(ane);if(i){const a=Lz(n.originalDate||t,n);r=i.reduce(function(s,o){if(o[0]==="'")return s;const l=s.indexOf(o),u=s[l-1]==="'",d=s.replace(o,"'"+Kre[o[0]](a,o,n)+"'");return u?d.substring(0,l-1)+d.substring(l+1):d},r)}return Ze(t,r,n)}function a6(t,r,n){t=Lz(t,n);const i=HA(r,t,!0),a=new Date(t.getTime()-i),s=new Date(0);return s.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),s.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),s}function mh(){const{language:t,direction:r}=i2(),{currency:n}=qA(),{data:i}=Ve({queryKey:["localization-settings"],queryFn:async()=>{try{const{data:M}=await xe.get("/localization/settings");return M}catch{return{defaultLanguageCode:"en",defaultTimezone:"Asia/Riyadh",baseCurrencyCode:"SAR",enableMultiCurrencyDisplay:!0,enableUserLanguageOverride:!0,enableUserTimezoneOverride:!0,enableUserCurrencyOverride:!0,dateFormat:"yyyy-MM-dd",timeFormat:"HH:mm",numberFormat:"en-US"}}},staleTime:300*1e3}),{data:a}=Ve({queryKey:["user-preferences"],queryFn:async()=>{try{const{data:M}=await xe.get("/localization/user-preferences");return M}catch{return{preferredCurrencyCode:"SAR",preferredLanguageCode:"en",preferredTimezone:"Asia/Riyadh"}}},staleTime:300*1e3}),{data:s=[]}=Ve({queryKey:["exchange-rates-latest"],queryFn:async()=>{try{const{data:M}=await xe.get("/localization/exchange-rates/latest");return M}catch{return[]}},staleTime:300*1e3}),o=i?.enableUserTimezoneOverride?a?.preferredTimezone||i?.defaultTimezone||"Asia/Riyadh":i?.defaultTimezone||"Asia/Riyadh",l=n||i?.enableUserCurrencyOverride&&a?.preferredCurrencyCode||"SAR",u=i?.dateFormat||"yyyy-MM-dd",d=i?.timeFormat||"HH:mm",f=i?.numberFormat||"en-US",p=(M,Y,q)=>{if(M==null)return"-";const W=typeof M=="string"?parseFloat(M):M;if(isNaN(W))return"-";const J=Y||l,z=q?.decimals??2,G=q?.showCurrency??!0;let ne=W;if(J!=="SAR"&&i?.enableMultiCurrencyDisplay){const ie=s.find(me=>me.fromCurrency===J);ie&&ie.rate>0&&(ne=W/ie.rate)}const Z=new Intl.NumberFormat(f,{minimumFractionDigits:z,maximumFractionDigits:z}).format(ne);return G?`${J} ${Z}`:Z},x=(M,Y)=>{if(!M)return"-";try{const q=typeof M=="string"?G8(M):M,W=a6(q,o);if(Y?.format)return sne(W,Y.format,{timeZone:o});const J=Ze(W,u);if(Y?.includeTime!==!1){const z=Ze(W,d);return`${J} ${z}`}return J}catch{return String(M)}},v=M=>x(M,{includeTime:!1}),w=M=>{if(!M)return"-";try{const Y=typeof M=="string"?G8(M):M,q=a6(Y,o);return Ze(q,d)}catch{return String(M)}},C=(M,Y)=>{if(M==null)return"-";const q=typeof M=="string"?parseFloat(M):M;return isNaN(q)?"-":new Intl.NumberFormat(f,{minimumFractionDigits:Y?.decimals??0,maximumFractionDigits:Y?.decimals??2,useGrouping:Y?.useGrouping??!0}).format(q)},N=(M,Y=1)=>{if(M==null)return"-";const q=typeof M=="string"?parseFloat(M):M;return isNaN(q)?"-":new Intl.NumberFormat(f,{style:"percent",minimumFractionDigits:Y,maximumFractionDigits:Y}).format(q/100)},T=M=>M==="SAR"?1:s.find(q=>q.fromCurrency===M)?.rate||null;return{language:t,direction:r,timezone:o,displayCurrency:l,baseCurrency:"SAR",dateFormat:u,timeFormat:d,numberLocale:f,settings:i,userPrefs:a,exchangeRates:s,formatMoney:p,formatDateTime:x,formatDateOnly:v,formatTimeOnly:w,formatNumber:C,formatPercent:N,getExchangeRate:T,convertToSar:(M,Y)=>{if(Y==="SAR")return M;const q=T(Y);return q?M*q:null},convertFromSar:(M,Y)=>{if(Y==="SAR")return M;const q=T(Y);return q&&q>0?M/q:null}}}function VA(){const{data:t,isLoading:r}=Ve({queryKey:["branding"],queryFn:async()=>(await xe.get("/api/config/branding")).data,staleTime:36e5,gcTime:864e5});return{siteLogo:t?.siteLogo||null,siteName:t?.siteName||"RadioPharma",companyName:t?.companyName||"RadioPharma",companyNameAr:t?.companyNameAr||" ",isLoading:r}}const one=()=>typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",s6=t=>t==="system"?one():t,QC=t=>{document.documentElement.setAttribute("data-theme",t)},YC=dy()(FA((t,r)=>({theme:"light",resolvedTheme:"light",setTheme:n=>{const i=s6(n);QC(i),t({theme:n,resolvedTheme:i})}}),{name:"theme-storage",onRehydrateStorage:()=>t=>{if(t){const r=s6(t.theme);QC(r),t.resolvedTheme=r}}}));typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{if(YC.getState().theme==="system"){const n=t.matches?"dark":"light";QC(n),YC.setState({resolvedTheme:n})}});const lne=[{value:"light",label:"Light",icon:uz},{value:"dark",label:"Dark",icon:oz},{value:"system",label:"System",icon:LZ}];function Bz(){const{theme:t,resolvedTheme:r,setTheme:n}=YC(),[i,a]=k.useState(!1),s=k.useRef(null);k.useEffect(()=>{const l=u=>{s.current&&!s.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const o=r==="dark"?oz:uz;return e.jsxs("div",{ref:s,style:{position:"relative"},children:[e.jsx("button",{onClick:()=>a(!i),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",borderRadius:"var(--radius)",background:"transparent",border:"1px solid var(--border)",color:"var(--text-secondary)",cursor:"pointer",transition:"all 0.15s ease"},title:`Theme: ${t}`,children:e.jsx(o,{size:18})}),i&&e.jsx("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"var(--radius)",boxShadow:"var(--shadow-lg)",minWidth:"140px",zIndex:1e3,overflow:"hidden"},children:lne.map(l=>{const u=l.icon,d=t===l.value;return e.jsxs("button",{onClick:()=>{n(l.value),a(!1)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.625rem 1rem",border:"none",background:d?"var(--primary)":"transparent",color:d?"white":"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem",textAlign:"left",transition:"background 0.15s ease"},onMouseEnter:f=>{d||(f.currentTarget.style.background="var(--bg-secondary)")},onMouseLeave:f=>{d||(f.currentTarget.style.background="transparent")},children:[e.jsx(u,{size:16}),l.label]},l.value)})})]})}function $A(){const t=pr(),[r,n]=k.useState(0),[i,a]=k.useState(!1),[s,o]=k.useState(()=>sessionStorage.getItem("announcementBarHidden")==="true"),{data:l=[]}=Ve({queryKey:["active-announcements"],queryFn:async()=>{const{data:T}=await xe.get("/announcements/active");return T},refetchInterval:6e4});ot({mutationFn:async T=>xe.post(`/announcements/${T}/dismiss`),onSuccess:()=>{t.invalidateQueries({queryKey:["active-announcements"]})}});const u=ot({mutationFn:async T=>xe.post(`/announcements/${T}/read`),onSuccess:()=>{t.invalidateQueries({queryKey:["active-announcements"]})}}),d=[...l].sort((T,O)=>{const D={CRITICAL:0,WARNING:1,INFO:2},M=D[T.severity]-D[O.severity];return M!==0?M:new Date(O.createdAt).getTime()-new Date(T.createdAt).getTime()}),f=k.useCallback(()=>{d.length>1&&n(T=>(T+1)%d.length)},[d.length]),p=k.useCallback(()=>{d.length>1&&n(T=>(T-1+d.length)%d.length)},[d.length]);if(k.useEffect(()=>{if(d.length<=1||i)return;const T=setInterval(()=>{f()},1e4);return()=>clearInterval(T)},[d.length,i,f]),k.useEffect(()=>{r>=d.length&&d.length>0&&n(0)},[d.length,r]),d.length===0)return null;const x=d[r]||d[0];if(!x)return null;const v=T=>{switch(T){case"CRITICAL":return{background:"var(--danger)",color:"white"};case"WARNING":return{background:"var(--warning)",color:"white"};default:return{background:"var(--info)",color:"white"}}},w=T=>{switch(T){case"CRITICAL":return e.jsx(sn,{size:16});case"WARNING":return e.jsx($r,{size:16});default:return e.jsx(of,{size:16})}},C=()=>{x.isRead||u.mutate(x.id)},N=T=>{T.stopPropagation(),o(!0),sessionStorage.setItem("announcementBarHidden","true")};return s?null:e.jsxs("div",{style:{...v(x.severity),padding:"0.5rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",position:"relative",zIndex:100},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[d.length>1&&e.jsx("button",{onClick:p,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"4px",padding:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"inherit"},title:"Previous",children:e.jsx(Zp,{size:16})}),e.jsxs("div",{onClick:C,style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",flex:1,justifyContent:"center",maxWidth:"800px"},children:[w(x.severity),e.jsx("span",{style:{fontWeight:600},children:x.title}),e.jsx("span",{style:{opacity:.9,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.body.length>100?x.body.substring(0,100)+"...":x.body})]}),d.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:"0.75rem",opacity:.8},children:[r+1," / ",d.length]}),e.jsx("button",{onClick:f,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"4px",padding:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"inherit"},title:"Next",children:e.jsx(jo,{size:16})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(nr,{to:"/notifications?type=announcements",style:{fontSize:"0.75rem",color:"inherit",opacity:.9,textDecoration:"underline"},children:"View all"}),e.jsx("button",{onClick:N,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"4px",padding:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"inherit"},title:"Close announcement bar",children:e.jsx(kr,{size:16})})]})]})}const cne={order:qo,batch:sa,customer:Ts,material:Rr,shipment:dn,invoice:rd,user:cc,product:Rr},dne={order:"Order",batch:"Batch",customer:"Customer",material:"Material",shipment:"Shipment",invoice:"Invoice",user:"User",product:"Product"};function Fz(){const[t,r]=k.useState(!1),[n,i]=k.useState(""),[a,s]=k.useState(0),o=k.useRef(null),l=Qr(),{t:u}=BA(),{data:d=[],isLoading:f}=Ve({queryKey:["global-search",n],queryFn:async()=>{if(n.length<2)return[];try{const{data:w}=await xe.get(`/search/global?q=${encodeURIComponent(n)}`);return w.results||[]}catch{return p(n)}},enabled:n.length>=2,staleTime:1e3});function p(w){const C=[{id:"1",type:"order",title:"O-2024-001",subtitle:"Al Noor Hospital - FDG-18",path:"/orders/1"},{id:"2",type:"order",title:"O-2024-002",subtitle:"King Faisal Hospital - Ga-68",path:"/orders/2"},{id:"3",type:"batch",title:"B-2024-001",subtitle:"FDG-18 Production",path:"/batches/1"},{id:"4",type:"customer",title:"Al Noor Hospital",subtitle:"Riyadh, Saudi Arabia",path:"/customers/1"},{id:"5",type:"material",title:"FDG-18",subtitle:"Radiopharmaceutical",path:"/materials/1"},{id:"6",type:"shipment",title:"S-2024-001",subtitle:"En Route to Al Noor",path:"/shipments/1"},{id:"7",type:"invoice",title:"INV-2024-001",subtitle:"SAR 15,000",path:"/invoices/1"}],N=w.toLowerCase();return C.filter(T=>T.title.toLowerCase().includes(N)||T.subtitle?.toLowerCase().includes(N))}k.useEffect(()=>{const w=C=>{(C.metaKey||C.ctrlKey)&&C.key==="k"&&(C.preventDefault(),r(!0)),C.key==="Escape"&&r(!1)};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[]),k.useEffect(()=>{t&&o.current&&o.current.focus()},[t]),k.useEffect(()=>{s(0)},[d]);const x=w=>{w.key==="ArrowDown"?(w.preventDefault(),s(C=>Math.min(C+1,d.length-1))):w.key==="ArrowUp"?(w.preventDefault(),s(C=>Math.max(C-1,0))):w.key==="Enter"&&d[a]&&(l(d[a].path),r(!1),i(""))},v=w=>{l(w.path),r(!1),i("")};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>r(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text-muted)",fontSize:"0.875rem",minWidth:"280px"},children:[e.jsx(Gs,{size:16}),e.jsx("span",{children:"Search..."}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"2px",opacity:.6},children:[e.jsx(wY,{size:12}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"K"})]})]}),t&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"10vh"},onClick:()=>r(!1),children:e.jsxs("div",{style:{width:"100%",maxWidth:"600px",background:"var(--bg-primary)",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)",overflow:"hidden"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",borderBottom:"1px solid var(--border)"},children:[e.jsx(Gs,{size:20,style:{color:"var(--text-muted)"}}),e.jsx("input",{ref:o,type:"text",value:n,onChange:w=>i(w.target.value),onKeyDown:x,placeholder:"Search orders, batches, customers, materials...",style:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:"1rem",color:"var(--text-primary)"}}),n&&e.jsx("button",{onClick:()=>i(""),style:{background:"none",border:"none",padding:"0.25rem",cursor:"pointer",color:"var(--text-muted)"},children:e.jsx(kr,{size:16})})]}),e.jsx("div",{style:{maxHeight:"400px",overflow:"auto"},children:n.length<2?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(Gs,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),e.jsx("div",{children:"Type at least 2 characters to search"})]}):f?e.jsx("div",{style:{padding:"1.5rem",textAlign:"center",color:"var(--text-muted)"},children:"Searching..."}):d.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(Pr,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),e.jsxs("div",{children:['No results found for "',n,'"']})]}):d.map((w,C)=>{const N=cne[w.type]||Pr;return e.jsxs("div",{onClick:()=>v(w),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1rem",cursor:"pointer",background:C===a?"var(--bg-secondary)":"transparent",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(N,{size:18,style:{color:"var(--primary)"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,color:"var(--text-primary)"},children:w.title}),w.subtitle&&e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:w.subtitle})]}),e.jsx("span",{style:{fontSize:"0.6875rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:"var(--bg-secondary)",color:"var(--text-muted)",textTransform:"uppercase"},children:dne[w.type]})]},`${w.type}-${w.id}`)})}),e.jsxs("div",{style:{padding:"0.75rem 1rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("span",{children:" Navigate"}),e.jsx("span",{children:" Select"})]}),e.jsx("span",{children:"ESC Close"})]})]})})]})}const une={"":{labelKey:"nav.dashboard",fallback:"Dashboard"},orders:{labelKey:"nav.orders",fallback:"Orders"},customers:{labelKey:"nav.customers",fallback:"Customers"},products:{labelKey:"nav.products",fallback:"Products"},materials:{labelKey:"nav.materials",fallback:"Materials"},recipes:{labelKey:"nav.recipes",fallback:"Recipes"},suppliers:{labelKey:"nav.suppliers",fallback:"Suppliers"},"purchase-orders":{labelKey:"nav.purchaseOrders",fallback:"Purchase Orders"},warehouses:{labelKey:"nav.warehouses",fallback:"Warehouses"},grn:{labelKey:"nav.goodsReceiving",fallback:"Goods Receiving"},inventory:{labelKey:"nav.inventory",fallback:"Inventory"},manufacturing:{labelKey:"nav.manufacturing",fallback:"Manufacturing"},availability:{labelKey:"nav.availability",fallback:"Availability"},reservations:{labelKey:"nav.reservations",fallback:"Reservations"},planner:{labelKey:"nav.planner",fallback:"Planner"},"production-schedule":{labelKey:"nav.productionSchedule",fallback:"Production Schedule"},batches:{labelKey:"nav.batches",fallback:"Batches"},qc:{labelKey:"nav.qc",fallback:"Quality Control"},"oos-investigations":{labelKey:"nav.oosInvestigations",fallback:"OOS Investigations"},release:{labelKey:"nav.release",fallback:"QP Release"},dispensing:{labelKey:"nav.dispensing",fallback:"Dispensing"},shipments:{labelKey:"nav.shipments",fallback:"Shipments"},contracts:{labelKey:"nav.contracts",fallback:"Contracts"},invoices:{labelKey:"nav.invoices",fallback:"Invoices"},payments:{labelKey:"nav.payments",fallback:"Payments"},"enterprise-reports":{labelKey:"nav.reports",fallback:"Reports"},users:{labelKey:"nav.users",fallback:"Users"},roles:{labelKey:"nav.roles",fallback:"Roles"},settings:{labelKey:"nav.settings",fallback:"Settings"},audit:{labelKey:"nav.auditLog",fallback:"Audit Log"},approvals:{labelKey:"nav.approvals",fallback:"Approvals"},new:{labelKey:"common.new",fallback:"New"},edit:{labelKey:"common.edit",fallback:"Edit"},details:{labelKey:"common.details",fallback:"Details"}};function hne(){const t=cd(),{t:r}=BA(),n=t.pathname.split("/").filter(Boolean);if(n.length===0)return null;const i=[{label:r("nav.dashboard"),labelKey:"nav.dashboard",path:"/"}];let a="";return n.forEach((s,o)=>{a+=`/${s}`;const l=/^[0-9a-f-]{36}$/i.test(s),u=/^\d+$/.test(s);if(l||u)i.push({label:`#${s.slice(0,8)}...`,path:o===n.length-1?void 0:a});else{const d=une[s],f=d?r(d.labelKey,d.fallback):s.charAt(0).toUpperCase()+s.slice(1);i.push({label:f,labelKey:d?.labelKey,path:o===n.length-1?void 0:a})}}),i.length<=1?null:e.jsx("nav",{"aria-label":"Breadcrumb",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 0",fontSize:"0.875rem"},children:i.map((s,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o>0&&e.jsx(jo,{size:14,style:{color:"var(--text-muted)"}}),s.path?e.jsxs(nr,{to:s.path,style:{color:"var(--text-muted)",textDecoration:"none",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o===0&&e.jsx(iz,{size:14}),e.jsx("span",{children:s.label})]}):e.jsx("span",{style:{color:"var(--text-primary)",fontWeight:500},children:s.label})]},o))})}const ZC=[{id:"orders",label:"Orders & Customers",icon:qo,items:[{path:"/orders",labelKey:"nav.orders",icon:qo},{path:"/customers",labelKey:"nav.customers",icon:Ts},{path:"/contracts",labelKey:"nav.contracts",icon:tz},{path:"/availability",labelKey:"nav.availability",icon:WQ},{path:"/reservations",labelKey:"nav.reservations",icon:LC}]},{id:"production",label:"Production",icon:lu,items:[{path:"/planner",labelKey:"nav.planner",icon:$n},{path:"/production-schedule",labelKey:"nav.productionSchedule",icon:e2},{path:"/batches",labelKey:"nav.batches",icon:sa},{path:"/manufacturing",labelKey:"nav.manufacturing",icon:lu},{path:"/dispensing",labelKey:"nav.dispensing",icon:Bf}]},{id:"quality",label:"Quality",icon:af,items:[{path:"/qc",labelKey:"nav.qc",icon:af},{path:"/oos-investigations",labelKey:"nav.oosInvestigations",icon:$r},{path:"/release",labelKey:"nav.release",icon:Ut}]},{id:"logistics",label:"Logistics",icon:dn,items:[{path:"/shipments",labelKey:"nav.shipments",icon:dn}]},{id:"inventory",label:"Inventory & Supply",icon:lm,items:[{path:"/products",labelKey:"nav.products",icon:Rr},{path:"/materials",labelKey:"nav.materials",icon:sa},{path:"/recipes",labelKey:"nav.recipes",icon:Pr},{path:"/suppliers",labelKey:"nav.suppliers",icon:Ts},{path:"/purchase-orders",labelKey:"nav.purchaseOrders",icon:qo},{path:"/warehouses",labelKey:"nav.warehouses",icon:lm},{path:"/grn",labelKey:"nav.goodsReceiving",icon:WZ},{path:"/inventory",labelKey:"nav.inventory",icon:YL}]},{id:"finance",label:"Finance",icon:Ul,items:[{path:"/invoices",labelKey:"nav.invoices",icon:rd},{path:"/payments",labelKey:"nav.payments",icon:Ul}]},{id:"admin",label:"Administration",icon:lf,items:[{path:"/approvals",labelKey:"nav.approvals",icon:gu},{path:"/admin/helpdesk",labelKey:"Support Tickets",icon:Sm},{path:"/users",labelKey:"nav.users",icon:cc},{path:"/roles",labelKey:"nav.roles",icon:ia},{path:"/enterprise-reports",labelKey:"Enterprise Reports",icon:Pr},{path:"/settings",labelKey:"nav.settings",icon:lf},{path:"/audit",labelKey:"nav.auditLog",icon:Pr}]}],o6=[{path:"/",labelKey:"nav.dashboard",icon:LA},...ZC.flatMap(t=>t.items)],fne={"Asia/Riyadh":"AST","Asia/Dubai":"GST","Asia/Kuwait":"AST","Asia/Bahrain":"AST","Asia/Qatar":"AST","Europe/London":"GMT","Europe/Paris":"CET","America/New_York":"EST","America/Los_Angeles":"PST",UTC:"UTC"},mne={en:"EN",ar:"AR",fr:"FR",es:"ES"};function pne({children:t}){const[r,n]=k.useState(window.innerWidth>768),[i,a]=k.useState(!1),[s,o]=k.useState(!1),[l,u]=k.useState(!1),[d,f]=k.useState(!1),[p,x]=k.useState(new Date),[v,w]=k.useState(window.innerWidth<=768),C=()=>{const at=localStorage.getItem("radiopharma-expanded-sections");if(at)try{return JSON.parse(at)}catch{return["orders","production"]}return["orders","production"]},[N,T]=k.useState(C),O=k.useRef(null),D=k.useRef(null),M=k.useRef(null),Y=cd(),{favorites:q,toggleFavorite:W}=ete();k.useEffect(()=>{const at=()=>{const Wt=window.innerWidth<=768;w(Wt),Wt||a(!1)};return window.addEventListener("resize",at),()=>window.removeEventListener("resize",at)},[]),k.useEffect(()=>{v&&a(!1)},[Y.pathname]);const J=Qr(),z=pr(),{user:G,logout:ne}=Il(),{t:Z}=BA(),{language:ie,setLanguage:me}=i2(),{currency:ce,setCurrency:Q}=qA(),de=ie==="ar",{formatTimeOnly:le,formatDateOnly:ye,formatDateTime:Se,exchangeRates:$}=mh(),{siteLogo:X,siteName:se}=VA(),{data:H}=Ve({queryKey:["system-settings"],queryFn:async()=>{const{data:at}=await xe.get("/settings/system");return at},staleTime:300*1e3});k.useEffect(()=>{const at=setInterval(()=>{x(new Date)},6e4);return()=>clearInterval(at)},[]);const oe=()=>le(p),ge=()=>ye(p),be=H?.timezone?fne[H.timezone]||H.timezone.split("/").pop():"AST";mne[H?.language||"en"],H?.currency?.code||H?.currencyCode;const{data:Le}=Ve({queryKey:["notifications"],queryFn:async()=>{const{data:at}=await xe.get("/notifications?limit=10");return at},refetchInterval:3e4}),ke=ot({mutationFn:async at=>{await xe.patch(`/notifications/${at}/read`)},onSuccess:()=>{z.invalidateQueries({queryKey:["notifications"]})}}),He=ot({mutationFn:async()=>{await xe.patch("/notifications/read-all")},onSuccess:()=>{z.invalidateQueries({queryKey:["notifications"]})}});k.useEffect(()=>{const at=Wt=>{O.current&&!O.current.contains(Wt.target)&&o(!1),D.current&&!D.current.contains(Wt.target)&&u(!1),M.current&&!M.current.contains(Wt.target)&&f(!1)};return document.addEventListener("mousedown",at),()=>document.removeEventListener("mousedown",at)},[]);const Je=async()=>{await ne(),J("/login")},Qe=at=>{T(Wt=>{const Bt=Wt.includes(at)?Wt.filter(yt=>yt!==at):[...Wt,at];return localStorage.setItem("radiopharma-expanded-sections",JSON.stringify(Bt)),Bt})};k.useEffect(()=>{const at=ZC.find(Wt=>Wt.items.some(Bt=>Y.pathname===Bt.path||Y.pathname.startsWith(Bt.path+"/")));at&&!N.includes(at.id)&&T(Wt=>{const Bt=[...Wt,at.id];return localStorage.setItem("radiopharma-expanded-sections",JSON.stringify(Bt)),Bt})},[Y.pathname]);const vt=Le?.unreadCount||0,Pt=Le?.notifications||[],Oe=v||r?"16rem":"4rem";return e.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[v&&i&&e.jsx("div",{onClick:()=>a(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:35}}),e.jsxs("aside",{style:{width:Oe,background:"linear-gradient(180deg, #1e3a5f 0%, #0f172a 100%)",color:"white",transition:"all 0.2s ease",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:40,left:de?"auto":0,right:de?0:"auto",transform:v&&!i?de?"translateX(100%)":"translateX(-100%)":"translateX(0)"},children:[e.jsxs("div",{style:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[X?e.jsx("img",{src:X,alt:se,style:{width:"36px",height:"36px",objectFit:"contain",borderRadius:"6px"}}):null,e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.125rem",fontWeight:700},children:se}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:"OMS"})]})]}),v?e.jsx("button",{onClick:()=>a(!1),style:{background:"none",border:"none",color:"white",padding:"0.5rem"},children:e.jsx(kr,{size:20})}):e.jsx("button",{onClick:()=>n(!r),style:{background:"none",border:"none",color:"white",padding:"0.5rem"},children:r?e.jsx(kr,{size:20}):e.jsx(BC,{size:20})})]}),e.jsxs("nav",{style:{flex:1,padding:"0.5rem",overflowY:"auto"},children:[e.jsxs(nr,{to:"/",onClick:()=>v&&a(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",textDecoration:"none",color:Y.pathname==="/"?"white":"rgba(255,255,255,0.7)",background:Y.pathname==="/"?"rgba(255,255,255,0.1)":"transparent",marginBottom:"0.25rem"},children:[e.jsx(LA,{size:20}),(v||r)&&e.jsx("span",{style:{fontSize:"0.875rem"},children:Z("nav.dashboard")})]}),q.length>0&&(v||r)&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.6875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"rgba(255,255,255,0.5)",padding:"0.5rem 0.75rem 0.25rem",display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(y8,{size:12}),"Favorites"]}),q.map(at=>{const Wt=o6.find(rr=>rr.path===at);if(!Wt)return null;const Bt=Wt.icon,yt=Y.pathname===Wt.path;return e.jsxs(nr,{to:Wt.path,onClick:()=>v&&a(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0.75rem",borderRadius:"8px",textDecoration:"none",color:yt?"white":"rgba(255,255,255,0.7)",background:yt?"rgba(255,255,255,0.1)":"transparent",marginBottom:"0.125rem",fontSize:"0.8125rem"},children:[e.jsx(Bt,{size:16}),e.jsx("span",{children:Z(Wt.labelKey)})]},`fav-${Wt.path}`)})]}),ZC.map(at=>{const Wt=at.icon,Bt=N.includes(at.id),yt=at.items.some(rr=>Y.pathname===rr.path||Y.pathname.startsWith(rr.path+"/"));return e.jsxs("div",{style:{marginBottom:"0.25rem"},children:[e.jsxs("button",{onClick:()=>Qe(at.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",background:yt&&!Bt?"rgba(255,255,255,0.05)":"transparent",border:"none",color:yt?"white":"rgba(255,255,255,0.7)",cursor:"pointer",textAlign:"left"},children:[e.jsx(Wt,{size:20}),(v||r)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,fontSize:"0.875rem",fontWeight:yt?500:400},children:at.label}),Bt?e.jsx(bo,{size:16}):e.jsx(jo,{size:16})]})]}),Bt&&(v||r)&&e.jsx("div",{style:{paddingLeft:"1rem",marginTop:"0.125rem"},children:at.items.map(rr=>{const St=rr.icon,xr=Y.pathname===rr.path||Y.pathname.startsWith(rr.path+"/"),hr=q.includes(rr.path);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsxs(nr,{to:rr.path,onClick:()=>v&&a(!1),style:{flex:1,display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.5rem 0.75rem",borderRadius:"6px",textDecoration:"none",color:xr?"white":"rgba(255,255,255,0.65)",background:xr?"rgba(255,255,255,0.1)":"transparent",marginBottom:"0.125rem",fontSize:"0.8125rem"},children:[e.jsx(St,{size:16}),e.jsx("span",{children:Z(rr.labelKey)})]}),e.jsx("button",{onClick:zr=>{zr.stopPropagation(),W(rr.path)},style:{background:"none",border:"none",padding:"0.375rem",cursor:"pointer",color:hr?"#fbbf24":"rgba(255,255,255,0.3)",opacity:hr?1:.5},title:hr?"Remove from favorites":"Add to favorites",children:hr?e.jsx(y8,{size:14,fill:"#fbbf24"}):e.jsx(yX,{size:14})})]},rr.path)})})]},at.id)})]}),e.jsx("div",{style:{padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("button",{onClick:Je,style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:[e.jsx(zA,{size:20}),(v||r)&&e.jsx("span",{style:{fontSize:"0.875rem"},children:"Logout"})]})})]}),e.jsxs("div",{style:{flex:1,marginLeft:v||de?0:r?"16rem":"4rem",marginRight:v?0:de?r?"16rem":"4rem":0,transition:"margin 0.2s ease"},children:[e.jsxs("header",{style:{background:"var(--bg-primary)",borderBottom:"1px solid var(--border)",padding:v?"0.75rem 1rem":"0.75rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:30,gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v&&e.jsx("button",{onClick:()=>a(!0),style:{background:"none",border:"none",padding:"0.5rem",cursor:"pointer",color:"var(--text-primary)"},children:e.jsx(BC,{size:24})}),e.jsx("h2",{style:{fontSize:v?"1rem":"1.125rem",fontWeight:600,margin:0},children:v?"RadioPharma":Z(o6.find(at=>at.path===Y.pathname)?.labelKey||"RadioPharma OMS")})]}),!v&&e.jsx(Fz,{}),!v&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"var(--bg-secondary)",borderRadius:"8px",padding:"0.375rem 0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",borderRight:"1px solid var(--border)"},children:[e.jsx($n,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:ge()})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",borderRight:"1px solid var(--border)"},children:[e.jsx(Qt,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:oe()}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:be})]}),e.jsxs("div",{ref:D,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>u(!l),style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",borderRight:"1px solid var(--border)",background:l?"var(--bg-secondary)":"none",border:"none",cursor:"pointer",borderRadius:"4px"},children:[e.jsx(py,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:ie==="ar"?"AR":"EN"})]}),l&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"var(--shadow-lg)",minWidth:"140px",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>{me("en"),u(!1)},style:{width:"100%",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:ie==="en"?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},children:[e.jsx("span",{style:{fontWeight:ie==="en"?600:400},children:"English"}),ie==="en"&&e.jsx(Ai,{size:14,style:{marginLeft:"auto",color:"var(--primary)"}})]}),e.jsxs("button",{onClick:()=>{me("ar"),u(!1)},style:{width:"100%",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:ie==="ar"?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem",textAlign:"left",fontFamily:"'Cairo', sans-serif"},children:[e.jsx("span",{style:{fontWeight:ie==="ar"?600:400},children:""}),ie==="ar"&&e.jsx(Ai,{size:14,style:{marginLeft:"auto",color:"var(--primary)"}})]})]})]}),e.jsxs("div",{ref:M,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>f(!d),style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",background:d?"var(--bg-secondary)":"none",border:"none",cursor:"pointer",borderRadius:"4px"},children:[e.jsx(sf,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:ce}),e.jsx(bo,{size:12,style:{color:"var(--text-muted)"}})]}),d&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"var(--shadow-lg)",minWidth:"120px",zIndex:1e3,overflow:"hidden",maxHeight:"240px",overflowY:"auto"},children:[e.jsxs("button",{onClick:()=>{Q("SAR"),f(!1)},style:{width:"100%",padding:"0.625rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",background:ce==="SAR"?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("span",{style:{fontWeight:ce==="SAR"?600:400},children:"SAR"}),ce==="SAR"&&e.jsx(Ai,{size:14,style:{color:"var(--primary)"}})]}),$.filter(at=>at.fromCurrency!=="SAR").map(at=>e.jsxs("button",{onClick:()=>{Q(at.fromCurrency),f(!1)},style:{width:"100%",padding:"0.625rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",background:ce===at.fromCurrency?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("span",{style:{fontWeight:ce===at.fromCurrency?600:400},children:at.fromCurrency}),ce===at.fromCurrency&&e.jsx(Ai,{size:14,style:{color:"var(--primary)"}})]},at.fromCurrency))]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Bz,{}),e.jsxs("div",{ref:O,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>o(!s),style:{background:s?"var(--bg-secondary)":"none",border:"none",padding:"0.5rem",borderRadius:"8px",cursor:"pointer",position:"relative"},children:[e.jsx(xo,{size:20}),vt>0&&e.jsx("span",{style:{position:"absolute",top:"2px",right:"2px",width:"18px",height:"18px",borderRadius:"50%",background:"#ef4444",color:"white",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center"},children:vt>9?"9+":vt})]}),s&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",width:"360px",maxHeight:"480px",background:"var(--bg-primary)",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid var(--border)",overflow:"hidden",zIndex:100},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0,fontWeight:600},children:"Notifications"}),vt>0&&e.jsxs("button",{onClick:()=>He.mutate(),style:{background:"none",border:"none",color:"var(--primary)",fontSize:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ai,{size:12}),"Mark all read"]})]}),e.jsx("div",{style:{maxHeight:"360px",overflow:"auto"},children:Pt.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(xo,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),e.jsx("div",{children:"No notifications"})]}):Pt.slice(0,5).map(at=>e.jsx("div",{onClick:()=>{at.isRead||ke.mutate(at.id)},style:{padding:"0.875rem 1rem",borderBottom:"1px solid var(--border)",background:at.isRead?"transparent":"rgba(59, 130, 246, 0.05)",cursor:at.isRead?"default":"pointer"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[!at.isRead&&e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--primary)",marginTop:"6px",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:at.isRead?400:600,fontSize:"0.875rem",marginBottom:"0.25rem"},children:at.title}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",lineHeight:1.4,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:at.message}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.375rem"},children:Se(at.createdAt)})]})]})},at.id))}),e.jsx("div",{style:{padding:"0.75rem 1rem",borderTop:"1px solid var(--border)",textAlign:"center"},children:e.jsx(nr,{to:"/notifications",onClick:()=>o(!1),style:{color:"var(--primary)",fontSize:"0.875rem",fontWeight:500,textDecoration:"none"},children:"View All Notifications"})})]})]}),e.jsxs("div",{onClick:()=>{const at=G?.role==="Admin"||G?.role==="ADMIN"||G?.role?.toLowerCase()==="admin";J(at?"/settings":"/profile")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)",borderRadius:"9999px",cursor:"pointer",transition:"background 0.15s ease"},onMouseEnter:at=>at.currentTarget.style.background="var(--border)",onMouseLeave:at=>at.currentTarget.style.background="var(--bg-secondary)",title:G?.role==="Admin"||G?.role==="ADMIN"?"Go to Settings":"Go to Profile",children:[e.jsxs("div",{style:{width:"2rem",height:"2rem",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"0.875rem"},children:[G?.firstName?.[0],G?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500},children:[G?.firstName," ",G?.lastName]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:G?.role})]})]})]})]}),e.jsx($A,{}),e.jsxs("main",{style:{padding:"1.5rem"},children:[e.jsx(hne,{}),t]})]})]})}function qz({showSearch:t=!0,notificationCenterPath:r="/notifications",accentColor:n="var(--primary)"}){const i=Qr(),a=pr(),{language:s,setLanguage:o}=i2(),{currency:l,setCurrency:u}=qA(),{exchangeRates:d}=mh(),[f,p]=k.useState(new Date),[x,v]=k.useState(!1),[w,C]=k.useState(!1),[N,T]=k.useState(!1),O=k.useRef(null),D=k.useRef(null),M=k.useRef(null);k.useEffect(()=>{const ie=setInterval(()=>p(new Date),6e4);return()=>clearInterval(ie)},[]),k.useEffect(()=>{const ie=me=>{O.current&&!O.current.contains(me.target)&&v(!1),D.current&&!D.current.contains(me.target)&&C(!1),M.current&&!M.current.contains(me.target)&&T(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]);const{data:Y}=Ve({queryKey:["notifications","unread"],queryFn:async()=>(await xe.get("/api/notifications?limit=5&unreadOnly=true")).data,refetchInterval:3e4}),q=ot({mutationFn:ie=>xe.patch(`/api/notifications/${ie}/read`),onSuccess:()=>a.invalidateQueries({queryKey:["notifications"]})}),W="AST",J=()=>f.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2"),z=()=>f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),G=Y?.unreadCount||0,ne=Y?.notifications||[],Z=ie=>{if(ie.isRead||q.mutate(ie.id),ie.relatedType&&ie.relatedId){const me={ORDER:`/orders/${ie.relatedId}`,BATCH:`/batches/${ie.relatedId}`,SHIPMENT:`/shipments/${ie.relatedId}`,INVOICE:`/invoices/${ie.relatedId}`};me[ie.relatedType]&&i(me[ie.relatedType])}T(!1)};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1,justifyContent:"flex-end"},children:[t&&e.jsx(Fz,{}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"var(--bg-secondary)",borderRadius:"8px",padding:"0.375rem 0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",borderRight:"1px solid var(--border)"},children:[e.jsx($n,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:J()})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",borderRight:"1px solid var(--border)"},children:[e.jsx(Qt,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:z()}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:W})]}),e.jsxs("div",{ref:O,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>v(!x),style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",borderRight:"1px solid var(--border)",background:x?"var(--bg-secondary)":"none",border:"none",cursor:"pointer",borderRadius:"4px"},children:[e.jsx(py,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:s==="ar"?"AR":"EN"})]}),x&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"var(--shadow-lg)",minWidth:"140px",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>{o("en"),v(!1)},style:{width:"100%",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:s==="en"?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},children:[e.jsx("span",{style:{fontWeight:s==="en"?600:400},children:"English"}),s==="en"&&e.jsx(Ai,{size:14,style:{marginLeft:"auto",color:n}})]}),e.jsxs("button",{onClick:()=>{o("ar"),v(!1)},style:{width:"100%",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:s==="ar"?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem",textAlign:"left",fontFamily:"'Cairo', sans-serif"},children:[e.jsx("span",{style:{fontWeight:s==="ar"?600:400},children:""}),s==="ar"&&e.jsx(Ai,{size:14,style:{marginLeft:"auto",color:n}})]})]})]}),e.jsxs("div",{ref:D,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>C(!w),style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",background:w?"var(--bg-secondary)":"none",border:"none",cursor:"pointer",borderRadius:"4px"},children:[e.jsx(sf,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:l}),e.jsx(bo,{size:12,style:{color:"var(--text-muted)"}})]}),w&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"var(--shadow-lg)",minWidth:"120px",zIndex:1e3,overflow:"hidden",maxHeight:"240px",overflowY:"auto"},children:[e.jsxs("button",{onClick:()=>{u("SAR"),C(!1)},style:{width:"100%",padding:"0.625rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",background:l==="SAR"?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("span",{style:{fontWeight:l==="SAR"?600:400},children:"SAR"}),l==="SAR"&&e.jsx(Ai,{size:14,style:{color:n}})]}),d.filter(ie=>ie.fromCurrency!=="SAR").map(ie=>e.jsxs("button",{onClick:()=>{u(ie.fromCurrency),C(!1)},style:{width:"100%",padding:"0.625rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",background:l===ie.fromCurrency?"var(--bg-secondary)":"var(--bg-primary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("span",{style:{fontWeight:l===ie.fromCurrency?600:400},children:ie.fromCurrency}),l===ie.fromCurrency&&e.jsx(Ai,{size:14,style:{color:n}})]},ie.fromCurrency))]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Bz,{}),e.jsxs("div",{ref:M,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>T(!N),style:{background:N?"var(--bg-secondary)":"none",border:"none",padding:"0.5rem",borderRadius:"8px",cursor:"pointer",position:"relative"},children:[e.jsx(xo,{size:20}),G>0&&e.jsx("span",{style:{position:"absolute",top:"2px",right:"2px",width:"18px",height:"18px",borderRadius:"50%",background:"#ef4444",color:"white",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center"},children:G>9?"9+":G})]}),N&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",width:"360px",maxHeight:"480px",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"12px",boxShadow:"var(--shadow-lg)",overflow:"hidden",zIndex:1e3},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h3",{style:{fontSize:"0.9375rem",fontWeight:600,margin:0},children:"Notifications"}),G>0&&e.jsxs("span",{style:{background:"#fef2f2",color:"#ef4444",padding:"0.25rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:500},children:[G," new"]})]}),e.jsx("div",{style:{maxHeight:"320px",overflowY:"auto"},children:ne.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(xo,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No new notifications"})]}):ne.map(ie=>e.jsxs("button",{onClick:()=>Z(ie),style:{width:"100%",padding:"0.875rem 1rem",display:"flex",gap:"0.75rem",alignItems:"flex-start",border:"none",background:ie.isRead?"var(--bg-primary)":"var(--bg-secondary)",cursor:"pointer",textAlign:"left",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:ie.isRead?"transparent":n,marginTop:"6px",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:ie.isRead?400:600,marginBottom:"0.25rem"},children:ie.title}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ie.message}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:new Date(ie.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]})]},ie.id))}),e.jsx(nr,{to:r,onClick:()=>T(!1),style:{display:"block",padding:"0.875rem",textAlign:"center",borderTop:"1px solid var(--border)",color:n,textDecoration:"none",fontSize:"0.875rem",fontWeight:500},children:"View all notifications"})]})]})]})]})}const l6=[{path:"/portal",label:"Dashboard",icon:LA},{path:"/portal/book-capacity",label:"Book Capacity",icon:$n},{path:"/portal/orders",label:"My Orders",icon:qo},{path:"/portal/orders/new",label:"Place Order",icon:cn},{path:"/portal/invoices",label:"Invoices",icon:rd},{path:"/portal/helpdesk",label:"Support",icon:Sm},{path:"/portal/profile",label:"My Profile",icon:Ts}];function gne({children:t}){const[r,n]=k.useState(!0),i=cd(),a=Qr(),{user:s,logout:o}=Il(),{language:l}=i2(),{siteLogo:u,siteName:d}=VA(),f=l==="ar",p=async()=>{await o(),a("/login")};return e.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[e.jsxs("aside",{style:{width:r?"16rem":"4rem",background:"linear-gradient(180deg, #0d9488 0%, #115e59 100%)",color:"white",transition:"width 0.2s ease",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:40,left:f?"auto":0,right:f?0:"auto"},children:[e.jsxs("div",{style:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[r&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u?e.jsx("img",{src:u,alt:d,style:{width:"32px",height:"32px",objectFit:"contain",borderRadius:"6px"}}):null,e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.125rem",fontWeight:700},children:d}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:"Client Portal"})]})]}),e.jsx("button",{onClick:()=>n(!r),style:{background:"none",border:"none",color:"white",padding:"0.5rem",cursor:"pointer"},children:r?e.jsx(kr,{size:20}):e.jsx(BC,{size:20})})]}),e.jsx("nav",{style:{flex:1,padding:"0.5rem",overflowY:"auto"},children:l6.map(x=>{const v=x.icon,w=i.pathname===x.path;return e.jsxs(nr,{to:x.path,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",textDecoration:"none",color:w?"white":"rgba(255,255,255,0.7)",background:w?"rgba(255,255,255,0.15)":"transparent",marginBottom:"0.25rem",transition:"all 0.15s ease"},children:[e.jsx(v,{size:20}),r&&e.jsx("span",{style:{fontSize:"0.875rem"},children:x.label})]},x.path)})}),e.jsx("div",{style:{padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("button",{onClick:p,style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:[e.jsx(zA,{size:20}),r&&e.jsx("span",{style:{fontSize:"0.875rem"},children:"Logout"})]})})]}),e.jsxs("div",{style:{flex:1,marginLeft:f?0:r?"16rem":"4rem",marginRight:f?r?"16rem":"4rem":0,transition:"margin 0.2s ease"},children:[e.jsxs("header",{style:{background:"var(--bg-primary)",borderBottom:"1px solid var(--border)",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:30,gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[s?.customerLogoUrl?e.jsx("img",{src:s.customerLogoUrl,alt:s.customerName||"Customer",style:{width:"40px",height:"40px",objectFit:"contain",borderRadius:"8px",border:"1px solid var(--border)"}}):e.jsx(Ts,{size:20,style:{color:"#0d9488"}}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,margin:0},children:l6.find(x=>x.path===i.pathname)?.label||"Client Portal"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:s?.customerName||"Customer Portal"})]})]}),e.jsx(qz,{showSearch:!0,notificationCenterPath:"/portal/notifications",accentColor:"#0d9488"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)",borderRadius:"9999px"},children:[e.jsxs("div",{style:{width:"2rem",height:"2rem",borderRadius:"50%",background:"#0d9488",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"0.875rem"},children:[s?.firstName?.[0],s?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500},children:[s?.firstName," ",s?.lastName]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Customer"})]})]})]}),e.jsx($A,{}),e.jsx("main",{style:{padding:"1.5rem",background:"#f8fafc",minHeight:"calc(100vh - 73px)"},children:t})]})]})}function yne({children:t}){const r=cd(),n=Qr(),{user:i,logout:a}=Il(),{siteLogo:s,siteName:o}=VA(),l=()=>{a(),n("/login")},u=[{path:"/driver",icon:iz,label:"Dashboard"},{path:"/driver/shipments",icon:dn,label:"Shipments"}];return e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("header",{style:{backgroundColor:"var(--bg-primary)",borderBottom:"1px solid var(--border)",padding:"0.75rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:100},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[s?e.jsx("img",{src:s,alt:o,style:{width:"36px",height:"36px",objectFit:"contain",borderRadius:"8px"}}):e.jsx("div",{style:{width:"36px",height:"36px",backgroundColor:"var(--primary)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(dn,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Driver Portal"}),e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:[o," OMS"]})]})]}),e.jsx("nav",{style:{display:"flex",gap:"0.5rem"},children:u.map(d=>{const f=d.icon,p=r.pathname===d.path||d.path!=="/driver"&&r.pathname.startsWith(d.path);return e.jsxs(nr,{to:d.path,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"var(--radius)",backgroundColor:p?"var(--primary-light)":"transparent",color:p?"var(--primary)":"var(--text-primary)",textDecoration:"none",fontWeight:p?600:400,fontSize:"0.875rem"},children:[e.jsx(f,{size:16}),d.label]},d.path)})})]}),e.jsx(qz,{showSearch:!1,notificationCenterPath:"/driver/notifications",accentColor:"var(--primary)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)"},children:e.jsx(Uo,{size:16})}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[i?.firstName," ",i?.lastName]})]}),e.jsxs("button",{onClick:l,className:"btn btn-secondary btn-sm",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(zA,{size:14}),"Logout"]})]})]}),e.jsx($A,{}),e.jsx("main",{style:{padding:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:t})]})}function xne(){const[t,r]=k.useState("admin@radiopharma.com"),[n,i]=k.useState("admin123"),[a,s]=k.useState(""),[o,l]=k.useState(!1),u=Qr(),{login:d}=Il(),f=async p=>{p.preventDefault(),s(""),l(!0);try{await d(t,n),u("/")}catch(x){const v=x.response?.data?.error;v==="Invalid credentials"?s("The email or password you entered is incorrect. Please try again."):x.response?.status===401?s("Invalid email or password. Please check your credentials and try again."):x.response?.status===403?s("Your account has been disabled. Please contact support."):x.response?s(v||"Login failed. Please try again later."):s("Unable to connect to the server. Please check your internet connection.")}finally{l(!1)}};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%)",padding:"1rem"},children:e.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"100%",maxWidth:"24rem",padding:"2rem"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:e.jsx(ou,{size:32,color:"white"})}),e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:"RadioPharma OMS"}),e.jsx("p",{style:{color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Order Management System"})]}),a&&e.jsxs("div",{"data-testid":"error-message",style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b",borderRadius:"8px",marginBottom:"1.25rem",fontSize:"0.875rem",lineHeight:"1.5"},children:[e.jsx(sn,{size:20,style:{flexShrink:0,marginTop:"1px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Login Failed"}),e.jsx("div",{style:{color:"#b91c1c"},children:a})]})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-input","data-testid":"email-input",value:t,onChange:p=>r(p.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-input","data-testid":"password-input",value:n,onChange:p=>i(p.target.value),required:!0})]}),e.jsx("button",{type:"submit",disabled:o,className:"btn btn-primary","data-testid":"login-button",style:{width:"100%",marginTop:"1rem",padding:"0.75rem"},children:o?"Signing in...":"Sign In"})]}),e.jsx("p",{style:{textAlign:"center",marginTop:"1.5rem",fontSize:"0.75rem",color:"#94a3b8"},children:"Demo: admin@radiopharma.com / admin123"})]})})}const vne={default:{bg:"var(--bg-secondary)",text:"var(--text-primary)",accent:"var(--text-muted)"},primary:{bg:"#eff6ff",text:"#1d4ed8",accent:"#3b82f6"},success:{bg:"#f0fdf4",text:"#166534",accent:"#22c55e"},warning:{bg:"#fffbeb",text:"#92400e",accent:"#f59e0b"},danger:{bg:"#fef2f2",text:"#991b1b",accent:"#ef4444"},info:{bg:"#f0f9ff",text:"#0369a1",accent:"#0ea5e9"}};function st({title:t,value:r,subtext:n,icon:i,trend:a,trendValue:s,color:o="default",onClick:l,loading:u=!1,active:d=!1,selected:f=!1,linkTo:p}){const x=Qr(),v=vne[o],w=l||p,C=d||f,N=()=>{l?l():p&&x(p)};return e.jsxs("div",{className:"card",style:{backgroundColor:v.bg,cursor:w?"pointer":"default",transition:"transform 0.2s, box-shadow 0.2s",minWidth:"180px",minHeight:"100px",padding:"1.25rem 1.5rem",border:C?`2px solid ${v.accent}`:"1px solid var(--border)",boxShadow:C?`0 0 0 3px ${v.accent}20`:"0 1px 3px rgba(0,0,0,0.05)",borderRadius:"12px"},onClick:N,onMouseEnter:T=>w&&(T.currentTarget.style.transform="translateY(-2px)"),onMouseLeave:T=>w&&(T.currentTarget.style.transform="translateY(0)"),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",height:"100%"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",fontWeight:500,marginBottom:"0.75rem"},children:t}),u?e.jsx("div",{className:"skeleton",style:{width:"60px",height:"2.5rem",borderRadius:"4px"}}):e.jsx("div",{style:{fontSize:"2.25rem",fontWeight:700,color:v.text,lineHeight:1.1},children:r}),n&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:n})]}),i&&e.jsx("div",{style:{padding:"0.625rem",borderRadius:"10px",backgroundColor:`${v.accent}15`,color:v.accent},children:i})]}),a&&s&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.5rem",fontSize:"0.75rem"},children:[a==="up"&&e.jsx(t0,{size:14,style:{color:"#22c55e"}}),a==="down"&&e.jsx(hz,{size:14,style:{color:"#ef4444"}}),a==="neutral"&&e.jsx(sz,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{color:a==="up"?"#22c55e":a==="down"?"#ef4444":"var(--text-muted)"},children:s})]})]})}const bne={DRAFT:{bg:"#f1f5f9",text:"#475569",border:"#e2e8f0"},PENDING:{bg:"#f1f5f9",text:"#475569",border:"#e2e8f0"},PENDING_APPROVAL:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},APPROVED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},ACTIVE:{bg:"#dcfce7",text:"#166534",border:"#86efac"},COMPLETED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},CLOSED:{bg:"#e0e7ff",text:"#3730a3",border:"#a5b4fc"},CANCELLED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},REJECTED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},FAILED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},ON_HOLD:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},BLOCKED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},INACTIVE:{bg:"#f1f5f9",text:"#64748b",border:"#e2e8f0"},EXPIRED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},SUBMITTED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},VALIDATED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},SCHEDULED:{bg:"#e0e7ff",text:"#4338ca",border:"#a5b4fc"},IN_PRODUCTION:{bg:"#cffafe",text:"#0e7490",border:"#67e8f9"},QC_PENDING:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},QC_IN_PROGRESS:{bg:"#fef3c7",text:"#b45309",border:"#fcd34d"},QC_PASSED:{bg:"#d1fae5",text:"#047857",border:"#6ee7b7"},FAILED_QC:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},QP_REVIEW:{bg:"#ede9fe",text:"#6d28d9",border:"#c4b5fd"},RELEASED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},DISPATCHED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},DELIVERED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},REWORK:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},PLANNED:{bg:"#f1f5f9",text:"#475569",border:"#e2e8f0"},PRODUCTION_COMPLETE:{bg:"#cffafe",text:"#0e7490",border:"#67e8f9"},DISPENSING_IN_PROGRESS:{bg:"#ccfbf1",text:"#0d9488",border:"#5eead4"},DISPENSED:{bg:"#ccfbf1",text:"#0d9488",border:"#5eead4"},PACKED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},DEVIATION_OPEN:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},READY_TO_PACK:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},PACKING:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},READY_TO_DISPATCH:{bg:"#e0e7ff",text:"#4338ca",border:"#a5b4fc"},IN_TRANSIT:{bg:"#ede9fe",text:"#6d28d9",border:"#c4b5fd"},DELAYED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},RETURNED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},DAMAGED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},CREATED:{bg:"#f1f5f9",text:"#475569",border:"#e2e8f0"},ASSIGNED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},SHIPPED:{bg:"#ede9fe",text:"#6d28d9",border:"#c4b5fd"},ADMINISTERED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},WASTED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},SENT:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},ACKNOWLEDGED:{bg:"#cffafe",text:"#0e7490",border:"#67e8f9"},PARTIALLY_RECEIVED:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},RECEIVED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},PENDING_ACTIVATION:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},SUPERSEDED:{bg:"#e0e7ff",text:"#4338ca",border:"#a5b4fc"},OPEN:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},UNDER_INVESTIGATION:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},CAPA_PROPOSED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},CAPA_APPROVED:{bg:"#d1fae5",text:"#047857",border:"#6ee7b7"},IMPLEMENTING:{bg:"#cffafe",text:"#0e7490",border:"#67e8f9"},CLOSED_CONFIRMED:{bg:"#dcfce7",text:"#166534",border:"#86efac"},CLOSED_INVALIDATED:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},CLOSED_INCONCLUSIVE:{bg:"#e0e7ff",text:"#4338ca",border:"#a5b4fc"},SUBMITTED_FOR_PAYMENT:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"},PAID:{bg:"#dcfce7",text:"#166534",border:"#86efac"},PARTIALLY_PAID:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},OVERDUE:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"},AVAILABLE:{bg:"#dcfce7",text:"#166534",border:"#86efac"},QUARANTINE:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"},RESERVED:{bg:"#dbeafe",text:"#1d4ed8",border:"#93c5fd"}};function jne(t){return bne[t]||{bg:"#f1f5f9",text:"#475569",border:"#e2e8f0"}}const wne={sm:{padding:"0.125rem 0.5rem",fontSize:"0.625rem",gap:"0.25rem"},md:{padding:"0.25rem 0.75rem",fontSize:"0.75rem",gap:"0.375rem"},lg:{padding:"0.375rem 1rem",fontSize:"0.875rem",gap:"0.5rem"}};function Pn({status:t,size:r="md",showDot:n=!1,label:i}){const a=jne(t),s=i||t.replace(/_/g," "),o=wne[r];return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:o.gap,padding:o.padding,fontSize:o.fontSize,fontWeight:500,borderRadius:"9999px",backgroundColor:a.bg,color:a.text,border:a.border?`1px solid ${a.border}`:void 0,whiteSpace:"nowrap",textTransform:"capitalize"},children:[n&&e.jsx("span",{style:{width:r==="sm"?"5px":r==="md"?"6px":"7px",height:r==="sm"?"5px":r==="md"?"6px":"7px",borderRadius:"50%",backgroundColor:a.text,flexShrink:0}}),s]})}function Uz({steps:t,currentStep:r,completedSteps:n=[],skippedSteps:i=[],exceptionStep:a,orientation:s="horizontal",size:o="md"}){const l=t.findIndex(x=>x.key===r),u=(x,v)=>x.key===a?"exception":n.includes(x.key)?"completed":i.includes(x.key)?"skipped":x.key===r?"current":l>=0&&v<l?"completed":"pending",d={completed:{bg:"#22c55e",border:"#22c55e",text:"#fff",line:"#22c55e"},current:{bg:"#3b82f6",border:"#3b82f6",text:"#fff",line:"var(--border)"},pending:{bg:"var(--bg-primary)",border:"var(--border)",text:"var(--text-muted)",line:"var(--border)"},skipped:{bg:"var(--bg-tertiary)",border:"var(--border)",text:"var(--text-muted)",line:"var(--border)"},exception:{bg:"#ef4444",border:"#ef4444",text:"#fff",line:"#ef4444"}},p={sm:{iconSize:24,fontSize:"0.625rem",gap:"0.5rem"},md:{iconSize:32,fontSize:"0.75rem",gap:"0.75rem"},lg:{iconSize:40,fontSize:"0.875rem",gap:"1rem"}}[o];return s==="vertical"?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0"},children:t.map((x,v)=>{const w=u(x,v),C=d[w],N=x.icon,T=v===t.length-1;return e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("div",{style:{width:p.iconSize,height:p.iconSize,borderRadius:"50%",backgroundColor:C.bg,border:`2px solid ${C.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:C.text,flexShrink:0},children:[w==="completed"&&e.jsx(Ai,{size:p.iconSize*.5}),w==="exception"&&e.jsx(sn,{size:p.iconSize*.5}),w==="current"&&(N?e.jsx(N,{size:p.iconSize*.5}):e.jsx(I5,{size:p.iconSize*.4,fill:"currentColor"})),(w==="pending"||w==="skipped")&&(N?e.jsx(N,{size:p.iconSize*.5}):e.jsx(I5,{size:p.iconSize*.3}))]}),!T&&e.jsx("div",{style:{width:"2px",flex:1,minHeight:"2rem",backgroundColor:w==="completed"?C.line:"var(--border)"}})]}),e.jsxs("div",{style:{paddingBottom:T?0:"1.5rem",paddingTop:"0.25rem"},children:[e.jsx("div",{style:{fontSize:p.fontSize,fontWeight:600,color:w==="pending"?"var(--text-muted)":"var(--text-primary)"},children:x.label}),x.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.125rem"},children:x.description}),x.timestamp&&e.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Qt,{size:10})," ",x.timestamp,x.actor&&e.jsxs("span",{children:[" by ",x.actor]})]})]})]},x.key)})}):e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:p.iconSize/2,left:p.iconSize,right:p.iconSize,height:"2px",backgroundColor:"var(--border)",zIndex:0}}),t.map((x,v)=>{const w=u(x,v),C=d[w],N=x.icon;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,flex:1},children:[e.jsxs("div",{style:{width:p.iconSize,height:p.iconSize,borderRadius:"50%",backgroundColor:C.bg,border:`2px solid ${C.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:C.text},children:[w==="completed"&&e.jsx(Ai,{size:p.iconSize*.5}),w==="exception"&&e.jsx(sn,{size:p.iconSize*.5}),w==="current"&&(N?e.jsx(N,{size:p.iconSize*.5}):e.jsx(I5,{size:p.iconSize*.4,fill:"currentColor"})),(w==="pending"||w==="skipped")&&(N?e.jsx(N,{size:p.iconSize*.5}):e.jsx("span",{style:{fontSize:p.fontSize},children:v+1}))]}),e.jsxs("div",{style:{marginTop:p.gap,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:p.fontSize,fontWeight:w==="current"?600:500,color:w==="pending"||w==="skipped"?"var(--text-muted)":"var(--text-primary)"},children:x.label}),x.timestamp&&e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.125rem"},children:x.timestamp})]})]},x.key)})]})}const Sne={info:e.jsx(Qt,{size:14}),success:e.jsx(Ut,{size:14}),warning:e.jsx($r,{size:14}),error:e.jsx(ci,{size:14})},Cne={info:"#3b82f6",success:"#22c55e",warning:"#f59e0b",error:"#ef4444"};function Wz({events:t,maxVisible:r=5,showMetadata:n=!1,emptyMessage:i="No events yet"}){const[a,s]=k.useState(!1),[o,l]=k.useState(new Set),{formatDateTime:u}=mh(),d=a?t:t.slice(0,r),f=t.length>r,p=x=>{l(v=>{const w=new Set(v);return w.has(x)?w.delete(x):w.add(x),w})};return t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:[e.jsx(Qt,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:i})]}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0"},children:d.map((x,v)=>{const w=x.severity||"info",C=Cne[w],N=v===d.length-1,T=x.metadata&&Object.keys(x.metadata).length>0,O=o.has(x.id);return e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:`${C}20`,border:`2px solid ${C}`,display:"flex",alignItems:"center",justifyContent:"center",color:C,flexShrink:0},children:Sne[w]}),!N&&e.jsx("div",{style:{width:"2px",flex:1,minHeight:"1rem",backgroundColor:"var(--border)"}})]}),e.jsxs("div",{style:{flex:1,paddingBottom:N?0:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)"},children:x.title}),x.fromStatus&&x.toStatus&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.125rem"},children:[e.jsx("span",{className:"badge badge-sm",children:x.fromStatus.replace(/_/g," ")}),e.jsx(oc,{size:12}),e.jsx("span",{className:"badge badge-sm",children:x.toStatus.replace(/_/g," ")})]}),x.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:x.description}),x.note&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem",fontStyle:"italic",display:"flex",alignItems:"flex-start",gap:"0.25rem"},children:[e.jsx(Pr,{size:12,style:{flexShrink:0,marginTop:"2px"}}),'"',x.note,'"']})]}),e.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)"},children:u(x.timestamp)}),x.actor&&e.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.25rem",justifyContent:"flex-end",marginTop:"0.125rem"},children:[e.jsx(Uo,{size:10}),x.actor,x.actorRole&&e.jsxs("span",{children:["(",x.actorRole,")"]})]})]})]}),n&&T&&e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>p(x.id),style:{fontSize:"0.625rem",padding:"0.125rem 0.5rem"},children:[O?e.jsx(nh,{size:12}):e.jsx(bo,{size:12}),"Metadata"]}),O&&e.jsx("pre",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",fontSize:"0.625rem",overflow:"auto",maxHeight:"150px"},children:JSON.stringify(x.metadata,null,2)})]})]})]},x.id)})}),f&&e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>s(!a),style:{marginTop:"1rem",width:"100%"},children:[a?e.jsx(nh,{size:14}):e.jsx(bo,{size:14}),a?"Show Less":`Show All (${t.length})`]})]})}function dd({widgets:t,values:r,onChange:n,onReset:i,lastRefresh:a,onRefresh:s,quickFilters:o,activeQuickFilter:l,onQuickFilterClick:u}){const[d,f]=k.useState(null),p=Object.entries(r).filter(([x,v])=>Array.isArray(v)?v.length>0:typeof v=="boolean"?v:v&&v!=="").length;return e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",alignItems:"flex-end"},children:[t.map(x=>{if(x.type==="search")return e.jsxs("div",{style:{flex:"1 1 200px",maxWidth:"300px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:x.label}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:x.placeholder||`Search ${x.label.toLowerCase()}...`,value:r[x.key]||"",onChange:v=>n(x.key,v.target.value),style:{paddingLeft:"2.5rem",height:"40px"}}),r[x.key]&&e.jsx("button",{onClick:()=>n(x.key,""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:e.jsx(kr,{size:14})})]})]},x.key);if(x.type==="select")return e.jsxs("div",{style:{flex:"0 0 auto",minWidth:"160px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:x.label}),e.jsxs("select",{className:"form-select",value:r[x.key]||"",onChange:v=>n(x.key,v.target.value),style:{height:"40px",minWidth:"140px"},children:[e.jsx("option",{value:"",children:"All"}),x.options?.map(v=>e.jsx("option",{value:v.value,children:v.label},v.value))]})]},x.key);if(x.type==="multiselect"){const v=r[x.key]||[];return e.jsxs("div",{style:{flex:"0 0 auto",minWidth:"160px",position:"relative"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:x.label}),e.jsxs("button",{className:"form-select",onClick:()=>f(d===x.key?null:x.key),style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",textAlign:"left",height:"40px",backgroundImage:"none"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:v.length===0?"All":`${v.length} selected`}),e.jsx(bo,{size:16,style:{color:"var(--text-muted)"}})]}),d===x.key&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:100,maxHeight:"200px",overflow:"auto"},children:x.options?.map(w=>e.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"0.5rem 0.75rem",cursor:"pointer",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:v.includes(w.value),onChange:C=>{C.target.checked?n(x.key,[...v,w.value]):n(x.key,v.filter(N=>N!==w.value))}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:w.label})]},w.value))})]},x.key)}return x.type==="daterange"?e.jsxs("div",{style:{flex:"0 0 auto",display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:"From"}),e.jsx("input",{type:"date",className:"form-input",value:r[`${x.key}From`]||"",onChange:v=>n(`${x.key}From`,v.target.value),style:{width:"150px",height:"40px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:"To"}),e.jsx("input",{type:"date",className:"form-input",value:r[`${x.key}To`]||"",onChange:v=>n(`${x.key}To`,v.target.value),style:{width:"150px",height:"40px"}})]})]},x.key):x.type==="toggle"?e.jsx("div",{style:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"0.5rem",paddingBottom:"0.5rem"},children:e.jsxs("label",{className:"toggle-switch",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r[x.key]||!1,onChange:v=>n(x.key,v.target.checked),style:{width:"16px",height:"16px"}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:x.label})]})},x.key):null}),e.jsxs("div",{style:{flex:"0 0 auto",display:"flex",gap:"0.5rem",alignItems:"flex-end",paddingBottom:"0"},children:[i&&p>0&&e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:i,children:[e.jsx(g8,{size:14})," Reset"]}),s&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:s,children:e.jsx(g8,{size:14})})]})]}),o&&o.length>0&&e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:o.map(x=>e.jsx("button",{className:`btn btn-sm ${l===x.key?"btn-primary":"btn-secondary"}`,onClick:()=>u?.(x.key),style:{borderRadius:"999px"},children:x.label},x.key))}),a&&e.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:["Last updated: ",Ze(a,"HH:mm:ss"),p>0&&`  ${p} filter${p>1?"s":""} applied`]})]})}const Nne={order:Pr,batch:sa,shipment:dn,doseUnit:_g,qcTest:Rr,invoice:Pr,supplier:Uo,material:dc,recipe:JL,warehouse:lm,purchaseOrder:qo,grn:rh,customer:Ts},Ane={order:"Order",batch:"Batch",shipment:"Shipment",doseUnit:"Dose Unit",qcTest:"QC Test",invoice:"Invoice",supplier:"Supplier",material:"Material",recipe:"Recipe",warehouse:"Warehouse",purchaseOrder:"Purchase Order",grn:"GRN",customer:"Customer"},Ene={DRAFT:"default",SUBMITTED:"info",VALIDATED:"info",SCHEDULED:"secondary",IN_PRODUCTION:"info",QC_PENDING:"warning",RELEASED:"released",DISPATCHED:"info",DELIVERED:"success",CLOSED:"closed",CANCELLED:"danger",PACKED:"info",IN_TRANSIT:"purple",DISPENSED:"teal"};function _ne({records:t,title:r="Linked Records",collapsed:n=!1,onToggle:i}){const a=t.reduce((s,o)=>(s[o.type]||(s[o.type]=[]),s[o.type].push(o),s),{});return t.length===0?e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border)"},children:[e.jsx("h4",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.5rem"},children:r}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"No linked records"})]}):e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:i?"pointer":"default"},onClick:i,children:[e.jsxs("h4",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:0},children:[r," (",t.length,")"]}),i&&e.jsx(jo,{size:16,style:{color:"var(--text-muted)",transform:n?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"}})]}),!n&&e.jsx("div",{style:{padding:"0.5rem"},children:Object.entries(a).map(([s,o])=>{const l=Nne[s]||Pr;return e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",textTransform:"uppercase",padding:"0.25rem 0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(l,{size:10}),Ane[s],"s (",o.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:o.map(u=>e.jsxs(nr,{to:u.link,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem",backgroundColor:"var(--bg-primary)",borderRadius:"4px",textDecoration:"none",color:"var(--text-primary)",fontSize:"0.875rem",transition:"background-color 0.2s"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="var(--bg-tertiary)",onMouseLeave:d=>d.currentTarget.style.backgroundColor="var(--bg-primary)",children:[e.jsx("span",{style:{fontWeight:500},children:u.label}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.status&&e.jsx("span",{className:`badge badge-${Ene[u.status]||"default"}`,style:{fontSize:"0.625rem"},children:u.status.replace(/_/g," ")}),e.jsx(ih,{size:12,style:{color:"var(--text-muted)"}})]})]},u.id))})]},s)})})]})}const Tne={search:Gs,package:Rr,alert:sn,success:Ut,question:WY,beaker:dc,clock:Qt,file:Pr,truck:dn,user:Uo,box:rh};function fn({title:t,message:r,icon:n="question",ctaLabel:i,onCta:a,variant:s="default"}){const o=Tne[n],l=s==="compact";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:l?"2rem":"4rem 2rem",textAlign:"center"},children:[e.jsx("div",{style:{width:l?"48px":"64px",height:l?"48px":"64px",borderRadius:"50%",backgroundColor:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:e.jsx(o,{size:l?24:32,style:{color:"var(--text-muted)"}})}),e.jsx("h3",{style:{fontSize:l?"1rem":"1.25rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:t}),e.jsx("p",{style:{fontSize:l?"0.875rem":"1rem",color:"var(--text-muted)",maxWidth:"400px",marginBottom:i?"1.5rem":0},children:r}),i&&a&&e.jsxs("button",{className:"btn btn-primary",onClick:a,children:[e.jsx(cn,{size:16})," ",i]})]})}function gy({title:t,subtitle:r,code:n,status:i,metadata:a=[],kpis:s=[],tabs:o,defaultTab:l,actions:u=[],linkedRecords:d=[],timeline:f=[],showTimeline:p=!0,showLinkedRecords:x=!0,backUrl:v,backLabel:w="Back",loading:C=!1}){const N=Qr(),[T,O]=k.useState(l||o[0]?.key||""),[D,M]=k.useState(!1);if(C)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const Y=o.find(q=>q.key===T)?.content;return e.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{position:"sticky",top:0,zIndex:10,background:"var(--bg-secondary)",paddingBottom:"1rem",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[v&&e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>N(v),style:{marginTop:"0.25rem"},children:[e.jsx(aa,{size:16}),w]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[e.jsxs("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:[n&&e.jsxs("span",{style:{color:"var(--text-muted)"},children:[n," - "]}),t]}),i&&e.jsx(Pn,{status:i.value})]}),r&&e.jsx("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:r}),a.length>0&&e.jsx("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.5rem",flexWrap:"wrap"},children:a.map((q,W)=>e.jsxs("span",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:[e.jsxs("strong",{children:[q.label,":"]})," ",q.value]},W))})]})]}),u.length>0&&e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:u.map((q,W)=>e.jsxs("button",{className:`btn btn-${q.variant||"secondary"}`,onClick:q.onClick,disabled:q.disabled,title:q.tooltip,children:[q.icon,q.label]},W))})]})}),s.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(${s.length<=4?"180px":"150px"}, 1fr))`,gap:"1rem",marginBottom:"1.5rem"},children:s.map((q,W)=>e.jsx(st,{title:q.title,value:q.value,icon:q.icon,color:q.color,onClick:q.onClick},W))}),o.length>0&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",overflowX:"auto",gap:"0"},children:o.map(q=>e.jsxs("button",{onClick:()=>O(q.key),style:{padding:"0.875rem 1.25rem",border:"none",background:T===q.key?"var(--bg-primary)":"transparent",borderBottom:T===q.key?"2px solid var(--primary)":"2px solid transparent",color:T===q.key?"var(--primary)":"var(--text-secondary)",fontWeight:T===q.key?600:400,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",whiteSpace:"nowrap",fontSize:"0.875rem",transition:"all 0.15s ease"},children:[q.icon,q.label,q.badge!==void 0&&q.badge>0&&e.jsx("span",{className:"badge badge-primary",style:{fontSize:"0.75rem"},children:q.badge})]},q.key))}),e.jsx("div",{style:{padding:"1.5rem"},children:Y})]}),p&&f.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:D?"1px solid var(--border)":"none",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>M(!D),children:[e.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:600},children:["Activity Timeline (",f.length,")"]}),D?e.jsx(nh,{size:20}):e.jsx(bo,{size:20})]}),D&&e.jsx("div",{style:{padding:"1.5rem"},children:e.jsx(Wz,{events:f})})]})]}),x&&d.length>0&&e.jsx("div",{style:{width:"280px",flexShrink:0},children:e.jsx("div",{style:{position:"sticky",top:"1rem"},children:e.jsx(_ne,{records:d})})})]})}function zc({title:t,subtitle:r,status:n,statusLabel:i,breadcrumbs:a,actions:s,sticky:o=!1}){return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap",...o&&{position:"sticky",top:0,backgroundColor:"var(--bg-secondary)",paddingTop:"1rem",paddingBottom:"1rem",marginTop:"-1rem",marginBottom:"1rem",zIndex:100,borderBottom:"1px solid var(--border)"}},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[a&&a.length>0&&e.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.8125rem",color:"var(--text-muted)"},children:a.map((l,u)=>e.jsxs(qf.Fragment,{children:[u>0&&e.jsx(jo,{size:14,style:{color:"var(--text-muted)"}}),l.href?e.jsx(nr,{to:l.href,style:{color:"var(--text-muted)",textDecoration:"none"},children:l.label}):e.jsx("span",{style:{color:"var(--text-primary)",fontWeight:500},children:l.label})]},u))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:600,margin:0,color:"var(--text-primary)"},children:t}),n&&e.jsx(Pn,{status:n,label:i,size:"md"})]}),r&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:"0.25rem 0 0 0"},children:r})]}),s&&e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",alignItems:"center"},children:s})]})}function i0({page:t,pageSize:r,totalCount:n,onPageChange:i,showRecordRange:a=!0,compact:s=!1}){const o=Math.ceil(n/r)||1,l=n>0?(t-1)*r+1:0,u=Math.min(t*r,n);return n<=r?e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:s?"0.75rem 1rem":"1rem 1.25rem",borderTop:"1px solid var(--border)",fontSize:"0.8125rem",color:"var(--text-muted)",background:"var(--bg-secondary)"},children:e.jsxs("span",{children:[n," ",n===1?"record":"records"]})}):e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:s?"0.75rem 1rem":"1rem 1.25rem",borderTop:"1px solid var(--border)",fontSize:"0.8125rem",color:"var(--text-muted)",background:"var(--bg-secondary)",flexWrap:"wrap",gap:"0.75rem"},children:[a&&e.jsxs("span",{children:["Showing ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:l})," - ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:u})," of ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:n.toLocaleString()})," records"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.375rem 0.5rem",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},onClick:()=>i(1),disabled:t<=1,title:"First page",children:[e.jsx(aY,{size:14}),!s&&e.jsx("span",{children:"First"})]}),e.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.375rem 0.5rem",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},onClick:()=>i(t-1),disabled:t<=1,title:"Previous page",children:[e.jsx(Zp,{size:14}),!s&&e.jsx("span",{children:"Previous"})]}),e.jsxs("span",{style:{padding:"0.375rem 0.75rem",display:"flex",alignItems:"center",background:"var(--bg-primary)",borderRadius:"6px",border:"1px solid var(--border)",fontSize:"0.8125rem",fontWeight:500,color:"var(--text-primary)"},children:[t," / ",o]}),e.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.375rem 0.5rem",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},onClick:()=>i(t+1),disabled:t>=o,title:"Next page",children:[!s&&e.jsx("span",{children:"Next"}),e.jsx(jo,{size:14})]}),e.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.375rem 0.5rem",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},onClick:()=>i(o),disabled:t>=o,title:"Last page",children:[!s&&e.jsx("span",{children:"Last"}),e.jsx(oY,{size:14})]})]})]})}function a0({title:t,subtitle:r,lastRefreshed:n,onRefresh:i,isRefreshing:a,actions:s}){return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.25rem",color:"var(--text-primary)"},children:t}),r&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:r})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[n&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx(Qt,{size:14}),"Last updated: ",Ze(n,"HH:mm:ss")]}),i&&e.jsxs("button",{className:"btn btn-secondary",onClick:i,disabled:a,style:{minWidth:"100px"},children:[e.jsx(cu,{size:16,className:a?"spin":""}),a?"Refreshing...":"Refresh"]}),s]})]})}const Ine={default:{bg:"#f1f5f9",border:"#e2e8f0",text:"#64748b"},blue:{bg:"#eff6ff",border:"#bfdbfe",text:"#2563eb"},yellow:{bg:"#fefce8",border:"#fef08a",text:"#ca8a04"},green:{bg:"#f0fdf4",border:"#bbf7d0",text:"#16a34a"},teal:{bg:"#f0fdfa",border:"#99f6e4",text:"#0d9488"},purple:{bg:"#faf5ff",border:"#e9d5ff",text:"#9333ea"}};function Hz({stages:t,title:r}){const n=Qr();return e.jsxs("div",{className:"card",style:{padding:"1.25rem 1.5rem",marginBottom:"1.5rem"},children:[r&&e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-secondary)"},children:r}),e.jsx("div",{style:{display:"flex",alignItems:"stretch",gap:"0.25rem",overflowX:"auto",paddingBottom:"0.5rem"},children:t.map((i,a)=>{const s=Ine[i.color||"default"],o=a===t.length-1;return e.jsxs("div",{style:{display:"flex",alignItems:"center",flex:"1 1 0"},children:[e.jsxs("div",{onClick:()=>n(i.linkTo),style:{flex:1,padding:"0.875rem 1rem",backgroundColor:s.bg,border:`1px solid ${s.border}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s",minWidth:"110px",position:"relative"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="none"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",fontWeight:500,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:i.label}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:s.text},children:i.count}),i.lateCount&&i.lateCount>0&&e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.375rem",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"999px",fontSize:"0.6875rem",fontWeight:600},children:[e.jsx($r,{size:10}),i.lateCount]})]})]}),!o&&e.jsx(jo,{size:18,style:{color:"var(--text-muted)",flexShrink:0,margin:"0 0.125rem"}})]},i.id)})})]})}function Tc({title:t,items:r,viewAllLink:n,maxItems:i=6,emptyMessage:a="No items in queue",icon:s,accentColor:o="var(--primary)"}){const l=Qr(),u=r.slice(0,i),d=r.length>i;return e.jsxs("div",{className:"card",style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",borderLeft:`3px solid ${o}`,borderTopLeftRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s,e.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:t}),e.jsx("span",{style:{backgroundColor:"var(--bg-tertiary)",padding:"0.125rem 0.5rem",borderRadius:"999px",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:r.length})]}),n&&r.length>0&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>l(n),style:{fontSize:"0.75rem"},children:["View all ",e.jsx(jo,{size:14})]})]}),e.jsx("div",{style:{flex:1,overflow:"auto"},children:u.length>0?u.map((f,p)=>e.jsxs("div",{onClick:()=>l(f.linkTo),style:{padding:"0.875rem 1.25rem",borderBottom:p<u.length-1?"1px solid var(--border)":"none",cursor:"pointer",transition:"background 0.15s",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="var(--bg-secondary)",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.8125rem",fontFamily:"monospace"},children:f.identifier}),f.isLate&&e.jsx($r,{size:14,style:{color:"var(--danger)"}})]}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.title}),f.subtitle&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:f.subtitle})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.25rem"},children:[e.jsx(Pn,{status:f.status,size:"sm"}),f.eta&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.6875rem",color:"var(--text-muted)"},children:[e.jsx(Qt,{size:10}),typeof f.eta=="string"?f.eta:Ze(f.eta,"HH:mm")]}),f.nextAction&&e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--primary)",fontWeight:500},children:f.nextAction})]})]},f.id)):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:a})}),d&&n&&e.jsx("div",{style:{padding:"0.75rem",borderTop:"1px solid var(--border)",textAlign:"center"},children:e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>l(n),style:{width:"100%"},children:["+",r.length-i," more"]})})]})}const One={qc_failed:ci,on_hold:sn,expired:Qt,capacity:$n,delay:$r,alert:$r},kne={error:{bg:"#fef2f2",border:"#fecaca",text:"#dc2626",icon:"#dc2626"},warning:{bg:"#fffbeb",border:"#fde68a",text:"#d97706",icon:"#d97706"},info:{bg:"#eff6ff",border:"#bfdbfe",text:"#2563eb",icon:"#2563eb"}};function yy({title:t="Exceptions & Alerts",items:r}){const n=Qr(),i=r.filter(a=>a.count>0);return i.length===0?e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-secondary)"},children:t}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f0fdf4",borderRadius:"8px",color:"#16a34a",fontSize:"0.875rem",fontWeight:500},children:[e.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"No active exceptions"]})]}):e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-secondary)"},children:t}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.map(a=>{const s=kne[a.type],o=One[a.icon||"alert"];return e.jsxs("div",{onClick:()=>n(a.linkTo),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",backgroundColor:s.bg,border:`1px solid ${s.border}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateX(4px)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateX(0)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(o,{size:18,style:{color:s.icon}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:s.text},children:a.title})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{backgroundColor:s.icon,color:"white",padding:"0.125rem 0.5rem",borderRadius:"999px",fontSize:"0.75rem",fontWeight:600},children:a.count}),e.jsx(jo,{size:16,style:{color:s.icon}})]})]},a.id)})})]})}const c6={order_created:{icon:Rr,color:"#2563eb",bg:"#eff6ff"},order_validated:{icon:Ut,color:"#16a34a",bg:"#f0fdf4"},order_scheduled:{icon:Qt,color:"#0891b2",bg:"#ecfeff"},batch_started:{icon:sa,color:"#d97706",bg:"#fffbeb"},batch_completed:{icon:sa,color:"#16a34a",bg:"#f0fdf4"},qc_passed:{icon:gu,color:"#16a34a",bg:"#f0fdf4"},qc_failed:{icon:$r,color:"#dc2626",bg:"#fef2f2"},batch_released:{icon:ia,color:"#7c3aed",bg:"#f5f3ff"},shipment_dispatched:{icon:Gi,color:"#0891b2",bg:"#ecfeff"},shipment_delivered:{icon:dn,color:"#16a34a",bg:"#f0fdf4"},default:{icon:Qt,color:"#64748b",bg:"#f1f5f9"}};function Dne({events:t,title:r="Recent Activity",maxEvents:n=15}){const i=Qr(),a=t.slice(0,n);return e.jsxs("div",{className:"card",style:{height:"100%"},children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:r}),e.jsxs("span",{style:{backgroundColor:"var(--bg-tertiary)",padding:"0.125rem 0.5rem",borderRadius:"999px",fontSize:"0.75rem",color:"var(--text-muted)"},children:["Last ",a.length," events"]})]}),e.jsx("div",{style:{maxHeight:"400px",overflow:"auto"},children:a.length>0?e.jsx("div",{style:{padding:"0.5rem 0"},children:a.map((s,o)=>{const l=c6[s.type]||c6.default,u=l.icon,d=typeof s.timestamp=="string"?new Date(s.timestamp):s.timestamp;return e.jsxs("div",{onClick:()=>s.linkTo&&i(s.linkTo),style:{display:"flex",gap:"0.75rem",padding:"0.75rem 1.25rem",cursor:s.linkTo?"pointer":"default",transition:"background 0.15s"},onMouseEnter:f=>s.linkTo&&(f.currentTarget.style.backgroundColor="var(--bg-secondary)"),onMouseLeave:f=>f.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:l.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(u,{size:16,style:{color:l.color}})}),o<a.length-1&&e.jsx("div",{style:{width:"2px",flex:1,backgroundColor:"var(--border)",marginTop:"0.25rem",minHeight:"20px"}})]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"0.8125rem",fontWeight:500,color:"var(--text-primary)",marginBottom:"0.125rem"},children:s.title}),s.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:s.description}),e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{children:gre(d,{addSuffix:!0})}),s.user&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:s.user})]})]})]})]},s.id)})}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No recent activity"})})]})}function Pne({days:t,title:r="Capacity Overview (7 Days)"}){const n=Qr();return e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx($n,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,margin:0,color:"var(--text-secondary)"},children:r})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem"},children:t.map((i,a)=>{const s=typeof i.date=="string"?new Date(i.date):i.date,o=i.totalCapacity>0?Math.round((i.reservedMinutes+i.committedMinutes)/i.totalCapacity*100):0,l=a===0;let u="#22c55e";return o>=90?u="#ef4444":o>=70&&(u="#f59e0b"),e.jsxs("div",{onClick:()=>n(`/planner?date=${Ze(s,"yyyy-MM-dd")}`),style:{padding:"0.75rem 0.5rem",backgroundColor:l?"#eff6ff":"var(--bg-secondary)",borderRadius:"8px",cursor:"pointer",textAlign:"center",transition:"all 0.15s",border:l?"2px solid var(--primary)":"1px solid var(--border)"},onMouseEnter:d=>{d.currentTarget.style.transform="translateY(-2px)",d.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateY(0)",d.currentTarget.style.boxShadow="none"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:Ze(s,"EEE")}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:Ze(s,"d")}),e.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#e2e8f0",borderRadius:"2px",marginBottom:"0.375rem",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(o,100)}%`,height:"100%",backgroundColor:u,borderRadius:"2px"}})}),e.jsxs("div",{style:{fontSize:"0.6875rem",fontWeight:500,color:o>=90?"#dc2626":"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[i.isFull&&e.jsx($r,{size:10}),o,"%"]})]},a)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"1rem",fontSize:"0.6875rem",color:"var(--text-muted)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"#22c55e"}}),"Low"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"#f59e0b"}}),"Medium"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"#ef4444"}}),"High"]})]})]})}function Rne({permissions:t=[]}){const r=Qr(),n=[{id:"create-order",label:"New Order",description:"Create customer order",icon:e.jsx(cn,{size:20}),color:"#2563eb",bgColor:"rgba(37, 99, 235, 0.1)",onClick:()=>r("/orders?action=create")},{id:"start-batch",label:"Start Batch",description:"Begin production",icon:e.jsx(yo,{size:20}),color:"#059669",bgColor:"rgba(5, 150, 105, 0.1)",onClick:()=>r("/batches?status=PLANNED")},{id:"record-qc",label:"Record QC",description:"Enter QC results",icon:e.jsx(sa,{size:20}),color:"#d97706",bgColor:"rgba(217, 119, 6, 0.1)",onClick:()=>r("/qc?status=QC_PENDING")},{id:"qp-release",label:"QP Release",description:"Release batch",icon:e.jsx(ia,{size:20}),color:"#7c3aed",bgColor:"rgba(124, 58, 237, 0.1)",onClick:()=>r("/release?status=QC_PASSED")},{id:"dispense",label:"Dispense",description:"Dispense doses",icon:e.jsx(Rr,{size:20}),color:"#0891b2",bgColor:"rgba(8, 145, 178, 0.1)",onClick:()=>r("/dispensing?ready=true")},{id:"dispatch",label:"Dispatch",description:"Send shipment",icon:e.jsx(dn,{size:20}),color:"#dc2626",bgColor:"rgba(220, 38, 38, 0.1)",onClick:()=>r("/shipments?status=ASSIGNED")},{id:"approve-po",label:"Approve PO",description:"Approve purchase",icon:e.jsx(Pr,{size:20}),color:"#ea580c",bgColor:"rgba(234, 88, 12, 0.1)",onClick:()=>r("/purchase-orders?status=PENDING_APPROVAL")},{id:"validate-order",label:"Validate Order",description:"Confirm order",icon:e.jsx(af,{size:20}),color:"#0284c7",bgColor:"rgba(2, 132, 199, 0.1)",onClick:()=>r("/orders?status=SUBMITTED")}];return e.jsxs("div",{className:"card",style:{padding:"1.25rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",margin:0},children:"Quick Actions"})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:n.map(i=>e.jsxs("button",{onClick:i.onClick,style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1rem",border:"1px solid var(--border)",borderRadius:"12px",background:"var(--bg-primary)",cursor:"pointer",transition:"all 0.2s",gap:"0.5rem"},onMouseEnter:a=>{a.currentTarget.style.borderColor=i.color,a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow=`0 4px 12px ${i.bgColor}`},onMouseLeave:a=>{a.currentTarget.style.borderColor="var(--border)",a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="none"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:i.bgColor,color:i.color},children:i.icon}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:600,color:"var(--text-primary)"},children:i.label}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:i.description})]},i.id))})]})}const Mne={expiring:Qt,overdue:$n,approval:ia,qc_failed:ci,inventory:Rr,delivery:dn},Lne={critical:{bg:"#fef2f2",border:"#fecaca",text:"#dc2626",icon:"#dc2626",pulse:!0},high:{bg:"#fff7ed",border:"#fed7aa",text:"#ea580c",icon:"#ea580c",pulse:!1},medium:{bg:"#fffbeb",border:"#fde68a",text:"#d97706",icon:"#d97706",pulse:!1}};function zne({alerts:t,title:r="Critical Alerts",maxAlerts:n=6}){const i=Qr(),a=t.filter(l=>l.count>0).sort((l,u)=>{const d={critical:0,high:1,medium:2};return d[l.severity]-d[u.severity]}).slice(0,n),s=a.filter(l=>l.severity==="critical").length,o=a.reduce((l,u)=>l+u.count,0);return a.length===0?e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(xo,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",margin:0},children:r})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem 1rem",backgroundColor:"#f0fdf4",borderRadius:"12px",color:"#16a34a"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"rgba(22, 163, 74, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.75rem"},children:e.jsx("span",{style:{fontSize:"1.5rem"},children:""})}),e.jsx("span",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"All Clear"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#22c55e",marginTop:"0.25rem"},children:"No critical alerts at this time"})]})]}):e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s>0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#dc2626",animation:"pulse 2s infinite"},children:e.jsx(Lp,{size:14,style:{color:"white"}})}):e.jsx($r,{size:18,style:{color:"#ea580c"}}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",margin:0},children:r})]}),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,padding:"0.25rem 0.5rem",borderRadius:"9999px",backgroundColor:s>0?"#fef2f2":"#fff7ed",color:s>0?"#dc2626":"#ea580c"},children:[o," items"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:a.map(l=>{const u=Lne[l.severity],d=Mne[l.category]||$r;return e.jsxs("div",{onClick:()=>i(l.linkTo),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",backgroundColor:u.bg,border:`1px solid ${u.border}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{f.currentTarget.style.transform="translateX(4px)"},onMouseLeave:f=>{f.currentTarget.style.transform="translateX(0)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"rgba(255, 255, 255, 0.8)",color:u.icon,flexShrink:0},children:e.jsx(d,{size:18})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.125rem"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.8125rem",color:u.text},children:l.title}),e.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:700,padding:"0.125rem 0.375rem",borderRadius:"9999px",backgroundColor:"rgba(255, 255, 255, 0.6)",color:u.text},children:l.count})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(0, 0, 0, 0.6)"},children:l.description})]}),e.jsx(jo,{size:16,style:{color:u.icon,flexShrink:0}})]},l.id)})}),e.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]})}function Vz(t){var r,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=Vz(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function hi(){for(var t,r,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(r=Vz(t))&&(i&&(i+=" "),i+=r);return i}var Bne=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function GA(t){if(typeof t!="string")return!1;var r=Bne;return r.includes(t)}var Fne=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qne=new Set(Fne);function $z(t){return typeof t!="string"?!1:qne.has(t)}function Gz(t){return typeof t=="string"&&t.startsWith("data-")}function Wl(t){if(typeof t!="object"||t===null)return{};var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&($z(n)||Gz(n))&&(r[n]=t[n]);return r}function dm(t){if(t==null)return null;if(k.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var r=t.props;return Wl(r)}return typeof t=="object"&&!Array.isArray(t)?Wl(t):null}function Tl(t){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&($z(n)||Gz(n)||GA(n))&&(r[n]=t[n]);return r}function Une(t){return t==null?null:k.isValidElement(t)?Tl(t.props):typeof t=="object"&&!Array.isArray(t)?Tl(t):null}var Wne=["children","width","height","viewBox","className","style","title","desc"];function XC(){return XC=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},XC.apply(null,arguments)}function Hne(t,r){if(t==null)return{};var n,i,a=Vne(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Vne(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var KA=k.forwardRef((t,r)=>{var{children:n,width:i,height:a,viewBox:s,className:o,style:l,title:u,desc:d}=t,f=Hne(t,Wne),p=s||{width:i,height:a,x:0,y:0},x=hi("recharts-surface",o);return k.createElement("svg",XC({},Tl(f),{className:x,width:i,height:a,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:r}),k.createElement("title",null,u),k.createElement("desc",null,d),n)}),$ne=["children","className"];function JC(){return JC=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},JC.apply(null,arguments)}function Gne(t,r){if(t==null)return{};var n,i,a=Kne(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Kne(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Os=k.forwardRef((t,r)=>{var{children:n,className:i}=t,a=Gne(t,$ne),s=hi("recharts-layer",i);return k.createElement("g",JC({className:s},Tl(a),{ref:r}),n)}),Kz=k.createContext(null),Qne=()=>k.useContext(Kz);function fa(t){return function(){return t}}const Qz=Math.cos,Uv=Math.sin,Od=Math.sqrt,Wv=Math.PI,a2=2*Wv,eN=Math.PI,tN=2*eN,Df=1e-6,Yne=tN-Df;function Yz(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function Zne(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return Yz;const n=10**r;return function(i){this._+=i[0];for(let a=1,s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}class Xne{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?Yz:Zne(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,i,a){this._append`Q${+r},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(r,n,i,a,s,o){this._append`C${+r},${+n},${+i},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(r,n,i,a,s){if(r=+r,n=+n,i=+i,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,u=i-r,d=a-n,f=o-r,p=l-n,x=f*f+p*p;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(x>Df)if(!(Math.abs(p*u-d*f)>Df)||!s)this._append`L${this._x1=r},${this._y1=n}`;else{let v=i-o,w=a-l,C=u*u+d*d,N=v*v+w*w,T=Math.sqrt(C),O=Math.sqrt(x),D=s*Math.tan((eN-Math.acos((C+x-N)/(2*T*O)))/2),M=D/O,Y=D/T;Math.abs(M-1)>Df&&this._append`L${r+M*f},${n+M*p}`,this._append`A${s},${s},0,0,${+(p*v>f*w)},${this._x1=r+Y*u},${this._y1=n+Y*d}`}}arc(r,n,i,a,s,o){if(r=+r,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(a),u=i*Math.sin(a),d=r+l,f=n+u,p=1^o,x=o?a-s:s-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Df||Math.abs(this._y1-f)>Df)&&this._append`L${d},${f}`,i&&(x<0&&(x=x%tN+tN),x>Yne?this._append`A${i},${i},0,1,${p},${r-l},${n-u}A${i},${i},0,1,${p},${this._x1=d},${this._y1=f}`:x>Df&&this._append`A${i},${i},0,${+(x>=eN)},${p},${this._x1=r+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(r,n,i,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function QA(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);r=i}return t},()=>new Xne(r)}function YA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zz(t){this._context=t}Zz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function s2(t){return new Zz(t)}function Xz(t){return t[0]}function Jz(t){return t[1]}function eB(t,r){var n=fa(!0),i=null,a=s2,s=null,o=QA(l);t=typeof t=="function"?t:t===void 0?Xz:fa(t),r=typeof r=="function"?r:r===void 0?Jz:fa(r);function l(u){var d,f=(u=YA(u)).length,p,x=!1,v;for(i==null&&(s=a(v=o())),d=0;d<=f;++d)!(d<f&&n(p=u[d],d,u))===x&&((x=!x)?s.lineStart():s.lineEnd()),x&&s.point(+t(p,d,u),+r(p,d,u));if(v)return s=null,v+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:fa(+u),l):t},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:fa(+u),l):r},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:fa(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,i!=null&&(s=a(i)),l):a},l.context=function(u){return arguments.length?(u==null?i=s=null:s=a(i=u),l):i},l}function Hx(t,r,n){var i=null,a=fa(!0),s=null,o=s2,l=null,u=QA(d);t=typeof t=="function"?t:t===void 0?Xz:fa(+t),r=typeof r=="function"?r:fa(r===void 0?0:+r),n=typeof n=="function"?n:n===void 0?Jz:fa(+n);function d(p){var x,v,w,C=(p=YA(p)).length,N,T=!1,O,D=new Array(C),M=new Array(C);for(s==null&&(l=o(O=u())),x=0;x<=C;++x){if(!(x<C&&a(N=p[x],x,p))===T)if(T=!T)v=x,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),w=x-1;w>=v;--w)l.point(D[w],M[w]);l.lineEnd(),l.areaEnd()}T&&(D[x]=+t(N,x,p),M[x]=+r(N,x,p),l.point(i?+i(N,x,p):D[x],n?+n(N,x,p):M[x]))}if(O)return l=null,O+""||null}function f(){return eB().defined(a).curve(o).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:fa(+p),i=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:fa(+p),d):t},d.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:fa(+p),d):i},d.y=function(p){return arguments.length?(r=typeof p=="function"?p:fa(+p),n=null,d):r},d.y0=function(p){return arguments.length?(r=typeof p=="function"?p:fa(+p),d):r},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:fa(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(r)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(i).y(r)},d.defined=function(p){return arguments.length?(a=typeof p=="function"?p:fa(!!p),d):a},d.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),d):o},d.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),d):s},d}class tB{constructor(r,n){this._context=r,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,n){switch(r=+r,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,n,r,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,r,this._y0,r,n);break}}this._x0=r,this._y0=n}}function Jne(t){return new tB(t,!0)}function eie(t){return new tB(t,!1)}const ZA={draw(t,r){const n=Od(r/Wv);t.moveTo(n,0),t.arc(0,0,n,0,a2)}},tie={draw(t,r){const n=Od(r/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},rB=Od(1/3),rie=rB*2,nie={draw(t,r){const n=Od(r/rie),i=n*rB;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},iie={draw(t,r){const n=Od(r),i=-n/2;t.rect(i,i,n,n)}},aie=.8908130915292852,nB=Uv(Wv/10)/Uv(7*Wv/10),sie=Uv(a2/10)*nB,oie=-Qz(a2/10)*nB,lie={draw(t,r){const n=Od(r*aie),i=sie*n,a=oie*n;t.moveTo(0,-n),t.lineTo(i,a);for(let s=1;s<5;++s){const o=a2*s/5,l=Qz(o),u=Uv(o);t.lineTo(u*n,-l*n),t.lineTo(l*i-u*a,u*i+l*a)}t.closePath()}},W5=Od(3),cie={draw(t,r){const n=-Od(r/(W5*3));t.moveTo(0,n*2),t.lineTo(-W5*n,-n),t.lineTo(W5*n,-n),t.closePath()}},Qc=-.5,Yc=Od(3)/2,rN=1/Od(12),die=(rN/2+1)*3,uie={draw(t,r){const n=Od(r/die),i=n/2,a=n*rN,s=i,o=n*rN+n,l=-s,u=o;t.moveTo(i,a),t.lineTo(s,o),t.lineTo(l,u),t.lineTo(Qc*i-Yc*a,Yc*i+Qc*a),t.lineTo(Qc*s-Yc*o,Yc*s+Qc*o),t.lineTo(Qc*l-Yc*u,Yc*l+Qc*u),t.lineTo(Qc*i+Yc*a,Qc*a-Yc*i),t.lineTo(Qc*s+Yc*o,Qc*o-Yc*s),t.lineTo(Qc*l+Yc*u,Qc*u-Yc*l),t.closePath()}};function hie(t,r){let n=null,i=QA(a);t=typeof t=="function"?t:fa(t||ZA),r=typeof r=="function"?r:fa(r===void 0?64:+r);function a(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:fa(s),a):t},a.size=function(s){return arguments.length?(r=typeof s=="function"?s:fa(+s),a):r},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function Hv(){}function Vv(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function iB(t){this._context=t}iB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vv(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function fie(t){return new iB(t)}function aB(t){this._context=t}aB.prototype={areaStart:Hv,areaEnd:Hv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:Vv(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function mie(t){return new aB(t)}function sB(t){this._context=t}sB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Vv(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function pie(t){return new sB(t)}function oB(t){this._context=t}oB.prototype={areaStart:Hv,areaEnd:Hv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function gie(t){return new oB(t)}function d6(t){return t<0?-1:1}function u6(t,r,n){var i=t._x1-t._x0,a=r-t._x1,s=(t._y1-t._y0)/(i||a<0&&-0),o=(n-t._y1)/(a||i<0&&-0),l=(s*a+o*i)/(i+a);return(d6(s)+d6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function h6(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function H5(t,r,n){var i=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-i)/3;t._context.bezierCurveTo(i+l,a+l*r,s-l,o-l*n,s,o)}function $v(t){this._context=t}$v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H5(this,this._t0,h6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,H5(this,h6(this,n=u6(this,t,r)),n);break;default:H5(this,this._t0,n=u6(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};function lB(t){this._context=new cB(t)}(lB.prototype=Object.create($v.prototype)).point=function(t,r){$v.prototype.point.call(this,r,t)};function cB(t){this._context=t}cB.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,i,a,s){this._context.bezierCurveTo(r,t,i,n,s,a)}};function yie(t){return new $v(t)}function xie(t){return new lB(t)}function dB(t){this._context=t}dB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var i=f6(t),a=f6(r),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],t[o],r[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function f6(t){var r,n=t.length-1,i,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],r=1;r<n-1;++r)a[r]=1,s[r]=4,o[r]=4*t[r]+2*t[r+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)i=a[r]/s[r-1],s[r]-=i,o[r]-=i*o[r-1];for(a[n-1]=o[n-1]/s[n-1],r=n-2;r>=0;--r)a[r]=(o[r]-a[r+1])/s[r];for(s[n-1]=(t[n]+a[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-a[r+1];return[a,s]}function vie(t){return new dB(t)}function o2(t,r){this._context=t,this._t=r}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}};function bie(t){return new o2(t,.5)}function jie(t){return new o2(t,0)}function wie(t){return new o2(t,1)}function um(t,r){if((o=t.length)>1)for(var n=1,i,a,s=t[r[0]],o,l=s.length;n<o;++n)for(a=s,s=t[r[n]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function nN(t){for(var r=t.length,n=new Array(r);--r>=0;)n[r]=r;return n}function Sie(t,r){return t[r]}function Cie(t){const r=[];return r.key=t,r}function Nie(){var t=fa([]),r=nN,n=um,i=Sie;function a(s){var o=Array.from(t.apply(this,arguments),Cie),l,u=o.length,d=-1,f;for(const p of s)for(l=0,++d;l<u;++l)(o[l][d]=[0,+i(p,o[l].key,d,s)]).data=p;for(l=0,f=YA(r(o));l<u;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:fa(Array.from(s)),a):t},a.value=function(s){return arguments.length?(i=typeof s=="function"?s:fa(+s),a):i},a.order=function(s){return arguments.length?(r=s==null?nN:typeof s=="function"?s:fa(Array.from(s)),a):r},a.offset=function(s){return arguments.length?(n=s??um,a):n},a}function Aie(t,r){if((i=t.length)>0){for(var n,i,a=0,s=t[0].length,o;a<s;++a){for(o=n=0;n<i;++n)o+=t[n][a][1]||0;if(o)for(n=0;n<i;++n)t[n][a][1]/=o}um(t,r)}}function Eie(t,r){if((a=t.length)>0){for(var n=0,i=t[r[0]],a,s=i.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=t[o][n][1]||0;i[n][1]+=i[n][0]=-l/2}um(t,r)}}function _ie(t,r){if(!(!((o=t.length)>0)||!((s=(a=t[r[0]]).length)>0))){for(var n=0,i=1,a,s,o;i<s;++i){for(var l=0,u=0,d=0;l<o;++l){for(var f=t[r[l]],p=f[i][1]||0,x=f[i-1][1]||0,v=(p-x)/2,w=0;w<l;++w){var C=t[r[w]],N=C[i][1]||0,T=C[i-1][1]||0;v+=N-T}u+=p,d+=v*p}a[i-1][1]+=a[i-1][0]=n,u&&(n-=d/u)}a[i-1][1]+=a[i-1][0]=n,um(t,r)}}var V5={},$5={},m6;function Tie(){return m6||(m6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n==="__proto__"}t.isUnsafeProperty=r})($5)),$5}var G5={},p6;function uB(){return p6||(p6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=r})(G5)),G5}var K5={},g6;function XA(){return g6||(g6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=r})(K5)),K5}var Q5={},Y5={},y6;function Iie(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(r).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=r})(Y5)),Y5}var x6;function JA(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Iie(),n=XA();function i(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=r.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,u="",d="",f=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const p=a[l];d?p==="\\"&&l+1<o?(l++,u+=a[l]):p===d?d="":u+=p:f?p==='"'||p==="'"?d=p:p==="]"?(f=!1,s.push(u),u=""):u+=p:p==="["?(f=!0,u&&(s.push(u),u="")):p==="."?u&&(s.push(u),u=""):u+=p,l++}return u&&s.push(u),s}t.toPath=i})(Q5)),Q5}var v6;function eE(){return v6||(v6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Tie(),n=uB(),i=XA(),a=JA();function s(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(r.isUnsafeProperty(u))return d;const f=l[u];return f===void 0?n.isDeepKey(u)?s(l,a.toPath(u),d):d:f}case"number":case"symbol":{typeof u=="number"&&(u=i.toKey(u));const f=l[u];return f===void 0?d:f}default:{if(Array.isArray(u))return o(l,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),r.isUnsafeProperty(u))return d;const f=l[u];return f===void 0?d:f}}}function o(l,u,d){if(u.length===0)return d;let f=l;for(let p=0;p<u.length;p++){if(f==null||r.isUnsafeProperty(u[p]))return d;f=f[u[p]]}return f===void 0?d:f}t.get=s})(V5)),V5}var Z5,b6;function Oie(){return b6||(b6=1,Z5=eE().get),Z5}var kie=Oie();const hm=hc(kie);var Die=4;function Jh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Die,n=10**r,i=Math.round(t*n)/n;return Object.is(i,-0)?0:i}function As(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.reduce((a,s,o)=>{var l=n[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+Jh(l)+s:a+s},"")}var Fo=t=>t===0?0:t>0?1:-1,ad=t=>typeof t=="number"&&t!=+t,sh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,or=t=>(typeof t=="number"||t instanceof Number)&&!ad(t),uu=t=>or(t)||typeof t=="string",Pie=0,Wg=t=>{var r=++Pie;return"".concat(t||"").concat(r)},_l=function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!or(r)&&typeof r!="string")return i;var s;if(sh(r)){if(n==null)return i;var o=r.indexOf("%");s=n*parseFloat(r.slice(0,o))/100}else s=+r;return ad(s)&&(s=i),a&&n!=null&&s>n&&(s=n),s},hB=t=>{if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[String(t[i])])n[String(t[i])]=!0;else return!0;return!1};function Ti(t,r,n){return or(t)&&or(r)?Jh(t+n*(r-t)):r}function fB(t,r,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof r=="function"?r(i):hm(i,r))===n)}var _a=t=>t===null||typeof t>"u",xy=t=>_a(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Rie(t){return t!=null}function vy(){}var Mie=["type","size","sizeType"];function iN(){return iN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iN.apply(null,arguments)}function j6(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function w6(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?j6(Object(n),!0).forEach(function(i){Lie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Lie(t,r,n){return(r=zie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function zie(t){var r=Bie(t,"string");return typeof r=="symbol"?r:r+""}function Bie(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Fie(t,r){if(t==null)return{};var n,i,a=qie(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function qie(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var mB={symbolCircle:ZA,symbolCross:tie,symbolDiamond:nie,symbolSquare:iie,symbolStar:lie,symbolTriangle:cie,symbolWye:uie},Uie=Math.PI/180,Wie=t=>{var r="symbol".concat(xy(t));return mB[r]||ZA},Hie=(t,r,n)=>{if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*Uie;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Vie=(t,r)=>{mB["symbol".concat(xy(t))]=r},tE=t=>{var{type:r="circle",size:n=64,sizeType:i="area"}=t,a=Fie(t,Mie),s=w6(w6({},a),{},{type:r,size:n,sizeType:i}),o="circle";typeof r=="string"&&(o=r);var l=()=>{var x=Wie(o),v=hie().type(x).size(Hie(n,i,o)),w=v();if(w!==null)return w},{className:u,cx:d,cy:f}=s,p=Tl(s);return or(d)&&or(f)&&or(n)?k.createElement("path",iN({},p,{className:hi("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};tE.registerSymbol=Vie;var pB=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,rE=(t,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(k.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{GA(a)&&(i[a]=(s=>n[a](n,s)))}),i},$ie=(t,r,n)=>i=>(t(r,n,i),null),by=(t,r,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(a=>{var s=t[a];GA(a)&&typeof s=="function"&&(i||(i={}),i[a]=$ie(s,r,n))}),i};function S6(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Gie(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?S6(Object(n),!0).forEach(function(i){Kie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Kie(t,r,n){return(r=Qie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Qie(t){var r=Yie(t,"string");return typeof r=="symbol"?r:r+""}function Yie(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ks(t,r){var n=Gie({},t),i=r,a=Object.keys(r),s=a.reduce((o,l)=>(o[l]===void 0&&i[l]!==void 0&&(o[l]=i[l]),o),n);return s}function Gv(){return Gv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gv.apply(null,arguments)}function C6(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Zie(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?C6(Object(n),!0).forEach(function(i){Xie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Xie(t,r,n){return(r=Jie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Jie(t){var r=eae(t,"string");return typeof r=="symbol"?r:r+""}function eae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Xc=32,tae={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function rae(t){var{data:r,iconType:n,inactiveColor:i}=t,a=Xc/2,s=Xc/6,o=Xc/3,l=r.inactive?i:r.color,u=n??r.type;if(u==="none")return null;if(u==="plainline"){var d;return k.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=r.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:a,x2:Xc,y2:a,className:"recharts-legend-icon"})}if(u==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Xc,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(u==="rect")return k.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Xc/8,"h").concat(Xc,"v").concat(Xc*3/4,"h").concat(-Xc,"z"),className:"recharts-legend-icon"});if(k.isValidElement(r.legendIcon)){var f=Zie({},r);return delete f.legendIcon,k.cloneElement(r.legendIcon,f)}return k.createElement(tE,{fill:l,cx:a,cy:a,size:Xc,sizeType:"diameter",type:u})}function nae(t){var{payload:r,iconSize:n,layout:i,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:Xc,height:Xc},u={display:i==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((f,p)=>{var x=f.formatter||a,v=hi({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:f.inactive});if(f.type==="none")return null;var w=f.inactive?s:f.color,C=x?x(f.value,f,p):f.value;return k.createElement("li",Gv({className:v,style:u,key:"legend-item-".concat(p)},by(t,f,p)),k.createElement(KA,{width:n,height:n,viewBox:l,style:d,"aria-label":"".concat(C," legend icon")},k.createElement(rae,{data:f,iconType:o,inactiveColor:s})),k.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},C))})}var iae=t=>{var r=ks(t,tae),{payload:n,layout:i,align:a}=r;if(!n||!n.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?a:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:s},k.createElement(nae,Gv({},r,{payload:n})))},X5={},J5={},N6;function aae(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,i){const a=new Map;for(let s=0;s<n.length;s++){const o=n[s],l=i(o,s,n);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=r})(J5)),J5}var ew={},A6;function sae(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,i){return function(...a){return n.apply(this,a.slice(0,i))}}t.ary=r})(ew)),ew}var tw={},E6;function gB(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n}t.identity=r})(tw)),tw}var rw={},nw={},iw={},_6;function oae(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=r})(iw)),iw}var T6;function nE(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=oae();function n(i){return i!=null&&typeof i!="function"&&r.isLength(i.length)}t.isArrayLike=n})(nw)),nw}var aw={},I6;function lae(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="object"&&n!==null}t.isObjectLike=r})(aw)),aw}var O6;function cae(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=nE(),n=lae();function i(a){return n.isObjectLike(a)&&r.isArrayLike(a)}t.isArrayLikeObject=i})(rw)),rw}var sw={},ow={},k6;function dae(){return k6||(k6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=eE();function n(i){return function(a){return r.get(a,i)}}t.property=n})(ow)),ow}var lw={},cw={},dw={},uw={},D6;function yB(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=r})(uw)),uw}var hw={},P6;function xB(){return P6||(P6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=r})(hw)),hw}var fw={},R6;function vB(){return R6||(R6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.isEqualsSameValueZero=r})(fw)),fw}var M6;function uae(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=yB(),n=xB(),i=vB();function a(f,p,x){return typeof x!="function"?a(f,p,()=>{}):s(f,p,function v(w,C,N,T,O,D){const M=x(w,C,N,T,O,D);return M!==void 0?!!M:s(w,C,v,D)},new Map)}function s(f,p,x,v){if(p===f)return!0;switch(typeof p){case"object":return o(f,p,x,v);case"function":return Object.keys(p).length>0?s(f,{...p},x,v):i.isEqualsSameValueZero(f,p);default:return r.isObject(f)?typeof p=="string"?p==="":!0:i.isEqualsSameValueZero(f,p)}}function o(f,p,x,v){if(p==null)return!0;if(Array.isArray(p))return u(f,p,x,v);if(p instanceof Map)return l(f,p,x,v);if(p instanceof Set)return d(f,p,x,v);const w=Object.keys(p);if(f==null||n.isPrimitive(f))return w.length===0;if(w.length===0)return!0;if(v?.has(p))return v.get(p)===f;v?.set(p,f);try{for(let C=0;C<w.length;C++){const N=w[C];if(!n.isPrimitive(f)&&!(N in f)||p[N]===void 0&&f[N]!==void 0||p[N]===null&&f[N]!==null||!x(f[N],p[N],N,f,p,v))return!1}return!0}finally{v?.delete(p)}}function l(f,p,x,v){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,C]of p.entries()){const N=f.get(w);if(x(N,C,w,f,p,v)===!1)return!1}return!0}function u(f,p,x,v){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let C=0;C<p.length;C++){const N=p[C];let T=!1;for(let O=0;O<f.length;O++){if(w.has(O))continue;const D=f[O];let M=!1;if(x(D,N,C,f,p,v)&&(M=!0),M){w.add(O),T=!0;break}}if(!T)return!1}return!0}function d(f,p,x,v){return p.size===0?!0:f instanceof Set?u([...f],[...p],x,v):!1}t.isMatchWith=a,t.isSetMatch=d})(dw)),dw}var L6;function bB(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=uae();function n(i,a){return r.isMatchWith(i,a,()=>{})}t.isMatch=n})(cw)),cw}var mw={},pw={},gw={},z6;function hae(){return z6||(z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=r})(gw)),gw}var yw={},B6;function iE(){return B6||(B6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=r})(yw)),yw}var xw={},F6;function jB(){return F6||(F6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",n="[object String]",i="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",f="[object Array]",p="[object Function]",x="[object ArrayBuffer]",v="[object Object]",w="[object Error]",C="[object DataView]",N="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",D="[object Uint32Array]",M="[object BigUint64Array]",Y="[object Int8Array]",q="[object Int16Array]",W="[object Int32Array]",J="[object BigInt64Array]",z="[object Float32Array]",G="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=x,t.arrayTag=f,t.bigInt64ArrayTag=J,t.bigUint64ArrayTag=M,t.booleanTag=a,t.dataViewTag=C,t.dateTag=l,t.errorTag=w,t.float32ArrayTag=z,t.float64ArrayTag=G,t.functionTag=p,t.int16ArrayTag=q,t.int32ArrayTag=W,t.int8ArrayTag=Y,t.mapTag=u,t.numberTag=i,t.objectTag=v,t.regexpTag=r,t.setTag=d,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=O,t.uint32ArrayTag=D,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=T})(xw)),xw}var vw={},q6;function fae(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=r})(vw)),vw}var U6;function wB(){return U6||(U6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=hae(),n=iE(),i=jB(),a=xB(),s=fae();function o(f,p){return l(f,void 0,f,new Map,p)}function l(f,p,x,v=new Map,w=void 0){const C=w?.(f,p,x,v);if(C!==void 0)return C;if(a.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const N=new Array(f.length);v.set(f,N);for(let T=0;T<f.length;T++)N[T]=l(f[T],T,x,v,w);return Object.hasOwn(f,"index")&&(N.index=f.index),Object.hasOwn(f,"input")&&(N.input=f.input),N}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const N=new RegExp(f.source,f.flags);return N.lastIndex=f.lastIndex,N}if(f instanceof Map){const N=new Map;v.set(f,N);for(const[T,O]of f)N.set(T,l(O,T,x,v,w));return N}if(f instanceof Set){const N=new Set;v.set(f,N);for(const T of f)N.add(l(T,void 0,x,v,w));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(s.isTypedArray(f)){const N=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,N);for(let T=0;T<f.length;T++)N[T]=l(f[T],T,x,v,w);return N}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const N=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,N),u(N,f,x,v,w),N}if(typeof File<"u"&&f instanceof File){const N=new File([f],f.name,{type:f.type});return v.set(f,N),u(N,f,x,v,w),N}if(typeof Blob<"u"&&f instanceof Blob){const N=new Blob([f],{type:f.type});return v.set(f,N),u(N,f,x,v,w),N}if(f instanceof Error){const N=new f.constructor;return v.set(f,N),N.message=f.message,N.name=f.name,N.stack=f.stack,N.cause=f.cause,u(N,f,x,v,w),N}if(f instanceof Boolean){const N=new Boolean(f.valueOf());return v.set(f,N),u(N,f,x,v,w),N}if(f instanceof Number){const N=new Number(f.valueOf());return v.set(f,N),u(N,f,x,v,w),N}if(f instanceof String){const N=new String(f.valueOf());return v.set(f,N),u(N,f,x,v,w),N}if(typeof f=="object"&&d(f)){const N=Object.create(Object.getPrototypeOf(f));return v.set(f,N),u(N,f,x,v,w),N}return f}function u(f,p,x=f,v,w){const C=[...Object.keys(p),...r.getSymbols(p)];for(let N=0;N<C.length;N++){const T=C[N],O=Object.getOwnPropertyDescriptor(f,T);(O==null||O.writable)&&(f[T]=l(p[T],T,x,v,w))}}function d(f){switch(n.getTag(f)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=u})(pw)),pw}var W6;function mae(){return W6||(W6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=wB();function n(i){return r.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(mw)),mw}var H6;function pae(){return H6||(H6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=bB(),n=mae();function i(a){return a=n.cloneDeep(a),s=>r.isMatch(s,a)}t.matches=i})(lw)),lw}var bw={},jw={},ww={},V6;function gae(){return V6||(V6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=wB(),n=iE(),i=jB();function a(s,o){return r.cloneDeepWith(s,(l,u,d,f)=>{const p=o?.(l,u,d,f);if(p!==void 0)return p;if(typeof s=="object"){if(n.getTag(s)===i.objectTag&&typeof s.constructor!="function"){const x={};return f.set(s,x),r.copyProperties(x,s,d,f),x}switch(Object.prototype.toString.call(s)){case i.numberTag:case i.stringTag:case i.booleanTag:{const x=new s.constructor(s?.valueOf());return r.copyProperties(x,s),x}case i.argumentsTag:{const x={};return r.copyProperties(x,s),x.length=s.length,x[Symbol.iterator]=s[Symbol.iterator],x}default:return}}})}t.cloneDeepWith=a})(ww)),ww}var $6;function yae(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=gae();function n(i){return r.cloneDeepWith(i)}t.cloneDeep=n})(jw)),jw}var Sw={},Cw={},G6;function SB(){return G6||(G6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function n(i,a=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<a;case"symbol":return!1;case"string":return r.test(i)}}t.isIndex=n})(Cw)),Cw}var Nw={},K6;function xae(){return K6||(K6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=iE();function n(i){return i!==null&&typeof i=="object"&&r.getTag(i)==="[object Arguments]"}t.isArguments=n})(Nw)),Nw}var Q6;function vae(){return Q6||(Q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=uB(),n=SB(),i=xae(),a=JA();function s(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&r.isDeepKey(l)&&o?.[l]==null?u=a.toPath(l):u=[l],u.length===0)return!1;let d=o;for(let f=0;f<u.length;f++){const p=u[f];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||i.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=s})(Sw)),Sw}var Y6;function bae(){return Y6||(Y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=bB(),n=XA(),i=yae(),a=eE(),s=vae();function o(l,u){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=i.cloneDeep(u),function(d){const f=a.get(d,l);return f===void 0?s.has(d,l):u===void 0?f===void 0:r.isMatch(f,u)}}t.matchesProperty=o})(bw)),bw}var Z6;function jae(){return Z6||(Z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=gB(),n=dae(),i=pae(),a=bae();function s(o){if(o==null)return r.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):i.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(sw)),sw}var X6;function wae(){return X6||(X6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=aae(),n=sae(),i=gB(),a=cae(),s=jae();function o(l,u=i.identity){return a.isArrayLikeObject(l)?r.uniqBy(Array.from(l),n.ary(s.iteratee(u),1)):[]}t.uniqBy=o})(X5)),X5}var Aw,J6;function Sae(){return J6||(J6=1,Aw=wae().uniqBy),Aw}var Cae=Sae();const eI=hc(Cae);function CB(t,r,n){return r===!0?eI(t,n):typeof r=="function"?eI(t,r):t}var Ew={exports:{}},_w={};var tI;function Nae(){if(tI)return _w;tI=1;var t=Hp(),r=jz();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var i=typeof Object.is=="function"?Object.is:n,a=r.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return _w.useSyncExternalStoreWithSelector=function(d,f,p,x,v){var w=s(null);if(w.current===null){var C={hasValue:!1,value:null};w.current=C}else C=w.current;w=l(function(){function T(q){if(!O){if(O=!0,D=q,q=x(q),v!==void 0&&C.hasValue){var W=C.value;if(v(W,q))return M=W}return M=q}if(W=M,i(D,q))return W;var J=x(q);return v!==void 0&&v(W,J)?(D=q,W):(D=q,M=J)}var O=!1,D,M,Y=p===void 0?null:p;return[function(){return T(f())},Y===null?void 0:function(){return T(Y())}]},[f,p,x,v]);var N=a(d,w[0],w[1]);return o(function(){C.hasValue=!0,C.value=N},[N]),u(N),N},_w}var rI;function Aae(){return rI||(rI=1,Ew.exports=Nae()),Ew.exports}var Eae=Aae(),aE=k.createContext(null),_ae=t=>t,ma=()=>{var t=k.useContext(aE);return t?t.store.dispatch:_ae},gv=()=>{},Tae=()=>gv,Iae=(t,r)=>t===r;function wr(t){var r=k.useContext(aE);return Eae.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:Tae,r?r.store.getState:gv,r?r.store.getState:gv,r?t:gv,Iae)}function Oae(t,r=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(r)}function kae(t,r=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(r)}function Dae(t,r="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${r}[${n}]`)}}var nI=t=>Array.isArray(t)?t:[t];function Pae(t){const r=Array.isArray(t[0])?t[0]:t;return Dae(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function Rae(t,r){const n=[],{length:i}=t;for(let a=0;a<i;a++)n.push(t[a].apply(null,r));return n}var Mae=class{constructor(t){this.value=t}deref(){return this.value}},Lae=typeof WeakRef<"u"?WeakRef:Mae,zae=0,iI=1;function Vx(){return{s:zae,v:void 0,o:null,p:null}}function NB(t,r={}){let n=Vx();const{resultEqualityCheck:i}=r;let a,s=0;function o(){let l=n;const{length:u}=arguments;for(let p=0,x=u;p<x;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let w=l.o;w===null&&(l.o=w=new WeakMap);const C=w.get(v);C===void 0?(l=Vx(),w.set(v,l)):l=C}else{let w=l.p;w===null&&(l.p=w=new Map);const C=w.get(v);C===void 0?(l=Vx(),w.set(v,l)):l=C}}const d=l;let f;if(l.s===iI)f=l.v;else if(f=t.apply(null,arguments),s++,i){const p=a?.deref?.()??a;p!=null&&i(p,f)&&(f=p,s!==0&&s--),a=typeof f=="object"&&f!==null||typeof f=="function"?new Lae(f):f}return d.s=iI,d.v=f,f}return o.clearCache=()=>{n=Vx(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Bae(t,...r){const n=typeof t=="function"?{memoize:t,memoizeOptions:r}:t,i=(...a)=>{let s=0,o=0,l,u={},d=a.pop();typeof d=="object"&&(u=d,d=a.pop()),Oae(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...u},{memoize:p,memoizeOptions:x=[],argsMemoize:v=NB,argsMemoizeOptions:w=[]}=f,C=nI(x),N=nI(w),T=Pae(a),O=p(function(){return s++,d.apply(null,arguments)},...C),D=v(function(){o++;const Y=Rae(T,arguments);return l=O.apply(null,Y),l},...N);return Object.assign(D,{resultFunc:d,memoizedResultFunc:O,dependencies:T,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:v})};return Object.assign(i,{withTypes:()=>i}),i}var ut=Bae(NB),Fae=Object.assign((t,r=ut)=>{kae(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return r(i,(...s)=>s.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>Fae}),Tw={},Iw={},Ow={},aI;function qae(){return aI||(aI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,a,s)=>{if(i!==a){const o=r(i),l=r(a);if(o===l&&o===0){if(i<a)return s==="desc"?1:-1;if(i>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=n})(Ow)),Ow}var kw={},Dw={},sI;function AB(){return sI||(sI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=r})(Dw)),Dw}var oI;function Uae(){return oI||(oI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=AB(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||r.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(kw)),kw}var lI;function Wae(){return lI||(lI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=qae(),n=Uae(),i=JA();function a(s,o,l,u){if(s==null)return[];l=u?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(v=>String(v));const d=(v,w)=>{let C=v;for(let N=0;N<w.length&&C!=null;++N)C=C[w[N]];return C},f=(v,w)=>w==null||v==null?w:typeof v=="object"&&"key"in v?Object.hasOwn(w,v.key)?w[v.key]:d(w,v.path):typeof v=="function"?v(w):Array.isArray(v)?d(w,v):typeof w=="object"?w[v]:w,p=o.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:i.toPath(v)}));return s.map(v=>({original:v,criteria:p.map(w=>f(w,v))})).slice().sort((v,w)=>{for(let C=0;C<p.length;C++){const N=r.compareValues(v.criteria[C],w.criteria[C],l[C]);if(N!==0)return N}return 0}).map(v=>v.original)}t.orderBy=a})(Iw)),Iw}var Pw={},cI;function Hae(){return cI||(cI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,i=1){const a=[],s=Math.floor(i),o=(l,u)=>{for(let d=0;d<l.length;d++){const f=l[d];Array.isArray(f)&&u<s?o(f,u+1):a.push(f)}};return o(n,0),a}t.flatten=r})(Pw)),Pw}var Rw={},dI;function EB(){return dI||(dI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=SB(),n=nE(),i=yB(),a=vB();function s(o,l,u){return i.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&r.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?a.isEqualsSameValueZero(u[l],o):!1}t.isIterateeCall=s})(Rw)),Rw}var uI;function Vae(){return uI||(uI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Wae(),n=Hae(),i=EB();function a(s,...o){const l=o.length;return l>1&&i.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&i.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),r.orderBy(s,n.flatten(o),["asc"])}t.sortBy=a})(Tw)),Tw}var Mw,hI;function $ae(){return hI||(hI=1,Mw=Vae().sortBy),Mw}var Gae=$ae();const l2=hc(Gae);var _B=t=>t.legend.settings,Kae=t=>t.legend.size,Qae=t=>t.legend.payload,Yae=ut([Qae,_B],(t,r)=>{var{itemSorter:n}=r,i=t.flat(1);return n?l2(i,n):i});function Zae(){return wr(Yae)}var $x=1;function TB(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,n]=k.useState({height:0,left:0,top:0,width:0}),i=k.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-r.height)>$x||Math.abs(o.left-r.left)>$x||Math.abs(o.top-r.top)>$x||Math.abs(o.width-r.width)>$x)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[r.width,r.height,r.top,r.left,...t]);return[r,i]}function ll(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Xae=typeof Symbol=="function"&&Symbol.observable||"@@observable",fI=Xae,Lw=()=>Math.random().toString(36).substring(7).split("").join("."),Jae={INIT:`@@redux/INIT${Lw()}`,REPLACE:`@@redux/REPLACE${Lw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lw()}`},Kv=Jae;function sE(t){if(typeof t!="object"||t===null)return!1;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r||Object.getPrototypeOf(t)===null}function IB(t,r,n){if(typeof t!="function")throw new Error(ll(2));if(typeof r=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ll(0));if(typeof r=="function"&&typeof n>"u"&&(n=r,r=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ll(1));return n(IB)(t,r)}let i=t,a=r,s=new Map,o=s,l=0,u=!1;function d(){o===s&&(o=new Map,s.forEach((N,T)=>{o.set(T,N)}))}function f(){if(u)throw new Error(ll(3));return a}function p(N){if(typeof N!="function")throw new Error(ll(4));if(u)throw new Error(ll(5));let T=!0;d();const O=l++;return o.set(O,N),function(){if(T){if(u)throw new Error(ll(6));T=!1,d(),o.delete(O),s=null}}}function x(N){if(!sE(N))throw new Error(ll(7));if(typeof N.type>"u")throw new Error(ll(8));if(typeof N.type!="string")throw new Error(ll(17));if(u)throw new Error(ll(9));try{u=!0,a=i(a,N)}finally{u=!1}return(s=o).forEach(O=>{O()}),N}function v(N){if(typeof N!="function")throw new Error(ll(10));i=N,x({type:Kv.REPLACE})}function w(){const N=p;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(ll(11));function O(){const M=T;M.next&&M.next(f())}return O(),{unsubscribe:N(O)}},[fI](){return this}}}return x({type:Kv.INIT}),{dispatch:x,subscribe:p,getState:f,replaceReducer:v,[fI]:w}}function ese(t){Object.keys(t).forEach(r=>{const n=t[r];if(typeof n(void 0,{type:Kv.INIT})>"u")throw new Error(ll(12));if(typeof n(void 0,{type:Kv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ll(13))})}function OB(t){const r=Object.keys(t),n={};for(let s=0;s<r.length;s++){const o=r[s];typeof t[o]=="function"&&(n[o]=t[o])}const i=Object.keys(n);let a;try{ese(n)}catch(s){a=s}return function(o={},l){if(a)throw a;let u=!1;const d={};for(let f=0;f<i.length;f++){const p=i[f],x=n[p],v=o[p],w=x(v,l);if(typeof w>"u")throw l&&l.type,new Error(ll(14));d[p]=w,u=u||w!==v}return u=u||i.length!==Object.keys(o).length,u?d:o}}function Qv(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,n)=>(...i)=>r(n(...i)))}function tse(...t){return r=>(n,i)=>{const a=r(n,i);let s=()=>{throw new Error(ll(15))};const o={getState:a.getState,dispatch:(u,...d)=>s(u,...d)},l=t.map(u=>u(o));return s=Qv(...l)(a.dispatch),{...a,dispatch:s}}}function kB(t){return sE(t)&&"type"in t&&typeof t.type=="string"}var DB=Symbol.for("immer-nothing"),mI=Symbol.for("immer-draftable"),Hl=Symbol.for("immer-state");function Sd(t,...r){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Pc=Object,zp=Pc.getPrototypeOf,Yv="constructor",c2="prototype",aN="configurable",Zv="enumerable",yv="writable",Hg="value",oh=t=>!!t&&!!t[Hl];function Ed(t){return t?PB(t)||u2(t)||!!t[mI]||!!t[Yv]?.[mI]||h2(t)||f2(t):!1}var rse=Pc[c2][Yv].toString(),pI=new WeakMap;function PB(t){if(!t||!oE(t))return!1;const r=zp(t);if(r===null||r===Pc[c2])return!0;const n=Pc.hasOwnProperty.call(r,Yv)&&r[Yv];if(n===Object)return!0;if(!gp(n))return!1;let i=pI.get(n);return i===void 0&&(i=Function.toString.call(n),pI.set(n,i)),i===rse}function d2(t,r,n=!0){jy(t)===0?(n?Reflect.ownKeys(t):Pc.keys(t)).forEach(a=>{r(a,t[a],t)}):t.forEach((i,a)=>r(a,i,t))}function jy(t){const r=t[Hl];return r?r.type_:u2(t)?1:h2(t)?2:f2(t)?3:0}var gI=(t,r,n=jy(t))=>n===2?t.has(r):Pc[c2].hasOwnProperty.call(t,r),sN=(t,r,n=jy(t))=>n===2?t.get(r):t[r],Xv=(t,r,n,i=jy(t))=>{i===2?t.set(r,n):i===3?t.add(n):t[r]=n};function nse(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}var u2=Array.isArray,h2=t=>t instanceof Map,f2=t=>t instanceof Set,oE=t=>typeof t=="object",gp=t=>typeof t=="function",zw=t=>typeof t=="boolean";function ise(t){const r=+t;return Number.isInteger(r)&&String(r)===t}var Wu=t=>t.copy_||t.base_,lE=t=>t.modified_?t.copy_:t.base_;function oN(t,r){if(h2(t))return new Map(t);if(f2(t))return new Set(t);if(u2(t))return Array[c2].slice.call(t);const n=PB(t);if(r===!0||r==="class_only"&&!n){const i=Pc.getOwnPropertyDescriptors(t);delete i[Hl];let a=Reflect.ownKeys(i);for(let s=0;s<a.length;s++){const o=a[s],l=i[o];l[yv]===!1&&(l[yv]=!0,l[aN]=!0),(l.get||l.set)&&(i[o]={[aN]:!0,[yv]:!0,[Zv]:l[Zv],[Hg]:t[o]})}return Pc.create(zp(t),i)}else{const i=zp(t);if(i!==null&&n)return{...t};const a=Pc.create(i);return Pc.assign(a,t)}}function cE(t,r=!1){return m2(t)||oh(t)||!Ed(t)||(jy(t)>1&&Pc.defineProperties(t,{set:Gx,add:Gx,clear:Gx,delete:Gx}),Pc.freeze(t),r&&d2(t,(n,i)=>{cE(i,!0)},!1)),t}function ase(){Sd(2)}var Gx={[Hg]:ase};function m2(t){return t===null||!oE(t)?!0:Pc.isFrozen(t)}var Jv="MapSet",lN="Patches",yI="ArrayMethods",RB={};function fm(t){const r=RB[t];return r||Sd(0,t),r}var xI=t=>!!RB[t],Vg,MB=()=>Vg,sse=(t,r)=>({drafts_:[],parent_:t,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:xI(Jv)?fm(Jv):void 0,arrayMethodsPlugin_:xI(yI)?fm(yI):void 0});function vI(t,r){r&&(t.patchPlugin_=fm(lN),t.patches_=[],t.inversePatches_=[],t.patchListener_=r)}function cN(t){dN(t),t.drafts_.forEach(ose),t.drafts_=null}function dN(t){t===Vg&&(Vg=t.parent_)}var bI=t=>Vg=sse(Vg,t);function ose(t){const r=t[Hl];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function jI(t,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];if(t!==void 0&&t!==n){n[Hl].modified_&&(cN(r),Sd(4)),Ed(t)&&(t=wI(r,t));const{patchPlugin_:a}=r;a&&a.generateReplacementPatches_(n[Hl].base_,t,r)}else t=wI(r,n);return lse(r,t,!0),cN(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),t!==DB?t:void 0}function wI(t,r){if(m2(r))return r;const n=r[Hl];if(!n)return eb(r,t.handledSet_,t);if(!p2(n,t))return r;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(t);BB(n,t)}return n.copy_}function lse(t,r,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&cE(r,n)}function LB(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var p2=(t,r)=>t.scope_===r,cse=[];function zB(t,r,n,i){const a=Wu(t),s=t.type_;if(i!==void 0&&sN(a,i,s)===r){Xv(a,i,n,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;d2(a,(u,d)=>{if(oh(d)){const f=l.get(d)||[];f.push(u),l.set(d,f)}})}const o=t.draftLocations_.get(r)??cse;for(const l of o)Xv(a,l,n,s)}function dse(t,r,n){t.callbacks_.push(function(a){const s=r;if(!s||!p2(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const o=lE(s);zB(t,s.draft_??s,o,n),BB(s,a)})}function BB(t,r){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:i}=r;if(i){const a=i.getPath(t);a&&i.generatePatches_(t,a,r)}LB(t)}}function use(t,r,n){const{scope_:i}=t;if(oh(n)){const a=n[Hl];p2(a,i)&&a.callbacks_.push(function(){xv(t);const o=lE(a);zB(t,n,o,r)})}else Ed(n)&&t.callbacks_.push(function(){const s=Wu(t);t.type_===3?s.has(n)&&eb(n,i.handledSet_,i):sN(s,r,t.type_)===n&&i.drafts_.length>1&&(t.assigned_.get(r)??!1)===!0&&t.copy_&&eb(sN(t.copy_,r,t.type_),i.handledSet_,i)})}function eb(t,r,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||oh(t)||r.has(t)||!Ed(t)||m2(t)||(r.add(t),d2(t,(i,a)=>{if(oh(a)){const s=a[Hl];if(p2(s,n)){const o=lE(s);Xv(t,i,o,t.type_),LB(s)}}else Ed(a)&&eb(a,r,n)})),t}function hse(t,r){const n=u2(t),i={type_:n?1:0,scope_:r?r.scope_:MB(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:r,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,s=tb;n&&(a=[i],s=$g);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return i.draft_=l,i.revoke_=o,[l,i]}var tb={get(t,r){if(r===Hl)return t;let n=t.scope_.arrayMethodsPlugin_;const i=t.type_===1&&typeof r=="string";if(i&&n?.isArrayOperationMethod(r))return n.createMethodInterceptor(t,r);const a=Wu(t);if(!gI(a,r,t.type_))return fse(t,a,r);const s=a[r];if(t.finalized_||!Ed(s)||i&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&ise(r))return s;if(s===Bw(t.base_,r)){xv(t);const o=t.type_===1?+r:r,l=hN(t.scope_,s,t,o);return t.copy_[o]=l}return s},has(t,r){return r in Wu(t)},ownKeys(t){return Reflect.ownKeys(Wu(t))},set(t,r,n){const i=FB(Wu(t),r);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const a=Bw(Wu(t),r),s=a?.[Hl];if(s&&s.base_===n)return t.copy_[r]=n,t.assigned_.set(r,!1),!0;if(nse(n,a)&&(n!==void 0||gI(t.base_,r,t.type_)))return!0;xv(t),uN(t)}return t.copy_[r]===n&&(n!==void 0||r in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[r])||(t.copy_[r]=n,t.assigned_.set(r,!0),use(t,r,n)),!0},deleteProperty(t,r){return xv(t),Bw(t.base_,r)!==void 0||r in t.base_?(t.assigned_.set(r,!1),uN(t)):t.assigned_.delete(r),t.copy_&&delete t.copy_[r],!0},getOwnPropertyDescriptor(t,r){const n=Wu(t),i=Reflect.getOwnPropertyDescriptor(n,r);return i&&{[yv]:!0,[aN]:t.type_!==1||r!=="length",[Zv]:i[Zv],[Hg]:n[r]}},defineProperty(){Sd(11)},getPrototypeOf(t){return zp(t.base_)},setPrototypeOf(){Sd(12)}},$g={};for(let t in tb){let r=tb[t];$g[t]=function(){const n=arguments;return n[0]=n[0][0],r.apply(this,n)}}$g.deleteProperty=function(t,r){return $g.set.call(this,t,r,void 0)};$g.set=function(t,r,n){return tb.set.call(this,t[0],r,n,t[0])};function Bw(t,r){const n=t[Hl];return(n?Wu(n):t)[r]}function fse(t,r,n){const i=FB(r,n);return i?Hg in i?i[Hg]:i.get?.call(t.draft_):void 0}function FB(t,r){if(!(r in t))return;let n=zp(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,r);if(i)return i;n=zp(n)}}function uN(t){t.modified_||(t.modified_=!0,t.parent_&&uN(t.parent_))}function xv(t){t.copy_||(t.assigned_=new Map,t.copy_=oN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var mse=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,a)=>{if(gp(n)&&!gp(i)){const o=i;i=n;const l=this;return function(d=o,...f){return l.produce(d,p=>i.call(this,p,...f))}}gp(i)||Sd(6),a!==void 0&&!gp(a)&&Sd(7);let s;if(Ed(n)){const o=bI(this),l=hN(o,n,void 0);let u=!0;try{s=i(l),u=!1}finally{u?cN(o):dN(o)}return vI(o,a),jI(s,o)}else if(!n||!oE(n)){if(s=i(n),s===void 0&&(s=n),s===DB&&(s=void 0),this.autoFreeze_&&cE(s,!0),a){const o=[],l=[];fm(lN).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else Sd(1,n)},this.produceWithPatches=(n,i)=>{if(gp(n))return(l,...u)=>this.produceWithPatches(l,d=>n(d,...u));let a,s;return[this.produce(n,i,(l,u)=>{a=l,s=u}),a,s]},zw(r?.autoFreeze)&&this.setAutoFreeze(r.autoFreeze),zw(r?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),zw(r?.useStrictIteration)&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Ed(r)||Sd(8),oh(r)&&(r=Ad(r));const n=bI(this),i=hN(n,r,void 0);return i[Hl].isManual_=!0,dN(n),i}finishDraft(r,n){const i=r&&r[Hl];(!i||!i.isManual_)&&Sd(9);const{scope_:a}=i;return vI(a,n),jI(void 0,a)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,n){let i;for(i=n.length-1;i>=0;i--){const s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));const a=fm(lN).applyPatches_;return oh(r)?a(r,n):this.produce(r,s=>a(s,n))}};function hN(t,r,n,i){const[a,s]=h2(r)?fm(Jv).proxyMap_(r,n):f2(r)?fm(Jv).proxySet_(r,n):hse(r,n);return(n?.scope_??MB()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=i,n&&i!==void 0?dse(n,s,i):s.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=u;s.modified_&&d&&d.generatePatches_(s,[],u)}),a}function Ad(t){return oh(t)||Sd(10,t),qB(t)}function qB(t){if(!Ed(t)||m2(t))return t;const r=t[Hl];let n,i=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=oN(t,r.scope_.immer_.useStrictShallowCopy_),i=r.scope_.immer_.shouldUseStrictIteration()}else n=oN(t,!0);return d2(n,(a,s)=>{Xv(n,a,qB(s))},i),r&&(r.finalized_=!1),n}var pse=new mse,UB=pse.produce;function WB(t){return({dispatch:n,getState:i})=>a=>s=>typeof s=="function"?s(n,i,t):a(s)}var gse=WB(),yse=WB,xse=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qv:Qv.apply(null,arguments)};function sd(t,r){function n(...i){if(r){let a=r(...i);if(!a)throw new Error(Lc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>kB(i)&&i.type===t,n}var HB=class bg extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,bg.prototype)}static get[Symbol.species](){return bg}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new bg(...r[0].concat(this)):new bg(...r.concat(this))}};function SI(t){return Ed(t)?UB(t,()=>{}):t}function Kx(t,r,n){return t.has(r)?t.get(r):t.set(r,n(r)).get(r)}function vse(t){return typeof t=="boolean"}var bse=()=>function(r){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=r??{};let o=new HB;return n&&(vse(n)?o.push(gse):o.push(yse(n.extraArgument))),o},VB="RTK_autoBatch",qa=()=>t=>({payload:t,meta:{[VB]:!0}}),CI=t=>r=>{setTimeout(r,t)},$B=(t={type:"raf"})=>r=>(...n)=>{const i=r(...n);let a=!0,s=!1,o=!1;const l=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:CI(10):t.type==="callback"?t.queueNotification:CI(t.timeout),d=()=>{o=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},i,{subscribe(f){const p=()=>a&&f(),x=i.subscribe(p);return l.add(f),()=>{x(),l.delete(f)}},dispatch(f){try{return a=!f?.meta?.[VB],s=!a,s&&(o||(o=!0,u(d))),i.dispatch(f)}finally{a=!0}}})},jse=t=>function(n){const{autoBatch:i=!0}=n??{};let a=new HB(t);return i&&a.push($B(typeof i=="object"?i:void 0)),a};function wse(t){const r=bse(),{reducer:n=void 0,middleware:i,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(sE(n))l=OB(n);else throw new Error(Lc(1));let u;typeof i=="function"?u=i(r):u=r();let d=Qv;a&&(d=xse({trace:!1,...typeof a=="object"&&a}));const f=tse(...u),p=jse(f);let x=typeof o=="function"?o(p):p();const v=d(...x);return IB(l,s,v)}function GB(t){const r={},n=[];let i;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Lc(28));if(l in r)throw new Error(Lc(29));return r[l]=o,a},addAsyncThunk(s,o){return o.pending&&(r[s.pending.type]=o.pending),o.rejected&&(r[s.rejected.type]=o.rejected),o.fulfilled&&(r[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return n.push({matcher:s,reducer:o}),a},addDefaultCase(s){return i=s,a}};return t(a),[r,n,i]}function Sse(t){return typeof t=="function"}function Cse(t,r){let[n,i,a]=GB(r),s;if(Sse(t))s=()=>SI(t());else{const l=SI(t);s=()=>l}function o(l=s(),u){let d=[n[u.type],...i.filter(({matcher:f})=>f(u)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,p)=>{if(p)if(oh(f)){const v=p(f,u);return v===void 0?f:v}else{if(Ed(f))return UB(f,x=>p(x,u));{const x=p(f,u);if(x===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return f},l)}return o.getInitialState=s,o}var Nse="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ase=(t=21)=>{let r="",n=t;for(;n--;)r+=Nse[Math.random()*64|0];return r},Ese=Symbol.for("rtk-slice-createasyncthunk");function _se(t,r){return`${t}/${r}`}function Tse({creators:t}={}){const r=t?.asyncThunk?.[Ese];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Lc(11));const o=(typeof i.reducers=="function"?i.reducers(Ose()):i.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(D,M){const Y=typeof D=="string"?D:D.type;if(!Y)throw new Error(Lc(12));if(Y in u.sliceCaseReducersByType)throw new Error(Lc(13));return u.sliceCaseReducersByType[Y]=M,d},addMatcher(D,M){return u.sliceMatchers.push({matcher:D,reducer:M}),d},exposeAction(D,M){return u.actionCreators[D]=M,d},exposeCaseReducer(D,M){return u.sliceCaseReducersByName[D]=M,d}};l.forEach(D=>{const M=o[D],Y={reducerName:D,type:_se(a,D),createNotation:typeof i.reducers=="function"};Dse(M)?Rse(Y,M,d,r):kse(Y,M,d)});function f(){const[D={},M=[],Y=void 0]=typeof i.extraReducers=="function"?GB(i.extraReducers):[i.extraReducers],q={...D,...u.sliceCaseReducersByType};return Cse(i.initialState,W=>{for(let J in q)W.addCase(J,q[J]);for(let J of u.sliceMatchers)W.addMatcher(J.matcher,J.reducer);for(let J of M)W.addMatcher(J.matcher,J.reducer);Y&&W.addDefaultCase(Y)})}const p=D=>D,x=new Map,v=new WeakMap;let w;function C(D,M){return w||(w=f()),w(D,M)}function N(){return w||(w=f()),w.getInitialState()}function T(D,M=!1){function Y(W){let J=W[D];return typeof J>"u"&&M&&(J=Kx(v,Y,N)),J}function q(W=p){const J=Kx(x,M,()=>new WeakMap);return Kx(J,W,()=>{const z={};for(const[G,ne]of Object.entries(i.selectors??{}))z[G]=Ise(ne,W,()=>Kx(v,W,N),M);return z})}return{reducerPath:D,getSelectors:q,get selectors(){return q(Y)},selectSlice:Y}}const O={name:a,reducer:C,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:N,...T(s),injectInto(D,{reducerPath:M,...Y}={}){const q=M??s;return D.inject({reducerPath:q,reducer:C},Y),{...O,...T(q,!0)}}};return O}}function Ise(t,r,n,i){function a(s,...o){let l=r(s);return typeof l>"u"&&i&&(l=n()),t(l,...o)}return a.unwrapped=t,a}var fc=Tse();function Ose(){function t(r,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...n}}return t.withTypes=()=>t,{reducer(r){return Object.assign({[r.name](...n){return r(...n)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:n}},asyncThunk:t}}function kse({type:t,reducerName:r,createNotation:n},i,a){let s,o;if("reducer"in i){if(n&&!Pse(i))throw new Error(Lc(17));s=i.reducer,o=i.prepare}else s=i;a.addCase(t,s).exposeCaseReducer(r,s).exposeAction(r,o?sd(t,o):sd(t))}function Dse(t){return t._reducerDefinitionType==="asyncThunk"}function Pse(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Rse({type:t,reducerName:r},n,i,a){if(!a)throw new Error(Lc(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:u,settled:d,options:f}=n,p=a(t,s,f);i.exposeAction(r,p),o&&i.addCase(p.fulfilled,o),l&&i.addCase(p.pending,l),u&&i.addCase(p.rejected,u),d&&i.addMatcher(p.settled,d),i.exposeCaseReducer(r,{fulfilled:o||Qx,pending:l||Qx,rejected:u||Qx,settled:d||Qx})}function Qx(){}var Mse="task",KB="listener",QB="completed",dE="cancelled",Lse=`task-${dE}`,zse=`task-${QB}`,fN=`${KB}-${dE}`,Bse=`${KB}-${QB}`,g2=class{constructor(t){this.code=t,this.message=`${Mse} ${dE} (reason: ${t})`}name="TaskAbortError";message},uE=(t,r)=>{if(typeof t!="function")throw new TypeError(Lc(32))},rb=()=>{},YB=(t,r=rb)=>(t.catch(r),t),ZB=(t,r)=>(t.addEventListener("abort",r,{once:!0}),()=>t.removeEventListener("abort",r)),Zf=t=>{if(t.aborted)throw new g2(t.reason)};function XB(t,r){let n=rb;return new Promise((i,a)=>{const s=()=>a(new g2(t.reason));if(t.aborted){s();return}n=ZB(t,s),r.finally(()=>n()).then(i,a)}).finally(()=>{n=rb})}var Fse=async(t,r)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof g2?"cancelled":"rejected",error:n}}finally{r?.()}},nb=t=>r=>YB(XB(t,r).then(n=>(Zf(t),n))),JB=t=>{const r=nb(t);return n=>r(new Promise(i=>setTimeout(i,n)))},{assign:Ap}=Object,NI={},y2="listenerMiddleware",qse=(t,r)=>{const n=i=>ZB(t,()=>i.abort(t.reason));return(i,a)=>{uE(i);const s=new AbortController;n(s);const o=Fse(async()=>{Zf(t),Zf(s.signal);const l=await i({pause:nb(s.signal),delay:JB(s.signal),signal:s.signal});return Zf(s.signal),l},()=>s.abort(zse));return a?.autoJoin&&r.push(o.catch(rb)),{result:nb(t)(o),cancel(){s.abort(Lse)}}}},Use=(t,r)=>{const n=async(i,a)=>{Zf(r);let s=()=>{};const l=[new Promise((u,d)=>{let f=t({predicate:i,effect:(p,x)=>{x.unsubscribe(),u([p,x.getState(),x.getOriginalState()])}});s=()=>{f(),d()}})];a!=null&&l.push(new Promise(u=>setTimeout(u,a,null)));try{const u=await XB(r,Promise.race(l));return Zf(r),u}finally{s()}};return(i,a)=>YB(n(i,a))},e9=t=>{let{type:r,actionCreator:n,matcher:i,predicate:a,effect:s}=t;if(r)a=sd(r).match;else if(n)r=n.type,a=n.match;else if(i)a=i;else if(!a)throw new Error(Lc(21));return uE(s),{predicate:a,type:r,effect:s}},t9=Ap(t=>{const{type:r,predicate:n,effect:i}=e9(t);return{id:Ase(),effect:i,type:r,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Lc(22))}}},{withTypes:()=>t9}),AI=(t,r)=>{const{type:n,effect:i,predicate:a}=e9(r);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===a)&&s.effect===i)},mN=t=>{t.pending.forEach(r=>{r.abort(fN)})},Wse=(t,r)=>()=>{for(const n of r.keys())mN(n);t.clear()},EI=(t,r,n)=>{try{t(r,n)}catch(i){setTimeout(()=>{throw i},0)}},r9=Ap(sd(`${y2}/add`),{withTypes:()=>r9}),Hse=sd(`${y2}/removeAll`),n9=Ap(sd(`${y2}/remove`),{withTypes:()=>n9}),Vse=(...t)=>{console.error(`${y2}/error`,...t)},wy=(t={})=>{const r=new Map,n=new Map,i=v=>{const w=n.get(v)??0;n.set(v,w+1)},a=v=>{const w=n.get(v)??1;w===1?n.delete(v):n.set(v,w-1)},{extra:s,onError:o=Vse}=t;uE(o);const l=v=>(v.unsubscribe=()=>r.delete(v.id),r.set(v.id,v),w=>{v.unsubscribe(),w?.cancelActive&&mN(v)}),u=v=>{const w=AI(r,v)??t9(v);return l(w)};Ap(u,{withTypes:()=>u});const d=v=>{const w=AI(r,v);return w&&(w.unsubscribe(),v.cancelActive&&mN(w)),!!w};Ap(d,{withTypes:()=>d});const f=async(v,w,C,N)=>{const T=new AbortController,O=Use(u,T.signal),D=[];try{v.pending.add(T),i(v),await Promise.resolve(v.effect(w,Ap({},C,{getOriginalState:N,condition:(M,Y)=>O(M,Y).then(Boolean),take:O,delay:JB(T.signal),pause:nb(T.signal),extra:s,signal:T.signal,fork:qse(T.signal,D),unsubscribe:v.unsubscribe,subscribe:()=>{r.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((M,Y,q)=>{M!==T&&(M.abort(fN),q.delete(M))})},cancel:()=>{T.abort(fN),v.pending.delete(T)},throwIfCancelled:()=>{Zf(T.signal)}})))}catch(M){M instanceof g2||EI(o,M,{raisedBy:"effect"})}finally{await Promise.all(D),T.abort(Bse),a(v),v.pending.delete(T)}},p=Wse(r,n);return{middleware:v=>w=>C=>{if(!kB(C))return w(C);if(r9.match(C))return u(C.payload);if(Hse.match(C)){p();return}if(n9.match(C))return d(C.payload);let N=v.getState();const T=()=>{if(N===NI)throw new Error(Lc(23));return N};let O;try{if(O=w(C),r.size>0){const D=v.getState(),M=Array.from(r.values());for(const Y of M){let q=!1;try{q=Y.predicate(C,D,N)}catch(W){q=!1,EI(o,W,{raisedBy:"predicate"})}q&&f(Y,C,v,T)}}}finally{N=NI}return O},startListening:u,stopListening:d,clearListeners:p}};function Lc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $se={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},i9=fc({name:"chartLayout",initialState:$se,reducers:{setLayout(t,r){t.layoutType=r.payload},setChartSize(t,r){t.width=r.payload.width,t.height=r.payload.height},setMargin(t,r){var n,i,a,s;t.margin.top=(n=r.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=r.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(a=r.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=r.payload.left)!==null&&s!==void 0?s:0},setScale(t,r){t.scale=r.payload}}}),{setMargin:Gse,setLayout:Kse,setChartSize:Qse,setScale:Yse}=i9.actions,Zse=i9.reducer;function a9(t,r,n){return Array.isArray(t)&&t&&r+n!==0?t.slice(r,n+1):t}function oa(t){return Number.isFinite(t)}function hu(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function _I(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function bp(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_I(Object(n),!0).forEach(function(i){Xse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Xse(t,r,n){return(r=Jse(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Jse(t){var r=eoe(t,"string");return typeof r=="symbol"?r:r+""}function eoe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ii(t,r,n){return _a(t)||_a(r)?n:uu(r)?hm(t,r,n):typeof r=="function"?r(t):n}var toe=(t,r,n)=>{if(r&&n){var{width:i,height:a}=n,{align:s,verticalAlign:o,layout:l}=r;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&or(t[s]))return bp(bp({},t),{},{[s]:t[s]+(i||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&or(t[o]))return bp(bp({},t),{},{[o]:t[o]+(a||0)})}return t},yu=(t,r)=>t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis",s9=(t,r,n,i)=>{if(i)return t.map(l=>l.coordinate);var a,s,o=t.map(l=>(l.coordinate===r&&(a=!0),l.coordinate===n&&(s=!0),l.coordinate));return a||o.push(r),s||o.push(n),o},o9=(t,r,n)=>{if(!t)return null;var{duplicateDomain:i,type:a,range:s,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:f,ticks:p,niceTicks:x,axisType:v}=t;if(!o)return null;var w=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,C=a==="category"&&o.bandwidth?o.bandwidth()/w:0;if(C=v==="angleAxis"&&s&&s.length>=2?Fo(s[0]-s[1])*2*C:C,p||x){var N=(p||x||[]).map((T,O)=>{var D=i?i.indexOf(T):T;return{coordinate:o(D)+C,value:T,offset:C,index:O}});return N.filter(T=>!ad(T.coordinate))}return u&&d?d.map((T,O)=>({coordinate:o(T)+C,value:T,index:O,offset:C})):o.ticks&&f!=null?o.ticks(f).map((T,O)=>({coordinate:o(T)+C,value:T,offset:C,index:O})):o.domain().map((T,O)=>({coordinate:o(T)+C,value:i?i[T]:T,index:O,offset:C}))},TI=1e-4,roe=t=>{var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),a=Math.min(i[0],i[1])-TI,s=Math.max(i[0],i[1])+TI,o=t(r[0]),l=t(r[n-1]);(o<a||o>s||l<a||l>s)&&t.domain([r[0],r[n-1]])}},noe=(t,r)=>{if(!r||r.length!==2||!or(r[0])||!or(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[t[0],t[1]];return(!or(t[0])||t[0]<n)&&(a[0]=n),(!or(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},ioe=t=>{var r,n=t.length;if(!(n<=0)){var i=(r=t[0])===null||r===void 0?void 0:r.length;if(!(i==null||i<=0))for(var a=0;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var u=t[l],d=u?.[a];if(d!=null){var f=d[1],p=d[0],x=ad(f)?p:f;x>=0?(d[0]=s,d[1]=s+x,s=f):(d[0]=o,d[1]=o+x,o=f)}}}},aoe=t=>{var r,n=t.length;if(!(n<=0)){var i=(r=t[0])===null||r===void 0?void 0:r.length;if(!(i==null||i<=0))for(var a=0;a<i;++a)for(var s=0,o=0;o<n;++o){var l=t[o],u=l?.[a];if(u!=null){var d=ad(u[1])?u[0]:u[1];d>=0?(u[0]=s,u[1]=s+d,s=u[1]):(u[0]=0,u[1]=0)}}}},soe={sign:ioe,expand:Aie,none:um,silhouette:Eie,wiggle:_ie,positive:aoe},ooe=(t,r,n)=>{var i,a=(i=soe[n])!==null&&i!==void 0?i:um,s=Nie().keys(r).value((l,u)=>Number(Ii(l,u,0))).order(nN).offset(a),o=s(t);return o.forEach((l,u)=>{l.forEach((d,f)=>{var p=Ii(t[f],r[u],0);Array.isArray(p)&&p.length===2&&or(p[0])&&or(p[1])&&(d[0]=p[0],d[1]=p[1])})}),o};function l9(t){return t==null?void 0:String(t)}function ib(t){var{axis:r,ticks:n,bandSize:i,entry:a,index:s,dataKey:o}=t;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!_a(a[r.dataKey])){var l=fB(n,"value",a[r.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var u=Ii(a,_a(o)?r.dataKey:o);return _a(u)?null:r.scale(u)}var II=t=>{var{axis:r,ticks:n,offset:i,bandSize:a,entry:s,index:o}=t;if(r.type==="category")return n[o]?n[o].coordinate+i:null;var l=Ii(s,r.dataKey,r.scale.domain()[o]);return _a(l)?null:r.scale(l)-a/2+i},loe=t=>{var{numericAxis:r}=t,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},coe=t=>{var r=t.flat(2).filter(or);return[Math.min(...r),Math.max(...r)]},doe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],uoe=(t,r,n)=>{if(t!=null)return doe(Object.keys(t).reduce((i,a)=>{var s=t[a];if(!s)return i;var{stackedData:o}=s,l=o.reduce((u,d)=>{var f=a9(d,r,n),p=coe(f);return!oa(p[0])||!oa(p[1])?u:[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},OI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,df=(t,r,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var a=l2(r,f=>f.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],d=a[o-1];s=Math.min((u?.coordinate||0)-(d?.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function DI(t){var{tooltipEntrySettings:r,dataKey:n,payload:i,value:a,name:s}=t;return bp(bp({},r),{},{dataKey:n,payload:i,value:a,name:s})}function pf(t,r){if(t)return String(t);if(typeof r=="string")return r}var hoe=(t,r)=>{if(r==="horizontal")return t.chartX;if(r==="vertical")return t.chartY},foe=(t,r)=>r==="centric"?t.angle:t.radius,ph=t=>t.layout.width,gh=t=>t.layout.height,moe=t=>t.layout.scale,c9=t=>t.layout.margin,x2=ut(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),v2=ut(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),d9="data-recharts-item-index",u9="data-recharts-item-id",Sy=60;function PI(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Yx(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?PI(Object(n),!0).forEach(function(i){poe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function poe(t,r,n){return(r=goe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function goe(t){var r=yoe(t,"string");return typeof r=="symbol"?r:r+""}function yoe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var xoe=t=>t.brush.height;function voe(t){var r=v2(t);return r.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var a=typeof i.width=="number"?i.width:Sy;return n+a}return n},0)}function boe(t){var r=v2(t);return r.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var a=typeof i.width=="number"?i.width:Sy;return n+a}return n},0)}function joe(t){var r=x2(t);return r.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function woe(t){var r=x2(t);return r.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var wo=ut([ph,gh,c9,xoe,voe,boe,joe,woe,_B,Kae],(t,r,n,i,a,s,o,l,u,d)=>{var f={left:(n.left||0)+a,right:(n.right||0)+s},p={top:(n.top||0)+o,bottom:(n.bottom||0)+l},x=Yx(Yx({},p),f),v=x.bottom;x.bottom+=i,x=toe(x,u,d);var w=t-x.left-x.right,C=r-x.top-x.bottom;return Yx(Yx({brushBottom:v},x),{},{width:Math.max(w,0),height:Math.max(C,0)})}),Soe=ut(wo,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),hE=ut(ph,gh,(t,r)=>({x:0,y:0,width:t,height:r})),Coe=k.createContext(null),Wo=()=>k.useContext(Coe)!=null,b2=t=>t.brush,j2=ut([b2,wo,c9],(t,r,n)=>({height:t.height,x:or(t.x)?t.x:r.left,y:or(t.y)?t.y:r.top+r.height+r.brushBottom-(n?.bottom||0),width:or(t.width)?t.width:r.width})),Fw={},qw={},Uw={},RI;function Noe(){return RI||(RI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,i,{signal:a,edges:s}={}){let o,l=null;const u=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),f=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},p=()=>{d&&f(),C()};let x=null;const v=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,p()},i)},w=()=>{x!==null&&(clearTimeout(x),x=null)},C=()=>{w(),o=void 0,l=null},N=()=>{f()},T=function(...O){if(a?.aborted)return;o=this,l=O;const D=x==null;v(),u&&D&&f()};return T.schedule=v,T.cancel=C,T.flush=N,a?.addEventListener("abort",C,{once:!0}),T}t.debounce=r})(Uw)),Uw}var MI;function Aoe(){return MI||(MI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Noe();function n(i,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:u}=s,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let f,p=null;const x=r.debounce(function(...C){f=i.apply(this,C),p=null},a,{edges:d}),v=function(...C){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(f=i.apply(this,C),p=Date.now(),x.cancel(),x.schedule(),f):(x.apply(this,C),f)},w=()=>(x.flush(),f);return v.cancel=x.cancel,v.flush=w,v}t.debounce=n})(qw)),qw}var LI;function Eoe(){return LI||(LI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Aoe();function n(i,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return r.debounce(i,a,{leading:o,maxWait:a,trailing:l})}t.throttle=n})(Fw)),Fw}var Ww,zI;function _oe(){return zI||(zI=1,Ww=Eoe().throttle),Ww}var Toe=_oe();const Ioe=hc(Toe);var ab=function(r,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!r))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>a[o++]))}},h9=(t,r,n)=>{var{width:i="100%",height:a="100%",aspect:s,maxHeight:o}=n,l=sh(i)?t:Number(i),u=sh(a)?r:Number(a);return s&&s>0&&(l?u=l/s:u&&(l=u*s),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:l,calculatedHeight:u}},Ooe={width:0,height:0,overflow:"visible"},koe={width:0,overflowX:"visible"},Doe={height:0,overflowY:"visible"},Poe={},Roe=t=>{var{width:r,height:n}=t,i=sh(r),a=sh(n);return i&&a?Ooe:i?koe:a?Doe:Poe};function Moe(t){var{width:r,height:n,aspect:i}=t,a=r,s=n;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:a,height:s}}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pN.apply(null,arguments)}function BI(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function FI(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?BI(Object(n),!0).forEach(function(i){Loe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Loe(t,r,n){return(r=zoe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function zoe(t){var r=Boe(t,"string");return typeof r=="symbol"?r:r+""}function Boe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var f9=k.createContext({width:-1,height:-1});function Foe(t){return hu(t.width)&&hu(t.height)}function m9(t){var{children:r,width:n,height:i}=t,a=k.useMemo(()=>({width:n,height:i}),[n,i]);return Foe(a)?k.createElement(f9.Provider,{value:a},r):null}var fE=()=>k.useContext(f9),qoe=k.forwardRef((t,r)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:u,children:d,debounce:f=0,id:p,className:x,onResize:v,style:w={}}=t,C=k.useRef(null),N=k.useRef();N.current=v,k.useImperativeHandle(r,()=>C.current);var[T,O]=k.useState({containerWidth:i.width,containerHeight:i.height}),D=k.useCallback((J,z)=>{O(G=>{var ne=Math.round(J),Z=Math.round(z);return G.containerWidth===ne&&G.containerHeight===Z?G:{containerWidth:ne,containerHeight:Z}})},[]);k.useEffect(()=>{if(C.current==null||typeof ResizeObserver>"u")return vy;var J=Z=>{var ie,{width:me,height:ce}=Z[0].contentRect;D(me,ce),(ie=N.current)===null||ie===void 0||ie.call(N,me,ce)};f>0&&(J=Ioe(J,f,{trailing:!0,leading:!1}));var z=new ResizeObserver(J),{width:G,height:ne}=C.current.getBoundingClientRect();return D(G,ne),z.observe(C.current),()=>{z.disconnect()}},[D,f]);var{containerWidth:M,containerHeight:Y}=T;ab(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:q,calculatedHeight:W}=h9(M,Y,{width:a,height:s,aspect:n,maxHeight:u});return ab(q!=null&&q>0||W!=null&&W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,W,a,s,o,l,n),k.createElement("div",{id:p?"".concat(p):void 0,className:hi("recharts-responsive-container",x),style:FI(FI({},w),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:u}),ref:C},k.createElement("div",{style:Roe({width:a,height:s})},k.createElement(m9,{width:q,height:W},d)))}),Ic=k.forwardRef((t,r)=>{var n=fE();if(hu(n.width)&&hu(n.height))return t.children;var{width:i,height:a}=Moe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=h9(void 0,void 0,{width:i,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return or(s)&&or(o)?k.createElement(m9,{width:s,height:o},t.children):k.createElement(qoe,pN({},t,{width:i,height:a,ref:r}))});function p9(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var w2=()=>{var t,r=Wo(),n=wr(Soe),i=wr(j2),a=(t=wr(b2))===null||t===void 0?void 0:t.padding;return!r||!i||!a?n:{width:i.width-a.left-a.right,height:i.height-a.top-a.bottom,x:a.left,y:a.top}},Uoe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},g9=()=>{var t;return(t=wr(wo))!==null&&t!==void 0?t:Uoe},mE=()=>wr(ph),pE=()=>wr(gh),Woe=()=>wr(t=>t.layout.margin),Gn=t=>t.layout.layoutType,gf=()=>wr(Gn),Hoe=()=>{var t=gf();if(t==="horizontal"||t==="vertical")return t},Voe=()=>{var t=gf();return t!==void 0},S2=t=>{var r=ma(),n=Wo(),{width:i,height:a}=t,s=fE(),o=i,l=a;return s&&(o=s.width>0?s.width:i,l=s.height>0?s.height:a),k.useEffect(()=>{!n&&hu(o)&&hu(l)&&r(Qse({width:o,height:l}))},[r,n,o,l]),null},y9=Symbol.for("immer-nothing"),qI=Symbol.for("immer-draftable"),Bc=Symbol.for("immer-state");function Cd(t,...r){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Gg=Object.getPrototypeOf;function Bp(t){return!!t&&!!t[Bc]}function mm(t){return t?x9(t)||Array.isArray(t)||!!t[qI]||!!t.constructor?.[qI]||Cy(t)||N2(t):!1}var $oe=Object.prototype.constructor.toString(),UI=new WeakMap;function x9(t){if(!t||typeof t!="object")return!1;const r=Object.getPrototypeOf(t);if(r===null||r===Object.prototype)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=UI.get(n);return i===void 0&&(i=Function.toString.call(n),UI.set(n,i)),i===$oe}function sb(t,r,n=!0){C2(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{r(a,t[a],t)}):t.forEach((i,a)=>r(a,i,t))}function C2(t){const r=t[Bc];return r?r.type_:Array.isArray(t)?1:Cy(t)?2:N2(t)?3:0}function gN(t,r){return C2(t)===2?t.has(r):Object.prototype.hasOwnProperty.call(t,r)}function v9(t,r,n){const i=C2(t);i===2?t.set(r,n):i===3?t.add(n):t[r]=n}function Goe(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}function Cy(t){return t instanceof Map}function N2(t){return t instanceof Set}function Pf(t){return t.copy_||t.base_}function yN(t,r){if(Cy(t))return new Map(t);if(N2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=x9(t);if(r===!0||r==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Bc];let a=Reflect.ownKeys(i);for(let s=0;s<a.length;s++){const o=a[s],l=i[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Gg(t),i)}else{const i=Gg(t);if(i!==null&&n)return{...t};const a=Object.create(i);return Object.assign(a,t)}}function gE(t,r=!1){return A2(t)||Bp(t)||!mm(t)||(C2(t)>1&&Object.defineProperties(t,{set:Zx,add:Zx,clear:Zx,delete:Zx}),Object.freeze(t),r&&Object.values(t).forEach(n=>gE(n,!0))),t}function Koe(){Cd(2)}var Zx={value:Koe};function A2(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Qoe={};function pm(t){const r=Qoe[t];return r||Cd(0,t),r}var Kg;function b9(){return Kg}function Yoe(t,r){return{drafts_:[],parent_:t,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function WI(t,r){r&&(pm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=r)}function xN(t){vN(t),t.drafts_.forEach(Zoe),t.drafts_=null}function vN(t){t===Kg&&(Kg=t.parent_)}function HI(t){return Kg=Yoe(Kg,t)}function Zoe(t){const r=t[Bc];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function VI(t,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return t!==void 0&&t!==n?(n[Bc].modified_&&(xN(r),Cd(4)),mm(t)&&(t=ob(r,t),r.parent_||lb(r,t)),r.patches_&&pm("Patches").generateReplacementPatches_(n[Bc].base_,t,r.patches_,r.inversePatches_)):t=ob(r,n,[]),xN(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),t!==y9?t:void 0}function ob(t,r,n){if(A2(r))return r;const i=t.immer_.shouldUseStrictIteration(),a=r[Bc];if(!a)return sb(r,(s,o)=>$I(t,a,r,s,o,n),i),r;if(a.scope_!==t)return r;if(!a.modified_)return lb(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),sb(o,(u,d)=>$I(t,a,s,u,d,n,l),i),lb(t,s,!1),n&&t.patches_&&pm("Patches").generatePatches_(a,n,t.patches_,t.inversePatches_)}return a.copy_}function $I(t,r,n,i,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=A2(a);if(!(l&&!o)){if(Bp(a)){const u=s&&r&&r.type_!==3&&!gN(r.assigned_,i)?s.concat(i):void 0,d=ob(t,a,u);if(v9(n,i,d),Bp(d))t.canAutoFreeze_=!1;else return}else o&&n.add(a);if(mm(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||r&&r.base_&&r.base_[i]===a&&l)return;ob(t,a),(!r||!r.scope_.parent_)&&typeof i!="symbol"&&(Cy(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&lb(t,a)}}}function lb(t,r,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&gE(r,n)}function Xoe(t,r){const n=Array.isArray(t),i={type_:n?1:0,scope_:r?r.scope_:b9(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,s=yE;n&&(a=[i],s=Qg);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return i.draft_=l,i.revoke_=o,l}var yE={get(t,r){if(r===Bc)return t;const n=Pf(t);if(!gN(n,r))return Joe(t,n,r);const i=n[r];return t.finalized_||!mm(i)?i:i===Hw(t.base_,r)?(Vw(t),t.copy_[r]=jN(i,t)):i},has(t,r){return r in Pf(t)},ownKeys(t){return Reflect.ownKeys(Pf(t))},set(t,r,n){const i=j9(Pf(t),r);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const a=Hw(Pf(t),r),s=a?.[Bc];if(s&&s.base_===n)return t.copy_[r]=n,t.assigned_[r]=!1,!0;if(Goe(n,a)&&(n!==void 0||gN(t.base_,r)))return!0;Vw(t),bN(t)}return t.copy_[r]===n&&(n!==void 0||r in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[r])||(t.copy_[r]=n,t.assigned_[r]=!0),!0},deleteProperty(t,r){return Hw(t.base_,r)!==void 0||r in t.base_?(t.assigned_[r]=!1,Vw(t),bN(t)):delete t.assigned_[r],t.copy_&&delete t.copy_[r],!0},getOwnPropertyDescriptor(t,r){const n=Pf(t),i=Reflect.getOwnPropertyDescriptor(n,r);return i&&{writable:!0,configurable:t.type_!==1||r!=="length",enumerable:i.enumerable,value:n[r]}},defineProperty(){Cd(11)},getPrototypeOf(t){return Gg(t.base_)},setPrototypeOf(){Cd(12)}},Qg={};sb(yE,(t,r)=>{Qg[t]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Qg.deleteProperty=function(t,r){return Qg.set.call(this,t,r,void 0)};Qg.set=function(t,r,n){return yE.set.call(this,t[0],r,n,t[0])};function Hw(t,r){const n=t[Bc];return(n?Pf(n):t)[r]}function Joe(t,r,n){const i=j9(r,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function j9(t,r){if(!(r in t))return;let n=Gg(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,r);if(i)return i;n=Gg(n)}}function bN(t){t.modified_||(t.modified_=!0,t.parent_&&bN(t.parent_))}function Vw(t){t.copy_||(t.copy_=yN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ele=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(r,n,i)=>{if(typeof r=="function"&&typeof n!="function"){const s=n;n=r;const o=this;return function(u=s,...d){return o.produce(u,f=>n.call(this,f,...d))}}typeof n!="function"&&Cd(6),i!==void 0&&typeof i!="function"&&Cd(7);let a;if(mm(r)){const s=HI(this),o=jN(r,void 0);let l=!0;try{a=n(o),l=!1}finally{l?xN(s):vN(s)}return WI(s,i),VI(a,s)}else if(!r||typeof r!="object"){if(a=n(r),a===void 0&&(a=r),a===y9&&(a=void 0),this.autoFreeze_&&gE(a,!0),i){const s=[],o=[];pm("Patches").generateReplacementPatches_(r,a,s,o),i(s,o)}return a}else Cd(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(o,...l)=>this.produceWithPatches(o,u=>r(u,...l));let i,a;return[this.produce(r,n,(o,l)=>{i=o,a=l}),i,a]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){mm(t)||Cd(8),Bp(t)&&(t=tle(t));const r=HI(this),n=jN(t,void 0);return n[Bc].isManual_=!0,vN(r),n}finishDraft(t,r){const n=t&&t[Bc];(!n||!n.isManual_)&&Cd(9);const{scope_:i}=n;return WI(i,r),VI(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const i=pm("Patches").applyPatches_;return Bp(t)?i(t,r):this.produce(t,a=>i(a,r))}};function jN(t,r){const n=Cy(t)?pm("MapSet").proxyMap_(t,r):N2(t)?pm("MapSet").proxySet_(t,r):Xoe(t,r);return(r?r.scope_:b9()).drafts_.push(n),n}function tle(t){return Bp(t)||Cd(10,t),w9(t)}function w9(t){if(!mm(t)||A2(t))return t;const r=t[Bc];let n,i=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=yN(t,r.scope_.immer_.useStrictShallowCopy_),i=r.scope_.immer_.shouldUseStrictIteration()}else n=yN(t,!0);return sb(n,(a,s)=>{v9(n,a,w9(s))},i),r&&(r.finalized_=!1),n}var rle=new ele;rle.produce;var nle={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},S9=fc({name:"legend",initialState:nle,reducers:{setLegendSize(t,r){t.size.width=r.payload.width,t.size.height=r.payload.height},setLegendSettings(t,r){t.settings.align=r.payload.align,t.settings.layout=r.payload.layout,t.settings.verticalAlign=r.payload.verticalAlign,t.settings.itemSorter=r.payload.itemSorter},addLegendPayload:{reducer(t,r){t.payload.push(r.payload)},prepare:qa()},replaceLegendPayload:{reducer(t,r){var{prev:n,next:i}=r.payload,a=Ad(t).payload.indexOf(n);a>-1&&(t.payload[a]=i)},prepare:qa()},removeLegendPayload:{reducer(t,r){var n=Ad(t).payload.indexOf(r.payload);n>-1&&t.payload.splice(n,1)},prepare:qa()}}}),{setLegendSize:GI,setLegendSettings:ile,addLegendPayload:C9,replaceLegendPayload:N9,removeLegendPayload:A9}=S9.actions,ale=S9.reducer,sle=["contextPayload"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wN.apply(null,arguments)}function KI(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Fp(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?KI(Object(n),!0).forEach(function(i){ole(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ole(t,r,n){return(r=lle(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function lle(t){var r=cle(t,"string");return typeof r=="symbol"?r:r+""}function cle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function dle(t,r){if(t==null)return{};var n,i,a=ule(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ule(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function hle(t){return t.value}function fle(t){var{contextPayload:r}=t,n=dle(t,sle),i=CB(r,t.payloadUniqBy,hle),a=Fp(Fp({},n),{},{payload:i});return k.isValidElement(t.content)?k.cloneElement(t.content,a):typeof t.content=="function"?k.createElement(t.content,a):k.createElement(iae,a)}function mle(t,r,n,i,a,s){var{layout:o,align:l,verticalAlign:u}=r,d,f;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?d={left:((i||0)-s.width)/2}:d=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?f={top:((a||0)-s.height)/2}:f=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Fp(Fp({},d),f)}function ple(t){var r=ma();return k.useEffect(()=>{r(ile(t))},[r,t]),null}function gle(t){var r=ma();return k.useEffect(()=>(r(GI(t)),()=>{r(GI({width:0,height:0}))}),[r,t]),null}function yle(t,r,n,i){return t==="vertical"&&or(r)?{height:r}:t==="horizontal"?{width:n||i}:null}var xle={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function E9(t){var r=ks(t,xle),n=Zae(),i=Qne(),a=Woe(),{width:s,height:o,wrapperStyle:l,portal:u}=r,[d,f]=TB([n]),p=mE(),x=pE();if(p==null||x==null)return null;var v=p-(a?.left||0)-(a?.right||0),w=yle(r.layout,o,s,v),C=u?l:Fp(Fp({position:"absolute",width:w?.width||s||"auto",height:w?.height||o||"auto"},mle(l,r,a,p,x,d)),l),N=u??i;if(N==null||n==null)return null;var T=k.createElement("div",{className:"recharts-legend-wrapper",style:C,ref:f},k.createElement(ple,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),!u&&k.createElement(gle,{width:d.width,height:d.height}),k.createElement(fle,wN({},r,w,{margin:a,chartWidth:p,chartHeight:x,contextPayload:n})));return SA.createPortal(T,N)}E9.displayName="Legend";function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},SN.apply(null,arguments)}function QI(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function $w(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?QI(Object(n),!0).forEach(function(i){vle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vle(t,r,n){return(r=ble(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ble(t){var r=jle(t,"string");return typeof r=="symbol"?r:r+""}function jle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function wle(t){return Array.isArray(t)&&uu(t[0])&&uu(t[1])?t.join(" ~ "):t}var Sle=t=>{var{separator:r=" : ",contentStyle:n={},itemStyle:i={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:d,label:f,labelFormatter:p,accessibilityLayer:x=!1}=t,v=()=>{if(s&&s.length){var Y={padding:0,margin:0},q=(l?l2(s,l):s).map((W,J)=>{if(W.type==="none")return null;var z=W.formatter||o||wle,{value:G,name:ne}=W,Z=G,ie=ne;if(z){var me=z(G,ne,W,J,s);if(Array.isArray(me))[Z,ie]=me;else if(me!=null)Z=me;else return null}var ce=$w({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},i);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:ce},uu(ie)?k.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,uu(ie)?k.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,k.createElement("span",{className:"recharts-tooltip-item-value"},Z),k.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:Y},q)}return null},w=$w({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),C=$w({margin:0},a),N=!_a(f),T=N?f:"",O=hi("recharts-default-tooltip",u),D=hi("recharts-tooltip-label",d);N&&p&&s!==void 0&&s!==null&&(T=p(f,s));var M=x?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",SN({className:O,style:w},M),k.createElement("p",{className:D,style:C},k.isValidElement(T)?T:"".concat(T)),v())},tg="recharts-tooltip-wrapper",Cle={visibility:"hidden"};function Nle(t){var{coordinate:r,translateX:n,translateY:i}=t;return hi(tg,{["".concat(tg,"-right")]:or(n)&&r&&or(r.x)&&n>=r.x,["".concat(tg,"-left")]:or(n)&&r&&or(r.x)&&n<r.x,["".concat(tg,"-bottom")]:or(i)&&r&&or(r.y)&&i>=r.y,["".concat(tg,"-top")]:or(i)&&r&&or(r.y)&&i<r.y})}function YI(t){var{allowEscapeViewBox:r,coordinate:n,key:i,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=t;if(s&&or(s[i]))return s[i];var f=n[i]-l-(a>0?a:0),p=n[i]+a;if(r[i])return o[i]?f:p;var x=u[i];if(x==null)return 0;if(o[i]){var v=f,w=x;return v<w?Math.max(p,x):Math.max(f,x)}if(d==null)return 0;var C=p+l,N=x+d;return C>N?Math.max(f,x):Math.max(p,x)}function Ale(t){var{translateX:r,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}}function Ele(t){var{allowEscapeViewBox:r,coordinate:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:u}=t,d,f,p;return o.height>0&&o.width>0&&n?(f=YI({allowEscapeViewBox:r,coordinate:n,key:"x",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=YI({allowEscapeViewBox:r,coordinate:n,key:"y",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=Ale({translateX:f,translateY:p,useTranslate3d:l})):d=Cle,{cssProperties:d,cssClasses:Nle({translateX:f,translateY:p,coordinate:n})}}function ZI(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Xx(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ZI(Object(n),!0).forEach(function(i){CN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function CN(t,r,n){return(r=_le(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _le(t){var r=Tle(t,"string");return typeof r=="symbol"?r:r+""}function Tle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class Ile extends k.PureComponent{constructor(){super(...arguments),CN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),CN(this,"handleKeyDown",r=>{if(r.key==="Escape"){var n,i,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,n;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:u,offset:d,position:f,reverseDirection:p,useTranslate3d:x,viewBox:v,wrapperStyle:w,lastBoundingBox:C,innerRef:N,hasPortalFromProps:T}=this.props,{cssClasses:O,cssProperties:D}=Ele({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:f,reverseDirection:p,tooltipBox:{height:C.height,width:C.width},useTranslate3d:x,viewBox:v}),M=T?{}:Xx(Xx({transition:u&&r?"transform ".concat(i,"ms ").concat(a):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&l?"visible":"hidden",position:"absolute",top:0,left:0}),Y=Xx(Xx({},M),{},{visibility:!this.state.dismissed&&r&&l?"visible":"hidden"},w);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:Y,ref:N},s)}}var _9=()=>{var t;return(t=wr(r=>r.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},NN.apply(null,arguments)}function XI(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function JI(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?XI(Object(n),!0).forEach(function(i){Ole(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ole(t,r,n){return(r=kle(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function kle(t){var r=Dle(t,"string");return typeof r=="symbol"?r:r+""}function Dle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var eO={curveBasisClosed:mie,curveBasisOpen:pie,curveBasis:fie,curveBumpX:Jne,curveBumpY:eie,curveLinearClosed:gie,curveLinear:s2,curveMonotoneX:yie,curveMonotoneY:xie,curveNatural:vie,curveStep:bie,curveStepAfter:wie,curveStepBefore:jie},cb=t=>oa(t.x)&&oa(t.y),tO=t=>t.base!=null&&cb(t.base)&&cb(t),rg=t=>t.x,ng=t=>t.y,Ple=(t,r)=>{if(typeof t=="function")return t;var n="curve".concat(xy(t));return(n==="curveMonotone"||n==="curveBump")&&r?eO["".concat(n).concat(r==="vertical"?"Y":"X")]:eO[n]||s2},Rle=t=>{var{type:r="linear",points:n=[],baseLine:i,layout:a,connectNulls:s=!1}=t,o=Ple(r,a),l=s?n.filter(cb):n,u;if(Array.isArray(i)){var d=n.map((v,w)=>JI(JI({},v),{},{base:i[w]}));a==="vertical"?u=Hx().y(ng).x1(rg).x0(v=>v.base.x):u=Hx().x(rg).y1(ng).y0(v=>v.base.y);var f=u.defined(tO).curve(o),p=s?d.filter(tO):d;return f(p)}a==="vertical"&&or(i)?u=Hx().y(ng).x1(rg).x0(i):or(i)?u=Hx().x(rg).y1(ng).y0(i):u=eB().x(rg).y(ng);var x=u.defined(cb).curve(o);return x(l)},Ep=t=>{var{className:r,points:n,path:i,pathRef:a}=t,s=gf();if((!n||!n.length)&&!i)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=n&&n.length?Rle(o):i;return k.createElement("path",NN({},Wl(t),rE(t),{className:hi("recharts-curve",r),d:l===null?void 0:l,ref:a}))},Mle=["x","y","top","left","width","height","className"];function AN(){return AN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},AN.apply(null,arguments)}function rO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Lle(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?rO(Object(n),!0).forEach(function(i){zle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zle(t,r,n){return(r=Ble(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Ble(t){var r=Fle(t,"string");return typeof r=="symbol"?r:r+""}function Fle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function qle(t,r){if(t==null)return{};var n,i,a=Ule(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ule(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Wle=(t,r,n,i,a,s)=>"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n),Hle=t=>{var{x:r=0,y:n=0,top:i=0,left:a=0,width:s=0,height:o=0,className:l}=t,u=qle(t,Mle),d=Lle({x:r,y:n,top:i,left:a,width:s,height:o},u);return!or(r)||!or(n)||!or(s)||!or(o)||!or(i)||!or(a)?null:k.createElement("path",AN({},Tl(d),{className:hi("recharts-cross",l),d:Wle(r,n,s,o,i,a)}))};function Vle(t,r,n,i){var a=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:r.y-a,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function nO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function iO(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?nO(Object(n),!0).forEach(function(i){$le(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $le(t,r,n){return(r=Gle(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Gle(t){var r=Kle(t,"string");return typeof r=="symbol"?r:r+""}function Kle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Qle=t=>t.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),T9=(t,r,n)=>t.map(i=>"".concat(Qle(i)," ").concat(r,"ms ").concat(n)).join(","),Yle=(t,r)=>[Object.keys(t),Object.keys(r)].reduce((n,i)=>n.filter(a=>i.includes(a))),Yg=(t,r)=>Object.keys(r).reduce((n,i)=>iO(iO({},n),{},{[i]:t(i,r[i])}),{});function aO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function po(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?aO(Object(n),!0).forEach(function(i){Zle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Zle(t,r,n){return(r=Xle(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Xle(t){var r=Jle(t,"string");return typeof r=="symbol"?r:r+""}function Jle(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var db=(t,r,n)=>t+(r-t)*n,EN=t=>{var{from:r,to:n}=t;return r!==n},I9=(t,r,n)=>{var i=Yg((a,s)=>{if(EN(s)){var[o,l]=t(s.from,s.to,s.velocity);return po(po({},s),{},{from:o,velocity:l})}return s},r);return n<1?Yg((a,s)=>EN(s)&&i[a]!=null?po(po({},s),{},{velocity:db(s.velocity,i[a].velocity,n),from:db(s.from,i[a].from,n)}):s,r):I9(t,i,n-1)};function ece(t,r,n,i,a,s){var o,l=i.reduce((x,v)=>po(po({},x),{},{[v]:{from:t[v],velocity:0,to:r[v]}}),{}),u=()=>Yg((x,v)=>v.from,l),d=()=>!Object.values(l).filter(EN).length,f=null,p=x=>{o||(o=x);var v=x-o,w=v/n.dt;l=I9(n,l,w),a(po(po(po({},t),r),u())),o=x,d()||(f=s.setTimeout(p))};return()=>(f=s.setTimeout(p),()=>{var x;(x=f)===null||x===void 0||x()})}function tce(t,r,n,i,a,s,o){var l=null,u=a.reduce((p,x)=>{var v=t[x],w=r[x];return v==null||w==null?p:po(po({},p),{},{[x]:[v,w]})},{}),d,f=p=>{d||(d=p);var x=(p-d)/i,v=Yg((C,N)=>db(...N,n(x)),u);if(s(po(po(po({},t),r),v)),x<1)l=o.setTimeout(f);else{var w=Yg((C,N)=>db(...N,n(1)),u);s(po(po(po({},t),r),w))}};return()=>(l=o.setTimeout(f),()=>{var p;(p=l)===null||p===void 0||p()})}const rce=(t,r,n,i,a,s)=>{var o=Yle(t,r);return n==null?()=>(a(po(po({},t),r)),()=>{}):n.isStepper===!0?ece(t,r,n,o,a,s):tce(t,r,n,i,o,a,s)};var ub=1e-4,O9=(t,r)=>[0,3*t,3*r-6*t,3*t-3*r+1],k9=(t,r)=>t.map((n,i)=>n*r**i).reduce((n,i)=>n+i),sO=(t,r)=>n=>{var i=O9(t,r);return k9(i,n)},nce=(t,r)=>n=>{var i=O9(t,r),a=[...i.map((s,o)=>s*o).slice(1),0];return k9(a,n)},ice=t=>{var r,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var i=(r=n[1])===null||r===void 0||(r=r.split(")")[0])===null||r===void 0?void 0:r.split(",");if(i==null||i.length!==4)return null;var a=i.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},ace=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=ice(n[0]);if(a)return a}}return n.length===4?n:[0,0,1,1]},sce=(t,r,n,i)=>{var a=sO(t,n),s=sO(r,i),o=nce(t,n),l=d=>d>1?1:d<0?0:d,u=d=>{for(var f=d>1?1:d,p=f,x=0;x<8;++x){var v=a(p)-f,w=o(p);if(Math.abs(v-f)<ub||w<ub)return s(p);p=l(p-v/w)}return s(p)};return u.isStepper=!1,u},oO=function(){return sce(...ace(...arguments))},oce=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:a=17}=r,s=(o,l,u)=>{var d=-(o-l)*n,f=u*i,p=u+(d-f)*a/1e3,x=u*a/1e3+o;return Math.abs(x-l)<ub&&Math.abs(p)<ub?[l,0]:[x,p]};return s.isStepper=!0,s.dt=a,s},lce=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oO(t);case"spring":return oce();default:if(t.split("(")[0]==="cubic-bezier")return oO(t)}return typeof t=="function"?t:null};function cce(t){var r,n=()=>null,i=!1,a=null,s=o=>{if(!i){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...d]=l;if(typeof u=="number"){a=t.setTimeout(s.bind(null,d),u);return}s(u),a=t.setTimeout(s.bind(null,d));return}typeof o=="string"&&(r=o,n(r)),typeof o=="object"&&(r=o,n(r)),typeof o=="function"&&o()}};return{stop:()=>{i=!0},start:o=>{i=!1,a&&(a(),a=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class dce{setTimeout(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),a=null,s=o=>{o-i>=n?r(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function uce(){return cce(new dce)}var hce=k.createContext(uce);function fce(t,r){var n=k.useContext(hce);return k.useMemo(()=>r??n(t),[t,r,n])}var mce=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ny={isSsr:mce()},pce={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},lO={t:0},Gw={t:1};function s0(t){var r=ks(t,pce),{isActive:n,canBegin:i,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:u,children:d}=r,f=n==="auto"?!Ny.isSsr:n,p=fce(r.animationId,r.animationManager),[x,v]=k.useState(f?lO:Gw),w=k.useRef(null);return k.useEffect(()=>{f||v(Gw)},[f]),k.useEffect(()=>{if(!f||!i)return vy;var C=rce(lO,Gw,lce(s),a,v,p.getTimeoutController()),N=()=>{w.current=C()};return p.start([u,o,N,a,l]),()=>{p.stop(),w.current&&w.current(),l()}},[f,i,a,s,o,u,l,p]),d(x.t)}function o0(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=k.useRef(Wg(r)),i=k.useRef(t);return i.current!==t&&(n.current=Wg(r),i.current=t),n.current}var gce=["radius"],yce=["radius"],cO,dO,uO,hO,fO,mO,pO,gO,yO,xO;function vO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function bO(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?vO(Object(n),!0).forEach(function(i){xce(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function xce(t,r,n){return(r=vce(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function vce(t){var r=bce(t,"string");return typeof r=="symbol"?r:r+""}function bce(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hb.apply(null,arguments)}function jO(t,r){if(t==null)return{};var n,i,a=jce(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function jce(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Zd(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}var wO=(t,r,n,i,a)=>{var s=Jh(n),o=Jh(i),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),u=o>=0?1:-1,d=s>=0?1:-1,f=o>=0&&s>=0||o<0&&s<0?1:0,p;if(l>0&&a instanceof Array){for(var x=[0,0,0,0],v=0,w=4;v<w;v++)x[v]=a[v]>l?l:a[v];p=As(cO||(cO=Zd(["M",",",""])),t,r+u*x[0]),x[0]>0&&(p+=As(dO||(dO=Zd(["A ",",",",0,0,",",",",",""])),x[0],x[0],f,t+d*x[0],r)),p+=As(uO||(uO=Zd(["L ",",",""])),t+n-d*x[1],r),x[1]>0&&(p+=As(hO||(hO=Zd(["A ",",",",0,0,",`,
        `,",",""])),x[1],x[1],f,t+n,r+u*x[1])),p+=As(fO||(fO=Zd(["L ",",",""])),t+n,r+i-u*x[2]),x[2]>0&&(p+=As(mO||(mO=Zd(["A ",",",",0,0,",`,
        `,",",""])),x[2],x[2],f,t+n-d*x[2],r+i)),p+=As(pO||(pO=Zd(["L ",",",""])),t+d*x[3],r+i),x[3]>0&&(p+=As(gO||(gO=Zd(["A ",",",",0,0,",`,
        `,",",""])),x[3],x[3],f,t,r+i-u*x[3])),p+="Z"}else if(l>0&&a===+a&&a>0){var C=Math.min(l,a);p=As(yO||(yO=Zd(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,r+u*C,C,C,f,t+d*C,r,t+n-d*C,r,C,C,f,t+n,r+u*C,t+n,r+i-u*C,C,C,f,t+n-d*C,r+i,t+d*C,r+i,C,C,f,t,r+i-u*C)}else p=As(xO||(xO=Zd(["M ",","," h "," v "," h "," Z"])),t,r,n,i,-n);return p},SO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},D9=t=>{var r=ks(t,SO),n=k.useRef(null),[i,a]=k.useState(-1);k.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var de=n.current.getTotalLength();de&&a(de)}catch{}},[]);var{x:s,y:o,width:l,height:u,radius:d,className:f}=r,{animationEasing:p,animationDuration:x,animationBegin:v,isAnimationActive:w,isUpdateAnimationActive:C}=r,N=k.useRef(l),T=k.useRef(u),O=k.useRef(s),D=k.useRef(o),M=k.useMemo(()=>({x:s,y:o,width:l,height:u,radius:d}),[s,o,l,u,d]),Y=o0(M,"rectangle-");if(s!==+s||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var q=hi("recharts-rectangle",f);if(!C){var W=Tl(r),{radius:J}=W,z=jO(W,gce);return k.createElement("path",hb({},z,{x:Jh(s),y:Jh(o),width:Jh(l),height:Jh(u),radius:typeof d=="number"?d:void 0,className:q,d:wO(s,o,l,u,d)}))}var G=N.current,ne=T.current,Z=O.current,ie=D.current,me="0px ".concat(i===-1?1:i,"px"),ce="".concat(i,"px 0px"),Q=T9(["strokeDasharray"],x,typeof p=="string"?p:SO.animationEasing);return k.createElement(s0,{animationId:Y,key:Y,canBegin:i>0,duration:x,easing:p,isActive:C,begin:v},de=>{var le=Ti(G,l,de),ye=Ti(ne,u,de),Se=Ti(Z,s,de),$=Ti(ie,o,de);n.current&&(N.current=le,T.current=ye,O.current=Se,D.current=$);var X;w?de>0?X={transition:Q,strokeDasharray:ce}:X={strokeDasharray:me}:X={strokeDasharray:ce};var se=Tl(r),{radius:H}=se,oe=jO(se,yce);return k.createElement("path",hb({},oe,{radius:typeof d=="number"?d:void 0,className:q,d:wO(Se,$,le,ye,d),ref:n,style:bO(bO({},X),r.style)}))})};function CO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function NO(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?CO(Object(n),!0).forEach(function(i){wce(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wce(t,r,n){return(r=Sce(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Sce(t){var r=Cce(t,"string");return typeof r=="symbol"?r:r+""}function Cce(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var fb=Math.PI/180,Nce=t=>t*180/Math.PI,ro=(t,r,n,i)=>({x:t+Math.cos(-fb*i)*n,y:r+Math.sin(-fb*i)*n}),P9=function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},Ace=(t,r)=>{var{x:n,y:i}=t,{x:a,y:s}=r;return Math.sqrt((n-a)**2+(i-s)**2)},Ece=(t,r)=>{var{x:n,y:i}=t,{cx:a,cy:s}=r,o=Ace({x:n,y:i},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(n-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:Nce(u),angleInRadian:u}},_ce=t=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},Tce=(t,r)=>{var{startAngle:n,endAngle:i}=r,a=Math.floor(n/360),s=Math.floor(i/360),o=Math.min(a,s);return t+o*360},Ice=(t,r)=>{var{chartX:n,chartY:i}=t,{radius:a,angle:s}=Ece({x:n,y:i},r),{innerRadius:o,outerRadius:l}=r;if(a<o||a>l||a===0)return null;var{startAngle:u,endAngle:d}=_ce(r),f=s,p;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}return p?NO(NO({},r),{},{radius:a,angle:Tce(f,r)}):null};function R9(t){var{cx:r,cy:n,radius:i,startAngle:a,endAngle:s}=t,o=ro(r,n,i,a),l=ro(r,n,i,s);return{points:[o,l],cx:r,cy:n,radius:i,startAngle:a,endAngle:s}}var AO,EO,_O,TO,IO,OO,kO;function _N(){return _N=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_N.apply(null,arguments)}function Hf(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}var Oce=(t,r)=>{var n=Fo(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},Jx=t=>{var{cx:r,cy:n,radius:i,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:u}=t,d=l*(o?1:-1)+i,f=Math.asin(l/d)/fb,p=u?a:a+s*f,x=ro(r,n,d,p),v=ro(r,n,i,p),w=u?a-s*f:a,C=ro(r,n,d*Math.cos(f*fb),w);return{center:x,circleTangency:v,lineTangency:C,theta:f}},M9=t=>{var{cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:s,endAngle:o}=t,l=Oce(s,o),u=s+l,d=ro(r,n,a,s),f=ro(r,n,a,u),p=As(AO||(AO=Hf(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,a,a,+(Math.abs(l)>180),+(s>u),f.x,f.y);if(i>0){var x=ro(r,n,i,s),v=ro(r,n,i,u);p+=As(EO||(EO=Hf(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,i,i,+(Math.abs(l)>180),+(s<=u),x.x,x.y)}else p+=As(_O||(_O=Hf(["L ",","," Z"])),r,n);return p},kce=t=>{var{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}=t,f=Fo(d-u),{circleTangency:p,lineTangency:x,theta:v}=Jx({cx:r,cy:n,radius:a,angle:u,sign:f,cornerRadius:s,cornerIsExternal:l}),{circleTangency:w,lineTangency:C,theta:N}=Jx({cx:r,cy:n,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),T=l?Math.abs(u-d):Math.abs(u-d)-v-N;if(T<0)return o?As(TO||(TO=Hf(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),x.x,x.y,s,s,s*2,s,s,-s*2):M9({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var O=As(IO||(IO=Hf(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),x.x,x.y,s,s,+(f<0),p.x,p.y,a,a,+(T>180),+(f<0),w.x,w.y,s,s,+(f<0),C.x,C.y);if(i>0){var{circleTangency:D,lineTangency:M,theta:Y}=Jx({cx:r,cy:n,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:q,lineTangency:W,theta:J}=Jx({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),z=l?Math.abs(u-d):Math.abs(u-d)-Y-J;if(z<0&&s===0)return"".concat(O,"L").concat(r,",").concat(n,"Z");O+=As(OO||(OO=Hf(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),W.x,W.y,s,s,+(f<0),q.x,q.y,i,i,+(z>180),+(f>0),D.x,D.y,s,s,+(f<0),M.x,M.y)}else O+=As(kO||(kO=Hf(["L",",","Z"])),r,n);return O},Dce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},L9=t=>{var r=ks(t,Dce),{cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f,className:p}=r;if(s<a||d===f)return null;var x=hi("recharts-sector",p),v=s-a,w=_l(o,v,0,!0),C;return w>0&&Math.abs(d-f)<360?C=kce({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(w,v/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):C=M9({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),k.createElement("path",_N({},Tl(r),{className:x,d:C}))};function Pce(t,r,n){if(t==="horizontal")return[{x:r.x,y:n.top},{x:r.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:r.y},{x:n.left+n.width,y:r.y}];if(pB(r)){if(t==="centric"){var{cx:i,cy:a,innerRadius:s,outerRadius:o,angle:l}=r,u=ro(i,a,s,l),d=ro(i,a,o,l);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return R9(r)}}var Kw={},Qw={},Yw={},DO;function Rce(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=AB();function n(i){return r.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(Yw)),Yw}var PO;function Mce(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Rce();function n(i){return i?(i=r.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(Qw)),Qw}var RO;function Lce(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=EB(),n=Mce();function i(a,s,o){o&&typeof o!="number"&&r.isIterateeCall(a,s,o)&&(s=o=void 0),a=n.toFinite(a),s===void 0?(s=a,a=0):s=n.toFinite(s),o=o===void 0?a<s?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=a,a+=o;return u}t.range=i})(Kw)),Kw}var Zw,MO;function zce(){return MO||(MO=1,Zw=Lce().range),Zw}var Bce=zce();const z9=hc(Bce);function nf(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function Fce(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function xE(t){let r,n,i;t.length!==2?(r=nf,n=(l,u)=>nf(t(l),u),i=(l,u)=>t(l)-u):(r=t===nf||t===Fce?t:qce,n=t,i=t);function a(l,u,d=0,f=l.length){if(d<f){if(r(u,u)!==0)return f;do{const p=d+f>>>1;n(l[p],u)<0?d=p+1:f=p}while(d<f)}return d}function s(l,u,d=0,f=l.length){if(d<f){if(r(u,u)!==0)return f;do{const p=d+f>>>1;n(l[p],u)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,u,d=0,f=l.length){const p=a(l,u,d,f-1);return p>d&&i(l[p-1],u)>-i(l[p],u)?p-1:p}return{left:a,center:o,right:s}}function qce(){return 0}function B9(t){return t===null?NaN:+t}function*Uce(t,r){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Wce=xE(nf),Ay=Wce.right;xE(B9).center;class LO extends Map{constructor(r,n=$ce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(const[i,a]of r)this.set(i,a)}get(r){return super.get(zO(this,r))}has(r){return super.has(zO(this,r))}set(r,n){return super.set(Hce(this,r),n)}delete(r){return super.delete(Vce(this,r))}}function zO({_intern:t,_key:r},n){const i=r(n);return t.has(i)?t.get(i):n}function Hce({_intern:t,_key:r},n){const i=r(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Vce({_intern:t,_key:r},n){const i=r(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function $ce(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Gce(t=nf){if(t===nf)return F9;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,n)=>{const i=t(r,n);return i||i===0?i:(t(n,n)===0)-(t(r,r)===0)}}function F9(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const Kce=Math.sqrt(50),Qce=Math.sqrt(10),Yce=Math.sqrt(2);function mb(t,r,n){const i=(r-t)/Math.max(0,n),a=Math.floor(Math.log10(i)),s=i/Math.pow(10,a),o=s>=Kce?10:s>=Qce?5:s>=Yce?2:1;let l,u,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(t*d),u=Math.round(r*d),l/d<t&&++l,u/d>r&&--u,d=-d):(d=Math.pow(10,a)*o,l=Math.round(t/d),u=Math.round(r/d),l*d<t&&++l,u*d>r&&--u),u<l&&.5<=n&&n<2?mb(t,r,n*2):[l,u,d]}function TN(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];const i=r<t,[a,s,o]=i?mb(r,t,n):mb(t,r,n);if(!(s>=a))return[];const l=s-a+1,u=new Array(l);if(i)if(o<0)for(let d=0;d<l;++d)u[d]=(s-d)/-o;else for(let d=0;d<l;++d)u[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(a+d)/-o;else for(let d=0;d<l;++d)u[d]=(a+d)*o;return u}function IN(t,r,n){return r=+r,t=+t,n=+n,mb(t,r,n)[2]}function ON(t,r,n){r=+r,t=+t,n=+n;const i=r<t,a=i?IN(r,t,n):IN(t,r,n);return(i?-1:1)*(a<0?1/-a:a)}function BO(t,r){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function FO(t,r){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function q9(t,r,n=0,i=1/0,a){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=r&&r<=i))return t;for(a=a===void 0?F9:Gce(a);i>n;){if(i-n>600){const u=i-n+1,d=r-n+1,f=Math.log(u),p=.5*Math.exp(2*f/3),x=.5*Math.sqrt(f*p*(u-p)/u)*(d-u/2<0?-1:1),v=Math.max(n,Math.floor(r-d*p/u+x)),w=Math.min(i,Math.floor(r+(u-d)*p/u+x));q9(t,r,v,w,a)}const s=t[r];let o=n,l=i;for(ig(t,n,r),a(t[i],s)>0&&ig(t,n,i);o<l;){for(ig(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[n],s)===0?ig(t,n,l):(++l,ig(t,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}return t}function ig(t,r,n){const i=t[r];t[r]=t[n],t[n]=i}function Zce(t,r,n){if(t=Float64Array.from(Uce(t)),!(!(i=t.length)||isNaN(r=+r))){if(r<=0||i<2)return FO(t);if(r>=1)return BO(t);var i,a=(i-1)*r,s=Math.floor(a),o=BO(q9(t,s).subarray(0,s+1)),l=FO(t.subarray(s+1));return o+(l-o)*(a-s)}}function Xce(t,r,n=B9){if(!(!(i=t.length)||isNaN(r=+r))){if(r<=0||i<2)return+n(t[0],0,t);if(r>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*r,s=Math.floor(a),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function Jce(t,r,n){t=+t,r=+r,n=(a=arguments.length)<2?(r=t,t=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(a);++i<a;)s[i]=t+i*n;return s}function ud(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function yh(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const kN=Symbol("implicit");function vE(){var t=new LO,r=[],n=[],i=kN;function a(s){let o=t.get(s);if(o===void 0){if(i!==kN)return i;t.set(s,o=r.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new LO;for(const o of s)t.has(o)||t.set(o,r.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return vE(r,n).unknown(i)},ud.apply(a,arguments),a}function bE(){var t=vE().unknown(void 0),r=t.domain,n=t.range,i=0,a=1,s,o,l=!1,u=0,d=0,f=.5;delete t.unknown;function p(){var x=r().length,v=a<i,w=v?a:i,C=v?i:a;s=(C-w)/Math.max(1,x-u+d*2),l&&(s=Math.floor(s)),w+=(C-w-s*(x-u))*f,o=s*(1-u),l&&(w=Math.round(w),o=Math.round(o));var N=Jce(x).map(function(T){return w+s*T});return n(v?N.reverse():N)}return t.domain=function(x){return arguments.length?(r(x),p()):r()},t.range=function(x){return arguments.length?([i,a]=x,i=+i,a=+a,p()):[i,a]},t.rangeRound=function(x){return[i,a]=x,i=+i,a=+a,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(x){return arguments.length?(l=!!x,p()):l},t.padding=function(x){return arguments.length?(u=Math.min(1,d=+x),p()):u},t.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),p()):u},t.paddingOuter=function(x){return arguments.length?(d=+x,p()):d},t.align=function(x){return arguments.length?(f=Math.max(0,Math.min(1,x)),p()):f},t.copy=function(){return bE(r(),[i,a]).round(l).paddingInner(u).paddingOuter(d).align(f)},ud.apply(p(),arguments)}function U9(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return U9(r())},t}function ede(){return U9(bE.apply(null,arguments).paddingInner(1))}function jE(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function W9(t,r){var n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n}function Ey(){}var Zg=.7,pb=1/Zg,_p="\\s*([+-]?\\d+)\\s*",Xg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tde=/^#([0-9a-f]{3,8})$/,rde=new RegExp(`^rgb\\(${_p},${_p},${_p}\\)$`),nde=new RegExp(`^rgb\\(${du},${du},${du}\\)$`),ide=new RegExp(`^rgba\\(${_p},${_p},${_p},${Xg}\\)$`),ade=new RegExp(`^rgba\\(${du},${du},${du},${Xg}\\)$`),sde=new RegExp(`^hsl\\(${Xg},${du},${du}\\)$`),ode=new RegExp(`^hsla\\(${Xg},${du},${du},${Xg}\\)$`),qO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jE(Ey,Jg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:UO,formatHex:UO,formatHex8:lde,formatHsl:cde,formatRgb:WO,toString:WO});function UO(){return this.rgb().formatHex()}function lde(){return this.rgb().formatHex8()}function cde(){return H9(this).formatHsl()}function WO(){return this.rgb().formatRgb()}function Jg(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=tde.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?HO(r):n===3?new ic(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?e1(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?e1(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=rde.exec(t))?new ic(r[1],r[2],r[3],1):(r=nde.exec(t))?new ic(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=ide.exec(t))?e1(r[1],r[2],r[3],r[4]):(r=ade.exec(t))?e1(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=sde.exec(t))?GO(r[1],r[2]/100,r[3]/100,1):(r=ode.exec(t))?GO(r[1],r[2]/100,r[3]/100,r[4]):qO.hasOwnProperty(t)?HO(qO[t]):t==="transparent"?new ic(NaN,NaN,NaN,0):null}function HO(t){return new ic(t>>16&255,t>>8&255,t&255,1)}function e1(t,r,n,i){return i<=0&&(t=r=n=NaN),new ic(t,r,n,i)}function dde(t){return t instanceof Ey||(t=Jg(t)),t?(t=t.rgb(),new ic(t.r,t.g,t.b,t.opacity)):new ic}function DN(t,r,n,i){return arguments.length===1?dde(t):new ic(t,r,n,i??1)}function ic(t,r,n,i){this.r=+t,this.g=+r,this.b=+n,this.opacity=+i}jE(ic,DN,W9(Ey,{brighter(t){return t=t==null?pb:Math.pow(pb,t),new ic(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zg:Math.pow(Zg,t),new ic(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ic(Xf(this.r),Xf(this.g),Xf(this.b),gb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VO,formatHex:VO,formatHex8:ude,formatRgb:$O,toString:$O}));function VO(){return`#${Vf(this.r)}${Vf(this.g)}${Vf(this.b)}`}function ude(){return`#${Vf(this.r)}${Vf(this.g)}${Vf(this.b)}${Vf((isNaN(this.opacity)?1:this.opacity)*255)}`}function $O(){const t=gb(this.opacity);return`${t===1?"rgb(":"rgba("}${Xf(this.r)}, ${Xf(this.g)}, ${Xf(this.b)}${t===1?")":`, ${t})`}`}function gb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vf(t){return t=Xf(t),(t<16?"0":"")+t.toString(16)}function GO(t,r,n,i){return i<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new Nd(t,r,n,i)}function H9(t){if(t instanceof Nd)return new Nd(t.h,t.s,t.l,t.opacity);if(t instanceof Ey||(t=Jg(t)),!t)return new Nd;if(t instanceof Nd)return t;t=t.rgb();var r=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(r,n,i),s=Math.max(r,n,i),o=NaN,l=s-a,u=(s+a)/2;return l?(r===s?o=(n-i)/l+(n<i)*6:n===s?o=(i-r)/l+2:o=(r-n)/l+4,l/=u<.5?s+a:2-s-a,o*=60):l=u>0&&u<1?0:o,new Nd(o,l,u,t.opacity)}function hde(t,r,n,i){return arguments.length===1?H9(t):new Nd(t,r,n,i??1)}function Nd(t,r,n,i){this.h=+t,this.s=+r,this.l=+n,this.opacity=+i}jE(Nd,hde,W9(Ey,{brighter(t){return t=t==null?pb:Math.pow(pb,t),new Nd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zg:Math.pow(Zg,t),new Nd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,a=2*n-i;return new ic(Xw(t>=240?t-240:t+120,a,i),Xw(t,a,i),Xw(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Nd(KO(this.h),t1(this.s),t1(this.l),gb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gb(this.opacity);return`${t===1?"hsl(":"hsla("}${KO(this.h)}, ${t1(this.s)*100}%, ${t1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function KO(t){return t=(t||0)%360,t<0?t+360:t}function t1(t){return Math.max(0,Math.min(1,t||0))}function Xw(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}const wE=t=>()=>t;function fde(t,r){return function(n){return t+n*r}}function mde(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(i){return Math.pow(t+i*r,n)}}function pde(t){return(t=+t)==1?V9:function(r,n){return n-r?mde(r,n,t):wE(isNaN(r)?n:r)}}function V9(t,r){var n=r-t;return n?fde(t,n):wE(isNaN(t)?r:t)}const QO=(function t(r){var n=pde(r);function i(a,s){var o=n((a=DN(a)).r,(s=DN(s)).r),l=n(a.g,s.g),u=n(a.b,s.b),d=V9(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=u(f),a.opacity=d(f),a+""}}return i.gamma=t,i})(1);function gde(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,i=r.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=t[a]*(1-s)+r[a]*s;return i}}function yde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xde(t,r){var n=r?r.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)a[o]=l0(t[o],r[o]);for(;o<n;++o)s[o]=r[o];return function(l){for(o=0;o<i;++o)s[o]=a[o](l);return s}}function vde(t,r){var n=new Date;return t=+t,r=+r,function(i){return n.setTime(t*(1-i)+r*i),n}}function yb(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}function bde(t,r){var n={},i={},a;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in t?n[a]=l0(t[a],r[a]):i[a]=r[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var PN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jw=new RegExp(PN.source,"g");function jde(t){return function(){return t}}function wde(t){return function(r){return t(r)+""}}function Sde(t,r){var n=PN.lastIndex=Jw.lastIndex=0,i,a,s,o=-1,l=[],u=[];for(t=t+"",r=r+"";(i=PN.exec(t))&&(a=Jw.exec(r));)(s=a.index)>n&&(s=r.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,u.push({i:o,x:yb(i,a)})),n=Jw.lastIndex;return n<r.length&&(s=r.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?wde(u[0].x):jde(r):(r=u.length,function(d){for(var f=0,p;f<r;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function l0(t,r){var n=typeof r,i;return r==null||n==="boolean"?wE(r):(n==="number"?yb:n==="string"?(i=Jg(r))?(r=i,QO):Sde:r instanceof Jg?QO:r instanceof Date?vde:yde(r)?gde:Array.isArray(r)?xde:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?bde:yb)(t,r)}function SE(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}function Cde(t,r){r===void 0&&(r=t,t=l0);for(var n=0,i=r.length-1,a=r[0],s=new Array(i<0?0:i);n<i;)s[n]=t(a,a=r[++n]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[l](o-l)}}function Nde(t){return function(){return t}}function xb(t){return+t}var YO=[0,1];function ql(t){return t}function RN(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:Nde(isNaN(r)?NaN:.5)}function Ade(t,r){var n;return t>r&&(n=t,t=r,r=n),function(i){return Math.max(t,Math.min(r,i))}}function Ede(t,r,n){var i=t[0],a=t[1],s=r[0],o=r[1];return a<i?(i=RN(a,i),s=n(o,s)):(i=RN(i,a),s=n(s,o)),function(l){return s(i(l))}}function _de(t,r,n){var i=Math.min(t.length,r.length)-1,a=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++o<i;)a[o]=RN(t[o],t[o+1]),s[o]=n(r[o],r[o+1]);return function(l){var u=Ay(t,l,1,i)-1;return s[u](a[u](l))}}function _y(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function E2(){var t=YO,r=YO,n=l0,i,a,s,o=ql,l,u,d;function f(){var x=Math.min(t.length,r.length);return o!==ql&&(o=Ade(t[0],t[x-1])),l=x>2?_de:Ede,u=d=null,p}function p(x){return x==null||isNaN(x=+x)?s:(u||(u=l(t.map(i),r,n)))(i(o(x)))}return p.invert=function(x){return o(a((d||(d=l(r,t.map(i),yb)))(x)))},p.domain=function(x){return arguments.length?(t=Array.from(x,xb),f()):t.slice()},p.range=function(x){return arguments.length?(r=Array.from(x),f()):r.slice()},p.rangeRound=function(x){return r=Array.from(x),n=SE,f()},p.clamp=function(x){return arguments.length?(o=x?!0:ql,f()):o!==ql},p.interpolate=function(x){return arguments.length?(n=x,f()):n},p.unknown=function(x){return arguments.length?(s=x,p):s},function(x,v){return i=x,a=v,f()}}function CE(){return E2()(ql,ql)}function Tde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function vb(t,r){if(!isFinite(t)||t===0)return null;var n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"),i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function qp(t){return t=vb(Math.abs(t)),t?t[1]:NaN}function Ide(t,r){return function(n,i){for(var a=n.length,s=[],o=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),s.push(n.substring(a-=l,a+l)),!((u+=l+1)>i));)l=t[o=(o+1)%t.length];return s.reverse().join(r)}}function Ode(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var kde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ey(t){if(!(r=kde.exec(t)))throw new Error("invalid format: "+t);var r;return new NE({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}ey.prototype=NE.prototype;function NE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}NE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dde(t){e:for(var r=t.length,n=1,i=-1,a;n<r;++n)switch(t[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var bb;function Pde(t,r){var n=vb(t,r);if(!n)return bb=void 0,t.toPrecision(r);var i=n[0],a=n[1],s=a-(bb=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+vb(t,Math.max(0,r+s-1))[0]}function ZO(t,r){var n=vb(t,r);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const XO={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Tde,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>ZO(t*100,r),r:ZO,s:Pde,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function JO(t){return t}var ek=Array.prototype.map,tk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rde(t){var r=t.grouping===void 0||t.thousands===void 0?JO:Ide(ek.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?JO:Ode(ek.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(p,x){p=ey(p);var v=p.fill,w=p.align,C=p.sign,N=p.symbol,T=p.zero,O=p.width,D=p.comma,M=p.precision,Y=p.trim,q=p.type;q==="n"?(D=!0,q="g"):XO[q]||(M===void 0&&(M=12),Y=!0,q="g"),(T||v==="0"&&w==="=")&&(T=!0,v="0",w="=");var W=(x&&x.prefix!==void 0?x.prefix:"")+(N==="$"?n:N==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():""),J=(N==="$"?i:/[%p]/.test(q)?o:"")+(x&&x.suffix!==void 0?x.suffix:""),z=XO[q],G=/[defgprs%]/.test(q);M=M===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function ne(Z){var ie=W,me=J,ce,Q,de;if(q==="c")me=z(Z)+me,Z="";else{Z=+Z;var le=Z<0||1/Z<0;if(Z=isNaN(Z)?u:z(Math.abs(Z),M),Y&&(Z=Dde(Z)),le&&+Z==0&&C!=="+"&&(le=!1),ie=(le?C==="("?C:l:C==="-"||C==="("?"":C)+ie,me=(q==="s"&&!isNaN(Z)&&bb!==void 0?tk[8+bb/3]:"")+me+(le&&C==="("?")":""),G){for(ce=-1,Q=Z.length;++ce<Q;)if(de=Z.charCodeAt(ce),48>de||de>57){me=(de===46?a+Z.slice(ce+1):Z.slice(ce))+me,Z=Z.slice(0,ce);break}}}D&&!T&&(Z=r(Z,1/0));var ye=ie.length+Z.length+me.length,Se=ye<O?new Array(O-ye+1).join(v):"";switch(D&&T&&(Z=r(Se+Z,Se.length?O-me.length:1/0),Se=""),w){case"<":Z=ie+Z+me+Se;break;case"=":Z=ie+Se+Z+me;break;case"^":Z=Se.slice(0,ye=Se.length>>1)+ie+Z+me+Se.slice(ye);break;default:Z=Se+ie+Z+me;break}return s(Z)}return ne.toString=function(){return p+""},ne}function f(p,x){var v=Math.max(-8,Math.min(8,Math.floor(qp(x)/3)))*3,w=Math.pow(10,-v),C=d((p=ey(p),p.type="f",p),{suffix:tk[8+v/3]});return function(N){return C(w*N)}}return{format:d,formatPrefix:f}}var r1,AE,$9;Mde({thousands:",",grouping:[3],currency:["$",""]});function Mde(t){return r1=Rde(t),AE=r1.format,$9=r1.formatPrefix,r1}function Lde(t){return Math.max(0,-qp(Math.abs(t)))}function zde(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qp(r)/3)))*3-qp(Math.abs(t)))}function Bde(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,qp(r)-qp(t))+1}function G9(t,r,n,i){var a=ON(t,r,n),s;switch(i=ey(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(r));return i.precision==null&&!isNaN(s=zde(a,o))&&(i.precision=s),$9(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Bde(a,Math.max(Math.abs(t),Math.abs(r))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Lde(a))&&(i.precision=s-(i.type==="%")*2);break}}return AE(i)}function yf(t){var r=t.domain;return t.ticks=function(n){var i=r();return TN(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var a=r();return G9(a[0],a[a.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=r(),a=0,s=i.length-1,o=i[a],l=i[s],u,d,f=10;for(l<o&&(d=o,o=l,l=d,d=a,a=s,s=d);f-- >0;){if(d=IN(o,l,n),d===u)return i[a]=o,i[s]=l,r(i);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return t},t}function K9(){var t=CE();return t.copy=function(){return _y(t,K9())},ud.apply(t,arguments),yf(t)}function Q9(t){var r;function n(i){return i==null||isNaN(i=+i)?r:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,xb),n):t.slice()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return Q9(t).unknown(r)},t=arguments.length?Array.from(t,xb):[0,1],yf(n)}function Y9(t,r){t=t.slice();var n=0,i=t.length-1,a=t[n],s=t[i],o;return s<a&&(o=n,n=i,i=o,o=a,a=s,s=o),t[n]=r.floor(a),t[i]=r.ceil(s),t}function rk(t){return Math.log(t)}function nk(t){return Math.exp(t)}function Fde(t){return-Math.log(-t)}function qde(t){return-Math.exp(-t)}function Ude(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wde(t){return t===10?Ude:t===Math.E?Math.exp:r=>Math.pow(t,r)}function Hde(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function ik(t){return(r,n)=>-t(-r,n)}function EE(t){const r=t(rk,nk),n=r.domain;let i=10,a,s;function o(){return a=Hde(i),s=Wde(i),n()[0]<0?(a=ik(a),s=ik(s),t(Fde,qde)):t(rk,nk),r}return r.base=function(l){return arguments.length?(i=+l,o()):i},r.domain=function(l){return arguments.length?(n(l),o()):n()},r.ticks=l=>{const u=n();let d=u[0],f=u[u.length-1];const p=f<d;p&&([d,f]=[f,d]);let x=a(d),v=a(f),w,C;const N=l==null?10:+l;let T=[];if(!(i%1)&&v-x<N){if(x=Math.floor(x),v=Math.ceil(v),d>0){for(;x<=v;++x)for(w=1;w<i;++w)if(C=x<0?w/s(-x):w*s(x),!(C<d)){if(C>f)break;T.push(C)}}else for(;x<=v;++x)for(w=i-1;w>=1;--w)if(C=x>0?w/s(-x):w*s(x),!(C<d)){if(C>f)break;T.push(C)}T.length*2<N&&(T=TN(d,f,N))}else T=TN(x,v,Math.min(v-x,N)).map(s);return p?T.reverse():T},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=ey(u)).precision==null&&(u.trim=!0),u=AE(u)),l===1/0)return u;const d=Math.max(1,i*l/r.ticks().length);return f=>{let p=f/s(Math.round(a(f)));return p*i<i-.5&&(p*=i),p<=d?u(f):""}},r.nice=()=>n(Y9(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),r}function Z9(){const t=EE(E2()).domain([1,10]);return t.copy=()=>_y(t,Z9()).base(t.base()),ud.apply(t,arguments),t}function ak(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function sk(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function _E(t){var r=1,n=t(ak(r),sk(r));return n.constant=function(i){return arguments.length?t(ak(r=+i),sk(r)):r},yf(n)}function X9(){var t=_E(E2());return t.copy=function(){return _y(t,X9()).constant(t.constant())},ud.apply(t,arguments)}function ok(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function Vde(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function $de(t){return t<0?-t*t:t*t}function TE(t){var r=t(ql,ql),n=1;function i(){return n===1?t(ql,ql):n===.5?t(Vde,$de):t(ok(n),ok(1/n))}return r.exponent=function(a){return arguments.length?(n=+a,i()):n},yf(r)}function IE(){var t=TE(E2());return t.copy=function(){return _y(t,IE()).exponent(t.exponent())},ud.apply(t,arguments),t}function Gde(){return IE.apply(null,arguments).exponent(.5)}function lk(t){return Math.sign(t)*t*t}function Kde(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function J9(){var t=CE(),r=[0,1],n=!1,i;function a(s){var o=Kde(t(s));return isNaN(o)?i:n?Math.round(o):o}return a.invert=function(s){return t.invert(lk(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((r=Array.from(s,xb)).map(lk)),a):r.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return J9(t.domain(),r).round(n).clamp(t.clamp()).unknown(i)},ud.apply(a,arguments),yf(a)}function eF(){var t=[],r=[],n=[],i;function a(){var o=0,l=Math.max(1,r.length);for(n=new Array(l-1);++o<l;)n[o-1]=Xce(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?i:r[Ay(n,o)]}return s.invertExtent=function(o){var l=r.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(nf),a()},s.range=function(o){return arguments.length?(r=Array.from(o),a()):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return eF().domain(t).range(r).unknown(i)},ud.apply(s,arguments)}function tF(){var t=0,r=1,n=1,i=[.5],a=[0,1],s;function o(u){return u!=null&&u<=u?a[Ay(i,u,0,n)]:s}function l(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*r-(u-n)*t)/(n+1);return o}return o.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},o.range=function(u){return arguments.length?(n=(a=Array.from(u)).length-1,l()):a.slice()},o.invertExtent=function(u){var d=a.indexOf(u);return d<0?[NaN,NaN]:d<1?[t,i[0]]:d>=n?[i[n-1],r]:[i[d-1],i[d]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return i.slice()},o.copy=function(){return tF().domain([t,r]).range(a).unknown(s)},ud.apply(yf(o),arguments)}function rF(){var t=[.5],r=[0,1],n,i=1;function a(s){return s!=null&&s<=s?r[Ay(t,s,0,i)]:n}return a.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(s){return arguments.length?(r=Array.from(s),i=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(s){var o=r.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return rF().domain(t).range(r).unknown(n)},ud.apply(a,arguments)}const eS=new Date,tS=new Date;function So(t,r,n,i){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(r(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const u=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return u;let d;do u.push(d=new Date(+s)),r(s,l),t(s);while(d<s&&s<o);return u},a.filter=s=>So(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;r(o,-1),!s(o););else for(;--l>=0;)for(;r(o,1),!s(o););}),n&&(a.count=(s,o)=>(eS.setTime(+s),tS.setTime(+o),t(eS),t(tS),Math.floor(n(eS,tS))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(i?o=>i(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const jb=So(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);jb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?So(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):jb);jb.range;const Gu=1e3,td=Gu*60,Ku=td*60,lh=Ku*24,OE=lh*7,ck=lh*30,rS=lh*365,$f=So(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*Gu)},(t,r)=>(r-t)/Gu,t=>t.getUTCSeconds());$f.range;const kE=So(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gu)},(t,r)=>{t.setTime(+t+r*td)},(t,r)=>(r-t)/td,t=>t.getMinutes());kE.range;const DE=So(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*td)},(t,r)=>(r-t)/td,t=>t.getUTCMinutes());DE.range;const PE=So(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gu-t.getMinutes()*td)},(t,r)=>{t.setTime(+t+r*Ku)},(t,r)=>(r-t)/Ku,t=>t.getHours());PE.range;const RE=So(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*Ku)},(t,r)=>(r-t)/Ku,t=>t.getUTCHours());RE.range;const Ty=So(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*td)/lh,t=>t.getDate()-1);Ty.range;const _2=So(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/lh,t=>t.getUTCDate()-1);_2.range;const nF=So(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/lh,t=>Math.floor(t/lh));nF.range;function Cm(t){return So(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*td)/OE)}const T2=Cm(0),wb=Cm(1),Qde=Cm(2),Yde=Cm(3),Up=Cm(4),Zde=Cm(5),Xde=Cm(6);T2.range;wb.range;Qde.range;Yde.range;Up.range;Zde.range;Xde.range;function Nm(t){return So(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/OE)}const I2=Nm(0),Sb=Nm(1),Jde=Nm(2),eue=Nm(3),Wp=Nm(4),tue=Nm(5),rue=Nm(6);I2.range;Sb.range;Jde.range;eue.range;Wp.range;tue.range;rue.range;const ME=So(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ME.range;const LE=So(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());LE.range;const ch=So(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());ch.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:So(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});ch.range;const dh=So(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());dh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:So(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});dh.range;function iF(t,r,n,i,a,s){const o=[[$f,1,Gu],[$f,5,5*Gu],[$f,15,15*Gu],[$f,30,30*Gu],[s,1,td],[s,5,5*td],[s,15,15*td],[s,30,30*td],[a,1,Ku],[a,3,3*Ku],[a,6,6*Ku],[a,12,12*Ku],[i,1,lh],[i,2,2*lh],[n,1,OE],[r,1,ck],[r,3,3*ck],[t,1,rS]];function l(d,f,p){const x=f<d;x&&([d,f]=[f,d]);const v=p&&typeof p.range=="function"?p:u(d,f,p),w=v?v.range(d,+f+1):[];return x?w.reverse():w}function u(d,f,p){const x=Math.abs(f-d)/p,v=xE(([,,N])=>N).right(o,x);if(v===o.length)return t.every(ON(d/rS,f/rS,p));if(v===0)return jb.every(Math.max(ON(d,f,p),1));const[w,C]=o[x/o[v-1][2]<o[v][2]/x?v-1:v];return w.every(C)}return[l,u]}const[nue,iue]=iF(dh,LE,I2,nF,RE,DE),[aue,sue]=iF(ch,ME,T2,Ty,PE,kE);function nS(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function iS(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ag(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function oue(t){var r=t.dateTime,n=t.date,i=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,d=sg(a),f=og(a),p=sg(s),x=og(s),v=sg(o),w=og(o),C=sg(l),N=og(l),T=sg(u),O=og(u),D={a:de,A:le,b:ye,B:Se,c:null,d:pk,e:pk,f:Iue,g:Fue,G:Uue,H:Eue,I:_ue,j:Tue,L:aF,m:Oue,M:kue,p:$,q:X,Q:xk,s:vk,S:Due,u:Pue,U:Rue,V:Mue,w:Lue,W:zue,x:null,X:null,y:Bue,Y:que,Z:Wue,"%":yk},M={a:se,A:H,b:oe,B:ge,c:null,d:gk,e:gk,f:Gue,g:nhe,G:ahe,H:Hue,I:Vue,j:$ue,L:oF,m:Kue,M:Que,p:be,q:Le,Q:xk,s:vk,S:Yue,u:Zue,U:Xue,V:Jue,w:ehe,W:the,x:null,X:null,y:rhe,Y:ihe,Z:she,"%":yk},Y={a:G,A:ne,b:Z,B:ie,c:me,d:fk,e:fk,f:Sue,g:hk,G:uk,H:mk,I:mk,j:vue,L:wue,m:xue,M:bue,p:z,q:yue,Q:Nue,s:Aue,S:jue,u:hue,U:fue,V:mue,w:uue,W:pue,x:ce,X:Q,y:hk,Y:uk,Z:gue,"%":Cue};D.x=q(n,D),D.X=q(i,D),D.c=q(r,D),M.x=q(n,M),M.X=q(i,M),M.c=q(r,M);function q(ke,He){return function(Je){var Qe=[],vt=-1,Pt=0,Oe=ke.length,at,Wt,Bt;for(Je instanceof Date||(Je=new Date(+Je));++vt<Oe;)ke.charCodeAt(vt)===37&&(Qe.push(ke.slice(Pt,vt)),(Wt=dk[at=ke.charAt(++vt)])!=null?at=ke.charAt(++vt):Wt=at==="e"?" ":"0",(Bt=He[at])&&(at=Bt(Je,Wt)),Qe.push(at),Pt=vt+1);return Qe.push(ke.slice(Pt,vt)),Qe.join("")}}function W(ke,He){return function(Je){var Qe=ag(1900,void 0,1),vt=J(Qe,ke,Je+="",0),Pt,Oe;if(vt!=Je.length)return null;if("Q"in Qe)return new Date(Qe.Q);if("s"in Qe)return new Date(Qe.s*1e3+("L"in Qe?Qe.L:0));if(He&&!("Z"in Qe)&&(Qe.Z=0),"p"in Qe&&(Qe.H=Qe.H%12+Qe.p*12),Qe.m===void 0&&(Qe.m="q"in Qe?Qe.q:0),"V"in Qe){if(Qe.V<1||Qe.V>53)return null;"w"in Qe||(Qe.w=1),"Z"in Qe?(Pt=iS(ag(Qe.y,0,1)),Oe=Pt.getUTCDay(),Pt=Oe>4||Oe===0?Sb.ceil(Pt):Sb(Pt),Pt=_2.offset(Pt,(Qe.V-1)*7),Qe.y=Pt.getUTCFullYear(),Qe.m=Pt.getUTCMonth(),Qe.d=Pt.getUTCDate()+(Qe.w+6)%7):(Pt=nS(ag(Qe.y,0,1)),Oe=Pt.getDay(),Pt=Oe>4||Oe===0?wb.ceil(Pt):wb(Pt),Pt=Ty.offset(Pt,(Qe.V-1)*7),Qe.y=Pt.getFullYear(),Qe.m=Pt.getMonth(),Qe.d=Pt.getDate()+(Qe.w+6)%7)}else("W"in Qe||"U"in Qe)&&("w"in Qe||(Qe.w="u"in Qe?Qe.u%7:"W"in Qe?1:0),Oe="Z"in Qe?iS(ag(Qe.y,0,1)).getUTCDay():nS(ag(Qe.y,0,1)).getDay(),Qe.m=0,Qe.d="W"in Qe?(Qe.w+6)%7+Qe.W*7-(Oe+5)%7:Qe.w+Qe.U*7-(Oe+6)%7);return"Z"in Qe?(Qe.H+=Qe.Z/100|0,Qe.M+=Qe.Z%100,iS(Qe)):nS(Qe)}}function J(ke,He,Je,Qe){for(var vt=0,Pt=He.length,Oe=Je.length,at,Wt;vt<Pt;){if(Qe>=Oe)return-1;if(at=He.charCodeAt(vt++),at===37){if(at=He.charAt(vt++),Wt=Y[at in dk?He.charAt(vt++):at],!Wt||(Qe=Wt(ke,Je,Qe))<0)return-1}else if(at!=Je.charCodeAt(Qe++))return-1}return Qe}function z(ke,He,Je){var Qe=d.exec(He.slice(Je));return Qe?(ke.p=f.get(Qe[0].toLowerCase()),Je+Qe[0].length):-1}function G(ke,He,Je){var Qe=v.exec(He.slice(Je));return Qe?(ke.w=w.get(Qe[0].toLowerCase()),Je+Qe[0].length):-1}function ne(ke,He,Je){var Qe=p.exec(He.slice(Je));return Qe?(ke.w=x.get(Qe[0].toLowerCase()),Je+Qe[0].length):-1}function Z(ke,He,Je){var Qe=T.exec(He.slice(Je));return Qe?(ke.m=O.get(Qe[0].toLowerCase()),Je+Qe[0].length):-1}function ie(ke,He,Je){var Qe=C.exec(He.slice(Je));return Qe?(ke.m=N.get(Qe[0].toLowerCase()),Je+Qe[0].length):-1}function me(ke,He,Je){return J(ke,r,He,Je)}function ce(ke,He,Je){return J(ke,n,He,Je)}function Q(ke,He,Je){return J(ke,i,He,Je)}function de(ke){return o[ke.getDay()]}function le(ke){return s[ke.getDay()]}function ye(ke){return u[ke.getMonth()]}function Se(ke){return l[ke.getMonth()]}function $(ke){return a[+(ke.getHours()>=12)]}function X(ke){return 1+~~(ke.getMonth()/3)}function se(ke){return o[ke.getUTCDay()]}function H(ke){return s[ke.getUTCDay()]}function oe(ke){return u[ke.getUTCMonth()]}function ge(ke){return l[ke.getUTCMonth()]}function be(ke){return a[+(ke.getUTCHours()>=12)]}function Le(ke){return 1+~~(ke.getUTCMonth()/3)}return{format:function(ke){var He=q(ke+="",D);return He.toString=function(){return ke},He},parse:function(ke){var He=W(ke+="",!1);return He.toString=function(){return ke},He},utcFormat:function(ke){var He=q(ke+="",M);return He.toString=function(){return ke},He},utcParse:function(ke){var He=W(ke+="",!0);return He.toString=function(){return ke},He}}}var dk={"-":"",_:" ",0:"0"},Ho=/^\s*\d+/,lue=/^%/,cue=/[\\^$*+?|[\]().{}]/g;function xi(t,r,n){var i=t<0?"-":"",a=(i?-t:t)+"",s=a.length;return i+(s<n?new Array(n-s+1).join(r)+a:a)}function due(t){return t.replace(cue,"\\$&")}function sg(t){return new RegExp("^(?:"+t.map(due).join("|")+")","i")}function og(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function uue(t,r,n){var i=Ho.exec(r.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function hue(t,r,n){var i=Ho.exec(r.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function fue(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function mue(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function pue(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function uk(t,r,n){var i=Ho.exec(r.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function hk(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function gue(t,r,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function yue(t,r,n){var i=Ho.exec(r.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function xue(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function fk(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function vue(t,r,n){var i=Ho.exec(r.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function mk(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function bue(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function jue(t,r,n){var i=Ho.exec(r.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function wue(t,r,n){var i=Ho.exec(r.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Sue(t,r,n){var i=Ho.exec(r.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Cue(t,r,n){var i=lue.exec(r.slice(n,n+1));return i?n+i[0].length:-1}function Nue(t,r,n){var i=Ho.exec(r.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Aue(t,r,n){var i=Ho.exec(r.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function pk(t,r){return xi(t.getDate(),r,2)}function Eue(t,r){return xi(t.getHours(),r,2)}function _ue(t,r){return xi(t.getHours()%12||12,r,2)}function Tue(t,r){return xi(1+Ty.count(ch(t),t),r,3)}function aF(t,r){return xi(t.getMilliseconds(),r,3)}function Iue(t,r){return aF(t,r)+"000"}function Oue(t,r){return xi(t.getMonth()+1,r,2)}function kue(t,r){return xi(t.getMinutes(),r,2)}function Due(t,r){return xi(t.getSeconds(),r,2)}function Pue(t){var r=t.getDay();return r===0?7:r}function Rue(t,r){return xi(T2.count(ch(t)-1,t),r,2)}function sF(t){var r=t.getDay();return r>=4||r===0?Up(t):Up.ceil(t)}function Mue(t,r){return t=sF(t),xi(Up.count(ch(t),t)+(ch(t).getDay()===4),r,2)}function Lue(t){return t.getDay()}function zue(t,r){return xi(wb.count(ch(t)-1,t),r,2)}function Bue(t,r){return xi(t.getFullYear()%100,r,2)}function Fue(t,r){return t=sF(t),xi(t.getFullYear()%100,r,2)}function que(t,r){return xi(t.getFullYear()%1e4,r,4)}function Uue(t,r){var n=t.getDay();return t=n>=4||n===0?Up(t):Up.ceil(t),xi(t.getFullYear()%1e4,r,4)}function Wue(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+xi(r/60|0,"0",2)+xi(r%60,"0",2)}function gk(t,r){return xi(t.getUTCDate(),r,2)}function Hue(t,r){return xi(t.getUTCHours(),r,2)}function Vue(t,r){return xi(t.getUTCHours()%12||12,r,2)}function $ue(t,r){return xi(1+_2.count(dh(t),t),r,3)}function oF(t,r){return xi(t.getUTCMilliseconds(),r,3)}function Gue(t,r){return oF(t,r)+"000"}function Kue(t,r){return xi(t.getUTCMonth()+1,r,2)}function Que(t,r){return xi(t.getUTCMinutes(),r,2)}function Yue(t,r){return xi(t.getUTCSeconds(),r,2)}function Zue(t){var r=t.getUTCDay();return r===0?7:r}function Xue(t,r){return xi(I2.count(dh(t)-1,t),r,2)}function lF(t){var r=t.getUTCDay();return r>=4||r===0?Wp(t):Wp.ceil(t)}function Jue(t,r){return t=lF(t),xi(Wp.count(dh(t),t)+(dh(t).getUTCDay()===4),r,2)}function ehe(t){return t.getUTCDay()}function the(t,r){return xi(Sb.count(dh(t)-1,t),r,2)}function rhe(t,r){return xi(t.getUTCFullYear()%100,r,2)}function nhe(t,r){return t=lF(t),xi(t.getUTCFullYear()%100,r,2)}function ihe(t,r){return xi(t.getUTCFullYear()%1e4,r,4)}function ahe(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Wp(t):Wp.ceil(t),xi(t.getUTCFullYear()%1e4,r,4)}function she(){return"+0000"}function yk(){return"%"}function xk(t){return+t}function vk(t){return Math.floor(+t/1e3)}var ip,cF,dF;ohe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ohe(t){return ip=oue(t),cF=ip.format,ip.parse,dF=ip.utcFormat,ip.utcParse,ip}function lhe(t){return new Date(t)}function che(t){return t instanceof Date?+t:+new Date(+t)}function zE(t,r,n,i,a,s,o,l,u,d){var f=CE(),p=f.invert,x=f.domain,v=d(".%L"),w=d(":%S"),C=d("%I:%M"),N=d("%I %p"),T=d("%a %d"),O=d("%b %d"),D=d("%B"),M=d("%Y");function Y(q){return(u(q)<q?v:l(q)<q?w:o(q)<q?C:s(q)<q?N:i(q)<q?a(q)<q?T:O:n(q)<q?D:M)(q)}return f.invert=function(q){return new Date(p(q))},f.domain=function(q){return arguments.length?x(Array.from(q,che)):x().map(lhe)},f.ticks=function(q){var W=x();return t(W[0],W[W.length-1],q??10)},f.tickFormat=function(q,W){return W==null?Y:d(W)},f.nice=function(q){var W=x();return(!q||typeof q.range!="function")&&(q=r(W[0],W[W.length-1],q??10)),q?x(Y9(W,q)):f},f.copy=function(){return _y(f,zE(t,r,n,i,a,s,o,l,u,d))},f}function dhe(){return ud.apply(zE(aue,sue,ch,ME,T2,Ty,PE,kE,$f,cF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uhe(){return ud.apply(zE(nue,iue,dh,LE,I2,_2,RE,DE,$f,dF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function O2(){var t=0,r=1,n,i,a,s,o=ql,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(a===0?.5:(p=(s(p)-n)*a,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,r]=p,n=s(t=+t),i=s(r=+r),a=n===i?0:1/(i-n),d):[t,r]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(x){var v,w;return arguments.length?([v,w]=x,o=p(v,w),d):[o(0),o(1)]}}return d.range=f(l0),d.rangeRound=f(SE),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return s=p,n=p(t),i=p(r),a=n===i?0:1/(i-n),d}}function xf(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uF(){var t=yf(O2()(ql));return t.copy=function(){return xf(t,uF())},yh.apply(t,arguments)}function hF(){var t=EE(O2()).domain([1,10]);return t.copy=function(){return xf(t,hF()).base(t.base())},yh.apply(t,arguments)}function fF(){var t=_E(O2());return t.copy=function(){return xf(t,fF()).constant(t.constant())},yh.apply(t,arguments)}function BE(){var t=TE(O2());return t.copy=function(){return xf(t,BE()).exponent(t.exponent())},yh.apply(t,arguments)}function hhe(){return BE.apply(null,arguments).exponent(.5)}function mF(){var t=[],r=ql;function n(i){if(i!=null&&!isNaN(i=+i))return r((Ay(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let a of i)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(nf),n},n.interpolator=function(i){return arguments.length?(r=i,n):r},n.range=function(){return t.map((i,a)=>r(a/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(a,s)=>Zce(t,s/i))},n.copy=function(){return mF(r).domain(t)},yh.apply(n,arguments)}function k2(){var t=0,r=.5,n=1,i=1,a,s,o,l,u,d=ql,f,p=!1,x;function v(C){return isNaN(C=+C)?x:(C=.5+((C=+f(C))-s)*(i*C<i*s?l:u),d(p?Math.max(0,Math.min(1,C)):C))}v.domain=function(C){return arguments.length?([t,r,n]=C,a=f(t=+t),s=f(r=+r),o=f(n=+n),l=a===s?0:.5/(s-a),u=s===o?0:.5/(o-s),i=s<a?-1:1,v):[t,r,n]},v.clamp=function(C){return arguments.length?(p=!!C,v):p},v.interpolator=function(C){return arguments.length?(d=C,v):d};function w(C){return function(N){var T,O,D;return arguments.length?([T,O,D]=N,d=Cde(C,[T,O,D]),v):[d(0),d(.5),d(1)]}}return v.range=w(l0),v.rangeRound=w(SE),v.unknown=function(C){return arguments.length?(x=C,v):x},function(C){return f=C,a=C(t),s=C(r),o=C(n),l=a===s?0:.5/(s-a),u=s===o?0:.5/(o-s),i=s<a?-1:1,v}}function pF(){var t=yf(k2()(ql));return t.copy=function(){return xf(t,pF())},yh.apply(t,arguments)}function gF(){var t=EE(k2()).domain([.1,1,10]);return t.copy=function(){return xf(t,gF()).base(t.base())},yh.apply(t,arguments)}function yF(){var t=_E(k2());return t.copy=function(){return xf(t,yF()).constant(t.constant())},yh.apply(t,arguments)}function FE(){var t=TE(k2());return t.copy=function(){return xf(t,FE()).exponent(t.exponent())},yh.apply(t,arguments)}function fhe(){return FE.apply(null,arguments).exponent(.5)}const jg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bE,scaleDiverging:pF,scaleDivergingLog:gF,scaleDivergingPow:FE,scaleDivergingSqrt:fhe,scaleDivergingSymlog:yF,scaleIdentity:Q9,scaleImplicit:kN,scaleLinear:K9,scaleLog:Z9,scaleOrdinal:vE,scalePoint:ede,scalePow:IE,scaleQuantile:eF,scaleQuantize:tF,scaleRadial:J9,scaleSequential:uF,scaleSequentialLog:hF,scaleSequentialPow:BE,scaleSequentialQuantile:mF,scaleSequentialSqrt:hhe,scaleSequentialSymlog:fF,scaleSqrt:Gde,scaleSymlog:X9,scaleThreshold:rF,scaleTime:dhe,scaleUtc:uhe,tickFormat:G9},Symbol.toStringTag,{value:"Module"}));var xh=t=>t.chartData,D2=ut([xh],t=>{var r=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:r,dataStartIndex:0}}),qE=(t,r,n,i)=>i?D2(t):xh(t),xF=(t,r,n)=>n?D2(t):xh(t);function uf(t){if(Array.isArray(t)&&t.length===2){var[r,n]=t;if(oa(r)&&oa(n))return!0}return!1}function bk(t,r,n){return n?t:[Math.min(t[0],r[0]),Math.max(t[1],r[1])]}function vF(t,r){if(r&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,a,s;if(oa(n))a=n;else if(typeof n=="function")return;if(oa(i))s=i;else if(typeof i=="function")return;var o=[a,s];if(uf(o))return o}}function mhe(t,r,n){if(!(!n&&r==null)){if(typeof t=="function"&&r!=null)try{var i=t(r,n);if(uf(i))return bk(i,r,n)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")r!=null&&(o=Math.min(...r));else if(or(a))o=a;else if(typeof a=="function")try{r!=null&&(o=a(r?.[0]))}catch{}else if(typeof a=="string"&&OI.test(a)){var u=OI.exec(a);if(u==null||u[1]==null||r==null)o=void 0;else{var d=+u[1];o=r[0]-d}}else o=r?.[0];if(s==="auto")r!=null&&(l=Math.max(...r));else if(or(s))l=s;else if(typeof s=="function")try{r!=null&&(l=s(r?.[1]))}catch{}else if(typeof s=="string"&&kI.test(s)){var f=kI.exec(s);if(f==null||f[1]==null||r==null)l=void 0;else{var p=+f[1];l=r[1]+p}}else l=r?.[1];var x=[o,l];if(uf(x))return r==null?x:bk(x,r,n)}}}var c0=1e9,phe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},WE,Ua=!0,od="[DecimalError] ",Jf=od+"Invalid argument: ",UE=od+"Exponent out of range: ",d0=Math.floor,Rf=Math.pow,ghe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Dc,zo=1e7,Na=7,bF=9007199254740991,Cb=d0(bF/Na),yr={};yr.absoluteValue=yr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};yr.comparedTo=yr.cmp=function(t){var r,n,i,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,a=t.d.length,r=0,n=i<a?i:a;r<n;++r)if(s.d[r]!==t.d[r])return s.d[r]>t.d[r]^s.s<0?1:-1;return i===a?0:i>a^s.s<0?1:-1};yr.decimalPlaces=yr.dp=function(){var t=this,r=t.d.length-1,n=(r-t.e)*Na;if(r=t.d[r],r)for(;r%10==0;r/=10)n--;return n<0?0:n};yr.dividedBy=yr.div=function(t){return Xu(this,new this.constructor(t))};yr.dividedToIntegerBy=yr.idiv=function(t){var r=this,n=r.constructor;return na(Xu(r,new n(t),0,1),n.precision)};yr.equals=yr.eq=function(t){return!this.cmp(t)};yr.exponent=function(){return no(this)};yr.greaterThan=yr.gt=function(t){return this.cmp(t)>0};yr.greaterThanOrEqualTo=yr.gte=function(t){return this.cmp(t)>=0};yr.isInteger=yr.isint=function(){return this.e>this.d.length-2};yr.isNegative=yr.isneg=function(){return this.s<0};yr.isPositive=yr.ispos=function(){return this.s>0};yr.isZero=function(){return this.s===0};yr.lessThan=yr.lt=function(t){return this.cmp(t)<0};yr.lessThanOrEqualTo=yr.lte=function(t){return this.cmp(t)<1};yr.logarithm=yr.log=function(t){var r,n=this,i=n.constructor,a=i.precision,s=a+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Dc))throw Error(od+"NaN");if(n.s<1)throw Error(od+(n.s?"NaN":"-Infinity"));return n.eq(Dc)?new i(0):(Ua=!1,r=Xu(ty(n,s),ty(t,s),s),Ua=!0,na(r,a))};yr.minus=yr.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?SF(r,t):jF(r,(t.s=-t.s,t))};yr.modulo=yr.mod=function(t){var r,n=this,i=n.constructor,a=i.precision;if(t=new i(t),!t.s)throw Error(od+"NaN");return n.s?(Ua=!1,r=Xu(n,t,0,1).times(t),Ua=!0,n.minus(r)):na(new i(n),a)};yr.naturalExponential=yr.exp=function(){return wF(this)};yr.naturalLogarithm=yr.ln=function(){return ty(this)};yr.negated=yr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};yr.plus=yr.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?jF(r,t):SF(r,(t.s=-t.s,t))};yr.precision=yr.sd=function(t){var r,n,i,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Jf+t);if(r=no(a)+1,i=a.d.length-1,n=i*Na+1,i=a.d[i],i){for(;i%10==0;i/=10)n--;for(i=a.d[0];i>=10;i/=10)n++}return t&&r>n?r:n};yr.squareRoot=yr.sqrt=function(){var t,r,n,i,a,s,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(od+"NaN")}for(t=no(l),Ua=!1,a=Math.sqrt(+l),a==0||a==1/0?(r=au(l.d),(r.length+t)%2==0&&(r+="0"),a=Math.sqrt(r),t=d0((t+1)/2)-(t<0||t%2),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),i=new u(r)):i=new u(a.toString()),n=u.precision,a=o=n+3;;)if(s=i,i=s.plus(Xu(l,s,o+2)).times(.5),au(s.d).slice(0,o)===(r=au(i.d)).slice(0,o)){if(r=r.slice(o-3,o+1),a==o&&r=="4999"){if(na(s,n+1,0),s.times(s).eq(l)){i=s;break}}else if(r!="9999")break;o+=4}return Ua=!0,na(i,n)};yr.times=yr.mul=function(t){var r,n,i,a,s,o,l,u,d,f=this,p=f.constructor,x=f.d,v=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,u=x.length,d=v.length,u<d&&(s=x,x=v,v=s,o=u,u=d,d=o),s=[],o=u+d,i=o;i--;)s.push(0);for(i=d;--i>=0;){for(r=0,a=u+i;a>i;)l=s[a]+v[i]*x[a-i-1]+r,s[a--]=l%zo|0,r=l/zo|0;s[a]=(s[a]+r)%zo|0}for(;!s[--o];)s.pop();return r?++n:s.shift(),t.d=s,t.e=n,Ua?na(t,p.precision):t};yr.toDecimalPlaces=yr.todp=function(t,r){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(fu(t,0,c0),r===void 0?r=i.rounding:fu(r,0,8),na(n,t+no(n)+1,r))};yr.toExponential=function(t,r){var n,i=this,a=i.constructor;return t===void 0?n=gm(i,!0):(fu(t,0,c0),r===void 0?r=a.rounding:fu(r,0,8),i=na(new a(i),t+1,r),n=gm(i,!0,t+1)),n};yr.toFixed=function(t,r){var n,i,a=this,s=a.constructor;return t===void 0?gm(a):(fu(t,0,c0),r===void 0?r=s.rounding:fu(r,0,8),i=na(new s(a),t+no(a)+1,r),n=gm(i.abs(),!1,t+no(i)+1),a.isneg()&&!a.isZero()?"-"+n:n)};yr.toInteger=yr.toint=function(){var t=this,r=t.constructor;return na(new r(t),no(t)+1,r.rounding)};yr.toNumber=function(){return+this};yr.toPower=yr.pow=function(t){var r,n,i,a,s,o,l=this,u=l.constructor,d=12,f=+(t=new u(t));if(!t.s)return new u(Dc);if(l=new u(l),!l.s){if(t.s<1)throw Error(od+"Infinity");return l}if(l.eq(Dc))return l;if(i=u.precision,t.eq(Dc))return na(l,i);if(r=t.e,n=t.d.length-1,o=r>=n,s=l.s,o){if((n=f<0?-f:f)<=bF){for(a=new u(Dc),r=Math.ceil(i/Na+4),Ua=!1;n%2&&(a=a.times(l),wk(a.d,r)),n=d0(n/2),n!==0;)l=l.times(l),wk(l.d,r);return Ua=!0,t.s<0?new u(Dc).div(a):na(a,i)}}else if(s<0)throw Error(od+"NaN");return s=s<0&&t.d[Math.max(r,n)]&1?-1:1,l.s=1,Ua=!1,a=t.times(ty(l,i+d)),Ua=!0,a=wF(a),a.s=s,a};yr.toPrecision=function(t,r){var n,i,a=this,s=a.constructor;return t===void 0?(n=no(a),i=gm(a,n<=s.toExpNeg||n>=s.toExpPos)):(fu(t,1,c0),r===void 0?r=s.rounding:fu(r,0,8),a=na(new s(a),t,r),n=no(a),i=gm(a,t<=n||n<=s.toExpNeg,t)),i};yr.toSignificantDigits=yr.tosd=function(t,r){var n=this,i=n.constructor;return t===void 0?(t=i.precision,r=i.rounding):(fu(t,1,c0),r===void 0?r=i.rounding:fu(r,0,8)),na(new i(n),t,r)};yr.toString=yr.valueOf=yr.val=yr.toJSON=yr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=no(t),n=t.constructor;return gm(t,r<=n.toExpNeg||r>=n.toExpPos)};function jF(t,r){var n,i,a,s,o,l,u,d,f=t.constructor,p=f.precision;if(!t.s||!r.s)return r.s||(r=new f(t)),Ua?na(r,p):r;if(u=t.d,d=r.d,o=t.e,a=r.e,u=u.slice(),s=o-a,s){for(s<0?(i=u,s=-s,l=d.length):(i=d,a=o,l=u.length),o=Math.ceil(p/Na),l=o>l?o+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=u.length,s=d.length,l-s<0&&(s=l,i=d,d=u,u=i),n=0;s;)n=(u[--s]=u[s]+d[s]+n)/zo|0,u[s]%=zo;for(n&&(u.unshift(n),++a),l=u.length;u[--l]==0;)u.pop();return r.d=u,r.e=a,Ua?na(r,p):r}function fu(t,r,n){if(t!==~~t||t<r||t>n)throw Error(Jf+t)}function au(t){var r,n,i,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,r=1;r<a;r++)i=t[r]+"",n=Na-i.length,n&&(s+=Qh(n)),s+=i;o=t[r],i=o+"",n=Na-i.length,n&&(s+=Qh(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Xu=(function(){function t(i,a){var s,o=0,l=i.length;for(i=i.slice();l--;)s=i[l]*a+o,i[l]=s%zo|0,o=s/zo|0;return o&&i.unshift(o),i}function r(i,a,s,o){var l,u;if(s!=o)u=s>o?1:-1;else for(l=u=0;l<s;l++)if(i[l]!=a[l]){u=i[l]>a[l]?1:-1;break}return u}function n(i,a,s){for(var o=0;s--;)i[s]-=o,o=i[s]<a[s]?1:0,i[s]=o*zo+i[s]-a[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,s,o){var l,u,d,f,p,x,v,w,C,N,T,O,D,M,Y,q,W,J,z=i.constructor,G=i.s==a.s?1:-1,ne=i.d,Z=a.d;if(!i.s)return new z(i);if(!a.s)throw Error(od+"Division by zero");for(u=i.e-a.e,W=Z.length,Y=ne.length,v=new z(G),w=v.d=[],d=0;Z[d]==(ne[d]||0);)++d;if(Z[d]>(ne[d]||0)&&--u,s==null?O=s=z.precision:o?O=s+(no(i)-no(a))+1:O=s,O<0)return new z(0);if(O=O/Na+2|0,d=0,W==1)for(f=0,Z=Z[0],O++;(d<Y||f)&&O--;d++)D=f*zo+(ne[d]||0),w[d]=D/Z|0,f=D%Z|0;else{for(f=zo/(Z[0]+1)|0,f>1&&(Z=t(Z,f),ne=t(ne,f),W=Z.length,Y=ne.length),M=W,C=ne.slice(0,W),N=C.length;N<W;)C[N++]=0;J=Z.slice(),J.unshift(0),q=Z[0],Z[1]>=zo/2&&++q;do f=0,l=r(Z,C,W,N),l<0?(T=C[0],W!=N&&(T=T*zo+(C[1]||0)),f=T/q|0,f>1?(f>=zo&&(f=zo-1),p=t(Z,f),x=p.length,N=C.length,l=r(p,C,x,N),l==1&&(f--,n(p,W<x?J:Z,x))):(f==0&&(l=f=1),p=Z.slice()),x=p.length,x<N&&p.unshift(0),n(C,p,N),l==-1&&(N=C.length,l=r(Z,C,W,N),l<1&&(f++,n(C,W<N?J:Z,N))),N=C.length):l===0&&(f++,C=[0]),w[d++]=f,l&&C[0]?C[N++]=ne[M]||0:(C=[ne[M]],N=1);while((M++<Y||C[0]!==void 0)&&O--)}return w[0]||w.shift(),v.e=u,na(v,o?s+no(v)+1:s)}})();function wF(t,r){var n,i,a,s,o,l,u=0,d=0,f=t.constructor,p=f.precision;if(no(t)>16)throw Error(UE+no(t));if(!t.s)return new f(Dc);for(Ua=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(i=Math.log(Rf(2,d))/Math.LN10*2+5|0,l+=i,n=a=s=new f(Dc),f.precision=l;;){if(a=na(a.times(t),l),n=n.times(++u),o=s.plus(Xu(a,n,l)),au(o.d).slice(0,l)===au(s.d).slice(0,l)){for(;d--;)s=na(s.times(s),l);return f.precision=p,r==null?(Ua=!0,na(s,p)):s}s=o}}function no(t){for(var r=t.e*Na,n=t.d[0];n>=10;n/=10)r++;return r}function aS(t,r,n){if(r>t.LN10.sd())throw Ua=!0,n&&(t.precision=n),Error(od+"LN10 precision limit exceeded");return na(new t(t.LN10),r)}function Qh(t){for(var r="";t--;)r+="0";return r}function ty(t,r){var n,i,a,s,o,l,u,d,f,p=1,x=10,v=t,w=v.d,C=v.constructor,N=C.precision;if(v.s<1)throw Error(od+(v.s?"NaN":"-Infinity"));if(v.eq(Dc))return new C(0);if(r==null?(Ua=!1,d=N):d=r,v.eq(10))return r==null&&(Ua=!0),aS(C,d);if(d+=x,C.precision=d,n=au(w),i=n.charAt(0),s=no(v),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)v=v.times(t),n=au(v.d),i=n.charAt(0),p++;s=no(v),i>1?(v=new C("0."+n),s++):v=new C(i+"."+n.slice(1))}else return u=aS(C,d+2,N).times(s+""),v=ty(new C(i+"."+n.slice(1)),d-x).plus(u),C.precision=N,r==null?(Ua=!0,na(v,N)):v;for(l=o=v=Xu(v.minus(Dc),v.plus(Dc),d),f=na(v.times(v),d),a=3;;){if(o=na(o.times(f),d),u=l.plus(Xu(o,new C(a),d)),au(u.d).slice(0,d)===au(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(aS(C,d+2,N).times(s+""))),l=Xu(l,new C(p),d),C.precision=N,r==null?(Ua=!0,na(l,N)):l;l=u,a+=2}}function jk(t,r){var n,i,a;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(i=r.search(/e/i))>0?(n<0&&(n=i),n+=+r.slice(i+1),r=r.substring(0,i)):n<0&&(n=r.length),i=0;r.charCodeAt(i)===48;)++i;for(a=r.length;r.charCodeAt(a-1)===48;)--a;if(r=r.slice(i,a),r){if(a-=i,n=n-i-1,t.e=d0(n/Na),t.d=[],i=(n+1)%Na,n<0&&(i+=Na),i<a){for(i&&t.d.push(+r.slice(0,i)),a-=Na;i<a;)t.d.push(+r.slice(i,i+=Na));r=r.slice(i),i=Na-r.length}else i-=a;for(;i--;)r+="0";if(t.d.push(+r),Ua&&(t.e>Cb||t.e<-Cb))throw Error(UE+n)}else t.s=0,t.e=0,t.d=[0];return t}function na(t,r,n){var i,a,s,o,l,u,d,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(i=r-o,i<0)i+=Na,a=r,d=p[f=0];else{if(f=Math.ceil((i+1)/Na),s=p.length,f>=s)return t;for(d=s=p[f],o=1;s>=10;s/=10)o++;i%=Na,a=i-Na+o}if(n!==void 0&&(s=Rf(10,o-a-1),l=d/s%10|0,u=r<0||p[f+1]!==void 0||d%s,u=n<4?(l||u)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(i>0?a>0?d/Rf(10,o-a):0:p[f-1])%10&1||n==(t.s<0?8:7))),r<1||!p[0])return u?(s=no(t),p.length=1,r=r-s-1,p[0]=Rf(10,(Na-r%Na)%Na),t.e=d0(-r/Na)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=f,s=1,f--):(p.length=f+1,s=Rf(10,Na-i),p[f]=a>0?(d/Rf(10,o-a)%Rf(10,a)|0)*s:0),u)for(;;)if(f==0){(p[0]+=s)==zo&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=zo)break;p[f--]=0,s=1}for(i=p.length;p[--i]===0;)p.pop();if(Ua&&(t.e>Cb||t.e<-Cb))throw Error(UE+no(t));return t}function SF(t,r){var n,i,a,s,o,l,u,d,f,p,x=t.constructor,v=x.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new x(t),Ua?na(r,v):r;if(u=t.d,p=r.d,i=r.e,d=t.e,u=u.slice(),o=d-i,o){for(f=o<0,f?(n=u,o=-o,l=p.length):(n=p,i=d,l=u.length),a=Math.max(Math.ceil(v/Na),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=u.length,l=p.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(u[a]!=p[a]){f=u[a]<p[a];break}o=0}for(f&&(n=u,u=p,p=n,r.s=-r.s),l=u.length,a=p.length-l;a>0;--a)u[l++]=0;for(a=p.length;a>o;){if(u[--a]<p[a]){for(s=a;s&&u[--s]===0;)u[s]=zo-1;--u[s],u[a]+=zo}u[a]-=p[a]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--i;return u[0]?(r.d=u,r.e=i,Ua?na(r,v):r):new x(0)}function gm(t,r,n){var i,a=no(t),s=au(t.d),o=s.length;return r?(n&&(i=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Qh(i):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Qh(-a-1)+s,n&&(i=n-o)>0&&(s+=Qh(i))):a>=o?(s+=Qh(a+1-o),n&&(i=n-a-1)>0&&(s=s+"."+Qh(i))):((i=a+1)<o&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-o)>0&&(a+1===o&&(s+="."),s+=Qh(i))),t.s<0?"-"+s:s}function wk(t,r){if(t.length>r)return t.length=r,!0}function CF(t){var r,n,i;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Jf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return jk(o,s.toString())}else if(typeof s!="string")throw Error(Jf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,ghe.test(s))jk(o,s);else throw Error(Jf+s)}if(a.prototype=yr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=CF,a.config=a.set=yhe,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return a.config(t),a}function yhe(t){if(!t||typeof t!="object")throw Error(od+"Object expected");var r,n,i,a=["precision",1,c0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<a.length;r+=3)if((i=t[n=a[r]])!==void 0)if(d0(i)===i&&i>=a[r+1]&&i<=a[r+2])this[n]=i;else throw Error(Jf+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Jf+n+": "+i);return this}var WE=CF(phe);Dc=new WE(1);const Li=WE;var xhe=t=>t,NF={},AF=t=>t===NF,Sk=t=>function r(){return arguments.length===0||arguments.length===1&&AF(arguments.length<=0?void 0:arguments[0])?r:t(...arguments)},EF=(t,r)=>t===1?r:Sk(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(o=>o!==NF).length;return s>=t?r(...i):EF(t-s,Sk(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=i.map(f=>AF(f)?l.shift():f);return r(...d,...l)}))}),vhe=t=>EF(t.length,t),MN=(t,r)=>{for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},bhe=vhe((t,r)=>Array.isArray(r)?r.map(t):Object.keys(r).map(n=>r[n]).map(t)),jhe=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(!n.length)return xhe;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,u)=>u(l),s(...arguments))}};function _F(t){var r;return t===0?r=1:r=Math.floor(new Li(t).abs().log(10).toNumber())+1,r}function TF(t,r,n){for(var i=new Li(t),a=0,s=[];i.lt(r)&&a<1e5;)s.push(i.toNumber()),i=i.add(n),a++;return s}var IF=t=>{var[r,n]=t,[i,a]=[r,n];return r>n&&([i,a]=[n,r]),[i,a]},OF=(t,r,n)=>{if(t.lte(0))return new Li(0);var i=_F(t.toNumber()),a=new Li(10).pow(i),s=t.div(a),o=i!==1?.05:.1,l=new Li(Math.ceil(s.div(o).toNumber())).add(n).mul(o),u=l.mul(a);return r?new Li(u.toNumber()):new Li(Math.ceil(u.toNumber()))},whe=(t,r,n)=>{var i=new Li(1),a=new Li(t);if(!a.isint()&&n){var s=Math.abs(t);s<1?(i=new Li(10).pow(_F(t)-1),a=new Li(Math.floor(a.div(i).toNumber())).mul(i)):s>1&&(a=new Li(Math.floor(t)))}else t===0?a=new Li(Math.floor((r-1)/2)):n||(a=new Li(Math.floor(t)));var o=Math.floor((r-1)/2),l=jhe(bhe(u=>a.add(new Li(u-o).mul(i)).toNumber()),MN);return l(0,r)},kF=function(r,n,i,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-r)/(i-1)))return{step:new Li(0),tickMin:new Li(0),tickMax:new Li(0)};var o=OF(new Li(n).sub(r).div(i-1),a,s),l;r<=0&&n>=0?l=new Li(0):(l=new Li(r).add(n).div(2),l=l.sub(new Li(l).mod(o)));var u=Math.ceil(l.sub(r).div(o).toNumber()),d=Math.ceil(new Li(n).sub(l).div(o).toNumber()),f=u+d+1;return f>i?kF(r,n,i,a,s+1):(f<i&&(d=n>0?d+(i-f):d,u=n>0?u:u+(i-f)),{step:o,tickMin:l.sub(new Li(u).mul(o)),tickMax:l.add(new Li(d).mul(o))})},She=function(r){var[n,i]=r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,u]=IF([n,i]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...MN(0,a-1).map(()=>1/0)]:[...MN(0,a-1).map(()=>-1/0),u];return n>i?d.reverse():d}if(l===u)return whe(l,a,s);var{step:f,tickMin:p,tickMax:x}=kF(l,u,o,s,0),v=TF(p,x.add(new Li(.1).mul(f)),f);return n>i?v.reverse():v},Che=function(r,n){var[i,a]=r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=IF([i,a]);if(o===-1/0||l===1/0)return[i,a];if(o===l)return[o];var u=Math.max(n,2),d=OF(new Li(l).sub(o).div(u-1),s,0),f=[...TF(new Li(o),new Li(l),d),l];return s===!1&&(f=f.map(p=>Math.round(p))),i>a?f.reverse():f},DF=t=>t.rootProps.maxBarSize,Nhe=t=>t.rootProps.barGap,PF=t=>t.rootProps.barCategoryGap,Ahe=t=>t.rootProps.barSize,Iy=t=>t.rootProps.stackOffset,RF=t=>t.rootProps.reverseStackOrder,HE=t=>t.options.chartName,VE=t=>t.rootProps.syncId,MF=t=>t.rootProps.syncMethod,$E=t=>t.options.eventEmitter,Ehe=t=>t.rootProps.baseValue,$s={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Vu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Oc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},P2=(t,r)=>{if(!(!t||!r))return t!=null&&t.reversed?[r[1],r[0]]:r},_he={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vu.angleAxisId,includeHidden:!1,name:void 0,reversed:Vu.reversed,scale:Vu.scale,tick:Vu.tick,tickCount:void 0,ticks:void 0,type:Vu.type,unit:void 0},The={allowDataOverflow:Oc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Oc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Oc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Oc.scale,tick:Oc.tick,tickCount:Oc.tickCount,ticks:void 0,type:Oc.type,unit:void 0},Ihe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Vu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vu.scale,tick:Vu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Ohe={allowDataOverflow:Oc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Oc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Oc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Oc.scale,tick:Oc.tick,tickCount:Oc.tickCount,ticks:void 0,type:"category",unit:void 0},GE=(t,r)=>t.polarAxis.angleAxis[r]!=null?t.polarAxis.angleAxis[r]:t.layout.layoutType==="radial"?Ihe:_he,KE=(t,r)=>t.polarAxis.radiusAxis[r]!=null?t.polarAxis.radiusAxis[r]:t.layout.layoutType==="radial"?Ohe:The,R2=t=>t.polarOptions,QE=ut([ph,gh,wo],P9),LF=ut([R2,QE],(t,r)=>{if(t!=null)return _l(t.innerRadius,r,0)}),zF=ut([R2,QE],(t,r)=>{if(t!=null)return _l(t.outerRadius,r,r*.8)}),khe=t=>{if(t==null)return[0,0];var{startAngle:r,endAngle:n}=t;return[r,n]},BF=ut([R2],khe);ut([GE,BF],P2);var FF=ut([QE,LF,zF],(t,r,n)=>{if(!(t==null||r==null||n==null))return[r,n]});ut([KE,FF],P2);var qF=ut([Gn,R2,LF,zF,ph,gh],(t,r,n,i,a,s)=>{if(!(t!=="centric"&&t!=="radial"||r==null||n==null||i==null)){var{cx:o,cy:l,startAngle:u,endAngle:d}=r;return{cx:_l(o,a,a/2),cy:_l(l,s,s/2),innerRadius:n,outerRadius:i,startAngle:u,endAngle:d,clockWise:!1}}}),Va=(t,r)=>r,Oy=(t,r,n)=>n;function M2(t){return t?.id}function UF(t,r,n){var{chartData:i=[]}=r,{allowDuplicatedCategory:a,dataKey:s}=n,o=new Map;return t.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:i;if(!(d==null||d.length===0)){var f=M2(l);d.forEach((p,x)=>{var v=s==null||a?x:String(Ii(p,s,null)),w=Ii(p,l.dataKey,0),C;o.has(v)?C=o.get(v):C={},Object.assign(C,{[f]:w}),o.set(v,C)})}}),Array.from(o.values())}function L2(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var z2=(t,r)=>t===r?!0:t==null||r==null?!1:t[0]===r[0]&&t[1]===r[1];function B2(t,r){return Array.isArray(t)&&Array.isArray(r)&&t.length===0&&r.length===0?!0:t===r}function Dhe(t,r){if(t.length===r.length){for(var n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}return!1}var Co=t=>{var r=Gn(t);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},u0=t=>t.tooltip.settings.axisId;function Ck(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Nb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ck(Object(n),!0).forEach(function(i){Phe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Phe(t,r,n){return(r=Rhe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Rhe(t){var r=Mhe(t,"string");return typeof r=="symbol"?r:r+""}function Mhe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var LN=[0,"auto"],Mo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},WF=(t,r)=>t.cartesianAxis.xAxis[r],vh=(t,r)=>{var n=WF(t,r);return n??Mo},Lo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:LN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Sy},HF=(t,r)=>t.cartesianAxis.yAxis[r],bh=(t,r)=>{var n=HF(t,r);return n??Lo},Lhe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},YE=(t,r)=>{var n=t.cartesianAxis.zAxis[r];return n??Lhe},ls=(t,r,n)=>{switch(r){case"xAxis":return vh(t,n);case"yAxis":return bh(t,n);case"zAxis":return YE(t,n);case"angleAxis":return GE(t,n);case"radiusAxis":return KE(t,n);default:throw new Error("Unexpected axis type: ".concat(r))}},zhe=(t,r,n)=>{switch(r){case"xAxis":return vh(t,n);case"yAxis":return bh(t,n);default:throw new Error("Unexpected axis type: ".concat(r))}},ky=(t,r,n)=>{switch(r){case"xAxis":return vh(t,n);case"yAxis":return bh(t,n);case"angleAxis":return GE(t,n);case"radiusAxis":return KE(t,n);default:throw new Error("Unexpected axis type: ".concat(r))}},VF=t=>t.graphicalItems.cartesianItems.some(r=>r.type==="bar")||t.graphicalItems.polarItems.some(r=>r.type==="radialBar");function ZE(t,r){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===r;case"yAxis":return"yAxisId"in n&&n.yAxisId===r;case"zAxis":return"zAxisId"in n&&n.zAxisId===r;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===r;default:return!1}}}var Dy=t=>t.graphicalItems.cartesianItems,Bhe=ut([Va,Oy],ZE),XE=(t,r,n)=>t.filter(n).filter(i=>r?.includeHidden===!0?!0:!i.hide),Py=ut([Dy,ls,Bhe],XE,{memoizeOptions:{resultEqualityCheck:B2}}),$F=ut([Py],t=>t.filter(r=>r.type==="area"||r.type==="bar").filter(L2)),GF=t=>t.filter(r=>!("stackId"in r)||r.stackId===void 0),Fhe=ut([Py],GF),JE=t=>t.map(r=>r.data).filter(Boolean).flat(1),qhe=ut([Py],JE,{memoizeOptions:{resultEqualityCheck:B2}}),e_=(t,r)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:a}=r;return t.length>0?t:n.slice(i,a+1)},t_=ut([qhe,qE],e_),r_=(t,r,n)=>r?.dataKey!=null?t.map(i=>({value:Ii(i,r.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(a=>({value:Ii(a,i)}))):t.map(i=>({value:i})),F2=ut([t_,ls,Py],r_);function KF(t,r){switch(t){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function vv(t){if(uu(t)||t instanceof Date){var r=Number(t);if(oa(r))return r}}function Nk(t){if(Array.isArray(t)){var r=[vv(t[0]),vv(t[1])];return uf(r)?r:void 0}var n=vv(t);if(n!=null)return[n,n]}function uh(t){return t.map(vv).filter(Rie)}function Uhe(t,r,n){return!n||typeof r!="number"||ad(r)?[]:n.length?uh(n.flatMap(i=>{var a=Ii(t,i.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!oa(s)||!oa(o)))return[r-s,r+o]})):[]}var No=t=>{var r=Co(t),n=u0(t);return ky(t,r,n)},Ry=ut([No],t=>t?.dataKey),Whe=ut([$F,qE,No],UF),QF=(t,r,n,i)=>{var a={},s=r.reduce((o,l)=>{if(l.stackId==null)return o;var u=o[l.stackId];return u==null&&(u=[]),u.push(l),o[l.stackId]=u,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,u]=o,d=i?[...u].reverse():u,f=d.map(M2);return[l,{stackedData:ooe(t,f,n),graphicalItems:d}]}))},Ab=ut([Whe,$F,Iy,RF],QF),YF=(t,r,n,i)=>{var{dataStartIndex:a,dataEndIndex:s}=r;if(i==null&&n!=="zAxis"){var o=uoe(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Hhe=ut([ls],t=>t.allowDataOverflow),n_=t=>{var r;if(t==null||!("domain"in t))return LN;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=uh(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(r=t?.domain)!==null&&r!==void 0?r:LN},i_=ut([ls],n_),a_=ut([i_,Hhe],vF),Vhe=ut([Ab,xh,Va,a_],YF,{memoizeOptions:{resultEqualityCheck:z2}}),q2=t=>t.errorBars,$he=(t,r,n)=>t.flatMap(i=>r[i.id]).filter(Boolean).filter(i=>KF(n,i)),Eb=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},s_=(t,r,n,i,a)=>{var s,o;if(n.length>0&&t.forEach(l=>{n.forEach(u=>{var d,f,p=(d=i[u.id])===null||d===void 0?void 0:d.filter(T=>KF(a,T)),x=Ii(l,(f=r.dataKey)!==null&&f!==void 0?f:u.dataKey),v=Uhe(l,x,p);if(v.length>=2){var w=Math.min(...v),C=Math.max(...v);(s==null||w<s)&&(s=w),(o==null||C>o)&&(o=C)}var N=Nk(x);N!=null&&(s=s==null?N[0]:Math.min(s,N[0]),o=o==null?N[1]:Math.max(o,N[1]))})}),r?.dataKey!=null&&t.forEach(l=>{var u=Nk(Ii(l,r.dataKey));u!=null&&(s=s==null?u[0]:Math.min(s,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),oa(s)&&oa(o))return[s,o]},Ghe=ut([t_,ls,Fhe,q2,Va],s_,{memoizeOptions:{resultEqualityCheck:z2}});function Khe(t){var{value:r}=t;if(uu(r)||r instanceof Date)return r}var Qhe=(t,r,n)=>{var i=t.map(Khe).filter(a=>a!=null);return n&&(r.dataKey==null||r.allowDuplicatedCategory&&hB(i))?z9(0,t.length):r.allowDuplicatedCategory?i:Array.from(new Set(i))},ZF=t=>t.referenceElements.dots,h0=(t,r,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>r==="xAxis"?i.xAxisId===n:i.yAxisId===n),Yhe=ut([ZF,Va,Oy],h0),XF=t=>t.referenceElements.areas,Zhe=ut([XF,Va,Oy],h0),JF=t=>t.referenceElements.lines,Xhe=ut([JF,Va,Oy],h0),eq=(t,r)=>{if(t!=null){var n=uh(t.map(i=>r==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Jhe=ut(Yhe,Va,eq),tq=(t,r)=>{if(t!=null){var n=uh(t.flatMap(i=>[r==="xAxis"?i.x1:i.y1,r==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},efe=ut([Zhe,Va],tq);function tfe(t){var r;if(t.x!=null)return uh([t.x]);var n=(r=t.segment)===null||r===void 0?void 0:r.map(i=>i.x);return n==null||n.length===0?[]:uh(n)}function rfe(t){var r;if(t.y!=null)return uh([t.y]);var n=(r=t.segment)===null||r===void 0?void 0:r.map(i=>i.y);return n==null||n.length===0?[]:uh(n)}var rq=(t,r)=>{if(t!=null){var n=t.flatMap(i=>r==="xAxis"?tfe(i):rfe(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},nfe=ut([Xhe,Va],rq),ife=ut(Jhe,nfe,efe,(t,r,n)=>Eb(t,n,r)),o_=(t,r,n,i,a,s,o,l)=>{if(n!=null)return n;var u=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=u?Eb(i,s,a):Eb(s,a);return mhe(r,d,t.allowDataOverflow)},afe=ut([ls,i_,a_,Vhe,Ghe,ife,Gn,Va],o_,{memoizeOptions:{resultEqualityCheck:z2}}),sfe=[0,1],l_=(t,r,n,i,a,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=t,d=yu(r,s);if(d&&l==null){var f;return z9(0,(f=n?.length)!==null&&f!==void 0?f:0)}return u==="category"?Qhe(i,t,d):a==="expand"?sfe:o}},c_=ut([ls,Gn,t_,F2,Iy,Va,afe],l_),nq=(t,r,n,i,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return r==="radial"&&a==="radiusAxis"?"band":r==="radial"&&a==="angleAxis"?"linear":o==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(xy(s));return l in jg?l:"point"}}},f0=ut([ls,Gn,VF,HE,Va],nq);function ofe(t){if(t!=null){if(t in jg)return jg[t]();var r="scale".concat(xy(t));if(r in jg)return jg[r]()}}function d_(t,r,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var a=ofe(r);if(a!=null){var s=a.domain(n).range(i);return roe(s),s}}}var u_=(t,r,n)=>{var i=n_(r);if(!(n!=="auto"&&n!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&uf(t))return She(t,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&uf(t))return Che(t,r.tickCount,r.allowDecimals)}},h_=ut([c_,ky,f0],u_),f_=(t,r,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&uf(r)&&Array.isArray(n)&&n.length>0){var a=r[0],s=n[0],o=r[1],l=n[n.length-1];return[Math.min(a,s),Math.max(o,l)]}return r},lfe=ut([ls,c_,h_,Va],f_),cfe=ut(F2,ls,(t,r)=>{if(!(!r||r.type!=="number")){var n=1/0,i=Array.from(uh(t.map(p=>p.value))).sort((p,x)=>p-x),a=i[0],s=i[i.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<i.length-1;l++){var u=i[l],d=i[l+1];if(!(u==null||d==null)){var f=d-u;n=Math.min(n,f)}}return n/o}}),iq=ut(cfe,Gn,PF,wo,(t,r,n,i,a)=>a,(t,r,n,i,a)=>{if(!oa(t))return 0;var s=r==="vertical"?i.height:i.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=_l(n,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),dfe=(t,r,n)=>{var i=vh(t,r);return i==null||typeof i.padding!="string"?0:iq(t,"xAxis",r,n,i.padding)},ufe=(t,r,n)=>{var i=bh(t,r);return i==null||typeof i.padding!="string"?0:iq(t,"yAxis",r,n,i.padding)},hfe=ut(vh,dfe,(t,r)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:r,right:r}:{left:((n=a.left)!==null&&n!==void 0?n:0)+r,right:((i=a.right)!==null&&i!==void 0?i:0)+r}}),ffe=ut(bh,ufe,(t,r)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:r,bottom:r}:{top:((n=a.top)!==null&&n!==void 0?n:0)+r,bottom:((i=a.bottom)!==null&&i!==void 0?i:0)+r}}),mfe=ut([wo,hfe,j2,b2,(t,r,n)=>n],(t,r,n,i,a)=>{var{padding:s}=i;return a?[s.left,n.width-s.right]:[t.left+r.left,t.left+t.width-r.right]}),pfe=ut([wo,Gn,ffe,j2,b2,(t,r,n)=>n],(t,r,n,i,a,s)=>{var{padding:o}=a;return s?[i.height-o.bottom,o.top]:r==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),My=(t,r,n,i)=>{var a;switch(r){case"xAxis":return mfe(t,n,i);case"yAxis":return pfe(t,n,i);case"zAxis":return(a=YE(t,n))===null||a===void 0?void 0:a.range;case"angleAxis":return BF(t);case"radiusAxis":return FF(t,n);default:return}},aq=ut([ls,My],P2),U2=ut([ls,f0,lfe,aq],d_);ut([Py,q2,Va],$he);function sq(t,r){return t.id<r.id?-1:t.id>r.id?1:0}var W2=(t,r)=>r,H2=(t,r,n)=>n,gfe=ut(x2,W2,H2,(t,r,n)=>t.filter(i=>i.orientation===r).filter(i=>i.mirror===n).sort(sq)),yfe=ut(v2,W2,H2,(t,r,n)=>t.filter(i=>i.orientation===r).filter(i=>i.mirror===n).sort(sq)),oq=(t,r)=>({width:t.width,height:r.height}),xfe=(t,r)=>{var n=typeof r.width=="number"?r.width:Sy;return{width:n,height:t.height}},lq=ut(wo,vh,oq),vfe=(t,r,n)=>{switch(r){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},bfe=(t,r,n)=>{switch(r){case"left":return t.left;case"right":return n-t.right;default:return 0}},jfe=ut(gh,wo,gfe,W2,H2,(t,r,n,i,a)=>{var s={},o;return n.forEach(l=>{var u=oq(r,l);o==null&&(o=vfe(r,i,t));var d=i==="top"&&!a||i==="bottom"&&a;s[l.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),s}),wfe=ut(ph,wo,yfe,W2,H2,(t,r,n,i,a)=>{var s={},o;return n.forEach(l=>{var u=xfe(r,l);o==null&&(o=bfe(r,i,t));var d=i==="left"&&!a||i==="right"&&a;s[l.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),s}),Sfe=(t,r)=>{var n=vh(t,r);if(n!=null)return jfe(t,n.orientation,n.mirror)},Cfe=ut([wo,vh,Sfe,(t,r)=>r],(t,r,n,i)=>{if(r!=null){var a=n?.[i];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),Nfe=(t,r)=>{var n=bh(t,r);if(n!=null)return wfe(t,n.orientation,n.mirror)},Afe=ut([wo,bh,Nfe,(t,r)=>r],(t,r,n,i)=>{if(r!=null){var a=n?.[i];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),cq=ut(wo,bh,(t,r)=>{var n=typeof r.width=="number"?r.width:Sy;return{width:n,height:t.height}}),Ak=(t,r,n)=>{switch(r){case"xAxis":return lq(t,n).width;case"yAxis":return cq(t,n).height;default:return}},dq=(t,r,n,i)=>{if(n!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=n,l=yu(t,i),u=r.map(d=>d.value);if(o&&l&&s==="category"&&a&&hB(u))return u}},m_=ut([Gn,F2,ls,Va],dq),uq=(t,r,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:s}=n,o=yu(t,i);if(o&&(a==="number"||s!=="auto"))return r.map(l=>l.value)}},p_=ut([Gn,F2,ky,Va],uq),Ek=ut([Gn,zhe,f0,U2,m_,p_,My,h_,Va],(t,r,n,i,a,s,o,l,u)=>{if(r!=null){var d=yu(t,u);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:u,categoricalDomain:s,duplicateDomain:a,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:i}}}),Efe=(t,r,n,i,a,s,o,l,u)=>{if(!(r==null||i==null)){var d=yu(t,u),{type:f,ticks:p,tickCount:x}=r,v=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,w=f==="category"&&i.bandwidth?i.bandwidth()/v:0;w=u==="angleAxis"&&s!=null&&s.length>=2?Fo(s[0]-s[1])*2*w:w;var C=p||a;if(C){var N=C.map((T,O)=>{var D=o?o.indexOf(T):T;return{index:O,coordinate:i(D)+w,value:T,offset:w}});return N.filter(T=>oa(T.coordinate))}return d&&l?l.map((T,O)=>({coordinate:i(T)+w,value:T,index:O,offset:w})).filter(T=>oa(T.coordinate)):i.ticks?i.ticks(x).map(T=>({coordinate:i(T)+w,value:T,offset:w})):i.domain().map((T,O)=>({coordinate:i(T)+w,value:o?o[T]:T,index:O,offset:w}))}},hq=ut([Gn,ky,f0,U2,h_,My,m_,p_,Va],Efe),_fe=(t,r,n,i,a,s,o)=>{if(!(r==null||n==null||i==null||i[0]===i[1])){var l=yu(t,o),{tickCount:u}=r,d=0;return d=o==="angleAxis"&&i?.length>=2?Fo(i[0]-i[1])*2*d:d,l&&s?s.map((f,p)=>({coordinate:n(f)+d,value:f,index:p,offset:d})):n.ticks?n.ticks(u).map(f=>({coordinate:n(f)+d,value:f,offset:d})):n.domain().map((f,p)=>({coordinate:n(f)+d,value:a?a[f]:f,index:p,offset:d}))}},mu=ut([Gn,ky,U2,My,m_,p_,Va],_fe),pu=ut(ls,U2,(t,r)=>{if(!(t==null||r==null))return Nb(Nb({},t),{},{scale:r})}),Tfe=ut([ls,f0,c_,aq],d_);ut((t,r,n)=>YE(t,n),Tfe,(t,r)=>{if(!(t==null||r==null))return Nb(Nb({},t),{},{scale:r})});var Ife=ut([Gn,x2,v2],(t,r,n)=>{switch(t){case"horizontal":return r.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),fq=t=>t.options.defaultTooltipEventType,mq=t=>t.options.validateTooltipEventTypes;function pq(t,r,n){if(t==null)return r;var i=t?"axis":"item";return n==null?r:n.includes(i)?i:r}function g_(t,r){var n=fq(t),i=mq(t);return pq(r,n,i)}function Ofe(t){return wr(r=>g_(r,t))}var gq=(t,r)=>{var n,i=Number(r);if(!(ad(i)||r==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},kfe=t=>t.tooltip.settings,Zh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Dfe={itemInteraction:{click:Zh,hover:Zh},axisInteraction:{click:Zh,hover:Zh},keyboardInteraction:Zh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},yq=fc({name:"tooltip",initialState:Dfe,reducers:{addTooltipEntrySettings:{reducer(t,r){t.tooltipItemPayloads.push(r.payload)},prepare:qa()},replaceTooltipEntrySettings:{reducer(t,r){var{prev:n,next:i}=r.payload,a=Ad(t).tooltipItemPayloads.indexOf(n);a>-1&&(t.tooltipItemPayloads[a]=i)},prepare:qa()},removeTooltipEntrySettings:{reducer(t,r){var n=Ad(t).tooltipItemPayloads.indexOf(r.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:qa()},setTooltipSettingsState(t,r){t.settings=r.payload},setActiveMouseOverItemIndex(t,r){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=r.payload.activeIndex,t.itemInteraction.hover.dataKey=r.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=r.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,r){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=r.payload.activeIndex,t.itemInteraction.click.dataKey=r.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=r.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(t,r){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=r.payload.activeIndex,t.axisInteraction.hover.dataKey=r.payload.activeDataKey,t.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(t,r){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=r.payload.activeIndex,t.axisInteraction.click.dataKey=r.payload.activeDataKey,t.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(t,r){t.syncInteraction=r.payload},setKeyboardInteraction(t,r){t.keyboardInteraction.active=r.payload.active,t.keyboardInteraction.index=r.payload.activeIndex,t.keyboardInteraction.coordinate=r.payload.activeCoordinate}}}),{addTooltipEntrySettings:Pfe,replaceTooltipEntrySettings:Rfe,removeTooltipEntrySettings:Mfe,setTooltipSettingsState:Lfe,setActiveMouseOverItemIndex:xq,mouseLeaveItem:zfe,mouseLeaveChart:vq,setActiveClickItemIndex:Bfe,setMouseOverAxisIndex:bq,setMouseClickAxisIndex:Ffe,setSyncInteraction:zN,setKeyboardInteraction:BN}=yq.actions,qfe=yq.reducer;function _k(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function n1(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_k(Object(n),!0).forEach(function(i){Ufe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ufe(t,r,n){return(r=Wfe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Wfe(t){var r=Hfe(t,"string");return typeof r=="symbol"?r:r+""}function Hfe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Vfe(t,r,n){return r==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function $fe(t){return t.index!=null}var jq=(t,r,n,i)=>{if(r==null)return Zh;var a=Vfe(t,r,n);if(a==null)return Zh;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if($fe(a)){if(s)return n1(n1({},a),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return n1(n1({},Zh),{},{coordinate:a.coordinate})};function Gfe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var r=t.valueOf();return Number.isFinite(r)?r:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function Kfe(t,r){var n=Gfe(t),i=r[0],a=r[1];if(n===void 0)return!1;var s=Math.min(i,a),o=Math.max(i,a);return n>=s&&n<=o}function Qfe(t,r,n){if(n==null||r==null)return!0;var i=Ii(t,r);return i==null||!uf(n)?!0:Kfe(i,n)}var y_=(t,r,n,i)=>{var a=t?.index;if(a==null)return null;var s=Number(a);if(!oa(s))return a;var o=0,l=1/0;r.length>0&&(l=r.length-1);var u=Math.max(o,Math.min(s,l)),d=r[u];return d==null||Qfe(d,n,i)?String(u):null},wq=(t,r,n,i,a,s,o,l)=>{if(!(s==null||l==null)){var u=o[0],d=u==null?void 0:l(u.positions,s);if(d!=null)return d;var f=a?.[Number(s)];if(f)return n==="horizontal"?{x:f.coordinate,y:(i.top+r)/2}:{x:(i.left+t)/2,y:f.coordinate}}},Sq=(t,r,n,i)=>{if(r==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(n==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&i!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},Ly=t=>t.options.tooltipPayloadSearcher,m0=t=>t.tooltip;function Tk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Ik(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Tk(Object(n),!0).forEach(function(i){Yfe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yfe(t,r,n){return(r=Zfe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Zfe(t){var r=Xfe(t,"string");return typeof r=="symbol"?r:r+""}function Xfe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Jfe(t,r){return t??r}var Cq=(t,r,n,i,a,s,o)=>{if(!(r==null||s==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:f}=n,p=[];return t.reduce((x,v)=>{var w,{dataDefinedOnItem:C,settings:N}=v,T=Jfe(C,l),O=Array.isArray(T)?a9(T,d,f):T,D=(w=N?.dataKey)!==null&&w!==void 0?w:i,M=N?.nameKey,Y;if(i&&Array.isArray(O)&&!Array.isArray(O[0])&&o==="axis"?Y=fB(O,i,a):Y=s(O,r,u,M),Array.isArray(Y))Y.forEach(W=>{var J=Ik(Ik({},N),{},{name:W.name,unit:W.unit,color:void 0,fill:void 0});x.push(DI({tooltipEntrySettings:J,dataKey:W.dataKey,payload:W.payload,value:Ii(W.payload,W.dataKey),name:W.name}))});else{var q;x.push(DI({tooltipEntrySettings:N,dataKey:D,payload:Y,value:Ii(Y,D),name:(q=Ii(Y,M))!==null&&q!==void 0?q:N?.name}))}return x},p)}},x_=ut([No,Gn,VF,HE,Co],nq),eme=ut([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,r)=>[...t,...r]),tme=ut([Co,u0],ZE),p0=ut([eme,No,tme],XE,{memoizeOptions:{resultEqualityCheck:B2}}),rme=ut([p0],t=>t.filter(L2)),nme=ut([p0],JE,{memoizeOptions:{resultEqualityCheck:B2}}),g0=ut([nme,xh],e_),ime=ut([rme,xh,No],UF),v_=ut([g0,No,p0],r_),Nq=ut([No],n_),ame=ut([No],t=>t.allowDataOverflow),Aq=ut([Nq,ame],vF),sme=ut([p0],t=>t.filter(L2)),ome=ut([ime,sme,Iy,RF],QF),lme=ut([ome,xh,Co,Aq],YF),cme=ut([p0],GF),dme=ut([g0,No,cme,q2,Co],s_,{memoizeOptions:{resultEqualityCheck:z2}}),ume=ut([ZF,Co,u0],h0),hme=ut([ume,Co],eq),fme=ut([XF,Co,u0],h0),mme=ut([fme,Co],tq),pme=ut([JF,Co,u0],h0),gme=ut([pme,Co],rq),yme=ut([hme,gme,mme],Eb),xme=ut([No,Nq,Aq,lme,dme,yme,Gn,Co],o_),zy=ut([No,Gn,g0,v_,Iy,Co,xme],l_),vme=ut([zy,No,x_],u_),bme=ut([No,zy,vme,Co],f_),Eq=t=>{var r=Co(t),n=u0(t),i=!1;return My(t,r,n,i)},_q=ut([No,Eq],P2),Tq=ut([No,x_,bme,_q],d_),jme=ut([Gn,v_,No,Co],dq),wme=ut([Gn,v_,No,Co],uq),Sme=(t,r,n,i,a,s,o,l)=>{if(r){var{type:u}=r,d=yu(t,l);if(i){var f=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,p=u==="category"&&i.bandwidth?i.bandwidth()/f:0;return p=l==="angleAxis"&&a!=null&&a?.length>=2?Fo(a[0]-a[1])*2*p:p,d&&o?o.map((x,v)=>({coordinate:i(x)+p,value:x,index:v,offset:p})):i.domain().map((x,v)=>({coordinate:i(x)+p,value:s?s[x]:x,index:v,offset:p}))}}},jh=ut([Gn,No,x_,Tq,Eq,jme,wme,Co],Sme),b_=ut([fq,mq,kfe],(t,r,n)=>pq(n.shared,t,r)),Iq=t=>t.tooltip.settings.trigger,j_=t=>t.tooltip.settings.defaultIndex,By=ut([m0,b_,Iq,j_],jq),hf=ut([By,g0,Ry,zy],y_),Oq=ut([jh,hf],gq),w_=ut([By],t=>{if(t)return t.dataKey}),Cme=ut([By],t=>{if(t)return t.graphicalItemId}),kq=ut([m0,b_,Iq,j_],Sq),Nme=ut([ph,gh,Gn,wo,jh,j_,kq,Ly],wq),Ame=ut([By,Nme],(t,r)=>t!=null&&t.coordinate?t.coordinate:r),Eme=ut([By],t=>{var r;return(r=t?.active)!==null&&r!==void 0?r:!1}),_me=ut([kq,hf,xh,Ry,Oq,Ly,b_],Cq),Tme=ut([_me],t=>{if(t!=null){var r=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(r))}});function Ok(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function kk(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ok(Object(n),!0).forEach(function(i){Ime(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ime(t,r,n){return(r=Ome(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Ome(t){var r=kme(t,"string");return typeof r=="symbol"?r:r+""}function kme(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Dme=()=>wr(No),Pme=()=>{var t=Dme(),r=wr(jh),n=wr(Tq);return df(!t||!n?void 0:kk(kk({},t),{},{scale:n}),r)};function Dk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function ap(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Dk(Object(n),!0).forEach(function(i){Rme(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rme(t,r,n){return(r=Mme(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Mme(t){var r=Lme(t,"string");return typeof r=="symbol"?r:r+""}function Lme(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var zme=(t,r,n,i)=>{var a=r.find(s=>s&&s.index===n);if(a){if(t==="horizontal")return{x:a.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:a.coordinate}}return{x:0,y:0}},Bme=(t,r,n,i)=>{var a=r.find(d=>d&&d.index===n);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=i;return ap(ap(ap({},i),ro(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:u}=i;return ap(ap(ap({},i),ro(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Fme(t,r){var{chartX:n,chartY:i}=t;return n>=r.left&&n<=r.left+r.width&&i>=r.top&&i<=r.top+r.height}var Dq=(t,r,n,i,a)=>{var s,o=(s=r?.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(i==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var u,d,f,p,x,v=l>0?(u=n[l-1])===null||u===void 0?void 0:u.coordinate:(d=n[o-1])===null||d===void 0?void 0:d.coordinate,w=(f=n[l])===null||f===void 0?void 0:f.coordinate,C=l>=o-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(x=n[l+1])===null||x===void 0?void 0:x.coordinate,N=void 0;if(!(v==null||w==null||C==null))if(Fo(w-v)!==Fo(C-w)){var T=[];if(Fo(C-w)===Fo(a[1]-a[0])){N=C;var O=w+a[1]-a[0];T[0]=Math.min(O,(O+v)/2),T[1]=Math.max(O,(O+v)/2)}else{N=v;var D=C+a[1]-a[0];T[0]=Math.min(w,(D+w)/2),T[1]=Math.max(w,(D+w)/2)}var M=[Math.min(w,(N+w)/2),Math.max(w,(N+w)/2)];if(t>M[0]&&t<=M[1]||t>=T[0]&&t<=T[1]){var Y;return(Y=n[l])===null||Y===void 0?void 0:Y.index}}else{var q=Math.min(v,C),W=Math.max(v,C);if(t>(q+w)/2&&t<=(W+w)/2){var J;return(J=n[l])===null||J===void 0?void 0:J.index}}}else if(r)for(var z=0;z<o;z++){var G=r[z];if(G!=null){var ne=r[z+1],Z=r[z-1];if(z===0&&ne!=null&&t<=(G.coordinate+ne.coordinate)/2||z===o-1&&Z!=null&&t>(G.coordinate+Z.coordinate)/2||z>0&&z<o-1&&Z!=null&&ne!=null&&t>(G.coordinate+Z.coordinate)/2&&t<=(G.coordinate+ne.coordinate)/2)return G.index}}return-1},Pq=()=>wr(HE),S_=(t,r)=>r,Rq=(t,r,n)=>n,C_=(t,r,n,i)=>i,qme=ut(jh,t=>l2(t,r=>r.coordinate)),N_=ut([m0,S_,Rq,C_],jq),A_=ut([N_,g0,Ry,zy],y_),Ume=(t,r,n)=>{if(r!=null){var i=m0(t);return r==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},Mq=ut([m0,S_,Rq,C_],Sq),_b=ut([ph,gh,Gn,wo,jh,C_,Mq,Ly],wq),Wme=ut([N_,_b],(t,r)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:r}),Lq=ut([jh,A_],gq),Hme=ut([Mq,A_,xh,Ry,Lq,Ly,S_],Cq),Vme=ut([N_,A_],(t,r)=>({isActive:t.active&&r!=null,activeIndex:r})),$me=(t,r,n,i,a,s,o)=>{if(!(!t||!n||!i||!a)&&Fme(t,o)){var l=hoe(t,r),u=Dq(l,s,a,n,i),d=zme(r,a,u,t);return{activeIndex:String(u),activeCoordinate:d}}},Gme=(t,r,n,i,a,s,o)=>{if(!(!t||!i||!a||!s||!n)){var l=Ice(t,n);if(l){var u=foe(l,r),d=Dq(u,o,s,i,a),f=Bme(r,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}},Kme=(t,r,n,i,a,s,o,l)=>{if(!(!t||!r||!i||!a||!s))return r==="horizontal"||r==="vertical"?$me(t,r,i,a,s,o,l):Gme(t,r,n,i,a,s,o)},Qme=ut(t=>t.zIndex.zIndexMap,(t,r)=>r,(t,r,n)=>n,(t,r,n)=>{if(r!=null){var i=t[r];if(i!=null)return n?i.panoramaElement:i.element}}),Yme=ut(t=>t.zIndex.zIndexMap,t=>{var r=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values($s)),n=Array.from(new Set(r));return n.sort((i,a)=>i-a)},{memoizeOptions:{resultEqualityCheck:Dhe}});function Pk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Rk(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Pk(Object(n),!0).forEach(function(i){Zme(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Zme(t,r,n){return(r=Xme(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Xme(t){var r=Jme(t,"string");return typeof r=="symbol"?r:r+""}function Jme(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var epe={},tpe={zIndexMap:Object.values($s).reduce((t,r)=>Rk(Rk({},t),{},{[r]:{element:void 0,panoramaElement:void 0,consumers:0}}),epe)},rpe=new Set(Object.values($s));function npe(t){return rpe.has(t)}var zq=fc({name:"zIndex",initialState:tpe,reducers:{registerZIndexPortal:{reducer:(t,r)=>{var{zIndex:n}=r.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:qa()},unregisterZIndexPortal:{reducer:(t,r)=>{var{zIndex:n}=r.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!npe(n)&&delete t.zIndexMap[n])},prepare:qa()},registerZIndexPortalElement:{reducer:(t,r)=>{var{zIndex:n,element:i,isPanorama:a}=r.payload;t.zIndexMap[n]?a?t.zIndexMap[n].panoramaElement=i:t.zIndexMap[n].element=i:t.zIndexMap[n]={consumers:0,element:a?void 0:i,panoramaElement:a?i:void 0}},prepare:qa()},unregisterZIndexPortalElement:{reducer:(t,r)=>{var{zIndex:n}=r.payload;t.zIndexMap[n]&&(r.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:qa()}}}),{registerZIndexPortal:ipe,unregisterZIndexPortal:ape,registerZIndexPortalElement:spe,unregisterZIndexPortalElement:ope}=zq.actions,lpe=zq.reducer;function Vl(t){var{zIndex:r,children:n}=t,i=Voe(),a=i&&r!==void 0&&r!==0,s=Wo(),o=ma();k.useLayoutEffect(()=>a?(o(ipe({zIndex:r})),()=>{o(ape({zIndex:r}))}):vy,[o,r,a]);var l=wr(u=>Qme(u,r,s));return a?l?SA.createPortal(n,l):null:n}function FN(){return FN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},FN.apply(null,arguments)}function Mk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function i1(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Mk(Object(n),!0).forEach(function(i){cpe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cpe(t,r,n){return(r=dpe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function dpe(t){var r=upe(t,"string");return typeof r=="symbol"?r:r+""}function upe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hpe(t){var{cursor:r,cursorComp:n,cursorProps:i}=t;return k.isValidElement(r)?k.cloneElement(r,i):k.createElement(n,i)}function fpe(t){var r,{coordinate:n,payload:i,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:d,chartName:f}=t,p=n,x=i,v=a;if(!u||!p||f!=="ScatterChart"&&d!=="axis")return null;var w,C,N;if(f==="ScatterChart")w=p,C=Hle,N=$s.cursorLine;else if(f==="BarChart")w=Vle(l,p,s,o),C=D9,N=$s.cursorRectangle;else if(l==="radial"&&pB(p)){var{cx:T,cy:O,radius:D,startAngle:M,endAngle:Y}=R9(p);w={cx:T,cy:O,startAngle:M,endAngle:Y,innerRadius:D,outerRadius:D},C=L9,N=$s.cursorLine}else w={points:Pce(l,p,s)},C=Ep,N=$s.cursorLine;var q=typeof u=="object"&&"className"in u?u.className:void 0,W=i1(i1(i1(i1({stroke:"#ccc",pointerEvents:"none"},s),w),dm(u)),{},{payload:x,payloadIndex:v,className:hi("recharts-tooltip-cursor",q)});return k.createElement(Vl,{zIndex:(r=t.zIndex)!==null&&r!==void 0?r:N},k.createElement(hpe,{cursor:u,cursorComp:C,cursorProps:W}))}function mpe(t){var r=Pme(),n=g9(),i=gf(),a=Pq();return r==null||n==null||i==null||a==null?null:k.createElement(fpe,FN({},t,{offset:n,layout:i,tooltipAxisBandSize:r,chartName:a}))}var Bq=k.createContext(null),ppe=()=>k.useContext(Bq),sS={exports:{}},Lk;function gpe(){return Lk||(Lk=1,(function(t){var r=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function s(u,d,f,p,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new a(f,p||u,x),w=n?n+d:d;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],v]:u._events[w].push(v):(u._events[w]=v,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new i:delete u._events[d]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)r.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,v=p.length,w=new Array(v);x<v;x++)w[x]=p[x].fn;return w},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,x,v,w){var C=n?n+d:d;if(!this._events[C])return!1;var N=this._events[C],T=arguments.length,O,D;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),T){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,f),!0;case 3:return N.fn.call(N.context,f,p),!0;case 4:return N.fn.call(N.context,f,p,x),!0;case 5:return N.fn.call(N.context,f,p,x,v),!0;case 6:return N.fn.call(N.context,f,p,x,v,w),!0}for(D=1,O=new Array(T-1);D<T;D++)O[D-1]=arguments[D];N.fn.apply(N.context,O)}else{var M=N.length,Y;for(D=0;D<M;D++)switch(N[D].once&&this.removeListener(d,N[D].fn,void 0,!0),T){case 1:N[D].fn.call(N[D].context);break;case 2:N[D].fn.call(N[D].context,f);break;case 3:N[D].fn.call(N[D].context,f,p);break;case 4:N[D].fn.call(N[D].context,f,p,x);break;default:if(!O)for(Y=1,O=new Array(T-1);Y<T;Y++)O[Y-1]=arguments[Y];N[D].fn.apply(N[D].context,O)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,x){var v=n?n+d:d;if(!this._events[v])return this;if(!f)return o(this,v),this;var w=this._events[v];if(w.fn)w.fn===f&&(!x||w.once)&&(!p||w.context===p)&&o(this,v);else{for(var C=0,N=[],T=w.length;C<T;C++)(w[C].fn!==f||x&&!w[C].once||p&&w[C].context!==p)&&N.push(w[C]);N.length?this._events[v]=N.length===1?N[0]:N:o(this,v)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(sS)),sS.exports}var ype=gpe();const xpe=hc(ype);var ry=new xpe,qN="recharts.syncEvent.tooltip",zk="recharts.syncEvent.brush";function V2(t,r){if(r){var n=Number.parseInt(r,10);if(!ad(n))return t?.[n]}}var vpe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Fq=fc({name:"options",initialState:vpe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),bpe=Fq.reducer,{createEventEmitter:jpe}=Fq.actions;function wpe(t){return t.tooltip.syncInteraction}var Spe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},qq=fc({name:"chartData",initialState:Spe,reducers:{setChartData(t,r){if(t.chartData=r.payload,r.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}r.payload.length>0&&t.dataEndIndex!==r.payload.length-1&&(t.dataEndIndex=r.payload.length-1)},setComputedData(t,r){t.computedData=r.payload},setDataStartEndIndexes(t,r){var{startIndex:n,endIndex:i}=r.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:Bk,setDataStartEndIndexes:Cpe,setComputedData:r_e}=qq.actions,Npe=qq.reducer,Ape=["x","y"];function Fk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function sp(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Fk(Object(n),!0).forEach(function(i){Epe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Epe(t,r,n){return(r=_pe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _pe(t){var r=Tpe(t,"string");return typeof r=="symbol"?r:r+""}function Tpe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ipe(t,r){if(t==null)return{};var n,i,a=Ope(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ope(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function kpe(){var t=wr(VE),r=wr($E),n=ma(),i=wr(MF),a=wr(jh),s=gf(),o=w2(),l=wr(u=>u.rootProps.className);k.useEffect(()=>{if(t==null)return vy;var u=(d,f,p)=>{if(r!==p&&t===d){if(i==="index"){var x;if(o&&f!==null&&f!==void 0&&(x=f.payload)!==null&&x!==void 0&&x.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:w,y:C}=v,N=Ipe(v,Ape),{x:T,y:O,width:D,height:M}=f.payload.sourceViewBox,Y=sp(sp({},N),{},{x:o.x+(D?(w-T)/D:0)*o.width,y:o.y+(M?(C-O)/M:0)*o.height});n(sp(sp({},f),{},{payload:sp(sp({},f.payload),{},{coordinate:Y})}))}else n(f);return}if(a!=null){var q;if(typeof i=="function"){var W={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},J=i(a,W);q=a[J]}else i==="value"&&(q=a.find(Q=>String(Q.value)===f.payload.label));var{coordinate:z}=f.payload;if(q==null||f.payload.active===!1||z==null||o==null){n(zN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:G,y:ne}=z,Z=Math.min(G,o.x+o.width),ie=Math.min(ne,o.y+o.height),me={x:s==="horizontal"?q.coordinate:Z,y:s==="horizontal"?ie:q.coordinate},ce=zN({active:f.payload.active,coordinate:me,dataKey:f.payload.dataKey,index:String(q.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(ce)}}};return ry.on(qN,u),()=>{ry.off(qN,u)}},[l,n,r,t,i,a,s,o])}function Dpe(){var t=wr(VE),r=wr($E),n=ma();k.useEffect(()=>{if(t==null)return vy;var i=(a,s,o)=>{r!==o&&t===a&&n(Cpe(s))};return ry.on(zk,i),()=>{ry.off(zk,i)}},[n,r,t])}function Ppe(){var t=ma();k.useEffect(()=>{t(jpe())},[t]),kpe(),Dpe()}function Rpe(t,r,n,i,a,s){var o=wr(v=>Ume(v,t,r)),l=wr($E),u=wr(VE),d=wr(MF),f=wr(wpe),p=f?.active,x=w2();k.useEffect(()=>{if(!p&&u!=null&&l!=null){var v=zN({active:s,coordinate:n,dataKey:o,index:a,label:typeof i=="number"?String(i):i,sourceViewBox:x,graphicalItemId:void 0});ry.emit(qN,u,v,l)}},[p,n,o,a,i,l,u,d,s,x])}function qk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Uk(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?qk(Object(n),!0).forEach(function(i){Mpe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mpe(t,r,n){return(r=Lpe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Lpe(t){var r=zpe(t,"string");return typeof r=="symbol"?r:r+""}function zpe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Bpe(t){return t.dataKey}function Fpe(t,r){return k.isValidElement(t)?k.cloneElement(t,r):typeof t=="function"?k.createElement(t,r):k.createElement(Sle,r)}var Wk=[],qpe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kc(t){var r,n,i=ks(t,qpe),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:u,filterNull:d,isAnimationActive:f,offset:p,payloadUniqBy:x,position:v,reverseDirection:w,useTranslate3d:C,wrapperStyle:N,cursor:T,shared:O,trigger:D,defaultIndex:M,portal:Y,axisId:q}=i,W=ma(),J=typeof M=="number"?String(M):M;k.useEffect(()=>{W(Lfe({shared:O,trigger:D,axisId:q,active:a,defaultIndex:J}))},[W,O,D,q,a,J]);var z=w2(),G=_9(),ne=Ofe(O),{activeIndex:Z,isActive:ie}=(r=wr(be=>Vme(be,ne,D,J)))!==null&&r!==void 0?r:{},me=wr(be=>Hme(be,ne,D,J)),ce=wr(be=>Lq(be,ne,D,J)),Q=wr(be=>Wme(be,ne,D,J)),de=me,le=ppe(),ye=(n=a??ie)!==null&&n!==void 0?n:!1,[Se,$]=TB([de,ye]),X=ne==="axis"?ce:void 0;Rpe(ne,D,Q,X,Z,ye);var se=Y??le;if(se==null||z==null||ne==null)return null;var H=de??Wk;ye||(H=Wk),d&&H.length&&(H=CB(H.filter(be=>be.value!=null&&(be.hide!==!0||i.includeHidden)),x,Bpe));var oe=H.length>0,ge=k.createElement(Ile,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:f,active:ye,coordinate:Q,hasPayload:oe,offset:p,position:v,reverseDirection:w,useTranslate3d:C,viewBox:z,wrapperStyle:N,lastBoundingBox:Se,innerRef:$,hasPortalFromProps:!!Y},Fpe(u,Uk(Uk({},i),{},{payload:H,label:X,active:ye,activeIndex:Z,coordinate:Q,accessibilityLayer:G})));return k.createElement(k.Fragment,null,SA.createPortal(ge,se),ye&&k.createElement(mpe,{cursor:T,tooltipEventType:ne,coordinate:Q,payload:H,index:Z}))}var Ju=t=>null;Ju.displayName="Cell";function Upe(t,r,n){return(r=Wpe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Wpe(t){var r=Hpe(t,"string");return typeof r=="symbol"?r:r+""}function Hpe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class Vpe{constructor(r){Upe(this,"cache",new Map),this.maxSize=r}get(r){var n=this.cache.get(r);return n!==void 0&&(this.cache.delete(r),this.cache.set(r,n)),n}set(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(r,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Hk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function $pe(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Hk(Object(n),!0).forEach(function(i){Gpe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Gpe(t,r,n){return(r=Kpe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Kpe(t){var r=Qpe(t,"string");return typeof r=="symbol"?r:r+""}function Qpe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Ype={cacheSize:2e3,enableCache:!0},Uq=$pe({},Ype),Vk=new Vpe(Uq.cacheSize),Zpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$k="recharts_measurement_span";function Xpe(t,r){var n=r.fontSize||"",i=r.fontFamily||"",a=r.fontWeight||"",s=r.fontStyle||"",o=r.letterSpacing||"",l=r.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var Gk=(t,r)=>{try{var n=document.getElementById($k);n||(n=document.createElement("span"),n.setAttribute("id",$k),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Zpe,r),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},Og=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||Ny.isSsr)return{width:0,height:0};if(!Uq.enableCache)return Gk(r,n);var i=Xpe(r,n),a=Vk.get(i);if(a)return a;var s=Gk(r,n);return Vk.set(i,s),s},Wq;function Jpe(t,r,n){return(r=e0e(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function e0e(t){var r=t0e(t,"string");return typeof r=="symbol"?r:r+""}function t0e(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Kk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,r0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,n0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,i0e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},a0e=["cm","mm","pt","pc","in","Q","px"];function s0e(t){return a0e.includes(t)}var jp="NaN";function o0e(t,r){return t*i0e[r]}class cl{static parse(r){var n,[,i,a]=(n=n0e.exec(r))!==null&&n!==void 0?n:[];return i==null?cl.NaN:new cl(parseFloat(i),a??"")}constructor(r,n){this.num=r,this.unit=n,this.num=r,this.unit=n,ad(r)&&(this.unit=""),n!==""&&!r0e.test(n)&&(this.num=NaN,this.unit=""),s0e(n)&&(this.num=o0e(r,n),this.unit="px")}add(r){return this.unit!==r.unit?new cl(NaN,""):new cl(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new cl(NaN,""):new cl(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new cl(NaN,""):new cl(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new cl(NaN,""):new cl(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ad(this.num)}}Wq=cl;Jpe(cl,"NaN",new Wq(NaN,""));function Hq(t){if(t==null||t.includes(jp))return jp;for(var r=t;r.includes("*")||r.includes("/");){var n,[,i,a,s]=(n=Kk.exec(r))!==null&&n!==void 0?n:[],o=cl.parse(i??""),l=cl.parse(s??""),u=a==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return jp;r=r.replace(Kk,u.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var d,[,f,p,x]=(d=Qk.exec(r))!==null&&d!==void 0?d:[],v=cl.parse(f??""),w=cl.parse(x??""),C=p==="+"?v.add(w):v.subtract(w);if(C.isNaN())return jp;r=r.replace(Qk,C.toString())}return r}var Yk=/\(([^()]*)\)/;function l0e(t){for(var r=t,n;(n=Yk.exec(r))!=null;){var[,i]=n;r=r.replace(Yk,Hq(i))}return r}function c0e(t){var r=t.replace(/\s+/g,"");return r=l0e(r),r=Hq(r),r}function d0e(t){try{return c0e(t)}catch{return jp}}function oS(t){var r=d0e(t.slice(5,-1));return r===jp?"":r}var u0e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],h0e=["dx","dy","angle","className","breakAll"];function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},UN.apply(null,arguments)}function Zk(t,r){if(t==null)return{};var n,i,a=f0e(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function f0e(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Vq=/[ \f\n\r\t\v\u2028\u2029]+/,$q=t=>{var{children:r,breakAll:n,style:i}=t;try{var a=[];_a(r)||(n?a=r.toString().split(""):a=r.toString().split(Vq));var s=a.map(l=>({word:l,width:Og(l,i).width})),o=n?0:Og("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function m0e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Gq=(t,r,n,i)=>t.reduce((a,s)=>{var{word:o,width:l}=s,u=a[a.length-1];if(u&&l!=null&&(r==null||i||u.width+l+n<Number(r)))u.words.push(o),u.width+=l+n;else{var d={words:[o],width:l};a.push(d)}return a},[]),Kq=t=>t.reduce((r,n)=>r.width>n.width?r:n),p0e="",Xk=(t,r,n,i,a,s,o,l)=>{var u=t.slice(0,r),d=$q({breakAll:n,style:i,children:u+p0e});if(!d)return[!1,[]];var f=Gq(d.wordsWithComputedWidth,s,o,l),p=f.length>a||Kq(f).width>Number(s);return[p,f]},g0e=(t,r,n,i,a)=>{var{maxLines:s,children:o,style:l,breakAll:u}=t,d=or(s),f=String(o),p=Gq(r,i,n,a);if(!d||a)return p;var x=p.length>s||Kq(p).width>Number(i);if(!x)return p;for(var v=0,w=f.length-1,C=0,N;v<=w&&C<=f.length-1;){var T=Math.floor((v+w)/2),O=T-1,[D,M]=Xk(f,O,u,l,s,i,n,a),[Y]=Xk(f,T,u,l,s,i,n,a);if(!D&&!Y&&(v=T+1),D&&Y&&(w=T-1),!D&&Y){N=M;break}C++}return N||p},Jk=t=>{var r=_a(t)?[]:t.toString().split(Vq);return[{words:r,width:void 0}]},y0e=t=>{var{width:r,scaleToFit:n,children:i,style:a,breakAll:s,maxLines:o}=t;if((r||n)&&!Ny.isSsr){var l,u,d=$q({breakAll:s,children:i,style:a});if(d){var{wordsWithComputedWidth:f,spaceWidth:p}=d;l=f,u=p}else return Jk(i);return g0e({breakAll:s,children:i,maxLines:o,style:a},l,u,r,!!n)}return Jk(i)},Qq="#808080",x0e={angle:0,breakAll:!1,capHeight:"0.71em",fill:Qq,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$2=k.forwardRef((t,r)=>{var n=ks(t,x0e),{x:i,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:u,textAnchor:d,verticalAnchor:f}=n,p=Zk(n,u0e),x=k.useMemo(()=>y0e({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:v,dy:w,angle:C,className:N,breakAll:T}=p,O=Zk(p,h0e);if(!uu(i)||!uu(a)||x.length===0)return null;var D=Number(i)+(or(v)?v:0),M=Number(a)+(or(w)?w:0);if(!oa(D)||!oa(M))return null;var Y;switch(f){case"start":Y=oS("calc(".concat(o,")"));break;case"middle":Y=oS("calc(".concat((x.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:Y=oS("calc(".concat(x.length-1," * -").concat(s,")"));break}var q=[];if(u){var W=x[0].width,{width:J}=p;q.push("scale(".concat(or(J)&&or(W)?J/W:1,")"))}return C&&q.push("rotate(".concat(C,", ").concat(D,", ").concat(M,")")),q.length&&(O.transform=q.join(" ")),k.createElement("text",UN({},Tl(O),{ref:r,x:D,y:M,className:hi("recharts-text",N),textAnchor:d,fill:l.includes("url")?Qq:l}),x.map((z,G)=>{var ne=z.words.join(T?"":" ");return k.createElement("tspan",{x:D,dy:G===0?Y:s,key:"".concat(ne,"-").concat(G)},ne)}))});$2.displayName="Text";var v0e=["labelRef"],b0e=["content"];function eD(t,r){if(t==null)return{};var n,i,a=j0e(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function j0e(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function tD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Us(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?tD(Object(n),!0).forEach(function(i){w0e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function w0e(t,r,n){return(r=S0e(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function S0e(t){var r=C0e(t,"string");return typeof r=="symbol"?r:r+""}function C0e(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$u.apply(null,arguments)}var Yq=k.createContext(null),N0e=t=>{var{x:r,y:n,upperWidth:i,lowerWidth:a,width:s,height:o,children:l}=t,u=k.useMemo(()=>({x:r,y:n,upperWidth:i,lowerWidth:a,width:s,height:o}),[r,n,i,a,s,o]);return k.createElement(Yq.Provider,{value:u},l)},Zq=()=>{var t=k.useContext(Yq),r=w2();return t||p9(r)},A0e=k.createContext(null),E0e=()=>{var t=k.useContext(A0e),r=wr(qF);return t||r},_0e=t=>{var{value:r,formatter:n}=t,i=_a(t.children)?r:t.children;return typeof n=="function"?n(i):i},E_=t=>t!=null&&typeof t=="function",T0e=(t,r)=>{var n=Fo(r-t),i=Math.min(Math.abs(r-t),360);return n*i},I0e=(t,r,n,i,a)=>{var{offset:s,className:o}=t,{cx:l,cy:u,innerRadius:d,outerRadius:f,startAngle:p,endAngle:x,clockWise:v}=a,w=(d+f)/2,C=T0e(p,x),N=C>=0?1:-1,T,O;switch(r){case"insideStart":T=p+N*s,O=v;break;case"insideEnd":T=x-N*s,O=!v;break;case"end":T=x+N*s,O=v;break;default:throw new Error("Unsupported position ".concat(r))}O=C<=0?O:!O;var D=ro(l,u,w,T),M=ro(l,u,w,T+(O?1:-1)*359),Y="M".concat(D.x,",").concat(D.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(O?0:1,`,
    `).concat(M.x,",").concat(M.y),q=_a(t.id)?Wg("recharts-radial-line-"):t.id;return k.createElement("text",$u({},i,{dominantBaseline:"central",className:hi("recharts-radial-bar-label",o)}),k.createElement("defs",null,k.createElement("path",{id:q,d:Y})),k.createElement("textPath",{xlinkHref:"#".concat(q)},n))},O0e=(t,r,n)=>{var{cx:i,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:u}=t,d=(l+u)/2;if(n==="outside"){var{x:f,y:p}=ro(i,a,o+r,d);return{x:f,y:p,textAnchor:f>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var x=(s+o)/2,{x:v,y:w}=ro(i,a,x,d);return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},WN=t=>"cx"in t&&or(t.cx),k0e=(t,r)=>{var{parentViewBox:n,offset:i,position:a}=t,s;n!=null&&!WN(n)&&(s=n);var{x:o,y:l,upperWidth:u,lowerWidth:d,height:f}=r,p=o,x=o+(u-d)/2,v=(p+x)/2,w=(u+d)/2,C=p+u/2,N=f>=0?1:-1,T=N*i,O=N>0?"end":"start",D=N>0?"start":"end",M=u>=0?1:-1,Y=M*i,q=M>0?"end":"start",W=M>0?"start":"end";if(a==="top"){var J={x:p+u/2,y:l-T,textAnchor:"middle",verticalAnchor:O};return Us(Us({},J),s?{height:Math.max(l-s.y,0),width:u}:{})}if(a==="bottom"){var z={x:x+d/2,y:l+f+T,textAnchor:"middle",verticalAnchor:D};return Us(Us({},z),s?{height:Math.max(s.y+s.height-(l+f),0),width:d}:{})}if(a==="left"){var G={x:v-Y,y:l+f/2,textAnchor:q,verticalAnchor:"middle"};return Us(Us({},G),s?{width:Math.max(G.x-s.x,0),height:f}:{})}if(a==="right"){var ne={x:v+w+Y,y:l+f/2,textAnchor:W,verticalAnchor:"middle"};return Us(Us({},ne),s?{width:Math.max(s.x+s.width-ne.x,0),height:f}:{})}var Z=s?{width:w,height:f}:{};return a==="insideLeft"?Us({x:v+Y,y:l+f/2,textAnchor:W,verticalAnchor:"middle"},Z):a==="insideRight"?Us({x:v+w-Y,y:l+f/2,textAnchor:q,verticalAnchor:"middle"},Z):a==="insideTop"?Us({x:p+u/2,y:l+T,textAnchor:"middle",verticalAnchor:D},Z):a==="insideBottom"?Us({x:x+d/2,y:l+f-T,textAnchor:"middle",verticalAnchor:O},Z):a==="insideTopLeft"?Us({x:p+Y,y:l+T,textAnchor:W,verticalAnchor:D},Z):a==="insideTopRight"?Us({x:p+u-Y,y:l+T,textAnchor:q,verticalAnchor:D},Z):a==="insideBottomLeft"?Us({x:x+Y,y:l+f-T,textAnchor:W,verticalAnchor:O},Z):a==="insideBottomRight"?Us({x:x+d-Y,y:l+f-T,textAnchor:q,verticalAnchor:O},Z):a&&typeof a=="object"&&(or(a.x)||sh(a.x))&&(or(a.y)||sh(a.y))?Us({x:o+_l(a.x,w),y:l+_l(a.y,f),textAnchor:"end",verticalAnchor:"end"},Z):Us({x:C,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},Z)},D0e={angle:0,offset:5,zIndex:$s.label,position:"middle",textBreakAll:!1};function Yh(t){var r=ks(t,D0e),{viewBox:n,position:i,value:a,children:s,content:o,className:l="",textBreakAll:u,labelRef:d}=r,f=E0e(),p=Zq(),x=i==="center"?p:f??p,v,w,C;if(n==null?v=x:WN(n)?v=n:v=p9(n),!v||_a(a)&&_a(s)&&!k.isValidElement(o)&&typeof o!="function")return null;var N=Us(Us({},r),{},{viewBox:v});if(k.isValidElement(o)){var{labelRef:T}=N,O=eD(N,v0e);return k.cloneElement(o,O)}if(typeof o=="function"){var{content:D}=N,M=eD(N,b0e);if(w=k.createElement(o,M),k.isValidElement(w))return w}else w=_0e(r);var Y=Tl(r);if(WN(v)){if(i==="insideStart"||i==="insideEnd"||i==="end")return I0e(r,i,w,Y,v);C=O0e(v,r.offset,r.position)}else C=k0e(r,v);return k.createElement(Vl,{zIndex:r.zIndex},k.createElement($2,$u({ref:d,className:hi("recharts-label",l)},Y,C,{textAnchor:m0e(Y.textAnchor)?Y.textAnchor:C.textAnchor,breakAll:u}),w))}Yh.displayName="Label";var P0e=(t,r,n)=>{if(!t)return null;var i={viewBox:r,labelRef:n};return t===!0?k.createElement(Yh,$u({key:"label-implicit"},i)):uu(t)?k.createElement(Yh,$u({key:"label-implicit",value:t},i)):k.isValidElement(t)?t.type===Yh?k.cloneElement(t,Us({key:"label-implicit"},i)):k.createElement(Yh,$u({key:"label-implicit",content:t},i)):E_(t)?k.createElement(Yh,$u({key:"label-implicit",content:t},i)):t&&typeof t=="object"?k.createElement(Yh,$u({},t,{key:"label-implicit"},i)):null};function R0e(t){var{label:r,labelRef:n}=t,i=Zq();return P0e(r,i,n)||null}var lS={},cS={},rD;function M0e(){return rD||(rD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n[n.length-1]}t.last=r})(cS)),cS}var dS={},nD;function L0e(){return nD||(nD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=r})(dS)),dS}var iD;function z0e(){return iD||(iD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=M0e(),n=L0e(),i=nE();function a(s){if(i.isArrayLike(s))return r.last(n.toArray(s))}t.last=a})(lS)),lS}var uS,aD;function B0e(){return aD||(aD=1,uS=z0e().last),uS}var F0e=B0e();const q0e=hc(F0e);var U0e=["valueAccessor"],W0e=["dataKey","clockWise","id","textBreakAll","zIndex"];function Tb(){return Tb=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tb.apply(null,arguments)}function sD(t,r){if(t==null)return{};var n,i,a=H0e(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function H0e(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var V0e=t=>Array.isArray(t.value)?q0e(t.value):t.value,Xq=k.createContext(void 0),__=Xq.Provider,Jq=k.createContext(void 0),$0e=Jq.Provider;function G0e(){return k.useContext(Xq)}function K0e(){return k.useContext(Jq)}function bv(t){var{valueAccessor:r=V0e}=t,n=sD(t,U0e),{dataKey:i,clockWise:a,id:s,textBreakAll:o,zIndex:l}=n,u=sD(n,W0e),d=G0e(),f=K0e(),p=d||f;return!p||!p.length?null:k.createElement(Vl,{zIndex:l??$s.label},k.createElement(Os,{className:"recharts-label-list"},p.map((x,v)=>{var w,C=_a(i)?r(x,v):Ii(x&&x.payload,i),N=_a(s)?{}:{id:"".concat(s,"-").concat(v)};return k.createElement(Yh,Tb({key:"label-".concat(v)},Tl(x),u,N,{fill:(w=n.fill)!==null&&w!==void 0?w:x.fill,parentViewBox:x.parentViewBox,value:C,textBreakAll:o,viewBox:x.viewBox,index:v,zIndex:0}))})))}bv.displayName="LabelList";function G2(t){var{label:r}=t;return r?r===!0?k.createElement(bv,{key:"labelList-implicit"}):k.isValidElement(r)||E_(r)?k.createElement(bv,{key:"labelList-implicit",content:r}):typeof r=="object"?k.createElement(bv,Tb({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}function HN(){return HN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},HN.apply(null,arguments)}var eU=t=>{var{cx:r,cy:n,r:i,className:a}=t,s=hi("recharts-dot",a);return or(r)&&or(n)&&or(i)?k.createElement("circle",HN({},Wl(t),rE(t),{className:s,cx:r,cy:n,r:i})):null},tU=t=>t.graphicalItems.polarItems,Q0e=ut([Va,Oy],ZE),K2=ut([tU,ls,Q0e],XE),Y0e=ut([K2],JE),Q2=ut([Y0e,D2],e_),Z0e=ut([Q2,ls,K2],r_);ut([Q2,ls,K2],(t,r,n)=>n.length>0?t.flatMap(i=>n.flatMap(a=>{var s,o=Ii(i,(s=r.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):r?.dataKey!=null?t.map(i=>({value:Ii(i,r.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})));var oD=()=>{},X0e=ut([Q2,ls,K2,q2,Va],s_),J0e=ut([ls,i_,a_,oD,X0e,oD,Gn,Va],o_),rU=ut([ls,Gn,Q2,Z0e,Iy,Va,J0e],l_),ege=ut([rU,ls,f0],u_);ut([ls,rU,ege,Va],f_);var tge={radiusAxis:{},angleAxis:{}},nU=fc({name:"polarAxis",initialState:tge,reducers:{addRadiusAxis(t,r){t.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(t,r){delete t.radiusAxis[r.payload.id]},addAngleAxis(t,r){t.angleAxis[r.payload.id]=r.payload},removeAngleAxis(t,r){delete t.angleAxis[r.payload.id]}}}),{addRadiusAxis:n_e,removeRadiusAxis:i_e,addAngleAxis:a_e,removeAngleAxis:s_e}=nU.actions,rge=nU.reducer;function lD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function cD(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?lD(Object(n),!0).forEach(function(i){nge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nge(t,r,n){return(r=ige(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ige(t){var r=age(t,"string");return typeof r=="symbol"?r:r+""}function age(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var sge=(t,r)=>r,T_=ut([tU,sge],(t,r)=>t.filter(n=>n.type==="pie").find(n=>n.id===r)),oge=[],I_=(t,r,n)=>n?.length===0?oge:n,iU=ut([D2,T_,I_],(t,r,n)=>{var{chartData:i}=t;if(r!=null){var a;if(r?.data!=null&&r.data.length>0?a=r.data:a=i,(!a||!a.length)&&n!=null&&(a=n.map(s=>cD(cD({},r.presentationProps),s.props))),a!=null)return a}}),lge=ut([iU,T_,I_],(t,r,n)=>{if(!(t==null||r==null))return t.map((i,a)=>{var s,o=Ii(i,r.nameKey,r.name),l;return n!=null&&(s=n[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=n[a].props.fill:typeof i=="object"&&i!=null&&"fill"in i?l=i.fill:l=r.fill,{value:pf(o,r.dataKey),color:l,payload:i,type:r.legendType}})}),cge=ut([iU,T_,I_,wo],(t,r,n,i)=>{if(!(r==null||t==null))return uye({offset:i,pieSettings:r,displayedData:t,cells:n})}),hS={exports:{}},Vi={};var dD;function dge(){if(dD)return Vi;dD=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function w(C){if(typeof C=="object"&&C!==null){var N=C.$$typeof;switch(N){case t:switch(C=C.type,C){case n:case a:case i:case u:case d:case x:return C;default:switch(C=C&&C.$$typeof,C){case o:case l:case p:case f:return C;case s:return C;default:return N}}case r:return N}}}return Vi.ContextConsumer=s,Vi.ContextProvider=o,Vi.Element=t,Vi.ForwardRef=l,Vi.Fragment=n,Vi.Lazy=p,Vi.Memo=f,Vi.Portal=r,Vi.Profiler=a,Vi.StrictMode=i,Vi.Suspense=u,Vi.SuspenseList=d,Vi.isContextConsumer=function(C){return w(C)===s},Vi.isContextProvider=function(C){return w(C)===o},Vi.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},Vi.isForwardRef=function(C){return w(C)===l},Vi.isFragment=function(C){return w(C)===n},Vi.isLazy=function(C){return w(C)===p},Vi.isMemo=function(C){return w(C)===f},Vi.isPortal=function(C){return w(C)===r},Vi.isProfiler=function(C){return w(C)===a},Vi.isStrictMode=function(C){return w(C)===i},Vi.isSuspense=function(C){return w(C)===u},Vi.isSuspenseList=function(C){return w(C)===d},Vi.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===n||C===a||C===i||C===u||C===d||typeof C=="object"&&C!==null&&(C.$$typeof===p||C.$$typeof===f||C.$$typeof===o||C.$$typeof===s||C.$$typeof===l||C.$$typeof===v||C.getModuleId!==void 0)},Vi.typeOf=w,Vi}var uD;function uge(){return uD||(uD=1,hS.exports=dge()),hS.exports}var hge=uge(),hD=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",fD=null,fS=null,aU=t=>{if(t===fD&&Array.isArray(fS))return fS;var r=[];return k.Children.forEach(t,n=>{_a(n)||(hge.isFragment(n)?r=r.concat(aU(n.props.children)):r.push(n))}),fS=r,fD=t,r};function O_(t,r){var n=[],i=[];return Array.isArray(r)?i=r.map(a=>hD(a)):i=[hD(r)],aU(t).forEach(a=>{var s=hm(a,"type.displayName")||hm(a,"type.name");s&&i.indexOf(s)!==-1&&n.push(a)}),n}var k_=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,mS={},mD;function fge(){return mD||(mD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${a}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=r})(mS)),mS}var pS,pD;function mge(){return pD||(pD=1,pS=fge().isPlainObject),pS}var pge=mge();const gge=hc(pge);var gD,yD,xD,vD,bD;function jD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function wD(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?jD(Object(n),!0).forEach(function(i){yge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yge(t,r,n){return(r=xge(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function xge(t){var r=vge(t,"string");return typeof r=="symbol"?r:r+""}function vge(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ib.apply(null,arguments)}function lg(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}var SD=(t,r,n,i,a)=>{var s=n-i,o;return o=As(gD||(gD=lg(["M ",",",""])),t,r),o+=As(yD||(yD=lg(["L ",",",""])),t+n,r),o+=As(xD||(xD=lg(["L ",",",""])),t+n-s/2,r+a),o+=As(vD||(vD=lg(["L ",",",""])),t+n-s/2-i,r+a),o+=As(bD||(bD=lg(["L ",","," Z"])),t,r),o},bge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jge=t=>{var r=ks(t,bge),{x:n,y:i,upperWidth:a,lowerWidth:s,height:o,className:l}=r,{animationEasing:u,animationDuration:d,animationBegin:f,isUpdateAnimationActive:p}=r,x=k.useRef(null),[v,w]=k.useState(-1),C=k.useRef(a),N=k.useRef(s),T=k.useRef(o),O=k.useRef(n),D=k.useRef(i),M=o0(t,"trapezoid-");if(k.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var me=x.current.getTotalLength();me&&w(me)}catch{}},[]),n!==+n||i!==+i||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var Y=hi("recharts-trapezoid",l);if(!p)return k.createElement("g",null,k.createElement("path",Ib({},Tl(r),{className:Y,d:SD(n,i,a,s,o)})));var q=C.current,W=N.current,J=T.current,z=O.current,G=D.current,ne="0px ".concat(v===-1?1:v,"px"),Z="".concat(v,"px 0px"),ie=T9(["strokeDasharray"],d,u);return k.createElement(s0,{animationId:M,key:M,canBegin:v>0,duration:d,easing:u,isActive:p,begin:f},me=>{var ce=Ti(q,a,me),Q=Ti(W,s,me),de=Ti(J,o,me),le=Ti(z,n,me),ye=Ti(G,i,me);x.current&&(C.current=ce,N.current=Q,T.current=de,O.current=le,D.current=ye);var Se=me>0?{transition:ie,strokeDasharray:Z}:{strokeDasharray:ne};return k.createElement("path",Ib({},Tl(r),{className:Y,d:SD(le,ye,ce,Q,de),ref:x,style:wD(wD({},Se),r.style)}))})},wge=["option","shapeType","activeClassName"];function Sge(t,r){if(t==null)return{};var n,i,a=Cge(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Cge(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function CD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Ob(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?CD(Object(n),!0).forEach(function(i){Nge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Nge(t,r,n){return(r=Age(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Age(t){var r=Ege(t,"string");return typeof r=="symbol"?r:r+""}function Ege(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function _ge(t,r){return Ob(Ob({},r),t)}function Tge(t,r){return t==="symbols"}function ND(t){var{shapeType:r,elementProps:n}=t;switch(r){case"rectangle":return k.createElement(D9,n);case"trapezoid":return k.createElement(jge,n);case"sector":return k.createElement(L9,n);case"symbols":if(Tge(r))return k.createElement(tE,n);break;case"curve":return k.createElement(Ep,n);default:return null}}function Ige(t){return k.isValidElement(t)?t.props:t}function D_(t){var{option:r,shapeType:n,activeClassName:i="recharts-active-shape"}=t,a=Sge(t,wge),s;if(k.isValidElement(r))s=k.cloneElement(r,Ob(Ob({},a),Ige(r)));else if(typeof r=="function")s=r(a,a.index);else if(gge(r)&&typeof r!="boolean"){var o=_ge(r,a);s=k.createElement(ND,{shapeType:n,elementProps:o})}else{var l=a;s=k.createElement(ND,{shapeType:n,elementProps:l})}return a.isActive?k.createElement(Os,{className:i},s):s}var P_=(t,r,n)=>{var i=ma();return(a,s)=>o=>{t?.(a,s,o),i(xq({activeIndex:String(s),activeDataKey:r,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}},R_=t=>{var r=ma();return(n,i)=>a=>{t?.(n,i,a),r(zfe())}},M_=(t,r,n)=>{var i=ma();return(a,s)=>o=>{t?.(a,s,o),i(Bfe({activeIndex:String(s),activeDataKey:r,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}};function Y2(t){var{tooltipEntrySettings:r}=t,n=ma(),i=Wo(),a=k.useRef(null);return k.useLayoutEffect(()=>{i||(a.current===null?n(Pfe(r)):a.current!==r&&n(Rfe({prev:a.current,next:r})),a.current=r)},[r,n,i]),k.useLayoutEffect(()=>()=>{a.current&&(n(Mfe(a.current)),a.current=null)},[n]),null}function L_(t){var{legendPayload:r}=t,n=ma(),i=Wo(),a=k.useRef(null);return k.useLayoutEffect(()=>{i||(a.current===null?n(C9(r)):a.current!==r&&n(N9({prev:a.current,next:r})),a.current=r)},[n,i,r]),k.useLayoutEffect(()=>()=>{a.current&&(n(A9(a.current)),a.current=null)},[n]),null}function Oge(t){var{legendPayload:r}=t,n=ma(),i=wr(Gn),a=k.useRef(null);return k.useLayoutEffect(()=>{i!=="centric"&&i!=="radial"||(a.current===null?n(C9(r)):a.current!==r&&n(N9({prev:a.current,next:r})),a.current=r)},[n,i,r]),k.useLayoutEffect(()=>()=>{a.current&&(n(A9(a.current)),a.current=null)},[n]),null}var gS,kge=()=>{var[t]=k.useState(()=>Wg("uid-"));return t},Dge=(gS=SV.useId)!==null&&gS!==void 0?gS:kge;function Pge(t,r){var n=Dge();return r||(t?"".concat(t,"-").concat(n):n)}var Rge=k.createContext(void 0),Z2=t=>{var{id:r,type:n,children:i}=t,a=Pge("recharts-".concat(n),r);return k.createElement(Rge.Provider,{value:a},i(a))},Mge={cartesianItems:[],polarItems:[]},sU=fc({name:"graphicalItems",initialState:Mge,reducers:{addCartesianGraphicalItem:{reducer(t,r){t.cartesianItems.push(r.payload)},prepare:qa()},replaceCartesianGraphicalItem:{reducer(t,r){var{prev:n,next:i}=r.payload,a=Ad(t).cartesianItems.indexOf(n);a>-1&&(t.cartesianItems[a]=i)},prepare:qa()},removeCartesianGraphicalItem:{reducer(t,r){var n=Ad(t).cartesianItems.indexOf(r.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:qa()},addPolarGraphicalItem:{reducer(t,r){t.polarItems.push(r.payload)},prepare:qa()},removePolarGraphicalItem:{reducer(t,r){var n=Ad(t).polarItems.indexOf(r.payload);n>-1&&t.polarItems.splice(n,1)},prepare:qa()}}}),{addCartesianGraphicalItem:Lge,replaceCartesianGraphicalItem:zge,removeCartesianGraphicalItem:Bge,addPolarGraphicalItem:Fge,removePolarGraphicalItem:qge}=sU.actions,Uge=sU.reducer,Wge=t=>{var r=ma(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?r(Lge(t)):n.current!==t&&r(zge({prev:n.current,next:t})),n.current=t},[r,t]),k.useLayoutEffect(()=>()=>{n.current&&(r(Bge(n.current)),n.current=null)},[r]),null},z_=k.memo(Wge);function Hge(t){var r=ma();return k.useLayoutEffect(()=>(r(Fge(t)),()=>{r(qge(t))}),[r,t]),null}var Vge=["key"],$ge=["onMouseEnter","onClick","onMouseLeave"],Gge=["id"],Kge=["id"];function AD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Es(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?AD(Object(n),!0).forEach(function(i){Qge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Qge(t,r,n){return(r=Yge(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Yge(t){var r=Zge(t,"string");return typeof r=="symbol"?r:r+""}function Zge(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ff(){return ff=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ff.apply(null,arguments)}function X2(t,r){if(t==null)return{};var n,i,a=Xge(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Xge(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Jge(t){var r=k.useMemo(()=>O_(t.children,Ju),[t.children]),n=wr(i=>lge(i,t.id,r));return n==null?null:k.createElement(Oge,{legendPayload:n})}var eye=k.memo(t=>{var{dataKey:r,nameKey:n,sectors:i,stroke:a,strokeWidth:s,fill:o,name:l,hide:u,tooltipType:d,id:f}=t,p={dataDefinedOnItem:i.map(x=>x.tooltipPayload),positions:i.map(x=>x.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:r,nameKey:n,name:pf(l,r),hide:u,type:d,color:o,unit:"",graphicalItemId:f}};return k.createElement(Y2,{tooltipEntrySettings:p})}),tye=(t,r)=>t>r?"start":t<r?"end":"middle",rye=(t,r,n)=>_l(typeof r=="function"?r(t):r,n,n*.8),nye=(t,r,n)=>{var{top:i,left:a,width:s,height:o}=r,l=P9(s,o),u=a+_l(t.cx,s,s/2),d=i+_l(t.cy,o,o/2),f=_l(t.innerRadius,l,0),p=rye(n,t.outerRadius,l),x=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:u,cy:d,innerRadius:f,outerRadius:p,maxRadius:x}},iye=(t,r)=>{var n=Fo(r-t),i=Math.min(Math.abs(r-t),360);return n*i};function aye(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var sye=(t,r)=>{if(k.isValidElement(t))return k.cloneElement(t,r);if(typeof t=="function")return t(r);var n=hi("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:i}=r,a=X2(r,Vge);return k.createElement(Ep,ff({},a,{type:"linear",className:n}))},oye=(t,r,n)=>{if(k.isValidElement(t))return k.cloneElement(t,r);var i=n;if(typeof t=="function"&&(i=t(r),k.isValidElement(i)))return i;var a=hi("recharts-pie-label-text",aye(t));return k.createElement($2,ff({},r,{alignmentBaseline:"middle",className:a}),i)};function lye(t){var{sectors:r,props:n,showLabels:i}=t,{label:a,labelLine:s,dataKey:o}=n;if(!i||!a||!r)return null;var l=Wl(n),u=dm(a),d=dm(s),f=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,p=r.map((x,v)=>{var w=(x.startAngle+x.endAngle)/2,C=ro(x.cx,x.cy,x.outerRadius+f,w),N=Es(Es(Es(Es({},l),x),{},{stroke:"none"},u),{},{index:v,textAnchor:tye(C.x,x.cx)},C),T=Es(Es(Es(Es({},l),x),{},{fill:"none",stroke:x.fill},d),{},{index:v,points:[ro(x.cx,x.cy,x.outerRadius,w),C],key:"line"});return k.createElement(Vl,{zIndex:$s.label,key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(v)},k.createElement(Os,null,s&&sye(s,T),oye(a,N,Ii(x,o))))});return k.createElement(Os,{className:"recharts-pie-labels"},p)}function cye(t){var{sectors:r,props:n,showLabels:i}=t,{label:a}=n;return typeof a=="object"&&a!=null&&"position"in a?k.createElement(G2,{label:a}):k.createElement(lye,{sectors:r,props:n,showLabels:i})}function dye(t){var{sectors:r,activeShape:n,inactiveShape:i,allOtherPieProps:a,shape:s,id:o}=t,l=wr(hf),u=wr(w_),d=wr(Cme),{onMouseEnter:f,onClick:p,onMouseLeave:x}=a,v=X2(a,$ge),w=P_(f,a.dataKey,o),C=R_(x),N=M_(p,a.dataKey,o);return r==null||r.length===0?null:k.createElement(k.Fragment,null,r.map((T,O)=>{if(T?.startAngle===0&&T?.endAngle===0&&r.length!==1)return null;var D=d==null||d===o,M=String(O)===l&&(u==null||a.dataKey===u)&&D,Y=l?i:null,q=n&&M?n:Y,W=Es(Es({},T),{},{stroke:T.stroke,tabIndex:-1,[d9]:O,[u9]:o});return k.createElement(Os,ff({key:"sector-".concat(T?.startAngle,"-").concat(T?.endAngle,"-").concat(T.midAngle,"-").concat(O),tabIndex:-1,className:"recharts-pie-sector"},by(v,T,O),{onMouseEnter:w(T,O),onMouseLeave:C(T,O),onClick:N(T,O)}),k.createElement(D_,ff({option:s??q,index:O,shapeType:"sector",isActive:M},W)))}))}function uye(t){var r,{pieSettings:n,displayedData:i,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:u,dataKey:d,nameKey:f,tooltipType:p}=n,x=Math.abs(n.minAngle),v=iye(l,u),w=Math.abs(v),C=i.length<=1?0:(r=n.paddingAngle)!==null&&r!==void 0?r:0,N=i.filter(q=>Ii(q,d,0)!==0).length,T=(w>=360?N:N-1)*C,O=w-N*x-T,D=i.reduce((q,W)=>{var J=Ii(W,d,0);return q+(or(J)?J:0)},0),M;if(D>0){var Y;M=i.map((q,W)=>{var J=Ii(q,d,0),z=Ii(q,f,W),G=nye(n,s,q),ne=(or(J)?J:0)/D,Z,ie=Es(Es({},q),a&&a[W]&&a[W].props);W?Z=Y.endAngle+Fo(v)*C*(J!==0?1:0):Z=l;var me=Z+Fo(v)*((J!==0?x:0)+ne*O),ce=(Z+me)/2,Q=(G.innerRadius+G.outerRadius)/2,de=[{name:z,value:J,payload:ie,dataKey:d,type:p,graphicalItemId:n.id}],le=ro(G.cx,G.cy,Q,ce);return Y=Es(Es(Es(Es({},n.presentationProps),{},{percent:ne,cornerRadius:typeof o=="string"?parseFloat(o):o,name:z,tooltipPayload:de,midAngle:ce,middleRadius:Q,tooltipPosition:le},ie),G),{},{value:J,dataKey:d,startAngle:Z,endAngle:me,payload:ie,paddingAngle:Fo(v)*C}),Y})}return M}function hye(t){var{showLabels:r,sectors:n,children:i}=t,a=k.useMemo(()=>!r||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,r]);return k.createElement($0e,{value:r?a:void 0},i)}function fye(t){var{props:r,previousSectorsRef:n,id:i}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:f,onAnimationStart:p,onAnimationEnd:x}=r,v=o0(r,"recharts-pie-"),w=n.current,[C,N]=k.useState(!1),T=k.useCallback(()=>{typeof x=="function"&&x(),N(!1)},[x]),O=k.useCallback(()=>{typeof p=="function"&&p(),N(!0)},[p]);return k.createElement(hye,{showLabels:!C,sectors:a},k.createElement(s0,{animationId:v,begin:o,duration:l,isActive:s,easing:u,onAnimationStart:O,onAnimationEnd:T,key:v},D=>{var M=[],Y=a&&a[0],q=Y?.startAngle;return a?.forEach((W,J)=>{var z=w&&w[J],G=J>0?hm(W,"paddingAngle",0):0;if(z){var ne=Ti(z.endAngle-z.startAngle,W.endAngle-W.startAngle,D),Z=Es(Es({},W),{},{startAngle:q+G,endAngle:q+ne+G});M.push(Z),q=Z.endAngle}else{var{endAngle:ie,startAngle:me}=W,ce=Ti(0,ie-me,D),Q=Es(Es({},W),{},{startAngle:q+G,endAngle:q+ce+G});M.push(Q),q=Q.endAngle}}),n.current=M,k.createElement(Os,null,k.createElement(dye,{sectors:M,activeShape:d,inactiveShape:f,allOtherPieProps:r,shape:r.shape,id:i}))}),k.createElement(cye,{showLabels:!C,sectors:a,props:r}),r.children)}var mye={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:$s.area};function pye(t){var{id:r}=t,n=X2(t,Gge),{hide:i,className:a,rootTabIndex:s}=t,o=k.useMemo(()=>O_(t.children,Ju),[t.children]),l=wr(f=>cge(f,r,o)),u=k.useRef(null),d=hi("recharts-pie",a);return i||l==null?(u.current=null,k.createElement(Os,{tabIndex:s,className:d})):k.createElement(Vl,{zIndex:t.zIndex},k.createElement(eye,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:r}),k.createElement(Os,{tabIndex:s,className:d},k.createElement(fye,{props:Es(Es({},n),{},{sectors:l}),previousSectorsRef:u,id:r})))}function Tp(t){var r=ks(t,mye),{id:n}=r,i=X2(r,Kge),a=Wl(i);return k.createElement(Z2,{id:n,type:"pie"},s=>k.createElement(k.Fragment,null,k.createElement(Hge,{type:"pie",id:s,data:i.data,dataKey:i.dataKey,hide:i.hide,angleAxisId:0,radiusAxisId:0,name:i.name,nameKey:i.nameKey,tooltipType:i.tooltipType,legendType:i.legendType,fill:i.fill,cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,paddingAngle:i.paddingAngle,minAngle:i.minAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius,cornerRadius:i.cornerRadius,presentationProps:a,maxRadius:r.maxRadius}),k.createElement(Jge,ff({},i,{id:s})),k.createElement(pye,ff({},i,{id:s}))))}Tp.displayName="Pie";var gye=["points"];function ED(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function yS(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ED(Object(n),!0).forEach(function(i){yye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yye(t,r,n){return(r=xye(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function xye(t){var r=vye(t,"string");return typeof r=="symbol"?r:r+""}function vye(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kb.apply(null,arguments)}function bye(t,r){if(t==null)return{};var n,i,a=jye(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function jye(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function wye(t){var{option:r,dotProps:n,className:i}=t;if(k.isValidElement(r))return k.cloneElement(r,n);if(typeof r=="function")return r(n);var a=hi(i,typeof r!="boolean"?r.className:""),s=n??{},{points:o}=s,l=bye(s,gye);return k.createElement(eU,kb({},l,{className:a}))}function Sye(t,r){return t==null?!1:r?!0:t.length===1}function oU(t){var{points:r,dot:n,className:i,dotClassName:a,dataKey:s,baseProps:o,needClip:l,clipPathId:u,zIndex:d=$s.scatter}=t;if(!Sye(r,n))return null;var f=k_(n),p=Une(n),x=r.map((w,C)=>{var N,T,O=yS(yS(yS({r:3},o),p),{},{index:C,cx:(N=w.x)!==null&&N!==void 0?N:void 0,cy:(T=w.y)!==null&&T!==void 0?T:void 0,dataKey:s,value:w.value,payload:w.payload,points:r});return k.createElement(wye,{key:"dot-".concat(C),option:n,dotProps:O,className:a})}),v={};return l&&u!=null&&(v.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(u,")")),k.createElement(Vl,{zIndex:d},k.createElement(Os,kb({className:i},v),x))}function _D(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function TD(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_D(Object(n),!0).forEach(function(i){Cye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Cye(t,r,n){return(r=Nye(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Nye(t){var r=Aye(t,"string");return typeof r=="symbol"?r:r+""}function Aye(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var lU=0,Eye={xAxis:{},yAxis:{},zAxis:{}},cU=fc({name:"cartesianAxis",initialState:Eye,reducers:{addXAxis:{reducer(t,r){t.xAxis[r.payload.id]=r.payload},prepare:qa()},replaceXAxis:{reducer(t,r){var{prev:n,next:i}=r.payload;t.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.xAxis[n.id],t.xAxis[i.id]=i)},prepare:qa()},removeXAxis:{reducer(t,r){delete t.xAxis[r.payload.id]},prepare:qa()},addYAxis:{reducer(t,r){t.yAxis[r.payload.id]=r.payload},prepare:qa()},replaceYAxis:{reducer(t,r){var{prev:n,next:i}=r.payload;t.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.yAxis[n.id],t.yAxis[i.id]=i)},prepare:qa()},removeYAxis:{reducer(t,r){delete t.yAxis[r.payload.id]},prepare:qa()},addZAxis:{reducer(t,r){t.zAxis[r.payload.id]=r.payload},prepare:qa()},replaceZAxis:{reducer(t,r){var{prev:n,next:i}=r.payload;t.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.zAxis[n.id],t.zAxis[i.id]=i)},prepare:qa()},removeZAxis:{reducer(t,r){delete t.zAxis[r.payload.id]},prepare:qa()},updateYAxisWidth(t,r){var{id:n,width:i}=r.payload,a=t.yAxis[n];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==a.width&&Math.abs(i-s[0])<=1)return;var o=[...s,i].slice(-3);t.yAxis[n]=TD(TD({},t.yAxis[n]),{},{width:i,widthHistory:o})}}}}),{addXAxis:_ye,replaceXAxis:Tye,removeXAxis:Iye,addYAxis:Oye,replaceYAxis:kye,removeYAxis:Dye,addZAxis:o_e,replaceZAxis:l_e,removeZAxis:c_e,updateYAxisWidth:Pye}=cU.actions,Rye=cU.reducer,Mye=ut([wo],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Lye=ut([Mye,ph,gh],(t,r,n)=>{if(!(!t||r==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,r-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),J2=()=>wr(Lye),zye=()=>wr(Tme);function ID(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function xS(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ID(Object(n),!0).forEach(function(i){Bye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Bye(t,r,n){return(r=Fye(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Fye(t){var r=qye(t,"string");return typeof r=="symbol"?r:r+""}function qye(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Uye=t=>{var{point:r,childIndex:n,mainColor:i,activeDot:a,dataKey:s,clipPath:o}=t;if(a===!1||r.x==null||r.y==null)return null;var l={index:n,dataKey:s,cx:r.x,cy:r.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},u=xS(xS(xS({},l),dm(a)),rE(a)),d;return k.isValidElement(a)?d=k.cloneElement(a,u):typeof a=="function"?d=a(u):d=k.createElement(eU,u),k.createElement(Os,{className:"recharts-active-dot",clipPath:o},d)};function VN(t){var{points:r,mainColor:n,activeDot:i,itemDataKey:a,clipPath:s,zIndex:o=$s.activeDot}=t,l=wr(hf),u=zye();if(r==null||u==null)return null;var d=r.find(f=>u.includes(f.payload));return _a(d)?null:k.createElement(Vl,{zIndex:o},k.createElement(Uye,{point:d,childIndex:Number(l),mainColor:n,dataKey:a,activeDot:i,clipPath:s}))}var OD=(t,r,n)=>{var i=n??t;if(!_a(i))return _l(i,r,0)},Wye=(t,r,n)=>{var i={},a=t.filter(L2),s=t.filter(d=>d.stackId==null),o=a.reduce((d,f)=>(d[f.stackId]||(d[f.stackId]=[]),d[f.stackId].push(f),d),i),l=Object.entries(o).map(d=>{var[f,p]=d,x=p.map(w=>w.dataKey),v=OD(r,n,p[0].barSize);return{stackId:f,dataKeys:x,barSize:v}}),u=s.map(d=>{var f=[d.dataKey].filter(x=>x!=null),p=OD(r,n,d.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...l,...u]};function kD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function a1(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?kD(Object(n),!0).forEach(function(i){Hye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Hye(t,r,n){return(r=Vye(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Vye(t){var r=$ye(t,"string");return typeof r=="symbol"?r:r+""}function $ye(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Gye(t,r,n,i,a){var s=i.length;if(!(s<1)){var o=_l(t,n,0,!0),l,u=[];if(oa(i[0].barSize)){var d=!1,f=n/s,p=i.reduce((T,O)=>T+(O.barSize||0),0);p+=(s-1)*o,p>=n&&(p-=(s-1)*o,o=0),p>=n&&f>0&&(d=!0,f*=.9,p=s*f);var x=(n-p)/2>>0,v={offset:x-o,size:0};l=i.reduce((T,O)=>{var D,M={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:v.offset+v.size+o,size:d?f:(D=O.barSize)!==null&&D!==void 0?D:0}},Y=[...T,M];return v=Y[Y.length-1].position,Y},u)}else{var w=_l(r,n,0,!0);n-2*w-(s-1)*o<=0&&(o=0);var C=(n-2*w-(s-1)*o)/s;C>1&&(C>>=0);var N=oa(a)?Math.min(C,a):C;l=i.reduce((T,O,D)=>[...T,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:w+(C+o)*D+(C-N)/2,size:N}}],u)}return l}}var Kye=(t,r,n,i,a,s,o)=>{var l=_a(o)?r:o,u=Gye(n,i,a!==s?a:s,t,l);return a!==s&&u!=null&&(u=u.map(d=>a1(a1({},d),{},{position:a1(a1({},d.position),{},{offset:d.position.offset-a/2})}))),u},Qye=(t,r)=>{var n=M2(r);if(!(!t||n==null||r==null)){var{stackId:i}=r;if(i!=null){var a=t[i];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===n)}}}};function Yye(t,r){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&oa(t.zIndex)?t.zIndex:r}var dU=t=>{var{chartData:r}=t,n=ma(),i=Wo();return k.useEffect(()=>i?()=>{}:(n(Bk(r)),()=>{n(Bk(void 0))}),[r,n,i]),null},DD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},uU=fc({name:"brush",initialState:DD,reducers:{setBrushSettings(t,r){return r.payload==null?DD:r.payload}}}),{setBrushSettings:d_e}=uU.actions,Zye=uU.reducer;function Xye(t,r,n){return(r=Jye(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Jye(t){var r=exe(t,"string");return typeof r=="symbol"?r:r+""}function exe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class B_{static create(r){return new B_(r)}constructor(r){this.scale=r}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}return this.scale(r)}}isInRange(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}Xye(B_,"EPS",1e-4);function txe(t){return(t%180+180)%180}var rxe=function(r){var{width:n,height:i}=r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=txe(a),o=s*Math.PI/180,l=Math.atan(i/n),u=o>l&&o<Math.PI-l?i/Math.sin(o):n/Math.cos(o);return Math.abs(u)},nxe={dots:[],areas:[],lines:[]},hU=fc({name:"referenceElements",initialState:nxe,reducers:{addDot:(t,r)=>{t.dots.push(r.payload)},removeDot:(t,r)=>{var n=Ad(t).dots.findIndex(i=>i===r.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,r)=>{t.areas.push(r.payload)},removeArea:(t,r)=>{var n=Ad(t).areas.findIndex(i=>i===r.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,r)=>{t.lines.push(r.payload)},removeLine:(t,r)=>{var n=Ad(t).lines.findIndex(i=>i===r.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:u_e,removeDot:h_e,addArea:f_e,removeArea:m_e,addLine:p_e,removeLine:g_e}=hU.actions,ixe=hU.reducer,axe=k.createContext(void 0),sxe=t=>{var{children:r}=t,[n]=k.useState("".concat(Wg("recharts"),"-clip")),i=J2();if(i==null)return null;var{x:a,y:s,width:o,height:l}=i;return k.createElement(axe.Provider,{value:n},k.createElement("defs",null,k.createElement("clipPath",{id:n},k.createElement("rect",{x:a,y:s,height:l,width:o}))),r)};function fU(t,r){if(r<1)return[];if(r===1)return t;for(var n=[],i=0;i<t.length;i+=r){var a=t[i];a!==void 0&&n.push(a)}return n}function oxe(t,r,n){var i={width:t.width+r.width,height:t.height+r.height};return rxe(i,n)}function lxe(t,r,n){var i=n==="width",{x:a,y:s,width:o,height:l}=t;return r===1?{start:i?a:s,end:i?a+o:s+l}:{start:i?a+o:s+l,end:i?a:s}}function ny(t,r,n,i,a){if(t*r<t*i||t*r>t*a)return!1;var s=n();return t*(r-t*s/2-i)>=0&&t*(r+t*s/2-a)<=0}function cxe(t,r){return fU(t,r+1)}function dxe(t,r,n,i,a){for(var s=(i||[]).slice(),{start:o,end:l}=r,u=0,d=1,f=o,p=function(){var w=i?.[u];if(w===void 0)return{v:fU(i,d)};var C=u,N,T=()=>(N===void 0&&(N=n(w,C)),N),O=w.coordinate,D=u===0||ny(t,O,T,f,l);D||(u=0,f=o,d+=1),D&&(f=O+t*(T()/2+a),u+=d)},x;d<=s.length;)if(x=p(),x)return x.v;return[]}function uxe(t,r,n,i,a){var s=(i||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:u}=r,d=1;d<=o;d++){for(var f=(o-1)%d,p=l,x=!0,v=function(){var O=i[w],D=w,M,Y=()=>(M===void 0&&(M=n(O,D)),M),q=O.coordinate,W=w===f||ny(t,q,Y,p,u);if(!W)return x=!1,1;W&&(p=q+t*(Y()/2+a))},w=f;w<o&&!v();w+=d);if(x){for(var C=[],N=f;N<o;N+=d)C.push(i[N]);return C}}return[]}function PD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Nl(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?PD(Object(n),!0).forEach(function(i){hxe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function hxe(t,r,n){return(r=fxe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function fxe(t){var r=mxe(t,"string");return typeof r=="symbol"?r:r+""}function mxe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function pxe(t,r,n,i,a){for(var s=(i||[]).slice(),o=s.length,{start:l}=r,{end:u}=r,d=function(x){var v=s[x],w,C=()=>(w===void 0&&(w=n(v,x)),w);if(x===o-1){var N=t*(v.coordinate+t*C()/2-u);s[x]=v=Nl(Nl({},v),{},{tickCoord:N>0?v.coordinate-N*t:v.coordinate})}else s[x]=v=Nl(Nl({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var T=ny(t,v.tickCoord,C,l,u);T&&(u=v.tickCoord-t*(C()/2+a),s[x]=Nl(Nl({},v),{},{isShow:!0}))}},f=o-1;f>=0;f--)d(f);return s}function gxe(t,r,n,i,a,s){var o=(i||[]).slice(),l=o.length,{start:u,end:d}=r;if(s){var f=i[l-1],p=n(f,l-1),x=t*(f.coordinate+t*p/2-d);if(o[l-1]=f=Nl(Nl({},f),{},{tickCoord:x>0?f.coordinate-x*t:f.coordinate}),f.tickCoord!=null){var v=ny(t,f.tickCoord,()=>p,u,d);v&&(d=f.tickCoord-t*(p/2+a),o[l-1]=Nl(Nl({},f),{},{isShow:!0}))}}for(var w=s?l-1:l,C=function(O){var D=o[O],M,Y=()=>(M===void 0&&(M=n(D,O)),M);if(O===0){var q=t*(D.coordinate-t*Y()/2-u);o[O]=D=Nl(Nl({},D),{},{tickCoord:q<0?D.coordinate-q*t:D.coordinate})}else o[O]=D=Nl(Nl({},D),{},{tickCoord:D.coordinate});if(D.tickCoord!=null){var W=ny(t,D.tickCoord,Y,u,d);W&&(u=D.tickCoord+t*(Y()/2+a),o[O]=Nl(Nl({},D),{},{isShow:!0}))}},N=0;N<w;N++)C(N);return o}function F_(t,r,n){var{tick:i,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:u,tickFormatter:d,unit:f,angle:p}=t;if(!a||!a.length||!i)return[];if(or(u)||Ny.isSsr){var x;return(x=cxe(a,or(u)?u:0))!==null&&x!==void 0?x:[]}var v=[],w=l==="top"||l==="bottom"?"width":"height",C=f&&w==="width"?Og(f,{fontSize:r,letterSpacing:n}):{width:0,height:0},N=(D,M)=>{var Y=typeof d=="function"?d(D.value,M):D.value;return w==="width"?oxe(Og(Y,{fontSize:r,letterSpacing:n}),C,p):Og(Y,{fontSize:r,letterSpacing:n})[w]},T=a.length>=2?Fo(a[1].coordinate-a[0].coordinate):1,O=lxe(s,T,w);return u==="equidistantPreserveStart"?dxe(T,O,N,a,o):u==="equidistantPreserveEnd"?uxe(T,O,N,a,o):(u==="preserveStart"||u==="preserveStartEnd"?v=gxe(T,O,N,a,o,u==="preserveStartEnd"):v=pxe(T,O,N,a,o),v.filter(D=>D.isShow))}var yxe=t=>{var{ticks:r,label:n,labelGapWithTick:i=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(r){Array.from(r).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>o&&(o=p.width)}});var l=n?n.getBoundingClientRect().width:0,u=a+s,d=o+u+l+(n?i:0);return Math.round(d)}return 0},xxe=["axisLine","width","height","className","hide","ticks","axisType"];function vxe(t,r){if(t==null)return{};var n,i,a=bxe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function bxe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ym(){return ym=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ym.apply(null,arguments)}function RD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function to(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?RD(Object(n),!0).forEach(function(i){jxe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jxe(t,r,n){return(r=wxe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function wxe(t){var r=Sxe(t,"string");return typeof r=="symbol"?r:r+""}function Sxe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var eh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:$s.axis};function Cxe(t){var{x:r,y:n,width:i,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:u}=t;if(!l)return null;var d=to(to(to({},u),Wl(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!o||s==="bottom"&&o);d=to(to({},d),{},{x1:r,y1:n+f*a,x2:r+i,y2:n+f*a})}else{var p=+(s==="left"&&!o||s==="right"&&o);d=to(to({},d),{},{x1:r+p*i,y1:n,x2:r+p*i,y2:n+a})}return k.createElement("line",ym({},d,{className:hi("recharts-cartesian-axis-line",hm(l,"className"))}))}function Nxe(t,r,n,i,a,s,o,l,u){var d,f,p,x,v,w,C=l?-1:1,N=t.tickSize||o,T=or(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=f=t.coordinate,x=n+ +!l*a,p=x-C*N,w=p-C*u,v=T;break;case"left":p=x=t.coordinate,f=r+ +!l*i,d=f-C*N,v=d-C*u,w=T;break;case"right":p=x=t.coordinate,f=r+ +l*i,d=f+C*N,v=d+C*u,w=T;break;default:d=f=t.coordinate,x=n+ +l*a,p=x+C*N,w=p+C*u,v=T;break}return{line:{x1:d,y1:p,x2:f,y2:x},tick:{x:v,y:w}}}function Axe(t,r){switch(t){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}function Exe(t,r){switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}function _xe(t){var{option:r,tickProps:n,value:i}=t,a,s=hi(n.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(r))a=k.cloneElement(r,to(to({},n),{},{className:s}));else if(typeof r=="function")a=r(to(to({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(o=hi(o,r?.className)),a=k.createElement($2,ym({},n,{className:o}),i)}return a}var Txe=k.forwardRef((t,r)=>{var{ticks:n=[],tick:i,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:u,tickTextProps:d,orientation:f,mirror:p,x,y:v,width:w,height:C,tickSize:N,tickMargin:T,fontSize:O,letterSpacing:D,getTicksConfig:M,events:Y,axisType:q}=t,W=F_(to(to({},M),{},{ticks:n}),O,D),J=Axe(f,p),z=Exe(f,p),G=Wl(M),ne=dm(i),Z={};typeof a=="object"&&(Z=a);var ie=to(to({},G),{},{fill:"none"},Z),me=W.map(de=>to({entry:de},Nxe(de,x,v,w,C,f,N,p,T))),ce=me.map(de=>{var{entry:le,line:ye}=de;return k.createElement(Os,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},a&&k.createElement("line",ym({},ie,ye,{className:hi("recharts-cartesian-axis-tick-line",hm(a,"className"))})))}),Q=me.map((de,le)=>{var{entry:ye,tick:Se}=de,$=to(to(to(to({textAnchor:J,verticalAnchor:z},G),{},{stroke:"none",fill:s},ne),Se),{},{index:le,payload:ye,visibleTicksCount:W.length,tickFormatter:o,padding:u},d);return k.createElement(Os,ym({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ye.value,"-").concat(ye.coordinate,"-").concat(ye.tickCoord)},by(Y,ye,le)),i&&k.createElement(_xe,{option:i,tickProps:$,value:"".concat(typeof o=="function"?o(ye.value,le):ye.value).concat(l||"")}))});return k.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(q,"-ticks")},Q.length>0&&k.createElement(Vl,{zIndex:$s.label},k.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(q,"-tick-labels"),ref:r},Q)),ce.length>0&&k.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(q,"-tick-lines")},ce))}),Ixe=k.forwardRef((t,r)=>{var{axisLine:n,width:i,height:a,className:s,hide:o,ticks:l,axisType:u}=t,d=vxe(t,xxe),[f,p]=k.useState(""),[x,v]=k.useState(""),w=k.useRef(null);k.useImperativeHandle(r,()=>({getCalculatedWidth:()=>{var N;return yxe({ticks:w.current,label:(N=t.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var C=k.useCallback(N=>{if(N){var T=N.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=T;var O=T[0];if(O){var D=window.getComputedStyle(O),M=D.fontSize,Y=D.letterSpacing;(M!==f||Y!==x)&&(p(M),v(Y))}}},[f,x]);return o||i!=null&&i<=0||a!=null&&a<=0?null:k.createElement(Vl,{zIndex:t.zIndex},k.createElement(Os,{className:hi("recharts-cartesian-axis",s)},k.createElement(Cxe,{x:t.x,y:t.y,width:i,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Wl(t)}),k.createElement(Txe,{ref:C,axisType:u,events:d,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:x,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),k.createElement(N0e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},k.createElement(R0e,{label:t.label,labelRef:t.labelRef}),t.children)))}),q_=k.forwardRef((t,r)=>{var n=ks(t,eh);return k.createElement(Ixe,ym({},n,{ref:r}))});q_.displayName="CartesianAxis";var Oxe=["x1","y1","x2","y2","key"],kxe=["offset"],Dxe=["xAxisId","yAxisId"],Pxe=["xAxisId","yAxisId"];function MD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Al(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?MD(Object(n),!0).forEach(function(i){Rxe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rxe(t,r,n){return(r=Mxe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Mxe(t){var r=Lxe(t,"string");return typeof r=="symbol"?r:r+""}function Lxe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gf.apply(null,arguments)}function Db(t,r){if(t==null)return{};var n,i,a=zxe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function zxe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Bxe=t=>{var{fill:r}=t;if(!r||r==="none")return null;var{fillOpacity:n,x:i,y:a,width:s,height:o,ry:l}=t;return k.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function mU(t){var{option:r,lineItemProps:n}=t,i;if(k.isValidElement(r))i=k.cloneElement(r,n);else if(typeof r=="function")i=r(n);else{var a,{x1:s,y1:o,x2:l,y2:u,key:d}=n,f=Db(n,Oxe),p=(a=Wl(f))!==null&&a!==void 0?a:{},{offset:x}=p,v=Db(p,kxe);i=k.createElement("line",Gf({},v,{x1:s,y1:o,x2:l,y2:u,fill:"none",key:d}))}return i}function Fxe(t){var{x:r,width:n,horizontal:i=!0,horizontalPoints:a}=t;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=t,l=Db(t,Dxe),u=a.map((d,f)=>{var p=Al(Al({},l),{},{x1:r,y1:d,x2:r+n,y2:d,key:"line-".concat(f),index:f});return k.createElement(mU,{key:"line-".concat(f),option:i,lineItemProps:p})});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function qxe(t){var{y:r,height:n,vertical:i=!0,verticalPoints:a}=t;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=t,l=Db(t,Pxe),u=a.map((d,f)=>{var p=Al(Al({},l),{},{x1:d,y1:r,x2:d,y2:r+n,key:"line-".concat(f),index:f});return k.createElement(mU,{option:i,lineItemProps:p,key:"line-".concat(f)})});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Uxe(t){var{horizontalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,horizontalPoints:l,horizontal:u=!0}=t;if(!u||!r||!r.length||l==null)return null;var d=l.map(p=>Math.round(p+a-a)).sort((p,x)=>p-x);a!==d[0]&&d.unshift(0);var f=d.map((p,x)=>{var v=!d[x+1],w=v?a+o-p:d[x+1]-p;if(w<=0)return null;var C=x%r.length;return k.createElement("rect",{key:"react-".concat(x),y:p,x:i,height:w,width:s,stroke:"none",fill:r[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Wxe(t){var{vertical:r=!0,verticalFill:n,fillOpacity:i,x:a,y:s,width:o,height:l,verticalPoints:u}=t;if(!r||!n||!n.length)return null;var d=u.map(p=>Math.round(p+a-a)).sort((p,x)=>p-x);a!==d[0]&&d.unshift(0);var f=d.map((p,x)=>{var v=!d[x+1],w=v?a+o-p:d[x+1]-p;if(w<=0)return null;var C=x%n.length;return k.createElement("rect",{key:"react-".concat(x),x:p,y:s,width:w,height:l,stroke:"none",fill:n[C],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Hxe=(t,r)=>{var{xAxis:n,width:i,height:a,offset:s}=t;return s9(F_(Al(Al(Al({},eh),n),{},{ticks:o9(n),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},Vxe=(t,r)=>{var{yAxis:n,width:i,height:a,offset:s}=t;return s9(F_(Al(Al(Al({},eh),n),{},{ticks:o9(n),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},$xe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:$s.grid};function Qu(t){var r=mE(),n=pE(),i=g9(),a=Al(Al({},ks(t,$xe)),{},{x:or(t.x)?t.x:i.left,y:or(t.y)?t.y:i.top,width:or(t.width)?t.width:i.width,height:or(t.height)?t.height:i.height}),{xAxisId:s,yAxisId:o,x:l,y:u,width:d,height:f,syncWithTicks:p,horizontalValues:x,verticalValues:v}=a,w=Wo(),C=wr(z=>Ek(z,"xAxis",s,w)),N=wr(z=>Ek(z,"yAxis",o,w));if(!hu(d)||!hu(f)||!or(l)||!or(u))return null;var T=a.verticalCoordinatesGenerator||Hxe,O=a.horizontalCoordinatesGenerator||Vxe,{horizontalPoints:D,verticalPoints:M}=a;if((!D||!D.length)&&typeof O=="function"){var Y=x&&x.length,q=O({yAxis:N?Al(Al({},N),{},{ticks:Y?x:N.ticks}):void 0,width:r??d,height:n??f,offset:i},Y?!0:p);ab(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(D=q)}if((!M||!M.length)&&typeof T=="function"){var W=v&&v.length,J=T({xAxis:C?Al(Al({},C),{},{ticks:W?v:C.ticks}):void 0,width:r??d,height:n??f,offset:i},W?!0:p);ab(Array.isArray(J),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof J,"]")),Array.isArray(J)&&(M=J)}return k.createElement(Vl,{zIndex:a.zIndex},k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(Bxe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),k.createElement(Uxe,Gf({},a,{horizontalPoints:D})),k.createElement(Wxe,Gf({},a,{verticalPoints:M})),k.createElement(Fxe,Gf({},a,{offset:i,horizontalPoints:D,xAxis:C,yAxis:N})),k.createElement(qxe,Gf({},a,{offset:i,verticalPoints:M,xAxis:C,yAxis:N}))))}Qu.displayName="CartesianGrid";var Gxe={},pU=fc({name:"errorBars",initialState:Gxe,reducers:{addErrorBar:(t,r)=>{var{itemId:n,errorBar:i}=r.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,r)=>{var{itemId:n,prev:i,next:a}=r.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?a:s))},removeErrorBar:(t,r)=>{var{itemId:n,errorBar:i}=r.payload;t[n]&&(t[n]=t[n].filter(a=>a.dataKey!==i.dataKey||a.direction!==i.direction))}}}),{addErrorBar:y_e,replaceErrorBar:x_e,removeErrorBar:v_e}=pU.actions,Kxe=pU.reducer,Qxe=["children"];function Yxe(t,r){if(t==null)return{};var n,i,a=Zxe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Zxe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Xxe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Jxe=k.createContext(Xxe);function gU(t){var{children:r}=t,n=Yxe(t,Qxe);return k.createElement(Jxe.Provider,{value:n},r)}function ej(t,r){var n,i,a=wr(d=>vh(d,t)),s=wr(d=>bh(d,r)),o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Mo.allowDataOverflow,l=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:Lo.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function U_(t){var{xAxisId:r,yAxisId:n,clipPathId:i}=t,a=J2(),{needClipX:s,needClipY:o,needClip:l}=ej(r,n);if(!l||!a)return null;var{x:u,y:d,width:f,height:p}=a;return k.createElement("clipPath",{id:"clipPath-".concat(i)},k.createElement("rect",{x:s?u:u-f/2,y:o?d:d-p/2,width:s?f:f*2,height:o?p:p*2}))}var yU=(t,r,n,i)=>pu(t,"xAxis",r,i),xU=(t,r,n,i)=>mu(t,"xAxis",r,i),vU=(t,r,n,i)=>pu(t,"yAxis",n,i),bU=(t,r,n,i)=>mu(t,"yAxis",n,i),e1e=ut([Gn,yU,vU,xU,bU],(t,r,n,i,a)=>yu(t,"xAxis")?df(r,i,!1):df(n,a,!1)),t1e=(t,r,n,i,a)=>a;function r1e(t){return t.type==="line"}var n1e=ut([Dy,t1e],(t,r)=>t.filter(r1e).find(n=>n.id===r)),i1e=ut([Gn,yU,vU,xU,bU,n1e,e1e,qE],(t,r,n,i,a,s,o,l)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:f}=l;if(!(s==null||r==null||n==null||i==null||a==null||i.length===0||a.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:p,data:x}=s,v;if(x!=null&&x.length>0?v=x:v=u?.slice(d,f+1),v!=null)return H1e({layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:p,bandSize:o,displayedData:v})}});function jU(t){var r=dm(t),n=3,i=2;if(r!=null){var{r:a,strokeWidth:s}=r,o=Number(a),l=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=i),{r:o,strokeWidth:l}}return{r:n,strokeWidth:i}}var vS={exports:{}},bS={};var LD;function a1e(){if(LD)return bS;LD=1;var t=Hp();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return bS.useSyncExternalStoreWithSelector=function(u,d,f,p,x){var v=a(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=o(function(){function N(Y){if(!T){if(T=!0,O=Y,Y=p(Y),x!==void 0&&w.hasValue){var q=w.value;if(x(q,Y))return D=q}return D=Y}if(q=D,n(O,Y))return q;var W=p(Y);return x!==void 0&&x(q,W)?(O=Y,q):(O=Y,D=W)}var T=!1,O,D,M=f===void 0?null:f;return[function(){return N(d())},M===null?void 0:function(){return N(M())}]},[d,f,p,x]);var C=i(u,v[0],v[1]);return s(function(){w.hasValue=!0,w.value=C},[C]),l(C),C},bS}var zD;function s1e(){return zD||(zD=1,vS.exports=a1e()),vS.exports}s1e();function o1e(t){t()}function l1e(){let t=null,r=null;return{clear(){t=null,r=null},notify(){o1e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=r={callback:n,next:null,prev:r};return a.prev?a.prev.next=a:t=a,function(){!i||t===null||(i=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var BD={notify(){},get:()=>[]};function c1e(t,r){let n,i=BD,a=0,s=!1;function o(C){f();const N=i.subscribe(C);let T=!1;return()=>{T||(T=!0,N(),p())}}function l(){i.notify()}function u(){w.onStateChange&&w.onStateChange()}function d(){return s}function f(){a++,n||(n=t.subscribe(u),i=l1e())}function p(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=BD)}function x(){s||(s=!0,f())}function v(){s&&(s=!1,p())}const w={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:x,tryUnsubscribe:v,getListeners:()=>i};return w}var d1e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u1e=d1e(),h1e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",f1e=h1e(),m1e=()=>u1e||f1e?k.useLayoutEffect:k.useEffect,p1e=m1e();function FD(t,r){return t===r?t!==0||r!==0||1/t===1/r:t!==t&&r!==r}function g1e(t,r){if(FD(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;const n=Object.keys(t),i=Object.keys(r);if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(r,n[a])||!FD(t[n[a]],r[n[a]]))return!1;return!0}var y1e=Symbol.for("react-redux-context"),x1e=typeof globalThis<"u"?globalThis:{};function v1e(){if(!k.createContext)return{};const t=x1e[y1e]??=new Map;let r=t.get(k.createContext);return r||(r=k.createContext(null),t.set(k.createContext,r)),r}var b1e=v1e();function j1e(t){const{children:r,context:n,serverState:i,store:a}=t,s=k.useMemo(()=>{const u=c1e(a);return{store:a,subscription:u,getServerState:i?()=>i:void 0}},[a,i]),o=k.useMemo(()=>a.getState(),[a]);p1e(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==a.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const l=n||b1e;return k.createElement(l.Provider,{value:s},r)}var w1e=j1e,S1e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function C1e(t,r){return t==null&&r==null?!0:typeof t=="number"&&typeof r=="number"?t===r||t!==t&&r!==r:t===r}function Fy(t,r){var n=new Set([...Object.keys(t),...Object.keys(r)]);for(var i of n)if(S1e.has(i)){if(t[i]==null&&r[i]==null)continue;if(!g1e(t[i],r[i]))return!1}else if(!C1e(t[i],r[i]))return!1;return!0}var N1e=["id"],A1e=["type","layout","connectNulls","needClip","shape"],E1e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function iy(){return iy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iy.apply(null,arguments)}function qD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function ru(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?qD(Object(n),!0).forEach(function(i){_1e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _1e(t,r,n){return(r=T1e(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function T1e(t){var r=I1e(t,"string");return typeof r=="symbol"?r:r+""}function I1e(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function W_(t,r){if(t==null)return{};var n,i,a=O1e(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function O1e(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var k1e=t=>{var{dataKey:r,name:n,stroke:i,legendType:a,hide:s}=t;return[{inactive:s,dataKey:r,type:a,color:i,value:pf(n,r),payload:t}]},D1e=k.memo(t=>{var{dataKey:r,data:n,stroke:i,strokeWidth:a,fill:s,name:o,hide:l,unit:u,tooltipType:d,id:f}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:a,fill:s,dataKey:r,nameKey:void 0,name:pf(o,r),hide:l,type:d,color:i,unit:u,graphicalItemId:f}};return k.createElement(Y2,{tooltipEntrySettings:p})}),wU=(t,r)=>"".concat(r,"px ").concat(t-r,"px");function P1e(t,r){for(var n=t.length%2!==0?[...t,0]:t,i=[],a=0;a<r;++a)i=[...i,...n];return i}var R1e=(t,r,n)=>{var i=n.reduce((p,x)=>p+x);if(!i)return wU(r,t);for(var a=Math.floor(t/i),s=t%i,o=r-t,l=[],u=0,d=0;u<n.length;d+=n[u],++u)if(d+n[u]>s){l=[...n.slice(0,u),s-d];break}var f=l.length%2===0?[0,o]:[o];return[...P1e(n,a),...l,...f].map(p=>"".concat(p,"px")).join(", ")};function M1e(t){var{clipPathId:r,points:n,props:i}=t,{dot:a,dataKey:s,needClip:o}=i,{id:l}=i,u=W_(i,N1e),d=Wl(u);return k.createElement(oU,{points:n,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:d,needClip:o,clipPathId:r})}function L1e(t){var{showLabels:r,children:n,points:i}=t,a=k.useMemo(()=>i?.map(s=>{var o,l,u={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ru(ru({},u),{},{value:s.value,payload:s.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[i]);return k.createElement(__,{value:r?a:void 0},n)}function UD(t){var{clipPathId:r,pathRef:n,points:i,strokeDasharray:a,props:s}=t,{type:o,layout:l,connectNulls:u,needClip:d,shape:f}=s,p=W_(s,A1e),x=ru(ru({},Tl(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(r,")"):void 0,points:i,type:o,layout:l,connectNulls:u,strokeDasharray:a??s.strokeDasharray});return k.createElement(k.Fragment,null,i?.length>1&&k.createElement(D_,iy({shapeType:"curve",option:f},x,{pathRef:n})),k.createElement(M1e,{points:i,clipPathId:r,props:s}))}function z1e(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function B1e(t){var{clipPathId:r,props:n,pathRef:i,previousPointsRef:a,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:l,isAnimationActive:u,animationBegin:d,animationDuration:f,animationEasing:p,animateNewValues:x,width:v,height:w,onAnimationEnd:C,onAnimationStart:N}=n,T=a.current,O=o0(o,"recharts-line-"),D=k.useRef(O),[M,Y]=k.useState(!1),q=!M,W=k.useCallback(()=>{typeof C=="function"&&C(),Y(!1)},[C]),J=k.useCallback(()=>{typeof N=="function"&&N(),Y(!0)},[N]),z=z1e(i.current),G=k.useRef(0);D.current!==O&&(G.current=s.current,D.current=O);var ne=G.current;return k.createElement(L1e,{points:o,showLabels:q},n.children,k.createElement(s0,{animationId:O,begin:d,duration:f,isActive:u,easing:p,onAnimationEnd:W,onAnimationStart:J,key:O},Z=>{var ie=Ti(ne,z+ne,Z),me=Math.min(ie,z),ce;if(u)if(l){var Q="".concat(l).split(/[,\s]+/gim).map(ye=>parseFloat(ye));ce=R1e(me,z,Q)}else ce=wU(z,me);else ce=l==null?void 0:String(l);if(Z>0&&z>0&&(a.current=o,s.current=Math.max(s.current,me)),T){var de=T.length/o.length,le=Z===1?o:o.map((ye,Se)=>{var $=Math.floor(Se*de);if(T[$]){var X=T[$];return ru(ru({},ye),{},{x:Ti(X.x,ye.x,Z),y:Ti(X.y,ye.y,Z)})}return x?ru(ru({},ye),{},{x:Ti(v*2,ye.x,Z),y:Ti(w/2,ye.y,Z)}):ru(ru({},ye),{},{x:ye.x,y:ye.y})});return a.current=le,k.createElement(UD,{props:n,points:le,clipPathId:r,pathRef:i,strokeDasharray:ce})}return k.createElement(UD,{props:n,points:o,clipPathId:r,pathRef:i,strokeDasharray:ce})}),k.createElement(G2,{label:n.label}))}function F1e(t){var{clipPathId:r,props:n}=t,i=k.useRef(null),a=k.useRef(0),s=k.useRef(null);return k.createElement(B1e,{props:n,clipPathId:r,previousPointsRef:i,longestAnimatedLengthRef:a,pathRef:s})}var q1e=(t,r)=>{var n,i;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(i=t.y)!==null&&i!==void 0?i:void 0,value:t.value,errorVal:Ii(t.payload,r)}};class U1e extends k.Component{render(){var{hide:r,dot:n,points:i,className:a,xAxisId:s,yAxisId:o,top:l,left:u,width:d,height:f,id:p,needClip:x,zIndex:v}=this.props;if(r)return null;var w=hi("recharts-line",a),C=p,{r:N,strokeWidth:T}=jU(n),O=k_(n),D=N*2+T,M=x?"url(#clipPath-".concat(O?"":"dots-").concat(C,")"):void 0;return k.createElement(Vl,{zIndex:v},k.createElement(Os,{className:w},x&&k.createElement("defs",null,k.createElement(U_,{clipPathId:C,xAxisId:s,yAxisId:o}),!O&&k.createElement("clipPath",{id:"clipPath-dots-".concat(C)},k.createElement("rect",{x:u-D/2,y:l-D/2,width:d+D,height:f+D}))),k.createElement(gU,{xAxisId:s,yAxisId:o,data:i,dataPointFormatter:q1e,errorBarOffset:0},k.createElement(F1e,{props:this.props,clipPathId:C}))),k.createElement(VN,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:M}))}}var SU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:$s.line,type:"linear"};function W1e(t){var r=ks(t,SU),{activeDot:n,animateNewValues:i,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:u,hide:d,isAnimationActive:f,label:p,legendType:x,xAxisId:v,yAxisId:w,id:C}=r,N=W_(r,E1e),{needClip:T}=ej(v,w),O=J2(),D=gf(),M=Wo(),Y=wr(G=>i1e(G,v,w,M,C));if(D!=="horizontal"&&D!=="vertical"||Y==null||O==null)return null;var{height:q,width:W,x:J,y:z}=O;return k.createElement(U1e,iy({},N,{id:C,connectNulls:l,dot:u,activeDot:n,animateNewValues:i,animationBegin:a,animationDuration:s,animationEasing:o,isAnimationActive:f,hide:d,label:p,legendType:x,xAxisId:v,yAxisId:w,points:Y,layout:D,height:q,width:W,left:J,top:z,needClip:T}))}function H1e(t){var{layout:r,xAxis:n,yAxis:i,xAxisTicks:a,yAxisTicks:s,dataKey:o,bandSize:l,displayedData:u}=t;return u.map((d,f)=>{var p=Ii(d,o);if(r==="horizontal"){var x=ib({axis:n,ticks:a,bandSize:l,entry:d,index:f}),v=_a(p)?null:i.scale(p);return{x,y:v,value:p,payload:d}}var w=_a(p)?null:n.scale(p),C=ib({axis:i,ticks:s,bandSize:l,entry:d,index:f});return w==null||C==null?null:{x:w,y:C,value:p,payload:d}}).filter(Boolean)}function V1e(t){var r=ks(t,SU),n=Wo();return k.createElement(Z2,{id:r.id,type:"line"},i=>k.createElement(k.Fragment,null,k.createElement(L_,{legendPayload:k1e(r)}),k.createElement(D1e,{dataKey:r.dataKey,data:r.data,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType,id:i}),k.createElement(z_,{type:"line",id:i,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,hide:r.hide,isPanorama:n}),k.createElement(W1e,iy({},r,{id:i}))))}var ay=k.memo(V1e,Fy);ay.displayName="Line";function xu(t,r){var n,i;return(n=(i=t.graphicalItems.cartesianItems.find(a=>a.id===r))===null||i===void 0?void 0:i.xAxisId)!==null&&n!==void 0?n:lU}function vu(t,r){var n,i;return(n=(i=t.graphicalItems.cartesianItems.find(a=>a.id===r))===null||i===void 0?void 0:i.yAxisId)!==null&&n!==void 0?n:lU}var CU=(t,r,n)=>pu(t,"xAxis",xu(t,r),n),NU=(t,r,n)=>mu(t,"xAxis",xu(t,r),n),AU=(t,r,n)=>pu(t,"yAxis",vu(t,r),n),EU=(t,r,n)=>mu(t,"yAxis",vu(t,r),n),$1e=ut([Gn,CU,AU,NU,EU],(t,r,n,i,a)=>yu(t,"xAxis")?df(r,i,!1):df(n,a,!1)),G1e=(t,r)=>r,_U=ut([Dy,G1e],(t,r)=>t.filter(n=>n.type==="area").find(n=>n.id===r)),TU=t=>{var r=Gn(t),n=yu(r,"xAxis");return n?"yAxis":"xAxis"},K1e=(t,r)=>{var n=TU(t);return n==="yAxis"?vu(t,r):xu(t,r)},Q1e=(t,r,n)=>Ab(t,TU(t),K1e(t,r),n),Y1e=ut([_U,Q1e],(t,r)=>{var n;if(!(t==null||r==null)){var{stackId:i}=t,a=M2(t);if(!(i==null||a==null)){var s=(n=r[i])===null||n===void 0?void 0:n.stackedData,o=s?.find(l=>l.key===a);if(o!=null)return o.map(l=>[l[0],l[1]])}}}),Z1e=ut([Gn,CU,AU,NU,EU,Y1e,xF,$1e,_U,Ehe],(t,r,n,i,a,s,o,l,u,d)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:x}=o;if(!(u==null||t!=="horizontal"&&t!=="vertical"||r==null||n==null||i==null||a==null||i.length===0||a.length===0||l==null)){var{data:v}=u,w;if(v&&v.length>0?w=v:w=f?.slice(p,x+1),w!=null)return gve({layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataStartIndex:p,areaSettings:u,stackedData:s,displayedData:w,chartBaseValue:d,bandSize:l})}}),X1e=["id"],J1e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function em(){return em=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},em.apply(null,arguments)}function IU(t,r){if(t==null)return{};var n,i,a=eve(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function eve(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function WD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function wp(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?WD(Object(n),!0).forEach(function(i){tve(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function tve(t,r,n){return(r=rve(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function rve(t){var r=nve(t,"string");return typeof r=="symbol"?r:r+""}function nve(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Pb(t,r){return t&&t!=="none"?t:r}var ive=t=>{var{dataKey:r,name:n,stroke:i,fill:a,legendType:s,hide:o}=t;return[{inactive:o,dataKey:r,type:s,color:Pb(i,a),value:pf(n,r),payload:t}]},ave=k.memo(t=>{var{dataKey:r,data:n,stroke:i,strokeWidth:a,fill:s,name:o,hide:l,unit:u,tooltipType:d,id:f}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:a,fill:s,dataKey:r,nameKey:void 0,name:pf(o,r),hide:l,type:d,color:Pb(i,s),unit:u,graphicalItemId:f}};return k.createElement(Y2,{tooltipEntrySettings:p})});function sve(t){var{clipPathId:r,points:n,props:i}=t,{needClip:a,dot:s,dataKey:o}=i,l=Wl(i);return k.createElement(oU,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:a,clipPathId:r})}function ove(t){var{showLabels:r,children:n,points:i}=t,a=i.map(s=>{var o,l,u={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wp(wp({},u),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return k.createElement(__,{value:r?a:void 0},n)}function HD(t){var{points:r,baseLine:n,needClip:i,clipPathId:a,props:s}=t,{layout:o,type:l,stroke:u,connectNulls:d,isRange:f}=s,{id:p}=s,x=IU(s,X1e),v=Wl(x),w=Tl(x);return k.createElement(k.Fragment,null,r?.length>1&&k.createElement(Os,{clipPath:i?"url(#clipPath-".concat(a,")"):void 0},k.createElement(Ep,em({},w,{id:p,points:r,connectNulls:d,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&k.createElement(Ep,em({},v,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:r})),u!=="none"&&f&&k.createElement(Ep,em({},v,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:n}))),k.createElement(sve,{points:r,props:x,clipPathId:a}))}function lve(t){var r,n,{alpha:i,baseLine:a,points:s,strokeWidth:o}=t,l=(r=s[0])===null||r===void 0?void 0:r.y,u=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!oa(l)||!oa(u))return null;var d=i*Math.abs(l-u),f=Math.max(...s.map(p=>p.x||0));return or(a)?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(...a.map(p=>p.x||0),f)),or(f)?k.createElement("rect",{x:0,y:l<u?l:l-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}function cve(t){var r,n,{alpha:i,baseLine:a,points:s,strokeWidth:o}=t,l=(r=s[0])===null||r===void 0?void 0:r.x,u=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!oa(l)||!oa(u))return null;var d=i*Math.abs(l-u),f=Math.max(...s.map(p=>p.y||0));return or(a)?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(...a.map(p=>p.y||0),f)),or(f)?k.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}function dve(t){var{alpha:r,layout:n,points:i,baseLine:a,strokeWidth:s}=t;return n==="vertical"?k.createElement(lve,{alpha:r,points:i,baseLine:a,strokeWidth:s}):k.createElement(cve,{alpha:r,points:i,baseLine:a,strokeWidth:s})}function uve(t){var{needClip:r,clipPathId:n,props:i,previousPointsRef:a,previousBaselineRef:s}=t,{points:o,baseLine:l,isAnimationActive:u,animationBegin:d,animationDuration:f,animationEasing:p,onAnimationStart:x,onAnimationEnd:v}=i,w=k.useMemo(()=>({points:o,baseLine:l}),[o,l]),C=o0(w,"recharts-area-"),N=Hoe(),[T,O]=k.useState(!1),D=!T,M=k.useCallback(()=>{typeof v=="function"&&v(),O(!1)},[v]),Y=k.useCallback(()=>{typeof x=="function"&&x(),O(!0)},[x]);if(N==null)return null;var q=a.current,W=s.current;return k.createElement(ove,{showLabels:D,points:o},i.children,k.createElement(s0,{animationId:C,begin:d,duration:f,isActive:u,easing:p,onAnimationEnd:M,onAnimationStart:Y,key:C},J=>{if(q){var z=q.length/o.length,G=J===1?o:o.map((Z,ie)=>{var me=Math.floor(ie*z);if(q[me]){var ce=q[me];return wp(wp({},Z),{},{x:Ti(ce.x,Z.x,J),y:Ti(ce.y,Z.y,J)})}return Z}),ne;return or(l)?ne=Ti(W,l,J):_a(l)||ad(l)?ne=Ti(W,0,J):ne=l.map((Z,ie)=>{var me=Math.floor(ie*z);if(Array.isArray(W)&&W[me]){var ce=W[me];return wp(wp({},Z),{},{x:Ti(ce.x,Z.x,J),y:Ti(ce.y,Z.y,J)})}return Z}),J>0&&(a.current=G,s.current=ne),k.createElement(HD,{points:G,baseLine:ne,needClip:r,clipPathId:n,props:i})}return J>0&&(a.current=o,s.current=l),k.createElement(Os,null,u&&k.createElement("defs",null,k.createElement("clipPath",{id:"animationClipPath-".concat(n)},k.createElement(dve,{alpha:J,points:o,baseLine:l,layout:N,strokeWidth:i.strokeWidth}))),k.createElement(Os,{clipPath:"url(#animationClipPath-".concat(n,")")},k.createElement(HD,{points:o,baseLine:l,needClip:r,clipPathId:n,props:i})))}),k.createElement(G2,{label:i.label}))}function hve(t){var{needClip:r,clipPathId:n,props:i}=t,a=k.useRef(null),s=k.useRef();return k.createElement(uve,{needClip:r,clipPathId:n,props:i,previousPointsRef:a,previousBaselineRef:s})}class fve extends k.PureComponent{render(){var{hide:r,dot:n,points:i,className:a,top:s,left:o,needClip:l,xAxisId:u,yAxisId:d,width:f,height:p,id:x,baseLine:v,zIndex:w}=this.props;if(r)return null;var C=hi("recharts-area",a),N=x,{r:T,strokeWidth:O}=jU(n),D=k_(n),M=T*2+O,Y=l?"url(#clipPath-".concat(D?"":"dots-").concat(N,")"):void 0;return k.createElement(Vl,{zIndex:w},k.createElement(Os,{className:C},l&&k.createElement("defs",null,k.createElement(U_,{clipPathId:N,xAxisId:u,yAxisId:d}),!D&&k.createElement("clipPath",{id:"clipPath-dots-".concat(N)},k.createElement("rect",{x:o-M/2,y:s-M/2,width:f+M,height:p+M}))),k.createElement(hve,{needClip:l,clipPathId:N,props:this.props})),k.createElement(VN,{points:i,mainColor:Pb(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Y}),this.props.isRange&&Array.isArray(v)&&k.createElement(VN,{points:v,mainColor:Pb(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Y}))}}var OU={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:$s.area};function mve(t){var r,n=ks(t,OU),{activeDot:i,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:u,fill:d,fillOpacity:f,hide:p,isAnimationActive:x,legendType:v,stroke:w,xAxisId:C,yAxisId:N}=n,T=IU(n,J1e),O=gf(),D=Pq(),{needClip:M}=ej(C,N),Y=Wo(),{points:q,isRange:W,baseLine:J}=(r=wr(me=>Z1e(me,t.id,Y)))!==null&&r!==void 0?r:{},z=J2();if(O!=="horizontal"&&O!=="vertical"||z==null||D!=="AreaChart"&&D!=="ComposedChart")return null;var{height:G,width:ne,x:Z,y:ie}=z;return!q||!q.length?null:k.createElement(fve,em({},T,{activeDot:i,animationBegin:a,animationDuration:s,animationEasing:o,baseLine:J,connectNulls:l,dot:u,fill:d,fillOpacity:f,height:G,hide:p,layout:O,isAnimationActive:x==="auto"?!Ny.isSsr:x,isRange:W,legendType:v,needClip:M,points:q,stroke:w,width:ne,left:Z,top:ie,xAxisId:C,yAxisId:N}))}var pve=(t,r,n,i,a)=>{var s=n??r;if(or(s))return s;var o=t==="horizontal"?a:i,l=o.scale.domain();if(o.type==="number"){var u=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return s==="dataMin"?d:s==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function gve(t){var{areaSettings:{connectNulls:r,baseValue:n,dataKey:i},stackedData:a,layout:s,chartBaseValue:o,xAxis:l,yAxis:u,displayedData:d,dataStartIndex:f,xAxisTicks:p,yAxisTicks:x,bandSize:v}=t,w=a&&a.length,C=pve(s,o,n,l,u),N=s==="horizontal",T=!1,O=d.map((M,Y)=>{var q,W,J;if(w)J=a[f+Y];else{var z=Ii(M,i);Array.isArray(z)?(J=z,T=!0):J=[C,z]}var G=(q=(W=J)===null||W===void 0?void 0:W[1])!==null&&q!==void 0?q:null,ne=G==null||w&&!r&&Ii(M,i)==null;return N?{x:ib({axis:l,ticks:p,bandSize:v,entry:M,index:Y}),y:ne?null:u.scale(G),value:J,payload:M}:{x:ne?null:l.scale(G),y:ib({axis:u,ticks:x,bandSize:v,entry:M,index:Y}),value:J,payload:M}}),D;return w||T?D=O.map(M=>{var Y=Array.isArray(M.value)?M.value[0]:null;return N?{x:M.x,y:Y!=null&&M.y!=null?u.scale(Y):null,payload:M.payload}:{x:Y!=null?l.scale(Y):null,y:M.y,payload:M.payload}}):D=N?u.scale(C):l.scale(C),{points:O,baseLine:D,isRange:T}}function yve(t){var r=ks(t,OU),n=Wo();return k.createElement(Z2,{id:r.id,type:"area"},i=>k.createElement(k.Fragment,null,k.createElement(L_,{legendPayload:ive(r)}),k.createElement(ave,{dataKey:r.dataKey,data:r.data,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType,id:i}),k.createElement(z_,{type:"area",id:i,data:r.data,dataKey:r.dataKey,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,stackId:l9(r.stackId),hide:r.hide,barSize:void 0,baseValue:r.baseValue,isPanorama:n,connectNulls:r.connectNulls}),k.createElement(mve,em({},r,{id:i}))))}var kU=k.memo(yve,Fy);kU.displayName="Area";var xve="Invariant failed";function vve(t,r){throw new Error(xve)}function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$N.apply(null,arguments)}function Rb(t){return k.createElement(D_,$N({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var bve=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,a)=>{if(or(r))return r;var s=or(i)||_a(i);return s?r(i,a):(s||vve(),n)}},jve=(t,r,n)=>n,wve=(t,r)=>r,qy=ut([Dy,wve],(t,r)=>t.filter(n=>n.type==="bar").find(n=>n.id===r)),Sve=ut([qy],t=>t?.maxBarSize),Cve=(t,r,n,i)=>i,Nve=ut([Gn,Dy,xu,vu,jve],(t,r,n,i,a)=>r.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===i).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Ave=(t,r,n)=>{var i=Gn(t),a=xu(t,r),s=vu(t,r);if(!(a==null||s==null))return i==="horizontal"?Ab(t,"yAxis",s,n):Ab(t,"xAxis",a,n)},Eve=(t,r)=>{var n=Gn(t),i=xu(t,r),a=vu(t,r);if(!(i==null||a==null))return n==="horizontal"?Ak(t,"xAxis",i):Ak(t,"yAxis",a)},_ve=ut([Nve,Ahe,Eve],Wye),Tve=(t,r,n)=>{var i,a,s=qy(t,r);if(s!=null){var o=xu(t,r),l=vu(t,r);if(!(o==null||l==null)){var u=Gn(t),d=DF(t),{maxBarSize:f}=s,p=_a(f)?d:f,x,v;return u==="horizontal"?(x=pu(t,"xAxis",o,n),v=mu(t,"xAxis",o,n)):(x=pu(t,"yAxis",l,n),v=mu(t,"yAxis",l,n)),(i=(a=df(x,v,!0))!==null&&a!==void 0?a:p)!==null&&i!==void 0?i:0}}},DU=(t,r,n)=>{var i=Gn(t),a=xu(t,r),s=vu(t,r);if(!(a==null||s==null)){var o,l;return i==="horizontal"?(o=pu(t,"xAxis",a,n),l=mu(t,"xAxis",a,n)):(o=pu(t,"yAxis",s,n),l=mu(t,"yAxis",s,n)),df(o,l)}},Ive=ut([_ve,DF,Nhe,PF,Tve,DU,Sve],Kye),Ove=(t,r,n)=>{var i=xu(t,r);if(i!=null)return pu(t,"xAxis",i,n)},kve=(t,r,n)=>{var i=vu(t,r);if(i!=null)return pu(t,"yAxis",i,n)},Dve=(t,r,n)=>{var i=xu(t,r);if(i!=null)return mu(t,"xAxis",i,n)},Pve=(t,r,n)=>{var i=vu(t,r);if(i!=null)return mu(t,"yAxis",i,n)},Rve=ut([Ive,qy],(t,r)=>{if(!(t==null||r==null)){var n=t.find(i=>i.stackId===r.stackId&&r.dataKey!=null&&i.dataKeys.includes(r.dataKey));if(n!=null)return n.position}}),Mve=ut([Ave,qy],Qye),Lve=ut([wo,hE,Ove,kve,Dve,Pve,Rve,Gn,xF,DU,Mve,qy,Cve],(t,r,n,i,a,s,o,l,u,d,f,p,x)=>{var{chartData:v,dataStartIndex:w,dataEndIndex:C}=u;if(!(p==null||o==null||r==null||l!=="horizontal"&&l!=="vertical"||n==null||i==null||a==null||s==null||d==null)){var{data:N}=p,T;if(N!=null&&N.length>0?T=N:T=v?.slice(w,C+1),T!=null)return hbe({layout:l,barSettings:p,pos:o,parentViewBox:r,bandSize:d,xAxis:n,yAxis:i,xAxisTicks:a,yAxisTicks:s,stackedData:f,displayedData:T,offset:t,cells:x,dataStartIndex:w})}}),zve=["index"];function GN(){return GN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},GN.apply(null,arguments)}function Bve(t,r){if(t==null)return{};var n,i,a=Fve(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Fve(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var PU=k.createContext(void 0),qve=t=>{var r=k.useContext(PU);if(r!=null)return r.stackId;if(t!=null)return l9(t)},Uve=(t,r)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(r),Wve=t=>{var r=k.useContext(PU);if(r!=null){var{stackId:n}=r;return"url(#".concat(Uve(n,t),")")}},Hve=t=>{var{index:r}=t,n=Bve(t,zve),i=Wve(r);return k.createElement(Os,GN({className:"recharts-bar-stack-layer",clipPath:i},n))},Vve=["onMouseEnter","onMouseLeave","onClick"],$ve=["value","background","tooltipPosition"],Gve=["id"],Kve=["onMouseEnter","onClick","onMouseLeave"];function hh(){return hh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hh.apply(null,arguments)}function VD(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Bl(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?VD(Object(n),!0).forEach(function(i){Qve(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Qve(t,r,n){return(r=Yve(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Yve(t){var r=Zve(t,"string");return typeof r=="symbol"?r:r+""}function Zve(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Mb(t,r){if(t==null)return{};var n,i,a=Xve(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Xve(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Jve=t=>{var{dataKey:r,name:n,fill:i,legendType:a,hide:s}=t;return[{inactive:s,dataKey:r,type:a,color:i,value:pf(n,r),payload:t}]},ebe=k.memo(t=>{var{dataKey:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l,tooltipType:u,id:d}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:r,nameKey:void 0,name:pf(s,r),hide:o,type:u,color:a,unit:l,graphicalItemId:d}};return k.createElement(Y2,{tooltipEntrySettings:f})});function tbe(t){var r=wr(hf),{data:n,dataKey:i,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:u}=s,d=Mb(s,Vve),f=P_(o,i,s.id),p=R_(l),x=M_(u,i,s.id);if(!a||n==null)return null;var v=dm(a);return k.createElement(Vl,{zIndex:Yye(a,$s.barBackground)},n.map((w,C)=>{var{value:N,background:T,tooltipPosition:O}=w,D=Mb(w,$ve);if(!T)return null;var M=f(w,C),Y=p(w,C),q=x(w,C),W=Bl(Bl(Bl(Bl(Bl({option:a,isActive:String(C)===r},D),{},{fill:"#eee"},T),v),by(d,w,C)),{},{onMouseEnter:M,onMouseLeave:Y,onClick:q,dataKey:i,index:C,className:"recharts-bar-background-rectangle"});return k.createElement(Rb,hh({key:"background-bar-".concat(C)},W))}))}function rbe(t){var{showLabels:r,children:n,rects:i}=t,a=i?.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Bl(Bl({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return k.createElement(__,{value:r?a:void 0},n)}function nbe(t){var{shape:r,activeBar:n,baseProps:i,entry:a,index:s,dataKey:o}=t,l=wr(hf),u=wr(w_),d=n&&String(s)===l&&(u==null||o===u),f=d?n:r;return d?k.createElement(Vl,{zIndex:$s.activeBar},k.createElement(Rb,hh({},i,{name:String(i.name)},a,{isActive:d,option:f,index:s,dataKey:o}))):k.createElement(Rb,hh({},i,{name:String(i.name)},a,{isActive:d,option:f,index:s,dataKey:o}))}function ibe(t){var{shape:r,baseProps:n,entry:i,index:a,dataKey:s}=t;return k.createElement(Rb,hh({},n,{name:String(n.name)},i,{isActive:!1,option:r,index:a,dataKey:s}))}function abe(t){var r,{data:n,props:i}=t,a=(r=Wl(i))!==null&&r!==void 0?r:{},{id:s}=a,o=Mb(a,Gve),{shape:l,dataKey:u,activeBar:d}=i,{onMouseEnter:f,onClick:p,onMouseLeave:x}=i,v=Mb(i,Kve),w=P_(f,u,s),C=R_(x),N=M_(p,u,s);return n?k.createElement(k.Fragment,null,n.map((T,O)=>k.createElement(Hve,hh({index:O,key:"rectangle-".concat(T?.x,"-").concat(T?.y,"-").concat(T?.value,"-").concat(O),className:"recharts-bar-rectangle"},by(v,T,O),{onMouseEnter:w(T,O),onMouseLeave:C(T,O),onClick:N(T,O)}),d?k.createElement(nbe,{shape:l,activeBar:d,baseProps:o,entry:T,index:O,dataKey:u}):k.createElement(ibe,{shape:l,baseProps:o,entry:T,index:O,dataKey:u})))):null}function sbe(t){var{props:r,previousRectanglesRef:n}=t,{data:i,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:u,onAnimationEnd:d,onAnimationStart:f}=r,p=n.current,x=o0(r,"recharts-bar-"),[v,w]=k.useState(!1),C=!v,N=k.useCallback(()=>{typeof d=="function"&&d(),w(!1)},[d]),T=k.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return k.createElement(rbe,{showLabels:C,rects:i},k.createElement(s0,{animationId:x,begin:o,duration:l,isActive:s,easing:u,onAnimationEnd:N,onAnimationStart:T,key:x},O=>{var D=O===1?i:i?.map((M,Y)=>{var q=p&&p[Y];if(q)return Bl(Bl({},M),{},{x:Ti(q.x,M.x,O),y:Ti(q.y,M.y,O),width:Ti(q.width,M.width,O),height:Ti(q.height,M.height,O)});if(a==="horizontal"){var W=Ti(0,M.height,O),J=Ti(M.stackedBarStart,M.y,O);return Bl(Bl({},M),{},{y:J,height:W})}var z=Ti(0,M.width,O),G=Ti(M.stackedBarStart,M.x,O);return Bl(Bl({},M),{},{width:z,x:G})});return O>0&&(n.current=D??null),D==null?null:k.createElement(Os,null,k.createElement(abe,{props:r,data:D}))}),k.createElement(G2,{label:r.label}),r.children)}function obe(t){var r=k.useRef(null);return k.createElement(sbe,{previousRectanglesRef:r,props:t})}var RU=0,lbe=(t,r)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Ii(t,r)}};class cbe extends k.PureComponent{render(){var{hide:r,data:n,dataKey:i,className:a,xAxisId:s,yAxisId:o,needClip:l,background:u,id:d}=this.props;if(r||n==null)return null;var f=hi("recharts-bar",a),p=d;return k.createElement(Os,{className:f,id:d},l&&k.createElement("defs",null,k.createElement(U_,{clipPathId:p,xAxisId:s,yAxisId:o})),k.createElement(Os,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(p,")"):void 0},k.createElement(tbe,{data:n,dataKey:i,background:u,allOtherBarProps:this.props}),k.createElement(obe,this.props)))}}var dbe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:RU,xAxisId:0,yAxisId:0,zIndex:$s.bar};function ube(t){var{xAxisId:r,yAxisId:n,hide:i,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:u,animationEasing:d,isAnimationActive:f}=t,{needClip:p}=ej(r,n),x=gf(),v=Wo(),w=O_(t.children,Ju),C=wr(O=>Lve(O,t.id,v,w));if(x!=="vertical"&&x!=="horizontal")return null;var N,T=C?.[0];return T==null||T.height==null||T.width==null?N=0:N=x==="vertical"?T.height/2:T.width/2,k.createElement(gU,{xAxisId:r,yAxisId:n,data:C,dataPointFormatter:lbe,errorBarOffset:N},k.createElement(cbe,hh({},t,{layout:x,needClip:p,data:C,xAxisId:r,yAxisId:n,hide:i,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:u,animationEasing:d,isAnimationActive:f})))}function hbe(t){var{layout:r,barSettings:{dataKey:n,minPointSize:i},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:u,yAxisTicks:d,stackedData:f,displayedData:p,offset:x,cells:v,parentViewBox:w,dataStartIndex:C}=t,N=r==="horizontal"?l:o,T=f?N.scale.domain():null,O=loe({numericAxis:N}),D=N.scale(O);return p.map((M,Y)=>{var q,W,J,z,G,ne;if(f){var Z=f[Y+C];if(Z==null)return null;q=noe(Z,T)}else q=Ii(M,n),Array.isArray(q)||(q=[O,q]);var ie=bve(i,RU)(q[1],Y);if(r==="horizontal"){var me,[ce,Q]=[l.scale(q[0]),l.scale(q[1])];W=II({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:M,index:Y}),J=(me=Q??ce)!==null&&me!==void 0?me:void 0,z=a.size;var de=ce-Q;if(G=ad(de)?0:de,ne={x:W,y:x.top,width:z,height:x.height},Math.abs(ie)>0&&Math.abs(G)<Math.abs(ie)){var le=Fo(G||ie)*(Math.abs(ie)-Math.abs(G));J-=le,G+=le}}else{var[ye,Se]=[o.scale(q[0]),o.scale(q[1])];if(W=ye,J=II({axis:l,ticks:d,bandSize:s,offset:a.offset,entry:M,index:Y}),z=Se-ye,G=a.size,ne={x:x.left,y:J,width:x.width,height:G},Math.abs(ie)>0&&Math.abs(z)<Math.abs(ie)){var $=Fo(z||ie)*(Math.abs(ie)-Math.abs(z));z+=$}}if(W==null||J==null||z==null||G==null)return null;var X=Bl(Bl({},M),{},{stackedBarStart:D,x:W,y:J,width:z,height:G,value:f?q:q[1],payload:M,background:ne,tooltipPosition:{x:W+z/2,y:J+G/2},parentViewBox:w},v&&v[Y]&&v[Y].props);return X}).filter(Boolean)}function fbe(t){var r=ks(t,dbe),n=qve(r.stackId),i=Wo();return k.createElement(Z2,{id:r.id,type:"bar"},a=>k.createElement(k.Fragment,null,k.createElement(L_,{legendPayload:Jve(r)}),k.createElement(ebe,{dataKey:r.dataKey,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType,id:a}),k.createElement(z_,{type:"bar",id:a,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:n,hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:i}),k.createElement(Vl,{zIndex:r.zIndex},k.createElement(ube,hh({},r,{id:a})))))}var ef=k.memo(fbe,Fy);ef.displayName="Bar";var mbe=["domain","range"],pbe=["domain","range"];function $D(t,r){if(t==null)return{};var n,i,a=gbe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function gbe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function GD(t,r){return t===r?!0:Array.isArray(t)&&t.length===2&&Array.isArray(r)&&r.length===2?t[0]===r[0]&&t[1]===r[1]:!1}function MU(t,r){if(t===r)return!0;var{domain:n,range:i}=t,a=$D(t,mbe),{domain:s,range:o}=r,l=$D(r,pbe);return!GD(n,s)||!GD(i,o)?!1:Fy(a,l)}var ybe=["dangerouslySetInnerHTML","ticks","scale"],xbe=["id","scale"];function KN(){return KN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},KN.apply(null,arguments)}function KD(t,r){if(t==null)return{};var n,i,a=vbe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function vbe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function bbe(t){var r=ma(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?r(_ye(t)):n.current!==t&&r(Tye({prev:n.current,next:t})),n.current=t},[t,r]),k.useLayoutEffect(()=>()=>{n.current&&(r(Iye(n.current)),n.current=null)},[r]),null}var jbe=t=>{var{xAxisId:r,className:n}=t,i=wr(hE),a=Wo(),s="xAxis",o=wr(T=>hq(T,s,r,a)),l=wr(T=>lq(T,r)),u=wr(T=>Cfe(T,r)),d=wr(T=>WF(T,r));if(l==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:p,scale:x}=t,v=KD(t,ybe),{id:w,scale:C}=d,N=KD(d,xbe);return k.createElement(q_,KN({},v,N,{x:u.x,y:u.y,width:l.width,height:l.height,className:hi("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:o,axisType:s}))},wbe={allowDataOverflow:Mo.allowDataOverflow,allowDecimals:Mo.allowDecimals,allowDuplicatedCategory:Mo.allowDuplicatedCategory,angle:Mo.angle,axisLine:eh.axisLine,height:Mo.height,hide:!1,includeHidden:Mo.includeHidden,interval:Mo.interval,minTickGap:Mo.minTickGap,mirror:Mo.mirror,orientation:Mo.orientation,padding:Mo.padding,reversed:Mo.reversed,scale:Mo.scale,tick:Mo.tick,tickCount:Mo.tickCount,tickLine:eh.tickLine,tickSize:eh.tickSize,type:Mo.type,xAxisId:0},Sbe=t=>{var r=ks(t,wbe);return k.createElement(k.Fragment,null,k.createElement(bbe,{allowDataOverflow:r.allowDataOverflow,allowDecimals:r.allowDecimals,allowDuplicatedCategory:r.allowDuplicatedCategory,angle:r.angle,dataKey:r.dataKey,domain:r.domain,height:r.height,hide:r.hide,id:r.xAxisId,includeHidden:r.includeHidden,interval:r.interval,minTickGap:r.minTickGap,mirror:r.mirror,name:r.name,orientation:r.orientation,padding:r.padding,reversed:r.reversed,scale:r.scale,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit}),k.createElement(jbe,r))},Yu=k.memo(Sbe,MU);Yu.displayName="XAxis";var Cbe=["dangerouslySetInnerHTML","ticks","scale"],Nbe=["id","scale"];function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},QN.apply(null,arguments)}function QD(t,r){if(t==null)return{};var n,i,a=Abe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Abe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Ebe(t){var r=ma(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?r(Oye(t)):n.current!==t&&r(kye({prev:n.current,next:t})),n.current=t},[t,r]),k.useLayoutEffect(()=>()=>{n.current&&(r(Dye(n.current)),n.current=null)},[r]),null}var _be=t=>{var{yAxisId:r,className:n,width:i,label:a}=t,s=k.useRef(null),o=k.useRef(null),l=wr(hE),u=Wo(),d=ma(),f="yAxis",p=wr(q=>cq(q,r)),x=wr(q=>Afe(q,r)),v=wr(q=>hq(q,f,r,u)),w=wr(q=>HF(q,r));if(k.useLayoutEffect(()=>{if(!(i!=="auto"||!p||E_(a)||k.isValidElement(a)||w==null)){var q=s.current;if(q){var W=q.getCalculatedWidth();Math.round(p.width)!==Math.round(W)&&d(Pye({id:r,width:W}))}}},[v,p,d,a,r,i,w]),p==null||x==null||w==null)return null;var{dangerouslySetInnerHTML:C,ticks:N,scale:T}=t,O=QD(t,Cbe),{id:D,scale:M}=w,Y=QD(w,Nbe);return k.createElement(q_,QN({},O,Y,{ref:s,labelRef:o,x:x.x,y:x.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:p.width,height:p.height,className:hi("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:v,axisType:f}))},Tbe={allowDataOverflow:Lo.allowDataOverflow,allowDecimals:Lo.allowDecimals,allowDuplicatedCategory:Lo.allowDuplicatedCategory,angle:Lo.angle,axisLine:eh.axisLine,hide:!1,includeHidden:Lo.includeHidden,interval:Lo.interval,minTickGap:Lo.minTickGap,mirror:Lo.mirror,orientation:Lo.orientation,padding:Lo.padding,reversed:Lo.reversed,scale:Lo.scale,tick:Lo.tick,tickCount:Lo.tickCount,tickLine:eh.tickLine,tickSize:eh.tickSize,type:Lo.type,width:Lo.width,yAxisId:0},Ibe=t=>{var r=ks(t,Tbe);return k.createElement(k.Fragment,null,k.createElement(Ebe,{interval:r.interval,id:r.yAxisId,scale:r.scale,type:r.type,domain:r.domain,allowDataOverflow:r.allowDataOverflow,dataKey:r.dataKey,allowDuplicatedCategory:r.allowDuplicatedCategory,allowDecimals:r.allowDecimals,tickCount:r.tickCount,padding:r.padding,includeHidden:r.includeHidden,reversed:r.reversed,ticks:r.ticks,width:r.width,orientation:r.orientation,mirror:r.mirror,hide:r.hide,unit:r.unit,name:r.name,angle:r.angle,minTickGap:r.minTickGap,tick:r.tick,tickFormatter:r.tickFormatter}),k.createElement(_be,r))},nu=k.memo(Ibe,MU);nu.displayName="YAxis";var Obe=(t,r)=>r,H_=ut([Obe,Gn,qF,Co,_q,jh,qme,wo],Kme),V_=t=>{var r=t.currentTarget.getBoundingClientRect(),n=r.width/t.currentTarget.offsetWidth,i=r.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-r.left)/n),chartY:Math.round((t.clientY-r.top)/i)}},LU=sd("mouseClick"),zU=wy();zU.startListening({actionCreator:LU,effect:(t,r)=>{var n=t.payload,i=H_(r.getState(),V_(n));i?.activeIndex!=null&&r.dispatch(Ffe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var YN=sd("mouseMove"),BU=wy(),s1=null;BU.startListening({actionCreator:YN,effect:(t,r)=>{var n=t.payload;s1!==null&&cancelAnimationFrame(s1);var i=V_(n);s1=requestAnimationFrame(()=>{var a=r.getState(),s=g_(a,a.tooltip.settings.shared);if(s==="axis"){var o=H_(a,i);o?.activeIndex!=null?r.dispatch(bq({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):r.dispatch(vq())}s1=null})}});function kbe(t,r){return r instanceof HTMLElement?"HTMLElement <".concat(r.tagName,' class="').concat(r.className,'">'):r===window?"global.window":t==="children"&&typeof r=="object"&&r!==null?"<<CHILDREN>>":r}var YD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},FU=fc({name:"rootProps",initialState:YD,reducers:{updateOptions:(t,r)=>{var n;t.accessibilityLayer=r.payload.accessibilityLayer,t.barCategoryGap=r.payload.barCategoryGap,t.barGap=(n=r.payload.barGap)!==null&&n!==void 0?n:YD.barGap,t.barSize=r.payload.barSize,t.maxBarSize=r.payload.maxBarSize,t.stackOffset=r.payload.stackOffset,t.syncId=r.payload.syncId,t.syncMethod=r.payload.syncMethod,t.className=r.payload.className,t.baseValue=r.payload.baseValue,t.reverseStackOrder=r.payload.reverseStackOrder}}}),Dbe=FU.reducer,{updateOptions:Pbe}=FU.actions,qU=fc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,r)=>r.payload}}),{updatePolarOptions:Rbe}=qU.actions,Mbe=qU.reducer,UU=sd("keyDown"),WU=sd("focus"),$_=wy();$_.startListening({actionCreator:UU,effect:(t,r)=>{var n=r.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:a}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=y_(a,g0(n),Ry(n),zy(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var u=jh(n);if(s==="Enter"){var d=_b(n,"axis","hover",String(a.index));r.dispatch(BN({active:!a.active,activeIndex:a.index,activeCoordinate:d}));return}var f=Ife(n),p=f==="left-to-right"?1:-1,x=s==="ArrowRight"?1:-1,v=l+x*p;if(!(u==null||v>=u.length||v<0)){var w=_b(n,"axis","hover",String(v));r.dispatch(BN({active:!0,activeIndex:v.toString(),activeCoordinate:w}))}}}}}});$_.startListening({actionCreator:WU,effect:(t,r)=>{var n=r.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var s="0",o=_b(n,"axis","hover",String(s));r.dispatch(BN({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Zc=sd("externalEvent"),HU=wy(),jS=new Map;HU.startListening({actionCreator:Zc,effect:(t,r)=>{var{handler:n,reactEvent:i}=t.payload;if(n!=null){i.persist();var a=i.type,s=jS.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=r.getState(),u={activeCoordinate:Ame(l),activeDataKey:w_(l),activeIndex:hf(l),activeLabel:Oq(l),activeTooltipIndex:hf(l),isTooltipActive:Eme(l)};n(u,i)}finally{jS.delete(a)}});jS.set(a,o)}}});var Lbe=ut([m0],t=>t.tooltipItemPayloads),zbe=ut([Lbe,Ly,(t,r)=>r,(t,r,n)=>n],(t,r,n,i)=>{var a=t.find(l=>l.settings.graphicalItemId===i);if(a!=null){var{positions:s}=a;if(s!=null){var o=r(s,n);return o}}}),VU=sd("touchMove"),$U=wy();$U.startListening({actionCreator:VU,effect:(t,r)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=r.getState(),a=g_(i,i.tooltip.settings.shared);if(a==="axis"){var s=n.touches[0];if(s==null)return;var o=H_(i,V_({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&r.dispatch(bq({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,u=n.touches[0];if(document.elementFromPoint==null||u==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(d9),p=(l=d.getAttribute(u9))!==null&&l!==void 0?l:void 0,x=p0(i).find(C=>C.id===p);if(f==null||x==null||p==null)return;var{dataKey:v}=x,w=zbe(i,f,p);r.dispatch(xq({activeDataKey:v,activeIndex:f,activeCoordinate:w,activeGraphicalItemId:p}))}}}});var Bbe=OB({brush:Zye,cartesianAxis:Rye,chartData:Npe,errorBars:Kxe,graphicalItems:Uge,layout:Zse,legend:ale,options:bpe,polarAxis:rge,polarOptions:Mbe,referenceElements:ixe,rootProps:Dbe,tooltip:qfe,zIndex:lpe}),Fbe=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return wse({reducer:Bbe,preloadedState:r,middleware:i=>{var a;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([zU.middleware,BU.middleware,$_.middleware,HU.middleware,$U.middleware])},enhancers:i=>{var a=i;return typeof i=="function"&&(a=i()),a.concat($B({type:"raf"}))},devTools:{serialize:{replacer:kbe},name:"recharts-".concat(n)}})};function GU(t){var{preloadedState:r,children:n,reduxStoreName:i}=t,a=Wo(),s=k.useRef(null);if(a)return n;s.current==null&&(s.current=Fbe(r,i));var o=aE;return k.createElement(w1e,{context:o,store:s.current},n)}function qbe(t){var{layout:r,margin:n}=t,i=ma(),a=Wo();return k.useEffect(()=>{a||(i(Kse(r)),i(Gse(n)))},[i,a,r,n]),null}var KU=k.memo(qbe,Fy);function QU(t){var r=ma();return k.useEffect(()=>{r(Pbe(t))},[r,t]),null}function ZD(t){var{zIndex:r,isPanorama:n}=t,i=k.useRef(null),a=ma();return k.useLayoutEffect(()=>(i.current&&a(spe({zIndex:r,element:i.current,isPanorama:n})),()=>{a(ope({zIndex:r,isPanorama:n}))}),[a,r,n]),k.createElement("g",{tabIndex:-1,ref:i})}function XD(t){var{children:r,isPanorama:n}=t,i=wr(Yme);if(!i||i.length===0)return r;var a=i.filter(o=>o<0),s=i.filter(o=>o>0);return k.createElement(k.Fragment,null,a.map(o=>k.createElement(ZD,{key:o,zIndex:o,isPanorama:n})),r,s.map(o=>k.createElement(ZD,{key:o,zIndex:o,isPanorama:n})))}var Ube=["children"];function Wbe(t,r){if(t==null)return{};var n,i,a=Hbe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Hbe(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lb.apply(null,arguments)}var Vbe={width:"100%",height:"100%",display:"block"},$be=k.forwardRef((t,r)=>{var n=mE(),i=pE(),a=_9();if(!hu(n)||!hu(i))return null;var{children:s,otherAttributes:o,title:l,desc:u}=t,d,f;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=a?0:void 0,typeof o.role=="string"?f=o.role:f=a?"application":void 0),k.createElement(KA,Lb({},o,{title:l,desc:u,role:f,tabIndex:d,width:n,height:i,style:Vbe,ref:r}),s)}),Gbe=t=>{var{children:r}=t,n=wr(j2);if(!n)return null;var{width:i,height:a,y:s,x:o}=n;return k.createElement(KA,{width:i,height:a,x:o,y:s},r)},JD=k.forwardRef((t,r)=>{var{children:n}=t,i=Wbe(t,Ube),a=Wo();return a?k.createElement(Gbe,null,k.createElement(XD,{isPanorama:!0},n)):k.createElement($be,Lb({ref:r},i),k.createElement(XD,{isPanorama:!1},n))});function Kbe(){var t=ma(),[r,n]=k.useState(null),i=wr(moe);return k.useEffect(()=>{if(r!=null){var a=r.getBoundingClientRect(),s=a.width/r.offsetWidth;oa(s)&&s!==i&&t(Yse(s))}},[r,t,i]),n}function eP(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Qbe(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?eP(Object(n),!0).forEach(function(i){Ybe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ybe(t,r,n){return(r=Zbe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Zbe(t){var r=Xbe(t,"string");return typeof r=="symbol"?r:r+""}function Xbe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xm.apply(null,arguments)}var Jbe=()=>(Ppe(),null);function zb(t){if(typeof t=="number")return t;if(typeof t=="string"){var r=parseFloat(t);if(!Number.isNaN(r))return r}return 0}var e2e=k.forwardRef((t,r)=>{var n,i,a=k.useRef(null),[s,o]=k.useState({containerWidth:zb((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:zb((i=t.style)===null||i===void 0?void 0:i.height)}),l=k.useCallback((d,f)=>{o(p=>{var x=Math.round(d),v=Math.round(f);return p.containerWidth===x&&p.containerHeight===v?p:{containerWidth:x,containerHeight:v}})},[]),u=k.useCallback(d=>{if(typeof r=="function"&&r(d),d!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=d.getBoundingClientRect();l(f,p);var x=w=>{var{width:C,height:N}=w[0].contentRect;l(C,N)},v=new ResizeObserver(x);v.observe(d),a.current=v}},[r,l]);return k.useEffect(()=>()=>{var d=a.current;d?.disconnect()},[l]),k.createElement(k.Fragment,null,k.createElement(S2,{width:s.containerWidth,height:s.containerHeight}),k.createElement("div",xm({ref:u},t)))}),t2e=k.forwardRef((t,r)=>{var{width:n,height:i}=t,[a,s]=k.useState({containerWidth:zb(n),containerHeight:zb(i)}),o=k.useCallback((u,d)=>{s(f=>{var p=Math.round(u),x=Math.round(d);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),l=k.useCallback(u=>{if(typeof r=="function"&&r(u),u!=null){var{width:d,height:f}=u.getBoundingClientRect();o(d,f)}},[r,o]);return k.createElement(k.Fragment,null,k.createElement(S2,{width:a.containerWidth,height:a.containerHeight}),k.createElement("div",xm({ref:l},t)))}),r2e=k.forwardRef((t,r)=>{var{width:n,height:i}=t;return k.createElement(k.Fragment,null,k.createElement(S2,{width:n,height:i}),k.createElement("div",xm({ref:r},t)))}),n2e=k.forwardRef((t,r)=>{var{width:n,height:i}=t;return sh(n)||sh(i)?k.createElement(t2e,xm({},t,{ref:r})):k.createElement(r2e,xm({},t,{ref:r}))});function i2e(t){return t===!0?e2e:n2e}var a2e=k.forwardRef((t,r)=>{var{children:n,className:i,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:f,onMouseMove:p,onMouseUp:x,onTouchEnd:v,onTouchMove:w,onTouchStart:C,style:N,width:T,responsive:O,dispatchTouchEvents:D=!0}=t,M=k.useRef(null),Y=ma(),[q,W]=k.useState(null),[J,z]=k.useState(null),G=Kbe(),ne=fE(),Z=ne?.width>0?ne.width:T,ie=ne?.height>0?ne.height:a,me=k.useCallback(ke=>{G(ke),typeof r=="function"&&r(ke),W(ke),z(ke),ke!=null&&(M.current=ke)},[G,r,W,z]),ce=k.useCallback(ke=>{Y(LU(ke)),Y(Zc({handler:s,reactEvent:ke}))},[Y,s]),Q=k.useCallback(ke=>{Y(YN(ke)),Y(Zc({handler:d,reactEvent:ke}))},[Y,d]),de=k.useCallback(ke=>{Y(vq()),Y(Zc({handler:f,reactEvent:ke}))},[Y,f]),le=k.useCallback(ke=>{Y(YN(ke)),Y(Zc({handler:p,reactEvent:ke}))},[Y,p]),ye=k.useCallback(()=>{Y(WU())},[Y]),Se=k.useCallback(ke=>{Y(UU(ke.key))},[Y]),$=k.useCallback(ke=>{Y(Zc({handler:o,reactEvent:ke}))},[Y,o]),X=k.useCallback(ke=>{Y(Zc({handler:l,reactEvent:ke}))},[Y,l]),se=k.useCallback(ke=>{Y(Zc({handler:u,reactEvent:ke}))},[Y,u]),H=k.useCallback(ke=>{Y(Zc({handler:x,reactEvent:ke}))},[Y,x]),oe=k.useCallback(ke=>{Y(Zc({handler:C,reactEvent:ke}))},[Y,C]),ge=k.useCallback(ke=>{D&&Y(VU(ke)),Y(Zc({handler:w,reactEvent:ke}))},[Y,D,w]),be=k.useCallback(ke=>{Y(Zc({handler:v,reactEvent:ke}))},[Y,v]),Le=i2e(O);return k.createElement(Bq.Provider,{value:q},k.createElement(Kz.Provider,{value:J},k.createElement(Le,{width:Z??N?.width,height:ie??N?.height,className:hi("recharts-wrapper",i),style:Qbe({position:"relative",cursor:"default",width:Z,height:ie},N),onClick:ce,onContextMenu:$,onDoubleClick:X,onFocus:ye,onKeyDown:Se,onMouseDown:se,onMouseEnter:Q,onMouseLeave:de,onMouseMove:le,onMouseUp:H,onTouchEnd:be,onTouchMove:ge,onTouchStart:oe,ref:me},k.createElement(Jbe,null),n)))}),s2e=["width","height","responsive","children","className","style","compact","title","desc"];function o2e(t,r){if(t==null)return{};var n,i,a=l2e(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function l2e(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var YU=k.forwardRef((t,r)=>{var{width:n,height:i,responsive:a,children:s,className:o,style:l,compact:u,title:d,desc:f}=t,p=o2e(t,s2e),x=Wl(p);return u?k.createElement(k.Fragment,null,k.createElement(S2,{width:n,height:i}),k.createElement(JD,{otherAttributes:x,title:d,desc:f},s)):k.createElement(a2e,{className:o,style:l,width:n,height:i,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},k.createElement(JD,{otherAttributes:x,title:d,desc:f,ref:r},k.createElement(sxe,null,s)))});function ZN(){return ZN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ZN.apply(null,arguments)}var c2e={top:5,right:5,bottom:5,left:5},d2e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:c2e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},G_=k.forwardRef(function(r,n){var i,a=ks(r.categoricalChartProps,d2e),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:d}=r,f={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return k.createElement(GU,{preloadedState:{options:f},reduxStoreName:(i=d.id)!==null&&i!==void 0?i:s},k.createElement(dU,{chartData:d.data}),k.createElement(KU,{layout:a.layout,margin:a.margin}),k.createElement(QU,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),k.createElement(YU,ZN({},a,{ref:n})))}),u2e=["axis"],ZU=k.forwardRef((t,r)=>k.createElement(G_,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:u2e,tooltipPayloadSearcher:V2,categoricalChartProps:t,ref:r})),h2e=["axis","item"],kg=k.forwardRef((t,r)=>k.createElement(G_,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:h2e,tooltipPayloadSearcher:V2,categoricalChartProps:t,ref:r}));function f2e(t){var r=ma();return k.useEffect(()=>{r(Rbe(t))},[r,t]),null}var m2e=["layout"];function XN(){return XN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},XN.apply(null,arguments)}function p2e(t,r){if(t==null)return{};var n,i,a=g2e(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function g2e(t,r){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(r.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var y2e={top:5,right:5,bottom:5,left:5},XU={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:y2e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},x2e=k.forwardRef(function(r,n){var i,a=ks(r.categoricalChartProps,XU),{layout:s}=a,o=p2e(a,m2e),{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f}=r,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return k.createElement(GU,{preloadedState:{options:p},reduxStoreName:(i=a.id)!==null&&i!==void 0?i:l},k.createElement(dU,{chartData:a.data}),k.createElement(KU,{layout:s,margin:a.margin}),k.createElement(QU,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),k.createElement(f2e,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),k.createElement(YU,XN({},o,{ref:n})))});function tP(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function rP(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?tP(Object(n),!0).forEach(function(i){v2e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function v2e(t,r,n){return(r=b2e(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function b2e(t){var r=j2e(t,"string");return typeof r=="symbol"?r:r+""}function j2e(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var w2e=["item"],S2e=rP(rP({},XU),{},{layout:"centric",startAngle:0,endAngle:360}),Dg=k.forwardRef((t,r)=>{var n=ks(t,S2e);return k.createElement(x2e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:w2e,tooltipPayloadSearcher:V2,categoricalChartProps:n,ref:r})}),C2e=["axis"],N2e=k.forwardRef((t,r)=>k.createElement(G_,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:C2e,tooltipPayloadSearcher:V2,categoricalChartProps:t,ref:r}));const A2e=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];function E2e({value:t,direction:r}){const n=r==="up"?t0:r==="down"?hz:sz,i=r==="up"?"#10b981":r==="down"?"#ef4444":"#6b7280";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:i},children:[e.jsx(n,{size:14}),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600},children:[Math.abs(t),"%"]})]})}function o1({title:t,subtitle:r,data:n,type:i,dataKey:a="value",colors:s=A2e,height:o=200,trend:l,target:u}){const d=k.useMemo(()=>{switch(i){case"area":return e.jsx(Ic,{width:"100%",height:o,children:e.jsxs(N2e,{data:n,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${t}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:s[0],stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:s[0],stopOpacity:0})]})}),e.jsx(Qu,{strokeDasharray:"3 3",stroke:"var(--border)"}),e.jsx(Yu,{dataKey:"name",tick:{fontSize:11},stroke:"var(--text-muted)"}),e.jsx(nu,{tick:{fontSize:11},stroke:"var(--text-muted)"}),e.jsx(kc,{contentStyle:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"12px"}}),e.jsx(kU,{type:"monotone",dataKey:a,stroke:s[0],strokeWidth:2,fill:`url(#gradient-${t})`}),u&&e.jsx(ay,{type:"monotone",dataKey:()=>u,stroke:"#ef4444",strokeDasharray:"5 5",strokeWidth:1,dot:!1})]})});case"bar":return e.jsx(Ic,{width:"100%",height:o,children:e.jsxs(kg,{data:n,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx(Qu,{strokeDasharray:"3 3",stroke:"var(--border)"}),e.jsx(Yu,{dataKey:"name",tick:{fontSize:11},stroke:"var(--text-muted)"}),e.jsx(nu,{tick:{fontSize:11},stroke:"var(--text-muted)"}),e.jsx(kc,{contentStyle:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"12px"}}),e.jsx(ef,{dataKey:a,fill:s[0],radius:[4,4,0,0]})]})});case"line":return e.jsx(Ic,{width:"100%",height:o,children:e.jsxs(ZU,{data:n,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx(Qu,{strokeDasharray:"3 3",stroke:"var(--border)"}),e.jsx(Yu,{dataKey:"name",tick:{fontSize:11},stroke:"var(--text-muted)"}),e.jsx(nu,{tick:{fontSize:11},stroke:"var(--text-muted)"}),e.jsx(kc,{contentStyle:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"12px"}}),e.jsx(ay,{type:"monotone",dataKey:a,stroke:s[0],strokeWidth:2,dot:{fill:s[0],strokeWidth:2}})]})});case"pie":case"donut":return e.jsx(Ic,{width:"100%",height:o,children:e.jsxs(Dg,{children:[e.jsx(Tp,{data:n,cx:"50%",cy:"50%",innerRadius:i==="donut"?50:0,outerRadius:70,paddingAngle:2,dataKey:a,children:n.map((f,p)=>e.jsx(Ju,{fill:s[p%s.length]},`cell-${p}`))}),e.jsx(kc,{contentStyle:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"12px"}}),e.jsx(E9,{wrapperStyle:{fontSize:"11px"},formatter:f=>e.jsx("span",{style:{color:"var(--text-secondary)"},children:f})})]})});default:return null}},[n,i,a,s,o,t,u]);return e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",margin:0},children:t}),r&&e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:r})]}),l&&e.jsx(E2e,{value:l.value,direction:l.direction})]}),d]})}function _2e({throughputData:t=[],qcPassRateData:r=[],deliveryData:n=[],orderDistribution:i=[]}){return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(o1,{title:"Production Throughput",subtitle:"Batches completed (last 7 days)",data:t,type:"area",colors:["#3b82f6"],trend:{value:12,direction:"up"}}),e.jsx(o1,{title:"QC Pass Rate",subtitle:"First-time pass rate (%)",data:r,type:"bar",colors:["#10b981"],target:95,trend:{value:2,direction:"up"}}),e.jsx(o1,{title:"On-Time Delivery",subtitle:"Delivery performance (%)",data:n,type:"line",colors:["#8b5cf6"],trend:{value:5,direction:"up"}}),e.jsx(o1,{title:"Order Distribution",subtitle:"By status",data:i,type:"donut",colors:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"]})]})}function T2e(){Qr();const{data:t,isLoading:r,isError:n,error:i,refetch:a,isFetching:s}=Ve({queryKey:["dashboard-overview"],queryFn:async()=>{const{data:l}=await xe.get("/dashboard/overview");return l},refetchInterval:6e4});if(n)return e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx($r,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load dashboard"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:i instanceof Error?i.message:"An error occurred while loading the dashboard."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>a(),children:"Try Again"})]});if(r)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(l=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},l))}),e.jsx("div",{className:"card skeleton",style:{height:"120px",marginBottom:"1.5rem"}}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(l=>e.jsx("div",{className:"card skeleton",style:{height:"300px"}},l))})]});const o=(t?.journeyCounts||[]).map(l=>({...l,linkTo:I2e(l.id)}));return e.jsxs("div",{children:[e.jsx(a0,{title:"Operations Command Center",subtitle:"End-to-end visibility across orders, production, QC, and logistics",lastRefreshed:t?.lastRefreshed?new Date(t.lastRefreshed):void 0,onRefresh:()=>a(),isRefreshing:s}),e.jsx(Rne,{}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx(zne,{alerts:t?.criticalAlerts||[],title:"Requiring Immediate Attention"})}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-muted)",marginBottom:"0.75rem",textTransform:"uppercase"},children:"Performance Analytics"}),e.jsx(_2e,{throughputData:t?.charts?.throughput||k2e(),qcPassRateData:t?.charts?.qcPassRate||D2e(),deliveryData:t?.charts?.delivery||P2e(),orderDistribution:t?.charts?.orderDistribution||R2e()}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-muted)",marginBottom:"0.75rem",textTransform:"uppercase"},children:"Orders & Production"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Due Today",value:t?.kpis?.ordersDueToday||0,icon:e.jsx(Qt,{size:20}),trend:t?.kpis?.ordersDueToday>0?"up":void 0,linkTo:"/orders?due=today"}),e.jsx(st,{title:"Orders Late",value:t?.kpis?.ordersLate||0,icon:e.jsx($r,{size:20}),color:t?.kpis?.ordersLate>0?"danger":void 0,linkTo:"/orders?risk=high"}),e.jsx(st,{title:"In Production",value:t?.kpis?.batchesInProduction||0,icon:e.jsx(lu,{size:20}),color:"info",linkTo:"/batches?status=IN_PRODUCTION"}),e.jsx(st,{title:"Awaiting QC",value:t?.kpis?.batchesAwaitingQC||0,icon:e.jsx(sa,{size:20}),color:"warning",linkTo:"/qc?status=QC_PENDING"}),e.jsx(st,{title:"Awaiting QP",value:t?.kpis?.batchesAwaitingQP||0,icon:e.jsx(ia,{size:20}),color:"info",linkTo:"/release?status=QC_PASSED"}),e.jsx(st,{title:"Ready to Dispense",value:t?.kpis?.readyToDispense||0,icon:e.jsx(Rr,{size:20}),color:"success",linkTo:"/dispensing?ready=true"})]}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-muted)",marginBottom:"0.75rem",textTransform:"uppercase"},children:"Logistics"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Ready to Dispatch",value:t?.kpis?.shipmentsReadyToDispatch||0,icon:e.jsx(dn,{size:20}),linkTo:"/shipments?status=ASSIGNED"}),e.jsx(st,{title:"Delayed",value:t?.kpis?.shipmentsDelayed||0,icon:e.jsx($r,{size:20}),color:t?.kpis?.shipmentsDelayed>0?"danger":void 0,linkTo:"/shipments?status=DELAYED"}),e.jsx(st,{title:"Delivered Today",value:t?.kpis?.deliveredToday||0,icon:e.jsx(Ut,{size:20}),color:"success",linkTo:"/shipments?delivered=today"})]}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-muted)",marginBottom:"0.75rem",textTransform:"uppercase"},children:"Procurement & Inventory"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"PO Pending Approval",value:t?.kpis?.poPendingApproval||0,icon:e.jsx(Pr,{size:20}),color:"warning",linkTo:"/purchase-orders?status=PENDING_APPROVAL"}),e.jsx(st,{title:"PO Sent",value:t?.kpis?.poSent||0,icon:e.jsx(qo,{size:20}),color:"info",linkTo:"/purchase-orders?status=SENT"}),e.jsx(st,{title:"GRN Pending QC",value:t?.kpis?.grnPendingQC||0,icon:e.jsx(rh,{size:20}),color:"warning",linkTo:"/grn?status=PENDING_QC"}),e.jsx(st,{title:"Low Stock Items",value:t?.kpis?.lowStockItems||0,icon:e.jsx(lm,{size:20}),color:t?.kpis?.lowStockItems>0?"danger":void 0,linkTo:"/inventory?lowStock=true"}),e.jsx(st,{title:"eBR In Progress",value:t?.kpis?.batchRecordsInProgress||0,icon:e.jsx(lu,{size:20}),color:"info",linkTo:"/manufacturing?status=IN_PROGRESS"})]}),e.jsx(Hz,{title:"End-to-End Order Journey",stages:o}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-muted)",marginBottom:"0.75rem",textTransform:"uppercase"},children:"Work Queues - Production"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(Tc,{title:"Validation Queue",items:t?.queues?.validation||[],viewAllLink:"/orders?status=SUBMITTED",maxItems:5,icon:e.jsx(af,{size:18,style:{color:"#2563eb"}}),accentColor:"#2563eb",emptyMessage:"No orders awaiting validation"}),e.jsx(Tc,{title:"Manufacturing Queue",items:t?.queues?.manufacturing||[],viewAllLink:"/manufacturing?status=IN_PROGRESS",maxItems:5,icon:e.jsx(lu,{size:18,style:{color:"#059669"}}),accentColor:"#059669",emptyMessage:"No batch records in progress"}),e.jsx(Tc,{title:"QC Queue",items:t?.queues?.qc||[],viewAllLink:"/qc?status=QC_PENDING",maxItems:5,icon:e.jsx(sa,{size:18,style:{color:"#d97706"}}),accentColor:"#d97706",emptyMessage:"No batches awaiting QC"}),e.jsx(Tc,{title:"QP Release Queue",items:t?.queues?.qp||[],viewAllLink:"/release?status=QC_PASSED",maxItems:5,icon:e.jsx(ia,{size:18,style:{color:"#7c3aed"}}),accentColor:"#7c3aed",emptyMessage:"No batches awaiting QP release"})]}),e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-muted)",marginBottom:"0.75rem",textTransform:"uppercase"},children:"Work Queues - Procurement & Logistics"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(Tc,{title:"PO Approval Queue",items:t?.queues?.poApproval||[],viewAllLink:"/purchase-orders?status=PENDING_APPROVAL",maxItems:5,icon:e.jsx(Pr,{size:18,style:{color:"#ea580c"}}),accentColor:"#ea580c",emptyMessage:"No POs awaiting approval"}),e.jsx(Tc,{title:"GRN QC Queue",items:t?.queues?.grnQc||[],viewAllLink:"/grn?status=PENDING_QC",maxItems:5,icon:e.jsx(rh,{size:18,style:{color:"#0284c7"}}),accentColor:"#0284c7",emptyMessage:"No GRNs awaiting QC"}),e.jsx(Tc,{title:"Logistics Queue",items:t?.queues?.logistics||[],viewAllLink:"/shipments?status=CREATED",maxItems:5,icon:e.jsx(dn,{size:18,style:{color:"#0891b2"}}),accentColor:"#0891b2",emptyMessage:"No shipments pending"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr 1fr",gap:"1rem"},children:[e.jsx(yy,{title:"Exceptions & Alerts",items:t?.exceptions||[]}),e.jsx(Pne,{title:"Capacity Overview (7 Days)",days:t?.capacity||O2e()}),e.jsx(Dne,{title:"Recent Activity",events:t?.recentActivity||[],maxEvents:8})]})]})}function I2e(t){return{submitted:"/orders?status=SUBMITTED",validated:"/orders?status=VALIDATED",scheduled:"/orders?status=SCHEDULED",in_production:"/batches?status=IN_PRODUCTION",qc_pending:"/qc?status=QC_PENDING",released:"/batches?status=RELEASED",dispensing:"/dispensing",packed:"/batches?status=PACKED",dispatched:"/shipments?status=IN_TRANSIT",delivered:"/shipments?status=DELIVERED"}[t]||"/orders"}function O2e(){const t=[],r=new Date;for(let n=0;n<7;n++){const i=new Date(r);i.setDate(i.getDate()+n),t.push({date:i,reservedMinutes:Math.floor(Math.random()*200)+100,committedMinutes:Math.floor(Math.random()*100)+50,totalCapacity:480,isFull:!1})}return t}function k2e(){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(r=>({name:r,value:Math.floor(Math.random()*15)+5}))}function D2e(){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(r=>({name:r,value:Math.floor(Math.random()*10)+88}))}function P2e(){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(r=>({name:r,value:Math.floor(Math.random()*8)+90}))}function R2e(){return[{name:"Pending",value:12},{name:"In Progress",value:28},{name:"QC",value:8},{name:"Ready",value:15},{name:"Delivered",value:42}]}function M2e(){const t=Qr(),[r,n]=k.useState({}),[i,a]=k.useState(null),{data:s,isLoading:o}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:w}=await xe.get("/customers");return w}}),{data:l}=Ve({queryKey:["settings","categories"],queryFn:async()=>{const{data:w}=await xe.get("/settings/categories");return w}}),u=w=>w?new Date(w)<new Date:!1,d=w=>!w.documents||w.documents.length===0,f=[{key:"search",label:"Search",type:"search",placeholder:"Search name, code, mobile, email, CR, tax..."},{key:"category",label:"Category",type:"select",options:[{value:"",label:"All Categories"},...l?.map(w=>({value:w.id,label:w.name}))||[]]},{key:"licenseStatus",label:"License",type:"select",options:[{value:"",label:"All"},{value:"valid",label:"Valid"},{value:"expired",label:"Expired"}]},{key:"docsStatus",label:"Documents",type:"select",options:[{value:"",label:"All"},{value:"missing",label:"Missing Docs"},{value:"uploaded",label:"Has Docs"}]}],p=s?.filter(w=>{if(r.category&&w.categoryId!==r.category||r.licenseStatus==="valid"&&u(w.licenseExpiryDate)||r.licenseStatus==="expired"&&!u(w.licenseExpiryDate)||r.docsStatus==="missing"&&!d(w)||r.docsStatus==="uploaded"&&d(w)||i==="expired"&&!u(w.licenseExpiryDate)||i==="licensed"&&u(w.licenseExpiryDate)||i==="hospitals"&&!w.category?.name?.toLowerCase().includes("hospital")||i==="missingDocs"&&!d(w))return!1;if(r.search){const C=r.search.toLowerCase();if(![w.name,w.nameEn,w.nameAr,w.code,w.email,w.mobile,w.phone,w.crNumber,w.taxNumber].some(T=>T?.toLowerCase().includes(C)))return!1}return!0}),x={total:s?.length||0,licensed:s?.filter(w=>!u(w.licenseExpiryDate)).length||0,expired:s?.filter(w=>u(w.licenseExpiryDate)).length||0,hospitals:s?.filter(w=>w.category?.name?.toLowerCase().includes("hospital")).length||0,missingDocs:s?.filter(w=>d(w)).length||0},v=w=>{a(i===w?null:w)};return o?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Customer Management"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage healthcare facilities and their licensing information"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/customers/new"),children:[e.jsx(cn,{size:16}),"Add Customer"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Customers",value:x.total,icon:e.jsx(cc,{size:20}),color:"primary",onClick:()=>a(null),selected:i===null}),e.jsx(st,{title:"Licensed",value:x.licensed,icon:e.jsx(hX,{size:20}),color:"success",onClick:()=>v("licensed"),selected:i==="licensed"}),e.jsx(st,{title:"License Expired",value:x.expired,icon:e.jsx($r,{size:20}),color:"danger",onClick:()=>v("expired"),selected:i==="expired"}),e.jsx(st,{title:"Hospitals",value:x.hospitals,icon:e.jsx(Mp,{size:20}),color:"info",onClick:()=>v("hospitals"),selected:i==="hospitals"}),e.jsx(st,{title:"Missing Docs",value:x.missingDocs,icon:e.jsx(Pr,{size:20}),color:"warning",onClick:()=>v("missingDocs"),selected:i==="missingDocs"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:f,values:r,onChange:(w,C)=>n(N=>({...N,[w]:C})),onReset:()=>{n({}),a(null)}})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Customer List (",p?.length||0,")"]})}),p?.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table",style:{marginBottom:0,minWidth:"1000px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name (EN / AR)"}),e.jsx("th",{children:"City"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"CR Number"}),e.jsx("th",{children:"Tax Number"}),e.jsx("th",{children:"Docs"}),e.jsx("th",{children:"License Status"}),e.jsx("th",{style:{width:"80px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:p.map(w=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:w.code}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:w.nameEn||w.name}),w.nameAr&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",direction:"rtl"},children:w.nameAr})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ea,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:w.city?.name||w.district||"-"})]})}),e.jsx("td",{children:e.jsxs("div",{style:{fontSize:"0.8125rem"},children:[w.mobile&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(vo,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:w.mobile})]}),w.email&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--text-muted)",fontSize:"0.75rem"},children:[e.jsx(uc,{size:12}),e.jsx("span",{children:w.email})]}),!w.mobile&&!w.email&&"-"]})}),e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:w.crNumber||"-"}),e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:w.taxNumber||"-"}),e.jsx("td",{children:w.documents?.length>0?e.jsxs("span",{className:"badge badge-success",style:{fontSize:"0.6875rem"},children:[w.documents.length," docs"]}):e.jsx("span",{className:"badge badge-warning",style:{fontSize:"0.6875rem"},children:"None"})}),e.jsx("td",{children:w.licenseNumber?e.jsxs("div",{children:[u(w.licenseExpiryDate)?e.jsx(Pn,{status:"EXPIRED",size:"sm"}):e.jsx(Pn,{status:"VALID",size:"sm"}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginTop:"0.125rem"},children:w.licenseExpiryDate?`Exp: ${Ze(new Date(w.licenseExpiryDate),"MMM dd, yyyy")}`:""})]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8125rem"},children:"-"})}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>t(`/customers/${w.id}/edit`),title:"Edit Customer",children:e.jsx(Ha,{size:14})})})})]},w.id))})]})}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No customers found",message:"Add your first customer to get started",icon:"package"})})]})]})}function an(t){return t?t.response?.data?.error?t.response.data.error:t.response?.data?.message?{code:"UNKNOWN",message:t.response.data.message,userMessage:t.response.data.message}:t.message?{code:"NETWORK_ERROR",message:t.message,userMessage:"Unable to connect to the server. Please check your connection and try again."}:{code:"UNKNOWN",message:"An unknown error occurred",userMessage:"Something went wrong. Please try again."}:null}const nP={CR:"Commercial Registration",TAX_CERT:"Tax Certificate",LICENSE:"License",CONTRACT:"Contract",NDA:"Non-Disclosure Agreement",OTHER:"Other"},iP=5*1024*1024;function aP(){const{id:t}=hl(),r=Qr(),n=pr(),i=gn(),a=!!t,[s,o]=k.useState({code:"",nameEn:"",nameAr:"",email:"",mobile:"",phone:"",crNumber:"",taxNumber:"",fullAddress:"",shortAddress:"",buildingNo:"",street:"",secondaryNo:"",district:"",postalCode:"",countryId:"",regionId:"",cityId:"",categoryId:"",latitude:"",longitude:"",licenseNumber:"",licenseExpiryDate:"",travelTimeMinutes:60}),[l,u]=k.useState({}),[d,f]=k.useState(null),[p,x]=k.useState(!1),[v,w]=k.useState(!1),[C,N]=k.useState("CR"),T=k.useRef(null),O=k.useRef(null),{data:D,isLoading:M}=Ve({queryKey:["customer",t],queryFn:async()=>{const{data:$}=await xe.get(`/customers/${t}`);return $},enabled:a}),{data:Y}=Ve({queryKey:["settings","countries"],queryFn:async()=>{const{data:$}=await xe.get("/settings/countries");return $}}),{data:q}=Ve({queryKey:["settings","regions",s.countryId],queryFn:async()=>{const $=s.countryId?{countryId:s.countryId}:{},{data:X}=await xe.get("/settings/regions",{params:$});return X}}),{data:W}=Ve({queryKey:["settings","cities",s.regionId],queryFn:async()=>{const $=s.regionId?{regionId:s.regionId}:{},{data:X}=await xe.get("/settings/cities",{params:$});return X},enabled:!!s.regionId}),{data:J}=Ve({queryKey:["settings","categories"],queryFn:async()=>{const{data:$}=await xe.get("/settings/categories");return $}});k.useEffect(()=>{if(D)o({code:D.code||"",nameEn:D.nameEn||D.name||"",nameAr:D.nameAr||"",email:D.email||"",mobile:D.mobile||D.phone||"",phone:D.phone||"",crNumber:D.crNumber||"",taxNumber:D.taxNumber||"",fullAddress:D.fullAddress||D.address||"",shortAddress:D.shortAddress||"",buildingNo:D.buildingNo||"",street:D.street||"",secondaryNo:D.secondaryNo||"",district:D.district||"",postalCode:D.postalCode||"",countryId:D.countryId||"",regionId:D.regionId||"",cityId:D.cityId||"",categoryId:D.categoryId||"",latitude:D.latitude?.toString()||"",longitude:D.longitude?.toString()||"",licenseNumber:D.licenseNumber||"",licenseExpiryDate:D.licenseExpiryDate?.split("T")[0]||"",travelTimeMinutes:D.travelTimeMinutes||60}),D.logoUrl&&f(D.logoUrl);else if(!a&&Y?.length>0){const $=Y.find(X=>X.code==="SA");$&&o(X=>({...X,countryId:$.id}))}},[D,Y,a]);const z=()=>{const $={};if(s.code.trim()||($.code="Customer code is required"),s.nameEn.trim()||($.nameEn="English name is required"),s.nameAr.trim()||($.nameAr="Arabic name is required"),!s.mobile.trim())$.mobile="Mobile number is required";else{const X=/^(\+9665|05)\d{8}$/,se=/^\+\d{10,15}$/;!X.test(s.mobile)&&!se.test(s.mobile)&&($.mobile="Enter a valid Saudi mobile number (e.g., 05xxxxxxxx or +9665xxxxxxxx)")}if(s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&($.email="Enter a valid email address"),s.crNumber.trim()||($.crNumber="Commercial Registration number is required"),s.taxNumber.trim()||($.taxNumber="Tax number is required"),s.fullAddress.trim()||($.fullAddress="Full address is required"),s.shortAddress.trim()?/^[A-Z]{4}\d{4}$/.test(s.shortAddress.trim())||($.shortAddress="Format: 4 letters + 4 digits (e.g., JERA4240)"):$.shortAddress="Short address is required (e.g., ABCD1234)",s.buildingNo.trim()||($.buildingNo="Building number is required"),s.street.trim()||($.street="Street name is required"),s.secondaryNo.trim()||($.secondaryNo="Secondary number is required"),s.district.trim()||($.district="District is required"),s.postalCode.trim()?/^\d{5}$/.test(s.postalCode.trim())||($.postalCode="Postal code must be 5 digits"):$.postalCode="Postal code is required",s.cityId||($.cityId="City is required"),s.latitude){const X=parseFloat(s.latitude);(isNaN(X)||X<-90||X>90)&&($.latitude="Latitude must be between -90 and 90")}if(s.longitude){const X=parseFloat(s.longitude);(isNaN(X)||X<-180||X>180)&&($.longitude="Longitude must be between -180 and 180")}return u($),Object.keys($).length===0},G=ot({mutationFn:async $=>a?xe.put(`/customers/${t}`,$):xe.post("/customers",$),onSuccess:()=>{n.invalidateQueries({queryKey:["customers"]}),i.success(a?"Customer Updated":"Customer Created",a?"Customer details have been updated":"New customer has been added"),r("/customers")},onError:$=>{const X=an($);i.error("Error",X?.userMessage||"Failed to save customer")}}),ne=($,X=!0)=>{if($.preventDefault(),!z()){i.error("Validation Error","Please fix the errors in the form");return}G.mutate(s)},Z=async $=>{if(!a){i.error("Error","Please save the customer first before uploading a logo");return}if(!["image/png","image/jpeg","image/jpg"].includes($.type)){i.error("Invalid File Type","Only PNG and JPG images are allowed");return}if($.size>iP){i.error("File Too Large","File exceeds 5 MB. Please upload a smaller file.");return}x(!0);const X=new FormData;X.append("logo",$);try{const{data:se}=await xe.post(`/customers/${t}/logo`,X,{headers:{"Content-Type":"multipart/form-data"}});f(se.logoUrl),n.invalidateQueries({queryKey:["customer",t]}),i.success("Logo Uploaded","Customer logo has been updated")}catch(se){const H=an(se);i.error("Upload Failed",H?.userMessage||"Failed to upload logo")}finally{x(!1)}},ie=async()=>{if(a)try{await xe.delete(`/customers/${t}/logo`),f(null),n.invalidateQueries({queryKey:["customer",t]}),i.success("Logo Removed","Customer logo has been removed")}catch{i.error("Error","Failed to remove logo")}},me=async $=>{if(!a){i.error("Error","Please save the customer first before uploading documents");return}if(!["image/png","image/jpeg","image/jpg","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes($.type)){i.error("Invalid File Type","Allowed: PDF, PNG, JPG, DOCX");return}if($.size>iP){i.error("File Too Large","File exceeds 5 MB. Please upload a smaller document.");return}w(!0);const se=new FormData;se.append("document",$),se.append("docType",C);try{await xe.post(`/customers/${t}/documents`,se,{headers:{"Content-Type":"multipart/form-data"}}),n.invalidateQueries({queryKey:["customer",t]}),i.success("Document Uploaded","Document has been added")}catch(H){const oe=an(H);i.error("Upload Failed",oe?.userMessage||"Failed to upload document")}finally{w(!1)}},ce=async $=>{if(confirm("Are you sure you want to delete this document?"))try{await xe.delete(`/customers/${t}/documents/${$}`),n.invalidateQueries({queryKey:["customer",t]}),i.success("Document Deleted","Document has been removed")}catch{i.error("Error","Failed to delete document")}},Q=$=>$<1024?`${$} B`:$<1024*1024?`${($/1024).toFixed(1)} KB`:`${($/(1024*1024)).toFixed(1)} MB`,de=($,X)=>{o(se=>({...se,[$]:X})),l[$]&&u(se=>({...se,[$]:""}))},le=$=>{o(X=>({...X,countryId:$,regionId:"",cityId:""}))},ye=$=>{o(X=>({...X,regionId:$,cityId:""}))};if(M&&a)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const Se=Object.keys(l).filter($=>l[$]).length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>r("/customers"),children:e.jsx(aa,{size:16})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:a?"Edit Customer":"Create New Customer"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:a?"Update customer information and documents":"Add a new customer to the system"})]})]}),Se>0&&e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"var(--danger)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)"},children:[e.jsx(sn,{size:18}),e.jsxs("span",{style:{fontWeight:500},children:["Please fix ",Se," error(s) before saving"]})]})}),e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(Uo,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Basic Information"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Customer Code *"}),e.jsx("input",{type:"text",className:`form-input ${l.code?"error":""}`,value:s.code,onChange:$=>de("code",$.target.value),placeholder:"e.g., CUST001",disabled:a}),l.code&&e.jsx("span",{className:"form-error",children:l.code})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsxs("select",{className:"form-select",value:s.categoryId,onChange:$=>de("categoryId",$.target.value),children:[e.jsx("option",{value:"",children:"Select Category"}),J?.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (English) *"}),e.jsx("input",{type:"text",className:`form-input ${l.nameEn?"error":""}`,value:s.nameEn,onChange:$=>de("nameEn",$.target.value),placeholder:"Customer name in English"}),l.nameEn&&e.jsx("span",{className:"form-error",children:l.nameEn})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic) *  "}),e.jsx("input",{type:"text",className:`form-input ${l.nameAr?"error":""}`,value:s.nameAr,onChange:$=>de("nameAr",$.target.value),placeholder:" ",dir:"rtl"}),l.nameAr&&e.jsx("span",{className:"form-error",children:l.nameAr})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:`form-input ${l.email?"error":""}`,value:s.email,onChange:$=>de("email",$.target.value),placeholder:"customer@example.com"}),l.email&&e.jsx("span",{className:"form-error",children:l.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mobile Number *"}),e.jsx("input",{type:"tel",className:`form-input ${l.mobile?"error":""}`,value:s.mobile,onChange:$=>de("mobile",$.target.value),placeholder:"05xxxxxxxx or +9665xxxxxxxx"}),l.mobile&&e.jsx("span",{className:"form-error",children:l.mobile})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Phone (Landline)"}),e.jsx("input",{type:"tel",className:"form-input",value:s.phone,onChange:$=>de("phone",$.target.value),placeholder:"Optional"})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(Ea,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Address & Location"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Full Address *"}),e.jsx("textarea",{className:`form-textarea ${l.fullAddress?"error":""}`,value:s.fullAddress,onChange:$=>de("fullAddress",$.target.value),rows:3,placeholder:"Enter complete street address, building name, landmarks...",style:{width:"100%",resize:"vertical"}}),l.fullAddress&&e.jsx("span",{className:"form-error",children:l.fullAddress})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1rem",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(Ea,{size:16,style:{color:"var(--primary)"}}),e.jsx("h4",{style:{fontSize:"0.8125rem",fontWeight:600,margin:0,color:"var(--text-primary)"},children:"Saudi National Address"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Short Address *"}),e.jsx("input",{type:"text",className:`form-input ${l.shortAddress?"error":""}`,value:s.shortAddress,onChange:$=>de("shortAddress",$.target.value.toUpperCase()),placeholder:"ABCD1234",maxLength:8}),l.shortAddress&&e.jsx("span",{className:"form-error",children:l.shortAddress})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Building No. *"}),e.jsx("input",{type:"text",className:`form-input ${l.buildingNo?"error":""}`,value:s.buildingNo,onChange:$=>de("buildingNo",$.target.value),placeholder:"e.g., 4240"}),l.buildingNo&&e.jsx("span",{className:"form-error",children:l.buildingNo})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Street *"}),e.jsx("input",{type:"text",className:`form-input ${l.street?"error":""}`,value:s.street,onChange:$=>de("street",$.target.value),placeholder:"e.g., Muhammad Ali Maghrebi"}),l.street&&e.jsx("span",{className:"form-error",children:l.street})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Secondary No. *"}),e.jsx("input",{type:"text",className:`form-input ${l.secondaryNo?"error":""}`,value:s.secondaryNo,onChange:$=>de("secondaryNo",$.target.value),placeholder:"e.g., 9014"}),l.secondaryNo&&e.jsx("span",{className:"form-error",children:l.secondaryNo})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"District *"}),e.jsx("input",{type:"text",className:`form-input ${l.district?"error":""}`,value:s.district,onChange:$=>de("district",$.target.value),placeholder:"e.g., Ar Rawdah Dist."}),l.district&&e.jsx("span",{className:"form-error",children:l.district})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Postal Code *"}),e.jsx("input",{type:"text",className:`form-input ${l.postalCode?"error":""}`,value:s.postalCode,onChange:$=>de("postalCode",$.target.value),placeholder:"e.g., 23434",maxLength:5}),l.postalCode&&e.jsx("span",{className:"form-error",children:l.postalCode})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Country"}),e.jsxs("select",{className:"form-select",value:s.countryId,onChange:$=>le($.target.value),children:[e.jsx("option",{value:"",children:"Select Country"}),Y?.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Region"}),e.jsxs("select",{className:"form-select",value:s.regionId,onChange:$=>ye($.target.value),disabled:!s.countryId,children:[e.jsx("option",{value:"",children:"Select Region"}),q?.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"City *"}),e.jsxs("select",{className:`form-select ${l.cityId?"error":""}`,value:s.cityId,onChange:$=>de("cityId",$.target.value),disabled:!s.regionId,children:[e.jsx("option",{value:"",children:"Select City"}),W?.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]}),l.cityId&&e.jsx("span",{className:"form-error",children:l.cityId})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Latitude"}),e.jsx("input",{type:"number",step:"any",className:`form-input ${l.latitude?"error":""}`,value:s.latitude,onChange:$=>de("latitude",$.target.value),placeholder:"-90 to 90"}),l.latitude&&e.jsx("span",{className:"form-error",children:l.latitude})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Longitude"}),e.jsx("input",{type:"number",step:"any",className:`form-input ${l.longitude?"error":""}`,value:s.longitude,onChange:$=>de("longitude",$.target.value),placeholder:"-180 to 180"}),l.longitude&&e.jsx("span",{className:"form-error",children:l.longitude})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Travel Time (min)"}),e.jsx("input",{type:"number",className:"form-input",value:s.travelTimeMinutes,onChange:$=>de("travelTimeMinutes",parseInt($.target.value)||60),min:0})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(Mp,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Business Identifiers"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Commercial Registration (CR) *"}),e.jsx("input",{type:"text",className:`form-input ${l.crNumber?"error":""}`,value:s.crNumber,onChange:$=>de("crNumber",$.target.value),placeholder:"e.g., 1010xxxxxx"}),l.crNumber&&e.jsx("span",{className:"form-error",children:l.crNumber})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tax Number (VAT) *"}),e.jsx("input",{type:"text",className:`form-input ${l.taxNumber?"error":""}`,value:s.taxNumber,onChange:$=>de("taxNumber",$.target.value),placeholder:"e.g., 3xxxxxxxxxxxxxxx"}),l.taxNumber&&e.jsx("span",{className:"form-error",children:l.taxNumber})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"License Number"}),e.jsx("input",{type:"text",className:"form-input",value:s.licenseNumber,onChange:$=>de("licenseNumber",$.target.value),placeholder:"Operating license number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"License Expiry Date"}),e.jsx("input",{type:"date",className:"form-input",value:s.licenseExpiryDate,onChange:$=>de("licenseExpiryDate",$.target.value)})]})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(Rv,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Branding"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"120px",height:"120px",border:"2px dashed var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-secondary)",overflow:"hidden"},children:d?e.jsx("img",{src:d,alt:"Customer Logo",style:{width:"100%",height:"100%",objectFit:"contain"}}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:[e.jsx(Rv,{size:32}),e.jsx("p",{style:{fontSize:"0.75rem",margin:"0.5rem 0 0"},children:"No logo"})]})}),e.jsx("input",{ref:T,type:"file",accept:"image/png,image/jpeg,image/jpg",style:{display:"none"},onChange:$=>$.target.files?.[0]&&Z($.target.files[0])}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",className:"btn btn-outline btn-sm",onClick:()=>T.current?.click(),disabled:!a||p,children:p?"Uploading...":e.jsxs(e.Fragment,{children:[e.jsx(om,{size:14})," Upload"]})}),d&&e.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:ie,children:e.jsx(ra,{size:14})})]}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center",margin:0},children:["PNG or JPG, max 5MB",!a&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Save customer first"]})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(gu,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Documents"})]}),a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("select",{className:"form-select",value:C,onChange:$=>N($.target.value),style:{flex:1},children:Object.entries(nP).map(([$,X])=>e.jsx("option",{value:$,children:X},$))}),e.jsx("input",{ref:O,type:"file",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",style:{display:"none"},onChange:$=>$.target.files?.[0]&&me($.target.files[0])}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>O.current?.click(),disabled:v,children:v?"Uploading...":e.jsxs(e.Fragment,{children:[e.jsx(om,{size:14})," Add"]})})]}),D?.documents?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:D.documents.map($=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(Pr,{size:20,style:{color:"var(--primary)",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.8125rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:$.docName}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("span",{className:"badge badge-default",style:{fontSize:"0.625rem"},children:nP[$.docType]||$.docType}),e.jsx("span",{children:Q($.fileSizeBytes)}),e.jsx("span",{children:Ze(new Date($.uploadedAt),"MMM dd, yyyy")})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("a",{href:$.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline btn-sm",style:{padding:"0.25rem"},children:e.jsx(Xp,{size:14})}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm",style:{padding:"0.25rem"},onClick:()=>ce($.id),children:e.jsx(kr,{size:14})})]})]},$.id))}):e.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"var(--text-muted)"},children:[e.jsx(Pr,{size:32,style:{opacity:.5}}),e.jsx("p",{style:{fontSize:"0.875rem",margin:"0.5rem 0 0"},children:"No documents uploaded"})]})]}):e.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"var(--text-muted)"},children:[e.jsx(Pr,{size:32,style:{opacity:.5}}),e.jsx("p",{style:{fontSize:"0.875rem",margin:"0.5rem 0 0"},children:"Save customer first to upload documents"})]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center",marginTop:"0.75rem"},children:"PDF, PNG, JPG, DOCX - Max 5MB each"})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1rem 1.5rem",marginTop:"1.5rem",display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>r("/customers"),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:G.isPending,children:[e.jsx(lc,{size:16}),G.isPending?"Saving...":a?"Update Customer":"Create Customer"]})]})]})]})}let L2e={data:""},z2e=t=>{if(typeof window=="object"){let r=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(t||document.head).appendChild(r),r.firstChild}return t||L2e},B2e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,F2e=/\/\*[^]*?\*\/|  +/g,sP=/\n+/g,Xh=(t,r)=>{let n="",i="",a="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":i+=s[1]=="f"?Xh(o,s):s+"{"+Xh(o,s[1]=="k"?"":r)+"}":typeof o=="object"?i+=Xh(o,r?r.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Xh.p?Xh.p(s,o):s+":"+o+";")}return n+(r&&a?r+"{"+a+"}":a)+i},zu={},JU=t=>{if(typeof t=="object"){let r="";for(let n in t)r+=n+JU(t[n]);return r}return t},q2e=(t,r,n,i,a)=>{let s=JU(t),o=zu[s]||(zu[s]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(s));if(!zu[o]){let u=s!==t?t:(d=>{let f,p,x=[{}];for(;f=B2e.exec(d.replace(F2e,""));)f[4]?x.shift():f[3]?(p=f[3].replace(sP," ").trim(),x.unshift(x[0][p]=x[0][p]||{})):x[0][f[1]]=f[2].replace(sP," ").trim();return x[0]})(t);zu[o]=Xh(a?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&zu.g?zu.g:null;return n&&(zu.g=zu[o]),((u,d,f,p)=>{p?d.data=d.data.replace(p,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(zu[o],r,i,l),o},U2e=(t,r,n)=>t.reduce((i,a,s)=>{let o=r[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Xh(l,""):l===!1?"":l}return i+a+(o??"")},"");function tj(t){let r=this||{},n=t.call?t(r.p):t;return q2e(n.unshift?n.raw?U2e(n,[].slice.call(arguments,1),r.p):n.reduce((i,a)=>Object.assign(i,a&&a.call?a(r.p):a),{}):n,z2e(r.target),r.g,r.o,r.k)}let eW,JN,eA;tj.bind({g:1});let fh=tj.bind({k:1});function W2e(t,r,n,i){Xh.p=r,eW=t,JN=n,eA=i}function vf(t,r){let n=this||{};return function(){let i=arguments;function a(s,o){let l=Object.assign({},s),u=l.className||a.className;n.p=Object.assign({theme:JN&&JN()},l),n.o=/ *go\d+/.test(u),l.className=tj.apply(n,i)+(u?" "+u:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),eA&&d[0]&&eA(l),eW(d,l)}return a}}var H2e=t=>typeof t=="function",tA=(t,r)=>H2e(t)?t(r):t,V2e=(()=>{let t=0;return()=>(++t).toString()})(),$2e=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),G2e=20,tW="default",rW=(t,r)=>{let{toastLimit:n}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===r.toast.id?{...o,...r.toast}:o)};case 2:let{toast:i}=r;return rW(t,{type:t.toasts.find(o=>o.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=r;return{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let s=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},K2e=[],Q2e={toasts:[],pausedAt:void 0,settings:{toastLimit:G2e}},Ip={},nW=(t,r=tW)=>{Ip[r]=rW(Ip[r]||Q2e,t),K2e.forEach(([n,i])=>{n===r&&i(Ip[r])})},iW=t=>Object.keys(Ip).forEach(r=>nW(t,r)),Y2e=t=>Object.keys(Ip).find(r=>Ip[r].toasts.some(n=>n.id===t)),K_=(t=tW)=>r=>{nW(r,t)},Z2e=(t,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||V2e()}),Uy=t=>(r,n)=>{let i=Z2e(r,t,n);return K_(i.toasterId||Y2e(i.id))({type:2,toast:i}),i.id},dl=(t,r)=>Uy("blank")(t,r);dl.error=Uy("error");dl.success=Uy("success");dl.loading=Uy("loading");dl.custom=Uy("custom");dl.dismiss=(t,r)=>{let n={type:3,toastId:t};r?K_(r)(n):iW(n)};dl.dismissAll=t=>dl.dismiss(void 0,t);dl.remove=(t,r)=>{let n={type:4,toastId:t};r?K_(r)(n):iW(n)};dl.removeAll=t=>dl.remove(void 0,t);dl.promise=(t,r,n)=>{let i=dl.loading(r.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let s=r.success?tA(r.success,a):void 0;return s?dl.success(s,{id:i,...n,...n?.success}):dl.dismiss(i),a}).catch(a=>{let s=r.error?tA(r.error,a):void 0;s?dl.error(s,{id:i,...n,...n?.error}):dl.dismiss(i)}),t};var X2e=fh`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,J2e=fh`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,eje=fh`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,tje=vf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${X2e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${J2e} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${eje} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,rje=fh`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,nje=vf("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${rje} 1s linear infinite;
`,ije=fh`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,aje=fh`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,sje=vf("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ije} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${aje} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,oje=vf("div")`
  position: absolute;
`,lje=vf("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,cje=fh`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dje=vf("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${cje} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,uje=({toast:t})=>{let{icon:r,type:n,iconTheme:i}=t;return r!==void 0?typeof r=="string"?k.createElement(dje,null,r):r:n==="blank"?null:k.createElement(lje,null,k.createElement(nje,{...i}),n!=="loading"&&k.createElement(oje,null,n==="error"?k.createElement(tje,{...i}):k.createElement(sje,{...i})))},hje=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fje=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,mje="0%{opacity:0;} 100%{opacity:1;}",pje="0%{opacity:1;} 100%{opacity:0;}",gje=vf("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,yje=vf("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xje=(t,r)=>{let n=t.includes("top")?1:-1,[i,a]=$2e()?[mje,pje]:[hje(n),fje(n)];return{animation:r?`${fh(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${fh(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};k.memo(({toast:t,position:r,style:n,children:i})=>{let a=t.height?xje(t.position||r||"top-center",t.visible):{opacity:0},s=k.createElement(uje,{toast:t}),o=k.createElement(yje,{...t.ariaProps},tA(t.message,t));return k.createElement(gje,{className:t.className,style:{...a,...n,...t.style}},typeof i=="function"?i({icon:s,message:o}):k.createElement(k.Fragment,null,s,o))});W2e(k.createElement);tj`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var $i=dl;function vje(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}function bje(t){return t.startsWith("image/")?Rv:t.includes("pdf")?Pr:rz}function mc({entityType:t,entityId:r,title:n="Attachments",readOnly:i=!1}){const a=pr(),s=k.useRef(null),[o,l]=k.useState(!1),[u,d]=k.useState(""),{data:f,isLoading:p}=Ve({queryKey:["attachments",t,r],queryFn:async()=>{const{data:N}=await xe.get(`/attachments/${t}/${r}`);return N},enabled:!!r}),{data:x}=Ve({queryKey:["attachment-allowed"],queryFn:async()=>{const{data:N}=await xe.get("/attachments/allowed-extensions");return N}}),v=ot({mutationFn:async N=>{await xe.delete(`/attachments/${N}`)},onSuccess:()=>{a.invalidateQueries({queryKey:["attachments",t,r]}),$i.success("Attachment deleted")},onError:()=>{$i.error("Failed to delete attachment")}}),w=async N=>{const T=N.target.files?.[0];if(!T)return;const O=(x?.maxSizeMB||5)*1024*1024;if(T.size>O){$i.error(`File too large. Maximum size is ${x?.maxSizeMB||5} MB`);return}if(x?.extensions&&x.extensions.length>0){const D=T.name.split(".").pop()?.toLowerCase()||"";if(!x.extensions.includes(D)){$i.error(`File type .${D} is not allowed`);return}}l(!0);try{const D=new FormData;D.append("file",T),u&&D.append("description",u),await xe.post(`/attachments/${t}/${r}`,D,{headers:{"Content-Type":"multipart/form-data"}}),a.invalidateQueries({queryKey:["attachments",t,r]}),$i.success("File uploaded"),d("")}catch(D){$i.error(D.response?.data?.error||"Upload failed")}finally{l(!1),s.current&&(s.current.value="")}},C=async N=>{try{const T=await xe.get(`/attachments/download/${N.id}`,{responseType:"blob"}),O=window.URL.createObjectURL(new Blob([T.data])),D=document.createElement("a");D.href=O,D.setAttribute("download",N.originalName),document.body.appendChild(D),D.click(),D.remove(),window.URL.revokeObjectURL(O)}catch{$i.error("Failed to download file")}};return e.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",border:"1px solid var(--border)",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ah,{size:18}),e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:600},children:n}),f&&f.length>0&&e.jsx("span",{style:{background:"var(--primary)",color:"white",padding:"0.125rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:f.length})]})}),e.jsxs("div",{style:{padding:"1rem"},children:[!i&&e.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",border:"2px dashed var(--border)",borderRadius:"8px",background:"var(--bg-secondary)"},children:[e.jsx("input",{ref:s,type:"file",onChange:w,disabled:o,style:{display:"none"},id:`file-upload-${t}-${r}`}),e.jsx("div",{style:{marginBottom:"0.75rem"},children:e.jsx("input",{type:"text",value:u,onChange:N=>d(N.target.value),placeholder:"Description (optional)",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}})}),e.jsxs("label",{htmlFor:`file-upload-${t}-${r}`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"var(--primary)",color:"white",borderRadius:"8px",cursor:o?"not-allowed":"pointer",opacity:o?.6:1},children:[e.jsx(om,{size:18}),o?"Uploading...":"Choose File to Upload"]}),x?.extensions&&x.extensions.length>0&&e.jsxs("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center"},children:["Allowed: ",x.extensions.map(N=>`.${N}`).join(", ")," (max ",x.maxSizeMB,"MB)"]}),(!x?.extensions||x.extensions.length===0)&&e.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center"},children:"Max file size: 5MB"})]}),p?e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"Loading attachments..."}):f?.length===0?e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem 1rem"},children:[e.jsx(ah,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),e.jsx("p",{style:{margin:0},children:"No attachments yet"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:f?.map(N=>{const T=bje(N.mimeType);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border)"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(T,{size:20})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:N.originalName}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("span",{children:vje(N.fileSize)}),e.jsxs("span",{children:[N.uploadedBy.firstName," ",N.uploadedBy.lastName]}),e.jsx("span",{children:Ze(new Date(N.createdAt),"MMM d, HH:mm")})]}),N.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:N.description})]}),e.jsxs("div",{style:{display:"flex",gap:"0.375rem"},children:[e.jsx("button",{onClick:()=>C(N),style:{padding:"0.375rem",background:"none",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer"},title:"Download",children:e.jsx(Xp,{size:16})}),!i&&e.jsx("button",{onClick:()=>{confirm("Delete this attachment?")&&v.mutate(N.id)},style:{padding:"0.375rem",background:"none",border:"1px solid #ef4444",borderRadius:"6px",cursor:"pointer",color:"#ef4444"},title:"Delete",children:e.jsx(ra,{size:16})})]})]},N.id)})})]})]})}function jje(){const[t,r]=k.useState(!1),[n,i]=k.useState(null),[a,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(""),x=pr(),v=gn(),{data:w,isLoading:C}=Ve({queryKey:["products"],queryFn:async()=>{const{data:q}=await xe.get("/products");return q}}),N=ot({mutationFn:async q=>n?xe.put(`/products/${n.id}`,q):xe.post("/products",q),onSuccess:()=>{x.invalidateQueries({queryKey:["products"]}),r(!1),i(null),v.success(n?"Product Updated":"Product Created",n?"Product details have been updated":"New product has been added")},onError:q=>{const W=an(q);v.error("Error",W?.userMessage||"Failed to save product")}}),T=q=>{q.preventDefault();const W=new FormData(q.currentTarget);N.mutate({name:W.get("name"),code:W.get("code"),productType:W.get("productType"),radionuclide:W.get("radionuclide"),halfLifeMinutes:parseFloat(W.get("halfLifeMinutes")),shelfLifeMinutes:parseFloat(W.get("shelfLifeMinutes")),standardDose:parseFloat(W.get("standardDose"))||null,doseUnit:W.get("doseUnit"),productionMethod:W.get("productionMethod"),synthesisTimeMinutes:parseInt(W.get("synthesisTimeMinutes")),qcTimeMinutes:parseInt(W.get("qcTimeMinutes")),packagingTimeMinutes:parseInt(W.get("packagingTimeMinutes")),overagePercent:parseFloat(W.get("overagePercent"))})},O=q=>{if(q>=60){const W=Math.floor(q/60),J=q%60;return J>0?`${W}h ${J}m`:`${W}h`}return`${q}m`},D=w?.filter(q=>{if(o&&q.productType!==o||u&&q.productionMethod!==u)return!1;if(f){const W=f.toLowerCase();return q.name.toLowerCase().includes(W)||q.code.toLowerCase().includes(W)||q.radionuclide.toLowerCase().includes(W)}return!0})||[],M={total:w?.length||0,pet:w?.filter(q=>q.productType==="PET").length||0,spect:w?.filter(q=>q.productType==="SPECT").length||0,therapy:w?.filter(q=>q.productType==="THERAPY").length||0},Y=q=>{switch(q){case"PET":return{bg:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"};case"SPECT":return{bg:"rgba(34, 197, 94, 0.1)",color:"var(--success)"};case"THERAPY":return{bg:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"};default:return{bg:"rgba(100, 116, 139, 0.1)",color:"var(--text-muted)"}}};return C?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Product Catalog"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage radiopharmaceutical products with decay properties and production times"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>r(!0),children:[e.jsx(cn,{size:16})," Add Product"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Products",value:M.total,icon:e.jsx(Rr,{size:20}),color:"primary",onClick:()=>l(""),active:!o}),e.jsx(st,{title:"PET Products",value:M.pet,icon:e.jsx(ou,{size:20}),color:"info",onClick:()=>l(o==="PET"?"":"PET"),active:o==="PET"}),e.jsx(st,{title:"SPECT Products",value:M.spect,icon:e.jsx(Mc,{size:20}),color:"success",onClick:()=>l(o==="SPECT"?"":"SPECT"),active:o==="SPECT"}),e.jsx(st,{title:"Therapy Products",value:M.therapy,icon:e.jsx(Lp,{size:20}),color:"warning",onClick:()=>l(o==="THERAPY"?"":"THERAPY"),active:o==="THERAPY"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search by name, code, or isotope...",value:f,onChange:q=>p(q.target.value),style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:o,onChange:q=>l(q.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"PET",children:"PET"}),e.jsx("option",{value:"SPECT",children:"SPECT"}),e.jsx("option",{value:"THERAPY",children:"Therapy"})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"160px"},value:u,onChange:q=>d(q.target.value),children:[e.jsx("option",{value:"",children:"All Methods"}),e.jsx("option",{value:"CYCLOTRON",children:"Cyclotron"}),e.jsx("option",{value:"GENERATOR",children:"Generator"}),e.jsx("option",{value:"KIT",children:"Kit"})]}),(o||u||f)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{l(""),d(""),p("")},children:[e.jsx(kr,{size:14})," Clear"]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:a?"1fr 380px":"1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:D.map(q=>{const W=Y(q.productType),J=a?.id===q.id;return e.jsxs("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:J?"2px solid var(--primary)":"1px solid var(--border)",transition:"all 0.2s"},onClick:()=>s(q),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:W.bg,color:W.color,fontWeight:600},children:q.productType}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:z=>{z.stopPropagation(),i(q),r(!0)},children:e.jsx(Ha,{size:14})})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"1rem"},children:q.name}),e.jsxs("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontFamily:"monospace"},children:q.code}),"  ",q.radionuclide]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8125rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Qt,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["T: ",O(q.halfLifeMinutes)]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(vp,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["Shelf: ",O(q.shelfLifeMinutes)]})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("span",{className:"badge badge-default",style:{fontSize:"0.6875rem"},children:q.productionMethod}),e.jsxs("span",{style:{opacity:.7},children:[q.synthesisTimeMinutes+q.qcTimeMinutes+q.packagingTimeMinutes,"m total production"]})]})]},q.id)})}),D.length===0&&e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{title:"No products found",message:f||o||u?"Try adjusting your filters":"Add your first product to get started",icon:"package"})})]}),a&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:Y(a.productType).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:Y(a.productType).color,color:"white",marginBottom:"0.5rem"},children:a.productType}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:"0.5rem 0 0.25rem"},children:a.name}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0},children:a.code})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>s(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Isotope Properties"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(ou,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Radionuclide"})]}),e.jsx("div",{style:{fontWeight:600},children:a.radionuclide})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(Qt,{size:14,style:{color:"var(--warning)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Half-Life"})]}),e.jsx("div",{style:{fontWeight:600},children:O(a.halfLifeMinutes)})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(vp,{size:14,style:{color:"var(--success)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Shelf Life"})]}),e.jsx("div",{style:{fontWeight:600},children:O(a.shelfLifeMinutes)})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(dc,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Std. Dose"})]}),e.jsxs("div",{style:{fontWeight:600},children:[a.standardDose||"-"," ",a.doseUnit]})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Production Details"}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(sa,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Production Method"})]}),e.jsx("div",{style:{fontWeight:600},children:a.productionMethod})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"Synthesis Time"}),e.jsxs("span",{style:{fontWeight:600},children:[a.synthesisTimeMinutes," min"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"QC Testing Time"}),e.jsxs("span",{style:{fontWeight:600},children:[a.qcTimeMinutes," min"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"Packaging Time"}),e.jsxs("span",{style:{fontWeight:600},children:[a.packagingTimeMinutes," min"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",background:"var(--primary)",color:"white",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"Total Production"}),e.jsxs("span",{style:{fontWeight:600},children:[a.synthesisTimeMinutes+a.qcTimeMinutes+a.packagingTimeMinutes," min"]})]})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Overage Factor"}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(234, 179, 8, 0.1)",borderRadius:"var(--radius)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"Decay compensation"}),e.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["+",a.overagePercent,"%"]})]})]}),a.qcTemplates?.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:["QC Tests (",a.qcTemplates.length,")"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.375rem"},children:a.qcTemplates.map(q=>e.jsx("span",{className:"badge badge-default",style:{fontSize:"0.6875rem"},children:q.testName},q.id))})]}),e.jsx("div",{style:{marginTop:"1.25rem",marginBottom:"1rem"},children:e.jsx(mc,{entityType:"PRODUCT",entityId:a.id,title:"Product Documents"})}),e.jsxs("button",{className:"btn btn-primary",style:{width:"100%"},onClick:()=>{i(a),r(!0)},children:[e.jsx(Ha,{size:16})," Edit Product"]})]})]})]}),t&&e.jsx("div",{className:"modal-overlay",onClick:()=>r(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"40rem"},onClick:q=>q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:n?"Edit Product":"Add Product"}),e.jsx("button",{onClick:()=>{r(!1),i(null)},style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:T,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{name:"code",className:"form-input",defaultValue:n?.code,required:!0,disabled:!!n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{name:"name",className:"form-input",defaultValue:n?.name,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Product Type"}),e.jsxs("select",{name:"productType",className:"form-select",defaultValue:n?.productType||"PET",required:!0,children:[e.jsx("option",{value:"PET",children:"PET"}),e.jsx("option",{value:"SPECT",children:"SPECT"}),e.jsx("option",{value:"THERAPY",children:"THERAPY"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Production Method"}),e.jsxs("select",{name:"productionMethod",className:"form-select",defaultValue:n?.productionMethod||"CYCLOTRON",required:!0,children:[e.jsx("option",{value:"CYCLOTRON",children:"Cyclotron"}),e.jsx("option",{value:"GENERATOR",children:"Generator"}),e.jsx("option",{value:"KIT",children:"Kit"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Radionuclide"}),e.jsx("input",{name:"radionuclide",className:"form-input",defaultValue:n?.radionuclide,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Half-Life (minutes)"}),e.jsx("input",{name:"halfLifeMinutes",type:"number",step:"0.1",className:"form-input",defaultValue:n?.halfLifeMinutes,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Shelf Life (minutes)"}),e.jsx("input",{name:"shelfLifeMinutes",type:"number",className:"form-input",defaultValue:n?.shelfLifeMinutes,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Standard Dose"}),e.jsx("input",{name:"standardDose",type:"number",step:"0.1",className:"form-input",defaultValue:n?.standardDose})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Dose Unit"}),e.jsxs("select",{name:"doseUnit",className:"form-select",defaultValue:n?.doseUnit||"mCi",children:[e.jsx("option",{value:"mCi",children:"mCi"}),e.jsx("option",{value:"GBq",children:"GBq"}),e.jsx("option",{value:"MBq",children:"MBq"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Overage %"}),e.jsx("input",{name:"overagePercent",type:"number",step:"0.1",className:"form-input",defaultValue:n?.overagePercent||10,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Synthesis Time (min)"}),e.jsx("input",{name:"synthesisTimeMinutes",type:"number",className:"form-input",defaultValue:n?.synthesisTimeMinutes||45,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"QC Time (min)"}),e.jsx("input",{name:"qcTimeMinutes",type:"number",className:"form-input",defaultValue:n?.qcTimeMinutes||30,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Packaging Time (min)"}),e.jsx("input",{name:"packagingTimeMinutes",type:"number",className:"form-input",defaultValue:n?.packagingTimeMinutes||15,required:!0})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{r(!1),i(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N.isPending,children:N.isPending?"Saving...":"Save Product"})]})]})]})})]})}const wS={DRAFT:{label:"Draft",description:"Order created but not yet submitted for processing.",nextAction:"Submit order to begin processing"},SUBMITTED:{label:"Submitted",description:"Order submitted and awaiting validation by sales team.",nextAction:"Sales team validates order details"},VALIDATED:{label:"Validated",description:"Order validated and approved. Ready for production planning.",nextAction:"Production planner schedules batch"},SCHEDULED:{label:"Scheduled",description:"Order assigned to a production batch and scheduled for manufacturing.",nextAction:"Production team starts manufacturing"},IN_PRODUCTION:{label:"In Production",description:"Radiopharmaceutical is being manufactured.",nextAction:"Send to QC for quality testing"},QC_PENDING:{label:"QC Pending",description:"Quality control testing in progress.",nextAction:"QC analyst completes testing"},RELEASED:{label:"Released",description:"Batch passed QC and released by Qualified Person (QP). Ready for dispatch.",nextAction:"Logistics dispatches shipment"},DISPATCHED:{label:"Dispatched",description:"Order shipped and on the way to customer.",nextAction:"Confirm delivery to customer"},DELIVERED:{label:"Delivered",description:"Order successfully delivered to customer. Complete!",nextAction:"Order complete"},CANCELLED:{label:"Cancelled",description:"Order was cancelled and will not be fulfilled.",nextAction:"-"},REJECTED:{label:"Rejected",description:"Order was rejected during validation.",nextAction:"-"},FAILED_QC:{label:"Failed QC",description:"Batch did not pass quality control testing.",nextAction:"Rework or cancel order"},REWORK:{label:"Rework",description:"Order requires rework due to QC failure or other issues.",nextAction:"Create new batch"}};function wje(){const t=gn(),[r,n]=k.useState({}),[i,a]=k.useState(!1),s=pr(),{formatDateOnly:o,formatTimeOnly:l}=mh(),{data:u,isLoading:d}=Ve({queryKey:["orders",r.status,r.date],queryFn:async()=>{const N={};r.status&&(N.status=r.status),r.date&&(N.fromDate=r.date,N.toDate=r.date);const{data:T}=await xe.get("/orders",{params:N});return T}}),f=ot({mutationFn:async({id:N,status:T})=>xe.patch(`/orders/${N}/status`,{status:T}),onSuccess:(N,T)=>{s.invalidateQueries({queryKey:["orders"]});const O=wS[T.status];t.success("Status Updated",`Order moved to ${O?.label||T.status}`)},onError:N=>{const T=an(N);t.error("Update Failed",T?.userMessage||"Failed to update order status")}}),p=N=>({DRAFT:"default",SUBMITTED:"info",VALIDATED:"info",SCHEDULED:"info",IN_PRODUCTION:"warning",QC_PENDING:"warning",RELEASED:"success",DISPATCHED:"info",DELIVERED:"success",CANCELLED:"danger",REJECTED:"danger",FAILED_QC:"danger"})[N]||"default",x=N=>({DRAFT:"SUBMITTED",SUBMITTED:"VALIDATED",VALIDATED:"SCHEDULED"})[N]||null,v=[{key:"search",label:"Search",type:"search",placeholder:"Search orders..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"DRAFT",label:"Draft"},{value:"SUBMITTED",label:"Submitted"},{value:"VALIDATED",label:"Validated"},{value:"SCHEDULED",label:"Scheduled"},{value:"IN_PRODUCTION",label:"In Production"},{value:"QC_PENDING",label:"QC Pending"},{value:"RELEASED",label:"Released"},{value:"DISPATCHED",label:"Dispatched"},{value:"DELIVERED",label:"Delivered"}]}],w=u?.filter(N=>{if(r.search){const T=r.search.toLowerCase();if(!N.orderNumber.toLowerCase().includes(T)&&!N.customer?.name?.toLowerCase().includes(T)&&!N.product?.name?.toLowerCase().includes(T))return!1}return!0}),C={total:u?.length||0,pending:u?.filter(N=>["DRAFT","SUBMITTED","VALIDATED"].includes(N.status)).length||0,inProgress:u?.filter(N=>["SCHEDULED","IN_PRODUCTION","QC_PENDING"].includes(N.status)).length||0,ready:u?.filter(N=>["RELEASED","DISPATCHED"].includes(N.status)).length||0,delivered:u?.filter(N=>N.status==="DELIVERED").length||0};return d?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Orders"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage radiopharmaceutical orders from creation to delivery"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>a(!i),children:[e.jsx(am,{size:16}),"Status Guide",i?e.jsx(nh,{size:14}):e.jsx(bo,{size:14})]}),e.jsxs(nr,{to:"/orders/new",className:"btn btn-primary",children:[e.jsx(cn,{size:16}),"New Order"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Orders",value:C.total,icon:e.jsx(qo,{size:20}),color:"primary",onClick:()=>n({}),selected:!r.status}),e.jsx(st,{title:"Pending",value:C.pending,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>n(N=>({...N,status:"SUBMITTED"})),selected:r.status==="SUBMITTED"}),e.jsx(st,{title:"In Progress",value:C.inProgress,icon:e.jsx(Rr,{size:20}),color:"info",onClick:()=>n(N=>({...N,status:"IN_PRODUCTION"})),selected:r.status==="IN_PRODUCTION"}),e.jsx(st,{title:"Ready/Dispatched",value:C.ready,icon:e.jsx(dn,{size:20}),color:"success",onClick:()=>n(N=>({...N,status:"RELEASED"})),selected:r.status==="RELEASED"}),e.jsx(st,{title:"Delivered",value:C.delivered,icon:e.jsx(Ut,{size:20}),color:"default",onClick:()=>n(N=>({...N,status:"DELIVERED"})),selected:r.status==="DELIVERED"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[e.jsx(dd,{widgets:v,values:r,onChange:(N,T)=>n(O=>({...O,[N]:T})),onReset:()=>n({})}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Delivery Date"}),e.jsx("input",{type:"date",className:"form-input",style:{width:"160px"},value:r.date||"",onChange:N=>n(T=>({...T,date:N.target.value}))})]})]})}),i&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(am,{size:18,style:{color:"var(--primary)"}}),"Order Workflow Guide"]}),e.jsx("div",{style:{marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Orders flow through these stages from creation to delivery:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:["DRAFT","SUBMITTED","VALIDATED","SCHEDULED","IN_PRODUCTION","QC_PENDING","RELEASED","DISPATCHED","DELIVERED"].map((N,T,O)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pn,{status:N,size:"sm"}),T<O.length-1&&e.jsx(oc,{size:14,style:{color:"var(--text-muted)"}})]},N))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem"},children:Object.entries(wS).slice(0,9).map(([N,T])=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"var(--radius-sm)",borderLeft:`3px solid var(--${p(N)==="default"?"secondary":p(N)})`},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:e.jsx(Pn,{status:N,size:"sm"})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:T.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx("strong",{children:"Next:"})," ",T.nextAction]})]},N))})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Order List (",w?.length||0,")"]})}),w?.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order #"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Delivery"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"150px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:w.map(N=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:N.orderNumber}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:N.customer?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:N.customer?.city})]}),e.jsxs("td",{children:[e.jsx("div",{children:N.product?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:N.product?.radionuclide})]}),e.jsxs("td",{children:[e.jsx("div",{children:o(N.deliveryDate)}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[l(N.deliveryTimeStart)," - ",l(N.deliveryTimeEnd)]})]}),e.jsxs("td",{children:[e.jsxs("div",{style:{fontWeight:500},children:[N.requestedActivity," ",N.activityUnit]}),N.calculatedProductionActivity&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Prod: ",N.calculatedProductionActivity.toFixed(1)," ",N.activityUnit]})]}),e.jsx("td",{children:e.jsx(Pn,{status:N.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx(nr,{to:`/orders/${N.id}/journey`,className:"btn btn-sm btn-outline",title:"View Journey",children:e.jsx(cz,{size:14})}),e.jsx(nr,{to:`/orders/${N.id}`,className:"btn btn-sm btn-outline",title:"Edit Order",children:e.jsx(os,{size:14})}),x(N.status)&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>f.mutate({id:N.id,status:x(N.status)}),disabled:f.isPending,title:`Move to ${wS[x(N.status)]?.label}`,children:e.jsx(oc,{size:14})})]})})]},N.id))})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No orders found",message:"Create your first order to get started",icon:"package"})})]})]})}function oP({entityType:t,entityId:r,compact:n=!1}){const{data:i,isLoading:a}=Ve({queryKey:["approvalHistory",t,r],queryFn:async()=>{const{data:d}=await xe.get(`/approvals/history/${t}/${r}`);return d},enabled:!!r});if(a)return e.jsx("span",{style:{color:"#9ca3af",fontSize:"0.875rem"},children:"Loading..."});if(!i||i.length===0)return n?null:e.jsx("div",{style:{color:"#9ca3af",fontSize:"0.875rem",fontStyle:"italic"},children:"No approval workflow active"});const s=i[0],o=d=>{switch(d){case"PENDING":return e.jsx(Qt,{size:16,color:"#f59e0b"});case"APPROVED":return e.jsx(Ut,{size:16,color:"#22c55e"});case"REJECTED":return e.jsx(ci,{size:16,color:"#ef4444"});default:return e.jsx(sn,{size:16,color:"#6b7280"})}},l=d=>{switch(d){case"PENDING":return"Pending Approval";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";default:return d}};if(n)return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o(s.status),e.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:l(s.status)})]});const u=s.workflow.steps.find(d=>d.stepOrder===s.currentStep);return e.jsxs("div",{style:{padding:"0.75rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o(s.status),e.jsx("span",{style:{fontWeight:500},children:s.workflow.name}),e.jsx("span",{className:"badge",style:{marginLeft:"auto",background:s.status==="PENDING"?"#fef3c7":s.status==="APPROVED"?"#dcfce7":"#fee2e2",color:s.status==="PENDING"?"#92400e":s.status==="APPROVED"?"#166534":"#991b1b"},children:l(s.status)})]}),s.status==="PENDING"&&u&&e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem"},children:["Awaiting: ",e.jsx("strong",{children:u.stepName})]}),e.jsx("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"0.5rem"},children:s.workflow.steps.map(d=>e.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",background:d.stepOrder<s.currentStep?"#22c55e":d.stepOrder===s.currentStep?"#f59e0b":"#e5e7eb"},title:d.stepName},d.stepOrder))}),s.actions.length>0&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["Last action: ",s.actions[s.actions.length-1].step.stepName," ","by ",s.actions[s.actions.length-1].actionBy.firstName," ","on ",Ze(new Date(s.actions[s.actions.length-1].createdAt),"MMM d, HH:mm")]})]})}function l1(t,r,n=""){try{if(!t)return n;const i=new Date(t);return isNaN(i.getTime())?n:Ze(i,r)}catch{return n}}function lP(){const{id:t}=hl(),r=Qr();gn();const[n,i]=k.useState({customerId:"",productId:"",deliveryDate:Ze(new Date,"yyyy-MM-dd"),deliveryTimeStart:"",deliveryTimeEnd:"",requestedActivity:"",activityUnit:"mCi",numberOfDoses:"",injectionTime:"",patientCount:"",specialNotes:""}),[a,s]=k.useState(""),[o,l]=k.useState(null),{data:u}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:O}=await xe.get("/customers");return O}}),{data:d}=Ve({queryKey:["products"],queryFn:async()=>{const{data:O}=await xe.get("/products");return O}}),{data:f,isLoading:p,error:x}=Ve({queryKey:["order",t],queryFn:async()=>{const{data:O}=await xe.get(`/orders/${t}`);return O},enabled:!!t});k.useEffect(()=>{if(f)try{i({customerId:f.customerId||"",productId:f.productId||"",deliveryDate:l1(f.deliveryDate,"yyyy-MM-dd",Ze(new Date,"yyyy-MM-dd")),deliveryTimeStart:l1(f.deliveryTimeStart,"yyyy-MM-dd'T'HH:mm"),deliveryTimeEnd:l1(f.deliveryTimeEnd,"yyyy-MM-dd'T'HH:mm"),requestedActivity:f.requestedActivity?.toString()||"",activityUnit:f.activityUnit||"mCi",numberOfDoses:f.numberOfDoses?.toString()||"",injectionTime:l1(f.injectionTime,"yyyy-MM-dd'T'HH:mm"),patientCount:f.patientCount?.toString()||"",specialNotes:f.specialNotes||""})}catch(O){console.error("Error loading order data:",O),s("Failed to load order data. Some fields may be missing.")}},[f]);const v=ot({mutationFn:async O=>t?xe.put(`/orders/${t}`,O):xe.post("/orders",O),onSuccess:()=>{r("/orders")},onError:O=>{s(O.response?.data?.error||"Failed to save order")}}),w=O=>{i({...n,[O.target.name]:O.target.value})},C=(O,D="DRAFT")=>{O.preventDefault(),s(""),d?.find(M=>M.id===n.productId),v.mutate({customerId:n.customerId,productId:n.productId,deliveryDate:n.deliveryDate,deliveryTimeStart:n.deliveryTimeStart,deliveryTimeEnd:n.deliveryTimeEnd,requestedActivity:parseFloat(n.requestedActivity),activityUnit:n.activityUnit,numberOfDoses:n.numberOfDoses?parseInt(n.numberOfDoses):null,injectionTime:n.injectionTime||null,patientCount:n.patientCount?parseInt(n.patientCount):null,specialNotes:n.specialNotes||null,status:D})},N=u?.find(O=>O.id===n.customerId),T=d?.find(O=>O.id===n.productId);if(t&&p)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(x){const O=an(x);return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>r("/orders"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[e.jsx(aa,{size:18}),"Back to Orders"]}),e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"Failed to Load Order"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:O?.userMessage||"Unable to load order details. Please try again."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:[e.jsx(cu,{size:18})," Try Again"]})]})]})}return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>r("/orders"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[e.jsx(aa,{size:18}),"Back to Orders"]}),e.jsxs("div",{className:"card",style:{maxWidth:"50rem"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("h2",{style:{fontWeight:600,margin:0},children:t?"Edit Order":"New Order"}),t&&f&&e.jsx("div",{style:{marginLeft:"1rem"},children:e.jsx(oP,{entityType:"ORDER",entityId:t,compact:!0})})]})}),t&&f&&e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx(oP,{entityType:"ORDER",entityId:t})}),a&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"1rem 1.5rem",background:"#fee2e2",color:"#991b1b"},children:[e.jsx(sn,{size:18}),a]}),e.jsxs("form",{onSubmit:O=>C(O),children:[e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{name:"customerId",className:"form-select",value:n.customerId,onChange:w,required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),u?.map(O=>e.jsxs("option",{value:O.id,children:[O.name," (",O.code,")"]},O.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Product *"}),e.jsxs("select",{name:"productId",className:"form-select",value:n.productId,onChange:w,required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),d?.map(O=>e.jsxs("option",{value:O.id,children:[O.name," (",O.radionuclide,")"]},O.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Date *"}),e.jsx("input",{type:"date",name:"deliveryDate",className:"form-input",value:n.deliveryDate,onChange:w,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Window Start *"}),e.jsx("input",{type:"datetime-local",name:"deliveryTimeStart",className:"form-input",value:n.deliveryTimeStart,onChange:w,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Window End *"}),e.jsx("input",{type:"datetime-local",name:"deliveryTimeEnd",className:"form-input",value:n.deliveryTimeEnd,onChange:w,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Injection Time (if different)"}),e.jsx("input",{type:"datetime-local",name:"injectionTime",className:"form-input",value:n.injectionTime,onChange:w})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Requested Activity *"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"number",name:"requestedActivity",className:"form-input",value:n.requestedActivity,onChange:w,step:"0.1",required:!0}),e.jsxs("select",{name:"activityUnit",className:"form-select",style:{width:"6rem"},value:n.activityUnit,onChange:w,children:[e.jsx("option",{value:"mCi",children:"mCi"}),e.jsx("option",{value:"GBq",children:"GBq"}),e.jsx("option",{value:"MBq",children:"MBq"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Number of Doses"}),e.jsx("input",{type:"number",name:"numberOfDoses",className:"form-input",value:n.numberOfDoses,onChange:w})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Patient Count"}),e.jsx("input",{type:"number",name:"patientCount",className:"form-input",value:n.patientCount,onChange:w})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{className:"form-label",children:"Special Notes"}),e.jsx("textarea",{name:"specialNotes",className:"form-input",rows:3,value:n.specialNotes,onChange:w})]})]}),T&&N&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qQ,{size:18}),"Product & Delivery Info"]}),e.jsxs("div",{className:"grid grid-3",style:{fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Half-life: "}),T.halfLifeMinutes," min"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Shelf Life: "}),T.shelfLifeMinutes," min"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Travel Time: "}),N.travelTimeMinutes," min"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Synthesis: "}),T.synthesisTimeMinutes," min"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"QC Time: "}),T.qcTimeMinutes," min"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Overage: "}),T.overagePercent,"%"]})]})]})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>r("/orders"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-secondary",disabled:v.isPending,children:"Save as Draft"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:O=>C(O,"SUBMITTED"),disabled:v.isPending,children:"Submit Order"})]})]})]})]})}function Sje({window:t}){const r=n=>n==="FULL"?"var(--danger)":n==="NEAR_FULL"?"var(--warning)":"var(--success)";return e.jsxs("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:"var(--bg-primary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:500},children:t.name}),e.jsxs("span",{style:{fontSize:"0.75rem",color:r(t.status),fontWeight:600},children:[t.utilizationPercent,"% used"]})]}),e.jsx("div",{style:{height:"8px",background:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:e.jsxs("div",{style:{display:"flex",height:"100%",transition:"width 0.3s ease"},children:[e.jsx("div",{style:{width:`${Math.min(100,t.usedMinutes/t.capacityMinutes*100)}%`,background:"#3b82f6"},title:`Used: ${t.usedMinutes} min`}),e.jsx("div",{style:{width:`${Math.min(100-t.usedMinutes/t.capacityMinutes*100,t.committedMinutes/t.capacityMinutes*100)}%`,background:"#22c55e"},title:`Committed: ${t.committedMinutes} min`}),e.jsx("div",{style:{width:`${Math.min(100-(t.usedMinutes+t.committedMinutes)/t.capacityMinutes*100,t.reservedMinutes/t.capacityMinutes*100)}%`,background:"#f59e0b"},title:`Reserved: ${t.reservedMinutes} min`})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.35rem",fontSize:"0.7rem",color:"var(--text-secondary)"},children:[e.jsxs("span",{children:[Ze(new Date(t.startTime),"HH:mm")," - ",Ze(new Date(t.endTime),"HH:mm")]}),e.jsxs("span",{children:[t.availableMinutes," min available"]})]})]})}function Cje(){const[t,r]=k.useState(Ze(new Date,"yyyy-MM-dd")),n=pr(),i=Qr(),{data:a}=Ve({queryKey:["planner-capacity",t],queryFn:async()=>{const{data:w}=await xe.get("/planner/capacity",{params:{date:t,days:1}});return w}}),{data:s,isLoading:o}=Ve({queryKey:["planner-orders",t],queryFn:async()=>{const{data:w}=await xe.get("/planner/orders",{params:{date:t}});return w}}),{data:l,isLoading:u}=Ve({queryKey:["planner-batches",t],queryFn:async()=>{const{data:w}=await xe.get("/planner/batches",{params:{fromDate:t,toDate:t}});return w}}),{data:d}=Ve({queryKey:["suggested-batches",t],queryFn:async()=>{const{data:w}=await xe.post("/planner/group-orders",{date:t});return w},enabled:!!s?.length}),{data:f}=Ve({queryKey:["equipment"],queryFn:async()=>{const{data:w}=await xe.get("/planner/equipment");return w}}),p=ot({mutationFn:async w=>xe.post("/batches",w),onSuccess:()=>{n.invalidateQueries({queryKey:["planner-orders"]}),n.invalidateQueries({queryKey:["planner-batches"]}),n.invalidateQueries({queryKey:["suggested-batches"]})}}),x=w=>{const C=f?.find(T=>T.type==="Synthesis"),N=f?.find(T=>T.type==="HotCell");p.mutate({productId:w.productId,plannedStartTime:w.suggestedStartTime,plannedEndTime:w.suggestedEndTime,targetActivity:w.totalActivity,calibrationTime:w.suggestedStartTime,synthesisModuleId:C?.id,hotCellId:N?.id,orderIds:w.orders.map(T=>T.id)})},v=o||u;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"Production Planner"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>r(Ze(ul(new Date(t),-1),"yyyy-MM-dd")),children:"Previous"}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:t,onChange:w=>r(w.target.value)}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>r(Ze(ul(new Date(t),1),"yyyy-MM-dd")),children:"Next"})]})]}),a?.summary&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mc,{size:20}),"Dispensing Capacity Overview"]})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--primary)"},children:a.summary.totalCapacityMinutes}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Total Capacity (min)"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"#22c55e"},children:a.summary.totalCommittedMinutes}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Committed (min)"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"#f59e0b"},children:a.summary.totalReservedMinutes}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Reserved (min)"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--success)"},children:a.summary.totalAvailableMinutes}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Available (min)"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"center",fontSize:"0.75rem"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{style:{width:"12px",height:"12px",background:"#3b82f6",borderRadius:"2px"}})," Used"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{style:{width:"12px",height:"12px",background:"#22c55e",borderRadius:"2px"}})," Committed"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{style:{width:"12px",height:"12px",background:"#f59e0b",borderRadius:"2px"}})," Reserved (Tentative)"]})]}),a?.windows?.length>0&&e.jsx("div",{style:{marginTop:"1rem"},children:a.windows.map(w=>e.jsx(Sje,{window:w},w.id))})]})]}),v?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{className:"grid grid-2",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx($n,{size:20}),"Orders to Schedule (",s?.length||0,")"]})}),e.jsx("div",{style:{padding:"1rem"},children:s?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(w=>e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:600},children:w.orderNumber}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{className:"badge badge-info",children:w.product?.productType}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(`/orders/${w.id}/journey`),title:"View Order Details",children:e.jsx(os,{size:14})})]})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[e.jsx("div",{children:w.customer?.name}),e.jsx("div",{children:w.product?.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[e.jsx(Qt,{size:14}),"Delivery: ",Ze(new Date(w.deliveryTimeStart),"HH:mm")]}),e.jsxs("div",{children:["Activity: ",w.requestedActivity," ",w.activityUnit]})]})]},w.id))}):e.jsx("div",{className:"empty-state",children:"No orders pending scheduling for this date"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rr,{size:20}),"Suggested Batches"]})}),e.jsx("div",{style:{padding:"1rem"},children:d?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:d.map((w,C)=>e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:600},children:w.product?.name}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>x(w),disabled:p.isPending,children:[e.jsx(yo,{size:14}),"Create Batch"]})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[e.jsxs("div",{children:["Total Activity: ",w.totalActivity.toFixed(1)," mCi"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[e.jsx(Qt,{size:14}),"Start: ",Ze(new Date(w.suggestedStartTime),"HH:mm")]})]}),w.orders?.length>0&&e.jsxs("div",{style:{marginTop:"0.75rem",borderTop:"1px solid var(--border)",paddingTop:"0.75rem"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(cc,{size:12}),"Orders in this batch (",w.orders.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:w.orders.map(N=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",background:"var(--bg-primary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.8rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500},children:N.orderNumber}),e.jsx("span",{style:{color:"var(--text-secondary)",marginLeft:"0.5rem"},children:N.customer?.name||N.customer?.nameEn}),e.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:"0.5rem"},children:["(",N.requestedActivity," mCi)"]})]}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(`/orders/${N.id}/journey`),title:"View Order History",style:{padding:"0.25rem 0.5rem",fontSize:"0.7rem"},children:e.jsx(os,{size:12})})]},N.id))})]})]},C))}):e.jsx("div",{className:"empty-state",children:"No batch suggestions available"})})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600},children:["Scheduled Batches (",l?.length||0,")"]})}),e.jsx("div",{style:{padding:"0"},children:l?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Batch #"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Scheduled Time"}),e.jsx("th",{children:"Target Activity"}),e.jsx("th",{children:"Orders"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsx("tbody",{children:l.map(w=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500},children:w.batchNumber}),e.jsx("td",{children:w.product?.name}),e.jsxs("td",{children:[Ze(new Date(w.plannedStartTime),"HH:mm")," - ",Ze(new Date(w.plannedEndTime),"HH:mm")]}),e.jsxs("td",{children:[w.targetActivity," ",w.activityUnit]}),e.jsx("td",{children:w.orders?.length||0}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${Nje(w.status)}`,children:w.status.replace("_"," ")})}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(`/batches/${w.id}/journey`),title:"View Batch Journey",children:[e.jsx(os,{size:14}),"View"]})})]},w.id))})]}):e.jsx("div",{className:"empty-state",children:"No batches scheduled for this date"})})]})]})}function Nje(t){return{PLANNED:"default",IN_PROGRESS:"warning",COMPLETED:"success",QC_PENDING:"warning",QC_IN_PROGRESS:"warning",QC_PASSED:"success",QC_FAILED:"danger",RELEASED:"success",CANCELLED:"danger"}[t]||"default"}const c1={PLANNED:"#94a3b8",IN_PRODUCTION:"#3b82f6",PRODUCTION_COMPLETE:"#22c55e",QC_PENDING:"#f59e0b",QC_PASSED:"#10b981",FAILED_QC:"#ef4444",RELEASED:"#8b5cf6",DISPENSED:"#06b6d4",CANCELLED:"#6b7280"};function Aje({batches:t,equipment:r,date:n,onBatchClick:i}){Yf(new Date(n));const a=Array.from({length:24},(u,d)=>d),s=k.useMemo(()=>{const u={};return t.forEach(d=>{const f=d.product?.name||"Unknown";u[f]||(u[f]=[]),u[f].push(d)}),Object.entries(u).sort((d,f)=>d[0].localeCompare(f[0]))},[t]),o=u=>{const d=new Date(u.plannedStartTime),f=new Date(u.plannedEndTime),p=Yf(new Date(n)),x=Ux(d,p),v=Ux(f,d),w=x/1440*100,C=v/1440*100;return{left:`${Math.max(0,w)}%`,width:`${Math.min(100-w,C)}%`}},l=u=>{if(!u.actualStartTime)return null;const d=new Date(u.actualStartTime),f=u.actualEndTime?new Date(u.actualEndTime):new Date,p=Yf(new Date(n)),x=Ux(d,p),v=Ux(f,d),w=x/1440*100,C=v/1440*100;return{left:`${Math.max(0,w)}%`,width:`${Math.min(100-w,C)}%`}};return e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,margin:0},children:["Production Schedule - ",Ze(new Date(n),"EEEE, MMMM d, yyyy")]})}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("div",{style:{minWidth:"1200px"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{width:"180px",flexShrink:0,padding:"0.75rem 1rem",fontWeight:600,fontSize:"0.875rem"},children:"Product"}),e.jsx("div",{style:{flex:1,display:"flex"},children:a.map(u=>e.jsxs("div",{style:{flex:1,textAlign:"center",fontSize:"0.75rem",padding:"0.75rem 0",borderLeft:"1px solid var(--border)",color:"var(--text-secondary)",fontWeight:500},children:[u.toString().padStart(2,"0"),":00"]},u))})]}),s.length===0?e.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:"No batches scheduled for this date"}):s.map(([u,d])=>e.jsx("div",{style:{borderBottom:"1px solid var(--border)"},children:d.map((f,p)=>e.jsxs("div",{style:{display:"flex",minHeight:"48px",background:p%2===0?"var(--bg-primary)":"var(--bg-secondary)"},children:[e.jsxs("div",{style:{width:"180px",flexShrink:0,padding:"0.5rem 1rem",display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"0.8rem"},children:[e.jsx("div",{style:{fontWeight:500},children:p===0?u:""}),e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:f.batchNumber})]}),e.jsxs("div",{style:{flex:1,position:"relative",display:"flex"},children:[a.map(x=>e.jsx("div",{style:{flex:1,borderLeft:"1px solid var(--border)",background:x>=6&&x<18?"transparent":"rgba(0,0,0,0.02)"}},x)),f.actualStartTime&&e.jsx("div",{style:{position:"absolute",top:"4px",height:"calc(50% - 6px)",...l(f),background:c1[f.status]||"#3b82f6",borderRadius:"4px",opacity:.6,zIndex:1},title:`Actual: ${Ze(new Date(f.actualStartTime),"HH:mm")} - ${f.actualEndTime?Ze(new Date(f.actualEndTime),"HH:mm"):"ongoing"}`}),e.jsxs("div",{onClick:()=>i?.(f),style:{position:"absolute",top:f.actualStartTime?"calc(50% + 2px)":"8px",height:f.actualStartTime?"calc(50% - 6px)":"calc(100% - 16px)",...o(f),background:`linear-gradient(135deg, ${c1[f.status]||"#3b82f6"}, ${c1[f.status]||"#3b82f6"}dd)`,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",padding:"0 8px",color:"white",fontSize:"0.7rem",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:2,transition:"transform 0.1s, box-shadow 0.1s"},onMouseEnter:x=>{x.currentTarget.style.transform="scale(1.02)",x.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)",x.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)"},title:`${f.batchNumber}: ${Ze(new Date(f.plannedStartTime),"HH:mm")} - ${Ze(new Date(f.plannedEndTime),"HH:mm")}
${f.status}
${f.targetActivity} ${f.activityUnit}`,children:[f.batchNumber,"  ",f.targetActivity,f.activityUnit]})]})]},f.id))},u))]})}),e.jsx("div",{style:{padding:"1rem",borderTop:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.75rem"},children:Object.entries(c1).map(([u,d])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:d}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:u.replace(/_/g," ")})]},u))})})]})}const cP=t=>t===0?"var(--bg-secondary)":t<25?"#dcfce7":t<50?"#86efac":t<75?"#fcd34d":t<90?"#fb923c":"#ef4444",dP=t=>t===0?"var(--text-tertiary)":t<50?"#166534":t<75?"#92400e":"#ffffff";function Eje({equipment:t,utilizationData:r,weekStart:n,onCellClick:i,view:a="weekly",selectedDate:s}){const o=k.useMemo(()=>{if(a==="daily"&&s)return[new Date(s)];const p=cf(n,{weekStartsOn:1});return pte({start:p,end:ul(p,6)})},[n,a,s]),l=a==="daily"?Array.from({length:24},(p,x)=>x):[6,9,12,15,18],u=(p,x,v)=>r.find(C=>C.equipmentId===p&&C.date===x&&C.hour===v)?.utilizationPercent||0,d=(p,x,v)=>r.find(C=>C.equipmentId===p&&C.date===x&&C.hour===v)?.batchCount||0,f=(p,x)=>{const v=r.filter(C=>C.equipmentId===p&&C.date===x);if(v.length===0)return 0;const w=v.reduce((C,N)=>C+N.utilizationPercent,0);return Math.round(w/v.length)};return e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,margin:0},children:["Equipment Utilization Heat Map",a==="weekly"&&` - Week of ${Ze(n,"MMM d, yyyy")}`,a==="daily"&&s&&` - ${Ze(new Date(s),"EEEE, MMMM d")}`]})}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("div",{style:{minWidth:a==="daily"?"800px":"1000px"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{width:"140px",flexShrink:0,padding:"0.75rem 1rem",fontWeight:600,fontSize:"0.85rem"},children:"Equipment"}),o.map(p=>e.jsx("div",{style:{flex:1,minWidth:a==="daily"?"auto":"100px"},children:a==="weekly"?e.jsxs("div",{style:{textAlign:"center",padding:"0.5rem",borderLeft:"1px solid var(--border)",fontWeight:500,fontSize:"0.8rem"},children:[e.jsx("div",{children:Ze(p,"EEE")}),e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:Ze(p,"MMM d")})]}):e.jsx("div",{style:{display:"flex"},children:l.map(x=>e.jsxs("div",{style:{flex:1,textAlign:"center",padding:"0.5rem 0.25rem",borderLeft:"1px solid var(--border)",fontSize:"0.7rem",color:"var(--text-secondary)"},children:[x.toString().padStart(2,"0"),":00"]},x))})},p.toISOString()))]}),t.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"No equipment data available"}):t.map((p,x)=>e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:x%2===0?"var(--bg-primary)":"rgba(0,0,0,0.01)"},children:[e.jsxs("div",{style:{width:"140px",flexShrink:0,padding:"0.75rem 1rem",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.85rem"},children:p.name}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:p.type})]}),o.map(v=>{const w=Ze(v,"yyyy-MM-dd");if(a==="weekly"){const C=f(p.id,w);return e.jsx("div",{onClick:()=>i?.(p,w,12),style:{flex:1,minWidth:"100px",minHeight:"48px",borderLeft:"1px solid var(--border)",background:cP(C),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"opacity 0.15s"},onMouseEnter:N=>N.currentTarget.style.opacity="0.8",onMouseLeave:N=>N.currentTarget.style.opacity="1",title:`${p.name} - ${Ze(v,"EEE MMM d")}: ${C}% utilization`,children:e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:600,color:dP(C)},children:[C,"%"]})},w)}return e.jsx("div",{style:{flex:1,display:"flex"},children:l.map(C=>{const N=u(p.id,w,C),T=d(p.id,w,C);return e.jsx("div",{onClick:()=>i?.(p,w,C),style:{flex:1,minHeight:"40px",borderLeft:"1px solid var(--border)",background:cP(N),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"opacity 0.15s"},onMouseEnter:O=>O.currentTarget.style.opacity="0.8",onMouseLeave:O=>O.currentTarget.style.opacity="1",title:`${p.name} at ${C}:00 - ${N}% (${T} batches)`,children:N>0&&e.jsxs("span",{style:{fontSize:"0.65rem",fontWeight:500,color:dP(N)},children:[N,"%"]})},C)})},w)})]},p.id))]})}),e.jsx("div",{style:{padding:"1rem",borderTop:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Utilization:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"20px",height:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:"0%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"20px",height:"12px",background:"#dcfce7",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:"1-24%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"20px",height:"12px",background:"#86efac",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:"25-49%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"20px",height:"12px",background:"#fcd34d",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:"50-74%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"20px",height:"12px",background:"#fb923c",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:"75-89%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{width:"20px",height:"12px",background:"#ef4444",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:"90-100%"})]})]})})]})}function _je(){const[t,r]=k.useState(Ze(new Date,"yyyy-MM-dd")),[n,i]=k.useState("gantt"),[a,s]=k.useState(!1),o=Qr(),l=k.useMemo(()=>cf(new Date(t),{weekStartsOn:1}),[t]),{data:u,isLoading:d}=Ve({queryKey:["production-schedule-batches",t,a],queryFn:async()=>{const C=a?Ze(l,"yyyy-MM-dd"):t,N=a?Ze(ul(l,6),"yyyy-MM-dd"):t,{data:T}=await xe.get("/planner/batches",{params:{fromDate:C,toDate:N}});return T}}),{data:f}=Ve({queryKey:["production-equipment"],queryFn:async()=>{const{data:C}=await xe.get("/planner/equipment");return C}}),p=k.useMemo(()=>{if(!u||!f)return[];const C=[];return f.forEach(N=>{const T=a?7:1;for(let O=0;O<T;O++){const D=a?Ze(ul(l,O),"yyyy-MM-dd"):t;for(let M=0;M<24;M++){const Y=new Date(`${D}T${M.toString().padStart(2,"0")}:00:00`),q=new Date(`${D}T${M.toString().padStart(2,"0")}:59:59`),W=u.filter(J=>{const z=new Date(J.plannedStartTime),G=new Date(J.plannedEndTime);return(J.synthesisModuleId===N.id||J.hotCellId===N.id)&&z<=q&&G>=Y});C.push({hour:M,date:D,utilizationPercent:Math.min(100,W.length*50),batchCount:W.length,equipmentId:N.id})}}}),C},[u,f,t,l,a]),x=()=>{r(Ze(a?Dre(new Date(t)):WA(new Date(t),1),"yyyy-MM-dd"))},v=()=>{r(Ze(a?Tz(new Date(t),1):ul(new Date(t),1),"yyyy-MM-dd"))},w=C=>{o(`/batches/${C.id}`)};return e.jsxs("div",{className:"page-container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Production Schedule"}),e.jsx("p",{style:{color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Visual overview of batch production and equipment utilization"})]})}),e.jsx("div",{className:"card",style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,style:{padding:"0.5rem"},children:e.jsx(Zp,{size:18})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:"200px",justifyContent:"center"},children:[e.jsx($n,{size:18}),e.jsx("input",{type:"date",value:t,onChange:C=>r(C.target.value),style:{border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem 0.75rem",fontSize:"0.9rem"}})]}),e.jsx("button",{className:"btn btn-secondary",onClick:v,style:{padding:"0.5rem"},children:e.jsx(jo,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:C=>s(C.target.checked),style:{width:"16px",height:"16px"}}),"Week View"]}),e.jsxs("div",{style:{display:"flex",background:"var(--bg-secondary)",borderRadius:"var(--radius)",padding:"2px"},children:[e.jsxs("button",{className:`btn btn-sm ${n==="gantt"?"btn-primary":"btn-secondary"}`,onClick:()=>i("gantt"),style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem"},children:[e.jsx(e2,{size:16}),"Gantt"]}),e.jsxs("button",{className:`btn btn-sm ${n==="heatmap"?"btn-primary":"btn-secondary"}`,onClick:()=>i("heatmap"),style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem"},children:[e.jsx(mv,{size:16}),"Heat Map"]}),e.jsxs("button",{className:`btn btn-sm ${n==="list"?"btn-primary":"btn-secondary"}`,onClick:()=>i("list"),style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem"},children:[e.jsx(SZ,{size:16}),"List"]})]})]})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:u?.length||0}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Scheduled Batches"})]}),e.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:u?.filter(C=>C.status==="IN_PRODUCTION").length||0}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"In Production"})]}),e.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:u?.filter(C=>C.status==="QC_PENDING").length||0}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Awaiting QC"})]}),e.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--info)"},children:u?.filter(C=>C.status==="RELEASED").length||0}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Released"})]})]})}),d?e.jsx("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:"Loading schedule..."}):n==="gantt"?e.jsx(Aje,{batches:u||[],equipment:f||[],date:t,onBatchClick:w}):n==="heatmap"?e.jsx(Eje,{equipment:f||[],utilizationData:p,weekStart:l,view:a?"weekly":"daily",selectedDate:t,onCellClick:(C,N,T)=>{console.log("Cell clicked:",C.name,N,T)}}):e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Batch List"})}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Batch #"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Planned Time"}),e.jsx("th",{children:"Target Activity"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Orders"})]})}),e.jsx("tbody",{children:u?.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:["No batches scheduled for this ",a?"week":"date"]})}):u?.map(C=>e.jsxs("tr",{onClick:()=>w(C),style:{cursor:"pointer"},children:[e.jsx("td",{style:{fontWeight:500},children:C.batchNumber}),e.jsx("td",{children:C.product?.name}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx(Qt,{size:14}),Ze(new Date(C.plannedStartTime),"MMM d HH:mm")," - ",Ze(new Date(C.plannedEndTime),"HH:mm")]})}),e.jsxs("td",{children:[C.targetActivity," ",C.activityUnit]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${C.status==="RELEASED"?"success":C.status==="IN_PRODUCTION"?"primary":"default"}`,children:C.status.replace(/_/g," ")})}),e.jsx("td",{children:C.orders?.length||0})]},C.id))})]})})]})]})}const Tje="modulepreload",Ije=function(t){return"/"+t},uP={},jv=function(r,n,i){let a=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");a=u(n.map(d=>{if(d=Ije(d),d in uP)return;uP[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":Tje,f||(x.as="script"),x.crossOrigin="",x.href=d,l&&x.setAttribute("nonce",l),document.head.appendChild(x),f)return new Promise((v,w)=>{x.addEventListener("load",v),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return r().catch(s)})};var d1={},cg={},u1={},hP;function qc(){if(hP)return u1;hP=1,Object.defineProperty(u1,"__esModule",{value:!0});function t(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var r=function n(i,a){t(this,n),this.data=i,this.text=a.text||i,this.options=a};return u1.default=r,u1}var fP;function Oje(){if(fP)return cg;fP=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.CODE39=void 0;var t=(function(){function C(N,T){for(var O=0;O<T.length;O++){var D=T[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(N,D.key,D)}}return function(N,T,O){return T&&C(N.prototype,T),O&&C(N,O),N}})(),r=qc(),n=i(r);function i(C){return C&&C.__esModule?C:{default:C}}function a(C,N){if(!(C instanceof N))throw new TypeError("Cannot call a class as a function")}function s(C,N){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:C}function o(C,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);C.prototype=Object.create(N&&N.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(C,N):C.__proto__=N)}var l=(function(C){o(N,C);function N(T,O){return a(this,N),T=T.toUpperCase(),O.mod43&&(T+=x(w(T))),s(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,T,O))}return t(N,[{key:"encode",value:function(){for(var O=f("*"),D=0;D<this.data.length;D++)O+=f(this.data[D])+"0";return O+=f("*"),{data:O,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),N})(n.default),u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],d=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function f(C){return p(v(C))}function p(C){return d[C].toString(2)}function x(C){return u[C]}function v(C){return u.indexOf(C)}function w(C){for(var N=0,T=0;T<C.length;T++)N+=v(C[T]);return N=N%43,N}return cg.CODE39=l,cg}var jd={},h1={},f1={},Ss={},mP;function Wy(){if(mP)return Ss;mP=1,Object.defineProperty(Ss,"__esModule",{value:!0});var t;function r(u,d,f){return d in u?Object.defineProperty(u,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[d]=f,u}var n=Ss.SET_A=0,i=Ss.SET_B=1,a=Ss.SET_C=2;Ss.SHIFT=98;var s=Ss.START_A=103,o=Ss.START_B=104,l=Ss.START_C=105;return Ss.MODULO=103,Ss.STOP=106,Ss.FNC1=207,Ss.SET_BY_CODE=(t={},r(t,s,n),r(t,o,i),r(t,l,a),t),Ss.SWAP={101:n,100:i,99:a},Ss.A_START_CHAR="",Ss.B_START_CHAR="",Ss.C_START_CHAR="",Ss.A_CHARS="[\0-_-]",Ss.B_CHARS="[ --]",Ss.C_CHARS="(*[0-9]{2}*)",Ss.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Ss}var pP;function rj(){if(pP)return f1;pP=1,Object.defineProperty(f1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=qc(),n=a(r),i=Wy();function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(p,x){s(this,f);var v=o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p.substring(1),x));return v.bytes=p.split("").map(function(w){return w.charCodeAt(0)}),v}return t(f,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var x=this.bytes,v=x.shift()-105,w=i.SET_BY_CODE[v];if(w===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&x.unshift(i.FNC1);var C=f.next(x,1,w);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:f.getBar(v)+C.result+f.getBar((C.checksum+v)%i.MODULO)+f.getBar(i.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var x=this.options.ean128||!1;return typeof x=="string"&&(x=x.toLowerCase()==="true"),x}}],[{key:"getBar",value:function(x){return i.BARS[x]?i.BARS[x].toString():""}},{key:"correctIndex",value:function(x,v){if(v===i.SET_A){var w=x.shift();return w<32?w+64:w-32}else return v===i.SET_B?x.shift()-32:(x.shift()-48)*10+x.shift()-48}},{key:"next",value:function(x,v,w){if(!x.length)return{result:"",checksum:0};var C=void 0,N=void 0;if(x[0]>=200){N=x.shift()-105;var T=i.SWAP[N];T!==void 0?C=f.next(x,v+1,T):((w===i.SET_A||w===i.SET_B)&&N===i.SHIFT&&(x[0]=w===i.SET_A?x[0]>95?x[0]-96:x[0]:x[0]<32?x[0]+96:x[0]),C=f.next(x,v+1,w))}else N=f.correctIndex(x,w),C=f.next(x,v+1,w);var O=f.getBar(N),D=N*v;return{result:O+C.result,checksum:D+C.checksum}}}]),f})(n.default);return f1.default=u,f1}var m1={},gP;function kje(){if(gP)return m1;gP=1,Object.defineProperty(m1,"__esModule",{value:!0});var t=Wy(),r=function(l){return l.match(new RegExp("^"+t.A_CHARS+"*"))[0].length},n=function(l){return l.match(new RegExp("^"+t.B_CHARS+"*"))[0].length},i=function(l){return l.match(new RegExp("^"+t.C_CHARS+"*"))[0]};function a(o,l){var u=l?t.A_CHARS:t.B_CHARS,d=o.match(new RegExp("^("+u+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(d)return d[1]+""+s(o.substring(d[1].length));var f=o.match(new RegExp("^"+u+"+"))[0];return f.length===o.length?o:f+String.fromCharCode(l?205:206)+a(o.substring(f.length),!l)}function s(o){var l=i(o),u=l.length;if(u===o.length)return o;o=o.substring(u);var d=r(o)>=n(o);return l+String.fromCharCode(d?206:205)+a(o,d)}return m1.default=function(o){var l=void 0,u=i(o).length;if(u>=2)l=t.C_START_CHAR+s(o);else{var d=r(o)>n(o);l=(d?t.A_START_CHAR:t.B_START_CHAR)+a(o,d)}return l.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(f,p){return""+p})},m1}var yP;function Dje(){if(yP)return h1;yP=1,Object.defineProperty(h1,"__esModule",{value:!0});var t=rj(),r=a(t),n=kje(),i=a(n);function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(p,x){if(s(this,f),/^[\x00-\x7F\xC8-\xD3]+$/.test(p))var v=o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,(0,i.default)(p),x));else var v=o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,x));return o(v)}return f})(r.default);return h1.default=u,h1}var p1={},xP;function Pje(){if(xP)return p1;xP=1,Object.defineProperty(p1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=rj(),n=a(r),i=Wy();function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(p,x){return s(this,f),o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,i.A_START_CHAR+p,x))}return t(f,[{key:"valid",value:function(){return new RegExp("^"+i.A_CHARS+"+$").test(this.data)}}]),f})(n.default);return p1.default=u,p1}var g1={},vP;function Rje(){if(vP)return g1;vP=1,Object.defineProperty(g1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=rj(),n=a(r),i=Wy();function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(p,x){return s(this,f),o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,i.B_START_CHAR+p,x))}return t(f,[{key:"valid",value:function(){return new RegExp("^"+i.B_CHARS+"+$").test(this.data)}}]),f})(n.default);return g1.default=u,g1}var y1={},bP;function Mje(){if(bP)return y1;bP=1,Object.defineProperty(y1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=rj(),n=a(r),i=Wy();function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(p,x){return s(this,f),o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,i.C_START_CHAR+p,x))}return t(f,[{key:"valid",value:function(){return new RegExp("^"+i.C_CHARS+"+$").test(this.data)}}]),f})(n.default);return y1.default=u,y1}var jP;function Lje(){if(jP)return jd;jP=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.CODE128C=jd.CODE128B=jd.CODE128A=jd.CODE128=void 0;var t=Dje(),r=u(t),n=Pje(),i=u(n),a=Rje(),s=u(a),o=Mje(),l=u(o);function u(d){return d&&d.__esModule?d:{default:d}}return jd.CODE128=r.default,jd.CODE128A=i.default,jd.CODE128B=s.default,jd.CODE128C=l.default,jd}var Ll={},x1={},Bu={},wP;function Hy(){return wP||(wP=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.SIDE_BIN="101",Bu.MIDDLE_BIN="01010",Bu.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},Bu.EAN2_STRUCTURE=["LL","LG","GL","GG"],Bu.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],Bu.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),Bu}var v1={},b1={},SP;function Vy(){if(SP)return b1;SP=1,Object.defineProperty(b1,"__esModule",{value:!0});var t=Hy(),r=function(i,a,s){var o=i.split("").map(function(u,d){return t.BINARIES[a[d]]}).map(function(u,d){return u?u[i[d]]:""});if(s){var l=i.length-1;o=o.map(function(u,d){return d<l?u+s:u})}return o.join("")};return b1.default=r,b1}var CP;function aW(){if(CP)return v1;CP=1,Object.defineProperty(v1,"__esModule",{value:!0});var t=(function(){function p(x,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,v,w){return v&&p(x.prototype,v),w&&p(x,w),x}})(),r=Hy(),n=Vy(),i=o(n),a=qc(),s=o(a);function o(p){return p&&p.__esModule?p:{default:p}}function l(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function u(p,x){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:p}function d(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(p,x):p.__proto__=x)}var f=(function(p){d(x,p);function x(v,w){l(this,x);var C=u(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,v,w));return C.fontSize=!w.flat&&w.fontSize>w.width*10?w.width*10:w.fontSize,C.guardHeight=w.height+C.fontSize/2+w.textMargin,C}return t(x,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(w,C){return this.text.substr(w,C)}},{key:"leftEncode",value:function(w,C){return(0,i.default)(w,C)}},{key:"rightText",value:function(w,C){return this.text.substr(w,C)}},{key:"rightEncode",value:function(w,C){return(0,i.default)(w,C)}},{key:"encodeGuarded",value:function(){var w={fontSize:this.fontSize},C={height:this.guardHeight};return[{data:r.SIDE_BIN,options:C},{data:this.leftEncode(),text:this.leftText(),options:w},{data:r.MIDDLE_BIN,options:C},{data:this.rightEncode(),text:this.rightText(),options:w},{data:r.SIDE_BIN,options:C}]}},{key:"encodeFlat",value:function(){var w=[r.SIDE_BIN,this.leftEncode(),r.MIDDLE_BIN,this.rightEncode(),r.SIDE_BIN];return{data:w.join(""),text:this.text}}}]),x})(s.default);return v1.default=f,v1}var NP;function zje(){if(NP)return x1;NP=1,Object.defineProperty(x1,"__esModule",{value:!0});var t=(function(){function p(x,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,v,w){return v&&p(x.prototype,v),w&&p(x,w),x}})(),r=function p(x,v,w){x===null&&(x=Function.prototype);var C=Object.getOwnPropertyDescriptor(x,v);if(C===void 0){var N=Object.getPrototypeOf(x);return N===null?void 0:p(N,v,w)}else{if("value"in C)return C.value;var T=C.get;return T===void 0?void 0:T.call(w)}},n=Hy(),i=aW(),a=s(i);function s(p){return p&&p.__esModule?p:{default:p}}function o(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function l(p,x){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:p}function u(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(p,x):p.__proto__=x)}var d=function(x){var v=x.substr(0,12).split("").map(function(w){return+w}).reduce(function(w,C,N){return N%2?w+C*3:w+C},0);return(10-v%10)%10},f=(function(p){u(x,p);function x(v,w){o(this,x),v.search(/^[0-9]{12}$/)!==-1&&(v+=d(v));var C=l(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,v,w));return C.lastChar=w.lastChar,C}return t(x,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===d(this.data)}},{key:"leftText",value:function(){return r(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var w=this.data.substr(1,6),C=n.EAN13_STRUCTURE[this.data[0]];return r(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"leftEncode",this).call(this,w,C)}},{key:"rightText",value:function(){return r(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var w=this.data.substr(7,6);return r(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"rightEncode",this).call(this,w,"RRRRRR")}},{key:"encodeGuarded",value:function(){var w=r(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(w.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(w.push({data:"00"}),w.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),w}}]),x})(a.default);return x1.default=f,x1}var j1={},AP;function Bje(){if(AP)return j1;AP=1,Object.defineProperty(j1,"__esModule",{value:!0});var t=(function(){function f(p,x){for(var v=0;v<x.length;v++){var w=x[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(p,w.key,w)}}return function(p,x,v){return x&&f(p.prototype,x),v&&f(p,v),p}})(),r=function f(p,x,v){p===null&&(p=Function.prototype);var w=Object.getOwnPropertyDescriptor(p,x);if(w===void 0){var C=Object.getPrototypeOf(p);return C===null?void 0:f(C,x,v)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(v)}},n=aW(),i=a(n);function a(f){return f&&f.__esModule?f:{default:f}}function s(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function o(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function l(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=function(p){var x=p.substr(0,7).split("").map(function(v){return+v}).reduce(function(v,w,C){return C%2?v+w:v+w*3},0);return(10-x%10)%10},d=(function(f){l(p,f);function p(x,v){return s(this,p),x.search(/^[0-9]{7}$/)!==-1&&(x+=u(x)),o(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,x,v))}return t(p,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===u(this.data)}},{key:"leftText",value:function(){return r(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var v=this.data.substr(0,4);return r(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"leftEncode",this).call(this,v,"LLLL")}},{key:"rightText",value:function(){return r(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var v=this.data.substr(4,4);return r(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"rightEncode",this).call(this,v,"RRRR")}}]),p})(i.default);return j1.default=d,j1}var w1={},EP;function Fje(){if(EP)return w1;EP=1,Object.defineProperty(w1,"__esModule",{value:!0});var t=(function(){function x(v,w){for(var C=0;C<w.length;C++){var N=w[C];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,C){return w&&x(v.prototype,w),C&&x(v,C),v}})(),r=Hy(),n=Vy(),i=o(n),a=qc(),s=o(a);function o(x){return x&&x.__esModule?x:{default:x}}function l(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function d(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var f=function(v){var w=v.split("").map(function(C){return+C}).reduce(function(C,N,T){return T%2?C+N*9:C+N*3},0);return w%10},p=(function(x){d(v,x);function v(w,C){return l(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w,C))}return t(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var C=r.EAN5_STRUCTURE[f(this.data)];return{data:"1011"+(0,i.default)(this.data,C,"01"),text:this.text}}}]),v})(s.default);return w1.default=p,w1}var S1={},_P;function qje(){if(_P)return S1;_P=1,Object.defineProperty(S1,"__esModule",{value:!0});var t=(function(){function p(x,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,v,w){return v&&p(x.prototype,v),w&&p(x,w),x}})(),r=Hy(),n=Vy(),i=o(n),a=qc(),s=o(a);function o(p){return p&&p.__esModule?p:{default:p}}function l(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function u(p,x){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:p}function d(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(p,x):p.__proto__=x)}var f=(function(p){d(x,p);function x(v,w){return l(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,v,w))}return t(x,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var w=r.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,i.default)(this.data,w,"01"),text:this.text}}}]),x})(s.default);return S1.default=f,S1}var dg={},TP;function sW(){if(TP)return dg;TP=1,Object.defineProperty(dg,"__esModule",{value:!0});var t=(function(){function p(x,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,v,w){return v&&p(x.prototype,v),w&&p(x,w),x}})();dg.checksum=f;var r=Vy(),n=s(r),i=qc(),a=s(i);function s(p){return p&&p.__esModule?p:{default:p}}function o(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function l(p,x){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:p}function u(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(p,x):p.__proto__=x)}var d=(function(p){u(x,p);function x(v,w){o(this,x),v.search(/^[0-9]{11}$/)!==-1&&(v+=f(v));var C=l(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,v,w));return C.displayValue=w.displayValue,w.fontSize>w.width*10?C.fontSize=w.width*10:C.fontSize=w.fontSize,C.guardHeight=w.height+C.fontSize/2+w.textMargin,C}return t(x,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==f(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var w="";return w+="101",w+=(0,n.default)(this.data.substr(0,6),"LLLLLL"),w+="01010",w+=(0,n.default)(this.data.substr(6,6),"RRRRRR"),w+="101",{data:w,text:this.text}}},{key:"guardedEncoding",value:function(){var w=[];return this.displayValue&&w.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),w.push({data:"101"+(0,n.default)(this.data[0],"L"),options:{height:this.guardHeight}}),w.push({data:(0,n.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),w.push({data:"01010",options:{height:this.guardHeight}}),w.push({data:(0,n.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),w.push({data:(0,n.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&w.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),w}}]),x})(a.default);function f(p){var x=0,v;for(v=1;v<11;v+=2)x+=parseInt(p[v]);for(v=0;v<11;v+=2)x+=parseInt(p[v])*3;return(10-x%10)%10}return dg.default=d,dg}var C1={},IP;function Uje(){if(IP)return C1;IP=1,Object.defineProperty(C1,"__esModule",{value:!0});var t=(function(){function w(C,N){for(var T=0;T<N.length;T++){var O=N[T];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,N,T){return N&&w(C.prototype,N),T&&w(C,T),C}})(),r=Vy(),n=o(r),i=qc(),a=o(i),s=sW();function o(w){return w&&w.__esModule?w:{default:w}}function l(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")}function u(w,C){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:w}function d(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);w.prototype=Object.create(C&&C.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(w,C):w.__proto__=C)}var f=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],p=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],x=(function(w){d(C,w);function C(N,T){l(this,C);var O=u(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,N,T));if(O.isValid=!1,N.search(/^[0-9]{6}$/)!==-1)O.middleDigits=N,O.upcA=v(N,"0"),O.text=T.text||""+O.upcA[0]+N+O.upcA[O.upcA.length-1],O.isValid=!0;else if(N.search(/^[01][0-9]{7}$/)!==-1)if(O.middleDigits=N.substring(1,N.length-1),O.upcA=v(O.middleDigits,N[0]),O.upcA[O.upcA.length-1]===N[N.length-1])O.isValid=!0;else return u(O);else return u(O);return O.displayValue=T.displayValue,T.fontSize>T.width*10?O.fontSize=T.width*10:O.fontSize=T.fontSize,O.guardHeight=T.height+O.fontSize/2+T.textMargin,O}return t(C,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var T="";return T+="101",T+=this.encodeMiddleDigits(),T+="010101",{data:T,text:this.text}}},{key:"guardedEncoding",value:function(){var T=[];return this.displayValue&&T.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),T.push({data:"101",options:{height:this.guardHeight}}),T.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),T.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&T.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),T}},{key:"encodeMiddleDigits",value:function(){var T=this.upcA[0],O=this.upcA[this.upcA.length-1],D=p[parseInt(O)][parseInt(T)];return(0,n.default)(this.middleDigits,D)}}]),C})(a.default);function v(w,C){for(var N=parseInt(w[w.length-1]),T=f[N],O="",D=0,M=0;M<T.length;M++){var Y=T[M];Y==="X"?O+=w[D++]:O+=Y}return O=""+C+O,""+O+(0,s.checksum)(O)}return C1.default=x,C1}var OP;function Wje(){if(OP)return Ll;OP=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.UPCE=Ll.UPC=Ll.EAN2=Ll.EAN5=Ll.EAN8=Ll.EAN13=void 0;var t=zje(),r=x(t),n=Bje(),i=x(n),a=Fje(),s=x(a),o=qje(),l=x(o),u=sW(),d=x(u),f=Uje(),p=x(f);function x(v){return v&&v.__esModule?v:{default:v}}return Ll.EAN13=r.default,Ll.EAN8=i.default,Ll.EAN5=s.default,Ll.EAN2=l.default,Ll.UPC=d.default,Ll.UPCE=p.default,Ll}var _f={},N1={},op={},kP;function Hje(){return kP||(kP=1,Object.defineProperty(op,"__esModule",{value:!0}),op.START_BIN="1010",op.END_BIN="11101",op.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),op}var DP;function oW(){if(DP)return N1;DP=1,Object.defineProperty(N1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=Hje(),n=qc(),i=a(n);function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(){return s(this,f),o(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return t(f,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var x=this,v=this.data.match(/.{2}/g).map(function(w){return x.encodePair(w)}).join("");return{data:r.START_BIN+v+r.END_BIN,text:this.text}}},{key:"encodePair",value:function(x){var v=r.BINARIES[x[1]];return r.BINARIES[x[0]].split("").map(function(w,C){return(w==="1"?"111":"1")+(v[C]==="1"?"000":"0")}).join("")}}]),f})(i.default);return N1.default=u,N1}var A1={},PP;function Vje(){if(PP)return A1;PP=1,Object.defineProperty(A1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=oW(),n=i(r);function i(d){return d&&d.__esModule?d:{default:d}}function a(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function s(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function o(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var l=function(f){var p=f.substr(0,13).split("").map(function(x){return parseInt(x,10)}).reduce(function(x,v,w){return x+v*(3-w%2*2)},0);return Math.ceil(p/10)*10-p},u=(function(d){o(f,d);function f(p,x){return a(this,f),p.search(/^[0-9]{13}$/)!==-1&&(p+=l(p)),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,x))}return t(f,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===l(this.data)}}]),f})(n.default);return A1.default=u,A1}var RP;function $je(){if(RP)return _f;RP=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.ITF14=_f.ITF=void 0;var t=oW(),r=a(t),n=Vje(),i=a(n);function a(s){return s&&s.__esModule?s:{default:s}}return _f.ITF=r.default,_f.ITF14=i.default,_f}var Nc={},E1={},MP;function $y(){if(MP)return E1;MP=1,Object.defineProperty(E1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=qc(),n=i(r);function i(d){return d&&d.__esModule?d:{default:d}}function a(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function s(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function o(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var l=(function(d){o(f,d);function f(p,x){return a(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,x))}return t(f,[{key:"encode",value:function(){for(var x="110",v=0;v<this.data.length;v++){var w=parseInt(this.data[v]),C=w.toString(2);C=u(C,4-C.length);for(var N=0;N<C.length;N++)x+=C[N]=="0"?"100":"110"}return x+="1001",{data:x,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),f})(n.default);function u(d,f){for(var p=0;p<f;p++)d="0"+d;return d}return E1.default=l,E1}var _1={},ug={},LP;function nj(){if(LP)return ug;LP=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.mod10=t,ug.mod11=r;function t(n){for(var i=0,a=0;a<n.length;a++){var s=parseInt(n[a]);(a+n.length)%2===0?i+=s:i+=s*2%10+Math.floor(s*2/10)}return(10-i%10)%10}function r(n){for(var i=0,a=[2,3,4,5,6,7],s=0;s<n.length;s++){var o=parseInt(n[n.length-1-s]);i+=a[s%a.length]*o}return(11-i%11)%11}return ug}var zP;function Gje(){if(zP)return _1;zP=1,Object.defineProperty(_1,"__esModule",{value:!0});var t=$y(),r=i(t),n=nj();function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){return a(this,d),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f+(0,n.mod10)(f),p))}return d})(r.default);return _1.default=l,_1}var T1={},BP;function Kje(){if(BP)return T1;BP=1,Object.defineProperty(T1,"__esModule",{value:!0});var t=$y(),r=i(t),n=nj();function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){return a(this,d),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f+(0,n.mod11)(f),p))}return d})(r.default);return T1.default=l,T1}var I1={},FP;function Qje(){if(FP)return I1;FP=1,Object.defineProperty(I1,"__esModule",{value:!0});var t=$y(),r=i(t),n=nj();function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){return a(this,d),f+=(0,n.mod10)(f),f+=(0,n.mod10)(f),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,p))}return d})(r.default);return I1.default=l,I1}var O1={},qP;function Yje(){if(qP)return O1;qP=1,Object.defineProperty(O1,"__esModule",{value:!0});var t=$y(),r=i(t),n=nj();function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){return a(this,d),f+=(0,n.mod11)(f),f+=(0,n.mod10)(f),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,p))}return d})(r.default);return O1.default=l,O1}var UP;function Zje(){if(UP)return Nc;UP=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.MSI1110=Nc.MSI1010=Nc.MSI11=Nc.MSI10=Nc.MSI=void 0;var t=$y(),r=f(t),n=Gje(),i=f(n),a=Kje(),s=f(a),o=Qje(),l=f(o),u=Yje(),d=f(u);function f(p){return p&&p.__esModule?p:{default:p}}return Nc.MSI=r.default,Nc.MSI10=i.default,Nc.MSI11=s.default,Nc.MSI1010=l.default,Nc.MSI1110=d.default,Nc}var hg={},WP;function Xje(){if(WP)return hg;WP=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.pharmacode=void 0;var t=(function(){function u(d,f){for(var p=0;p<f.length;p++){var x=f[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,f,p){return f&&u(d.prototype,f),p&&u(d,p),d}})(),r=qc(),n=i(r);function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){a(this,d);var x=s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,p));return x.number=parseInt(f,10),x}return t(d,[{key:"encode",value:function(){for(var p=this.number,x="";!isNaN(p)&&p!=0;)p%2===0?(x="11100"+x,p=(p-2)/2):(x="100"+x,p=(p-1)/2);return x=x.slice(0,-2),{data:x,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),d})(n.default);return hg.pharmacode=l,hg}var fg={},HP;function Jje(){if(HP)return fg;HP=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.codabar=void 0;var t=(function(){function u(d,f){for(var p=0;p<f.length;p++){var x=f[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,f,p){return f&&u(d.prototype,f),p&&u(d,p),d}})(),r=qc(),n=i(r);function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){a(this,d),f.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(f="A"+f+"A");var x=s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f.toUpperCase(),p));return x.text=x.options.text||x.text.replace(/[A-D]/g,""),x}return t(d,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var p=[],x=this.getEncodings(),v=0;v<this.data.length;v++)p.push(x[this.data.charAt(v)]),v!==this.data.length-1&&p.push("0");return{text:this.text,data:p.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),d})(n.default);return fg.codabar=l,fg}var Tf={},k1={},lp={},VP;function e5e(){return VP||(VP=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""],lp.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],lp.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),lp}var $P;function lW(){if($P)return k1;$P=1,Object.defineProperty(k1,"__esModule",{value:!0});var t=(function(){function d(f,p){for(var x=0;x<p.length;x++){var v=p[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,x){return p&&d(f.prototype,p),x&&d(f,x),f}})(),r=e5e(),n=qc(),i=a(n);function a(d){return d&&d.__esModule?d:{default:d}}function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function o(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function l(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var u=(function(d){l(f,d);function f(p,x){return s(this,f),o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,x))}return t(f,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var x=this.data.split("").flatMap(function(N){return r.MULTI_SYMBOLS[N]||N}),v=x.map(function(N){return f.getEncoding(N)}).join(""),w=f.checksum(x,20),C=f.checksum(x.concat(w),15);return{text:this.text,data:f.getEncoding("")+v+f.getEncoding(w)+f.getEncoding(C)+f.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(x){return r.BINARIES[f.symbolValue(x)]}},{key:"getSymbol",value:function(x){return r.SYMBOLS[x]}},{key:"symbolValue",value:function(x){return r.SYMBOLS.indexOf(x)}},{key:"checksum",value:function(x,v){var w=x.slice().reverse().reduce(function(C,N,T){var O=T%v+1;return C+f.symbolValue(N)*O},0);return f.getSymbol(w%47)}}]),f})(i.default);return k1.default=u,k1}var D1={},GP;function t5e(){if(GP)return D1;GP=1,Object.defineProperty(D1,"__esModule",{value:!0});var t=(function(){function u(d,f){for(var p=0;p<f.length;p++){var x=f[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,f,p){return f&&u(d.prototype,f),p&&u(d,p),d}})(),r=lW(),n=i(r);function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){return a(this,d),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,p))}return t(d,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),d})(n.default);return D1.default=l,D1}var KP;function r5e(){if(KP)return Tf;KP=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.CODE93FullASCII=Tf.CODE93=void 0;var t=lW(),r=a(t),n=t5e(),i=a(n);function a(s){return s&&s.__esModule?s:{default:s}}return Tf.CODE93=r.default,Tf.CODE93FullASCII=i.default,Tf}var mg={},QP;function n5e(){if(QP)return mg;QP=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.GenericBarcode=void 0;var t=(function(){function u(d,f){for(var p=0;p<f.length;p++){var x=f[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,f,p){return f&&u(d.prototype,f),p&&u(d,p),d}})(),r=qc(),n=i(r);function i(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function s(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function o(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var l=(function(u){o(d,u);function d(f,p){return a(this,d),s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,p))}return t(d,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),d})(n.default);return mg.GenericBarcode=l,mg}var YP;function i5e(){if(YP)return d1;YP=1,Object.defineProperty(d1,"__esModule",{value:!0});var t=Oje(),r=Lje(),n=Wje(),i=$je(),a=Zje(),s=Xje(),o=Jje(),l=r5e(),u=n5e();return d1.default={CODE39:t.CODE39,CODE128:r.CODE128,CODE128A:r.CODE128A,CODE128B:r.CODE128B,CODE128C:r.CODE128C,EAN13:n.EAN13,EAN8:n.EAN8,EAN5:n.EAN5,EAN2:n.EAN2,UPC:n.UPC,UPCE:n.UPCE,ITF14:i.ITF14,ITF:i.ITF,MSI:a.MSI,MSI10:a.MSI10,MSI11:a.MSI11,MSI1010:a.MSI1010,MSI1110:a.MSI1110,pharmacode:s.pharmacode,codabar:o.codabar,CODE93:l.CODE93,CODE93FullASCII:l.CODE93FullASCII,GenericBarcode:u.GenericBarcode},d1}var P1={},ZP;function ij(){if(ZP)return P1;ZP=1,Object.defineProperty(P1,"__esModule",{value:!0});var t=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r};return P1.default=function(r,n){return t({},r,n)},P1}var R1={},XP;function a5e(){if(XP)return R1;XP=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.default=t;function t(r){var n=[];function i(a){if(Array.isArray(a))for(var s=0;s<a.length;s++)i(a[s]);else a.text=a.text||"",a.data=a.data||"",n.push(a)}return i(r),n}return R1}var M1={},JP;function s5e(){if(JP)return M1;JP=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.default=t;function t(r){return r.marginTop=r.marginTop||r.margin,r.marginBottom=r.marginBottom||r.margin,r.marginRight=r.marginRight||r.margin,r.marginLeft=r.marginLeft||r.margin,r}return M1}var L1={},z1={},B1={},eR;function cW(){if(eR)return B1;eR=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.default=t;function t(r){var n=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var i in n)n.hasOwnProperty(i)&&(i=n[i],typeof r[i]=="string"&&(r[i]=parseInt(r[i],10)));return typeof r.displayValue=="string"&&(r.displayValue=r.displayValue!="false"),r}return B1}var F1={},tR;function dW(){if(tR)return F1;tR=1,Object.defineProperty(F1,"__esModule",{value:!0});var t={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return F1.default=t,F1}var rR;function o5e(){if(rR)return z1;rR=1,Object.defineProperty(z1,"__esModule",{value:!0});var t=cW(),r=a(t),n=dW(),i=a(n);function a(o){return o&&o.__esModule?o:{default:o}}function s(o){var l={};for(var u in i.default)i.default.hasOwnProperty(u)&&(o.hasAttribute("jsbarcode-"+u.toLowerCase())&&(l[u]=o.getAttribute("jsbarcode-"+u.toLowerCase())),o.hasAttribute("data-"+u.toLowerCase())&&(l[u]=o.getAttribute("data-"+u.toLowerCase())));return l.value=o.getAttribute("jsbarcode-value")||o.getAttribute("data-value"),l=(0,r.default)(l),l}return z1.default=s,z1}var q1={},U1={},Ac={},nR;function uW(){if(nR)return Ac;nR=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.getTotalWidthOfEncodings=Ac.calculateEncodingAttributes=Ac.getBarcodePadding=Ac.getEncodingHeight=Ac.getMaximumHeightOfEncodings=void 0;var t=ij(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function i(d,f){return f.height+(f.displayValue&&d.text.length>0?f.fontSize+f.textMargin:0)+f.marginTop+f.marginBottom}function a(d,f,p){if(p.displayValue&&f<d){if(p.textAlign=="center")return Math.floor((d-f)/2);if(p.textAlign=="left")return 0;if(p.textAlign=="right")return Math.floor(d-f)}return 0}function s(d,f,p){for(var x=0;x<d.length;x++){var v=d[x],w=(0,r.default)(f,v.options),C;w.displayValue?C=u(v.text,w,p):C=0;var N=v.data.length*w.width;v.width=Math.ceil(Math.max(C,N)),v.height=i(v,w),v.barcodePadding=a(C,N,w)}}function o(d){for(var f=0,p=0;p<d.length;p++)f+=d[p].width;return f}function l(d){for(var f=0,p=0;p<d.length;p++)d[p].height>f&&(f=d[p].height);return f}function u(d,f,p){var x;if(p)x=p;else if(typeof document<"u")x=document.createElement("canvas").getContext("2d");else return 0;x.font=f.fontOptions+" "+f.fontSize+"px "+f.font;var v=x.measureText(d);if(!v)return 0;var w=v.width;return w}return Ac.getMaximumHeightOfEncodings=l,Ac.getEncodingHeight=i,Ac.getBarcodePadding=a,Ac.calculateEncodingAttributes=s,Ac.getTotalWidthOfEncodings=o,Ac}var iR;function l5e(){if(iR)return U1;iR=1,Object.defineProperty(U1,"__esModule",{value:!0});var t=(function(){function l(u,d){for(var f=0;f<d.length;f++){var p=d[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,d,f){return d&&l(u.prototype,d),f&&l(u,f),u}})(),r=ij(),n=a(r),i=uW();function a(l){return l&&l.__esModule?l:{default:l}}function s(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function l(u,d,f){s(this,l),this.canvas=u,this.encodings=d,this.options=f}return t(l,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var d=0;d<this.encodings.length;d++){var f=(0,n.default)(this.options,this.encodings[d].options);this.drawCanvasBarcode(f,this.encodings[d]),this.drawCanvasText(f,this.encodings[d]),this.moveCanvasDrawing(this.encodings[d])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var d=this.canvas.getContext("2d");d.save(),(0,i.calculateEncodingAttributes)(this.encodings,this.options,d);var f=(0,i.getTotalWidthOfEncodings)(this.encodings),p=(0,i.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=f+this.options.marginLeft+this.options.marginRight,this.canvas.height=p,d.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(d.fillStyle=this.options.background,d.fillRect(0,0,this.canvas.width,this.canvas.height)),d.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(d,f){var p=this.canvas.getContext("2d"),x=f.data,v;d.textPosition=="top"?v=d.marginTop+d.fontSize+d.textMargin:v=d.marginTop,p.fillStyle=d.lineColor;for(var w=0;w<x.length;w++){var C=w*d.width+f.barcodePadding;x[w]==="1"?p.fillRect(C,v,d.width,d.height):x[w]&&p.fillRect(C,v,d.width,d.height*x[w])}}},{key:"drawCanvasText",value:function(d,f){var p=this.canvas.getContext("2d"),x=d.fontOptions+" "+d.fontSize+"px "+d.font;if(d.displayValue){var v,w;d.textPosition=="top"?w=d.marginTop+d.fontSize-d.textMargin:w=d.height+d.textMargin+d.marginTop+d.fontSize,p.font=x,d.textAlign=="left"||f.barcodePadding>0?(v=0,p.textAlign="left"):d.textAlign=="right"?(v=f.width-1,p.textAlign="right"):(v=f.width/2,p.textAlign="center"),p.fillText(f.text,v,w)}}},{key:"moveCanvasDrawing",value:function(d){var f=this.canvas.getContext("2d");f.translate(d.width,0)}},{key:"restoreCanvas",value:function(){var d=this.canvas.getContext("2d");d.restore()}}]),l})();return U1.default=o,U1}var W1={},aR;function c5e(){if(aR)return W1;aR=1,Object.defineProperty(W1,"__esModule",{value:!0});var t=(function(){function u(d,f){for(var p=0;p<f.length;p++){var x=f[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,f,p){return f&&u(d.prototype,f),p&&u(d,p),d}})(),r=ij(),n=a(r),i=uW();function a(u){return u&&u.__esModule?u:{default:u}}function s(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}var o="http://www.w3.org/2000/svg",l=(function(){function u(d,f,p){s(this,u),this.svg=d,this.encodings=f,this.options=p,this.document=p.xmlDocument||document}return t(u,[{key:"render",value:function(){var f=this.options.marginLeft;this.prepareSVG();for(var p=0;p<this.encodings.length;p++){var x=this.encodings[p],v=(0,n.default)(this.options,x.options),w=this.createGroup(f,v.marginTop,this.svg);this.setGroupOptions(w,v),this.drawSvgBarcode(w,v,x),this.drawSVGText(w,v,x),f+=x.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,i.calculateEncodingAttributes)(this.encodings,this.options);var f=(0,i.getTotalWidthOfEncodings)(this.encodings),p=(0,i.getMaximumHeightOfEncodings)(this.encodings),x=f+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(x,p),this.options.background&&this.drawRect(0,0,x,p,this.svg).setAttribute("fill",this.options.background)}},{key:"drawSvgBarcode",value:function(f,p,x){var v=x.data,w;p.textPosition=="top"?w=p.fontSize+p.textMargin:w=0;for(var C=0,N=0,T=0;T<v.length;T++)N=T*p.width+x.barcodePadding,v[T]==="1"?C++:C>0&&(this.drawRect(N-p.width*C,w,p.width*C,p.height,f),C=0);C>0&&this.drawRect(N-p.width*(C-1),w,p.width*C,p.height,f)}},{key:"drawSVGText",value:function(f,p,x){var v=this.document.createElementNS(o,"text");if(p.displayValue){var w,C;v.setAttribute("font-family",p.font),v.setAttribute("font-size",p.fontSize),p.fontOptions.includes("bold")&&v.setAttribute("font-weight","bold"),p.fontOptions.includes("italic")&&v.setAttribute("font-style","italic"),p.textPosition=="top"?C=p.fontSize-p.textMargin:C=p.height+p.textMargin+p.fontSize,p.textAlign=="left"||x.barcodePadding>0?(w=0,v.setAttribute("text-anchor","start")):p.textAlign=="right"?(w=x.width-1,v.setAttribute("text-anchor","end")):(w=x.width/2,v.setAttribute("text-anchor","middle")),v.setAttribute("x",w),v.setAttribute("y",C),v.appendChild(this.document.createTextNode(x.text)),f.appendChild(v)}}},{key:"setSvgAttributes",value:function(f,p){var x=this.svg;x.setAttribute("width",f+"px"),x.setAttribute("height",p+"px"),x.setAttribute("x","0px"),x.setAttribute("y","0px"),x.setAttribute("viewBox","0 0 "+f+" "+p),x.setAttribute("xmlns",o),x.setAttribute("version","1.1")}},{key:"createGroup",value:function(f,p,x){var v=this.document.createElementNS(o,"g");return v.setAttribute("transform","translate("+f+", "+p+")"),x.appendChild(v),v}},{key:"setGroupOptions",value:function(f,p){f.setAttribute("fill",p.lineColor)}},{key:"drawRect",value:function(f,p,x,v,w){var C=this.document.createElementNS(o,"rect");return C.setAttribute("x",f),C.setAttribute("y",p),C.setAttribute("width",x),C.setAttribute("height",v),w.appendChild(C),C}}]),u})();return W1.default=l,W1}var H1={},sR;function d5e(){if(sR)return H1;sR=1,Object.defineProperty(H1,"__esModule",{value:!0});var t=(function(){function i(a,s){for(var o=0;o<s.length;o++){var l=s[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,s,o){return s&&i(a.prototype,s),o&&i(a,o),a}})();function r(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}var n=(function(){function i(a,s,o){r(this,i),this.object=a,this.encodings=s,this.options=o}return t(i,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),i})();return H1.default=n,H1}var oR;function u5e(){if(oR)return q1;oR=1,Object.defineProperty(q1,"__esModule",{value:!0});var t=l5e(),r=o(t),n=c5e(),i=o(n),a=d5e(),s=o(a);function o(l){return l&&l.__esModule?l:{default:l}}return q1.default={CanvasRenderer:r.default,SVGRenderer:i.default,ObjectRenderer:s.default},q1}var cp={},lR;function hW(){if(lR)return cp;lR=1,Object.defineProperty(cp,"__esModule",{value:!0});function t(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function r(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function n(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var i=(function(o){n(l,o);function l(u,d){t(this,l);var f=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return f.name="InvalidInputException",f.symbology=u,f.input=d,f.message='"'+f.input+'" is not a valid input for '+f.symbology,f}return l})(Error),a=(function(o){n(l,o);function l(){t(this,l);var u=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return u.name="InvalidElementException",u.message="Not supported type to render on",u}return l})(Error),s=(function(o){n(l,o);function l(){t(this,l);var u=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return u.name="NoElementException",u.message="No element to render on.",u}return l})(Error);return cp.InvalidInputException=i,cp.InvalidElementException=a,cp.NoElementException=s,cp}var cR;function h5e(){if(cR)return L1;cR=1,Object.defineProperty(L1,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},r=o5e(),n=o(r),i=u5e(),a=o(i),s=hW();function o(f){return f&&f.__esModule?f:{default:f}}function l(f){if(typeof f=="string")return u(f);if(Array.isArray(f)){for(var p=[],x=0;x<f.length;x++)p.push(l(f[x]));return p}else{if(typeof HTMLCanvasElement<"u"&&f instanceof HTMLImageElement)return d(f);if(f&&f.nodeName&&f.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&f instanceof SVGElement)return{element:f,options:(0,n.default)(f),renderer:a.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement)return{element:f,options:(0,n.default)(f),renderer:a.default.CanvasRenderer};if(f&&f.getContext)return{element:f,renderer:a.default.CanvasRenderer};if(f&&(typeof f>"u"?"undefined":t(f))==="object"&&!f.nodeName)return{element:f,renderer:a.default.ObjectRenderer};throw new s.InvalidElementException}}function u(f){var p=document.querySelectorAll(f);if(p.length!==0){for(var x=[],v=0;v<p.length;v++)x.push(l(p[v]));return x}}function d(f){var p=document.createElement("canvas");return{element:p,options:(0,n.default)(f),renderer:a.default.CanvasRenderer,afterRender:function(){f.setAttribute("src",p.toDataURL())}}}return L1.default=l,L1}var V1={},dR;function f5e(){if(dR)return V1;dR=1,Object.defineProperty(V1,"__esModule",{value:!0});var t=(function(){function i(a,s){for(var o=0;o<s.length;o++){var l=s[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,s,o){return s&&i(a.prototype,s),o&&i(a,o),a}})();function r(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}var n=(function(){function i(a){r(this,i),this.api=a}return t(i,[{key:"handleCatch",value:function(s){if(s.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw s.message;else throw s;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(s){try{var o=s.apply(void 0,arguments);return this.api._options.valid(!0),o}catch(l){return this.handleCatch(l),this.api}}}]),i})();return V1.default=n,V1}var SS,uR;function m5e(){if(uR)return SS;uR=1;var t=i5e(),r=T(t),n=ij(),i=T(n),a=a5e(),s=T(a),o=s5e(),l=T(o),u=h5e(),d=T(u),f=cW(),p=T(f),x=f5e(),v=T(x),w=hW(),C=dW(),N=T(C);function T(z){return z&&z.__esModule?z:{default:z}}var O=function(){},D=function(G,ne,Z){var ie=new O;if(typeof G>"u")throw Error("No element to render on was provided.");return ie._renderProperties=(0,d.default)(G),ie._encodings=[],ie._options=N.default,ie._errorHandler=new v.default(ie),typeof ne<"u"&&(Z=Z||{},Z.format||(Z.format=W()),ie.options(Z)[Z.format](ne,Z).render()),ie};D.getModule=function(z){return r.default[z]};for(var M in r.default)r.default.hasOwnProperty(M)&&Y(r.default,M);function Y(z,G){O.prototype[G]=O.prototype[G.toUpperCase()]=O.prototype[G.toLowerCase()]=function(ne,Z){var ie=this;return ie._errorHandler.wrapBarcodeCall(function(){Z.text=typeof Z.text>"u"?void 0:""+Z.text;var me=(0,i.default)(ie._options,Z);me=(0,p.default)(me);var ce=z[G],Q=q(ne,ce,me);return ie._encodings.push(Q),ie})}}function q(z,G,ne){z=""+z;var Z=new G(z,ne);if(!Z.valid())throw new w.InvalidInputException(Z.constructor.name,z);var ie=Z.encode();ie=(0,s.default)(ie);for(var me=0;me<ie.length;me++)ie[me].options=(0,i.default)(ne,ie[me].options);return ie}function W(){return r.default.CODE128?"CODE128":Object.keys(r.default)[0]}O.prototype.options=function(z){return this._options=(0,i.default)(this._options,z),this},O.prototype.blank=function(z){var G=new Array(z+1).join("0");return this._encodings.push({data:G}),this},O.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var z;for(var G in this._renderProperties){z=this._renderProperties[G];var ne=(0,i.default)(this._options,z.options);ne.format=="auto"&&(ne.format=W()),this._errorHandler.wrapBarcodeCall(function(){var Z=ne.value,ie=r.default[ne.format.toUpperCase()],me=q(Z,ie,ne);J(z,me,ne)})}}},O.prototype.render=function(){if(!this._renderProperties)throw new w.NoElementException;if(Array.isArray(this._renderProperties))for(var z=0;z<this._renderProperties.length;z++)J(this._renderProperties[z],this._encodings,this._options);else J(this._renderProperties,this._encodings,this._options);return this},O.prototype._defaults=N.default;function J(z,G,ne){G=(0,s.default)(G);for(var Z=0;Z<G.length;Z++)G[Z].options=(0,i.default)(ne,G[Z].options),(0,l.default)(G[Z].options);(0,l.default)(ne);var ie=z.renderer,me=new ie(z.element,G,ne);me.render(),z.afterRender&&z.afterRender()}return typeof window<"u"&&(window.JsBarcode=D),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(z,G){var ne=[];return jQuery(this).each(function(){ne.push(this)}),D(ne,z,G)}),SS=D,SS}var p5e=m5e();const g5e=hc(p5e);var dp={},CS,hR;function y5e(){return hR||(hR=1,CS=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),CS}var NS={},Vh={},fR;function Am(){if(fR)return Vh;fR=1;let t;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Vh.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Vh.getSymbolTotalCodewords=function(i){return r[i]},Vh.getBCHDigit=function(n){let i=0;for(;n!==0;)i++,n>>>=1;return i},Vh.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},Vh.isKanjiModeEnabled=function(){return typeof t<"u"},Vh.toSJIS=function(i){return t(i)},Vh}var AS={},mR;function Q_(){return mR||(mR=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,a){if(t.isValid(i))return i;try{return r(i)}catch{return a}}})(AS)),AS}var ES,pR;function x5e(){if(pR)return ES;pR=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(r){const n=Math.floor(r/8);return(this.buffer[n]>>>7-r%8&1)===1},put:function(r,n){for(let i=0;i<n;i++)this.putBit((r>>>n-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),r&&(this.buffer[n]|=128>>>this.length%8),this.length++}},ES=t,ES}var _S,gR;function v5e(){if(gR)return _S;gR=1;function t(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return t.prototype.set=function(r,n,i,a){const s=r*this.size+n;this.data[s]=i,a&&(this.reservedBit[s]=!0)},t.prototype.get=function(r,n){return this.data[r*this.size+n]},t.prototype.xor=function(r,n,i){this.data[r*this.size+n]^=i},t.prototype.isReserved=function(r,n){return this.reservedBit[r*this.size+n]},_S=t,_S}var TS={},yR;function b5e(){return yR||(yR=1,(function(t){const r=Am().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,s=r(i),o=s===145?26:Math.ceil((s-13)/(2*a-2))*2,l=[s-7];for(let u=1;u<a-1;u++)l[u]=l[u-1]-o;return l.push(6),l.reverse()},t.getPositions=function(i){const a=[],s=t.getRowColCoords(i),o=s.length;for(let l=0;l<o;l++)for(let u=0;u<o;u++)l===0&&u===0||l===0&&u===o-1||l===o-1&&u===0||a.push([s[l],s[u]]);return a}})(TS)),TS}var IS={},xR;function j5e(){if(xR)return IS;xR=1;const t=Am().getSymbolSize,r=7;return IS.getPositions=function(i){const a=t(i);return[[0,0],[a-r,0],[0,a-r]]},IS}var OS={},vR;function w5e(){return vR||(vR=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},t.from=function(a){return t.isValid(a)?parseInt(a,10):void 0},t.getPenaltyN1=function(a){const s=a.size;let o=0,l=0,u=0,d=null,f=null;for(let p=0;p<s;p++){l=u=0,d=f=null;for(let x=0;x<s;x++){let v=a.get(p,x);v===d?l++:(l>=5&&(o+=r.N1+(l-5)),d=v,l=1),v=a.get(x,p),v===f?u++:(u>=5&&(o+=r.N1+(u-5)),f=v,u=1)}l>=5&&(o+=r.N1+(l-5)),u>=5&&(o+=r.N1+(u-5))}return o},t.getPenaltyN2=function(a){const s=a.size;let o=0;for(let l=0;l<s-1;l++)for(let u=0;u<s-1;u++){const d=a.get(l,u)+a.get(l,u+1)+a.get(l+1,u)+a.get(l+1,u+1);(d===4||d===0)&&o++}return o*r.N2},t.getPenaltyN3=function(a){const s=a.size;let o=0,l=0,u=0;for(let d=0;d<s;d++){l=u=0;for(let f=0;f<s;f++)l=l<<1&2047|a.get(d,f),f>=10&&(l===1488||l===93)&&o++,u=u<<1&2047|a.get(f,d),f>=10&&(u===1488||u===93)&&o++}return o*r.N3},t.getPenaltyN4=function(a){let s=0;const o=a.data.length;for(let u=0;u<o;u++)s+=a.data[u];return Math.abs(Math.ceil(s*100/o/5)-10)*r.N4};function n(i,a,s){switch(i){case t.Patterns.PATTERN000:return(a+s)%2===0;case t.Patterns.PATTERN001:return a%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(a+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return a*s%2+a*s%3===0;case t.Patterns.PATTERN110:return(a*s%2+a*s%3)%2===0;case t.Patterns.PATTERN111:return(a*s%3+(a+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(a,s){const o=s.size;for(let l=0;l<o;l++)for(let u=0;u<o;u++)s.isReserved(u,l)||s.xor(u,l,n(a,u,l))},t.getBestMask=function(a,s){const o=Object.keys(t.Patterns).length;let l=0,u=1/0;for(let d=0;d<o;d++){s(d),t.applyMask(d,a);const f=t.getPenaltyN1(a)+t.getPenaltyN2(a)+t.getPenaltyN3(a)+t.getPenaltyN4(a);t.applyMask(d,a),f<u&&(u=f,l=d)}return l}})(OS)),OS}var $1={},bR;function fW(){if(bR)return $1;bR=1;const t=Q_(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return $1.getBlocksCount=function(a,s){switch(s){case t.L:return r[(a-1)*4+0];case t.M:return r[(a-1)*4+1];case t.Q:return r[(a-1)*4+2];case t.H:return r[(a-1)*4+3];default:return}},$1.getTotalCodewordsCount=function(a,s){switch(s){case t.L:return n[(a-1)*4+0];case t.M:return n[(a-1)*4+1];case t.Q:return n[(a-1)*4+2];case t.H:return n[(a-1)*4+3];default:return}},$1}var kS={},pg={},jR;function S5e(){if(jR)return pg;jR=1;const t=new Uint8Array(512),r=new Uint8Array(256);return(function(){let i=1;for(let a=0;a<255;a++)t[a]=i,r[i]=a,i<<=1,i&256&&(i^=285);for(let a=255;a<512;a++)t[a]=t[a-255]})(),pg.log=function(i){if(i<1)throw new Error("log("+i+")");return r[i]},pg.exp=function(i){return t[i]},pg.mul=function(i,a){return i===0||a===0?0:t[r[i]+r[a]]},pg}var wR;function C5e(){return wR||(wR=1,(function(t){const r=S5e();t.mul=function(i,a){const s=new Uint8Array(i.length+a.length-1);for(let o=0;o<i.length;o++)for(let l=0;l<a.length;l++)s[o+l]^=r.mul(i[o],a[l]);return s},t.mod=function(i,a){let s=new Uint8Array(i);for(;s.length-a.length>=0;){const o=s[0];for(let u=0;u<a.length;u++)s[u]^=r.mul(a[u],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},t.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let s=0;s<i;s++)a=t.mul(a,new Uint8Array([1,r.exp(s)]));return a}})(kS)),kS}var DS,SR;function N5e(){if(SR)return DS;SR=1;const t=C5e();function r(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},r.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(i.length+this.degree);a.set(i);const s=t.mod(a,this.genPoly),o=this.degree-s.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(s,o),l}return s},DS=r,DS}var PS={},RS={},MS={},CR;function mW(){return CR||(CR=1,MS.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),MS}var Xd={},NR;function pW(){if(NR)return Xd;NR=1;const t="[0-9]+",r="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;Xd.KANJI=new RegExp(n,"g"),Xd.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Xd.BYTE=new RegExp(i,"g"),Xd.NUMERIC=new RegExp(t,"g"),Xd.ALPHANUMERIC=new RegExp(r,"g");const a=new RegExp("^"+n+"$"),s=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Xd.testKanji=function(u){return a.test(u)},Xd.testNumeric=function(u){return s.test(u)},Xd.testAlphanumeric=function(u){return o.test(u)},Xd}var AR;function Em(){return AR||(AR=1,(function(t){const r=mW(),n=pW();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!r.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+a)}}t.from=function(s,o){if(t.isValid(s))return s;try{return i(s)}catch{return o}}})(RS)),RS}var ER;function A5e(){return ER||(ER=1,(function(t){const r=Am(),n=fW(),i=Q_(),a=Em(),s=mW(),o=7973,l=r.getBCHDigit(o);function u(x,v,w){for(let C=1;C<=40;C++)if(v<=t.getCapacity(C,w,x))return C}function d(x,v){return a.getCharCountIndicator(x,v)+4}function f(x,v){let w=0;return x.forEach(function(C){const N=d(C.mode,v);w+=N+C.getBitsLength()}),w}function p(x,v){for(let w=1;w<=40;w++)if(f(x,w)<=t.getCapacity(w,v,a.MIXED))return w}t.from=function(v,w){return s.isValid(v)?parseInt(v,10):w},t.getCapacity=function(v,w,C){if(!s.isValid(v))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=a.BYTE);const N=r.getSymbolTotalCodewords(v),T=n.getTotalCodewordsCount(v,w),O=(N-T)*8;if(C===a.MIXED)return O;const D=O-d(C,v);switch(C){case a.NUMERIC:return Math.floor(D/10*3);case a.ALPHANUMERIC:return Math.floor(D/11*2);case a.KANJI:return Math.floor(D/13);case a.BYTE:default:return Math.floor(D/8)}},t.getBestVersionForData=function(v,w){let C;const N=i.from(w,i.M);if(Array.isArray(v)){if(v.length>1)return p(v,N);if(v.length===0)return 1;C=v[0]}else C=v;return u(C.mode,C.getLength(),N)},t.getEncodedBits=function(v){if(!s.isValid(v)||v<7)throw new Error("Invalid QR Code version");let w=v<<12;for(;r.getBCHDigit(w)-l>=0;)w^=o<<r.getBCHDigit(w)-l;return v<<12|w}})(PS)),PS}var LS={},_R;function E5e(){if(_R)return LS;_R=1;const t=Am(),r=1335,n=21522,i=t.getBCHDigit(r);return LS.getEncodedBits=function(s,o){const l=s.bit<<3|o;let u=l<<10;for(;t.getBCHDigit(u)-i>=0;)u^=r<<t.getBCHDigit(u)-i;return(l<<10|u)^n},LS}var zS={},BS,TR;function _5e(){if(TR)return BS;TR=1;const t=Em();function r(n){this.mode=t.NUMERIC,this.data=n.toString()}return r.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let a,s,o;for(a=0;a+3<=this.data.length;a+=3)s=this.data.substr(a,3),o=parseInt(s,10),i.put(o,10);const l=this.data.length-a;l>0&&(s=this.data.substr(a),o=parseInt(s,10),i.put(o,l*3+1))},BS=r,BS}var FS,IR;function T5e(){if(IR)return FS;IR=1;const t=Em(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(i){this.mode=t.ALPHANUMERIC,this.data=i}return n.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(a){let s;for(s=0;s+2<=this.data.length;s+=2){let o=r.indexOf(this.data[s])*45;o+=r.indexOf(this.data[s+1]),a.put(o,11)}this.data.length%2&&a.put(r.indexOf(this.data[s]),6)},FS=n,FS}var qS,OR;function I5e(){if(OR)return qS;OR=1;const t=Em();function r(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return r.getBitsLength=function(i){return i*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){for(let i=0,a=this.data.length;i<a;i++)n.put(this.data[i],8)},qS=r,qS}var US,kR;function O5e(){if(kR)return US;kR=1;const t=Em(),r=Am();function n(i){this.mode=t.KANJI,this.data=i}return n.getBitsLength=function(a){return a*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let a;for(a=0;a<this.data.length;a++){let s=r.toSJIS(this.data[a]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),i.put(s,13)}},US=n,US}var WS={exports:{}},DR;function k5e(){return DR||(DR=1,(function(t){var r={single_source_shortest_paths:function(n,i,a){var s={},o={};o[i]=0;var l=r.PriorityQueue.make();l.push(i,0);for(var u,d,f,p,x,v,w,C,N;!l.empty();){u=l.pop(),d=u.value,p=u.cost,x=n[d]||{};for(f in x)x.hasOwnProperty(f)&&(v=x[f],w=p+v,C=o[f],N=typeof o[f]>"u",(N||C>w)&&(o[f]=w,l.push(f,w),s[f]=d))}if(typeof a<"u"&&typeof o[a]>"u"){var T=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(T)}return s},extract_shortest_path_from_predecessor_list:function(n,i){for(var a=[],s=i;s;)a.push(s),n[s],s=n[s];return a.reverse(),a},find_path:function(n,i,a){var s=r.single_source_shortest_paths(n,i,a);return r.extract_shortest_path_from_predecessor_list(s,a)},PriorityQueue:{make:function(n){var i=r.PriorityQueue,a={},s;n=n||{};for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);return a.queue=[],a.sorter=n.sorter||i.default_sorter,a},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var a={value:n,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(WS)),WS.exports}var PR;function D5e(){return PR||(PR=1,(function(t){const r=Em(),n=_5e(),i=T5e(),a=I5e(),s=O5e(),o=pW(),l=Am(),u=k5e();function d(T){return unescape(encodeURIComponent(T)).length}function f(T,O,D){const M=[];let Y;for(;(Y=T.exec(D))!==null;)M.push({data:Y[0],index:Y.index,mode:O,length:Y[0].length});return M}function p(T){const O=f(o.NUMERIC,r.NUMERIC,T),D=f(o.ALPHANUMERIC,r.ALPHANUMERIC,T);let M,Y;return l.isKanjiModeEnabled()?(M=f(o.BYTE,r.BYTE,T),Y=f(o.KANJI,r.KANJI,T)):(M=f(o.BYTE_KANJI,r.BYTE,T),Y=[]),O.concat(D,M,Y).sort(function(W,J){return W.index-J.index}).map(function(W){return{data:W.data,mode:W.mode,length:W.length}})}function x(T,O){switch(O){case r.NUMERIC:return n.getBitsLength(T);case r.ALPHANUMERIC:return i.getBitsLength(T);case r.KANJI:return s.getBitsLength(T);case r.BYTE:return a.getBitsLength(T)}}function v(T){return T.reduce(function(O,D){const M=O.length-1>=0?O[O.length-1]:null;return M&&M.mode===D.mode?(O[O.length-1].data+=D.data,O):(O.push(D),O)},[])}function w(T){const O=[];for(let D=0;D<T.length;D++){const M=T[D];switch(M.mode){case r.NUMERIC:O.push([M,{data:M.data,mode:r.ALPHANUMERIC,length:M.length},{data:M.data,mode:r.BYTE,length:M.length}]);break;case r.ALPHANUMERIC:O.push([M,{data:M.data,mode:r.BYTE,length:M.length}]);break;case r.KANJI:O.push([M,{data:M.data,mode:r.BYTE,length:d(M.data)}]);break;case r.BYTE:O.push([{data:M.data,mode:r.BYTE,length:d(M.data)}])}}return O}function C(T,O){const D={},M={start:{}};let Y=["start"];for(let q=0;q<T.length;q++){const W=T[q],J=[];for(let z=0;z<W.length;z++){const G=W[z],ne=""+q+z;J.push(ne),D[ne]={node:G,lastCount:0},M[ne]={};for(let Z=0;Z<Y.length;Z++){const ie=Y[Z];D[ie]&&D[ie].node.mode===G.mode?(M[ie][ne]=x(D[ie].lastCount+G.length,G.mode)-x(D[ie].lastCount,G.mode),D[ie].lastCount+=G.length):(D[ie]&&(D[ie].lastCount=G.length),M[ie][ne]=x(G.length,G.mode)+4+r.getCharCountIndicator(G.mode,O))}}Y=J}for(let q=0;q<Y.length;q++)M[Y[q]].end=0;return{map:M,table:D}}function N(T,O){let D;const M=r.getBestModeForData(T);if(D=r.from(O,M),D!==r.BYTE&&D.bit<M.bit)throw new Error('"'+T+'" cannot be encoded with mode '+r.toString(D)+`.
 Suggested mode is: `+r.toString(M));switch(D===r.KANJI&&!l.isKanjiModeEnabled()&&(D=r.BYTE),D){case r.NUMERIC:return new n(T);case r.ALPHANUMERIC:return new i(T);case r.KANJI:return new s(T);case r.BYTE:return new a(T)}}t.fromArray=function(O){return O.reduce(function(D,M){return typeof M=="string"?D.push(N(M,null)):M.data&&D.push(N(M.data,M.mode)),D},[])},t.fromString=function(O,D){const M=p(O,l.isKanjiModeEnabled()),Y=w(M),q=C(Y,D),W=u.find_path(q.map,"start","end"),J=[];for(let z=1;z<W.length-1;z++)J.push(q.table[W[z]].node);return t.fromArray(v(J))},t.rawSplit=function(O){return t.fromArray(p(O,l.isKanjiModeEnabled()))}})(zS)),zS}var RR;function P5e(){if(RR)return NS;RR=1;const t=Am(),r=Q_(),n=x5e(),i=v5e(),a=b5e(),s=j5e(),o=w5e(),l=fW(),u=N5e(),d=A5e(),f=E5e(),p=Em(),x=D5e();function v(q,W){const J=q.size,z=s.getPositions(W);for(let G=0;G<z.length;G++){const ne=z[G][0],Z=z[G][1];for(let ie=-1;ie<=7;ie++)if(!(ne+ie<=-1||J<=ne+ie))for(let me=-1;me<=7;me++)Z+me<=-1||J<=Z+me||(ie>=0&&ie<=6&&(me===0||me===6)||me>=0&&me<=6&&(ie===0||ie===6)||ie>=2&&ie<=4&&me>=2&&me<=4?q.set(ne+ie,Z+me,!0,!0):q.set(ne+ie,Z+me,!1,!0))}}function w(q){const W=q.size;for(let J=8;J<W-8;J++){const z=J%2===0;q.set(J,6,z,!0),q.set(6,J,z,!0)}}function C(q,W){const J=a.getPositions(W);for(let z=0;z<J.length;z++){const G=J[z][0],ne=J[z][1];for(let Z=-2;Z<=2;Z++)for(let ie=-2;ie<=2;ie++)Z===-2||Z===2||ie===-2||ie===2||Z===0&&ie===0?q.set(G+Z,ne+ie,!0,!0):q.set(G+Z,ne+ie,!1,!0)}}function N(q,W){const J=q.size,z=d.getEncodedBits(W);let G,ne,Z;for(let ie=0;ie<18;ie++)G=Math.floor(ie/3),ne=ie%3+J-8-3,Z=(z>>ie&1)===1,q.set(G,ne,Z,!0),q.set(ne,G,Z,!0)}function T(q,W,J){const z=q.size,G=f.getEncodedBits(W,J);let ne,Z;for(ne=0;ne<15;ne++)Z=(G>>ne&1)===1,ne<6?q.set(ne,8,Z,!0):ne<8?q.set(ne+1,8,Z,!0):q.set(z-15+ne,8,Z,!0),ne<8?q.set(8,z-ne-1,Z,!0):ne<9?q.set(8,15-ne-1+1,Z,!0):q.set(8,15-ne-1,Z,!0);q.set(z-8,8,1,!0)}function O(q,W){const J=q.size;let z=-1,G=J-1,ne=7,Z=0;for(let ie=J-1;ie>0;ie-=2)for(ie===6&&ie--;;){for(let me=0;me<2;me++)if(!q.isReserved(G,ie-me)){let ce=!1;Z<W.length&&(ce=(W[Z]>>>ne&1)===1),q.set(G,ie-me,ce),ne--,ne===-1&&(Z++,ne=7)}if(G+=z,G<0||J<=G){G-=z,z=-z;break}}}function D(q,W,J){const z=new n;J.forEach(function(me){z.put(me.mode.bit,4),z.put(me.getLength(),p.getCharCountIndicator(me.mode,q)),me.write(z)});const G=t.getSymbolTotalCodewords(q),ne=l.getTotalCodewordsCount(q,W),Z=(G-ne)*8;for(z.getLengthInBits()+4<=Z&&z.put(0,4);z.getLengthInBits()%8!==0;)z.putBit(0);const ie=(Z-z.getLengthInBits())/8;for(let me=0;me<ie;me++)z.put(me%2?17:236,8);return M(z,q,W)}function M(q,W,J){const z=t.getSymbolTotalCodewords(W),G=l.getTotalCodewordsCount(W,J),ne=z-G,Z=l.getBlocksCount(W,J),ie=z%Z,me=Z-ie,ce=Math.floor(z/Z),Q=Math.floor(ne/Z),de=Q+1,le=ce-Q,ye=new u(le);let Se=0;const $=new Array(Z),X=new Array(Z);let se=0;const H=new Uint8Array(q.buffer);for(let ke=0;ke<Z;ke++){const He=ke<me?Q:de;$[ke]=H.slice(Se,Se+He),X[ke]=ye.encode($[ke]),Se+=He,se=Math.max(se,He)}const oe=new Uint8Array(z);let ge=0,be,Le;for(be=0;be<se;be++)for(Le=0;Le<Z;Le++)be<$[Le].length&&(oe[ge++]=$[Le][be]);for(be=0;be<le;be++)for(Le=0;Le<Z;Le++)oe[ge++]=X[Le][be];return oe}function Y(q,W,J,z){let G;if(Array.isArray(q))G=x.fromArray(q);else if(typeof q=="string"){let ce=W;if(!ce){const Q=x.rawSplit(q);ce=d.getBestVersionForData(Q,J)}G=x.fromString(q,ce||40)}else throw new Error("Invalid data");const ne=d.getBestVersionForData(G,J);if(!ne)throw new Error("The amount of data is too big to be stored in a QR Code");if(!W)W=ne;else if(W<ne)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ne+`.
`);const Z=D(W,J,G),ie=t.getSymbolSize(W),me=new i(ie);return v(me,W),w(me),C(me,W),T(me,J,0),W>=7&&N(me,W),O(me,Z),isNaN(z)&&(z=o.getBestMask(me,T.bind(null,me,J))),o.applyMask(z,me),T(me,J,z),{modules:me,version:W,errorCorrectionLevel:J,maskPattern:z,segments:G}}return NS.create=function(W,J){if(typeof W>"u"||W==="")throw new Error("No input text");let z=r.M,G,ne;return typeof J<"u"&&(z=r.from(J.errorCorrectionLevel,r.M),G=d.from(J.version),ne=o.from(J.maskPattern),J.toSJISFunc&&t.setToSJISFunction(J.toSJISFunc)),Y(W,G,z,ne)},NS}var HS={},VS={},MR;function gW(){return MR||(MR=1,(function(t){function r(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:a,color:{dark:r(i.color.dark||"#000000ff"),light:r(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},t.getImageWidth=function(i,a){const s=t.getScale(i,a);return Math.floor((i+a.margin*2)*s)},t.qrToImageData=function(i,a,s){const o=a.modules.size,l=a.modules.data,u=t.getScale(o,s),d=Math.floor((o+s.margin*2)*u),f=s.margin*u,p=[s.color.light,s.color.dark];for(let x=0;x<d;x++)for(let v=0;v<d;v++){let w=(x*d+v)*4,C=s.color.light;if(x>=f&&v>=f&&x<d-f&&v<d-f){const N=Math.floor((x-f)/u),T=Math.floor((v-f)/u);C=p[l[N*o+T]?1:0]}i[w++]=C.r,i[w++]=C.g,i[w++]=C.b,i[w]=C.a}}})(VS)),VS}var LR;function R5e(){return LR||(LR=1,(function(t){const r=gW();function n(a,s,o){a.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,l){let u=l,d=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(d=i()),u=r.getOptions(u);const f=r.getImageWidth(s.modules.size,u),p=d.getContext("2d"),x=p.createImageData(f,f);return r.qrToImageData(x.data,s,u),n(p,d,f),p.putImageData(x,0,0),d},t.renderToDataURL=function(s,o,l){let u=l;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const d=t.render(s,o,u),f=u.type||"image/png",p=u.rendererOpts||{};return d.toDataURL(f,p.quality)}})(HS)),HS}var $S={},zR;function M5e(){if(zR)return $S;zR=1;const t=gW();function r(a,s){const o=a.a/255,l=s+'="'+a.hex+'"';return o<1?l+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function n(a,s,o){let l=a+s;return typeof o<"u"&&(l+=" "+o),l}function i(a,s,o){let l="",u=0,d=!1,f=0;for(let p=0;p<a.length;p++){const x=Math.floor(p%s),v=Math.floor(p/s);!x&&!d&&(d=!0),a[p]?(f++,p>0&&x>0&&a[p-1]||(l+=d?n("M",x+o,.5+v+o):n("m",u,0),u=0,d=!1),x+1<s&&a[p+1]||(l+=n("h",f),f=0)):u++}return l}return $S.render=function(s,o,l){const u=t.getOptions(o),d=s.modules.size,f=s.modules.data,p=d+u.margin*2,x=u.color.light.a?"<path "+r(u.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",v="<path "+r(u.color.dark,"stroke")+' d="'+i(f,d,u.margin)+'"/>',w='viewBox="0 0 '+p+" "+p+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+w+' shape-rendering="crispEdges">'+x+v+`</svg>
`;return typeof l=="function"&&l(null,N),N},$S}var BR;function L5e(){if(BR)return dp;BR=1;const t=y5e(),r=P5e(),n=R5e(),i=M5e();function a(s,o,l,u,d){const f=[].slice.call(arguments,1),p=f.length,x=typeof f[p-1]=="function";if(!x&&!t())throw new Error("Callback required as last argument");if(x){if(p<2)throw new Error("Too few arguments provided");p===2?(d=l,l=o,o=u=void 0):p===3&&(o.getContext&&typeof d>"u"?(d=u,u=void 0):(d=u,u=l,l=o,o=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(l=o,o=u=void 0):p===2&&!o.getContext&&(u=l,l=o,o=void 0),new Promise(function(v,w){try{const C=r.create(l,u);v(s(C,o,u))}catch(C){w(C)}})}try{const v=r.create(l,u);d(null,s(v,o,u))}catch(v){d(v)}}return dp.create=r.create,dp.toCanvas=a.bind(null,n.render),dp.toDataURL=a.bind(null,n.renderToDataURL),dp.toString=a.bind(null,function(s,o,l){return i.render(s,l)}),dp}var z5e=L5e();const yW=hc(z5e);function Y_({data:t,size:r="medium",showPrintButton:n=!0}){const i=k.useRef(null),a=k.useRef(null),s=k.useRef(null),l={small:{width:200,height:100,fontSize:10,qrSize:50},medium:{width:300,height:150,fontSize:12,qrSize:80},large:{width:400,height:200,fontSize:14,qrSize:100}}[r];k.useEffect(()=>{if(i.current&&t.barcodeData)try{g5e(i.current,t.barcodeData,{format:"CODE128",width:1.5,height:40,displayValue:!0,fontSize:l.fontSize,margin:5})}catch(f){console.error("Barcode generation error:",f)}},[t.barcodeData,l.fontSize]),k.useEffect(()=>{a.current&&t.qrData&&yW.toCanvas(a.current,t.qrData,{width:l.qrSize,margin:1,color:{dark:"#000000",light:"#ffffff"}}).catch(f=>console.error("QR code generation error:",f))},[t.qrData,l.qrSize]);const u=async()=>{if(!s.current)return;const f=window.open("","_blank");if(!f)return;let p="";a.current&&(p=a.current.toDataURL("image/png"));let x=s.current.innerHTML;p&&a.current&&(x=x.replace(/<canvas[^>]*><\/canvas>/i,`<img src="${p}" width="${l.qrSize}" height="${l.qrSize}" />`)),f.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Print Label - ${t.primaryText}</title>
          <style>
            @page {
              size: ${l.width}px ${l.height}px;
              margin: 0;
            }
            body {
              margin: 0;
              padding: 10px;
              font-family: 'Arial', sans-serif;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }
            .label-container {
              width: ${l.width-20}px;
              height: ${l.height-20}px;
              border: 1px solid #000;
              padding: 10px;
              box-sizing: border-box;
              display: flex;
              flex-direction: column;
            }
            .label-header {
              display: flex;
              justify-content: space-between;
              align-items: flex-start;
              margin-bottom: 8px;
            }
            .label-title {
              font-size: ${l.fontSize+4}px;
              font-weight: bold;
              margin: 0;
            }
            .label-subtitle {
              font-size: ${l.fontSize}px;
              color: #666;
              margin: 2px 0 0 0;
            }
            .label-type {
              font-size: ${l.fontSize-2}px;
              background: #000;
              color: #fff;
              padding: 2px 6px;
              border-radius: 4px;
              text-transform: uppercase;
            }
            .label-details {
              display: flex;
              flex-wrap: wrap;
              gap: 8px;
              margin-bottom: 8px;
              font-size: ${l.fontSize}px;
            }
            .detail-item {
              display: flex;
              gap: 4px;
            }
            .detail-label {
              font-weight: 600;
            }
            .codes-container {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-top: auto;
            }
            canvas, svg {
              max-width: 100%;
            }
            @media print {
              body { margin: 0; padding: 0; }
            }
          </style>
        </head>
        <body>
          ${x}
          <script>
            window.onload = function() {
              window.print();
              window.onafterprint = function() { window.close(); };
            };
          <\/script>
        </body>
      </html>
    `),f.document.close()},d=async()=>{if(s.current)try{const f=(await jv(async()=>{const{default:v}=await import("./html2canvas.esm-DXEQVQnt.js");return{default:v}},[])).default,p=await f(s.current,{scale:2,backgroundColor:"#ffffff"}),x=document.createElement("a");x.download=`label-${t.type}-${t.id}.png`,x.href=p.toDataURL("image/png"),x.click()}catch(f){console.error("Download error:",f)}};return e.jsxs("div",{children:[e.jsxs("div",{ref:s,className:"label-container",style:{width:`${l.width}px`,minHeight:`${l.height}px`,border:"2px solid #000",borderRadius:"8px",padding:"12px",background:"#fff",color:"#000",fontFamily:"Arial, sans-serif"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:`${l.fontSize+4}px`,fontWeight:"bold"},children:t.primaryText}),t.secondaryText&&e.jsx("p",{style:{margin:"2px 0 0",fontSize:`${l.fontSize}px`,color:"#666"},children:t.secondaryText})]}),e.jsx("span",{style:{fontSize:`${l.fontSize-2}px`,background:"#000",color:"#fff",padding:"2px 8px",borderRadius:"4px",textTransform:"uppercase",fontWeight:600},children:t.type})]}),t.details&&t.details.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"10px",fontSize:`${l.fontSize}px`},children:t.details.map((f,p)=>e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsxs("span",{style:{fontWeight:600},children:[f.label,":"]}),e.jsx("span",{children:f.value})]},p))}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[t.barcodeData&&e.jsx("svg",{ref:i,style:{maxWidth:"60%"}}),t.qrData&&e.jsx("canvas",{ref:a,style:{marginLeft:"auto"}})]})]}),n&&e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[e.jsxs("button",{onClick:u,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"6px",border:"none",background:"var(--primary)",color:"white",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[e.jsx(wm,{size:16}),"Print Label"]}),e.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[e.jsx(Xp,{size:16}),"Download"]})]})]})}function B5e({batch:t}){const r={id:t.id,type:"batch",primaryText:t.batchNumber||`BATCH-${t.id.slice(0,8)}`,secondaryText:t.product?.name,details:[{label:"Product",value:t.product?.code||"N/A"},{label:"Qty",value:`${t.plannedQuantity||0} ${t.product?.unitOfMeasure||"units"}`},...t.expiryDate?[{label:"Exp",value:new Date(t.expiryDate).toLocaleDateString()}]:[]],barcodeData:t.batchNumber||t.id,qrData:JSON.stringify({type:"batch",id:t.id,batchNumber:t.batchNumber,product:t.product?.code})};return e.jsx(Y_,{data:r,size:"medium"})}function F5e({shipment:t}){const r={id:t.id,type:"shipment",primaryText:t.shipmentNumber||`SHIP-${t.id.slice(0,8)}`,secondaryText:t.customer?.name,details:[{label:"To",value:t.deliveryAddress?.city||"N/A"},...t.scheduledDate?[{label:"Date",value:new Date(t.scheduledDate).toLocaleDateString()}]:[],...t.priority?[{label:"Priority",value:t.priority}]:[]],barcodeData:t.shipmentNumber||t.id,qrData:JSON.stringify({type:"shipment",id:t.id,shipmentNumber:t.shipmentNumber,customer:t.customer?.name})};return e.jsx(Y_,{data:r,size:"medium"})}function q5e({material:t}){const r={id:t.id,type:"material",primaryText:t.name,secondaryText:t.code,details:[{label:"Cat",value:t.category?.replace(/_/g," ")||"N/A"},{label:"Unit",value:t.unitOfMeasure||"N/A"},...t.lotNumber?[{label:"Lot",value:t.lotNumber}]:[]],barcodeData:t.barcode||t.code||t.id,qrData:JSON.stringify({type:"material",id:t.id,code:t.code,name:t.name})};return e.jsx(Y_,{data:r,size:"small"})}const FR=[{value:"PLANNED",label:"Planned",group:"main"},{value:"SCHEDULED",label:"Scheduled",group:"main"},{value:"IN_PRODUCTION",label:"In Production",group:"main"},{value:"PRODUCTION_COMPLETE",label:"Production Complete",group:"main"},{value:"QC_PENDING",label:"QC Pending",group:"main"},{value:"QC_IN_PROGRESS",label:"QC In Progress",group:"main"},{value:"QC_PASSED",label:"QC Passed",group:"main"},{value:"QP_REVIEW",label:"QP Review",group:"main"},{value:"RELEASED",label:"Released",group:"main"},{value:"DISPENSING_IN_PROGRESS",label:"Dispensing",group:"main"},{value:"DISPENSED",label:"Dispensed",group:"main"},{value:"PACKED",label:"Packed",group:"main"},{value:"DISPATCHED",label:"Dispatched",group:"main"},{value:"CLOSED",label:"Closed",group:"main"},{value:"ON_HOLD",label:"On Hold",group:"exception"},{value:"REJECTED",label:"Rejected",group:"exception"},{value:"FAILED_QC",label:"QC Failed",group:"exception"},{value:"CANCELLED",label:"Cancelled",group:"exception"},{value:"DEVIATION_OPEN",label:"Deviation",group:"exception"}];function U5e(){const[t,r]=k.useState(""),[n,i]=k.useState(""),[a,s]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(!1),[x,v]=k.useState(!1),[w,C]=k.useState(null),N=pr(),T=gn(),{data:O,isLoading:D}=Ve({queryKey:["batches",t,n,a,o],queryFn:async()=>{const Z={};t&&(Z.status=t),n&&(Z.productId=n),a&&(Z.fromDate=a),o&&(Z.toDate=o);const{data:ie}=await xe.get("/batches",{params:Z});return ie}}),{data:M}=Ve({queryKey:["batch-metrics"],queryFn:async()=>{const{data:Z}=await xe.get("/batches/metrics/summary");return Z}}),{data:Y}=Ve({queryKey:["products"],queryFn:async()=>{const{data:Z}=await xe.get("/products");return Z}}),q=ot({mutationFn:async({id:Z,status:ie})=>xe.post(`/batches/${Z}/transition`,{status:ie}),onSuccess:(Z,ie)=>{N.invalidateQueries({queryKey:["batches"]}),N.invalidateQueries({queryKey:["batch-metrics"]}),T.success("Status Updated",`Batch moved to ${ie.status.replace(/_/g," ")}`)},onError:Z=>{const ie=an(Z);T.error("Update Failed",ie?.userMessage||"Failed to update batch status")}}),W=Z=>({PLANNED:{status:"IN_PRODUCTION",label:"Start"},SCHEDULED:{status:"IN_PRODUCTION",label:"Start"},IN_PRODUCTION:{status:"PRODUCTION_COMPLETE",label:"Complete"},PRODUCTION_COMPLETE:{status:"QC_PENDING",label:"To QC"},QC_PENDING:{status:"QC_IN_PROGRESS",label:"Start QC"},QC_IN_PROGRESS:{status:"QC_PASSED",label:"Pass QC"},QC_PASSED:{status:"QP_REVIEW",label:"To QP"},RELEASED:{status:"DISPENSING_IN_PROGRESS",label:"Dispense"},DISPENSING_IN_PROGRESS:{status:"DISPENSED",label:"Done"},DISPENSED:{status:"PACKED",label:"Pack"},PACKED:{status:"DISPATCHED",label:"Dispatch"},DISPATCHED:{status:"CLOSED",label:"Close"}})[Z]||null,J=Z=>["ON_HOLD","REJECTED","FAILED_QC","CANCELLED","DEVIATION_OPEN"].includes(Z),z=O?.filter(Z=>{if(f&&!J(Z.status))return!1;if(u){const ie=u.toLowerCase();if(!Z.batchNumber.toLowerCase().includes(ie)&&!Z.product?.name.toLowerCase().includes(ie))return!1}return!0}),G=()=>{r(""),i(""),s(""),l(""),d(""),p(!1)},ne=t||n||a||o||u||f;return D?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Batch Management"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Track production batches through the manufacturing lifecycle"})]}),e.jsxs("button",{className:`btn ${x?"btn-primary":"btn-secondary"}`,onClick:()=>v(!x),children:[e.jsx(fl,{size:16})," Filters ",ne&&e.jsx("span",{className:"badge badge-danger",style:{marginLeft:"0.25rem"},children:"!"})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Today's Batches",value:M?.batchesToday||0,icon:e.jsx($n,{size:20}),color:"primary",onClick:()=>{G()},selected:!t&&!f}),e.jsx(st,{title:"Awaiting QC",value:M?.awaitingQC||0,icon:e.jsx(dc,{size:20}),color:"warning",onClick:()=>{r("QC_PENDING"),p(!1)},selected:t==="QC_PENDING"}),e.jsx(st,{title:"Awaiting Release",value:M?.awaitingRelease||0,icon:e.jsx(ia,{size:20}),color:"info",onClick:()=>{r("QP_REVIEW"),p(!1)},selected:t==="QP_REVIEW"}),e.jsx(st,{title:"Exceptions",value:M?.exceptions||0,icon:e.jsx($r,{size:20}),color:"danger",onClick:()=>{p(!f),r("")},selected:f})]}),x&&e.jsxs("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h4",{style:{margin:0,fontSize:"0.875rem",fontWeight:600},children:"Filters"}),ne&&e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:G,children:[e.jsx(kr,{size:14})," Clear All"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Search"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",style:{paddingLeft:"2.25rem"},placeholder:"Batch # or product...",value:u,onChange:Z=>d(Z.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{className:"form-select",value:t,onChange:Z=>r(Z.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("optgroup",{label:"Main Stages",children:FR.filter(Z=>Z.group==="main").map(Z=>e.jsx("option",{value:Z.value,children:Z.label},Z.value))}),e.jsx("optgroup",{label:"Exceptions",children:FR.filter(Z=>Z.group==="exception").map(Z=>e.jsx("option",{value:Z.value,children:Z.label},Z.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Product"}),e.jsxs("select",{className:"form-select",value:n,onChange:Z=>i(Z.target.value),children:[e.jsx("option",{value:"",children:"All Products"}),Y?.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"From Date"}),e.jsx("input",{type:"date",className:"form-input",value:a,onChange:Z=>s(Z.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"To Date"}),e.jsx("input",{type:"date",className:"form-input",value:o,onChange:Z=>l(Z.target.value)})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:f,onChange:Z=>p(Z.target.checked)}),"Exceptions Only"]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Batch List (",z?.length||0,")"]})}),z?.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Batch #"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Planned Start"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Orders"}),e.jsx("th",{children:"Doses"}),e.jsx("th",{children:"Updated"}),e.jsx("th",{style:{width:"160px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:z.map(Z=>{const ie=W(Z.status),me=Z.doseUnits?.length||0;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("span",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:Z.batchNumber}),J(Z.status)&&e.jsx($r,{size:14,style:{color:"var(--danger)",marginLeft:"0.25rem"}})]}),e.jsx("td",{style:{fontWeight:500},children:Z.product?.name}),e.jsx("td",{children:Ze(new Date(Z.plannedStartTime),"MMM dd HH:mm")}),e.jsx("td",{children:e.jsx(Pn,{status:Z.status,size:"sm"})}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-default",children:Z.orders?.length||0})}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-default",children:me})}),e.jsx("td",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:Ze(new Date(Z.updatedAt),"MMM dd HH:mm")}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",title:"Print Label",onClick:()=>C(Z),children:e.jsx(wm,{size:14})}),e.jsx(nr,{to:`/batches/${Z.id}/journey`,className:"btn btn-sm btn-outline",title:"View Journey",children:e.jsx(cz,{size:14})}),ie&&!J(Z.status)&&e.jsxs("button",{className:"btn btn-primary btn-sm",style:{minWidth:"80px"},onClick:()=>q.mutate({id:Z.id,status:ie.status}),disabled:q.isPending,title:ie.label,children:[e.jsx(yo,{size:14})," ",ie.label]})]})})]},Z.id)})})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No batches found",message:"Batches will appear here when orders are scheduled for production",icon:"package"})})]}),w&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:"450px"},onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Print Batch Label"}),e.jsx("button",{onClick:()=>C(null),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsx("div",{className:"modal-body",style:{display:"flex",justifyContent:"center"},children:e.jsx(B5e,{batch:w})})]})})]})}const qR=[{key:"pending",label:"Pending",icon:Qt},{key:"testing",label:"Testing",icon:dc},{key:"review",label:"Review",icon:Pr},{key:"complete",label:"Complete",icon:Ut}];function UR(t){if(!t||t.length===0)return{completed:0,total:0,passed:0,failed:0};const r=t.filter(a=>a.passed!==null).length,n=t.filter(a=>a.passed===!0).length,i=t.filter(a=>a.passed===!1).length;return{completed:r,total:t.length,passed:n,failed:i}}function W5e(){const[t,r]=k.useState(null),[n,i]=k.useState("workbench"),[a,s]=k.useState({}),o=pr(),l=gn(),{formatDateTime:u}=mh(),{data:d}=Ve({queryKey:["qc-stats"],queryFn:async()=>{const{data:z}=await xe.get("/qc/stats");return z}}),{data:f,isLoading:p}=Ve({queryKey:["qc-batches"],queryFn:async()=>{const{data:z}=await xe.get("/qc/batches");return z}}),{data:x,isLoading:v}=Ve({queryKey:["qc-history"],queryFn:async()=>{const{data:z}=await xe.get("/qc/history?days=14");return z},enabled:n==="history"}),{data:w,isLoading:C}=Ve({queryKey:["batch-qc",t?.id],queryFn:async()=>{const{data:z}=await xe.get(`/qc/batches/${t.id}`);return z},enabled:!!t}),N=ot({mutationFn:async z=>xe.post(`/qc/batches/${z}/initialize`),onSuccess:()=>{o.invalidateQueries({queryKey:["qc-batches"]}),o.invalidateQueries({queryKey:["batch-qc"]}),o.invalidateQueries({queryKey:["qc-stats"]}),l.success("QC testing initialized")},onError:()=>l.error("Failed to initialize QC")}),T=ot({mutationFn:async({resultId:z,data:G})=>xe.put(`/qc/results/${z}`,G),onSuccess:()=>{o.invalidateQueries({queryKey:["batch-qc"]})},onError:()=>l.error("Failed to update result")}),O=ot({mutationFn:async z=>xe.post(`/qc/batches/${z}/complete`),onSuccess:z=>{o.invalidateQueries({queryKey:["qc-batches"]}),o.invalidateQueries({queryKey:["batch-qc"]}),o.invalidateQueries({queryKey:["qc-stats"]}),o.invalidateQueries({queryKey:["qc-history"]}),z.data?.passed?l.success("QC completed - All tests passed!"):l.error("QC completed - Some tests failed"),r(null)},onError:z=>{const G=z.response?.data?.error||"Failed to complete QC";l.error(G)}}),D=(z,G,ne)=>{T.mutate({resultId:z.id,data:{[G]:ne}})},M=[{key:"search",label:"Search",type:"search",placeholder:"Search batches..."}],Y=(n==="workbench"?f:x)?.filter(z=>{if(a.search){const G=a.search.toLowerCase();if(!z.batchNumber.toLowerCase().includes(G)&&!z.product?.name.toLowerCase().includes(G))return!1}return!0}),q=w?UR(w.qcResults):null,W=w?.qcResults?.length?w?.status==="QC_PASSED"||w?.status==="FAILED_QC"?"complete":q?.completed===q?.total?"review":"testing":"pending",J=z=>{i(z),r(null)};return p?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Quality Control"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Execute QC tests and manage batch testing workflows"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:`btn ${n==="workbench"?"btn-primary":"btn-secondary"}`,onClick:()=>J("workbench"),children:[e.jsx(dc,{size:16})," Workbench"]}),e.jsxs("button",{className:`btn ${n==="history"?"btn-primary":"btn-secondary"}`,onClick:()=>J("history"),children:[e.jsx(jm,{size:16})," History"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Pending QC",value:d?.pending||0,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>i("workbench")}),e.jsx(st,{title:"In Progress",value:d?.inProgress||0,icon:e.jsx(dc,{size:20}),color:"info",onClick:()=>i("workbench")}),e.jsx(st,{title:"Passed Today",value:d?.passedToday||0,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>i("history")}),e.jsx(st,{title:"Failed Today",value:d?.failedToday||0,icon:e.jsx(ci,{size:20}),color:"danger",onClick:()=>i("history")})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:M,values:a,onChange:(z,G)=>s(ne=>({...ne,[z]:G})),onReset:()=>s({})})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:t?"1fr 1.5fr":"1fr"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx("h3",{style:{fontWeight:600},children:n==="workbench"?`Batches Pending QC (${Y?.length||0})`:`QC History (${Y?.length||0})`})}),e.jsx("div",{style:{padding:"0",maxHeight:"60vh",overflowY:"auto"},children:(n==="workbench"?p:v)?e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx("div",{className:"spinner"})}):Y?.length>0?Y.map(z=>{const G=UR(z.qcResults);return e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",cursor:"pointer",background:t?.id===z.id?"var(--bg-secondary)":void 0,transition:"background 0.15s"},onClick:()=>r(z),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:600},children:z.batchNumber}),z.status==="FAILED_QC"&&e.jsx($r,{size:14,color:"var(--danger)"})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:z.product?.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[z.orders?.length||0," orders | ",u(z.plannedStartTime||z.createdAt)]}),G.total>0&&e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("div",{style:{height:"4px",background:"var(--border)",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${G.completed/G.total*100}%`,background:G.failed>0?"var(--danger)":"var(--success)",transition:"width 0.3s"}})}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[G.completed,"/",G.total," tests (",G.passed," passed, ",G.failed," failed)"]})]})]}),e.jsx(Pn,{status:z.status,size:"sm"})]})},z.id)}):e.jsx(fn,{title:n==="workbench"?"No batches pending QC":"No QC history found",message:n==="workbench"?"All batches have completed QC testing":"No completed QC tests in the selected period",icon:"success",variant:"compact"})})]}),t&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("h3",{style:{fontWeight:600},children:w?.batchNumber||t.batchNumber}),e.jsx(Pn,{status:w?.status||t.status})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:w?.product?.name||t.product?.name})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs(nr,{to:`/batches/${t.id}/journey`,className:"btn btn-secondary btn-sm",children:[e.jsx(os,{size:14})," Batch Journey"]}),e.jsx("button",{onClick:()=>r(null),style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--text-muted)"},children:""})]})]}),C?e.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",marginBottom:"1.5rem",gap:"0.5rem"},children:qR.map((z,G)=>{const ne=qR.findIndex(me=>me.key===W)>G,Z=z.key===W,ie=z.icon;return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",opacity:ne||Z?1:.4},children:[e.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:ne?"var(--success)":Z?"var(--primary)":"var(--border)",color:ne||Z?"white":"var(--text-muted)",marginBottom:"0.5rem"},children:e.jsx(ie,{size:14})}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:Z?600:400},children:z.label})]},z.key)})}),w?.qcResults?.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx(af,{size:48,color:"var(--text-muted)",style:{marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"QC testing not yet initialized"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>N.mutate(t.id),disabled:N.isPending,children:[e.jsx(yo,{size:18}),N.isPending?"Initializing...":"Start QC Testing"]})]}):e.jsxs(e.Fragment,{children:[q&&e.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",justifyContent:"space-around"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:q.total}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Total Tests"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--success)"},children:q.passed}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Passed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--danger)"},children:q.failed}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Failed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--warning)"},children:q.total-q.completed}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Pending"})]})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Test"}),e.jsx("th",{children:"Criteria"}),e.jsx("th",{children:"Result"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:w?.qcResults?.map(z=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:z.template?.testName}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:z.template?.testMethod})]}),e.jsxs("td",{style:{fontSize:"0.875rem"},children:[z.template?.acceptanceCriteria,z.template?.minValue!==null&&z.template?.maxValue!==null&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Range: ",z.template.minValue," - ",z.template.maxValue," ",z.template.unit]})]}),e.jsx("td",{children:n==="history"?e.jsx("span",{style:{fontWeight:500},children:z.numericResult!==null?`${z.numericResult} ${z.template?.unit||""}`:z.passed===!0?"Pass":z.passed===!1?"Fail":"-"}):z.template?.minValue!==null?e.jsx("input",{type:"number",step:"0.01",className:"form-input",style:{width:"6rem"},value:z.numericResult??"",onChange:G=>D(z,"numericResult",parseFloat(G.target.value))}):e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:`btn btn-sm ${z.passed===!0?"btn-success":"btn-secondary"}`,onClick:()=>D(z,"passed",!0),disabled:T.isPending,children:[e.jsx(Ut,{size:14}),"Pass"]}),e.jsxs("button",{className:`btn btn-sm ${z.passed===!1?"btn-danger":"btn-secondary"}`,onClick:()=>D(z,"passed",!1),disabled:T.isPending,children:[e.jsx(ci,{size:14}),"Fail"]})]})}),e.jsxs("td",{children:[z.passed===!0&&e.jsx("span",{className:"badge badge-success",children:"Passed"}),z.passed===!1&&e.jsx("span",{className:"badge badge-danger",children:"Failed"}),z.passed===null&&e.jsx("span",{className:"badge badge-default",children:"Pending"})]})]},z.id))})]}),n==="workbench"&&e.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>O.mutate(t.id),disabled:O.isPending||!!(q&&q.completed<q.total),title:q&&q.completed<q.total?"Complete all tests first":"Complete QC",children:[e.jsx(Ut,{size:18}),O.isPending?"Completing...":"Complete QC"]})})]})]})]})]})]})}const H5e=[{key:"production",label:"Production"},{key:"qc",label:"QC Testing"},{key:"qp_review",label:"QP Review"},{key:"released",label:"Released"}];function V5e(t){return{QC_PASSED:["production","qc"],QP_REVIEW:["production","qc"],RELEASED:["production","qc","qp_review","released"],REJECTED:["production","qc"]}[t]||[]}function $5e(t){return{QC_PASSED:"qp_review",QP_REVIEW:"qp_review",RELEASED:"released",REJECTED:"qp_review"}[t]||"qp_review"}function G5e(){const[t,r]=k.useState(null),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(!1),[u,d]=k.useState("pending"),[f,p]=k.useState({}),x=pr(),v=gn(),{data:w}=Ve({queryKey:["release-stats"],queryFn:async()=>{const{data:le}=await xe.get("/batches/release/stats");return le}}),{data:C,isLoading:N}=Ve({queryKey:["batches-for-release"],queryFn:async()=>{const{data:le}=await xe.get("/batches",{params:{status:"QC_PASSED"}});return le}}),{data:T,isLoading:O}=Ve({queryKey:["release-history"],queryFn:async()=>{const{data:le}=await xe.get("/batches/release/history?days=14");return le},enabled:u==="history"}),{data:D,isLoading:M}=Ve({queryKey:["batch-release-details",t?.id],queryFn:async()=>{const{data:le}=await xe.get(`/batches/${t.id}`);return le},enabled:!!t}),Y=()=>{x.invalidateQueries({queryKey:["batches-for-release"]}),x.invalidateQueries({queryKey:["batch-release-details"]}),x.invalidateQueries({queryKey:["release-stats"]}),x.invalidateQueries({queryKey:["release-history"]})},q=ot({mutationFn:async le=>xe.post(`/batches/${t.id}/release`,{...le,disposition:"RELEASE"}),onSuccess:()=>{Y(),i(!1),r(null),v.success("Batch Released","Batch has been successfully released for dispensing")},onError:le=>{const ye=le.response?.data;ye?.error==="SEGREGATION_OF_DUTIES_VIOLATION"?v.error("Segregation of Duties Violation",ye.userMessage||"You cannot release a batch you tested"):v.error("Release Failed",ye?.error||"Failed to release batch")}}),W=ot({mutationFn:async le=>xe.post(`/batches/${t.id}/release`,{...le,disposition:"REJECT"}),onSuccess:()=>{Y(),s(!1),r(null),v.warning("Batch Rejected","Batch has been rejected and removed from release queue")},onError:le=>{const ye=le.response?.data?.error||"Failed to reject batch";v.error("Rejection Failed",ye)}}),J=ot({mutationFn:async le=>xe.post(`/batches/${t.id}/release`,{...le,disposition:"HOLD"}),onSuccess:()=>{Y(),l(!1),r(null),v.warning("Batch On Hold","Batch has been placed on hold for further investigation")},onError:le=>{const ye=le.response?.data?.error||"Failed to hold batch";v.error("Hold Failed",ye)}}),z=le=>{le.preventDefault();const ye=new FormData(le.currentTarget);q.mutate({electronicSignature:ye.get("signature"),meaning:ye.get("meaning")||"I certify this batch meets all GMP requirements",reason:ye.get("reason"),releaseType:"FULL"})},G=le=>{le.preventDefault();const ye=new FormData(le.currentTarget);W.mutate({electronicSignature:ye.get("signature"),meaning:"REJECT - Batch does not meet release criteria",reason:ye.get("reason")})},ne=le=>{le.preventDefault();const ye=new FormData(le.currentTarget);J.mutate({electronicSignature:ye.get("signature"),meaning:"HOLD - Pending investigation or additional review",reason:ye.get("reason")})},Z=le=>{d(le),r(null)},ie=[{key:"search",label:"Search",type:"search",placeholder:"Search batches..."}],ce=(u==="pending"?C:T)?.filter(le=>{if(f.search){const ye=f.search.toLowerCase();if(!le.batchNumber.toLowerCase().includes(ye)&&!le.product?.name.toLowerCase().includes(ye))return!1}return!0}),Q=D?.qcResults?.filter(le=>le.passed).length||0,de=D?.qcResults?.length||0;return N?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"QP Release"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Review and release batches with qualified person approval"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:`btn ${u==="pending"?"btn-primary":"btn-secondary"}`,onClick:()=>Z("pending"),children:[e.jsx(Qt,{size:16})," Pending"]}),e.jsxs("button",{className:`btn ${u==="history"?"btn-primary":"btn-secondary"}`,onClick:()=>Z("history"),children:[e.jsx(jm,{size:16})," History"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Pending Release",value:w?.pendingRelease||0,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>Z("pending")}),e.jsx(st,{title:"In QP Review",value:w?.qpReview||0,icon:e.jsx(Pv,{size:20}),color:"info"}),e.jsx(st,{title:"Released Today",value:w?.releasedToday||0,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>Z("history")}),e.jsx(st,{title:"Rejected Today",value:w?.rejectedToday||0,icon:e.jsx(ci,{size:20}),color:"danger",onClick:()=>Z("history")})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:ie,values:f,onChange:(le,ye)=>p(Se=>({...Se,[le]:ye})),onReset:()=>p({})})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:t?"1fr 1.5fr":"1fr"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600},children:u==="pending"?`Batches Ready for Release (${ce?.length||0})`:`Release History (${ce?.length||0})`})}),e.jsx("div",{style:{padding:"0",maxHeight:"60vh",overflowY:"auto"},children:(u==="pending"?N:O)?e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx("div",{className:"spinner"})}):ce?.length>0?ce.map(le=>e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",cursor:"pointer",background:t?.id===le.id?"var(--bg-secondary)":void 0,transition:"background 0.15s"},onClick:()=>r(le),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:600},children:le.batchNumber}),le.status==="REJECTED"&&e.jsx($r,{size:14,color:"var(--danger)"})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:le.product?.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[le.orders?.length||0," orders | ",le.targetActivity," ",le.activityUnit]}),u==="history"&&le.batchReleases?.[0]&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Released by: ",le.batchReleases[0].releasedBy?.email," | ",Ze(new Date(le.batchReleases[0].releasedAt),"MMM dd HH:mm")]})]}),e.jsx(Pn,{status:le.status,size:"sm"})]})},le.id)):e.jsx(fn,{title:u==="pending"?"No batches pending release":"No release history found",message:u==="pending"?"All batches have been reviewed by QP":"No releases in the selected period",icon:"success",variant:"compact"})})]}),t&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("h3",{style:{fontWeight:600},children:D?.batchNumber||t.batchNumber}),e.jsx(Pn,{status:D?.status||t.status})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:D?.product?.name||t.product?.name})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs(nr,{to:`/batches/${t.id}/journey`,className:"btn btn-secondary btn-sm",children:[e.jsx(os,{size:14})," Batch Journey"]}),e.jsx("button",{onClick:()=>r(null),style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--text-muted)"},children:""})]})]}),M?e.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:e.jsx("div",{className:"spinner"})}):D?e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx(Uz,{steps:H5e,currentStep:$5e(D.status),completedSteps:V5e(D.status),exceptionStep:D.status==="REJECTED"?"qp_review":void 0,size:"sm"})}),e.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),e.jsx("div",{style:{fontWeight:500},children:D.product?.name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Activity"}),e.jsxs("div",{style:{fontWeight:500},children:[D.actualActivity||D.targetActivity," ",D.activityUnit]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Orders"}),e.jsx("div",{style:{fontWeight:500},children:D.orders?.length||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"QC Tests"}),e.jsxs("div",{style:{fontWeight:500,color:Q===de?"var(--success)":"var(--danger)"},children:[Q,"/",de," Passed"]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pr,{size:16})," QC Results Summary"]}),e.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:D.qcResults?.map(le=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem 0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500},children:le.template?.testName}),le.numericResult!==null&&e.jsxs("span",{style:{color:"var(--text-muted)",marginLeft:"0.5rem"},children:["(",le.numericResult," ",le.template?.unit,")"]})]}),e.jsx("span",{className:`badge badge-${le.passed?"success":"danger"}`,children:le.passed?"Pass":"Fail"})]},le.id))})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(kQ,{size:16})," Orders to be Released"]}),e.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:D.orders?.map(le=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem 0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500},children:le.orderNumber}),e.jsx("span",{style:{color:"var(--text-muted)",marginLeft:"0.5rem"},children:le.customer?.name})]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[le.requestedActivity," ",le.activityUnit]})]},le.id))})]}),D.batchReleases?.length>0&&e.jsxs("div",{style:{background:D.status==="RELEASED"?"#f0fdf4":"#fef2f2",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:D.status==="RELEASED"?"var(--success)":"var(--danger)"},children:[D.status==="RELEASED"?"Released":"Rejected"," by QP"]}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"QP:"})," ",D.batchReleases[0].releasedBy?.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",Ze(new Date(D.batchReleases[0].releasedAt),"MMM dd, yyyy HH:mm")]}),D.batchReleases[0].reason&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",D.batchReleases[0].reason]})]})]}),u==="pending"&&D.status==="QC_PASSED"&&e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-danger",style:{flex:"1 1 auto",minWidth:"80px"},onClick:()=>s(!0),children:[e.jsx(ci,{size:18}),"Reject"]}),e.jsxs("button",{className:"btn btn-warning",style:{flex:"1 1 auto",minWidth:"80px"},onClick:()=>l(!0),children:[e.jsx($r,{size:18}),"Hold"]}),e.jsxs("button",{className:"btn btn-success",style:{flex:"2 1 auto",minWidth:"120px"},onClick:()=>i(!0),children:[e.jsx(ia,{size:18}),"Release Batch"]})]})]}):null]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",onClick:le=>le.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Batch Release - Electronic Signature"}),e.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #bbf7d0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(ia,{size:18,color:"var(--success)"}),e.jsx("strong",{style:{color:"var(--success)"},children:"Qualified Person Release"})]}),e.jsx("p",{style:{margin:0,color:"#166534"},children:"By signing below, I confirm that this batch has been manufactured and tested in accordance with GMP requirements and is fit for release."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Batch Number"}),e.jsx("input",{className:"form-input",value:D?.batchNumber||"",disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Electronic Signature (Type your full name) *"}),e.jsx("input",{name:"signature",className:"form-input",required:!0,placeholder:"Enter your full name",autoComplete:"off"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Release Notes"}),e.jsx("textarea",{name:"reason",className:"form-input",rows:3,placeholder:"Optional notes for this release"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-success",disabled:q.isPending,children:[e.jsx(Ut,{size:18}),q.isPending?"Releasing...":"Confirm Release"]})]})]})]})}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal",onClick:le=>le.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Reject Batch"}),e.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx($r,{size:18,color:"var(--danger)"}),e.jsx("strong",{style:{color:"var(--danger)"},children:"Batch Rejection"})]}),e.jsx("p",{style:{margin:0,color:"#991b1b"},children:"This action will reject the batch and prevent it from being released. Please provide a reason for the rejection."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Batch Number"}),e.jsx("input",{className:"form-input",value:D?.batchNumber||"",disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Electronic Signature (Type your full name) *"}),e.jsx("input",{name:"signature",className:"form-input",required:!0,placeholder:"Enter your full name",autoComplete:"off"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Rejection Reason *"}),e.jsx("textarea",{name:"reason",className:"form-input",rows:3,required:!0,placeholder:"Enter reason for rejection"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-danger",disabled:W.isPending,children:[e.jsx(ci,{size:18}),W.isPending?"Rejecting...":"Confirm Rejection"]})]})]})]})}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:e.jsxs("div",{className:"modal",onClick:le=>le.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Place Batch On Hold"}),e.jsx("button",{onClick:()=>l(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",background:"#fffbeb",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fde68a"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx($r,{size:18,color:"var(--warning)"}),e.jsx("strong",{style:{color:"#b45309"},children:"Hold for Investigation"})]}),e.jsx("p",{style:{margin:0,color:"#92400e"},children:"This action will place the batch on hold pending further investigation. The batch cannot be dispensed until it is released or rejected."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Batch Number"}),e.jsx("input",{className:"form-input",value:D?.batchNumber||"",disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Electronic Signature (Type your full name) *"}),e.jsx("input",{name:"signature",className:"form-input",required:!0,placeholder:"Enter your full name",autoComplete:"off"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reason for Hold *"}),e.jsx("textarea",{name:"reason",className:"form-input",rows:3,required:!0,placeholder:"Enter reason for placing batch on hold"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-warning",disabled:J.isPending,children:[e.jsx($r,{size:18}),J.isPending?"Holding...":"Confirm Hold"]})]})]})]})})]})}function K5e(){const[t,r]=k.useState(null),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(!1),[u,d]=k.useState(!1),[f,p]=k.useState(null),[x,v]=k.useState({}),[w,C]=k.useState(null),N=k.useRef(null),T=pr(),O=gn(),{formatDateOnly:D,formatTimeOnly:M,formatDateTime:Y}=mh();k.useEffect(()=>{const H=oe=>{N.current&&!N.current.contains(oe.target)&&p(null)};return f&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[f]);const{data:q,isLoading:W}=Ve({queryKey:["shipments",x],queryFn:async()=>{const{data:H}=await xe.get("/shipments",{params:x});return H}}),{data:J}=Ve({queryKey:["released-orders"],queryFn:async()=>{const{data:H}=await xe.get("/orders",{params:{status:"RELEASED"}});return H}}),{data:z}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:H}=await xe.get("/customers");return H}}),{data:G}=Ve({queryKey:["drivers"],queryFn:async()=>{const{data:H}=await xe.get("/drivers");return H}}),ne=ot({mutationFn:async H=>xe.post("/shipments",H),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),T.invalidateQueries({queryKey:["released-orders"]}),i(!1),O.success("Shipment Created","New shipment has been created successfully")},onError:H=>{const oe=an(H);O.error("Creation Failed",oe?.userMessage||"Failed to create shipment")}}),Z=ot({mutationFn:async({id:H,data:oe})=>xe.post(`/shipments/${H}/dispatch`,oe),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),p(null),O.success("Dispatched","Shipment is now in transit")},onError:H=>{const oe=an(H);O.error("Dispatch Failed",oe?.userMessage||"Failed to dispatch shipment")}}),ie=ot({mutationFn:async({id:H,data:oe})=>xe.post(`/shipments/${H}/deliver`,oe),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),s(!1),r(null),O.success("Delivered","Shipment marked as delivered")},onError:H=>{const oe=an(H);O.error("Delivery Failed",oe?.userMessage||"Failed to confirm delivery")}}),me=ot({mutationFn:async({id:H,data:oe})=>xe.post(`/shipments/${H}/assign-driver`,oe),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),l(!1),r(null),O.success("Driver Assigned","Driver has been assigned to the shipment")},onError:H=>{const oe=an(H);O.error("Assignment Failed",oe?.userMessage||"Failed to assign driver")}}),ce=ot({mutationFn:async({id:H,data:oe})=>xe.post(`/shipments/${H}/schedule`,oe),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),d(!1),r(null),O.success("Scheduled","Shipment schedule updated")},onError:H=>{const oe=an(H);O.error("Schedule Failed",oe?.userMessage||"Failed to update schedule")}}),Q=ot({mutationFn:async H=>xe.post(`/shipments/${H}/mark-packed`),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),p(null),O.success("Packed","Shipment marked as packed")},onError:H=>{const oe=an(H);O.error("Failed",oe?.userMessage||"Failed to mark as packed")}}),de=ot({mutationFn:async({id:H,reason:oe})=>xe.post(`/shipments/${H}/cancel`,{reason:oe}),onSuccess:()=>{T.invalidateQueries({queryKey:["shipments"]}),p(null),O.success("Cancelled","Shipment has been cancelled")},onError:H=>{const oe=an(H);O.error("Cancel Failed",oe?.userMessage||"Failed to cancel shipment")}}),le=H=>{H.preventDefault();const oe=new FormData(H.currentTarget),ge=Array.from(oe.getAll("orderIds"));ne.mutate({customerId:oe.get("customerId"),courierName:oe.get("courierName"),vehicleInfo:oe.get("vehicleInfo"),scheduledDepartureTime:oe.get("scheduledDepartureTime"),expectedArrivalTime:oe.get("expectedArrivalTime"),orderIds:ge})},ye=H=>{H.preventDefault();const oe=new FormData(H.currentTarget);ie.mutate({id:t.id,data:{receiverName:oe.get("receiverName"),notes:oe.get("notes")}})},Se=H=>{H.preventDefault();const oe=new FormData(H.currentTarget);me.mutate({id:t.id,data:{driverId:oe.get("driverId"),scheduledPickupAt:oe.get("scheduledPickupAt"),scheduledDeliveryAt:oe.get("scheduledDeliveryAt"),driverNotes:oe.get("driverNotes"),priority:oe.get("priority")}})},$=H=>{H.preventDefault();const oe=new FormData(H.currentTarget);ce.mutate({id:t.id,data:{scheduledPickupAt:oe.get("scheduledPickupAt"),scheduledDeliveryAt:oe.get("scheduledDeliveryAt"),priority:oe.get("priority")}})},X=[{key:"search",label:"Search",type:"search",placeholder:"Search shipments..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"PACKED",label:"Packed"},{value:"ASSIGNED_TO_DRIVER",label:"Assigned"},{value:"ACCEPTED_BY_DRIVER",label:"Accepted"},{value:"PICKED_UP",label:"Picked Up"},{value:"IN_TRANSIT",label:"In Transit"},{value:"ARRIVED",label:"Arrived"},{value:"DELIVERED",label:"Delivered"},{value:"DELIVERY_FAILED",label:"Failed"},{value:"DELAYED",label:"Delayed"}]},{key:"unassigned",label:"Unassigned Only",type:"select",options:[{value:"",label:"All"},{value:"true",label:"Unassigned"}]},{key:"priority",label:"Priority",type:"select",options:[{value:"",label:"All Priorities"},{value:"NORMAL",label:"Normal"},{value:"URGENT",label:"Urgent"}]}],se={total:q?.length||0,packed:q?.filter(H=>H.status==="PACKED").length||0,assigned:q?.filter(H=>["ASSIGNED_TO_DRIVER","ACCEPTED_BY_DRIVER"].includes(H.status)).length||0,inTransit:q?.filter(H=>["PICKED_UP","IN_TRANSIT","ARRIVED"].includes(H.status)).length||0,delivered:q?.filter(H=>H.status==="DELIVERED").length||0,issues:q?.filter(H=>["DELAYED","DELIVERY_FAILED"].includes(H.status)).length||0};return W?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Logistics & Shipments"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage deliveries, assign drivers, and track shipment status"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs(nr,{to:"/drivers",className:"btn btn-secondary",children:[e.jsx(Np,{size:16}),"Manage Drivers"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[e.jsx(cn,{size:16}),"Create Shipment"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total",value:se.total,icon:e.jsx(dn,{size:20}),color:"primary",onClick:()=>v({}),selected:!x.status&&!x.unassigned}),e.jsx(st,{title:"Packed",value:se.packed,icon:e.jsx(Rr,{size:20}),color:"warning",onClick:()=>v({status:"PACKED"}),selected:x.status==="PACKED"}),e.jsx(st,{title:"Assigned",value:se.assigned,icon:e.jsx(Np,{size:20}),color:"info",onClick:()=>v({status:"ASSIGNED_TO_DRIVER"}),selected:x.status==="ASSIGNED_TO_DRIVER"}),e.jsx(st,{title:"In Transit",value:se.inTransit,icon:e.jsx(Gi,{size:20}),color:"primary",onClick:()=>v({status:"IN_TRANSIT"}),selected:x.status==="IN_TRANSIT"}),e.jsx(st,{title:"Delivered",value:se.delivered,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>v({status:"DELIVERED"}),selected:x.status==="DELIVERED"}),e.jsx(st,{title:"Issues",value:se.issues,icon:e.jsx($r,{size:20}),color:"danger",onClick:()=>v({status:"DELAYED"}),selected:x.status==="DELAYED"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:X,values:x,onChange:(H,oe)=>v(ge=>({...ge,[H]:oe})),onReset:()=>v({})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Shipment List (",q?.length||0,")"]})}),q?.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Shipment #"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Driver"}),e.jsx("th",{children:"Orders"}),e.jsx("th",{children:"Scheduled"}),e.jsx("th",{children:"Priority"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"120px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:q.map(H=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(nr,{to:`/shipments/${H.id}`,style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem",color:"var(--primary)"},children:H.shipmentNumber})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:H.customer?.nameEn||H.customer?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.customer?.city})]}),e.jsx("td",{children:H.driver?e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:H.driver.fullName}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.driver.vehiclePlateNo})]}):e.jsx("span",{className:"badge badge-warning",style:{fontSize:"0.6875rem"},children:"Unassigned"})}),e.jsx("td",{children:e.jsxs("span",{className:"badge badge-default",children:[H.orders?.length||0," orders"]})}),e.jsx("td",{children:H.scheduledDeliveryAt?e.jsxs("div",{children:[e.jsx("div",{children:D(H.scheduledDeliveryAt)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:M(H.scheduledDeliveryAt)})]}):H.scheduledDepartureTime?e.jsxs("div",{children:[e.jsx("div",{children:Y(H.scheduledDepartureTime)}),H.expectedArrivalTime&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["ETA: ",M(H.expectedArrivalTime)]})]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Not scheduled"})}),e.jsx("td",{children:H.priority==="URGENT"?e.jsx("span",{className:"badge badge-danger",children:"Urgent"}):e.jsx("span",{className:"badge badge-default",children:"Normal"})}),e.jsx("td",{children:e.jsx(Pn,{status:H.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",position:"relative"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",title:"Print Label",onClick:()=>C(H),children:e.jsx(wm,{size:14})}),e.jsx(nr,{to:`/shipments/${H.id}`,className:"btn btn-sm btn-outline",title:"View Details",children:e.jsx(os,{size:14})}),e.jsxs("div",{style:{position:"relative"},ref:f===H.id?N:null,children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:oe=>{oe.stopPropagation(),p(f===H.id?null:H.id)},children:e.jsx(ez,{size:14})}),f===H.id&&e.jsxs("div",{className:"dropdown-menu",onClick:oe=>oe.stopPropagation(),children:[["DRAFT","READY_TO_PACK","PACKED","ASSIGNED_TO_DRIVER","DELIVERY_FAILED"].includes(H.status)&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{r(H),l(!0),p(null)},children:[e.jsx(Np,{size:14}),H.driver?"Reassign Driver":"Assign Driver"]}),e.jsxs("button",{className:"dropdown-item",onClick:()=>{r(H),d(!0),p(null)},children:[e.jsx($n,{size:14}),"Schedule"]}),["DRAFT","READY_TO_PACK"].includes(H.status)&&e.jsxs("button",{className:"dropdown-item",onClick:()=>Q.mutate(H.id),children:[e.jsx(Rr,{size:14}),"Mark Packed"]}),H.status==="PACKED"&&H.driver&&e.jsxs("button",{className:"dropdown-item",onClick:()=>Z.mutate({id:H.id,data:{}}),children:[e.jsx(Gi,{size:14}),"Dispatch"]}),["ARRIVED","IN_TRANSIT"].includes(H.status)&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{r(H),s(!0),p(null)},children:[e.jsx(Ut,{size:14}),"Mark Delivered"]}),!["DELIVERED","CANCELLED"].includes(H.status)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dropdown-divider"}),e.jsxs("button",{className:"dropdown-item danger",onClick:()=>{confirm("Are you sure you want to cancel this shipment?")&&de.mutate({id:H.id,reason:"Cancelled by user"})},children:[e.jsx(kr,{size:14}),"Cancel Shipment"]})]})]})]})]})})]},H.id))})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No shipments found",message:"Create a shipment to start delivering orders",icon:"package"})})]}),f&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:999},onClick:()=>p(null)}),n&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create Shipment"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(!1),children:""})]}),e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{name:"customerId",className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),z?.map(H=>e.jsxs("option",{value:H.id,children:[H.nameEn||H.name," - ",H.city]},H.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Orders to Ship"}),e.jsxs("div",{style:{maxHeight:"150px",overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem"},children:[J?.map(H=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0"},children:[e.jsx("input",{type:"checkbox",name:"orderIds",value:H.id}),e.jsxs("span",{children:[H.orderNumber," - ",H.product?.name]})]},H.id)),(!J||J.length===0)&&e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"No released orders available"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Courier Name"}),e.jsx("input",{type:"text",name:"courierName",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Vehicle Info"}),e.jsx("input",{type:"text",name:"vehicleInfo",className:"form-input",placeholder:"e.g., Van ABC-123"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Departure Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledDepartureTime",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Expected Arrival"}),e.jsx("input",{type:"datetime-local",name:"expectedArrivalTime",className:"form-input"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ne.isPending,children:ne.isPending?"Creating...":"Create Shipment"})]})]})]})}),o&&t&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Assign Driver"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{l(!1),r(null)},children:""})]}),e.jsxs("form",{onSubmit:Se,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontWeight:500},children:t.shipmentNumber}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:[t.customer?.nameEn||t.customer?.name,"  ",t.orders?.length||0," orders"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Driver *"}),e.jsxs("select",{name:"driverId",className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select Driver"}),G?.filter(H=>H.status==="ACTIVE").map(H=>e.jsxs("option",{value:H.id,children:[H.fullName," - ",H.vehicleType," (",H.vehiclePlateNo,")",H.inTransit>0&&`  ${H.inTransit} in transit`]},H.id))]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pickup Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledPickupAt",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledDeliveryAt",className:"form-input"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{name:"priority",className:"form-select",defaultValue:t.priority||"NORMAL",children:[e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes for Driver"}),e.jsx("textarea",{name:"driverNotes",className:"form-textarea",rows:2,placeholder:"Special instructions for the driver..."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),r(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:me.isPending,children:me.isPending?"Assigning...":"Assign Driver"})]})]})]})}),u&&t&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Schedule Shipment"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{d(!1),r(null)},children:""})]}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontWeight:500},children:t.shipmentNumber}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:t.customer?.nameEn||t.customer?.name})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pickup Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledPickupAt",className:"form-input",defaultValue:t.scheduledPickupAt?Ze(new Date(t.scheduledPickupAt),"yyyy-MM-dd'T'HH:mm"):""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledDeliveryAt",className:"form-input",defaultValue:t.scheduledDeliveryAt?Ze(new Date(t.scheduledDeliveryAt),"yyyy-MM-dd'T'HH:mm"):""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{name:"priority",className:"form-select",defaultValue:t.priority||"NORMAL",children:[e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"URGENT",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{d(!1),r(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ce.isPending,children:ce.isPending?"Saving...":"Save Schedule"})]})]})]})}),a&&t&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Confirm Delivery"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{s(!1),r(null)},children:""})]}),e.jsxs("form",{onSubmit:ye,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontWeight:500},children:t.shipmentNumber}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:[t.customer?.nameEn||t.customer?.name,"  ",t.orders?.length||0," orders"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Receiver Name *"}),e.jsx("input",{type:"text",name:"receiverName",className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Notes"}),e.jsx("textarea",{name:"notes",className:"form-textarea",rows:3,placeholder:"Any notes about the delivery..."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{s(!1),r(null)},children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-success",disabled:ie.isPending,children:[e.jsx(Ut,{size:16}),ie.isPending?"Confirming...":"Confirm Delivery"]})]})]})]})}),w&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:"450px"},onClick:H=>H.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Print Shipment Label"}),e.jsx("button",{onClick:()=>C(null),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsx("div",{className:"modal-body",style:{display:"flex",justifyContent:"center"},children:e.jsx(F5e,{shipment:w})})]})})]})}function Q5e(){const[t,r]=k.useState(!1),[n,i]=k.useState(null),[a,s]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState({}),[f,p]=k.useState(null),x=pr(),v=gn(),{data:w,isLoading:C}=Ve({queryKey:["users"],queryFn:async()=>{const{data:G}=await xe.get("/users");return G}}),{data:N}=Ve({queryKey:["roles"],queryFn:async()=>{const{data:G}=await xe.get("/roles");return G}}),{data:T}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:G}=await xe.get("/customers");return G}}),O=N?.find(G=>G.id===a)?.name==="Customer",D=N?.find(G=>G.id===a)?.name==="Driver";k.useEffect(()=>{n?(s(n.roleId||""),l(n.customerId||"")):(s(""),l(""))},[n]);const M=ot({mutationFn:async G=>n?xe.put(`/users/${n.id}`,G):xe.post("/users",G),onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),r(!1),i(null),v.success("Success",n?"User updated successfully":"User created successfully")},onError:G=>{v.error("Error",G.response?.data?.error||"Failed to save user")}}),Y=G=>{G.preventDefault();const ne=new FormData(G.currentTarget),Z=ne.get("roleId"),ie=ne.get("customerId");if(N?.find(ce=>ce.id===Z)?.name==="Customer"&&!ie){v.error("Customer Required","Users with Customer role must be linked to a customer record.");return}M.mutate({email:ne.get("email"),password:ne.get("password")||void 0,firstName:ne.get("firstName"),lastName:ne.get("lastName"),phone:ne.get("phone"),roleId:Z,customerId:ie||null,isActive:ne.get("isActive")==="true"})},q=[{key:"search",label:"Search",type:"search",placeholder:"Search name, email, phone..."},{key:"role",label:"Role",type:"select",options:[{value:"",label:"All Roles"},...N?.map(G=>({value:G.id,label:G.name}))||[]]},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{key:"customerLinked",label:"Customer Link",type:"select",options:[{value:"",label:"All"},{value:"linked",label:"Linked to Customer"},{value:"internal",label:"Internal Users"}]}],W=w?.filter(G=>{if(u.role&&G.roleId!==u.role||u.status==="active"&&!G.isActive||u.status==="inactive"&&G.isActive||u.customerLinked==="linked"&&!G.customerId||u.customerLinked==="internal"&&G.customerId||f==="active"&&!G.isActive||f==="inactive"&&G.isActive||f==="admins"&&G.role?.name!=="Admin"||f==="customers"&&G.role?.name!=="Customer"||f==="drivers"&&G.role?.name!=="Driver")return!1;if(u.search){const ne=u.search.toLowerCase();if(![G.firstName,G.lastName,`${G.firstName} ${G.lastName}`,G.email,G.phone,G.role?.name,G.customer?.name].some(ie=>ie?.toLowerCase().includes(ne)))return!1}return!0}),J={total:w?.length||0,active:w?.filter(G=>G.isActive).length||0,inactive:w?.filter(G=>!G.isActive).length||0,admins:w?.filter(G=>G.role?.name==="Admin").length||0,customers:w?.filter(G=>G.role?.name==="Customer").length||0,drivers:w?.filter(G=>G.role?.name==="Driver").length||0},z=G=>{p(f===G?null:G)};return C?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"User Management"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage system users, roles, and customer access"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>r(!0),children:[e.jsx(cn,{size:16}),"Add User"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Users",value:J.total,icon:e.jsx(cc,{size:20}),color:"primary",onClick:()=>p(null),selected:f===null}),e.jsx(st,{title:"Active",value:J.active,icon:e.jsx(UC,{size:20}),color:"success",onClick:()=>z("active"),selected:f==="active"}),e.jsx(st,{title:"Inactive",value:J.inactive,icon:e.jsx(x8,{size:20}),color:"danger",onClick:()=>z("inactive"),selected:f==="inactive"}),e.jsx(st,{title:"Admins",value:J.admins,icon:e.jsx(ia,{size:20}),color:"info",onClick:()=>z("admins"),selected:f==="admins"}),e.jsx(st,{title:"Customers",value:J.customers,icon:e.jsx(Mp,{size:20}),color:"warning",onClick:()=>z("customers"),selected:f==="customers"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:q,values:u,onChange:(G,ne)=>d(Z=>({...Z,[G]:ne})),onReset:()=>{d({}),p(null)}})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["User List (",W?.length||0,")"]})}),W?.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table",style:{marginBottom:0,minWidth:"900px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Linked Customer"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"80px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:W.map(G=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("div",{style:{width:"2.25rem",height:"2.25rem",borderRadius:"50%",background:G.isActive?"var(--primary)":"var(--text-muted)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"0.8125rem"},children:[G.firstName?.[0],G.lastName?.[0]]}),e.jsx("div",{children:e.jsxs("div",{style:{fontWeight:500},children:[G.firstName," ",G.lastName]})})]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.875rem"},children:[e.jsx(uc,{size:14,style:{color:"var(--text-muted)"}}),G.email]})}),e.jsx("td",{children:G.phone?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.875rem"},children:[e.jsx(vo,{size:14,style:{color:"var(--text-muted)"}}),G.phone]}):e.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${G.role?.name==="Admin"?"badge-primary":G.role?.name==="Customer"?"badge-warning":G.role?.name==="Driver"?"badge-info":"badge-secondary"}`,children:[G.role?.name==="Admin"&&e.jsx(ia,{size:12,style:{marginRight:"0.25rem"}}),G.role?.name==="Customer"&&e.jsx(Mp,{size:12,style:{marginRight:"0.25rem"}}),G.role?.name==="Driver"&&e.jsx(dn,{size:12,style:{marginRight:"0.25rem"}}),G.role?.name]})}),e.jsx("td",{children:G.customer?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(m8,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:G.customer.nameEn||G.customer.name})]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Internal"})}),e.jsx("td",{children:G.isActive?e.jsxs("span",{className:"badge badge-success",children:[e.jsx(UC,{size:12,style:{marginRight:"0.25rem"}}),"Active"]}):e.jsxs("span",{className:"badge badge-danger",children:[e.jsx(x8,{size:12,style:{marginRight:"0.25rem"}}),"Inactive"]})}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>{i(G),r(!0)},title:"Edit User",children:e.jsx(Ha,{size:14})})})})]},G.id))})]})}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No users found",message:"Add your first user to get started",icon:"user"})})]}),t&&e.jsx("div",{className:"modal-overlay",onClick:()=>r(!1),children:e.jsxs("div",{className:"modal",onClick:G=>G.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:n?"Edit User":"Add User"}),e.jsx("button",{onClick:()=>{r(!1),i(null)},style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"First Name *"}),e.jsx("input",{name:"firstName",className:"form-input",defaultValue:n?.firstName,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Last Name *"}),e.jsx("input",{name:"lastName",className:"form-input",defaultValue:n?.lastName,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email *"}),e.jsx("input",{name:"email",type:"email",className:"form-input",defaultValue:n?.email,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:n?"New Password (leave blank to keep)":"Password *"}),e.jsx("input",{name:"password",type:"password",className:"form-input",required:!n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("input",{name:"phone",className:"form-input",defaultValue:n?.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Role *"}),e.jsxs("select",{name:"roleId",className:"form-select",value:a,onChange:G=>s(G.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),N?.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(m8,{size:14}),"Linked Customer ",O&&e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]})}),e.jsxs("select",{name:"customerId",className:"form-select",value:o,onChange:G=>l(G.target.value),required:O,style:O&&!o?{borderColor:"var(--warning)"}:{},children:[e.jsx("option",{value:"",children:"None (Internal User)"}),T?.map(G=>e.jsxs("option",{value:G.id,children:[G.nameEn||G.name," (",G.code,")"]},G.id))]}),O&&!o&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"rgba(251, 191, 36, 0.1)",borderRadius:"var(--radius)",fontSize:"0.75rem",color:"var(--warning)"},children:[e.jsx($r,{size:14}),"Customer role requires linking to a customer record"]}),!O&&!D&&o&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Note: Only Customer role users can access the customer portal"})]}),n&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"isActive",className:"form-select",defaultValue:n?.isActive?"true":"false",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{r(!1),i(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:M.isPending,children:M.isPending?"Saving...":"Save User"})]})]})]})})]})}const WR=["#2563eb","#22c55e","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];function Y5e(){const[t,r]=k.useState({fromDate:Ze(WA(new Date,7),"yyyy-MM-dd"),toDate:Ze(new Date,"yyyy-MM-dd")}),{data:n}=Ve({queryKey:["daily-production",t],queryFn:async()=>{const{data:l}=await xe.get("/reports/daily-production",{params:t});return l}}),{data:i}=Ve({queryKey:["on-time-delivery",t],queryFn:async()=>{const{data:l}=await xe.get("/reports/on-time-delivery",{params:t});return l}}),{data:a}=Ve({queryKey:["qc-pass-rate",t],queryFn:async()=>{const{data:l}=await xe.get("/reports/qc-pass-rate",{params:t});return l}}),{data:s}=Ve({queryKey:["capacity-utilization",t],queryFn:async()=>{const{data:l}=await xe.get("/reports/capacity-utilization",{params:t});return l}}),{data:o}=Ve({queryKey:["order-turnaround",t],queryFn:async()=>{const{data:l}=await xe.get("/reports/order-turnaround",{params:t});return l}});return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"Reports & Analytics"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx($n,{size:18,color:"var(--text-muted)"}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:t.fromDate,onChange:l=>r({...t,fromDate:l.target.value})}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:t.toDate,onChange:l=>r({...t,toDate:l.target.value})})]})]}),e.jsxs("div",{className:"grid grid-4",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(dn,{size:20,color:"var(--primary)"}),e.jsx("span",{className:"stat-label",children:"On-Time Delivery"})]}),e.jsxs("div",{className:"stat-value",children:[i?.onTimeRate||0,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[i?.onTime||0," of ",i?.totalDelivered||0," deliveries"]})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Ut,{size:20,color:"var(--success)"}),e.jsx("span",{className:"stat-label",children:"QC Pass Rate"})]}),e.jsxs("div",{className:"stat-value",children:[a?.passRate||0,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[a?.passed||0," passed, ",a?.failed||0," failed"]})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Qt,{size:20,color:"var(--warning)"}),e.jsx("span",{className:"stat-label",children:"Avg Turnaround"})]}),e.jsxs("div",{className:"stat-value",children:[o?.averageTurnaroundHours||0,"h"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Order to delivery"})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(t0,{size:20,color:"var(--info)"}),e.jsx("span",{className:"stat-label",children:"Total Orders"})]}),e.jsx("div",{className:"stat-value",children:o?.totalOrders||0}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered in period"})]})]}),e.jsxs("div",{className:"grid grid-2",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600},children:"Daily Production Summary"})}),e.jsx("div",{style:{padding:"1.5rem",height:"300px"},children:n?.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(kg,{data:n,children:[e.jsx(Qu,{strokeDasharray:"3 3"}),e.jsx(Yu,{dataKey:"date",tickFormatter:l=>Ze(new Date(l),"MMM dd")}),e.jsx(nu,{}),e.jsx(kc,{}),e.jsx(ef,{dataKey:"totalBatches",fill:"#2563eb",name:"Batches"}),e.jsx(ef,{dataKey:"totalOrders",fill:"#22c55e",name:"Orders"})]})}):e.jsx("div",{className:"empty-state",children:"No production data for this period"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600},children:"QC Pass Rate by Product"})}),e.jsx("div",{style:{padding:"1.5rem",height:"300px"},children:a?.byProduct&&Object.keys(a.byProduct).length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(Dg,{children:[e.jsx(Tp,{data:Object.entries(a.byProduct).map(([l,u])=>({name:l,value:u.passed})),cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:u})=>`${l} (${(u*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:Object.entries(a.byProduct).map((l,u)=>e.jsx(Ju,{fill:WR[u%WR.length]},`cell-${u}`))}),e.jsx(kc,{})]})}):e.jsx("div",{className:"empty-state",children:"No QC data for this period"})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600},children:"Capacity Utilization"})}),e.jsx("div",{style:{padding:"0"},children:s?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Equipment"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Batches"}),e.jsx("th",{children:"Minutes Used"}),e.jsx("th",{children:"Utilization"})]})}),e.jsx("tbody",{children:s.map(l=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500},children:l.equipment}),e.jsx("td",{children:l.type}),e.jsx("td",{children:l.batchCount}),e.jsxs("td",{children:[l.minutesUsed.toFixed(0)," min"]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"100px",height:"8px",background:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${l.utilizationPercent}%`,height:"100%",background:parseFloat(l.utilizationPercent)>80?"var(--success)":"var(--primary)",borderRadius:"4px"}})}),e.jsxs("span",{children:[l.utilizationPercent,"%"]})]})})]},l.equipment))})]}):e.jsx("div",{className:"empty-state",children:"No capacity data for this period"})})]})]})}const Jd=["#2563eb","#22c55e","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],GS={inventory:YL,production:lu,orders:qo,quality:af,dispensing:Rr,logistics:dn,finance:rd,customers:Ts,products:Rr,planner:$n,payments:Ul,users:cc,audit:Pr},Z5e={inventory:"primary",production:"warning",orders:"info",quality:"success",dispensing:"primary",logistics:"info",finance:"success",customers:"primary",products:"default",planner:"warning",payments:"success",users:"info",audit:"default"};function X5e(){const t=gn(),[r,n]=k.useState("dashboard"),[i,a]=k.useState(null),[s,o]=k.useState(null),[l,u]=k.useState({}),[d,f]=k.useState(1),[p,x]=k.useState(!0),[v,w]=k.useState(null),[C,N]=k.useState({fromDate:Ze(WA(new Date,7),"yyyy-MM-dd"),toDate:Ze(new Date,"yyyy-MM-dd")}),{data:T=[]}=Ve({queryKey:["report-categories"],queryFn:async()=>{const{data:be}=await xe.get("/reports/enterprise/categories");return be}}),{data:O=[]}=Ve({queryKey:["reports-list",i],queryFn:async()=>{const be=i?`/reports/enterprise/list?category=${i}`:"/reports/enterprise/list",{data:Le}=await xe.get(be);return Le}}),{data:D}=Ve({queryKey:["report-definition",s],queryFn:async()=>{const{data:be}=await xe.get(`/reports/enterprise/${s}/definition`);return be},enabled:!!s}),{data:M,isLoading:Y,refetch:q}=Ve({queryKey:["report-data",s,l,d],queryFn:async()=>{const{data:be}=await xe.post(`/reports/enterprise/${s}/data`,{filters:l,page:d,pageSize:25});return be},enabled:!!s}),{data:W}=Ve({queryKey:["daily-production",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/daily-production",{params:C});return be},enabled:r==="dashboard"}),{data:J}=Ve({queryKey:["on-time-delivery",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/on-time-delivery",{params:C});return be},enabled:r==="dashboard"}),{data:z}=Ve({queryKey:["qc-pass-rate",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/qc-pass-rate",{params:C});return be},enabled:r==="dashboard"}),{data:G}=Ve({queryKey:["capacity-utilization",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/capacity-utilization",{params:C});return be},enabled:r==="dashboard"}),{data:ne}=Ve({queryKey:["order-turnaround",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/order-turnaround",{params:C});return be},enabled:r==="dashboard"}),{data:Z=[]}=Ve({queryKey:["quick-insights-order-status",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/quick-insights/order-status",{params:C});return be},enabled:r==="dashboard"}),{data:ie=[]}=Ve({queryKey:["quick-insights-batch-status",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/quick-insights/batch-status",{params:C});return be},enabled:r==="dashboard"}),{data:me=[]}=Ve({queryKey:["quick-insights-top-products",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/quick-insights/top-products",{params:{...C,limit:5}});return be},enabled:r==="dashboard"}),{data:ce=[]}=Ve({queryKey:["quick-insights-top-customers",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/quick-insights/top-customers",{params:{...C,limit:5}});return be},enabled:r==="dashboard"}),{data:Q=[]}=Ve({queryKey:["quick-insights-invoice-trend",C],queryFn:async()=>{const{data:be}=await xe.get("/reports/quick-insights/invoice-trend",{params:C});return be},enabled:r==="dashboard"}),de=O.reduce((be,Le)=>(be[Le.category]||(be[Le.category]=[]),be[Le.category].push(Le),be),{}),le=(be,Le)=>{u(ke=>({...ke,[be]:Le}))},ye=()=>{u({}),f(1)},Se=async be=>{if(s){w(be);try{const Le=await xe.post(`/reports/enterprise/${s}/export/${be}`,{filters:l},{responseType:"blob"}),ke=new Blob([Le.data],{type:be==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"application/pdf"}),He=window.URL.createObjectURL(ke),Je=document.createElement("a");Je.href=He,Je.download=`${s}-${new Date().toISOString().slice(0,10)}.${be==="excel"?"xlsx":"pdf"}`,document.body.appendChild(Je),Je.click(),window.URL.revokeObjectURL(He),document.body.removeChild(Je),t.success("Export Complete",`Report exported to ${be.toUpperCase()}`)}catch{t.error("Export Failed",`Failed to export report to ${be.toUpperCase()}`)}finally{w(null)}}},$=(be,Le)=>{if(be==null)return"-";switch(Le){case"date":return new Date(be).toLocaleDateString();case"datetime":return new Date(be).toLocaleString();case"currency":return`SAR ${Number(be).toLocaleString(void 0,{minimumFractionDigits:2})}`;case"number":return Number(be).toLocaleString();case"percent":return`${be}%`;case"boolean":return be?"Yes":"No";default:return String(be)}},X=(be,Le)=>Le&&Le[be]?Le[be]:{ACTIVE:"success",APPROVED:"success",COMPLETED:"success",DELIVERED:"success",PENDING:"warning",IN_PROGRESS:"warning",DRAFT:"default",CANCELLED:"danger",REJECTED:"danger",FAILED:"danger",EXPIRED:"danger"}[be]||"default",se=be=>{s===be?o(null):(o(be),u({}),f(1))},H=be=>{i===be?(a(null),o(null)):(a(be),o(null),u({}))},oe=i?de[i]||[]:[],ge=T.find(be=>be.id===i)?.name||"";return e.jsxs("div",{children:[e.jsx(zc,{title:"Enterprise Reporting Center",subtitle:"Analytics dashboard and comprehensive reports across all business areas"}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0"},children:[e.jsxs("button",{onClick:()=>{n("dashboard"),a(null),o(null)},style:{padding:"0.75rem 1.25rem",border:"none",background:"transparent",cursor:"pointer",fontSize:"0.9375rem",fontWeight:500,color:r==="dashboard"?"var(--primary)":"var(--text-muted)",borderBottom:r==="dashboard"?"2px solid var(--primary)":"2px solid transparent",marginBottom:"-1px",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[e.jsx(e2,{size:18}),"Analytics Dashboard"]}),e.jsxs("button",{onClick:()=>{n("reports"),a(null),o(null)},style:{padding:"0.75rem 1.25rem",border:"none",background:"transparent",cursor:"pointer",fontSize:"0.9375rem",fontWeight:500,color:r==="reports"?"var(--primary)":"var(--text-muted)",borderBottom:r==="reports"?"2px solid var(--primary)":"2px solid transparent",marginBottom:"-1px",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[e.jsx(Pr,{size:18}),"Report Categories"]})]}),r==="dashboard"&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx($n,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto",padding:"0.375rem 0.625rem"},value:C.fromDate,onChange:be=>N({...C,fromDate:be.target.value})}),e.jsx("span",{style:{color:"var(--text-muted)"},children:"to"}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto",padding:"0.375rem 0.625rem"},value:C.toDate,onChange:be=>N({...C,toDate:be.target.value})})]})}),e.jsxs("div",{className:"grid grid-4",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(dn,{size:20,color:"var(--primary)"}),e.jsx("span",{className:"stat-label",children:"On-Time Delivery"})]}),e.jsxs("div",{className:"stat-value",children:[J?.onTimeRate||0,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[J?.onTime||0," of ",J?.totalDelivered||0," deliveries"]})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Ut,{size:20,color:"var(--success)"}),e.jsx("span",{className:"stat-label",children:"QC Pass Rate"})]}),e.jsxs("div",{className:"stat-value",children:[z?.passRate||0,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[z?.passed||0," passed, ",z?.failed||0," failed"]})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Qt,{size:20,color:"var(--warning)"}),e.jsx("span",{className:"stat-label",children:"Avg Turnaround"})]}),e.jsxs("div",{className:"stat-value",children:[ne?.averageTurnaroundHours||0,"h"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Order to delivery"})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(t0,{size:20,color:"var(--info)"}),e.jsx("span",{className:"stat-label",children:"Total Orders"})]}),e.jsx("div",{className:"stat-value",children:ne?.totalOrders||0}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered in period"})]})]}),e.jsxs("div",{className:"grid grid-2",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Daily Production Summary"})}),e.jsx("div",{style:{padding:"1.5rem",height:"300px"},children:W?.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(kg,{data:W,children:[e.jsx(Qu,{strokeDasharray:"3 3"}),e.jsx(Yu,{dataKey:"date",tickFormatter:be=>Ze(new Date(be),"MMM dd")}),e.jsx(nu,{}),e.jsx(kc,{}),e.jsx(ef,{dataKey:"totalBatches",fill:"#2563eb",name:"Batches"}),e.jsx(ef,{dataKey:"totalOrders",fill:"#22c55e",name:"Orders"})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:"No production data for this period"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0},children:"QC Pass Rate by Product"})}),e.jsx("div",{style:{padding:"1.5rem",height:"300px"},children:z?.byProduct&&Object.keys(z.byProduct).length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(Dg,{children:[e.jsx(Tp,{data:Object.entries(z.byProduct).map(([be,Le])=>({name:be,value:Le.passed})),cx:"50%",cy:"50%",labelLine:!1,label:({name:be,percent:Le})=>`${be} (${((Le||0)*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:Object.entries(z.byProduct).map((be,Le)=>e.jsx(Ju,{fill:Jd[Le%Jd.length]},`cell-${Le}`))}),e.jsx(kc,{})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:"No QC data for this period"})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Capacity Utilization"})}),e.jsx("div",{style:{padding:0},children:G?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Equipment"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Batches"}),e.jsx("th",{children:"Minutes Used"}),e.jsx("th",{children:"Utilization"})]})}),e.jsx("tbody",{children:G.map(be=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500},children:be.equipment}),e.jsx("td",{children:be.type}),e.jsx("td",{children:be.batchCount}),e.jsxs("td",{children:[be.minutesUsed.toFixed(0)," min"]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"100px",height:"8px",background:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${be.utilizationPercent}%`,height:"100%",background:parseFloat(be.utilizationPercent)>80?"var(--success)":"var(--primary)",borderRadius:"4px"}})}),e.jsxs("span",{children:[be.utilizationPercent,"%"]})]})})]},be.equipment))})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No capacity data for this period"})})]}),e.jsx("div",{style:{marginTop:"2rem",marginBottom:"1.25rem"},children:e.jsxs("h3",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ZQ,{size:16}),"Quick Insights"]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.25rem",marginBottom:"1.25rem"},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0,fontSize:"0.875rem",color:"var(--text-primary)"},children:"Order Status Distribution"})}),e.jsxs("div",{style:{padding:"1.25rem",display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsx("div",{style:{width:"180px",height:"180px",flexShrink:0},children:Z.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(Dg,{children:[e.jsx(Tp,{data:Z,cx:"50%",cy:"50%",innerRadius:45,outerRadius:75,paddingAngle:2,dataKey:"value",children:Z.map((be,Le)=>e.jsx(Ju,{fill:Jd[Le%Jd.length]},`cell-${Le}`))}),e.jsx(kc,{contentStyle:{background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)",fontSize:"0.875rem"},children:"No data"})}),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.5rem"},children:Z.map((be,Le)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",background:Jd[Le%Jd.length]}}),e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:be.name})]}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:600},children:be.value})]},be.name))})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0,fontSize:"0.875rem",color:"var(--text-primary)"},children:"Batch Status Distribution"})}),e.jsxs("div",{style:{padding:"1.25rem",display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsx("div",{style:{width:"180px",height:"180px",flexShrink:0},children:ie.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(Dg,{children:[e.jsx(Tp,{data:ie,cx:"50%",cy:"50%",innerRadius:45,outerRadius:75,paddingAngle:2,dataKey:"value",children:ie.map((be,Le)=>e.jsx(Ju,{fill:Jd[Le%Jd.length]},`cell-${Le}`))}),e.jsx(kc,{contentStyle:{background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)",fontSize:"0.875rem"},children:"No data"})}),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.5rem"},children:ie.map((be,Le)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",background:Jd[Le%Jd.length]}}),e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:be.name})]}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:600},children:be.value})]},be.name))})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.25rem",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontWeight:600,margin:0,fontSize:"0.875rem",color:"var(--text-primary)"},children:"Revenue Trend"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx("div",{style:{width:"12px",height:"3px",background:"#2563eb",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-muted)"},children:"Revenue"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx("div",{style:{width:"12px",height:"3px",background:"#22c55e",borderRadius:"2px"}}),e.jsx("span",{style:{color:"var(--text-muted)"},children:"Invoices"})]})]})]}),e.jsx("div",{style:{padding:"1.25rem 1rem 1rem 0",height:"260px"},children:Q.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(ZU,{data:Q,margin:{top:5,right:20,bottom:5,left:10},children:[e.jsx(Qu,{strokeDasharray:"3 3",stroke:"var(--border)"}),e.jsx(Yu,{dataKey:"date",tickFormatter:be=>Ze(new Date(be),"MMM dd"),tick:{fontSize:11,fill:"var(--text-muted)"},axisLine:{stroke:"var(--border)"}}),e.jsx(nu,{yAxisId:"left",tickFormatter:be=>`${(be/1e3).toFixed(0)}K`,tick:{fontSize:11,fill:"var(--text-muted)"},axisLine:{stroke:"var(--border)"}}),e.jsx(nu,{yAxisId:"right",orientation:"right",tick:{fontSize:11,fill:"var(--text-muted)"},axisLine:{stroke:"var(--border)"}}),e.jsx(kc,{contentStyle:{background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",fontSize:"0.8125rem"},formatter:(be,Le)=>[Le==="revenue"?`SAR ${be.toLocaleString()}`:be,Le==="revenue"?"Revenue":"Invoices"],labelFormatter:be=>Ze(new Date(be),"MMM dd, yyyy")}),e.jsx(ay,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:2.5,name:"revenue",dot:!1,activeDot:{r:5,strokeWidth:2}}),e.jsx(ay,{yAxisId:"right",type:"monotone",dataKey:"count",stroke:"#22c55e",strokeWidth:2.5,name:"invoices",dot:!1,activeDot:{r:5,strokeWidth:2}})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:"No invoice data for this period"})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.25rem"},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0,fontSize:"0.875rem",color:"var(--text-primary)"},children:"Top Products by Orders"})}),e.jsx("div",{style:{padding:"1rem 1.25rem 1.25rem 0",height:"240px"},children:me.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(kg,{data:me,layout:"vertical",margin:{left:10,right:20,top:5,bottom:5},children:[e.jsx(Qu,{strokeDasharray:"3 3",stroke:"var(--border)",horizontal:!0,vertical:!1}),e.jsx(Yu,{type:"number",tick:{fontSize:11,fill:"var(--text-muted)"},axisLine:{stroke:"var(--border)"}}),e.jsx(nu,{type:"category",dataKey:"name",width:120,tick:{fontSize:11,fill:"var(--text-secondary)"},axisLine:{stroke:"var(--border)"}}),e.jsx(kc,{contentStyle:{background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",fontSize:"0.8125rem"},formatter:be=>[be,"Orders"]}),e.jsx(ef,{dataKey:"orderCount",fill:"#3b82f6",name:"Orders",radius:[0,4,4,0],maxBarSize:24})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:"No product data for this period"})})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsx("h3",{style:{fontWeight:600,margin:0,fontSize:"0.875rem",color:"var(--text-primary)"},children:"Top Customers by Orders"})}),e.jsx("div",{style:{padding:"1rem 1.25rem 1.25rem 0",height:"240px"},children:ce.length>0?e.jsx(Ic,{width:"100%",height:"100%",children:e.jsxs(kg,{data:ce,layout:"vertical",margin:{left:10,right:20,top:5,bottom:5},children:[e.jsx(Qu,{strokeDasharray:"3 3",stroke:"var(--border)",horizontal:!0,vertical:!1}),e.jsx(Yu,{type:"number",tick:{fontSize:11,fill:"var(--text-muted)"},axisLine:{stroke:"var(--border)"}}),e.jsx(nu,{type:"category",dataKey:"name",width:120,tick:{fontSize:11,fill:"var(--text-secondary)"},axisLine:{stroke:"var(--border)"}}),e.jsx(kc,{contentStyle:{background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",fontSize:"0.8125rem"},formatter:be=>[be,"Orders"]}),e.jsx(ef,{dataKey:"orderCount",fill:"#10b981",name:"Orders",radius:[0,4,4,0],maxBarSize:24})]})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:"No customer data for this period"})})]})]})]}),r==="reports"&&!i&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"2rem",marginBottom:"1.5rem",textAlign:"center"},children:[e.jsx(Pr,{size:40,style:{color:"var(--primary)",marginBottom:"1rem"}}),e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Select a Report Category"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:"Choose a category below to view available reports"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem"},children:T.map(be=>{const Le=GS[be.id]||Pr,ke=Z5e[be.id]||"default",He=de[be.id]?.length||0;return e.jsxs("button",{onClick:()=>H(be.id),className:"card",style:{padding:"1.5rem",border:"1px solid var(--border)",cursor:"pointer",textAlign:"center",transition:"all 0.2s"},onMouseEnter:Je=>{Je.currentTarget.style.borderColor="var(--primary)",Je.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Je=>{Je.currentTarget.style.borderColor="var(--border)",Je.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`var(--${ke==="default"?"bg-secondary":ke+"-light"}, var(--bg-secondary))`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:e.jsx(Le,{size:24,style:{color:`var(--${ke==="default"?"text-muted":ke})`}})}),e.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,marginBottom:"0.25rem"},children:be.name}),e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:[He," reports"]})]},be.id)})})]}),r==="reports"&&i&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{a(null),o(null)},style:{padding:"0.375rem 0.625rem"},children:e.jsx(aa,{size:16})}),(()=>{const be=GS[i]||Pr;return e.jsx(be,{size:24,style:{color:"var(--primary)"}})})(),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,margin:0},children:ge}),e.jsxs("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",margin:0},children:[oe.length," reports available - click a report to view data"]})]})]}),oe.length===0?e.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[e.jsx(sn,{size:32,style:{color:"var(--text-muted)",marginBottom:"1rem"}}),e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Reports Available"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"There are no reports in this category or you don't have access to them."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:oe.map(be=>{const Le=s===be.key,ke=GS[i]||Pr;return e.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>se(be.key),style:{display:"flex",alignItems:"center",gap:"1rem",width:"100%",padding:"1rem 1.25rem",border:"none",background:Le?"var(--primary-light, #eff6ff)":"transparent",textAlign:"left",cursor:"pointer",transition:"background 0.2s"},children:[e.jsx("div",{style:{padding:"0.625rem",borderRadius:"8px",background:Le?"var(--primary)":"var(--bg-secondary)",color:Le?"white":"var(--text-muted)"},children:e.jsx(ke,{size:20})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:Le?"var(--primary)":"var(--text-primary)",marginBottom:"0.125rem"},children:be.name}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:be.description})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Le&&e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--primary)",fontWeight:500},children:"Viewing"}),Le?e.jsx(bo,{size:18}):e.jsx(jo,{size:18})]})]}),Le&&e.jsxs("div",{style:{borderTop:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("button",{className:`btn ${p?"btn-primary":"btn-secondary"}`,onClick:()=>x(!p),style:{padding:"0.5rem 0.75rem"},children:[e.jsx(fl,{size:14}),"Filters",Object.keys(l).filter(He=>l[He]).length>0&&e.jsx("span",{style:{marginLeft:"0.375rem",padding:"0.125rem 0.375rem",borderRadius:"10px",fontSize:"0.6875rem",background:p?"white":"var(--primary)",color:p?"var(--primary)":"white"},children:Object.keys(l).filter(He=>l[He]).length})]}),M&&e.jsxs("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:[M.total," records found"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>Se("excel"),disabled:v!==null||!M?.data.length,style:{padding:"0.5rem 0.75rem"},children:[v==="excel"?e.jsx(Eg,{size:14,className:"animate-spin"}):e.jsx(VY,{size:14}),"Excel"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>Se("pdf"),disabled:v!==null||!M?.data.length,style:{padding:"0.5rem 0.75rem"},children:[v==="pdf"?e.jsx(Eg,{size:14,className:"animate-spin"}):e.jsx(rz,{size:14}),"PDF"]})]})]}),p&&D?.filters&&D.filters.length>0&&e.jsxs("div",{style:{padding:"1rem 1.25rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:D.filters.map(He=>e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.6875rem",marginBottom:"0.25rem"},children:He.label}),He.type==="text"&&e.jsx("input",{type:"text",className:"form-input",style:{padding:"0.375rem 0.625rem",fontSize:"0.8125rem"},value:l[He.key]||"",onChange:Je=>le(He.key,Je.target.value),placeholder:`Enter ${He.label.toLowerCase()}`}),He.type==="date"&&e.jsx("input",{type:"date",className:"form-input",style:{padding:"0.375rem 0.625rem",fontSize:"0.8125rem"},value:l[He.key]||"",onChange:Je=>le(He.key,Je.target.value)}),He.type==="number"&&e.jsx("input",{type:"number",className:"form-input",style:{padding:"0.375rem 0.625rem",fontSize:"0.8125rem"},value:l[He.key]||He.defaultValue||"",onChange:Je=>le(He.key,Je.target.value)}),He.type==="select"&&He.options&&e.jsxs("select",{className:"form-select",style:{padding:"0.375rem 0.625rem",fontSize:"0.8125rem"},value:l[He.key]||"",onChange:Je=>le(He.key,Je.target.value),children:[e.jsx("option",{value:"",children:"All"}),He.options.map(Je=>e.jsx("option",{value:Je.value,children:Je.label},Je.value))]})]},He.key))}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>q(),style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem"},children:[e.jsx(Gs,{size:14}),"Apply"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:ye,style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem"},children:[e.jsx(kr,{size:14}),"Clear"]})]})]}),Y?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem"},children:[e.jsx(Eg,{size:32,className:"animate-spin",style:{color:"var(--primary)"}}),e.jsx("p",{style:{marginTop:"0.75rem",color:"var(--text-muted)"},children:"Loading report data..."})]}):M?.data.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsx("tr",{children:D?.columns.map(He=>e.jsx("th",{style:{fontSize:"0.75rem"},children:He.label},He.key))})}),e.jsx("tbody",{children:M.data.map((He,Je)=>e.jsx("tr",{children:D?.columns.map(Qe=>e.jsx("td",{style:{fontSize:"0.8125rem"},children:Qe.type==="badge"?e.jsx("span",{className:`badge badge-${X(He[Qe.key],Qe.badgeMap)}`,children:He[Qe.key]}):$(He[Qe.key],Qe.type)},Qe.key))},He.id||Je))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 1.25rem",borderTop:"1px solid var(--border)",fontSize:"0.8125rem",color:"var(--text-muted)",background:"var(--bg-secondary)"},children:[e.jsxs("span",{children:["Showing ",(d-1)*25+1," - ",Math.min(d*25,M.total)," of ",M.total]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary",disabled:d<=1,onClick:()=>f(He=>He-1),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem"},children:"Previous"}),e.jsxs("span",{style:{padding:"0 0.5rem"},children:["Page ",d," of ",M.totalPages]}),e.jsx("button",{className:"btn btn-secondary",disabled:d>=M.totalPages,onClick:()=>f(He=>He+1),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem"},children:"Next"})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem"},children:[e.jsx(sn,{size:32,style:{color:"var(--text-muted)"}}),e.jsx("h3",{style:{margin:"1rem 0 0.5rem 0",fontSize:"1rem",color:"var(--text-primary)"},children:"No Data Found"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Try adjusting your filters to see results"})]})]})]},be.key)})})]}),e.jsx("style",{children:`
        .animate-spin {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}function J5e(){const[t,r]=k.useState({entityType:"",action:"",fromDate:"",toDate:"",limit:50,offset:0}),[n,i]=k.useState(null),{formatDateOnly:a,formatTimeOnly:s}=mh(),{data:o,isLoading:l}=Ve({queryKey:["audit-logs",t],queryFn:async()=>{const x={...t};Object.keys(x).forEach(w=>{x[w]||delete x[w]});const{data:v}=await xe.get("/audit",{params:x});return v}}),{data:u}=Ve({queryKey:["audit-actions"],queryFn:async()=>{const{data:x}=await xe.get("/audit/actions");return x}}),{data:d}=Ve({queryKey:["audit-entity-types"],queryFn:async()=>{const{data:x}=await xe.get("/audit/entity-types");return x}}),f=x=>{r(v=>({...v,offset:x==="next"?v.offset+v.limit:Math.max(0,v.offset-v.limit)}))},p=x=>x.includes("CREATE")?"success":x.includes("UPDATE")||x.includes("CHANGE")?"warning":x.includes("DELETE")?"danger":x.includes("LOGIN")||x.includes("LOGOUT")?"info":"default";return l?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"Audit Log"})}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(fl,{size:18,color:"var(--text-muted)"}),e.jsxs("select",{className:"form-select",style:{width:"auto"},value:t.entityType,onChange:x=>r({...t,entityType:x.target.value,offset:0}),children:[e.jsx("option",{value:"",children:"All Entity Types"}),d?.map(x=>e.jsx("option",{value:x,children:x},x))]}),e.jsxs("select",{className:"form-select",style:{width:"auto"},value:t.action,onChange:x=>r({...t,action:x.target.value,offset:0}),children:[e.jsx("option",{value:"",children:"All Actions"}),u?.map(x=>e.jsx("option",{value:x,children:x},x))]}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:t.fromDate,onChange:x=>r({...t,fromDate:x.target.value,offset:0}),placeholder:"From Date"}),e.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:t.toDate,onChange:x=>r({...t,toDate:x.target.value,offset:0}),placeholder:"To Date"}),(t.entityType||t.action||t.fromDate||t.toDate)&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>r({entityType:"",action:"",fromDate:"",toDate:"",limit:50,offset:0}),children:"Clear Filters"})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Timestamp"}),e.jsx("th",{children:"User"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Entity Type"}),e.jsx("th",{children:"Entity ID"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:o?.logs?.map(x=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{children:a(x.createdAt)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:s(x.createdAt)})]}),e.jsx("td",{children:x.user?e.jsxs("div",{children:[e.jsxs("div",{children:[x.user.firstName," ",x.user.lastName]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:x.user.email})]}):e.jsx("span",{style:{color:"var(--text-muted)"},children:"System"})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${p(x.action)}`,children:x.action})}),e.jsx("td",{children:x.entityType}),e.jsx("td",{children:e.jsx("code",{style:{fontSize:"0.75rem",background:"var(--bg-tertiary)",padding:"0.125rem 0.25rem",borderRadius:"4px"},children:x.entityId?.slice(0,8)||"-"})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(x),children:"View"})})]},x.id))})]}),o?.logs?.length===0&&e.jsx("div",{className:"empty-state",children:"No audit logs found"}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Showing ",t.offset+1," - ",Math.min(t.offset+t.limit,o?.total||0)," of ",o?.total||0]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>f("prev"),disabled:t.offset===0,children:[e.jsx(Zp,{size:16}),"Previous"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>f("next"),disabled:t.offset+t.limit>=(o?.total||0),children:["Next",e.jsx(jo,{size:16})]})]})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(null),children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",style:{background:"linear-gradient(135deg, var(--primary) 0%, #1e40af 100%)",padding:"1.5rem",borderRadius:"16px 16px 0 0",color:"white"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(10px)"},children:e.jsx(Mc,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:600,color:"white"},children:"Audit Log Details"}),e.jsxs("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255,255,255,0.8)"},children:[a(n.createdAt)," at ",s(n.createdAt)]})]})]}),e.jsx("button",{onClick:()=>i(null),style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(kr,{size:20,color:"white"})})]}),e.jsxs("div",{className:"modal-body",style:{overflow:"auto",flex:1,padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"12px",border:"1px solid #bae6fd"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#0284c7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Uo,{size:14,color:"white"})}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#0369a1",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"User"})]}),n.user?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:"1rem",color:"#0c4a6e"},children:[n.user.firstName," ",n.user.lastName]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#0369a1",marginTop:"0.25rem"},children:n.user.email}),n.actorRole&&e.jsx("span",{className:"badge badge-info",style:{marginTop:"0.75rem",display:"inline-block"},children:n.actorRole})]}):e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#64748b"},children:"System"})]}),e.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#16a34a",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Qt,{size:14,color:"white"})}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#15803d",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"Timestamp"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#14532d"},children:a(n.createdAt)}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#15803d",marginTop:"0.25rem"},children:s(n.createdAt)})]}),e.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #fefce8 0%, #fef9c3 100%)",borderRadius:"12px",border:"1px solid #fde047"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#ca8a04",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Pr,{size:14,color:"white"})}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#a16207",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"Entity"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#713f12"},children:n.entityType}),e.jsx("code",{style:{fontSize:"0.75rem",background:"rgba(0,0,0,0.05)",padding:"0.375rem 0.625rem",borderRadius:"6px",display:"inline-block",marginTop:"0.5rem",color:"#92400e",fontFamily:"monospace",wordBreak:"break-all"},children:n.entityId||"N/A"})]}),e.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%)",borderRadius:"12px",border:"1px solid #e879f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#a855f7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(RA,{size:14,color:"white"})}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#7e22ce",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"Action"})]}),e.jsx("span",{className:`badge badge-${p(n.action)}`,style:{fontSize:"0.875rem",fontWeight:600},children:n.action}),n.traceId&&e.jsxs("div",{style:{marginTop:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#7e22ce"},children:"Trace ID: "}),e.jsxs("code",{style:{fontSize:"0.7rem",background:"rgba(0,0,0,0.05)",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:[n.traceId.slice(0,16),"..."]})]})]})]}),(n.oldValues||n.newValues)&&e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1.25rem",background:"var(--bg-secondary)",borderRadius:"12px",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(oc,{size:16,color:"white"})}),e.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,margin:0,color:"var(--text-primary)"},children:"Changes"})]}),n.oldValues&&n.newValues?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"#dc2626",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626"}}),"Before"]}),e.jsx("pre",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",overflow:"auto",maxHeight:"220px",border:"1px solid #fecaca",margin:0,color:"#991b1b",fontFamily:'"SF Mono", "Fira Code", monospace',lineHeight:1.5},children:JSON.stringify(n.oldValues,null,2)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"#16a34a",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#16a34a"}}),"After"]}),e.jsx("pre",{style:{background:"#f0fdf4",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",overflow:"auto",maxHeight:"220px",border:"1px solid #bbf7d0",margin:0,color:"#166534",fontFamily:'"SF Mono", "Fira Code", monospace',lineHeight:1.5},children:JSON.stringify(n.newValues,null,2)})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:n.oldValues?"#dc2626":"#16a34a",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.oldValues?"#dc2626":"#16a34a"}}),n.oldValues?"Previous Values":"New Values"]}),e.jsx("pre",{style:{background:n.oldValues?"#fef2f2":"#f0fdf4",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",overflow:"auto",maxHeight:"300px",border:`1px solid ${n.oldValues?"#fecaca":"#bbf7d0"}`,margin:0,color:n.oldValues?"#991b1b":"#166534",fontFamily:'"SF Mono", "Fira Code", monospace',lineHeight:1.5},children:JSON.stringify(n.oldValues||n.newValues,null,2)})]})]}),!n.oldValues&&!n.newValues&&e.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"12px",border:"2px dashed var(--border)",marginTop:"1rem"},children:[e.jsx(Pr,{size:32,style:{marginBottom:"0.75rem",opacity:.5}}),e.jsx("div",{style:{fontWeight:500},children:"No detailed change data available"}),e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem"},children:"This log entry does not contain before/after values."})]})]}),e.jsx("div",{className:"modal-footer",style:{borderTop:"1px solid var(--border)",padding:"1rem 1.5rem",display:"flex",justifyContent:"flex-end",background:"var(--bg-secondary)",borderRadius:"0 0 16px 16px"},children:e.jsx("button",{className:"btn btn-primary",onClick:()=>i(null),children:"Close"})})]})})]})}function ewe(){const t=pr(),r=gn(),[n,i]=k.useState(null),[a,s]=k.useState("PENDING"),[o,l]=k.useState({}),[u,d]=k.useState(null),[f,p]=k.useState(""),[x,v]=k.useState(""),{data:w=[],isLoading:C}=Ve({queryKey:["approvals","pending"],queryFn:async()=>{const{data:z}=await xe.get("/approvals/pending");return z}}),{data:N=[],isLoading:T}=Ve({queryKey:["approvals","requests",a],queryFn:async()=>{const z=a!=="all"?`?status=${a}`:"",{data:G}=await xe.get(`/approvals/requests${z}`);return G}}),O=ot({mutationFn:async({requestId:z,action:G,comments:ne,signature:Z})=>{const{data:ie}=await xe.post(`/approvals/${z}/action`,{action:G,comments:ne,signature:Z});return ie},onSuccess:(z,G)=>{t.invalidateQueries({queryKey:["approvals"]}),d(null),p(""),v(""),G.action==="APPROVED"?r.success("Request Approved","The approval request has been approved successfully"):r.warning("Request Rejected","The approval request has been rejected")},onError:z=>{r.error("Action Failed",z.response?.data?.error||"Failed to process approval action")}}),D=(z,G,ne)=>{d({requestId:z,action:G,workflowName:ne})},M=()=>{u&&O.mutate({requestId:u.requestId,action:u.action,comments:f||void 0,signature:x||void 0})},Y=[{key:"search",label:"Search",type:"search",placeholder:"Search workflows..."}],q=w.filter(z=>{if(o.search){const G=o.search.toLowerCase();if(!z.workflow.name.toLowerCase().includes(G)&&!z.entityType.toLowerCase().includes(G)&&!`${z.requestedBy.firstName} ${z.requestedBy.lastName}`.toLowerCase().includes(G))return!1}return!0}),W=N.filter(z=>{if(o.search){const G=o.search.toLowerCase();if(!z.workflow.name.toLowerCase().includes(G)&&!z.entityType.toLowerCase().includes(G))return!1}return!0}),J={pending:w.length,approved:N.filter(z=>z.status==="APPROVED").length,rejected:N.filter(z=>z.status==="REJECTED").length,urgent:w.filter(z=>z.priority==="URGENT").length};return C||T?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Approval Inbox"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Review and process pending approval requests"})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Pending Approvals",value:J.pending,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>s("PENDING"),selected:a==="PENDING"}),e.jsx(st,{title:"Urgent",value:J.urgent,icon:e.jsx(gu,{size:20}),color:"danger",onClick:()=>l(z=>({...z,priority:"URGENT"}))}),e.jsx(st,{title:"Approved",value:J.approved,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>s("APPROVED"),selected:a==="APPROVED"}),e.jsx(st,{title:"Rejected",value:J.rejected,icon:e.jsx(ci,{size:20}),color:"default",onClick:()=>s("REJECTED"),selected:a==="REJECTED"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:Y,values:o,onChange:(z,G)=>l(ne=>({...ne,[z]:G})),onReset:()=>l({})})}),q.length>0&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(dZ,{size:18,style:{color:"var(--warning)"}}),e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Awaiting Your Approval (",q.length,")"]})]}),e.jsx("div",{style:{padding:0},children:e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"40px"}}),e.jsx("th",{children:"Workflow"}),e.jsx("th",{children:"Entity"}),e.jsx("th",{children:"Priority"}),e.jsx("th",{children:"Current Step"}),e.jsx("th",{children:"Requested By"}),e.jsx("th",{children:"Date"}),e.jsx("th",{style:{width:"200px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:q.map(z=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline",style:{padding:"0.25rem"},onClick:()=>i(n===z.id?null:z.id),children:n===z.id?e.jsx(bo,{size:14}):e.jsx(jo,{size:14})})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:z.workflow.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:z.entityType})]}),e.jsxs("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:[z.entityId.slice(0,8),"..."]}),e.jsx("td",{children:e.jsx(Pn,{status:z.priority,size:"sm"})}),e.jsx("td",{children:z.workflow.steps.find(G=>G.stepOrder===z.currentStep)?.stepName||"Unknown"}),e.jsxs("td",{children:[z.requestedBy.firstName," ",z.requestedBy.lastName]}),e.jsx("td",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:Ze(new Date(z.createdAt),"MMM d, HH:mm")}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>i(n===z.id?null:z.id),title:"View Details",children:e.jsx(os,{size:14})}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>D(z.id,"APPROVED",z.workflow.name),style:{minWidth:"80px"},children:[e.jsx(Ut,{size:14}),"Approve"]}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>D(z.id,"REJECTED",z.workflow.name),style:{minWidth:"70px"},children:[e.jsx(ci,{size:14}),"Reject"]})]})})]},z.id),n===z.id&&e.jsx("tr",{children:e.jsxs("td",{colSpan:8,style:{background:"var(--bg-secondary)",padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"0.875rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Workflow Steps"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:z.workflow.steps.map(G=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:G.stepOrder===z.currentStep?"rgba(59, 130, 246, 0.1)":"var(--bg)",borderRadius:"var(--radius)",border:G.stepOrder===z.currentStep?"1px solid var(--primary)":"1px solid var(--border)"},children:[G.stepOrder<z.currentStep?e.jsx(Ut,{size:18,color:"var(--success)"}):G.stepOrder===z.currentStep?e.jsx(Qt,{size:18,color:"var(--primary)"}):e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid var(--border)"}}),e.jsxs("span",{style:{fontWeight:G.stepOrder===z.currentStep?500:400,flex:1},children:[G.stepOrder,". ",G.stepName]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:G.approverRole.name})]},G.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"0.875rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Approval History"}),z.actions.length===0?e.jsx("div",{style:{color:"var(--text-muted)",fontStyle:"italic",padding:"1rem",background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:"No actions taken yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:z.actions.map(G=>e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[G.action==="APPROVED"?e.jsx(Ut,{size:16,color:"var(--success)"}):e.jsx(ci,{size:16,color:"var(--danger)"}),e.jsx("span",{style:{fontWeight:500},children:G.step.stepName}),e.jsx("span",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--text-muted)"},children:Ze(new Date(G.createdAt),"MMM d, HH:mm")})]}),e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["by ",G.actionBy.firstName," ",G.actionBy.lastName]}),G.comments&&e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginTop:"0.5rem",fontStyle:"italic",paddingLeft:"1.5rem"},children:['"',G.comments,'"']})]},G.id))})]})]}),z.notes&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsx("strong",{style:{fontSize:"0.8125rem"},children:"Notes:"}),e.jsx("span",{style:{marginLeft:"0.5rem",color:"var(--text-secondary)"},children:z.notes})]})]})},`${z.id}-details`)]}))})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"All Approval Requests"})]}),e.jsx("div",{style:{display:"inline-flex",background:"var(--bg)",borderRadius:"8px",padding:"4px",border:"1px solid var(--border)"},children:[{key:"PENDING",label:"Pending",icon:Qt,color:"var(--warning)"},{key:"APPROVED",label:"Approved",icon:Ut,color:"var(--success)"},{key:"REJECTED",label:"Rejected",icon:ci,color:"var(--danger)"},{key:"all",label:"All",icon:null,color:"var(--primary)"}].map((z,G,ne)=>{const Z=a===z.key,ie=z.icon;return e.jsxs("button",{onClick:()=>s(z.key),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",fontSize:"0.8125rem",fontWeight:Z?600:500,color:Z?"#fff":"var(--text-secondary)",background:Z?z.color:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.15s ease",whiteSpace:"nowrap"},onMouseEnter:me=>{Z||(me.currentTarget.style.background="var(--bg-hover)")},onMouseLeave:me=>{Z||(me.currentTarget.style.background="transparent")},children:[ie&&e.jsx(ie,{size:14}),z.label]},z.key)})})]}),e.jsx("div",{style:{padding:0},children:W.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Workflow"}),e.jsx("th",{children:"Entity Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Priority"}),e.jsx("th",{children:"Current Step"}),e.jsx("th",{children:"Requested By"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:W.map(z=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500},children:z.workflow.name}),e.jsx("td",{children:z.entityType}),e.jsx("td",{children:e.jsx(Pn,{status:z.status,size:"sm"})}),e.jsx("td",{children:e.jsx(Pn,{status:z.priority,size:"sm"})}),e.jsx("td",{children:z.workflow.steps.find(G=>G.stepOrder===z.currentStep)?.stepName||"-"}),e.jsxs("td",{children:[z.requestedBy.firstName," ",z.requestedBy.lastName]}),e.jsx("td",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:Ze(new Date(z.createdAt),"MMM d, yyyy HH:mm")})]},z.id))})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No approval requests",message:`No ${a==="all"?"":a.toLowerCase()} approval requests found`,icon:"package",variant:"compact"})})})]}),u&&e.jsx("div",{className:"modal-overlay",onClick:()=>d(null),children:e.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{margin:0,fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:u.action==="APPROVED"?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{color:"var(--success)",size:20})," Approve Request"]}):e.jsxs(e.Fragment,{children:[e.jsx(ci,{color:"var(--danger)",size:20})," Reject Request"]})}),e.jsx("button",{onClick:()=>d(null),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{style:{padding:"1rem",background:u.action==="APPROVED"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius)",marginBottom:"1rem",border:u.action==="APPROVED"?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(239, 68, 68, 0.3)"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.875rem"},children:["You are about to ",e.jsx("strong",{children:u.action==="APPROVED"?"approve":"reject"})," the request for ",e.jsx("strong",{children:u.workflowName}),"."]})}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Comments ",u.action==="REJECTED"?"*":"(optional)"]}),e.jsx("textarea",{className:"form-input",value:f,onChange:z=>p(z.target.value),placeholder:u.action==="REJECTED"?"Please provide a reason for rejection...":"Add any comments or notes...",rows:3,required:u.action==="REJECTED"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Electronic Signature *"}),e.jsx("input",{type:"text",className:"form-input",value:x,onChange:z=>v(z.target.value),placeholder:"Type your full name to sign"}),e.jsx("small",{style:{color:"var(--text-muted)",display:"block",marginTop:"0.5rem",fontSize:"0.75rem"},children:"By signing, you confirm this action is in compliance with GMP requirements."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>d(null),children:"Cancel"}),e.jsxs("button",{className:`btn ${u.action==="APPROVED"?"btn-primary":"btn-danger"}`,onClick:M,disabled:O.isPending||!x.trim()||u.action==="REJECTED"&&!f.trim(),style:{minWidth:"140px"},children:[e.jsx(Gi,{size:16}),O.isPending?"Processing...":`Confirm ${u.action==="APPROVED"?"Approval":"Rejection"}`]})]})]})})]})}function twe(){const[t,r]=k.useState(""),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(null),[u,d]=k.useState(""),[f,p]=k.useState({}),[x,v]=k.useState({batchId:"",orderId:"",patientReference:"",requestedActivity:"",volume:"",containerType:"",notes:""}),w=pr(),C=gn(),{data:N}=Ve({queryKey:["dispensing-stats"],queryFn:async()=>{const{data:Q}=await xe.get("/dispensing/stats");return Q}}),{data:T,isLoading:O}=Ve({queryKey:["batches","RELEASED"],queryFn:async()=>{const{data:Q}=await xe.get("/batches",{params:{status:"RELEASED"}});return Q}}),{data:D,isLoading:M}=Ve({queryKey:["dispensing","batch",t],queryFn:async()=>{const{data:Q}=await xe.get(`/dispensing/batch/${t}`);return Q},enabled:!!t}),{data:Y}=Ve({queryKey:["dispensing"],queryFn:async()=>{const{data:Q}=await xe.get("/dispensing");return Q}}),q=ot({mutationFn:async Q=>xe.post("/dispensing",Q),onSuccess:()=>{w.invalidateQueries({queryKey:["dispensing"]}),w.invalidateQueries({queryKey:["dispensing-stats"]}),i(!1),v({batchId:"",orderId:"",patientReference:"",requestedActivity:"",volume:"",containerType:"",notes:""}),C.success("Dose Created","New dose unit has been created successfully")},onError:Q=>{C.error("Creation Failed",Q.response?.data?.error||"Failed to create dose unit")}}),W=ot({mutationFn:async({id:Q,dispensedActivity:de})=>xe.put(`/dispensing/${Q}/dispense`,{dispensedActivity:de}),onSuccess:()=>{w.invalidateQueries({queryKey:["dispensing"]}),w.invalidateQueries({queryKey:["dispensing-stats"]}),C.success("Dose Dispensed","Dose has been marked as dispensed")},onError:Q=>{C.error("Dispense Failed",Q.response?.data?.error||"Failed to dispense dose")}}),J=ot({mutationFn:async Q=>xe.put(`/dispensing/${Q}/label`),onSuccess:()=>{w.invalidateQueries({queryKey:["dispensing"]}),C.success("Label Printed","Dose has been labeled")},onError:Q=>{C.error("Label Failed",Q.response?.data?.error||"Failed to label dose")}}),z=ot({mutationFn:async({id:Q,reason:de})=>xe.put(`/dispensing/${Q}/waste`,{reason:de}),onSuccess:()=>{w.invalidateQueries({queryKey:["dispensing"]}),w.invalidateQueries({queryKey:["dispensing-stats"]}),s(!1),l(null),d(""),C.warning("Dose Wasted","Dose has been marked as wasted")},onError:Q=>{C.error("Waste Failed",Q.response?.data?.error||"Failed to mark as wasted")}}),G=()=>{!x.batchId||!x.requestedActivity||q.mutate({batchId:x.batchId,orderId:x.orderId||void 0,patientReference:x.patientReference||void 0,requestedActivity:parseFloat(x.requestedActivity),volume:x.volume?parseFloat(x.volume):void 0,containerType:x.containerType||void 0,notes:x.notes||void 0})},ne=()=>{!o||!u.trim()||z.mutate({id:o.id,reason:u})},Z=Q=>{l(Q),d(""),s(!0)},ie=[{key:"search",label:"Search",type:"search",placeholder:"Search doses..."}],me=T?.filter(Q=>{if(f.search){const de=f.search.toLowerCase();if(!Q.batchNumber.toLowerCase().includes(de)&&!Q.product?.name.toLowerCase().includes(de))return!1}return!0}),ce=Y?.filter(Q=>{if(f.search){const de=f.search.toLowerCase();if(!Q.doseNumber.toLowerCase().includes(de)&&!Q.batch?.batchNumber?.toLowerCase().includes(de)&&!Q.batch?.product?.name?.toLowerCase().includes(de))return!1}return!0});return O?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Dose Dispensing"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Create and manage individual dose units from released batches"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[e.jsx(cn,{size:18})," Create Dose Unit"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Released Batches",value:N?.releasedBatches||0,icon:e.jsx(dc,{size:20}),color:"primary"}),e.jsx(st,{title:"Total Doses",value:N?.totalDoses||0,icon:e.jsx(Bf,{size:20}),color:"default"}),e.jsx(st,{title:"Pending",value:N?.pending||0,icon:e.jsx(Qt,{size:20}),color:"warning"}),e.jsx(st,{title:"Dispensed Today",value:N?.dispensedToday||0,icon:e.jsx(Ut,{size:20}),color:"success"}),e.jsx(st,{title:"Shipped",value:N?.shipped||0,icon:e.jsx(dn,{size:20}),color:"info"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:ie,values:f,onChange:(Q,de)=>p(le=>({...le,[Q]:de})),onReset:()=>p({})})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"320px 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(dc,{size:18,style:{color:"var(--primary)"}}),e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Released Batches (",me?.length||0,")"]})]}),e.jsx("div",{style:{padding:"0.75rem",maxHeight:"50vh",overflowY:"auto"},children:me?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:me.map(Q=>{const de=Q.doseUnits?.length||0;return e.jsxs("button",{className:`btn ${t===Q.id?"btn-primary":"btn-outline"}`,style:{textAlign:"left",justifyContent:"flex-start",padding:"0.75rem 1rem",height:"auto"},onClick:()=>r(Q.id),children:[e.jsx(Rr,{size:16}),e.jsxs("div",{style:{flex:1,marginLeft:"0.5rem"},children:[e.jsx("div",{style:{fontWeight:500},children:Q.batchNumber}),e.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:Q.product?.name}),e.jsxs("div",{style:{fontSize:"0.7rem",opacity:.5,marginTop:"0.25rem"},children:[de," doses | ",Q.targetActivity," ",Q.activityUnit]})]})]},Q.id)})}):e.jsx(fn,{title:"No released batches",message:"Batches must be released by QP before dispensing",icon:"package",variant:"compact"})})]}),e.jsx("div",{className:"card",children:t&&D?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:0},children:D.batch?.batchNumber}),e.jsx(Pn,{status:D.batch?.status,size:"sm"})]}),e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",margin:"0.25rem 0 0 0"},children:D.batch?.product?.name})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("div",{style:{textAlign:"right",backgroundColor:"var(--bg-secondary)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx(Mc,{size:14,style:{color:"var(--primary)"}}),e.jsxs("span",{style:{fontSize:"1rem",fontWeight:600,color:"var(--primary)"},children:[D.remainingActivity?.toFixed(2)," ",D.batch?.activityUnit]})]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Available"})]}),e.jsx(nr,{to:`/batches/${t}/journey`,className:"btn btn-secondary btn-sm",children:e.jsx(os,{size:14})})]})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("h4",{style:{fontWeight:600,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)",margin:0},children:["Dose Units (",D.doseUnits?.length||0,")"]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{v({...x,batchId:t}),i(!0)},children:[e.jsx(cn,{size:14})," Add Dose"]})]}),D.doseUnits?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Dose #"}),e.jsx("th",{children:"Patient Ref"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"140px"},children:"Actions"})]})}),e.jsx("tbody",{children:D.doseUnits.map(Q=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:Q.doseNumber}),e.jsx("td",{children:Q.patientReference||e.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),e.jsxs("td",{style:{fontWeight:500},children:[Q.dispensedActivity||Q.requestedActivity," ",Q.activityUnit]}),e.jsx("td",{children:e.jsx(Pn,{status:Q.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[Q.status==="CREATED"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>J.mutate(Q.id),disabled:J.isPending,title:"Print Label",children:e.jsx(r2,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>W.mutate({id:Q.id}),disabled:W.isPending,title:"Dispense",children:e.jsx(Bf,{size:14})})]}),Q.status==="LABELED"&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>W.mutate({id:Q.id}),disabled:W.isPending,title:"Dispense",children:e.jsx(Bf,{size:14})}),["CREATED","LABELED"].includes(Q.status)&&e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>Z(Q),title:"Mark as Wasted",children:e.jsx(ra,{size:14})})]})})]},Q.id))})]}):e.jsx(fn,{title:"No dose units",message:"Create dose units for this batch",icon:"package",variant:"compact",ctaLabel:"Create Dose",onCta:()=>{v({...x,batchId:t}),i(!0)}}),D.pendingOrders?.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:["Pending Orders (",D.pendingOrders.length,")"]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order #"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Requested Activity"}),e.jsx("th",{style:{width:"120px"},children:"Action"})]})}),e.jsx("tbody",{children:D.pendingOrders.map(Q=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:Q.orderNumber}),e.jsx("td",{children:Q.customer?.name}),e.jsxs("td",{style:{fontWeight:500},children:[Q.requestedActivity," ",Q.activityUnit]}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{v({...x,batchId:t,orderId:Q.id,requestedActivity:Q.requestedActivity.toString()}),i(!0)},children:[e.jsx(cn,{size:14})," Create Dose"]})})]},Q.id))})]})]})]})]}):M?e.jsx("div",{style:{padding:"4rem",textAlign:"center"},children:e.jsx("div",{className:"spinner"})}):e.jsx("div",{style:{padding:"1.5rem"},children:e.jsx(fn,{title:"No Batch Selected",message:"Select a released batch from the left to view and manage dose units",icon:"package"})})})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Bf,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Recent Dose Units"})]}),e.jsx("div",{style:{padding:"0"},children:ce?.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Dose #"}),e.jsx("th",{children:"Batch"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"})]})}),e.jsx("tbody",{children:ce.slice(0,15).map(Q=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:Q.doseNumber}),e.jsx("td",{children:Q.batch?.batchNumber}),e.jsx("td",{children:Q.batch?.product?.name}),e.jsx("td",{children:Q.order?.customer?.name||e.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),e.jsxs("td",{style:{fontWeight:500},children:[Q.dispensedActivity||Q.requestedActivity," ",Q.activityUnit]}),e.jsx("td",{children:e.jsx(Pn,{status:Q.status,size:"sm"})}),e.jsx("td",{style:{color:"var(--text-muted)",fontSize:"0.8125rem"},children:Ze(new Date(Q.createdAt),"MMM d, HH:mm")})]},Q.id))})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No dose units",message:"Create dose units from released batches",icon:"package",variant:"compact"})})})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Create Dose Unit"}),e.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Batch *"}),e.jsxs("select",{className:"form-select",value:x.batchId,onChange:Q=>v({...x,batchId:Q.target.value}),children:[e.jsx("option",{value:"",children:"Select a batch"}),T?.map(Q=>e.jsxs("option",{value:Q.id,children:[Q.batchNumber," - ",Q.product?.name]},Q.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Requested Activity (mCi) *"}),e.jsx("input",{type:"number",className:"form-input",value:x.requestedActivity,onChange:Q=>v({...x,requestedActivity:Q.target.value}),step:"0.01",placeholder:"Enter activity amount"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Patient Reference"}),e.jsx("input",{type:"text",className:"form-input",value:x.patientReference,onChange:Q=>v({...x,patientReference:Q.target.value}),placeholder:"e.g., Hospital order ref or pseudonym"})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Volume (mL)"}),e.jsx("input",{type:"number",className:"form-input",value:x.volume,onChange:Q=>v({...x,volume:Q.target.value}),step:"0.1",placeholder:"Optional"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Container Type"}),e.jsx("input",{type:"text",className:"form-input",value:x.containerType,onChange:Q=>v({...x,containerType:Q.target.value}),placeholder:"e.g., Vial, Syringe"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-input",value:x.notes,onChange:Q=>v({...x,notes:Q.target.value}),rows:2,placeholder:"Optional notes"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsxs("button",{className:"btn btn-primary",onClick:G,disabled:q.isPending||!x.batchId||!x.requestedActivity,children:[e.jsx(Bf,{size:16}),q.isPending?"Creating...":"Create Dose Unit"]})]})]})}),a&&o&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Mark Dose as Wasted"}),e.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx($r,{size:18,color:"var(--danger)"}),e.jsx("strong",{style:{color:"var(--danger)"},children:"Dose Waste"})]}),e.jsx("p",{style:{margin:0,color:"#991b1b"},children:"This action will mark the dose as wasted. Please provide a reason for the waste."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Dose Number"}),e.jsx("input",{className:"form-input",value:o.doseNumber,disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Activity"}),e.jsx("input",{className:"form-input",value:`${o.requestedActivity} ${o.activityUnit}`,disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Waste Reason *"}),e.jsx("textarea",{className:"form-input",value:u,onChange:Q=>d(Q.target.value),rows:3,required:!0,placeholder:"Enter reason for waste (e.g., spillage, contamination, decay)"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsxs("button",{className:"btn btn-danger",onClick:ne,disabled:z.isPending||!u.trim(),children:[e.jsx(ra,{size:16}),z.isPending?"Processing...":"Confirm Waste"]})]})]})})]})}function rwe(){const[t,r]=k.useState(new Date),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(null),u=pr(),d=cf(t,{weekStartsOn:1}),f=yte(t,{weekStartsOn:1}),{data:p,isLoading:x}=Ve({queryKey:["availability","calendar",d.toISOString(),f.toISOString()],queryFn:async()=>{const{data:Q}=await xe.get("/availability/calendar",{params:{startDate:d.toISOString(),endDate:f.toISOString()}});return Q}}),{data:v}=Ve({queryKey:["reservations",d.toISOString(),f.toISOString()],queryFn:async()=>{const{data:Q}=await xe.get("/reservations",{params:{startDate:d.toISOString(),endDate:f.toISOString()}});return Q}}),w=ot({mutationFn:async Q=>xe.post("/availability/windows",Q),onSuccess:()=>{u.invalidateQueries({queryKey:["availability"]}),i(!1)}}),C=ot({mutationFn:async Q=>xe.post("/availability/windows/generate",Q),onSuccess:()=>{u.invalidateQueries({queryKey:["availability"]}),s(!1)}}),[N,T]=k.useState({name:"",date:Ze(new Date,"yyyy-MM-dd"),startTime:"08:00",endTime:"17:00",capacityMinutes:480}),[O,D]=k.useState({startDate:Ze(new Date,"yyyy-MM-dd"),endDate:Ze(ul(new Date,30),"yyyy-MM-dd"),startTime:"08:00",endTime:"17:00",capacityMinutes:480,excludeWeekends:!0}),M=Array.from({length:7},(Q,de)=>ul(d,de)),Y=Q=>{if(!p)return[];const de=Ze(Q,"yyyy-MM-dd");return p.filter(le=>Ze(new Date(le.date),"yyyy-MM-dd")===de)},q=Q=>Q>=90?"var(--danger)":Q>=70?"var(--warning)":Q>=40?"var(--primary)":"var(--success)",W=()=>{const Q=N.date;w.mutate({name:N.name||`Delivery Window ${Q}`,date:Q,startTime:`${Q}T${N.startTime}:00`,endTime:`${Q}T${N.endTime}:00`,capacityMinutes:N.capacityMinutes})},J=()=>{C.mutate({startDate:O.startDate,endDate:O.endDate,startTime:O.startTime,endTime:O.endTime,capacityMinutes:O.capacityMinutes,excludeWeekends:O.excludeWeekends})},z=Q=>{l(Q)},G=Q=>v?v.filter(de=>de.windowId===Q&&["TENTATIVE","CONFIRMED"].includes(de.status)):[],ne=v?.filter(Q=>["TENTATIVE","CONFIRMED"].includes(Q.status))||[],Z=o?ne.filter(Q=>Q.windowId===o.id):ne,ie=p?.length||0,me=p?.reduce((Q,de)=>Q+de.capacityMinutes,0)||0,ce=p?.reduce((Q,de)=>Q+de.usedMinutes,0)||0;return x?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Availability & Capacity"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage delivery windows and track capacity utilization"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>s(!0),children:[e.jsx(u8,{size:16})," Generate Windows"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[e.jsx(cn,{size:18})," Add Window"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card stat-card",style:{cursor:"pointer"},onClick:()=>l(null),children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:e.jsx(u8,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"stat-value",style:{color:"var(--primary)"},children:ie}),e.jsx("div",{className:"stat-label",children:"Delivery Windows"})]})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(100, 116, 139, 0.1)",color:"var(--text-muted)"},children:e.jsx(Qt,{size:20})}),e.jsxs("div",{children:[e.jsxs("div",{className:"stat-value",children:[Math.round(me/60),"h"]}),e.jsx("div",{className:"stat-label",children:"Total Capacity"})]})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:me>0?`${q(ce/me*100)}15`:"rgba(34, 197, 94, 0.1)",color:me>0?q(ce/me*100):"var(--success)"},children:e.jsx(cc,{size:20})}),e.jsxs("div",{children:[e.jsxs("div",{className:"stat-value",style:{color:me>0?q(ce/me*100):"var(--success)"},children:[me>0?Math.round(ce/me*100):0,"%"]}),e.jsx("div",{className:"stat-label",children:"Utilization"})]})]}),e.jsxs("div",{className:"card stat-card",style:{cursor:"pointer",border:o===null&&ne.length>0?"2px solid var(--warning)":void 0},onClick:()=>l(null),children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"},children:e.jsx(Rr,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"stat-value",style:{color:"var(--warning)"},children:ne.length}),e.jsx("div",{className:"stat-label",children:"Active Reservations"})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>r(ul(t,-7)),children:[e.jsx(Zp,{size:18})," Previous Week"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx($n,{size:20,style:{color:"var(--primary)"}}),e.jsxs("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:0},children:[Ze(d,"MMM d")," - ",Ze(f,"MMM d, yyyy")]})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>r(ul(t,7)),children:["Next Week ",e.jsx(jo,{size:18})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.75rem"},children:M.map(Q=>{const de=Y(Q),le=Ze(Q,"yyyy-MM-dd")===Ze(new Date,"yyyy-MM-dd"),ye=Q.getDay()===0||Q.getDay()===6;return e.jsxs("div",{style:{border:le?"2px solid var(--primary)":"1px solid var(--border)",borderRadius:"var(--radius)",padding:"1rem",minHeight:"180px",backgroundColor:ye?"var(--bg-secondary)":"white",transition:"box-shadow 0.2s"},children:[e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",color:le?"var(--primary)":"var(--text-muted)",letterSpacing:"0.05em"},children:Ze(Q,"EEE")}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600,color:le?"var(--primary)":"var(--text)"},children:Ze(Q,"d")})]}),de.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:de.map(Se=>{const $=G(Se.id),X=o?.id===Se.id;return e.jsxs("div",{onClick:()=>z(Se),style:{backgroundColor:X?"rgba(59, 130, 246, 0.1)":"var(--bg-secondary)",borderRadius:"var(--radius)",padding:"0.625rem",fontSize:"0.75rem",border:X?"2px solid var(--primary)":"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.5rem"},children:[e.jsx(Qt,{size:12,style:{color:"var(--text-muted)"}}),e.jsxs("span",{style:{fontWeight:500},children:[Ze(new Date(Se.startTime),"HH:mm"),"-",Ze(new Date(Se.endTime),"HH:mm")]})]}),e.jsx("div",{style:{height:"6px",backgroundColor:"var(--border)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Se.utilizationPercent}%`,height:"100%",backgroundColor:q(Se.utilizationPercent),transition:"width 0.3s"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.375rem"},children:[e.jsxs("span",{style:{color:"var(--text-muted)"},children:[Se.availableMinutes,"m free"]}),e.jsxs("span",{style:{color:q(Se.utilizationPercent),fontWeight:500},children:[Se.utilizationPercent,"%"]})]}),$.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--primary)",marginTop:"0.375rem",fontSize:"0.6875rem"},children:[e.jsx(cc,{size:10}),$.length," reservation",$.length>1?"s":""]})]},Se.id)})}):e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem",textAlign:"center",paddingTop:"2rem",opacity:.7},children:"No windows"})]},Q.toISOString())})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(cc,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:o?"Window Reservations":"Active Reservations"}),o&&e.jsxs("span",{className:"badge badge-primary",style:{marginLeft:"0.5rem"},children:[Ze(new Date(o.date),"MMM d")," ",Ze(new Date(o.startTime),"HH:mm"),"-",Ze(new Date(o.endTime),"HH:mm")]})]}),o&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>l(null),children:[e.jsx(kr,{size:14})," Clear Filter"]})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Reservation #"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Window"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Est. Minutes"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[Z.map(Q=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>Q.windowId&&l(p?.find(de=>de.id===Q.windowId)),children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem",fontWeight:500},children:Q.reservationNumber}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ts,{size:14,style:{color:"var(--text-muted)"}}),Q.customer?.name]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rr,{size:14,style:{color:"var(--text-muted)"}}),Q.product?.name]})}),e.jsx("td",{children:Q.window?e.jsxs("span",{style:{fontSize:"0.8125rem",color:"var(--primary)"},children:[Ze(new Date(Q.window.startTime),"HH:mm"),"-",Ze(new Date(Q.window.endTime),"HH:mm")]}):e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"No window"})}),e.jsx("td",{children:Ze(new Date(Q.requestedDate),"MMM d, yyyy")}),e.jsxs("td",{style:{fontWeight:500},children:[Q.requestedActivity," ",Q.activityUnit]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Qt,{size:12,style:{color:"var(--text-muted)"}}),Q.estimatedMinutes," min"]})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${Q.status==="CONFIRMED"?"success":"warning"}`,children:Q.status})})]},Q.id)),Z.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:o?"No reservations for this window":"No active reservations for this period"})})]})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Create Delivery Window"}),e.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Add a new delivery window for a specific date"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{type:"text",className:"form-input",value:N.name,onChange:Q=>T({...N,name:Q.target.value}),placeholder:"e.g., Morning Delivery Window"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx("input",{type:"date",className:"form-input",value:N.date,onChange:Q=>T({...N,date:Q.target.value})})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Time"}),e.jsx("input",{type:"time",className:"form-input",value:N.startTime,onChange:Q=>T({...N,startTime:Q.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Time"}),e.jsx("input",{type:"time",className:"form-input",value:N.endTime,onChange:Q=>T({...N,endTime:Q.target.value})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Capacity (minutes)"}),e.jsx("input",{type:"number",className:"form-input",value:N.capacityMinutes,onChange:Q=>T({...N,capacityMinutes:parseInt(Q.target.value)||0}),min:"0",step:"30"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:W,disabled:w.isPending,children:w.isPending?"Creating...":"Create Window"})]})]})}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Generate Delivery Windows"}),e.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Automatically generate delivery windows for a date range"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Date"}),e.jsx("input",{type:"date",className:"form-input",value:O.startDate,onChange:Q=>D({...O,startDate:Q.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Date"}),e.jsx("input",{type:"date",className:"form-input",value:O.endDate,onChange:Q=>D({...O,endDate:Q.target.value})})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Time"}),e.jsx("input",{type:"time",className:"form-input",value:O.startTime,onChange:Q=>D({...O,startTime:Q.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Time"}),e.jsx("input",{type:"time",className:"form-input",value:O.endTime,onChange:Q=>D({...O,endTime:Q.target.value})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Capacity (minutes per day)"}),e.jsx("input",{type:"number",className:"form-input",value:O.capacityMinutes,onChange:Q=>D({...O,capacityMinutes:parseInt(Q.target.value)||0}),min:"0",step:"30"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:O.excludeWeekends,onChange:Q=>D({...O,excludeWeekends:Q.target.checked}),style:{width:"16px",height:"16px"}}),e.jsx("span",{className:"form-label",style:{margin:0},children:"Exclude weekends"})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:J,disabled:C.isPending,children:C.isPending?"Generating...":"Generate Windows"})]})]})})]})}const nwe={TENTATIVE:"warning",CONFIRMED:"success",CANCELLED:"default",CONVERTED:"primary",EXPIRED:"default"};function iwe(){const t=gn(),[r,n]=k.useState(!1),[i,a]=k.useState(""),[s,o]=k.useState({customerId:"",productId:"",windowId:"",requestedDate:new Date().toISOString().split("T")[0],requestedActivity:"",numberOfDoses:"1",notes:""}),l=pr(),{data:u,isLoading:d}=Ve({queryKey:["reservations",i],queryFn:async()=>{const z=new URLSearchParams;i&&z.append("status",i);const{data:G}=await xe.get(`/reservations?${z.toString()}`);return G}}),{data:f}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:z}=await xe.get("/customers");return z}}),{data:p}=Ve({queryKey:["products"],queryFn:async()=>{const{data:z}=await xe.get("/products");return z}}),{data:x}=Ve({queryKey:["availability-windows"],queryFn:async()=>{const z=new Date().toISOString().split("T")[0],{data:G}=await xe.get(`/availability/windows?startDate=${z}&isActive=true`);return G}}),v=ot({mutationFn:async z=>(await xe.post("/reservations",z)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["reservations"]}),l.invalidateQueries({queryKey:["availability-windows"]}),n(!1),T()}}),w=ot({mutationFn:async z=>(await xe.put(`/reservations/${z}/confirm`)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["reservations"]})}}),C=ot({mutationFn:async z=>(await xe.put(`/reservations/${z}/cancel`,{reason:"Cancelled by user"})).data,onSuccess:()=>{l.invalidateQueries({queryKey:["reservations"]}),l.invalidateQueries({queryKey:["availability-windows"]})}}),N=ot({mutationFn:async z=>(await xe.post(`/reservations/${z}/convert`)).data,onSuccess:z=>{l.invalidateQueries({queryKey:["reservations"]}),l.invalidateQueries({queryKey:["orders"]}),t.success("Order Created",`Order ${z.order?.orderNumber||""} created successfully from reservation.`)},onError:z=>{const G=an(z);t.error("Conversion Failed",G?.userMessage||"Failed to convert reservation to order.")}}),T=()=>{o({customerId:"",productId:"",windowId:"",requestedDate:new Date().toISOString().split("T")[0],requestedActivity:"",numberOfDoses:"1",notes:""})},O=z=>{o({customerId:z.customerId||"",productId:z.productId||"",windowId:"",requestedDate:new Date().toISOString().split("T")[0],requestedActivity:z.requestedActivity?.toString()||"",numberOfDoses:z.numberOfDoses?.toString()||"1",notes:z.notes||""}),n(!0)},D=async()=>{!s.customerId||!s.productId||!s.requestedActivity||await v.mutateAsync({...s,requestedActivity:parseFloat(s.requestedActivity),numberOfDoses:parseInt(s.numberOfDoses)||1,windowId:s.windowId||void 0})},Y=!s.windowId||!x?null:x.find(z=>z.id===s.windowId),q=Y?Y.capacityMinutes-Y.usedMinutes:0,W=Y?Math.round(Y.usedMinutes/Y.capacityMinutes*100):0,J={total:u?.length||0,tentative:u?.filter(z=>z.status==="TENTATIVE").length||0,confirmed:u?.filter(z=>z.status==="CONFIRMED").length||0,converted:u?.filter(z=>z.status==="CONVERTED").length||0};return d?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Reservations"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage capacity reservations to prevent overbooking"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>n(!0),children:[e.jsx(cn,{size:16})," New Reservation"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Reservations",value:J.total,icon:e.jsx($n,{size:20}),color:"primary",onClick:()=>a(""),selected:!i}),e.jsx(st,{title:"Tentative",value:J.tentative,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>a("TENTATIVE"),selected:i==="TENTATIVE"}),e.jsx(st,{title:"Confirmed",value:J.confirmed,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>a("CONFIRMED"),selected:i==="CONFIRMED"}),e.jsx(st,{title:"Converted to Orders",value:J.converted,icon:e.jsx(qo,{size:20}),color:"info",onClick:()=>a("CONVERTED"),selected:i==="CONVERTED"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1.5rem"},children:e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsx("label",{style:{fontWeight:500},children:"Status:"}),e.jsxs("select",{className:"form-select",style:{width:"auto"},value:i,onChange:z=>a(z.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"TENTATIVE",children:"Tentative"}),e.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"}),e.jsx("option",{value:"CONVERTED",children:"Converted"}),e.jsx("option",{value:"EXPIRED",children:"Expired"})]})]})})}),e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Reservation #"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Doses"}),e.jsx("th",{children:"Est. Time"}),e.jsx("th",{children:"Window"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsxs("tbody",{children:[u?.map(z=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:z.reservationNumber}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ts,{size:14,style:{color:"var(--text-muted)"}}),z.customer?.name]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rr,{size:14,style:{color:"var(--text-muted)"}}),z.product?.name]})}),e.jsx("td",{children:new Date(z.requestedDate).toLocaleDateString()}),e.jsxs("td",{children:[z.requestedActivity," mCi"]}),e.jsx("td",{children:z.numberOfDoses}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Qt,{size:14,style:{color:"var(--text-muted)"}}),z.estimatedMinutes," min"]})}),e.jsx("td",{children:z.window?e.jsx("span",{style:{fontSize:"0.8125rem"},children:z.window.name||new Date(z.window.date).toLocaleDateString()}):e.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${nwe[z.status]||"default"}`,children:z.status})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>O(z),title:"Copy as New",children:e.jsx(PA,{size:14})}),z.status==="TENTATIVE"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>w.mutate(z.id),disabled:w.isPending,title:"Confirm",children:e.jsx(Ai,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>C.mutate(z.id),disabled:C.isPending,title:"Cancel",children:e.jsx(kr,{size:14})})]}),z.status==="CONFIRMED"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>N.mutate(z.id),disabled:N.isPending,title:"Convert to Order",children:e.jsx(qo,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>C.mutate(z.id),disabled:C.isPending,title:"Cancel",children:e.jsx(kr,{size:14})})]})]})})]},z.id)),u?.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:10,style:{textAlign:"center",color:"var(--text-muted)",padding:"3rem"},children:"No reservations found"})})]})]})}),r&&e.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"560px"},onClick:z=>z.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"New Reservation"}),e.jsx("button",{onClick:()=>n(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Reserve capacity in a delivery window to prevent overbooking"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{className:"form-select",value:s.customerId,onChange:z=>o({...s,customerId:z.target.value}),children:[e.jsx("option",{value:"",children:"Select customer"}),f?.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Product *"}),e.jsxs("select",{className:"form-select",value:s.productId,onChange:z=>o({...s,productId:z.target.value}),children:[e.jsx("option",{value:"",children:"Select product"}),p?.map(z=>e.jsxs("option",{value:z.id,children:[z.name," (",z.code,")"]},z.id))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Window"}),e.jsxs("select",{className:"form-select",value:s.windowId,onChange:z=>o({...s,windowId:z.target.value}),children:[e.jsx("option",{value:"",children:"No specific window"}),x?.map(z=>{const G=z.capacityMinutes-z.usedMinutes,ne=Math.round(z.usedMinutes/z.capacityMinutes*100);return e.jsxs("option",{value:z.id,children:[new Date(z.date).toLocaleDateString()," ",z.startTime,"-",z.endTime," (",G," min available, ",ne,"% used)"]},z.id)})]})]}),Y&&e.jsxs("div",{style:{padding:"0.75rem 1rem",background:W>80?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[W>80?e.jsx(sn,{size:18,style:{color:"var(--danger)"}}):e.jsx($n,{size:18,style:{color:"var(--success)"}}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:[q," minutes available"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[W,"% capacity used"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Requested Date *"}),e.jsx("input",{type:"date",className:"form-input",value:s.requestedDate,onChange:z=>o({...s,requestedDate:z.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Activity (mCi) *"}),e.jsx("input",{type:"number",className:"form-input",value:s.requestedActivity,onChange:z=>o({...s,requestedActivity:z.target.value}),step:"0.1",placeholder:"e.g., 15"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"No. of Doses"}),e.jsx("input",{type:"number",className:"form-input",value:s.numberOfDoses,onChange:z=>o({...s,numberOfDoses:z.target.value}),min:"1"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-input",value:s.notes,onChange:z=>o({...s,notes:z.target.value}),rows:2,placeholder:"Optional notes about this reservation"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:D,disabled:v.isPending||!s.customerId||!s.productId||!s.requestedActivity,children:v.isPending?"Creating...":"Create Reservation"})]})]})})]})}const Jc="SAR",awe="en-SA";function Mf(t,r=Jc,n=awe){if(t==null)return`${Jc} 0.00`;const i=new Intl.NumberFormat(n,{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return`${r} ${i}`}function li(t){return Mf(t,Jc)}function swe(){const[t,r]=k.useState(null),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(""),[u,d]=k.useState("info"),f=pr(),{data:p,isLoading:x}=Ve({queryKey:["contracts",o],queryFn:async()=>{const le={includeExpired:"true"};o&&(le.status=o);const{data:ye}=await xe.get("/contracts",{params:le});return ye}}),{data:v}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:le}=await xe.get("/customers");return le}}),{data:w}=Ve({queryKey:["products"],queryFn:async()=>{const{data:le}=await xe.get("/products");return le}}),[C,N]=k.useState({customerId:"",name:"",startDate:Ze(new Date,"yyyy-MM-dd"),endDate:Ze(new Date(Date.now()+365*24*60*60*1e3),"yyyy-MM-dd"),paymentTermsDays:30,creditLimit:"",discountPercent:0,notes:""}),[T,O]=k.useState({productId:"",unitPrice:"",priceUnit:"per mCi",minimumQuantity:"",discountPercent:0}),D=ot({mutationFn:async le=>xe.post("/contracts",le),onSuccess:()=>{f.invalidateQueries({queryKey:["contracts"]}),i(!1),J()}}),M=ot({mutationFn:async({contractId:le,data:ye})=>xe.post(`/contracts/${le}/price-items`,ye),onSuccess:()=>{if(f.invalidateQueries({queryKey:["contracts"]}),s(!1),z(),t){const le=p?.find(ye=>ye.id===t.id);le&&r(le)}}}),Y=ot({mutationFn:async({contractId:le,itemId:ye})=>xe.delete(`/contracts/${le}/price-items/${ye}`),onSuccess:()=>{f.invalidateQueries({queryKey:["contracts"]})}}),q=ot({mutationFn:async le=>xe.put(`/contracts/${le}/activate`),onSuccess:()=>{f.invalidateQueries({queryKey:["contracts"]})}}),W=ot({mutationFn:async({id:le,reason:ye})=>xe.put(`/contracts/${le}/terminate`,{reason:ye}),onSuccess:()=>{f.invalidateQueries({queryKey:["contracts"]}),r(null)}}),J=()=>{N({customerId:"",name:"",startDate:Ze(new Date,"yyyy-MM-dd"),endDate:Ze(new Date(Date.now()+365*24*60*60*1e3),"yyyy-MM-dd"),paymentTermsDays:30,creditLimit:"",discountPercent:0,notes:""})},z=()=>{O({productId:"",unitPrice:"",priceUnit:"per mCi",minimumQuantity:"",discountPercent:0})},G=le=>({DRAFT:"default",ACTIVE:"success",EXPIRED:"warning",TERMINATED:"danger"})[le]||"default",ne=le=>{const ye=new Date(le.startDate).getTime(),Se=new Date(le.endDate).getTime(),$=Date.now();return $<ye?0:$>Se?100:Math.round(($-ye)/(Se-ye)*100)},Z=le=>{const ye=new Date(le.endDate);return lte(ye,new Date)},ie=()=>{!C.customerId||!C.name||D.mutate({customerId:C.customerId,name:C.name,startDate:C.startDate,endDate:C.endDate,paymentTermsDays:C.paymentTermsDays,creditLimit:C.creditLimit?parseFloat(C.creditLimit):void 0,discountPercent:C.discountPercent,notes:C.notes||void 0})},me=()=>{!T.productId||!T.unitPrice||!t||M.mutate({contractId:t.id,data:{productId:T.productId,unitPrice:parseFloat(T.unitPrice),priceUnit:T.priceUnit,minimumQuantity:T.minimumQuantity?parseInt(T.minimumQuantity):void 0,discountPercent:T.discountPercent}})},ce=p?.filter(le=>le.status==="ACTIVE").length||0,Q=p?.reduce((le,ye)=>le+(ye.creditLimit||0),0)||0;p?.length&&(p.reduce((le,ye)=>le+(ye.discountPercent||0),0)/p.length).toFixed(1);const de=p?.filter(le=>{if(le.status!=="ACTIVE")return!1;const ye=Z(le);return ye>=0&&ye<=30}).length||0;return x?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Contracts & Pricing"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage customer contracts, payment terms, and product pricing"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"140px"},value:o,onChange:le=>l(le.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"EXPIRED",children:"Expired"}),e.jsx("option",{value:"TERMINATED",children:"Terminated"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[e.jsx(cn,{size:18})," New Contract"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Contracts",value:p?.length||0,icon:e.jsx(Pr,{size:20}),color:"primary",onClick:()=>l(""),selected:!o}),e.jsx(st,{title:"Active",value:ce,icon:e.jsx(Ai,{size:20}),color:"success",onClick:()=>l("ACTIVE"),selected:o==="ACTIVE"}),e.jsx(st,{title:"Total Credit",value:`${Jc} ${(Q/1e3).toFixed(0)}k`,icon:e.jsx(Ul,{size:20}),color:"info"}),e.jsx(st,{title:"Expiring Soon",value:de,icon:e.jsx($r,{size:20}),color:de>0?"warning":"default",onClick:()=>l("EXPIRING"),selected:o==="EXPIRING"})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:t?"1fr 420px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Contract"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Credit / Discount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[p?.map(le=>{const ye=Z(le),Se=ne(le);return e.jsxs("tr",{style:{cursor:"pointer",backgroundColor:t?.id===le.id?"var(--bg-secondary)":void 0},onClick:()=>{r(le),d("info")},children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.125rem"},children:le.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontFamily:"monospace"},children:le.contractNumber})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ts,{size:16,style:{color:"var(--text-muted)"}})}),e.jsx("span",{style:{fontWeight:500},children:le.customer?.name})]})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontSize:"0.875rem"},children:Ze(new Date(le.startDate),"MMM d, yyyy")}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["to ",Ze(new Date(le.endDate),"MMM d, yyyy")]}),le.status==="ACTIVE"&&e.jsxs("div",{style:{marginTop:"0.375rem"},children:[e.jsx("div",{style:{height:"4px",background:"var(--border)",borderRadius:"2px",overflow:"hidden",width:"100px"},children:e.jsx("div",{style:{height:"100%",width:`${Se}%`,background:ye<=30?"var(--warning)":"var(--success)",borderRadius:"2px",transition:"width 0.3s ease"}})}),e.jsx("div",{style:{fontSize:"0.6875rem",color:ye<=30?"var(--warning)":"var(--text-muted)",marginTop:"0.125rem"},children:ye>0?`${ye} days left`:"Expired"})]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Ul,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500},children:le.creditLimit?li(le.creditLimit):"No limit"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(p8,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{color:le.discountPercent>0?"var(--success)":"var(--text-muted)",fontWeight:le.discountPercent>0?500:400},children:le.discountPercent>0?`${le.discountPercent}% discount`:"No discount"})]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${G(le.status)}`,children:le.status})}),e.jsx("td",{onClick:$=>$.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[le.status==="DRAFT"&&e.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--success)",border:"none"},onClick:()=>q.mutate(le.id),disabled:q.isPending,title:"Activate Contract",children:e.jsx(Ai,{size:14})}),le.status==="ACTIVE"&&e.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",border:"none"},onClick:()=>{const $=prompt("Reason for termination:");$&&W.mutate({id:le.id,reason:$})},disabled:W.isPending,title:"Terminate Contract",children:e.jsx(kr,{size:14})})]})})]},le.id)}),(!p||p.length===0)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:6,style:{textAlign:"center",color:"var(--text-muted)",padding:"3rem"},children:[e.jsx(tz,{size:40,style:{opacity:.2,marginBottom:"0.75rem"}}),e.jsx("div",{children:"No contracts found"})]})})]})]})}),t&&e.jsxs("div",{className:"card",style:{padding:0},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:e.jsx("span",{className:`badge badge-${G(t.status)}`,children:t.status})}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:t.name}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.8125rem",fontFamily:"monospace",margin:0},children:t.contractNumber})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>r(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsx("div",{style:{borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",padding:"0 1rem"},children:[e.jsx("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:u==="info"?"2px solid var(--primary)":"2px solid transparent",color:u==="info"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>d("info"),children:"Contract Info"}),e.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:u==="pricing"?"2px solid var(--primary)":"2px solid transparent",color:u==="pricing"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>d("pricing"),children:["Product Pricing (",t.priceItems?.length||0,")"]}),e.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:u==="attachments"?"2px solid var(--primary)":"2px solid transparent",color:u==="attachments"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.375rem"},onClick:()=>d("attachments"),children:[e.jsx(ah,{size:14})," Documents"]})]})}),e.jsxs("div",{style:{padding:"1.25rem"},children:[u==="info"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1.25rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsx(Ts,{size:20,style:{color:"var(--primary)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.customer?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:t.customer?.code})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx($n,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contract Period"})]}),e.jsxs("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Start"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(t.startDate),"MMM d, yyyy")})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"End"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(t.endDate),"MMM d, yyyy")})]})]}),t.status==="ACTIVE"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"6px",background:"var(--border)",borderRadius:"3px",overflow:"hidden",marginBottom:"0.5rem"},children:e.jsx("div",{style:{height:"100%",width:`${ne(t)}%`,background:Z(t)<=30?"var(--warning)":"var(--success)",borderRadius:"3px"}})}),e.jsx("div",{style:{fontSize:"0.75rem",color:Z(t)<=30?"var(--warning)":"var(--text-muted)",textAlign:"center"},children:Z(t)>0?`${Z(t)} days remaining`:"Contract has expired"})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx(Qt,{size:18,style:{color:"var(--primary)",marginBottom:"0.375rem"}}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Payment Terms"}),e.jsxs("div",{style:{fontWeight:600,fontSize:"1.125rem"},children:["Net ",t.paymentTermsDays]})]}),e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx(p8,{size:18,style:{color:t.discountPercent>0?"var(--success)":"var(--text-muted)",marginBottom:"0.375rem"}}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Discount"}),e.jsxs("div",{style:{fontWeight:600,fontSize:"1.125rem",color:t.discountPercent>0?"var(--success)":void 0},children:[t.discountPercent,"%"]})]}),e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx(Ul,{size:18,style:{color:"#10b981",marginBottom:"0.375rem"}}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Credit Limit"}),e.jsx("div",{style:{fontWeight:600,fontSize:"1.125rem"},children:t.creditLimit?li(t.creditLimit):"Unlimited"})]}),e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx(Pr,{size:18,style:{color:"var(--primary)",marginBottom:"0.375rem"}}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Invoices"}),e.jsx("div",{style:{fontWeight:600,fontSize:"1.125rem"},children:t._count?.invoices||0})]})]}),t.notes&&e.jsxs("div",{style:{marginTop:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Notes"}),e.jsx("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",fontSize:"0.875rem",lineHeight:1.5},children:t.notes})]})]}),u==="pricing"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Custom pricing for this contract"}),t.status==="DRAFT"&&e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>s(!0),children:[e.jsx(cn,{size:14})," Add"]})]}),t.priceItems?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.priceItems.map(le=>e.jsxs("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Rr,{size:18,style:{color:"var(--primary)"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.125rem"},children:le.product?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:le.product?.code})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--primary)"},children:li(le.unitPrice)}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:le.priceUnit})]}),le.discountPercent>0&&e.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--success)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500},children:["-",le.discountPercent,"%"]}),t.status==="DRAFT"&&e.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",border:"none"},onClick:()=>Y.mutate({contractId:t.id,itemId:le.id}),children:e.jsx(ra,{size:14})})]},le.id))}):e.jsxs("div",{style:{textAlign:"center",padding:"2.5rem 1rem",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(DA,{size:32,style:{opacity:.3,marginBottom:"0.75rem"}}),e.jsx("div",{style:{marginBottom:"0.25rem"},children:"No custom pricing"}),e.jsx("div",{style:{fontSize:"0.75rem"},children:"Using default product rates"})]})]}),u==="attachments"&&e.jsx(mc,{entityType:"CONTRACT",entityId:t.id,title:"Contract Documents"})]})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"520px"},onClick:le=>le.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"New Contract"}),e.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Create a new customer contract with payment terms and pricing"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{className:"form-select",value:C.customerId,onChange:le=>N({...C,customerId:le.target.value}),children:[e.jsx("option",{value:"",children:"Select a customer"}),v?.map(le=>e.jsxs("option",{value:le.id,children:[le.name," (",le.code,")"]},le.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contract Name *"}),e.jsx("input",{type:"text",className:"form-input",value:C.name,onChange:le=>N({...C,name:le.target.value}),placeholder:"e.g., Annual Supply Agreement 2026"})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Date"}),e.jsx("input",{type:"date",className:"form-input",value:C.startDate,onChange:le=>N({...C,startDate:le.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Date"}),e.jsx("input",{type:"date",className:"form-input",value:C.endDate,onChange:le=>N({...C,endDate:le.target.value})})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Payment Terms (days)"}),e.jsx("input",{type:"number",className:"form-input",value:C.paymentTermsDays,onChange:le=>N({...C,paymentTermsDays:parseInt(le.target.value)||30})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Credit Limit ($)"}),e.jsx("input",{type:"number",className:"form-input",value:C.creditLimit,onChange:le=>N({...C,creditLimit:le.target.value}),placeholder:"Leave empty for no limit"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contract Discount (%)"}),e.jsx("input",{type:"number",className:"form-input",value:C.discountPercent,onChange:le=>N({...C,discountPercent:parseFloat(le.target.value)||0}),min:"0",max:"100",step:"0.5"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-input",value:C.notes,onChange:le=>N({...C,notes:le.target.value}),rows:2,placeholder:"Optional notes about this contract"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:ie,disabled:D.isPending||!C.customerId||!C.name,children:D.isPending?"Creating...":"Create Contract"})]})]})}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"440px"},onClick:le=>le.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Add Product Pricing"}),e.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Add custom pricing for a product in this contract"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Product *"}),e.jsxs("select",{className:"form-select",value:T.productId,onChange:le=>O({...T,productId:le.target.value}),children:[e.jsx("option",{value:"",children:"Select a product"}),w?.filter(le=>!t?.priceItems?.some(ye=>ye.productId===le.id)).map(le=>e.jsxs("option",{value:le.id,children:[le.name," (",le.code,")"]},le.id))]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Unit Price ($) *"}),e.jsx("input",{type:"number",className:"form-input",value:T.unitPrice,onChange:le=>O({...T,unitPrice:le.target.value}),step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Price Unit"}),e.jsxs("select",{className:"form-select",value:T.priceUnit,onChange:le=>O({...T,priceUnit:le.target.value}),children:[e.jsx("option",{value:"per mCi",children:"per mCi"}),e.jsx("option",{value:"per MBq",children:"per MBq"}),e.jsx("option",{value:"per dose",children:"per dose"}),e.jsx("option",{value:"per vial",children:"per vial"})]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Minimum Quantity"}),e.jsx("input",{type:"number",className:"form-input",value:T.minimumQuantity,onChange:le=>O({...T,minimumQuantity:le.target.value}),placeholder:"Optional"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Product Discount (%)"}),e.jsx("input",{type:"number",className:"form-input",value:T.discountPercent,onChange:le=>O({...T,discountPercent:parseFloat(le.target.value)||0}),min:"0",max:"100",step:"0.5"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:me,disabled:M.isPending||!T.productId||!T.unitPrice,children:M.isPending?"Adding...":"Add Pricing"})]})]})})]})}function zi(t){"@babel/helpers - typeof";return zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zi(t)}var _d=Uint8Array,Rc=Uint16Array,Z_=Int32Array,X_=new _d([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),J_=new _d([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HR=new _d([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xW=function(t,r){for(var n=new Rc(31),i=0;i<31;++i)n[i]=r+=1<<t[i-1];for(var a=new Z_(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)a[s]=s-n[i]<<5|i;return{b:n,r:a}},vW=xW(X_,2),owe=vW.b,rA=vW.r;owe[28]=258,rA[258]=28;var lwe=xW(J_,0),VR=lwe.r,nA=new Rc(32768);for(var Aa=0;Aa<32768;++Aa){var $h=(Aa&43690)>>1|(Aa&21845)<<1;$h=($h&52428)>>2|($h&13107)<<2,$h=($h&61680)>>4|($h&3855)<<4,nA[Aa]=(($h&65280)>>8|($h&255)<<8)>>1}var Pg=(function(t,r,n){for(var i=t.length,a=0,s=new Rc(r);a<i;++a)t[a]&&++s[t[a]-1];var o=new Rc(r);for(a=1;a<r;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(n){l=new Rc(1<<r);var u=15-r;for(a=0;a<i;++a)if(t[a])for(var d=a<<4|t[a],f=r-t[a],p=o[t[a]-1]++<<f,x=p|(1<<f)-1;p<=x;++p)l[nA[p]>>u]=d}else for(l=new Rc(i),a=0;a<i;++a)t[a]&&(l[a]=nA[o[t[a]-1]++]>>15-t[a]);return l}),vm=new _d(288);for(var Aa=0;Aa<144;++Aa)vm[Aa]=8;for(var Aa=144;Aa<256;++Aa)vm[Aa]=9;for(var Aa=256;Aa<280;++Aa)vm[Aa]=7;for(var Aa=280;Aa<288;++Aa)vm[Aa]=8;var Bb=new _d(32);for(var Aa=0;Aa<32;++Aa)Bb[Aa]=5;var cwe=Pg(vm,9,0),dwe=Pg(Bb,5,0),bW=function(t){return(t+7)/8|0},uwe=function(t,r,n){return(n==null||n>t.length)&&(n=t.length),new _d(t.subarray(r,n))},Fu=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8},gg=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},KS=function(t,r){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var a=n.length,s=n.slice();if(!a)return{t:wW,l:0};if(a==1){var o=new _d(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(Y,q){return Y.f-q.f}),n.push({s:-1,f:25001});var l=n[0],u=n[1],d=0,f=1,p=2;for(n[0]={s:-1,f:l.f+u.f,l,r:u};f!=a-1;)l=n[n[d].f<n[p].f?d++:p++],u=n[d!=f&&n[d].f<n[p].f?d++:p++],n[f++]={s:-1,f:l.f+u.f,l,r:u};for(var x=s[0].s,i=1;i<a;++i)s[i].s>x&&(x=s[i].s);var v=new Rc(x+1),w=iA(n[f-1],v,0);if(w>r){var i=0,C=0,N=w-r,T=1<<N;for(s.sort(function(q,W){return v[W.s]-v[q.s]||q.f-W.f});i<a;++i){var O=s[i].s;if(v[O]>r)C+=T-(1<<w-v[O]),v[O]=r;else break}for(C>>=N;C>0;){var D=s[i].s;v[D]<r?C-=1<<r-v[D]++-1:++i}for(;i>=0&&C;--i){var M=s[i].s;v[M]==r&&(--v[M],++C)}w=r}return{t:new _d(v),l:w}},iA=function(t,r,n){return t.s==-1?Math.max(iA(t.l,r,n+1),iA(t.r,r,n+1)):r[t.s]=n},$R=function(t){for(var r=t.length;r&&!t[--r];);for(var n=new Rc(++r),i=0,a=t[0],s=1,o=function(u){n[i++]=u},l=1;l<=r;++l)if(t[l]==a&&l!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:n.subarray(0,i),n:r}},yg=function(t,r){for(var n=0,i=0;i<r.length;++i)n+=t[i]*r[i];return n},jW=function(t,r,n){var i=n.length,a=bW(r+2);t[a]=i&255,t[a+1]=i>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<i;++s)t[a+s+4]=n[s];return(a+4+i)*8},GR=function(t,r,n,i,a,s,o,l,u,d,f){Fu(r,f++,n),++a[256];for(var p=KS(a,15),x=p.t,v=p.l,w=KS(s,15),C=w.t,N=w.l,T=$R(x),O=T.c,D=T.n,M=$R(C),Y=M.c,q=M.n,W=new Rc(19),J=0;J<O.length;++J)++W[O[J]&31];for(var J=0;J<Y.length;++J)++W[Y[J]&31];for(var z=KS(W,7),G=z.t,ne=z.l,Z=19;Z>4&&!G[HR[Z-1]];--Z);var ie=d+5<<3,me=yg(a,vm)+yg(s,Bb)+o,ce=yg(a,x)+yg(s,C)+o+14+3*Z+yg(W,G)+2*W[16]+3*W[17]+7*W[18];if(u>=0&&ie<=me&&ie<=ce)return jW(r,f,t.subarray(u,u+d));var Q,de,le,ye;if(Fu(r,f,1+(ce<me)),f+=2,ce<me){Q=Pg(x,v,0),de=x,le=Pg(C,N,0),ye=C;var Se=Pg(G,ne,0);Fu(r,f,D-257),Fu(r,f+5,q-1),Fu(r,f+10,Z-4),f+=14;for(var J=0;J<Z;++J)Fu(r,f+3*J,G[HR[J]]);f+=3*Z;for(var $=[O,Y],X=0;X<2;++X)for(var se=$[X],J=0;J<se.length;++J){var H=se[J]&31;Fu(r,f,Se[H]),f+=G[H],H>15&&(Fu(r,f,se[J]>>5&127),f+=se[J]>>12)}}else Q=cwe,de=vm,le=dwe,ye=Bb;for(var J=0;J<l;++J){var oe=i[J];if(oe>255){var H=oe>>18&31;gg(r,f,Q[H+257]),f+=de[H+257],H>7&&(Fu(r,f,oe>>23&31),f+=X_[H]);var ge=oe&31;gg(r,f,le[ge]),f+=ye[ge],ge>3&&(gg(r,f,oe>>5&8191),f+=J_[ge])}else gg(r,f,Q[oe]),f+=de[oe]}return gg(r,f,Q[256]),f+de[256]},hwe=new Z_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wW=new _d(0),fwe=function(t,r,n,i,a,s){var o=s.z||t.length,l=new _d(i+o+5*(1+Math.ceil(o/7e3))+a),u=l.subarray(i,l.length-a),d=s.l,f=(s.r||0)&7;if(r){f&&(u[0]=s.r>>3);for(var p=hwe[r-1],x=p>>13,v=p&8191,w=(1<<n)-1,C=s.p||new Rc(32768),N=s.h||new Rc(w+1),T=Math.ceil(n/3),O=2*T,D=function(Pt){return(t[Pt]^t[Pt+1]<<T^t[Pt+2]<<O)&w},M=new Z_(25e3),Y=new Rc(288),q=new Rc(32),W=0,J=0,z=s.i||0,G=0,ne=s.w||0,Z=0;z+2<o;++z){var ie=D(z),me=z&32767,ce=N[ie];if(C[me]=ce,N[ie]=me,ne<=z){var Q=o-z;if((W>7e3||G>24576)&&(Q>423||!d)){f=GR(t,u,0,M,Y,q,J,G,Z,z-Z,f),G=W=J=0,Z=z;for(var de=0;de<286;++de)Y[de]=0;for(var de=0;de<30;++de)q[de]=0}var le=2,ye=0,Se=v,$=me-ce&32767;if(Q>2&&ie==D(z-$))for(var X=Math.min(x,Q)-1,se=Math.min(32767,z),H=Math.min(258,Q);$<=se&&--Se&&me!=ce;){if(t[z+le]==t[z+le-$]){for(var oe=0;oe<H&&t[z+oe]==t[z+oe-$];++oe);if(oe>le){if(le=oe,ye=$,oe>X)break;for(var ge=Math.min($,oe-2),be=0,de=0;de<ge;++de){var Le=z-$+de&32767,ke=C[Le],He=Le-ke&32767;He>be&&(be=He,ce=Le)}}}me=ce,ce=C[me],$+=me-ce&32767}if(ye){M[G++]=268435456|rA[le]<<18|VR[ye];var Je=rA[le]&31,Qe=VR[ye]&31;J+=X_[Je]+J_[Qe],++Y[257+Je],++q[Qe],ne=z+le,++W}else M[G++]=t[z],++Y[t[z]]}}for(z=Math.max(z,ne);z<o;++z)M[G++]=t[z],++Y[t[z]];f=GR(t,u,d,M,Y,q,J,G,Z,z-Z,f),d||(s.r=f&7|u[f/8|0]<<3,f-=7,s.h=N,s.p=C,s.i=z,s.w=ne)}else{for(var z=s.w||0;z<o+d;z+=65535){var vt=z+65535;vt>=o&&(u[f/8|0]=d,vt=o),f=jW(u,f+1,t.subarray(z,vt))}s.i=o}return uwe(l,0,i+bW(f)+a)},SW=function(){var t=1,r=0;return{p:function(n){for(var i=t,a=r,s=n.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=i+=n[o];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}t=i,r=a},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},mwe=function(t,r,n,i,a){if(!a&&(a={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),o=new _d(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return fwe(t,r.level==null?6:r.level,r.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,n,i,a)},CW=function(t,r,n){for(;n;++r)t[r]=n,n>>>=8},pwe=function(t,r){var n=r.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var a=SW();a.p(r.dictionary),CW(t,2,a.d())}};function aA(t,r){r||(r={});var n=SW();n.p(t);var i=mwe(t,r,r.dictionary?6:2,4);return pwe(i,r),CW(i,i.length-4,n.d()),i}var gwe=typeof TextDecoder<"u"&&new TextDecoder,ywe=0;try{gwe.decode(wW,{stream:!0}),ywe=1}catch{}function xwe(t){if(Array.isArray(t))return t}function vwe(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],u=!0,d=!1;try{if(s=(n=n.call(t)).next,r!==0)for(;!(u=(i=s.call(n)).done)&&(l.push(i.value),l.length!==r);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function KR(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=Array(r);n<r;n++)i[n]=t[n];return i}function bwe(t,r){if(t){if(typeof t=="string")return KR(t,r);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KR(t,r):void 0}}function jwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QR(t,r){return xwe(t)||vwe(t,r)||bwe(t,r)||jwe()}function YR(t,r="utf8"){return new TextDecoder(r).decode(t)}const wwe=new TextEncoder;function Swe(t){return wwe.encode(t)}const Cwe=1024*8,Nwe=(()=>{const t=new Uint8Array(4),r=new Uint32Array(t.buffer);return!((r[0]=1)&t[0])})(),QS={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class e3{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(r=Cwe,n={}){let i=!1;typeof r=="number"?r=new ArrayBuffer(r):(i=!0,this.lastWrittenByte=r.byteLength);const a=n.offset?n.offset>>>0:0,s=r.byteLength-a;let o=a;(ArrayBuffer.isView(r)||r instanceof e3)&&(r.byteLength!==r.buffer.byteLength&&(o=r.byteOffset+a),r=r.buffer),i?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=r,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(r=1){return this.offset+r<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(r=1){return this.offset+=r,this}back(r=1){return this.offset-=r,this}seek(r){return this.offset=r,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const r=this._marks.pop();if(r===void 0)throw new Error("Mark stack empty");return this.seek(r),this}rewind(){return this.offset=0,this}ensureAvailable(r=1){if(!this.available(r)){const i=(this.offset+r)*2,a=new Uint8Array(i);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(r=1){return this.readArray(r,"uint8")}readArray(r,n){const i=QS[n].BYTES_PER_ELEMENT*r,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+i);if(this.littleEndian===Nwe&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+i));l.reverse();const u=new QS[n](l.buffer);return this.offset+=i,u.reverse(),u}const o=new QS[n](s);return this.offset+=i,o}readInt16(){const r=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}readUint16(){const r=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,r}readInt32(){const r=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}readUint32(){const r=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat32(){const r=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat64(){const r=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}readBigInt64(){const r=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,r}readBigUint64(){const r=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,r}readChar(){return String.fromCharCode(this.readInt8())}readChars(r=1){let n="";for(let i=0;i<r;i++)n+=this.readChar();return n}readUtf8(r=1){return YR(this.readBytes(r))}decodeText(r=1,n="utf8"){return YR(this.readBytes(r),n)}writeBoolean(r){return this.writeUint8(r?255:0),this}writeInt8(r){return this.ensureAvailable(1),this._data.setInt8(this.offset++,r),this._updateLastWrittenByte(),this}writeUint8(r){return this.ensureAvailable(1),this._data.setUint8(this.offset++,r),this._updateLastWrittenByte(),this}writeByte(r){return this.writeUint8(r)}writeBytes(r){this.ensureAvailable(r.length);for(let n=0;n<r.length;n++)this._data.setUint8(this.offset++,r[n]);return this._updateLastWrittenByte(),this}writeInt16(r){return this.ensureAvailable(2),this._data.setInt16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(r){return this.ensureAvailable(2),this._data.setUint16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(r){return this.ensureAvailable(4),this._data.setInt32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(r){return this.ensureAvailable(4),this._data.setUint32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(r){return this.ensureAvailable(4),this._data.setFloat32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(r){return this.ensureAvailable(8),this._data.setFloat64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(r){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(r){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(r){return this.writeUint8(r.charCodeAt(0))}writeChars(r){for(let n=0;n<r.length;n++)this.writeUint8(r.charCodeAt(n));return this}writeUtf8(r){return this.writeBytes(Swe(r))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function y0(t){let r=t.length;for(;--r>=0;)t[r]=0}const Awe=3,Ewe=258,NW=29,_we=256,Twe=_we+1+NW,AW=30,Iwe=512,Owe=new Array((Twe+2)*2);y0(Owe);const kwe=new Array(AW*2);y0(kwe);const Dwe=new Array(Iwe);y0(Dwe);const Pwe=new Array(Ewe-Awe+1);y0(Pwe);const Rwe=new Array(NW);y0(Rwe);const Mwe=new Array(AW);y0(Mwe);const Lwe=(t,r,n,i)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+r[i++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var sA=Lwe;const zwe=()=>{let t,r=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;r[n]=t}return r},Bwe=new Uint32Array(zwe()),Fwe=(t,r,n,i)=>{const a=Bwe,s=i+n;t^=-1;for(let o=i;o<s;o++)t=t>>>8^a[(t^r[o])&255];return t^-1};var eu=Fwe,oA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},EW={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const qwe=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);var Uwe=function(t){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)qwe(n,i)&&(t[i]=n[i])}}return t},Wwe=t=>{let r=0;for(let i=0,a=t.length;i<a;i++)r+=t[i].length;const n=new Uint8Array(r);for(let i=0,a=0,s=t.length;i<s;i++){let o=t[i];n.set(o,a),a+=o.length}return n},_W={assign:Uwe,flattenChunks:Wwe};let TW=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{TW=!1}const sy=new Uint8Array(256);for(let t=0;t<256;t++)sy[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;sy[254]=sy[254]=1;var Hwe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let r,n,i,a,s,o=t.length,l=0;for(a=0;a<o;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<o&&(i=t.charCodeAt(a+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),a++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(r=new Uint8Array(l),s=0,a=0;s<l;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<o&&(i=t.charCodeAt(a+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),a++)),n<128?r[s++]=n:n<2048?(r[s++]=192|n>>>6,r[s++]=128|n&63):n<65536?(r[s++]=224|n>>>12,r[s++]=128|n>>>6&63,r[s++]=128|n&63):(r[s++]=240|n>>>18,r[s++]=128|n>>>12&63,r[s++]=128|n>>>6&63,r[s++]=128|n&63);return r};const Vwe=(t,r)=>{if(r<65534&&t.subarray&&TW)return String.fromCharCode.apply(null,t.length===r?t:t.subarray(0,r));let n="";for(let i=0;i<r;i++)n+=String.fromCharCode(t[i]);return n};var $we=(t,r)=>{const n=r||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,r));let i,a;const s=new Array(n*2);for(a=0,i=0;i<n;){let o=t[i++];if(o<128){s[a++]=o;continue}let l=sy[o];if(l>4){s[a++]=65533,i+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&i<n;)o=o<<6|t[i++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return Vwe(s,a)},Gwe=(t,r)=>{r=r||t.length,r>t.length&&(r=t.length);let n=r-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?r:n+sy[t[n]]>r?n:r},lA={string2buf:Hwe,buf2string:$we,utf8border:Gwe};function Kwe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Qwe=Kwe;const G1=16209,Ywe=16191;var Zwe=function(r,n){let i,a,s,o,l,u,d,f,p,x,v,w,C,N,T,O,D,M,Y,q,W,J,z,G;const ne=r.state;i=r.next_in,z=r.input,a=i+(r.avail_in-5),s=r.next_out,G=r.output,o=s-(n-r.avail_out),l=s+(r.avail_out-257),u=ne.dmax,d=ne.wsize,f=ne.whave,p=ne.wnext,x=ne.window,v=ne.hold,w=ne.bits,C=ne.lencode,N=ne.distcode,T=(1<<ne.lenbits)-1,O=(1<<ne.distbits)-1;e:do{w<15&&(v+=z[i++]<<w,w+=8,v+=z[i++]<<w,w+=8),D=C[v&T];t:for(;;){if(M=D>>>24,v>>>=M,w-=M,M=D>>>16&255,M===0)G[s++]=D&65535;else if(M&16){Y=D&65535,M&=15,M&&(w<M&&(v+=z[i++]<<w,w+=8),Y+=v&(1<<M)-1,v>>>=M,w-=M),w<15&&(v+=z[i++]<<w,w+=8,v+=z[i++]<<w,w+=8),D=N[v&O];r:for(;;){if(M=D>>>24,v>>>=M,w-=M,M=D>>>16&255,M&16){if(q=D&65535,M&=15,w<M&&(v+=z[i++]<<w,w+=8,w<M&&(v+=z[i++]<<w,w+=8)),q+=v&(1<<M)-1,q>u){r.msg="invalid distance too far back",ne.mode=G1;break e}if(v>>>=M,w-=M,M=s-o,q>M){if(M=q-M,M>f&&ne.sane){r.msg="invalid distance too far back",ne.mode=G1;break e}if(W=0,J=x,p===0){if(W+=d-M,M<Y){Y-=M;do G[s++]=x[W++];while(--M);W=s-q,J=G}}else if(p<M){if(W+=d+p-M,M-=p,M<Y){Y-=M;do G[s++]=x[W++];while(--M);if(W=0,p<Y){M=p,Y-=M;do G[s++]=x[W++];while(--M);W=s-q,J=G}}}else if(W+=p-M,M<Y){Y-=M;do G[s++]=x[W++];while(--M);W=s-q,J=G}for(;Y>2;)G[s++]=J[W++],G[s++]=J[W++],G[s++]=J[W++],Y-=3;Y&&(G[s++]=J[W++],Y>1&&(G[s++]=J[W++]))}else{W=s-q;do G[s++]=G[W++],G[s++]=G[W++],G[s++]=G[W++],Y-=3;while(Y>2);Y&&(G[s++]=G[W++],Y>1&&(G[s++]=G[W++]))}}else if((M&64)===0){D=N[(D&65535)+(v&(1<<M)-1)];continue r}else{r.msg="invalid distance code",ne.mode=G1;break e}break}}else if((M&64)===0){D=C[(D&65535)+(v&(1<<M)-1)];continue t}else if(M&32){ne.mode=Ywe;break e}else{r.msg="invalid literal/length code",ne.mode=G1;break e}break}}while(i<a&&s<l);Y=w>>3,i-=Y,w-=Y<<3,v&=(1<<w)-1,r.next_in=i,r.next_out=s,r.avail_in=i<a?5+(a-i):5-(i-a),r.avail_out=s<l?257+(l-s):257-(s-l),ne.hold=v,ne.bits=w};const up=15,ZR=852,XR=592,JR=0,YS=1,e7=2,Xwe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Jwe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),eSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tSe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rSe=(t,r,n,i,a,s,o,l)=>{const u=l.bits;let d=0,f=0,p=0,x=0,v=0,w=0,C=0,N=0,T=0,O=0,D,M,Y,q,W,J=null,z;const G=new Uint16Array(up+1),ne=new Uint16Array(up+1);let Z=null,ie,me,ce;for(d=0;d<=up;d++)G[d]=0;for(f=0;f<i;f++)G[r[n+f]]++;for(v=u,x=up;x>=1&&G[x]===0;x--);if(v>x&&(v=x),x===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<x&&G[p]===0;p++);for(v<p&&(v=p),N=1,d=1;d<=up;d++)if(N<<=1,N-=G[d],N<0)return-1;if(N>0&&(t===JR||x!==1))return-1;for(ne[1]=0,d=1;d<up;d++)ne[d+1]=ne[d]+G[d];for(f=0;f<i;f++)r[n+f]!==0&&(o[ne[r[n+f]]++]=f);if(t===JR?(J=Z=o,z=20):t===YS?(J=Xwe,Z=Jwe,z=257):(J=eSe,Z=tSe,z=0),O=0,f=0,d=p,W=s,w=v,C=0,Y=-1,T=1<<v,q=T-1,t===YS&&T>ZR||t===e7&&T>XR)return 1;for(;;){ie=d-C,o[f]+1<z?(me=0,ce=o[f]):o[f]>=z?(me=Z[o[f]-z],ce=J[o[f]-z]):(me=96,ce=0),D=1<<d-C,M=1<<w,p=M;do M-=D,a[W+(O>>C)+M]=ie<<24|me<<16|ce|0;while(M!==0);for(D=1<<d-1;O&D;)D>>=1;if(D!==0?(O&=D-1,O+=D):O=0,f++,--G[d]===0){if(d===x)break;d=r[n+o[f]]}if(d>v&&(O&q)!==Y){for(C===0&&(C=v),W+=p,w=d-C,N=1<<w;w+C<x&&(N-=G[w+C],!(N<=0));)w++,N<<=1;if(T+=1<<w,t===YS&&T>ZR||t===e7&&T>XR)return 1;Y=O&q,a[Y]=v<<24|w<<16|W-s|0}}return O!==0&&(a[W+O]=d-C<<24|64<<16|0),l.bits=v,0};var Rg=rSe;const nSe=0,IW=1,OW=2,{Z_FINISH:t7,Z_BLOCK:iSe,Z_TREES:K1,Z_OK:bm,Z_STREAM_END:aSe,Z_NEED_DICT:sSe,Z_STREAM_ERROR:ld,Z_DATA_ERROR:kW,Z_MEM_ERROR:DW,Z_BUF_ERROR:oSe,Z_DEFLATED:r7}=EW,aj=16180,n7=16181,i7=16182,a7=16183,s7=16184,o7=16185,l7=16186,c7=16187,d7=16188,u7=16189,Fb=16190,qu=16191,ZS=16192,h7=16193,XS=16194,f7=16195,m7=16196,p7=16197,g7=16198,Q1=16199,Y1=16200,y7=16201,x7=16202,v7=16203,b7=16204,j7=16205,JS=16206,w7=16207,S7=16208,Fa=16209,PW=16210,RW=16211,lSe=852,cSe=592,dSe=15,uSe=dSe,C7=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function hSe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _m=t=>{if(!t)return 1;const r=t.state;return!r||r.strm!==t||r.mode<aj||r.mode>RW?1:0},MW=t=>{if(_m(t))return ld;const r=t.state;return t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=r.wrap&1),r.mode=aj,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(lSe),r.distcode=r.distdyn=new Int32Array(cSe),r.sane=1,r.back=-1,bm},LW=t=>{if(_m(t))return ld;const r=t.state;return r.wsize=0,r.whave=0,r.wnext=0,MW(t)},zW=(t,r)=>{let n;if(_m(t))return ld;const i=t.state;return r<0?(n=0,r=-r):(n=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?ld:(i.window!==null&&i.wbits!==r&&(i.window=null),i.wrap=n,i.wbits=r,LW(t))},BW=(t,r)=>{if(!t)return ld;const n=new hSe;t.state=n,n.strm=t,n.window=null,n.mode=aj;const i=zW(t,r);return i!==bm&&(t.state=null),i},fSe=t=>BW(t,uSe);let N7=!0,eC,tC;const mSe=t=>{if(N7){eC=new Int32Array(512),tC=new Int32Array(32);let r=0;for(;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(Rg(IW,t.lens,0,288,eC,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;Rg(OW,t.lens,0,32,tC,0,t.work,{bits:5}),N7=!1}t.lencode=eC,t.lenbits=9,t.distcode=tC,t.distbits=5},FW=(t,r,n,i)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(r.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>i&&(a=i),s.window.set(r.subarray(n-i,n-i+a),s.wnext),i-=a,i?(s.window.set(r.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},pSe=(t,r)=>{let n,i,a,s,o,l,u,d,f,p,x,v,w,C,N=0,T,O,D,M,Y,q,W,J;const z=new Uint8Array(4);let G,ne;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_m(t)||!t.output||!t.input&&t.avail_in!==0)return ld;n=t.state,n.mode===qu&&(n.mode=ZS),o=t.next_out,a=t.output,u=t.avail_out,s=t.next_in,i=t.input,l=t.avail_in,d=n.hold,f=n.bits,p=l,x=u,J=bm;e:for(;;)switch(n.mode){case aj:if(n.wrap===0){n.mode=ZS;break}for(;f<16;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,z[0]=d&255,z[1]=d>>>8&255,n.check=eu(n.check,z,2,0),d=0,f=0,n.mode=n7;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=Fa;break}if((d&15)!==r7){t.msg="unknown compression method",n.mode=Fa;break}if(d>>>=4,f-=4,W=(d&15)+8,n.wbits===0&&(n.wbits=W),W>15||W>n.wbits){t.msg="invalid window size",n.mode=Fa;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=d&512?u7:qu,d=0,f=0;break;case n7:for(;f<16;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(n.flags=d,(n.flags&255)!==r7){t.msg="unknown compression method",n.mode=Fa;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Fa;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,n.check=eu(n.check,z,2,0)),d=0,f=0,n.mode=i7;case i7:for(;f<32;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,z[2]=d>>>16&255,z[3]=d>>>24&255,n.check=eu(n.check,z,4,0)),d=0,f=0,n.mode=a7;case a7:for(;f<16;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,n.check=eu(n.check,z,2,0)),d=0,f=0,n.mode=s7;case s7:if(n.flags&1024){for(;f<16;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,n.check=eu(n.check,z,2,0)),d=0,f=0}else n.head&&(n.head.extra=null);n.mode=o7;case o7:if(n.flags&1024&&(v=n.length,v>l&&(v=l),v&&(n.head&&(W=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+v),W)),n.flags&512&&n.wrap&4&&(n.check=eu(n.check,i,v,s)),l-=v,s+=v,n.length-=v),n.length))break e;n.length=0,n.mode=l7;case l7:if(n.flags&2048){if(l===0)break e;v=0;do W=i[s+v++],n.head&&W&&n.length<65536&&(n.head.name+=String.fromCharCode(W));while(W&&v<l);if(n.flags&512&&n.wrap&4&&(n.check=eu(n.check,i,v,s)),l-=v,s+=v,W)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=c7;case c7:if(n.flags&4096){if(l===0)break e;v=0;do W=i[s+v++],n.head&&W&&n.length<65536&&(n.head.comment+=String.fromCharCode(W));while(W&&v<l);if(n.flags&512&&n.wrap&4&&(n.check=eu(n.check,i,v,s)),l-=v,s+=v,W)break e}else n.head&&(n.head.comment=null);n.mode=d7;case d7:if(n.flags&512){for(;f<16;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(n.wrap&4&&d!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Fa;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=qu;break;case u7:for(;f<32;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}t.adler=n.check=C7(d),d=0,f=0,n.mode=Fb;case Fb:if(n.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=s,t.avail_in=l,n.hold=d,n.bits=f,sSe;t.adler=n.check=1,n.mode=qu;case qu:if(r===iSe||r===K1)break e;case ZS:if(n.last){d>>>=f&7,f-=f&7,n.mode=JS;break}for(;f<3;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}switch(n.last=d&1,d>>>=1,f-=1,d&3){case 0:n.mode=h7;break;case 1:if(mSe(n),n.mode=Q1,r===K1){d>>>=2,f-=2;break e}break;case 2:n.mode=m7;break;case 3:t.msg="invalid block type",n.mode=Fa}d>>>=2,f-=2;break;case h7:for(d>>>=f&7,f-=f&7;f<32;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if((d&65535)!==(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Fa;break}if(n.length=d&65535,d=0,f=0,n.mode=XS,r===K1)break e;case XS:n.mode=f7;case f7:if(v=n.length,v){if(v>l&&(v=l),v>u&&(v=u),v===0)break e;a.set(i.subarray(s,s+v),o),l-=v,s+=v,u-=v,o+=v,n.length-=v;break}n.mode=qu;break;case m7:for(;f<14;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(n.nlen=(d&31)+257,d>>>=5,f-=5,n.ndist=(d&31)+1,d>>>=5,f-=5,n.ncode=(d&15)+4,d>>>=4,f-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Fa;break}n.have=0,n.mode=p7;case p7:for(;n.have<n.ncode;){for(;f<3;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}n.lens[Z[n.have++]]=d&7,d>>>=3,f-=3}for(;n.have<19;)n.lens[Z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,G={bits:n.lenbits},J=Rg(nSe,n.lens,0,19,n.lencode,0,n.work,G),n.lenbits=G.bits,J){t.msg="invalid code lengths set",n.mode=Fa;break}n.have=0,n.mode=g7;case g7:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[d&(1<<n.lenbits)-1],T=N>>>24,O=N>>>16&255,D=N&65535,!(T<=f);){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(D<16)d>>>=T,f-=T,n.lens[n.have++]=D;else{if(D===16){for(ne=T+2;f<ne;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(d>>>=T,f-=T,n.have===0){t.msg="invalid bit length repeat",n.mode=Fa;break}W=n.lens[n.have-1],v=3+(d&3),d>>>=2,f-=2}else if(D===17){for(ne=T+3;f<ne;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}d>>>=T,f-=T,W=0,v=3+(d&7),d>>>=3,f-=3}else{for(ne=T+7;f<ne;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}d>>>=T,f-=T,W=0,v=11+(d&127),d>>>=7,f-=7}if(n.have+v>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Fa;break}for(;v--;)n.lens[n.have++]=W}}if(n.mode===Fa)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Fa;break}if(n.lenbits=9,G={bits:n.lenbits},J=Rg(IW,n.lens,0,n.nlen,n.lencode,0,n.work,G),n.lenbits=G.bits,J){t.msg="invalid literal/lengths set",n.mode=Fa;break}if(n.distbits=6,n.distcode=n.distdyn,G={bits:n.distbits},J=Rg(OW,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,G),n.distbits=G.bits,J){t.msg="invalid distances set",n.mode=Fa;break}if(n.mode=Q1,r===K1)break e;case Q1:n.mode=Y1;case Y1:if(l>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=s,t.avail_in=l,n.hold=d,n.bits=f,Zwe(t,x),o=t.next_out,a=t.output,u=t.avail_out,s=t.next_in,i=t.input,l=t.avail_in,d=n.hold,f=n.bits,n.mode===qu&&(n.back=-1);break}for(n.back=0;N=n.lencode[d&(1<<n.lenbits)-1],T=N>>>24,O=N>>>16&255,D=N&65535,!(T<=f);){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(O&&(O&240)===0){for(M=T,Y=O,q=D;N=n.lencode[q+((d&(1<<M+Y)-1)>>M)],T=N>>>24,O=N>>>16&255,D=N&65535,!(M+T<=f);){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}d>>>=M,f-=M,n.back+=M}if(d>>>=T,f-=T,n.back+=T,n.length=D,O===0){n.mode=j7;break}if(O&32){n.back=-1,n.mode=qu;break}if(O&64){t.msg="invalid literal/length code",n.mode=Fa;break}n.extra=O&15,n.mode=y7;case y7:if(n.extra){for(ne=n.extra;f<ne;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=x7;case x7:for(;N=n.distcode[d&(1<<n.distbits)-1],T=N>>>24,O=N>>>16&255,D=N&65535,!(T<=f);){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if((O&240)===0){for(M=T,Y=O,q=D;N=n.distcode[q+((d&(1<<M+Y)-1)>>M)],T=N>>>24,O=N>>>16&255,D=N&65535,!(M+T<=f);){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}d>>>=M,f-=M,n.back+=M}if(d>>>=T,f-=T,n.back+=T,O&64){t.msg="invalid distance code",n.mode=Fa;break}n.offset=D,n.extra=O&15,n.mode=v7;case v7:if(n.extra){for(ne=n.extra;f<ne;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Fa;break}n.mode=b7;case b7:if(u===0)break e;if(v=x-u,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Fa;break}v>n.wnext?(v-=n.wnext,w=n.wsize-v):w=n.wnext-v,v>n.length&&(v=n.length),C=n.window}else C=a,w=o-n.offset,v=n.length;v>u&&(v=u),u-=v,n.length-=v;do a[o++]=C[w++];while(--v);n.length===0&&(n.mode=Y1);break;case j7:if(u===0)break e;a[o++]=n.length,u--,n.mode=Y1;break;case JS:if(n.wrap){for(;f<32;){if(l===0)break e;l--,d|=i[s++]<<f,f+=8}if(x-=u,t.total_out+=x,n.total+=x,n.wrap&4&&x&&(t.adler=n.check=n.flags?eu(n.check,a,x,o-x):sA(n.check,a,x,o-x)),x=u,n.wrap&4&&(n.flags?d:C7(d))!==n.check){t.msg="incorrect data check",n.mode=Fa;break}d=0,f=0}n.mode=w7;case w7:if(n.wrap&&n.flags){for(;f<32;){if(l===0)break e;l--,d+=i[s++]<<f,f+=8}if(n.wrap&4&&d!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Fa;break}d=0,f=0}n.mode=S7;case S7:J=aSe;break e;case Fa:J=kW;break e;case PW:return DW;case RW:default:return ld}return t.next_out=o,t.avail_out=u,t.next_in=s,t.avail_in=l,n.hold=d,n.bits=f,(n.wsize||x!==t.avail_out&&n.mode<Fa&&(n.mode<JS||r!==t7))&&FW(t,t.output,t.next_out,x-t.avail_out),p-=t.avail_in,x-=t.avail_out,t.total_in+=p,t.total_out+=x,n.total+=x,n.wrap&4&&x&&(t.adler=n.check=n.flags?eu(n.check,a,x,t.next_out-x):sA(n.check,a,x,t.next_out-x)),t.data_type=n.bits+(n.last?64:0)+(n.mode===qu?128:0)+(n.mode===Q1||n.mode===XS?256:0),(p===0&&x===0||r===t7)&&J===bm&&(J=oSe),J},gSe=t=>{if(_m(t))return ld;let r=t.state;return r.window&&(r.window=null),t.state=null,bm},ySe=(t,r)=>{if(_m(t))return ld;const n=t.state;return(n.wrap&2)===0?ld:(n.head=r,r.done=!1,bm)},xSe=(t,r)=>{const n=r.length;let i,a,s;return _m(t)||(i=t.state,i.wrap!==0&&i.mode!==Fb)?ld:i.mode===Fb&&(a=1,a=sA(a,r,n,0),a!==i.check)?kW:(s=FW(t,r,n,n),s?(i.mode=PW,DW):(i.havedict=1,bm))};var vSe=LW,bSe=zW,jSe=MW,wSe=fSe,SSe=BW,CSe=pSe,NSe=gSe,ASe=ySe,ESe=xSe,_Se="pako inflate (from Nodeca project)",Hu={inflateReset:vSe,inflateReset2:bSe,inflateResetKeep:jSe,inflateInit:wSe,inflateInit2:SSe,inflate:CSe,inflateEnd:NSe,inflateGetHeader:ASe,inflateSetDictionary:ESe,inflateInfo:_Se};function TSe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ISe=TSe;const qW=Object.prototype.toString,{Z_NO_FLUSH:OSe,Z_FINISH:kSe,Z_OK:oy,Z_STREAM_END:rC,Z_NEED_DICT:nC,Z_STREAM_ERROR:DSe,Z_DATA_ERROR:A7,Z_MEM_ERROR:PSe}=EW;function Gy(t){this.options=_W.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(t&&t.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qwe,this.strm.avail_out=0;let n=Hu.inflateInit2(this.strm,r.windowBits);if(n!==oy)throw new Error(oA[n]);if(this.header=new ISe,Hu.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=lA.string2buf(r.dictionary):qW.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(n=Hu.inflateSetDictionary(this.strm,r.dictionary),n!==oy)))throw new Error(oA[n])}Gy.prototype.push=function(t,r){const n=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(r===~~r?o=r:o=r===!0?kSe:OSe,qW.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Hu.inflate(n,o),s===nC&&a&&(s=Hu.inflateSetDictionary(n,a),s===oy?s=Hu.inflate(n,o):s===A7&&(s=nC));n.avail_in>0&&s===rC&&n.state.wrap>0&&t[n.next_in]!==0;)Hu.inflateReset(n),s=Hu.inflate(n,o);switch(s){case DSe:case A7:case nC:case PSe:return this.onEnd(s),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||s===rC))if(this.options.to==="string"){let u=lA.utf8border(n.output,n.next_out),d=n.next_out-u,f=lA.buf2string(n.output,u);n.next_out=d,n.avail_out=i-d,d&&n.output.set(n.output.subarray(u,u+d),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===oy&&l===0)){if(s===rC)return s=Hu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Gy.prototype.onData=function(t){this.chunks.push(t)};Gy.prototype.onEnd=function(t){t===oy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_W.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function RSe(t,r){const n=new Gy(r);if(n.push(t),n.err)throw n.msg||oA[n.err];return n.result}var MSe=Gy,LSe=RSe,zSe={Inflate:MSe,inflate:LSe};const{Inflate:BSe,inflate:FSe}=zSe;var E7=BSe,qSe=FSe;const UW=[];for(let t=0;t<256;t++){let r=t;for(let n=0;n<8;n++)r&1?r=3988292384^r>>>1:r=r>>>1;UW[t]=r}const _7=4294967295;function USe(t,r,n){let i=t;for(let a=0;a<n;a++)i=UW[(i^r[a])&255]^i>>>8;return i}function WSe(t,r){return(USe(_7,t,r)^_7)>>>0}function T7(t,r,n){const i=t.readUint32(),a=WSe(new Uint8Array(t.buffer,t.byteOffset+t.offset-r-4,r),r);if(a!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${a}`)}function WW(t,r,n){for(let i=0;i<n;i++)r[i]=t[i]}function HW(t,r,n,i){let a=0;for(;a<i;a++)r[a]=t[a];for(;a<n;a++)r[a]=t[a]+r[a-i]&255}function VW(t,r,n,i){let a=0;if(n.length===0)for(;a<i;a++)r[a]=t[a];else for(;a<i;a++)r[a]=t[a]+n[a]&255}function $W(t,r,n,i,a){let s=0;if(n.length===0){for(;s<a;s++)r[s]=t[s];for(;s<i;s++)r[s]=t[s]+(r[s-a]>>1)&255}else{for(;s<a;s++)r[s]=t[s]+(n[s]>>1)&255;for(;s<i;s++)r[s]=t[s]+(r[s-a]+n[s]>>1)&255}}function GW(t,r,n,i,a){let s=0;if(n.length===0){for(;s<a;s++)r[s]=t[s];for(;s<i;s++)r[s]=t[s]+r[s-a]&255}else{for(;s<a;s++)r[s]=t[s]+n[s]&255;for(;s<i;s++)r[s]=t[s]+HSe(r[s-a],n[s],n[s-a])&255}}function HSe(t,r,n){const i=t+r-n,a=Math.abs(i-t),s=Math.abs(i-r),o=Math.abs(i-n);return a<=s&&a<=o?t:s<=o?r:n}function VSe(t,r,n,i,a,s){switch(t){case 0:WW(r,n,a);break;case 1:HW(r,n,a,s);break;case 2:VW(r,n,i,a);break;case 3:$W(r,n,i,a,s);break;case 4:GW(r,n,i,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const $Se=new Uint16Array([255]),GSe=new Uint8Array($Se.buffer),KSe=GSe[0]===255;function QSe(t){const{data:r,width:n,height:i,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,u=new Uint8Array(i*n*l);let d=0;for(let f=0;f<7;f++){const p=o[f],x=Math.ceil((n-p.x)/p.xStep),v=Math.ceil((i-p.y)/p.yStep);if(x<=0||v<=0)continue;const w=x*l,C=new Uint8Array(w);for(let N=0;N<v;N++){const T=r[d++],O=r.subarray(d,d+w);d+=w;const D=new Uint8Array(w);VSe(T,O,D,C,w,l),C.set(D);for(let M=0;M<x;M++){const Y=p.x+M*p.xStep,q=p.y+N*p.yStep;if(!(Y>=n||q>=i))for(let W=0;W<l;W++)u[(q*n+Y)*l+W]=D[M*l+W]}}}if(s===16){const f=new Uint16Array(u.buffer);if(KSe)for(let p=0;p<f.length;p++)f[p]=YSe(f[p]);return f}else return u}function YSe(t){return(t&255)<<8|t>>8&255}const ZSe=new Uint16Array([255]),XSe=new Uint8Array(ZSe.buffer),JSe=XSe[0]===255,eCe=new Uint8Array(0);function I7(t){const{data:r,width:n,height:i,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*n),u=new Uint8Array(i*l);let d=eCe,f=0,p,x;for(let v=0;v<i;v++){switch(p=r.subarray(f+1,f+1+l),x=u.subarray(v*l,(v+1)*l),r[f]){case 0:WW(p,x,l);break;case 1:HW(p,x,l,o);break;case 2:VW(p,x,d,l);break;case 3:$W(p,x,d,l,o);break;case 4:GW(p,x,d,l,o);break;default:throw new Error(`Unsupported filter: ${r[f]}`)}d=x,f+=l+1}if(s===16){const v=new Uint16Array(u.buffer);if(JSe)for(let w=0;w<v.length;w++)v[w]=tCe(v[w]);return v}else return u}function tCe(t){return(t&255)<<8|t>>8&255}const wv=Uint8Array.of(137,80,78,71,13,10,26,10);function O7(t){if(!rCe(t.readBytes(wv.length)))throw new Error("wrong PNG signature")}function rCe(t){if(t.length<wv.length)return!1;for(let r=0;r<wv.length;r++)if(t[r]!==wv[r])return!1;return!0}const nCe="tEXt",iCe=0,KW=new TextDecoder("latin1");function aCe(t){if(oCe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const sCe=/^[\u0000-\u00FF]*$/;function oCe(t){if(!sCe.test(t))throw new Error("invalid latin1 text")}function lCe(t,r,n){const i=QW(r);t[i]=cCe(r,n-i.length-1)}function QW(t){for(t.mark();t.readByte()!==iCe;);const r=t.offset;t.reset();const n=KW.decode(t.readBytes(r-t.offset-1));return t.skip(1),aCe(n),n}function cCe(t,r){return KW.decode(t.readBytes(r))}const Ec={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},iC={UNKNOWN:-1,DEFLATE:0},k7={UNKNOWN:-1,ADAPTIVE:0},aC={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Z1={NONE:0,BACKGROUND:1,PREVIOUS:2},sC={SOURCE:0,OVER:1};class dCe extends e3{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(r,n={}){super(r);const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new E7,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=iC.UNKNOWN,this._filterMethod=k7.UNKNOWN,this._interlaceMethod=aC.UNKNOWN,this._colorType=Ec.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(O7(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(O7(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case nCe:lCe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?T7(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?T7(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=uCe(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Ec.GREYSCALE:i=1;break;case Ec.TRUECOLOUR:i=3;break;case Ec.INDEXED_COLOUR:i=1;break;case Ec.GREYSCALE_ALPHA:i=2;break;case Ec.TRUECOLOUR_ALPHA:i=4;break;case Ec.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==iC.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ec.GREYSCALE:case Ec.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ec.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ec.UNKNOWN:case Ec.GREYSCALE_ALPHA:case Ec.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=QW(this),i=this.readUint8();if(i!==iC.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:qSe(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=I7({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Z1.NONE:break;case Z1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*r.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Z1.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(s*n.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(n.blendOp){case sC.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++)r.data[l+d]=n.data[u+d]}break;case sC.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:n.data[u+d],x=Math.floor(f*p+(1-f)*r.data[l+d]);r.data[l+d]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==k7.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===aC.NO_INTERLACE)this._png.data=I7({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===aC.ADAM7)this._png.data=QSe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Z1.NONE,blendOp:sC.SOURCE,data:r}),this._inflator=new E7,this._writingDataChunks=!1}}function uCe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var D7;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(D7||(D7={}));function hCe(t,r){return new dCe(t,r).decode()}var hn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function oC(){hn.console&&typeof hn.console.log=="function"&&hn.console.log.apply(hn.console,arguments)}var ta={log:oC,warn:function(t){hn.console&&(typeof hn.console.warn=="function"?hn.console.warn.apply(hn.console,arguments):oC.call(null,arguments))},error:function(t){hn.console&&(typeof hn.console.error=="function"?hn.console.error.apply(hn.console,arguments):oC(t))}};function lC(t,r,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Lf(i.response,r,n)},i.onerror=function(){ta.error("could not download file")},i.send()}function P7(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function X1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var Lf=hn.saveAs||((typeof window>"u"?"undefined":zi(window))!=="object"||window!==hn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,r,n){var i=hn.URL||hn.webkitURL,a=document.createElement("a");r=r||t.name||"download",a.download=r,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?P7(a.href)?lC(t,r,n):X1(a,a.target="_blank"):X1(a)):(a.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){X1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,n){if(r=r||t.name||"download",typeof t=="string")if(P7(t))lC(t,r,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){X1(i)})}else navigator.msSaveOrOpenBlob((function(a,s){return s===void 0?s={autoBom:!1}:zi(s)!=="object"&&(ta.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,n),r)}:function(t,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return lC(t,r,n);var a=t.type==="application/octet-stream",s=/constructor/i.test(hn.HTMLElement)||hn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":zi(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=f:location=f,i=null},l.readAsDataURL(t)}else{var u=hn.URL||hn.webkitURL,d=u.createObjectURL(t);i?i.location=d:location.href=d,i=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});function YW(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<n.length;i++){var a=n[i].re,s=n[i].process,o=a.exec(t);o&&(r=s(o),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+l+u+d}}var Sv=hn.atob.bind(hn),R7=hn.btoa.bind(hn);function cC(t,r){var n=t[0],i=t[1],a=t[2],s=t[3];n=jl(n,i,a,s,r[0],7,-680876936),s=jl(s,n,i,a,r[1],12,-389564586),a=jl(a,s,n,i,r[2],17,606105819),i=jl(i,a,s,n,r[3],22,-1044525330),n=jl(n,i,a,s,r[4],7,-176418897),s=jl(s,n,i,a,r[5],12,1200080426),a=jl(a,s,n,i,r[6],17,-1473231341),i=jl(i,a,s,n,r[7],22,-45705983),n=jl(n,i,a,s,r[8],7,1770035416),s=jl(s,n,i,a,r[9],12,-1958414417),a=jl(a,s,n,i,r[10],17,-42063),i=jl(i,a,s,n,r[11],22,-1990404162),n=jl(n,i,a,s,r[12],7,1804603682),s=jl(s,n,i,a,r[13],12,-40341101),a=jl(a,s,n,i,r[14],17,-1502002290),n=wl(n,i=jl(i,a,s,n,r[15],22,1236535329),a,s,r[1],5,-165796510),s=wl(s,n,i,a,r[6],9,-1069501632),a=wl(a,s,n,i,r[11],14,643717713),i=wl(i,a,s,n,r[0],20,-373897302),n=wl(n,i,a,s,r[5],5,-701558691),s=wl(s,n,i,a,r[10],9,38016083),a=wl(a,s,n,i,r[15],14,-660478335),i=wl(i,a,s,n,r[4],20,-405537848),n=wl(n,i,a,s,r[9],5,568446438),s=wl(s,n,i,a,r[14],9,-1019803690),a=wl(a,s,n,i,r[3],14,-187363961),i=wl(i,a,s,n,r[8],20,1163531501),n=wl(n,i,a,s,r[13],5,-1444681467),s=wl(s,n,i,a,r[2],9,-51403784),a=wl(a,s,n,i,r[7],14,1735328473),n=Sl(n,i=wl(i,a,s,n,r[12],20,-1926607734),a,s,r[5],4,-378558),s=Sl(s,n,i,a,r[8],11,-2022574463),a=Sl(a,s,n,i,r[11],16,1839030562),i=Sl(i,a,s,n,r[14],23,-35309556),n=Sl(n,i,a,s,r[1],4,-1530992060),s=Sl(s,n,i,a,r[4],11,1272893353),a=Sl(a,s,n,i,r[7],16,-155497632),i=Sl(i,a,s,n,r[10],23,-1094730640),n=Sl(n,i,a,s,r[13],4,681279174),s=Sl(s,n,i,a,r[0],11,-358537222),a=Sl(a,s,n,i,r[3],16,-722521979),i=Sl(i,a,s,n,r[6],23,76029189),n=Sl(n,i,a,s,r[9],4,-640364487),s=Sl(s,n,i,a,r[12],11,-421815835),a=Sl(a,s,n,i,r[15],16,530742520),n=Cl(n,i=Sl(i,a,s,n,r[2],23,-995338651),a,s,r[0],6,-198630844),s=Cl(s,n,i,a,r[7],10,1126891415),a=Cl(a,s,n,i,r[14],15,-1416354905),i=Cl(i,a,s,n,r[5],21,-57434055),n=Cl(n,i,a,s,r[12],6,1700485571),s=Cl(s,n,i,a,r[3],10,-1894986606),a=Cl(a,s,n,i,r[10],15,-1051523),i=Cl(i,a,s,n,r[1],21,-2054922799),n=Cl(n,i,a,s,r[8],6,1873313359),s=Cl(s,n,i,a,r[15],10,-30611744),a=Cl(a,s,n,i,r[6],15,-1560198380),i=Cl(i,a,s,n,r[13],21,1309151649),n=Cl(n,i,a,s,r[4],6,-145523070),s=Cl(s,n,i,a,r[11],10,-1120210379),a=Cl(a,s,n,i,r[2],15,718787259),i=Cl(i,a,s,n,r[9],21,-343485551),t[0]=tf(n,t[0]),t[1]=tf(i,t[1]),t[2]=tf(a,t[2]),t[3]=tf(s,t[3])}function sj(t,r,n,i,a,s){return r=tf(tf(r,t),tf(i,s)),tf(r<<a|r>>>32-a,n)}function jl(t,r,n,i,a,s,o){return sj(r&n|~r&i,t,r,a,s,o)}function wl(t,r,n,i,a,s,o){return sj(r&i|n&~i,t,r,a,s,o)}function Sl(t,r,n,i,a,s,o){return sj(r^n^i,t,r,a,s,o)}function Cl(t,r,n,i,a,s,o){return sj(n^(r|~i),t,r,a,s,o)}function ZW(t){var r,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)cC(i,fCe(t.substring(r-64,r)));t=t.substring(r-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)a[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(cC(i,a),r=0;r<16;r++)a[r]=0;return a[14]=8*n,cC(i,a),i}function fCe(t){var r,n=[];for(r=0;r<64;r+=4)n[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return n}var M7="0123456789abcdef".split("");function mCe(t){for(var r="",n=0;n<4;n++)r+=M7[t>>8*n+4&15]+M7[t>>8*n&15];return r}function pCe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function cA(t){return ZW(t).map(pCe).join("")}var gCe=(function(t){for(var r=0;r<t.length;r++)t[r]=mCe(t[r]);return t.join("")})(ZW("hello"))!="5d41402abc4b2a76b9719d911017c592";function tf(t,r){if(gCe){var n=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(n>>16)<<16|65535&n}return t+r&4294967295}function dA(t,r){var n,i,a,s;if(t!==n){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],u=0;u<256;u++)l[u]=u;var d=0;for(u=0;u<256;u++){var f=l[u];d=(d+f+o.charCodeAt(u))%256,l[u]=l[d],l[d]=f}n=t,i=l}else l=i;var p=r.length,x=0,v=0,w="";for(u=0;u<p;u++)v=(v+(f=l[x=(x+1)%256]))%256,l[x]=l[v],l[v]=f,o=l[(l[x]+l[v])%256],w+=String.fromCharCode(r.charCodeAt(u)^o);return w}var L7={print:4,modify:8,copy:16,"annot-forms":32};function yp(t,r,n,i){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(L7.perm!==void 0)throw new Error("Invalid permission: "+l);a+=L7[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(r+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=cA(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=dA(this.encryptionKey,this.padding)}function xp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",n=t.length,i=0;i<n;i++){var a=t.charCodeAt(i);r+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[i]}return r}function z7(t){if(zi(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(n,i,a){if(a=a||!1,typeof n!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(n)||(r[n]={});var s=Math.random().toString(35);return r[n][s]=[i,!!a],s},this.unsubscribe=function(n){for(var i in r)if(r[i][n])return delete r[i][n],Object.keys(r[i]).length===0&&delete r[i],!0;return!1},this.publish=function(n){if(r.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var s in r[n]){var o=r[n][s];try{o[0].apply(t,i)}catch(l){hn.console&&ta.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function qb(t){if(!(this instanceof qb))return new qb(t);var r="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&r.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function XW(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function Ff(t,r,n,i,a){if(!(this instanceof Ff))return new Ff(t,r,n,i,a);this.type=t==="axial"?2:3,this.coords=r,this.colors=n,XW.call(this,i,a)}function Sp(t,r,n,i,a){if(!(this instanceof Sp))return new Sp(t,r,n,i,a);this.boundingBox=t,this.xStep=r,this.yStep=n,this.stream="",this.cloneIndex=0,XW.call(this,i,a)}function Br(t){var r,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,u=16,d="S",f=null;zi(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,a=t.format||a,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),d=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),i=i||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,x={},v={internal:{},__private__:{}};v.__private__.PubSub=z7;var w="1.3",C=v.__private__.getPdfVersion=function(){return w};v.__private__.setPdfVersion=function(ee){w=ee};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return N};var T=v.__private__.getPageFormat=function(ee){return N[ee]};a=a||"a4";var O="compat",D="advanced",M=O;function Y(){this.saveGraphicsState(),Oe(new vr(tn,0,0,-tn,0,Rl()*tn).toString()+" cm"),this.setFontSize(this.getFontSize()/tn),d="n",M=D}function q(){this.restoreGraphicsState(),d="S",M=O}var W=v.__private__.combineFontStyleAndFontWeight=function(ee,we){if(ee=="bold"&&we=="normal"||ee=="bold"&&we==400||ee=="normal"&&we=="italic"||ee=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(ee=we==400||we==="normal"?ee==="italic"?"italic":"normal":we!=700&&we!=="bold"||ee!=="normal"?(we==700?"bold":we)+""+ee:"bold"),ee};v.advancedAPI=function(ee){var we=M===O;return we&&Y.call(this),typeof ee!="function"||(ee(this),we&&q.call(this)),this},v.compatAPI=function(ee){var we=M===D;return we&&q.call(this),typeof ee!="function"||(ee(this),we&&Y.call(this)),this},v.isAdvancedAPI=function(){return M===D};var J,z=function(ee){if(M!==D)throw new Error(ee+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=v.roundToPrecision=v.__private__.roundToPrecision=function(ee,we){var Re=r||we;if(isNaN(ee)||isNaN(Re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ee.toFixed(Re).replace(/0+$/,"")};J=v.hpf=v.__private__.hpf=typeof u=="number"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return G(ee,u)}:u==="smart"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return G(ee,ee>-1&&ee<1?16:5)}:function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return G(ee,16)};var ne=v.f2=v.__private__.f2=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f2");return G(ee,2)},Z=v.__private__.f3=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f3");return G(ee,3)},ie=v.scale=v.__private__.scale=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.scale");return M===O?ee*tn:M===D?ee:void 0},me=function(ee){return ie((function(we){return M===O?Rl()-we:M===D?we:void 0})(ee))};v.__private__.setPrecision=v.setPrecision=function(ee){typeof parseInt(ee,10)=="number"&&(r=parseInt(ee,10))};var ce,Q="00000000000000000000000000000000",de=v.__private__.getFileId=function(){return Q},le=v.__private__.setFileId=function(ee){return Q=ee!==void 0&&/^[a-fA-F0-9]{32}$/.test(ee)?ee.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(di=new yp(f.userPermissions,f.userPassword,f.ownerPassword,Q)),Q};v.setFileId=function(ee){return le(ee),this},v.getFileId=function(){return de()};var ye=v.__private__.convertDateToPDFDate=function(ee){var we=ee.getTimezoneOffset(),Re=we<0?"+":"-",We=Math.floor(Math.abs(we/60)),et=Math.abs(we%60),Ct=[Re,H(We),"'",H(et),"'"].join("");return["D:",ee.getFullYear(),H(ee.getMonth()+1),H(ee.getDate()),H(ee.getHours()),H(ee.getMinutes()),H(ee.getSeconds()),Ct].join("")},Se=v.__private__.convertPDFDateToDate=function(ee){var we=parseInt(ee.substr(2,4),10),Re=parseInt(ee.substr(6,2),10)-1,We=parseInt(ee.substr(8,2),10),et=parseInt(ee.substr(10,2),10),Ct=parseInt(ee.substr(12,2),10),Lt=parseInt(ee.substr(14,2),10);return new Date(we,Re,We,et,Ct,Lt,0)},$=v.__private__.setCreationDate=function(ee){var we;if(ee===void 0&&(ee=new Date),ee instanceof Date)we=ye(ee);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ee))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=ee}return ce=we},X=v.__private__.getCreationDate=function(ee){var we=ce;return ee==="jsDate"&&(we=Se(ce)),we};v.setCreationDate=function(ee){return $(ee),this},v.getCreationDate=function(ee){return X(ee)};var se,H=v.__private__.padd2=function(ee){return("0"+parseInt(ee)).slice(-2)},oe=v.__private__.padd2Hex=function(ee){return("00"+(ee=ee.toString())).substr(ee.length)},ge=0,be=[],Le=[],ke=0,He=[],Je=[],Qe=!1,vt=Le;v.__private__.setCustomOutputDestination=function(ee){Qe=!0,vt=ee};var Pt=function(ee){Qe||(vt=ee)};v.__private__.resetCustomOutputDestination=function(){Qe=!1,vt=Le};var Oe=v.__private__.out=function(ee){return ee=ee.toString(),ke+=ee.length+1,vt.push(ee),vt},at=v.__private__.write=function(ee){return Oe(arguments.length===1?ee.toString():Array.prototype.join.call(arguments," "))},Wt=v.__private__.getArrayBuffer=function(ee){for(var we=ee.length,Re=new ArrayBuffer(we),We=new Uint8Array(Re);we--;)We[we]=ee.charCodeAt(we);return Re},Bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Bt};var yt=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(ee){return yt=M===D?ee/tn:ee,this};var rr,St=v.__private__.getFontSize=v.getFontSize=function(){return M===O?yt:yt*tn},xr=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(ee){return xr=ee,this},v.__private__.getR2L=v.getR2L=function(){return xr};var hr,zr=v.__private__.setZoomMode=function(ee){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ee))rr=ee;else if(isNaN(ee)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(ee)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ee+'" is not recognized.');rr=ee}else rr=parseInt(ee,10)};v.__private__.getZoomMode=function(){return rr};var yn,Ir=v.__private__.setPageMode=function(ee){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ee)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ee+'" is not recognized.');hr=ee};v.__private__.getPageMode=function(){return hr};var xn=v.__private__.setLayoutMode=function(ee){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ee)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ee+'" is not recognized.');yn=ee};v.__private__.getLayoutMode=function(){return yn},v.__private__.setDisplayMode=v.setDisplayMode=function(ee,we,Re){return zr(ee),xn(we),Ir(Re),this};var Yr={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(ee){if(Object.keys(Yr).indexOf(ee)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Yr[ee]},v.__private__.getDocumentProperties=function(){return Yr},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(ee){for(var we in Yr)Yr.hasOwnProperty(we)&&ee[we]&&(Yr[we]=ee[we]);return this},v.__private__.setDocumentProperty=function(ee,we){if(Object.keys(Yr).indexOf(ee)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Yr[ee]=we};var tr,tn,fr,Ki,Er,wt={},sr={},ur=[],Yt={},Kn={},Fr={},Gr={},Sr=null,Kr=0,_r=[],On=new z7(v),Qi=t.hotfixes||[],Ta={},vi={},$a=[],vr=function ee(we,Re,We,et,Ct,Lt){if(!(this instanceof ee))return new ee(we,Re,We,et,Ct,Lt);isNaN(we)&&(we=1),isNaN(Re)&&(Re=0),isNaN(We)&&(We=0),isNaN(et)&&(et=1),isNaN(Ct)&&(Ct=0),isNaN(Lt)&&(Lt=0),this._matrix=[we,Re,We,et,Ct,Lt]};Object.defineProperty(vr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(vr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(vr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(vr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(vr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(vr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(vr.prototype,"a",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(vr.prototype,"b",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(vr.prototype,"c",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(vr.prototype,"d",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(vr.prototype,"e",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(vr.prototype,"f",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(vr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vr.prototype.join=function(ee){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(ee)},vr.prototype.multiply=function(ee){var we=ee.sx*this.sx+ee.shy*this.shx,Re=ee.sx*this.shy+ee.shy*this.sy,We=ee.shx*this.sx+ee.sy*this.shx,et=ee.shx*this.shy+ee.sy*this.sy,Ct=ee.tx*this.sx+ee.ty*this.shx+this.tx,Lt=ee.tx*this.shy+ee.ty*this.sy+this.ty;return new vr(we,Re,We,et,Ct,Lt)},vr.prototype.decompose=function(){var ee=this.sx,we=this.shy,Re=this.shx,We=this.sy,et=this.tx,Ct=this.ty,Lt=Math.sqrt(ee*ee+we*we),ar=(ee/=Lt)*Re+(we/=Lt)*We;Re-=ee*ar,We-=we*ar;var Gt=Math.sqrt(Re*Re+We*We);return ar/=Gt,ee*(We/=Gt)<we*(Re/=Gt)&&(ee=-ee,we=-we,ar=-ar,Lt=-Lt),{scale:new vr(Lt,0,0,Gt,0,0),translate:new vr(1,0,0,1,et,Ct),rotate:new vr(ee,we,-we,ee,0,0),skew:new vr(1,0,ar,1,0,0)}},vr.prototype.toString=function(ee){return this.join(" ")},vr.prototype.inversed=function(){var ee=this.sx,we=this.shy,Re=this.shx,We=this.sy,et=this.tx,Ct=this.ty,Lt=1/(ee*We-we*Re),ar=We*Lt,Gt=-we*Lt,Ur=-Re*Lt,lr=ee*Lt;return new vr(ar,Gt,Ur,lr,-ar*et-Ur*Ct,-Gt*et-lr*Ct)},vr.prototype.applyToPoint=function(ee){var we=ee.x*this.sx+ee.y*this.shx+this.tx,Re=ee.x*this.shy+ee.y*this.sy+this.ty;return new ji(we,Re)},vr.prototype.applyToRectangle=function(ee){var we=this.applyToPoint(ee),Re=this.applyToPoint(new ji(ee.x+ee.w,ee.y+ee.h));return new Yo(we.x,we.y,Re.x-we.x,Re.y-we.y)},vr.prototype.clone=function(){var ee=this.sx,we=this.shy,Re=this.shx,We=this.sy,et=this.tx,Ct=this.ty;return new vr(ee,we,Re,We,et,Ct)},v.Matrix=vr;var Ia=v.matrixMult=function(ee,we){return we.multiply(ee)},ml=new vr(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=ml;var pa=function(ee,we){if(!Kn[ee]){var Re=(we instanceof Ff?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);we.id=Re,Kn[ee]=Re,Yt[Re]=we,On.publish("addPattern",we)}};v.ShadingPattern=Ff,v.TilingPattern=Sp,v.addShadingPattern=function(ee,we){return z("addShadingPattern()"),pa(ee,we),this},v.beginTilingPattern=function(ee){z("beginTilingPattern()"),$l(ee.boundingBox[0],ee.boundingBox[1],ee.boundingBox[2]-ee.boundingBox[0],ee.boundingBox[3]-ee.boundingBox[1],ee.matrix)},v.endTilingPattern=function(ee,we){z("endTilingPattern()"),we.stream=Je[se].join(`
`),pa(ee,we),On.publish("endTilingPattern",we),$a.pop().restore()};var Ds,Xr=v.__private__.newObject=function(){var ee=$t();return Qn(ee,!0),ee},$t=v.__private__.newObjectDeferred=function(){return ge++,be[ge]=function(){return ke},ge},Qn=function(ee,we){return we=typeof we=="boolean"&&we,be[ee]=ke,we&&Oe(ee+" 0 obj"),ee},er=v.__private__.newAdditionalObject=function(){var ee={objId:$t(),content:""};return He.push(ee),ee},Yi=$t(),Yn=$t(),vn=v.__private__.decodeColorString=function(ee){var we=ee.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length!==5||we[4]!=="k"&&we[4]!=="K"||(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var Re=parseFloat(we[0]);we=[Re,Re,Re,"r"]}for(var We="#",et=0;et<3;et++)We+=("0"+Math.floor(255*parseFloat(we[et])).toString(16)).slice(-2);return We},Bi=v.__private__.encodeColorString=function(ee){var we;typeof ee=="string"&&(ee={ch1:ee});var Re=ee.ch1,We=ee.ch2,et=ee.ch3,Ct=ee.ch4,Lt=ee.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Re=="string"&&Re.charAt(0)!=="#"){var ar=new YW(Re);if(ar.ok)Re=ar.toHex();else if(!/^\d*\.?\d*$/.test(Re))throw new Error('Invalid color "'+Re+'" passed to jsPDF.encodeColorString.')}if(typeof Re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Re)&&(Re="#"+Re[1]+Re[1]+Re[2]+Re[2]+Re[3]+Re[3]),typeof Re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Re)){var Gt=parseInt(Re.substr(1),16);Re=Gt>>16&255,We=Gt>>8&255,et=255&Gt}if(We===void 0||Ct===void 0&&Re===We&&We===et)we=typeof Re=="string"?Re+" "+Lt[0]:ee.precision===2?ne(Re/255)+" "+Lt[0]:Z(Re/255)+" "+Lt[0];else if(Ct===void 0||zi(Ct)==="object"){if(Ct&&!isNaN(Ct.a)&&Ct.a===0)return["1.","1.","1.",Lt[1]].join(" ");we=typeof Re=="string"?[Re,We,et,Lt[1]].join(" "):ee.precision===2?[ne(Re/255),ne(We/255),ne(et/255),Lt[1]].join(" "):[Z(Re/255),Z(We/255),Z(et/255),Lt[1]].join(" ")}else we=typeof Re=="string"?[Re,We,et,Ct,Lt[2]].join(" "):ee.precision===2?[ne(Re),ne(We),ne(et),ne(Ct),Lt[2]].join(" "):[Z(Re),Z(We),Z(et),Z(Ct),Lt[2]].join(" ");return we},Zi=v.__private__.getFilters=function(){return o},cs=v.__private__.putStream=function(ee){var we=(ee=ee||{}).data||"",Re=ee.filters||Zi(),We=ee.alreadyAppliedFilters||[],et=ee.addLength1||!1,Ct=we.length,Lt=ee.objectId,ar=function(xa){return xa};if(f!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ar=di.encryptor(Lt,0));var Gt={};Re===!0&&(Re=["FlateEncode"]);var Ur=ee.additionalKeyValues||[],lr=(Gt=Br.API.processDataByFilters!==void 0?Br.API.processDataByFilters(we,Re):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(We)?We.join(" "):We.toString());if(Gt.data.length!==0&&(Ur.push({key:"Length",value:Gt.data.length}),et===!0&&Ur.push({key:"Length1",value:Ct})),lr.length!=0)if(lr.split("/").length-1==1)Ur.push({key:"Filter",value:lr});else{Ur.push({key:"Filter",value:"["+lr+"]"});for(var Sn=0;Sn<Ur.length;Sn+=1)if(Ur[Sn].key==="DecodeParms"){for(var ei=[],Zr=0;Zr<Gt.reverseChain.split("/").length-1;Zr+=1)ei.push("null");ei.push(Ur[Sn].value),Ur[Sn].value="["+ei.join(" ")+"]"}}Oe("<<");for(var Xt=0;Xt<Ur.length;Xt++)Oe("/"+Ur[Xt].key+" "+Ur[Xt].value);Oe(">>"),Gt.data.length!==0&&(Oe("stream"),Oe(ar(Gt.data)),Oe("endstream"))},ds=v.__private__.putPage=function(ee){var we=ee.number,Re=ee.data,We=ee.objId,et=ee.contentsObjId;Qn(We,!0),Oe("<</Type /Page"),Oe("/Parent "+ee.rootDictionaryObjId+" 0 R"),Oe("/Resources "+ee.resourceDictionaryObjId+" 0 R"),Oe("/MediaBox ["+parseFloat(J(ee.mediaBox.bottomLeftX))+" "+parseFloat(J(ee.mediaBox.bottomLeftY))+" "+J(ee.mediaBox.topRightX)+" "+J(ee.mediaBox.topRightY)+"]"),ee.cropBox!==null&&Oe("/CropBox ["+J(ee.cropBox.bottomLeftX)+" "+J(ee.cropBox.bottomLeftY)+" "+J(ee.cropBox.topRightX)+" "+J(ee.cropBox.topRightY)+"]"),ee.bleedBox!==null&&Oe("/BleedBox ["+J(ee.bleedBox.bottomLeftX)+" "+J(ee.bleedBox.bottomLeftY)+" "+J(ee.bleedBox.topRightX)+" "+J(ee.bleedBox.topRightY)+"]"),ee.trimBox!==null&&Oe("/TrimBox ["+J(ee.trimBox.bottomLeftX)+" "+J(ee.trimBox.bottomLeftY)+" "+J(ee.trimBox.topRightX)+" "+J(ee.trimBox.topRightY)+"]"),ee.artBox!==null&&Oe("/ArtBox ["+J(ee.artBox.bottomLeftX)+" "+J(ee.artBox.bottomLeftY)+" "+J(ee.artBox.topRightX)+" "+J(ee.artBox.topRightY)+"]"),typeof ee.userUnit=="number"&&ee.userUnit!==1&&Oe("/UserUnit "+ee.userUnit),On.publish("putPage",{objId:We,pageContext:_r[we],pageNumber:we,page:Re}),Oe("/Contents "+et+" 0 R"),Oe(">>"),Oe("endobj");var Ct=Re.join(`
`);return M===D&&(Ct+=`
Q`),Qn(et,!0),cs({data:Ct,filters:Zi(),objectId:et}),Oe("endobj"),We},Vo=v.__private__.putPages=function(){var ee,we,Re=[];for(ee=1;ee<=Kr;ee++)_r[ee].objId=$t(),_r[ee].contentsObjId=$t();for(ee=1;ee<=Kr;ee++)Re.push(ds({number:ee,data:Je[ee],objId:_r[ee].objId,contentsObjId:_r[ee].contentsObjId,mediaBox:_r[ee].mediaBox,cropBox:_r[ee].cropBox,bleedBox:_r[ee].bleedBox,trimBox:_r[ee].trimBox,artBox:_r[ee].artBox,userUnit:_r[ee].userUnit,rootDictionaryObjId:Yi,resourceDictionaryObjId:Yn}));Qn(Yi,!0),Oe("<</Type /Pages");var We="/Kids [";for(we=0;we<Kr;we++)We+=Re[we]+" 0 R ";Oe(We+"]"),Oe("/Count "+Kr),Oe(">>"),Oe("endobj"),On.publish("postPutPages")},$o=function(ee){On.publish("putFont",{font:ee,out:Oe,newObject:Xr,putStream:cs}),ee.isAlreadyPutted!==!0&&(ee.objectNumber=Xr(),Oe("<<"),Oe("/Type /Font"),Oe("/BaseFont /"+xp(ee.postScriptName)),Oe("/Subtype /Type1"),typeof ee.encoding=="string"&&Oe("/Encoding /"+ee.encoding),Oe("/FirstChar 32"),Oe("/LastChar 255"),Oe(">>"),Oe("endobj"))},Ga=function(ee){ee.objectNumber=Xr();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[J(ee.x),J(ee.y),J(ee.x+ee.width),J(ee.y+ee.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"});var Re=ee.pages[1].join(`
`);cs({data:Re,additionalKeyValues:we,objectId:ee.objectNumber}),Oe("endobj")},fi=function(ee,we){we||(we=21);var Re=Xr(),We=(function(Lt,ar){var Gt,Ur=[],lr=1/(ar-1);for(Gt=0;Gt<1;Gt+=lr)Ur.push(Gt);if(Ur.push(1),Lt[0].offset!=0){var Sn={offset:0,color:Lt[0].color};Lt.unshift(Sn)}if(Lt[Lt.length-1].offset!=1){var ei={offset:1,color:Lt[Lt.length-1].color};Lt.push(ei)}for(var Zr="",Xt=0,xa=0;xa<Ur.length;xa++){for(Gt=Ur[xa];Gt>Lt[Xt+1].offset;)Xt++;var rn=Lt[Xt].offset,Ei=(Gt-rn)/(Lt[Xt+1].offset-rn),es=Lt[Xt].color,ts=Lt[Xt+1].color;Zr+=oe(Math.round((1-Ei)*es[0]+Ei*ts[0]).toString(16))+oe(Math.round((1-Ei)*es[1]+Ei*ts[1]).toString(16))+oe(Math.round((1-Ei)*es[2]+Ei*ts[2]).toString(16))}return Zr.trim()})(ee.colors,we),et=[];et.push({key:"FunctionType",value:"0"}),et.push({key:"Domain",value:"[0.0 1.0]"}),et.push({key:"Size",value:"["+we+"]"}),et.push({key:"BitsPerSample",value:"8"}),et.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),et.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),cs({data:We,additionalKeyValues:et,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Re}),Oe("endobj"),ee.objectNumber=Xr(),Oe("<< /ShadingType "+ee.type),Oe("/ColorSpace /DeviceRGB");var Ct="/Coords ["+J(parseFloat(ee.coords[0]))+" "+J(parseFloat(ee.coords[1]))+" ";ee.type===2?Ct+=J(parseFloat(ee.coords[2]))+" "+J(parseFloat(ee.coords[3])):Ct+=J(parseFloat(ee.coords[2]))+" "+J(parseFloat(ee.coords[3]))+" "+J(parseFloat(ee.coords[4]))+" "+J(parseFloat(ee.coords[5])),Oe(Ct+="]"),ee.matrix&&Oe("/Matrix ["+ee.matrix.toString()+"]"),Oe("/Function "+Re+" 0 R"),Oe("/Extend [true true]"),Oe(">>"),Oe("endobj")},kn=function(ee,we){var Re=$t(),We=Xr();we.push({resourcesOid:Re,objectOid:We}),ee.objectNumber=We;var et=[];et.push({key:"Type",value:"/Pattern"}),et.push({key:"PatternType",value:"1"}),et.push({key:"PaintType",value:"1"}),et.push({key:"TilingType",value:"1"}),et.push({key:"BBox",value:"["+ee.boundingBox.map(J).join(" ")+"]"}),et.push({key:"XStep",value:J(ee.xStep)}),et.push({key:"YStep",value:J(ee.yStep)}),et.push({key:"Resources",value:Re+" 0 R"}),ee.matrix&&et.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"}),cs({data:ee.stream,additionalKeyValues:et,objectId:ee.objectNumber}),Oe("endobj")},Go=function(ee){for(var we in ee.objectNumber=Xr(),Oe("<<"),ee)switch(we){case"opacity":Oe("/ca "+ne(ee[we]));break;case"stroke-opacity":Oe("/CA "+ne(ee[we]))}Oe(">>"),Oe("endobj")},Ka=function(ee){Qn(ee.resourcesOid,!0),Oe("<<"),Oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var we in Oe("/Font <<"),wt)wt.hasOwnProperty(we)&&(p===!1||p===!0&&x.hasOwnProperty(we))&&Oe("/"+we+" "+wt[we].objectNumber+" 0 R");Oe(">>")})(),(function(){if(Object.keys(Yt).length>0){for(var we in Oe("/Shading <<"),Yt)Yt.hasOwnProperty(we)&&Yt[we]instanceof Ff&&Yt[we].objectNumber>=0&&Oe("/"+we+" "+Yt[we].objectNumber+" 0 R");On.publish("putShadingPatternDict"),Oe(">>")}})(),(function(we){if(Object.keys(Yt).length>0){for(var Re in Oe("/Pattern <<"),Yt)Yt.hasOwnProperty(Re)&&Yt[Re]instanceof v.TilingPattern&&Yt[Re].objectNumber>=0&&Yt[Re].objectNumber<we&&Oe("/"+Re+" "+Yt[Re].objectNumber+" 0 R");On.publish("putTilingPatternDict"),Oe(">>")}})(ee.objectOid),(function(){if(Object.keys(Fr).length>0){var we;for(we in Oe("/ExtGState <<"),Fr)Fr.hasOwnProperty(we)&&Fr[we].objectNumber>=0&&Oe("/"+we+" "+Fr[we].objectNumber+" 0 R");On.publish("putGStateDict"),Oe(">>")}})(),(function(){for(var we in Oe("/XObject <<"),Ta)Ta.hasOwnProperty(we)&&Ta[we].objectNumber>=0&&Oe("/"+we+" "+Ta[we].objectNumber+" 0 R");On.publish("putXobjectDict"),Oe(">>")})(),Oe(">>"),Oe("endobj")},Oi=function(ee){sr[ee.fontName]=sr[ee.fontName]||{},sr[ee.fontName][ee.fontStyle]=ee.id},Rt=function(ee,we,Re,We,et){var Ct={id:"F"+(Object.keys(wt).length+1).toString(10),postScriptName:ee,fontName:we,fontStyle:Re,encoding:We,isStandardFont:et||!1,metadata:{}};return On.publish("addFont",{font:Ct,instance:this}),wt[Ct.id]=Ct,Oi(Ct),Ct.id},io=v.__private__.pdfEscape=v.pdfEscape=function(ee,we){return(function(Re,We){var et,Ct,Lt,ar,Gt,Ur,lr,Sn,ei;if(Lt=(We=We||{}).sourceEncoding||"Unicode",Gt=We.outputEncoding,(We.autoencode||Gt)&&wt[tr].metadata&&wt[tr].metadata[Lt]&&wt[tr].metadata[Lt].encoding&&(ar=wt[tr].metadata[Lt].encoding,!Gt&&wt[tr].encoding&&(Gt=wt[tr].encoding),!Gt&&ar.codePages&&(Gt=ar.codePages[0]),typeof Gt=="string"&&(Gt=ar[Gt]),Gt)){for(lr=!1,Ur=[],et=0,Ct=Re.length;et<Ct;et++)(Sn=Gt[Re.charCodeAt(et)])?Ur.push(String.fromCharCode(Sn)):Ur.push(Re[et]),Ur[et].charCodeAt(0)>>8&&(lr=!0);Re=Ur.join("")}for(et=Re.length;lr===void 0&&et!==0;)Re.charCodeAt(et-1)>>8&&(lr=!0),et--;if(!lr)return Re;for(Ur=We.noBOM?[]:[254,255],et=0,Ct=Re.length;et<Ct;et++){if((ei=(Sn=Re.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+Re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ur.push(ei),Ur.push(Sn-(ei<<8))}return String.fromCharCode.apply(void 0,Ur)})(ee,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zn=v.__private__.beginPage=function(ee){Je[++Kr]=[],_r[Kr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ee[0]),topRightY:Number(ee[1])}},_n(Kr),Pt(Je[se])},us=function(ee,we){var Re,We,et;switch(n=we||n,typeof ee=="string"&&(Re=T(ee.toLowerCase()),Array.isArray(Re)&&(We=Re[0],et=Re[1])),Array.isArray(ee)&&(We=ee[0]*tn,et=ee[1]*tn),isNaN(We)&&(We=a[0],et=a[1]),(We>14400||et>14400)&&(ta.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),We=Math.min(14400,We),et=Math.min(14400,et)),a=[We,et],n.substr(0,1)){case"l":et>We&&(a=[et,We]);break;case"p":We>et&&(a=[et,We])}zn(a),Ft(Pl),Oe(fs),yc!==0&&Oe(yc+" J"),ki!==0&&Oe(ki+" j"),On.publish("addPage",{pageNumber:Kr})},kl=function(ee){ee>0&&ee<=Kr&&(Je.splice(ee,1),_r.splice(ee,1),Kr--,se>Kr&&(se=Kr),this.setPage(se))},_n=function(ee){ee>0&&ee<=Kr&&(se=ee)},An=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Je.length-1},on=function(ee,we,Re){var We,et=void 0;return Re=Re||{},ee=ee!==void 0?ee:wt[tr].fontName,we=we!==void 0?we:wt[tr].fontStyle,We=ee.toLowerCase(),sr[We]!==void 0&&sr[We][we]!==void 0?et=sr[We][we]:sr[ee]!==void 0&&sr[ee][we]!==void 0?et=sr[ee][we]:Re.disableWarning===!1&&ta.warn("Unable to look up font label for font '"+ee+"', '"+we+"'. Refer to getFontList() for available fonts."),et||Re.noFallback||(et=sr.times[we])==null&&(et=sr.times.normal),et},Jr=v.__private__.putInfo=function(){var ee=Xr(),we=function(We){return We};for(var Re in f!==null&&(we=di.encryptor(ee,0)),Oe("<<"),Oe("/Producer ("+io(we("jsPDF "+Br.version))+")"),Yr)Yr.hasOwnProperty(Re)&&Yr[Re]&&Oe("/"+Re.substr(0,1).toUpperCase()+Re.substr(1)+" ("+io(we(Yr[Re]))+")");Oe("/CreationDate ("+io(we(ce))+")"),Oe(">>"),Oe("endobj")},Rn=v.__private__.putCatalog=function(ee){var we=(ee=ee||{}).rootDictionaryObjId||Yi;switch(Xr(),Oe("<<"),Oe("/Type /Catalog"),Oe("/Pages "+we+" 0 R"),rr||(rr="fullwidth"),rr){case"fullwidth":Oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Oe("/OpenAction [3 0 R /Fit]");break;case"original":Oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Re=""+rr;Re.substr(Re.length-1)==="%"&&(rr=parseInt(rr)/100),typeof rr=="number"&&Oe("/OpenAction [3 0 R /XYZ null null "+ne(rr)+"]")}switch(yn||(yn="continuous"),yn){case"continuous":Oe("/PageLayout /OneColumn");break;case"single":Oe("/PageLayout /SinglePage");break;case"two":case"twoleft":Oe("/PageLayout /TwoColumnLeft");break;case"tworight":Oe("/PageLayout /TwoColumnRight")}hr&&Oe("/PageMode /"+hr),On.publish("putCatalog"),Oe(">>"),Oe("endobj")},hs=v.__private__.putTrailer=function(){Oe("trailer"),Oe("<<"),Oe("/Size "+(ge+1)),Oe("/Root "+ge+" 0 R"),Oe("/Info "+(ge-1)+" 0 R"),f!==null&&Oe("/Encrypt "+di.oid+" 0 R"),Oe("/ID [ <"+Q+"> <"+Q+"> ]"),Oe(">>")},Mr=v.__private__.putHeader=function(){Oe("%PDF-"+w),Oe("%")},Qa=v.__private__.putXRef=function(){var ee="0000000000";Oe("xref"),Oe("0 "+(ge+1)),Oe("0000000000 65535 f ");for(var we=1;we<=ge;we++)typeof be[we]=="function"?Oe((ee+be[we]()).slice(-10)+" 00000 n "):be[we]!==void 0?Oe((ee+be[we]).slice(-10)+" 00000 n "):Oe("0000000000 00000 n ")},Ao=v.__private__.buildDocument=function(){var ee;ge=0,ke=0,Le=[],be=[],He=[],Yi=$t(),Yn=$t(),Pt(Le),On.publish("buildDocument"),Mr(),Vo(),(function(){On.publish("putAdditionalObjects");for(var Re=0;Re<He.length;Re++){var We=He[Re];Qn(We.objId,!0),Oe(We.content),Oe("endobj")}On.publish("postPutAdditionalObjects")})(),ee=[],(function(){for(var Re in wt)wt.hasOwnProperty(Re)&&(p===!1||p===!0&&x.hasOwnProperty(Re))&&$o(wt[Re])})(),(function(){var Re;for(Re in Fr)Fr.hasOwnProperty(Re)&&Go(Fr[Re])})(),(function(){for(var Re in Ta)Ta.hasOwnProperty(Re)&&Ga(Ta[Re])})(),(function(Re){var We;for(We in Yt)Yt.hasOwnProperty(We)&&(Yt[We]instanceof Ff?fi(Yt[We]):Yt[We]instanceof Sp&&kn(Yt[We],Re))})(ee),On.publish("putResources"),ee.forEach(Ka),Ka({resourcesOid:Yn,objectOid:Number.MAX_SAFE_INTEGER}),On.publish("postPutResources"),f!==null&&(di.oid=Xr(),Oe("<<"),Oe("/Filter /Standard"),Oe("/V "+di.v),Oe("/R "+di.r),Oe("/U <"+di.toHexString(di.U)+">"),Oe("/O <"+di.toHexString(di.O)+">"),Oe("/P "+di.P),Oe(">>"),Oe("endobj")),Jr(),Rn();var we=ke;return Qa(),hs(),Oe("startxref"),Oe(""+we),Oe("%%EOF"),Pt(Je[se]),Le.join(`
`)},ir=v.__private__.getBlob=function(ee){return new Blob([Wt(ee)],{type:"application/pdf"})},Bn=v.output=v.__private__.output=(Ds=function(ee,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",ee){case void 0:return Ao();case"save":v.save(we.filename);break;case"arraybuffer":return Wt(Ao());case"blob":return ir(Ao());case"bloburi":case"bloburl":if(hn.URL!==void 0&&typeof hn.URL.createObjectURL=="function")return hn.URL&&hn.URL.createObjectURL(ir(Ao()))||void 0;ta.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Re="",We=Ao();try{Re=R7(We)}catch{Re=R7(unescape(encodeURIComponent(We)))}return"data:application/pdf;filename="+we.filename+";base64,"+Re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(hn)==="[object Window]"){var et="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(et=we.pdfObjectUrl,Ct="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+et+'"'+Ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",ar=hn.open();return ar!==null&&ar.document.write(Lt),ar}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(hn)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',Ur=hn.open();if(Ur!==null){Ur.document.write(Gt);var lr=this;Ur.document.documentElement.querySelector("#pdfViewer").onload=function(){Ur.document.title=we.filename,Ur.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(lr.output("bloburl"))}}return Ur}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(hn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',ei=hn.open();if(ei!==null&&(ei.document.write(Sn),ei.document.title=we.filename),ei||typeof safari>"u")return ei;break;case"datauri":case"dataurl":return hn.document.location.href=this.output("datauristring",we);default:return null}},Ds.foo=function(){try{return Ds.apply(this,arguments)}catch(Re){var ee=Re.stack||"";~ee.indexOf(" at ")&&(ee=ee.split(" at ")[1]);var we="Error in function "+ee.split(`
`)[0].split("<")[0]+": "+Re.message;if(!hn.console)throw new Error(we);hn.console.error(we,Re),hn.alert&&alert(we)}},Ds.foo.bar=Ds,Ds.foo),Ya=function(ee){return Array.isArray(Qi)===!0&&Qi.indexOf(ee)>-1};switch(i){case"pt":tn=1;break;case"mm":tn=72/25.4;break;case"cm":tn=72/2.54;break;case"in":tn=72;break;case"px":tn=Ya("px_scaling")==1?.75:96/72;break;case"pc":case"em":tn=12;break;case"ex":tn=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);tn=i}var di=null;$(),le();var Or=v.__private__.getPageInfo=v.getPageInfo=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_r[ee].objId,pageNumber:ee,pageContext:_r[ee]}},Xi=v.__private__.getPageInfoByObjId=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in _r)if(_r[we].objId===ee)break;return Or(we)},nt=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:_r[se].objId,pageNumber:se,pageContext:_r[se]}};v.addPage=function(){return us.apply(this,arguments),this},v.setPage=function(){return _n.apply(this,arguments),Pt.call(this,Je[se]),this},v.insertPage=function(ee){return this.addPage(),this.movePage(se,ee),this},v.movePage=function(ee,we){var Re,We;if(ee>we){Re=Je[ee],We=_r[ee];for(var et=ee;et>we;et--)Je[et]=Je[et-1],_r[et]=_r[et-1];Je[we]=Re,_r[we]=We,this.setPage(we)}else if(ee<we){Re=Je[ee],We=_r[ee];for(var Ct=ee;Ct<we;Ct++)Je[Ct]=Je[Ct+1],_r[Ct]=_r[Ct+1];Je[we]=Re,_r[we]=We,this.setPage(we)}return this},v.deletePage=function(){return kl.apply(this,arguments),this},v.__private__.text=v.text=function(ee,we,Re,We,et){var Ct,Lt,ar,Gt,Ur,lr,Sn,ei,Zr,Xt=(We=We||{}).scope||this;if(typeof ee=="number"&&typeof we=="number"&&(typeof Re=="string"||Array.isArray(Re))){var xa=Re;Re=we,we=ee,ee=xa}if(arguments[3]instanceof vr==0?(ar=arguments[4],Gt=arguments[5],zi(Sn=arguments[3])==="object"&&Sn!==null||(typeof ar=="string"&&(Gt=ar,ar=null),typeof Sn=="string"&&(Gt=Sn,Sn=null),typeof Sn=="number"&&(ar=Sn,Sn=null),We={flags:Sn,angle:ar,align:Gt})):(z("The transform parameter of text() with a Matrix value"),Zr=et),isNaN(we)||isNaN(Re)||ee==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ee.length===0)return Xt;var rn,Ei="",es=typeof We.lineHeightFactor=="number"?We.lineHeightFactor:Eo,ts=Xt.internal.scaleFactor;function ka(Tt){return Tt=Tt.split("	").join(Array(We.TabLen||9).join(" ")),io(Tt,Sn)}function Zo(Tt){for(var _t,At=Tt.concat(),Tr=[],qr=At.length;qr--;)typeof(_t=At.shift())=="string"?Tr.push(_t):Array.isArray(Tt)&&(_t.length===1||_t[1]===void 0&&_t[2]===void 0)?Tr.push(_t[0]):Tr.push([_t[0],_t[1],_t[2]]);return Tr}function Da(Tt,_t){var At;if(typeof Tt=="string")At=_t(Tt)[0];else if(Array.isArray(Tt)){for(var Tr,qr,Mn=Tt.concat(),ua=[],Pa=Mn.length;Pa--;)typeof(Tr=Mn.shift())=="string"?ua.push(_t(Tr)[0]):Array.isArray(Tr)&&typeof Tr[0]=="string"&&(qr=_t(Tr[0],Tr[1],Tr[2]),ua.push([qr[0],qr[1],qr[2]]));At=ua}return At}var so=!1,oo=!0;if(typeof ee=="string")so=!0;else if(Array.isArray(ee)){var Kl=ee.concat();Lt=[];for(var Xo,wi=Kl.length;wi--;)(typeof(Xo=Kl.shift())!="string"||Array.isArray(Xo)&&typeof Xo[0]!="string")&&(oo=!1);so=oo}if(so===!1)throw new Error('Type of text must be string or Array. "'+ee+'" is not recognized.');typeof ee=="string"&&(ee=ee.match(/[\r?\n]/)?ee.split(/\r\n|\r|\n/g):[ee]);var pl=yt/Xt.internal.scaleFactor,Ql=pl*(es-1);switch(We.baseline){case"bottom":Re-=Ql;break;case"top":Re+=pl-Ql;break;case"hanging":Re+=pl-2*Ql;break;case"middle":Re+=pl/2-Ql}if((lr=We.maxWidth||0)>0&&(typeof ee=="string"?ee=Xt.splitTextToSize(ee,lr):Object.prototype.toString.call(ee)==="[object Array]"&&(ee=ee.reduce(function(Tt,_t){return Tt.concat(Xt.splitTextToSize(_t,lr))},[]))),Ct={text:ee,x:we,y:Re,options:We,mutex:{pdfEscape:io,activeFontKey:tr,fonts:wt,activeFontSize:yt}},On.publish("preProcessText",Ct),ee=Ct.text,ar=(We=Ct.options).angle,Zr instanceof vr==0&&ar&&typeof ar=="number"){ar*=Math.PI/180,We.rotationDirection===0&&(ar=-ar),M===D&&(ar=-ar);var Jo=Math.cos(ar),gl=Math.sin(ar);Zr=new vr(Jo,gl,-gl,Jo,0,0)}else ar&&ar instanceof vr&&(Zr=ar);M!==D||Zr||(Zr=ml),(Ur=We.charSpace||Ja)!==void 0&&(Ei+=J(ie(Ur))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ei=We.horizontalScale)!==void 0&&(Ei+=J(100*ei)+` Tz
`),We.lang;var qn=-1,rs=We.renderingMode!==void 0?We.renderingMode:We.stroke,ns=Xt.internal.getCurrentPageInfo().pageContext;switch(rs){case 0:case!1:case"fill":qn=0;break;case 1:case!0:case"stroke":qn=1;break;case 2:case"fillThenStroke":qn=2;break;case 3:case"invisible":qn=3;break;case 4:case"fillAndAddForClipping":qn=4;break;case 5:case"strokeAndAddPathForClipping":qn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qn=6;break;case 7:case"addToPathForClipping":qn=7}var Qs=ns.usedRenderingMode!==void 0?ns.usedRenderingMode:-1;qn!==-1?Ei+=qn+` Tr
`:Qs!==-1&&(Ei+=`0 Tr
`),qn!==-1&&(ns.usedRenderingMode=qn),Gt=We.align||"left";var Fi,ps=yt*es,el=Xt.internal.pageSize.getWidth(),Ml=wt[tr];Ur=We.charSpace||Ja,lr=We.maxWidth||0,Sn=Object.assign({autoencode:!0,noBOM:!0},We.flags);var lo=[],da=function(Tt){return Xt.getStringUnitWidth(Tt,{font:Ml,charSpace:Ur,fontSize:yt,doKerning:!1})*yt/ts};if(Object.prototype.toString.call(ee)==="[object Array]"){var Ys;Lt=Zo(ee),Gt!=="left"&&(Fi=Lt.map(da));var _i,is=0;if(Gt==="right"){we-=Fi[0],ee=[],wi=Lt.length;for(var ln=0;ln<wi;ln++)ln===0?(_i=Lr(we),Ys=Tn(Re)):(_i=ie(is-Fi[ln]),Ys=-ps),ee.push([Lt[ln],_i,Ys]),is=Fi[ln]}else if(Gt==="center"){we-=Fi[0]/2,ee=[],wi=Lt.length;for(var Zs=0;Zs<wi;Zs++)Zs===0?(_i=Lr(we),Ys=Tn(Re)):(_i=ie((is-Fi[Zs])/2),Ys=-ps),ee.push([Lt[Zs],_i,Ys]),is=Fi[Zs]}else if(Gt==="left"){ee=[],wi=Lt.length;for(var je=0;je<wi;je++)ee.push(Lt[je])}else if(Gt==="justify"&&Ml.encoding==="Identity-H"){ee=[],wi=Lt.length,lr=lr!==0?lr:el;for(var h=0,g=0;g<wi;g++)if(Ys=g===0?Tn(Re):-ps,_i=g===0?Lr(we):h,g<wi-1){var b=ie((lr-Fi[g])/(Lt[g].split(" ").length-1)),S=Lt[g].split(" ");ee.push([S[0]+" ",_i,Ys]),h=0;for(var A=1;A<S.length;A++){var I=(da(S[A-1]+" "+S[A])-da(S[A]))*ts+b;A==S.length-1?ee.push([S[A],I,0]):ee.push([S[A]+" ",I,0]),h-=I}}else ee.push([Lt[g],_i,Ys]);ee.push(["",h,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ee=[],wi=Lt.length,lr=lr!==0?lr:el,g=0;g<wi;g++){Ys=g===0?Tn(Re):-ps,_i=g===0?Lr(we):0;var R=Lt[g].split(" ").length-1,V=R>0?(lr-Fi[g])/R:0;g<wi-1?lo.push(J(ie(V))):lo.push(0),ee.push([Lt[g],_i,Ys])}}}(typeof We.R2L=="boolean"?We.R2L:xr)===!0&&(ee=Da(ee,function(Tt,_t,At){return[Tt.split("").reverse().join(""),_t,At]})),Ct={text:ee,x:we,y:Re,options:We,mutex:{pdfEscape:io,activeFontKey:tr,fonts:wt,activeFontSize:yt}},On.publish("postProcessText",Ct),ee=Ct.text,rn=Ct.mutex.isHex||!1;var te=wt[tr].encoding;te!=="WinAnsiEncoding"&&te!=="StandardEncoding"||(ee=Da(ee,function(Tt,_t,At){return[ka(Tt),_t,At]})),Lt=Zo(ee),ee=[];for(var ue,ve,Ne,Me=Array.isArray(Lt[0])?1:0,qe="",$e=function(Tt,_t,At){var Tr="";return At instanceof vr?(At=typeof We.angle=="number"?Ia(At,new vr(1,0,0,1,Tt,_t)):Ia(new vr(1,0,0,1,Tt,_t),At),M===D&&(At=Ia(new vr(1,0,0,-1,0,0),At)),Tr=At.join(" ")+` Tm
`):Tr=J(Tt)+" "+J(_t)+` Td
`,Tr},Xe=0;Xe<Lt.length;Xe++){switch(qe="",Me){case 1:Ne=(rn?"<":"(")+Lt[Xe][0]+(rn?">":")"),ue=parseFloat(Lt[Xe][1]),ve=parseFloat(Lt[Xe][2]);break;case 0:Ne=(rn?"<":"(")+Lt[Xe]+(rn?">":")"),ue=Lr(we),ve=Tn(Re)}lo!==void 0&&lo[Xe]!==void 0&&(qe=lo[Xe]+` Tw
`),Xe===0?ee.push(qe+$e(ue,ve,Zr)+Ne):Me===0?ee.push(qe+Ne):Me===1&&ee.push(qe+$e(ue,ve,Zr)+Ne)}ee=Me===0?ee.join(` Tj
T* `):ee.join(` Tj
`),ee+=` Tj
`;var ct=`BT
/`;return ct+=tr+" "+yt+` Tf
`,ct+=J(yt*es)+` TL
`,ct+=mi+`
`,ct+=Ei,ct+=ee,Oe(ct+="ET"),x[tr]=!0,Xt};var Pe=v.__private__.clip=v.clip=function(ee){return Oe(ee==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Pe("evenodd")},v.__private__.discardPath=v.discardPath=function(){return Oe("n"),this};var Ht=v.__private__.isValidStyle=function(ee){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ee)!==-1&&(we=!0),we};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(ee){return Ht(ee)&&(d=ee),this};var ri=v.__private__.getStyle=v.getStyle=function(ee){var we=d;switch(ee){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=ee}return we},la=v.close=function(){return Oe("h"),this};v.stroke=function(){return Oe("S"),this},v.fill=function(ee){return Ps("f",ee),this},v.fillEvenOdd=function(ee){return Ps("f*",ee),this},v.fillStroke=function(ee){return Ps("B",ee),this},v.fillStrokeEvenOdd=function(ee){return Ps("B*",ee),this};var Ps=function(ee,we){zi(we)==="object"?Cr(we,ee):Oe(ee)},Ko=function(ee){ee===null||M===D&&ee===void 0||(ee=ri(ee),Oe(ee))};function ga(ee,we,Re,We,et){var Ct=new Sp(we||this.boundingBox,Re||this.xStep,We||this.yStep,this.gState,et||this.matrix);Ct.stream=this.stream;var Lt=ee+"$$"+this.cloneIndex+++"$$";return pa(Lt,Ct),Ct}var Cr=function(ee,we){var Re=Kn[ee.key],We=Yt[Re];if(We instanceof Ff)Oe("q"),Oe(Jn(we)),We.gState&&v.setGState(We.gState),Oe(ee.matrix.toString()+" cm"),Oe("/"+Re+" sh"),Oe("Q");else if(We instanceof Sp){var et=new vr(1,0,0,-1,0,Rl());ee.matrix&&(et=et.multiply(ee.matrix||ml),Re=ga.call(We,ee.key,ee.boundingBox,ee.xStep,ee.yStep,et).id),Oe("q"),Oe("/Pattern cs"),Oe("/"+Re+" scn"),We.gState&&v.setGState(We.gState),Oe(we),Oe("Q")}},Jn=function(ee){switch(ee){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Dl=v.moveTo=function(ee,we){return Oe(J(ie(ee))+" "+J(me(we))+" m"),this},Uc=v.lineTo=function(ee,we){return Oe(J(ie(ee))+" "+J(me(we))+" l"),this},Oa=v.curveTo=function(ee,we,Re,We,et,Ct){return Oe([J(ie(ee)),J(me(we)),J(ie(Re)),J(me(We)),J(ie(et)),J(me(Ct)),"c"].join(" ")),this};v.__private__.line=v.line=function(ee,we,Re,We,et){if(isNaN(ee)||isNaN(we)||isNaN(Re)||isNaN(We)||!Ht(et))throw new Error("Invalid arguments passed to jsPDF.line");return M===O?this.lines([[Re-ee,We-we]],ee,we,[1,1],et||"S"):this.lines([[Re-ee,We-we]],ee,we,[1,1]).stroke()},v.__private__.lines=v.lines=function(ee,we,Re,We,et,Ct){var Lt,ar,Gt,Ur,lr,Sn,ei,Zr,Xt,xa,rn,Ei;if(typeof ee=="number"&&(Ei=Re,Re=we,we=ee,ee=Ei),We=We||[1,1],Ct=Ct||!1,isNaN(we)||isNaN(Re)||!Array.isArray(ee)||!Array.isArray(We)||!Ht(et)||typeof Ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Dl(we,Re),Lt=We[0],ar=We[1],Ur=ee.length,xa=we,rn=Re,Gt=0;Gt<Ur;Gt++)(lr=ee[Gt]).length===2?(xa=lr[0]*Lt+xa,rn=lr[1]*ar+rn,Uc(xa,rn)):(Sn=lr[0]*Lt+xa,ei=lr[1]*ar+rn,Zr=lr[2]*Lt+xa,Xt=lr[3]*ar+rn,xa=lr[4]*Lt+xa,rn=lr[5]*ar+rn,Oa(Sn,ei,Zr,Xt,xa,rn));return Ct&&la(),Ko(et),this},v.path=function(ee){for(var we=0;we<ee.length;we++){var Re=ee[we],We=Re.c;switch(Re.op){case"m":Dl(We[0],We[1]);break;case"l":Uc(We[0],We[1]);break;case"c":Oa.apply(this,We);break;case"h":la()}}return this},v.__private__.rect=v.rect=function(ee,we,Re,We,et){if(isNaN(ee)||isNaN(we)||isNaN(Re)||isNaN(We)||!Ht(et))throw new Error("Invalid arguments passed to jsPDF.rect");return M===O&&(We=-We),Oe([J(ie(ee)),J(me(we)),J(ie(Re)),J(ie(We)),"re"].join(" ")),Ko(et),this},v.__private__.triangle=v.triangle=function(ee,we,Re,We,et,Ct,Lt){if(isNaN(ee)||isNaN(we)||isNaN(Re)||isNaN(We)||isNaN(et)||isNaN(Ct)||!Ht(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Re-ee,We-we],[et-Re,Ct-We],[ee-et,we-Ct]],ee,we,[1,1],Lt,!0),this},v.__private__.roundedRect=v.roundedRect=function(ee,we,Re,We,et,Ct,Lt){if(isNaN(ee)||isNaN(we)||isNaN(Re)||isNaN(We)||isNaN(et)||isNaN(Ct)||!Ht(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ar=4/3*(Math.SQRT2-1);return et=Math.min(et,.5*Re),Ct=Math.min(Ct,.5*We),this.lines([[Re-2*et,0],[et*ar,0,et,Ct-Ct*ar,et,Ct],[0,We-2*Ct],[0,Ct*ar,-et*ar,Ct,-et,Ct],[2*et-Re,0],[-et*ar,0,-et,-Ct*ar,-et,-Ct],[0,2*Ct-We],[0,-Ct*ar,et*ar,-Ct,et,-Ct]],ee+et,we,[1,1],Lt,!0),this},v.__private__.ellipse=v.ellipse=function(ee,we,Re,We,et){if(isNaN(ee)||isNaN(we)||isNaN(Re)||isNaN(We)||!Ht(et))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ct=4/3*(Math.SQRT2-1)*Re,Lt=4/3*(Math.SQRT2-1)*We;return Dl(ee+Re,we),Oa(ee+Re,we-Lt,ee+Ct,we-We,ee,we-We),Oa(ee-Ct,we-We,ee-Re,we-Lt,ee-Re,we),Oa(ee-Re,we+Lt,ee-Ct,we+We,ee,we+We),Oa(ee+Ct,we+We,ee+Re,we+Lt,ee+Re,we),Ko(et),this},v.__private__.circle=v.circle=function(ee,we,Re,We){if(isNaN(ee)||isNaN(we)||isNaN(Re)||!Ht(We))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ee,we,Re,Re,We)},v.setFont=function(ee,we,Re){return Re&&(we=W(we,Re)),tr=on(ee,we,{disableWarning:!1}),this};var Za=v.__private__.getFont=v.getFont=function(){return wt[on.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var ee,we,Re={};for(ee in sr)if(sr.hasOwnProperty(ee))for(we in Re[ee]=[],sr[ee])sr[ee].hasOwnProperty(we)&&Re[ee].push(we);return Re},v.addFont=function(ee,we,Re,We,et){var Ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ct.indexOf(arguments[3])!==-1?et=arguments[3]:arguments[3]&&Ct.indexOf(arguments[3])==-1&&(Re=W(Re,We)),Rt.call(this,ee,we,Re,et=et||"Identity-H")};var Eo,Pl=t.lineWidth||.200025,bi=v.__private__.getLineWidth=v.getLineWidth=function(){return Pl},Ft=v.__private__.setLineWidth=v.setLineWidth=function(ee){return Pl=ee,Oe(J(ie(ee))+" w"),this};v.__private__.setLineDash=Br.API.setLineDash=Br.API.setLineDashPattern=function(ee,we){if(ee=ee||[],we=we||0,isNaN(we)||!Array.isArray(ee))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ee=ee.map(function(Re){return J(ie(Re))}).join(" "),we=J(ie(we)),Oe("["+ee+"] "+we+" d"),this};var ca=v.__private__.getLineHeight=v.getLineHeight=function(){return yt*Eo};v.__private__.getLineHeight=v.getLineHeight=function(){return yt*Eo};var Zt=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(ee){return typeof(ee=ee||1.15)=="number"&&(Eo=ee),this},hd=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Eo};Zt(t.lineHeight);var Lr=v.__private__.getHorizontalCoordinate=function(ee){return ie(ee)},Tn=v.__private__.getVerticalCoordinate=function(ee){return M===D?ee:_r[se].mediaBox.topRightY-_r[se].mediaBox.bottomLeftY-ie(ee)},gc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(ee){return J(Lr(ee))},Rs=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(ee){return J(Tn(ee))},fs=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return vn(fs)},v.__private__.setStrokeColor=v.setDrawColor=function(ee,we,Re,We){return fs=Bi({ch1:ee,ch2:we,ch3:Re,ch4:We,pdfColorType:"draw",precision:2}),Oe(fs),this};var Xa=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return vn(Xa)},v.__private__.setFillColor=v.setFillColor=function(ee,we,Re,We){return Xa=Bi({ch1:ee,ch2:we,ch3:Re,ch4:We,pdfColorType:"fill",precision:2}),Oe(Xa),this};var mi=t.textColor||"0 g",Ks=v.__private__.getTextColor=v.getTextColor=function(){return vn(mi)};v.__private__.setTextColor=v.setTextColor=function(ee,we,Re,We){return mi=Bi({ch1:ee,ch2:we,ch3:Re,ch4:We,pdfColorType:"text",precision:3}),this};var Ja=t.charSpace,Qo=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Ja||0)};v.__private__.setCharSpace=v.setCharSpace=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ja=ee,this};var yc=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(ee){var we=v.CapJoinStyles[ee];if(we===void 0)throw new Error("Line cap style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yc=we,Oe(we+" J"),this};var ki=0;v.__private__.setLineJoin=v.setLineJoin=function(ee){var we=v.CapJoinStyles[ee];if(we===void 0)throw new Error("Line join style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ki=we,Oe(we+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(ee){if(ee=ee||0,isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Oe(J(ie(ee))+" M"),this},v.GState=qb,v.setGState=function(ee){(ee=typeof ee=="string"?Fr[Gr[ee]]:ms(null,ee)).equals(Sr)||(Oe("/"+ee.id+" gs"),Sr=ee)};var ms=function(ee,we){if(!ee||!Gr[ee]){var Re=!1;for(var We in Fr)if(Fr.hasOwnProperty(We)&&Fr[We].equals(we)){Re=!0;break}if(Re)we=Fr[We];else{var et="GS"+(Object.keys(Fr).length+1).toString(10);Fr[et]=we,we.id=et}return ee&&(Gr[ee]=we.id),On.publish("addGState",we),we}};v.addGState=function(ee,we){return ms(ee,we),this},v.saveGraphicsState=function(){return Oe("q"),ur.push({key:tr,size:yt,color:mi}),this},v.restoreGraphicsState=function(){Oe("Q");var ee=ur.pop();return tr=ee.key,yt=ee.size,mi=ee.color,Sr=null,this},v.setCurrentTransformationMatrix=function(ee){return Oe(ee.toString()+" cm"),this},v.comment=function(ee){return Oe("#"+ee),this};var ji=function(ee,we){var Re=ee||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Re},set:function(Ct){isNaN(Ct)||(Re=parseFloat(Ct))}});var We=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return We},set:function(Ct){isNaN(Ct)||(We=parseFloat(Ct))}});var et="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return et},set:function(Ct){et=Ct.toString()}}),this},Yo=function(ee,we,Re,We){ji.call(this,ee,we),this.type="rect";var et=Re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return et},set:function(Lt){isNaN(Lt)||(et=parseFloat(Lt))}});var Ct=We||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ct},set:function(Lt){isNaN(Lt)||(Ct=parseFloat(Lt))}}),this},mn=function(){this.page=Kr,this.currentPage=se,this.pages=Je.slice(0),this.pagesContext=_r.slice(0),this.x=fr,this.y=Ki,this.matrix=Er,this.width=ao(se),this.height=Fn(se),this.outputDestination=vt,this.id="",this.objectNumber=-1};mn.prototype.restore=function(){Kr=this.page,se=this.currentPage,_r=this.pagesContext,Je=this.pages,fr=this.x,Ki=this.y,Er=this.matrix,Gl(se,this.width),_o(se,this.height),vt=this.outputDestination};var $l=function(ee,we,Re,We,et){$a.push(new mn),Kr=se=0,Je=[],fr=ee,Ki=we,Er=et,zn([Re,We])};for(var ya in v.beginFormObject=function(ee,we,Re,We,et){return $l(ee,we,Re,We,et),this},v.endFormObject=function(ee){return(function(we){if(vi[we])$a.pop().restore();else{var Re=new mn,We="Xo"+(Object.keys(Ta).length+1).toString(10);Re.id=We,vi[we]=We,Ta[We]=Re,On.publish("addFormObject",Re),$a.pop().restore()}})(ee),this},v.doFormObject=function(ee,we){var Re=Ta[vi[ee]];return Oe("q"),Oe(we.toString()+" cm"),Oe("/"+Re.id+" Do"),Oe("Q"),this},v.getFormObject=function(ee){var we=Ta[vi[ee]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},v.save=function(ee,we){return ee=ee||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(Lf(ir(Ao()),ee),typeof Lf.unload=="function"&&hn.setTimeout&&setTimeout(Lf.unload,911),this):new Promise(function(Re,We){try{var et=Lf(ir(Ao()),ee);typeof Lf.unload=="function"&&hn.setTimeout&&setTimeout(Lf.unload,911),Re(et)}catch(Ct){We(Ct.message)}})},Br.API)Br.API.hasOwnProperty(ya)&&(ya==="events"&&Br.API.events.length?(function(ee,we){var Re,We,et;for(et=we.length-1;et!==-1;et--)Re=we[et][0],We=we[et][1],ee.subscribe.apply(ee,[Re].concat(typeof We=="function"?[We]:We))})(On,Br.API.events):v[ya]=Br.API[ya]);function ao(ee){return _r[ee].mediaBox.topRightX-_r[ee].mediaBox.bottomLeftX}function Gl(ee,we){_r[ee].mediaBox.topRightX=we+_r[ee].mediaBox.bottomLeftX}function Fn(ee){return _r[ee].mediaBox.topRightY-_r[ee].mediaBox.bottomLeftY}function _o(ee,we){_r[ee].mediaBox.topRightY=we+_r[ee].mediaBox.bottomLeftY}var To=v.getPageWidth=function(ee){return ao(ee=ee||se)/tn},Io=v.setPageWidth=function(ee,we){Gl(ee,we*tn)},Rl=v.getPageHeight=function(ee){return Fn(ee=ee||se)/tn},pt=v.setPageHeight=function(ee,we){_o(ee,we*tn)};return v.internal={pdfEscape:io,getStyle:ri,getFont:Za,getFontSize:St,getCharSpace:Qo,getTextColor:Ks,getLineHeight:ca,getLineHeightFactor:hd,getLineWidth:bi,write:at,getHorizontalCoordinate:Lr,getVerticalCoordinate:Tn,getCoordinateString:gc,getVerticalCoordinateString:Rs,collections:{},newObject:Xr,newAdditionalObject:er,newObjectDeferred:$t,newObjectDeferredBegin:Qn,getFilters:Zi,putStream:cs,events:On,scaleFactor:tn,pageSize:{getWidth:function(){return To(se)},setWidth:function(ee){Io(se,ee)},getHeight:function(){return Rl(se)},setHeight:function(ee){pt(se,ee)}},encryptionOptions:f,encryption:di,getEncryptor:function(ee){return f!==null?di.encryptor(ee,0):function(we){return we}},output:Bn,getNumberOfPages:An,get pages(){return Je},out:Oe,f2:ne,f3:Z,getPageInfo:Or,getPageInfoByObjId:Xi,getCurrentPageInfo:nt,getPDFVersion:C,Point:ji,Rectangle:Yo,Matrix:vr,hasHotfix:Ya},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return To(se)},set:function(ee){Io(se,ee)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Rl(se)},set:function(ee){pt(se,ee)},enumerable:!0,configurable:!0}),(function(ee){for(var we=0,Re=Bt.length;we<Re;we++){var We=Rt.call(this,ee[we][0],ee[we][1],ee[we][2],Bt[we][3],!0);p===!1&&(x[We]=!0);var et=ee[we][0].split("-");Oi({id:We,fontName:et[0],fontStyle:et[1]||""})}On.publish("addFonts",{fonts:wt,dictionary:sr})}).call(v,Bt),tr="F1",us(a,n),On.publish("initialized"),v}yp.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},yp.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yp.prototype.hexToBytes=function(t){for(var r=[],n=0;n<t.length;n+=2)r.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return r.join("")},yp.prototype.processOwnerPassword=function(t,r){return dA(cA(r).substr(0,5),t)},yp.prototype.encryptor=function(t,r){var n=cA(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(i){return dA(n,i)}},qb.prototype.equals=function(t){var r,n="id,objectNumber,equals";if(!t||zi(t)!==zi(this))return!1;var i=0;for(r in this)if(!(n.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;i++}for(r in t)t.hasOwnProperty(r)&&n.indexOf(r)<0&&i--;return i===0},Br.API={events:[]},Br.version="4.1.0";var Cs=Br.API,t3=1,Tm=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ub=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(r){var n=r.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},wn=function(t){return t.toFixed(2)},Gh=function(t){return t.toFixed(5)};Cs.__acroform__={};var pc=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},B7=function(t){return t*t3},tu=function(t){var r=new eH,n=Ar.internal.getHeight(t)||0,i=Ar.internal.getWidth(t)||0;return r.BBox=[0,0,Number(wn(i)),Number(wn(n))],r},yCe=Cs.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<r},xCe=Cs.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<r)},vCe=Cs.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<r?1:0},Ws=Cs.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return vCe(t,r-1)},Hs=Cs.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yCe(t,r-1)},Vs=Cs.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xCe(t,r-1)},bCe=Cs.__acroform__.calculateCoordinates=function(t,r){var n=r.internal.getHorizontalCoordinate,i=r.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],u={};return u.lowerLeft_X=n(a)||0,u.lowerLeft_Y=i(s+l)||0,u.upperRight_X=n(a+o)||0,u.upperRight_Y=i(s)||0,[Number(wn(u.lowerLeft_X)),Number(wn(u.lowerLeft_Y)),Number(wn(u.upperRight_X)),Number(wn(u.upperRight_Y))]},jCe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],n=t._V||t.DV,i=uA(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+a+" "+wn(i.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC");var s=tu(t);return s.scope=t.scope,s.stream=r.join(`
`),s}},uA=function(t,r){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},a=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");a=t.multiline?a.map(function(ne){return ne.split(`
`)}):a.map(function(ne){return[ne]});var s=n,o=Ar.internal.getHeight(t)||0;o=o<0?-o:o;var l=Ar.internal.getWidth(t)||0;l=l<0?-l:l;var u=function(ne,Z,ie){if(ne+1<a.length){var me=Z+" "+a[ne+1][0];return J1(me,t,ie).width<=l-4}return!1};s++;e:for(;s>0;){r="",s--;var d,f,p=J1("3",t,s).height,x=t.multiline?o-s:(o-p)/2,v=x+=2,w=0,C=0,N=0;if(s<=0){r=`(...) Tj
`,r+="% Width of Text: "+J1(r,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var T="",O=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var M=!1;if(a[D].length!==1&&N!==a[D].length-1){if((p+2)*(O+2)+2>o)continue e;T+=a[D][N],M=!0,C=D,D--}else{T=(T+=a[D][N]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var Y=parseInt(D),q=u(Y,T,s),W=D>=a.length-1;if(q&&!W){T+=" ",N=0;continue}if(q||W){if(W)C=Y;else if(t.multiline&&(p+2)*(O+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(O+2)+2>o)continue e;C=Y}}for(var J="",z=w;z<=C;z++){var G=a[z];if(t.multiline){if(z===C){J+=G[N]+" ",N=(N+1)%G.length;continue}if(z===w){J+=G[G.length-1]+" ";continue}}J+=G[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,f=J1(J,t,s).width,t.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;default:d=2}r+=wn(d)+" "+wn(v)+` Td
`,r+="("+Tm(J)+`) Tj
`,r+=-wn(d)+` 0 Td
`,v=-(s+2),f=0,w=M?C:C+1,O++,T=""}break}return i.text=r,i.fontSize=s,i},J1=function(t,r,n){var i=r.scope.internal.getFont(r.fontName,r.fontStyle),a=r.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:r.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},wCe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},SCe=function(t,r){var n={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(n)},CCe=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(kd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(wCe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");t3=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tH,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s.objId=void 0,s.hasAnnotation&&SCe(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,a){var s=!i;for(var o in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var l=i[o],u=[],d=l.Rect;if(l.Rect&&(l.Rect=bCe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ar.createDefaultAppearanceStream(l),zi(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=jCe(l);u.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var p="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var v=l.appearanceStreamContent[x];if(p+="/"+x+" ",p+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var o in v)if(v.hasOwnProperty(o)){var w=v[o];typeof w=="function"&&(w=w.call(a,l)),p+="/"+o+" "+w+" ",a.internal.acroformPlugin.xForms.indexOf(w)>=0||a.internal.acroformPlugin.xForms.push(w)}}else typeof(w=v)=="function"&&(w=w.call(a,l)),p+="/"+o+" "+w,a.internal.acroformPlugin.xForms.indexOf(w)>=0||a.internal.acroformPlugin.xForms.push(w);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}a.internal.putStream({additionalKeyValues:u,objectId:l.objId}),a.internal.out("endobj")}s&&(function(C,N){for(var T in C)if(C.hasOwnProperty(T)){var O=T,D=C[T];N.internal.newObjectDeferredBegin(D.objId,!0),zi(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete C[O]}})(a.internal.acroformPlugin.xForms,a)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},JW=Cs.__acroform__.arrayToPdfArray=function(t,r,n){var i=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),zi(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)==="/"?a+="/"+Ub(t[s].substr(1)):(r!==void 0&&n&&(i=n.internal.getEncryptor(r)),a+="("+Tm(i(t[s].toString()))+")")}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},dC=function(t,r,n){var i=function(a){return a};return r!==void 0&&n&&(i=n.internal.getEncryptor(r)),(t=t||"").toString(),"("+Tm(i(t))+")"},su=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};su.prototype.toString=function(){return this.objId+" 0 R"},su.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},su.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in r)if(Object.getOwnPropertyDescriptor(this,r[n]).configurable===!1){var i=r[n],a=this[i];a&&(Array.isArray(a)?t.push({key:i,value:JW(a,this.objId,this.scope)}):a instanceof su?(a.scope=this.scope,t.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:i,value:a}))}return t};var eH=function(){su.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};pc(eH,su);var tH=function(){su.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Tm(n(t))+")"}},set:function(n){t=n}})};pc(tH,su);var kd=function t(){su.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');r=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ws(r,3)},set:function(T){T?this.F=Hs(r,3):this.F=Vs(r,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');n=T}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(T){i=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(T){i[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(T){i[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(T){i[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(T){i[3]=T}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Wb)return;s="FieldObject"+t.FieldNum++}var T=function(O){return O};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Tm(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/t3:d},set:function(T){d=T}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(T){f=T}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Wb||this instanceof tm))return dC(p,this.objId,this.scope)},set:function(T){T=T.toString(),p=T}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Bo==0?dC(x,this.objId,this.scope):x},set:function(T){T=T.toString(),x=this instanceof Bo==0?T.substr(0,1)==="("?hp(T.substr(1,T.length-2)):hp(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bo==1?hp(x.substr(1,x.length-1)):x},set:function(T){T=T.toString(),x=this instanceof Bo==1?"/"+Ub(T):T}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Bo==0?dC(v,this.objId,this.scope):v},set:function(T){T=T.toString(),v=this instanceof Bo==0?T.substr(0,1)==="("?hp(T.substr(1,T.length-2)):hp(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bo==1?hp(v.substr(1,v.length-1)):v},set:function(T){T=T.toString(),v=this instanceof Bo==1?"/"+Ub(T):T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(T){T=!!T,C=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(T){w=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,1)},set:function(T){T?this.Ff=Hs(this.Ff,1):this.Ff=Vs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,2)},set:function(T){T?this.Ff=Hs(this.Ff,2):this.Ff=Vs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,3)},set:function(T){T?this.Ff=Hs(this.Ff,3):this.Ff=Vs(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');N=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(N){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};pc(kd,su);var Op=function(){kd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return JW(r,this.objId,this.scope)},set:function(n){var i,a;a=[],typeof(i=n)=="string"&&(a=(function(s,o,l){l||(l=1);for(var u,d=[];u=o.exec(s);)d.push(u[l]);return d})(i,/\((.*?)\)/g)),r=a}}),this.getOptions=function(){return r},this.setOptions=function(n){r=n,this.sort&&r.sort()},this.addOption=function(n){n=(n=n||"").toString(),r.push(n),this.sort&&r.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();r.indexOf(n)!==-1&&(r.splice(r.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,18)},set:function(n){n?this.Ff=Hs(this.Ff,18):this.Ff=Vs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Hs(this.Ff,19):this.Ff=Vs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,20)},set:function(n){n?(this.Ff=Hs(this.Ff,20),r.sort()):this.Ff=Vs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,22)},set:function(n){n?this.Ff=Hs(this.Ff,22):this.Ff=Vs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,23)},set:function(n){n?this.Ff=Hs(this.Ff,23):this.Ff=Vs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,27)},set:function(n){n?this.Ff=Hs(this.Ff,27):this.Ff=Vs(this.Ff,27)}}),this.hasAppearanceStream=!1};pc(Op,kd);var kp=function(){Op.call(this),this.fontName="helvetica",this.combo=!1};pc(kp,Op);var Dp=function(){kp.call(this),this.combo=!0};pc(Dp,kp);var Cv=function(){Dp.call(this),this.edit=!0};pc(Cv,Dp);var Bo=function(){kd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,15)},set:function(n){n?this.Ff=Hs(this.Ff,15):this.Ff=Vs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,16)},set:function(n){n?this.Ff=Hs(this.Ff,16):this.Ff=Vs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,17)},set:function(n){n?this.Ff=Hs(this.Ff,17):this.Ff=Vs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,26)},set:function(n){n?this.Ff=Hs(this.Ff,26):this.Ff=Vs(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+Tm(n(r[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){zi(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+Ub(n)}})};pc(Bo,kd);var Nv=function(){Bo.call(this),this.pushButton=!0};pc(Nv,Bo);var Pp=function(){Bo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};pc(Pp,Bo);var Wb=function(){var t,r;kd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(a){r=a}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),i)o.push("/"+s+" ("+Tm(a(i[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){zi(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pc(Wb,kd),Pp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var n=this.Kids[r];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Pp.prototype.createOption=function(t){var r=new Wb;return r.Parent=this,r.optionName=t,this.Kids.push(r),NCe.call(this.scope,r),r};var Av=function(){Bo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ar.CheckBox.createAppearanceStream()};pc(Av,Bo);var tm=function(){kd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,13)},set:function(r){r?this.Ff=Hs(this.Ff,13):this.Ff=Vs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,21)},set:function(r){r?this.Ff=Hs(this.Ff,21):this.Ff=Vs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,23)},set:function(r){r?this.Ff=Hs(this.Ff,23):this.Ff=Vs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,24)},set:function(r){r?this.Ff=Hs(this.Ff,24):this.Ff=Vs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,25)},set:function(r){r?this.Ff=Hs(this.Ff,25):this.Ff=Vs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,26)},set:function(r){r?this.Ff=Hs(this.Ff,26):this.Ff=Vs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pc(tm,kd);var Ev=function(){tm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,14)},set:function(t){t?this.Ff=Hs(this.Ff,14):this.Ff=Vs(this.Ff,14)}}),this.password=!0};pc(Ev,tm);var Ar={CheckBox:{createAppearanceStream:function(){return{N:{On:Ar.CheckBox.YesNormal},D:{On:Ar.CheckBox.YesPushDown,Off:Ar.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=tu(t);r.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=uA(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+wn(Ar.internal.getWidth(t))+" "+wn(Ar.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+wn(s.fontSize)+" Tf "+a),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),r.stream=n.join(`
`),r},YesNormal:function(t){var r=tu(t);r.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=[],s=Ar.internal.getHeight(t),o=Ar.internal.getWidth(t),l=uA(t,t.caption);return a.push("1 g"),a.push("0 0 "+wn(o)+" "+wn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+wn(o-1)+" "+wn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+wn(l.fontSize)+" Tf "+i),a.push(l.text),a.push("ET"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(t){var r=tu(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wn(Ar.internal.getWidth(t))+" "+wn(Ar.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:Ar.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=Ar.RadioButton.Circle.YesNormal,r.D[t]=Ar.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=tu(t);r.scope=t.scope;var n=[],i=Ar.internal.getWidth(t)<=Ar.internal.getHeight(t)?Ar.internal.getWidth(t)/4:Ar.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Ar.internal.Bezier_C,s=Number((i*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Gh(Ar.internal.getWidth(t)/2)+" "+Gh(Ar.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=tu(t);r.scope=t.scope;var n=[],i=Ar.internal.getWidth(t)<=Ar.internal.getHeight(t)?Ar.internal.getWidth(t)/4:Ar.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),s=Number((a*Ar.internal.Bezier_C).toFixed(5)),o=Number((i*Ar.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Gh(Ar.internal.getWidth(t)/2)+" "+Gh(Ar.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Gh(Ar.internal.getWidth(t)/2)+" "+Gh(Ar.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},OffPushDown:function(t){var r=tu(t);r.scope=t.scope;var n=[],i=Ar.internal.getWidth(t)<=Ar.internal.getHeight(t)?Ar.internal.getWidth(t)/4:Ar.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),s=Number((a*Ar.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Gh(Ar.internal.getWidth(t)/2)+" "+Gh(Ar.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:Ar.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=Ar.RadioButton.Cross.YesNormal,r.D[t]=Ar.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=tu(t);r.scope=t.scope;var n=[],i=Ar.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+wn(Ar.internal.getWidth(t)-2)+" "+wn(Ar.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(wn(i.x1.x)+" "+wn(i.x1.y)+" m"),n.push(wn(i.x2.x)+" "+wn(i.x2.y)+" l"),n.push(wn(i.x4.x)+" "+wn(i.x4.y)+" m"),n.push(wn(i.x3.x)+" "+wn(i.x3.y)+" l"),n.push("s"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=tu(t);r.scope=t.scope;var n=Ar.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+wn(Ar.internal.getWidth(t))+" "+wn(Ar.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+wn(Ar.internal.getWidth(t)-2)+" "+wn(Ar.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(wn(n.x1.x)+" "+wn(n.x1.y)+" m"),i.push(wn(n.x2.x)+" "+wn(n.x2.y)+" l"),i.push(wn(n.x4.x)+" "+wn(n.x4.y)+" m"),i.push(wn(n.x3.x)+" "+wn(n.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(t){var r=tu(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wn(Ar.internal.getWidth(t))+" "+wn(Ar.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+n}};Ar.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=Ar.internal.getWidth(t),n=Ar.internal.getHeight(t),i=Math.min(r,n);return{x1:{x:(r-i)/2,y:(n-i)/2+i},x2:{x:(r-i)/2+i,y:(n-i)/2},x3:{x:(r-i)/2,y:(n-i)/2},x4:{x:(r-i)/2+i,y:(n-i)/2+i}}}},Ar.internal.getWidth=function(t){var r=0;return zi(t)==="object"&&(r=B7(t.Rect[2])),r},Ar.internal.getHeight=function(t){var r=0;return zi(t)==="object"&&(r=B7(t.Rect[3])),r};var NCe=Cs.addField=function(t){if(CCe(this,t),!(t instanceof kd))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=Op,Cs.AcroFormListBox=kp,Cs.AcroFormComboBox=Dp,Cs.AcroFormEditBox=Cv,Cs.AcroFormButton=Bo,Cs.AcroFormPushButton=Nv,Cs.AcroFormRadioButton=Pp,Cs.AcroFormCheckBox=Av,Cs.AcroFormTextField=tm,Cs.AcroFormPasswordField=Ev,Cs.AcroFormAppearance=Ar,Cs.AcroForm={ChoiceField:Op,ListBox:kp,ComboBox:Dp,EditBox:Cv,Button:Bo,PushButton:Nv,RadioButton:Pp,CheckBox:Av,TextField:tm,PasswordField:Ev,Appearance:Ar},Br.AcroForm={ChoiceField:Op,ListBox:kp,ComboBox:Dp,EditBox:Cv,Button:Bo,PushButton:Nv,RadioButton:Pp,CheckBox:Av,TextField:tm,PasswordField:Ev,Appearance:Ar};Br.AcroForm;function rH(t){return t.reduce(function(r,n,i){return r[n]=i,r},{})}(function(t){var r="addImage_";t.__addimage__={};var n="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(ne,Z){var ie,me,ce,Q,de,le=n;if((Z=Z||n)==="RGBA"||ne.data!==void 0&&ne.data instanceof Uint8ClampedArray&&"height"in ne&&"width"in ne)return"RGBA";if(q(ne))for(de in i)for(ce=i[de],ie=0;ie<ce.length;ie+=1){for(Q=!0,me=0;me<ce[ie].length;me+=1)if(ce[ie][me]!==void 0&&ce[ie][me]!==ne[me]){Q=!1;break}if(Q===!0){le=de;break}}else for(de in i)for(ce=i[de],ie=0;ie<ce.length;ie+=1){for(Q=!0,me=0;me<ce[ie].length;me+=1)if(ce[ie][me]!==void 0&&ce[ie][me]!==ne.charCodeAt(me)){Q=!1;break}if(Q===!0){le=de;break}}return le===n&&Z!==n&&(le=Z),le},s=function ne(Z){for(var ie=this.internal.write,me=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);Z.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:Z.width}),Q.push({key:"Height",value:Z.height}),Z.colorSpace===T.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Z.palette.length/3-1)+" "+("sMask"in Z&&Z.sMask!==void 0?Z.objectId+2:Z.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+Z.colorSpace}),Z.colorSpace===T.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:Z.bitsPerComponent}),"decodeParameters"in Z&&Z.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+Z.decodeParameters+">>"}),"transparency"in Z&&Array.isArray(Z.transparency)&&Z.transparency.length>0){for(var de="",le=0,ye=Z.transparency.length;le<ye;le++)de+=Z.transparency[le]+" "+Z.transparency[le]+" ";Q.push({key:"Mask",value:"["+de+"]"})}Z.sMask!==void 0&&Q.push({key:"SMask",value:Z.objectId+1+" 0 R"});var Se=Z.filter!==void 0?["/"+Z.filter]:void 0;if(me({data:Z.data,additionalKeyValues:Q,alreadyAppliedFilters:Se,objectId:Z.objectId}),ie("endobj"),"sMask"in Z&&Z.sMask!==void 0){var $,X=($=Z.sMaskBitsPerComponent)!==null&&$!==void 0?$:Z.bitsPerComponent,se={width:Z.width,height:Z.height,colorSpace:"DeviceGray",bitsPerComponent:X,data:Z.sMask};"filter"in Z&&(se.decodeParameters="/Predictor ".concat(Z.predictor," /Colors 1 /BitsPerComponent ").concat(X," /Columns ").concat(Z.width),se.filter=Z.filter),ne.call(this,se)}if(Z.colorSpace===T.INDEXED){var H=this.internal.newObject();me({data:J(new Uint8Array(Z.palette)),objectId:H}),ie("endobj")}},o=function(){var ne=this.internal.collections[r+"images"];for(var Z in ne)s.call(this,ne[Z])},l=function(){var ne,Z=this.internal.collections[r+"images"],ie=this.internal.write;for(var me in Z)ie("/I"+(ne=Z[me]).index,ne.objectId,"0","R")},u=function(){this.internal.collections[r+"images"]||(this.internal.collections[r+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var ne=this.internal.collections[r+"images"];return u.call(this),ne},f=function(){return Object.keys(this.internal.collections[r+"images"]).length},p=function(ne){return typeof t["process"+ne.toUpperCase()]=="function"},x=function(ne){return zi(ne)==="object"&&ne.nodeType===1},v=function(ne,Z){if(ne.nodeName==="IMG"&&ne.hasAttribute("src")){var ie=""+ne.getAttribute("src");if(ie.indexOf("data:image/")===0)return Sv(unescape(ie).split("base64,").pop());var me=t.loadFile(ie,!0);if(me!==void 0)return me}if(ne.nodeName==="CANVAS"){if(ne.width===0||ne.height===0)throw new Error("Given canvas must have data. Canvas width: "+ne.width+", height: "+ne.height);var ce;switch(Z){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;default:ce="image/jpeg"}return Sv(ne.toDataURL(ce,1).split("base64,").pop())}},w=function(ne){var Z=this.internal.collections[r+"images"];if(Z){for(var ie in Z)if(ne===Z[ie].alias)return Z[ie]}},C=function(ne,Z,ie){return ne||Z||(ne=-96,Z=-96),ne<0&&(ne=-1*ie.width*72/ne/this.internal.scaleFactor),Z<0&&(Z=-1*ie.height*72/Z/this.internal.scaleFactor),ne===0&&(ne=Z*ie.width/ie.height),Z===0&&(Z=ne*ie.height/ie.width),[ne,Z]},N=function(ne,Z,ie,me,ce,Q){var de=C.call(this,ie,me,ce),le=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,Se=d.call(this);if(ie=de[0],me=de[1],Se[ce.index]=ce,Q){Q*=Math.PI/180;var $=Math.cos(Q),X=Math.sin(Q),se=function(oe){return oe.toFixed(4)},H=[se($),se(X),se(-1*X),se($),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,le(ne),ye(Z+me),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([le(ie),"0","0",le(me),"0","0","cm"].join(" "))):this.internal.write([le(ie),"0","0",le(me),le(ne),ye(Z+me),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(ne){var Z,ie,me=0;if(typeof ne=="string")for(ie=ne.length,Z=0;Z<ie;Z++)me=(me<<5)-me+ne.charCodeAt(Z),me|=0;else if(q(ne))for(ie=ne.byteLength/2,Z=0;Z<ie;Z++)me=(me<<5)-me+ne[Z],me|=0;return me},M=t.__addimage__.validateStringAsBase64=function(ne){(ne=ne||"").toString().trim();var Z=!0;return ne.length===0&&(Z=!1),ne.length%4!=0&&(Z=!1),/^[A-Za-z0-9+/]+$/.test(ne.substr(0,ne.length-2))===!1&&(Z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ne.substr(-2))===!1&&(Z=!1),Z},Y=t.__addimage__.extractImageFromDataUrl=function(ne){if(ne==null||!(ne=ne.trim()).startsWith("data:"))return null;var Z=ne.indexOf(",");return Z<0?null:ne.substring(0,Z).trim().endsWith("base64")?ne.substring(Z+1):null};t.__addimage__.isArrayBuffer=function(ne){return ne instanceof ArrayBuffer};var q=t.__addimage__.isArrayBufferView=function(ne){return ne instanceof Int8Array||ne instanceof Uint8Array||ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array},W=t.__addimage__.binaryStringToUint8Array=function(ne){for(var Z=ne.length,ie=new Uint8Array(Z),me=0;me<Z;me++)ie[me]=ne.charCodeAt(me);return ie},J=t.__addimage__.arrayBufferToBinaryString=function(ne){for(var Z="",ie=q(ne)?ne:new Uint8Array(ne),me=0;me<ie.length;me+=8192)Z+=String.fromCharCode.apply(null,ie.subarray(me,me+8192));return Z};t.addImage=function(){var ne,Z,ie,me,ce,Q,de,le,ye;if(typeof arguments[1]=="number"?(Z=n,ie=arguments[1],me=arguments[2],ce=arguments[3],Q=arguments[4],de=arguments[5],le=arguments[6],ye=arguments[7]):(Z=arguments[1],ie=arguments[2],me=arguments[3],ce=arguments[4],Q=arguments[5],de=arguments[6],le=arguments[7],ye=arguments[8]),zi(ne=arguments[0])==="object"&&!x(ne)&&"imageData"in ne){var Se=ne;ne=Se.imageData,Z=Se.format||Z||n,ie=Se.x||ie||0,me=Se.y||me||0,ce=Se.w||Se.width||ce,Q=Se.h||Se.height||Q,de=Se.alias||de,le=Se.compression||le,ye=Se.rotation||Se.angle||ye}var $=this.internal.getFilters();if(le===void 0&&$.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(ie)||isNaN(me))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var X=z.call(this,ne,Z,de,le);return N.call(this,ie,me,ce,Q,X,ye),this};var z=function(ne,Z,ie,me){var ce,Q,de;if(typeof ne=="string"&&a(ne)===n){ne=unescape(ne);var le=G(ne,!1);(le!==""||(le=t.loadFile(ne,!0))!==void 0)&&(ne=le)}if(x(ne)&&(ne=v(ne,Z)),Z=a(ne,Z),!p(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(((de=ie)==null||de.length===0)&&(ie=(function(ye){return typeof ye=="string"||q(ye)?D(ye):q(ye.data)?D(ye.data):null})(ne)),(ce=w.call(this,ie))||(ne instanceof Uint8Array||Z==="RGBA"||(Q=ne,ne=W(ne)),ce=this["process"+Z.toUpperCase()](ne,f.call(this),ie,(function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in t.image_compression?ye:O.NONE})(me),Q)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},G=t.__addimage__.convertBase64ToBinaryString=function(ne,Z){Z=typeof Z!="boolean"||Z;var ie,me="";if(typeof ne=="string"){var ce;ie=(ce=Y(ne))!==null&&ce!==void 0?ce:ne;try{me=Sv(ie)}catch(Q){if(Z)throw M(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return me};t.getImageProperties=function(ne){var Z,ie,me="";if(x(ne)&&(ne=v(ne)),typeof ne=="string"&&a(ne)===n&&((me=G(ne,!1))===""&&(me=t.loadFile(ne)||""),ne=me),ie=a(ne),!p(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(ne instanceof Uint8Array||(ne=W(ne)),!(Z=this["process"+ie.toUpperCase()](ne)))throw new Error("An unknown error occurred whilst processing the image");return Z.fileType=ie,Z}})(Br.API),(function(t){var r=function(n){if(n!==void 0&&n!="")return!0};Br.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,f=!1,p=0;p<d.length&&!f;p++)switch((i=d[p]).type){case"link":(r(i.options.url)||r(i.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){i=d[x];var v=this.internal.pdfEscape,w=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(C.objId),O=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(i.bounds.x)+" "+l(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y)+"] ")+"/Contents ("+v(T(i.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+v(T(O))+") >>",C.content=s;var D=C.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(i.bounds.x+30)+" "+l(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+l(i.bounds.y)+"] ")+" /Parent "+D,i.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(C.objId,"0 R",N.objId,"0 R");break;case"freetext":a="/Rect ["+o(i.bounds.x)+" "+l(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y+i.bounds.h)+"] ";var M=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+v(w(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var Y=this.annotations._nameMap[i.options.name];i.options.pageNumber=Y.page,i.options.top=Y.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+v(w(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;default:var q=l(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+q+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,a,s,o){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(n),y:d(i),w:u(n+a),h:d(i+s)},options:o,type:"link"})},t.textWithLink=function(n,i,a,s){var o,l,u=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var f=this.splitTextToSize(n,l).length;o=Math.ceil(d*f)}else l=u,o=d;return this.text(n,i,a,s),a+=.2*d,s.align==="center"&&(i-=u/2),s.align==="right"&&(i-=u),this.link(i,a-d,l,o,s),u},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(Br.API),(function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(C){return r[C.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},l=t.__arabicParser__.isArabicEndLetter=function(C){return o(C)&&s(C)&&r[C.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(C){return o(C)&&a.indexOf(C.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return o(C)&&s(C)&&r[C.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(C){return o(C)&&s(C)&&r[C.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(C){return o(C)&&s(C)&&r[C.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(C){return o(C)&&s(C)&&r[C.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(C){var N=0,T=n,O="",D=0;for(N=0;N<C.length;N+=1)T[C.charCodeAt(N)]!==void 0?(D++,typeof(T=T[C.charCodeAt(N)])=="number"&&(O+=String.fromCharCode(T),T=n,D=0),N===C.length-1&&(T=n,O+=C.charAt(N-(D-1)),N-=D-1,D=0)):(T=n,O+=C.charAt(N-D),N-=D,D=0);return O};t.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&i[C.charCodeAt(0)]!==void 0};var x=t.__arabicParser__.getCorrectForm=function(C,N,T){return o(C)?s(C)===!1?-1:!d(C)||!o(N)&&!o(T)||!o(T)&&l(N)||l(C)&&!o(N)||l(C)&&u(N)||l(C)&&l(N)?0:f(C)&&o(N)&&!l(N)&&o(T)&&d(T)?3:l(C)||!o(T)?1:2:-1},v=function(C){var N=0,T=0,O=0,D="",M="",Y="",q=(C=C||"").split("\\s+"),W=[];for(N=0;N<q.length;N+=1){for(W.push(""),T=0;T<q[N].length;T+=1)D=q[N][T],M=q[N][T-1],Y=q[N][T+1],o(D)?(O=x(D,M,Y),W[N]+=O!==-1?String.fromCharCode(r[D.charCodeAt(0)][O]):D):W[N]+=D;W[N]=p(W[N])}return W.join(" ")},w=t.__arabicParser__.processArabic=t.processArabic=function(){var C,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(N)){var O=0;for(T=[],O=0;O<N.length;O+=1)Array.isArray(N[O])?T.push([v(N[O][0]),N[O][1],N[O][2]]):T.push([v(N[O])]);C=T}else C=v(N);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};t.events.push(["preProcessText",w])})(Br.API),Br.API.autoPrint=function(t){var r;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})),this},(function(t){var r=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(n,i){var a;if((n=n||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])})(Br.API),(function(t){var r={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(C){u=C}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(C){d=C}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(C){x=C}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(C){v=C}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(C){w=C}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,d){i.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),p=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,v=0,w=0,C=0,N=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var T=d.maxWidth;T>0?typeof u=="string"?u=this.splitTextToSize(u,T):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(D,M){return D.concat(N.splitTextToSize(M,T))},[])):u=Array.isArray(u)?u:[u];for(var O=0;O<u.length;O++)v<(C=this.getStringUnitWidth(u[O],{font:p})*f)&&(v=C);return v!==0&&(w=u.length),{w:v/=x,h:Math.max((w*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/x,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||r,x=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,v&&x&&(this.printHeaderRow(u.lineNumber,!0),u.y+=x[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};t.table=function(u,d,f,p,x){if(i.call(this),!f)throw new Error("No data for PDF table.");var v,w,C,N,T=[],O=[],D=[],M={},Y={},q=[],W=[],J=(x=x||{}).autoSize||!1,z=x.printHeaders!==!1,G=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,ne=x.margins||Object.assign({width:this.getPageWidth()},r),Z=typeof x.padding=="number"?x.padding:3,ie=x.headerBackgroundColor||"#c8c8c8",me=x.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=ne,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=Z,this.internal.__cell__.headerBackgroundColor=ie,this.internal.__cell__.headerTextColor=me,this.setFontSize(G),p==null)O=T=Object.keys(f[0]),D=T.map(function(){return"left"});else if(Array.isArray(p)&&zi(p[0])==="object")for(T=p.map(function(Se){return Se.name}),O=p.map(function(Se){return Se.prompt||Se.name||""}),D=p.map(function(Se){return Se.align||"left"}),v=0;v<p.length;v+=1)Y[p[v].name]=.7499990551181103*p[v].width;else Array.isArray(p)&&typeof p[0]=="string"&&(O=T=p,D=T.map(function(){return"left"}));if(J||Array.isArray(p)&&typeof p[0]=="string")for(v=0;v<T.length;v+=1){for(M[N=T[v]]=f.map(function(Se){return Se[N]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(O[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=M[N],this.setFont(void 0,"normal"),C=0;C<w.length;C+=1)q.push(this.getTextDimensions(w[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[N]=Math.max.apply(null,q)+Z+Z,q=[]}if(z){var ce={};for(v=0;v<T.length;v+=1)ce[T[v]]={},ce[T[v]].text=O[v],ce[T[v]].align=D[v];var Q=l.call(this,ce,Y);W=T.map(function(Se){return new s(u,d,Y[Se],Q,ce[Se].text,void 0,ce[Se].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var de=p.reduce(function(Se,$){return Se[$.name]=$.align,Se},{});for(v=0;v<f.length;v+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:v,data:f[v]},this);var le=l.call(this,f[v],Y);for(C=0;C<T.length;C+=1){var ye=f[v][T[C]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:v,col:C,data:ye},this),o.call(this,new s(u,d,Y[T[C]],le,ye,v+2,de[T[C]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var l=function(u,d){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(u).map(function(v){var w=u[v];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,d[v]-f-f)},this).map(function(v){return this.getLineHeightFactor()*v.length*p/x+f+f},this).reduce(function(v,w){return Math.max(v,w)},0)};t.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,d){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){f=this.internal.__cell__.tableHeaderRow[v].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,x.push(f)),f.lineNumber=u;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(w)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),n=!1}})(Br.API);var nH={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iH=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],hA=rH(iH),aH=[100,200,300,400,500,600,700,800,900],ACe=rH(aH);function uC(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(s){return nH[s=s||"normal"]?s:"normal"})(t.style),i=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),a=(function(s){return typeof hA[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:r,style:n,weight:i,stretch:a,src:t.src||[],ref:t.ref||{name:r,style:[a,n,i].join(" ")}}}function F7(t,r,n,i){var a;for(a=n;a>=0&&a<r.length;a+=i)if(t[r[a]])return t[r[a]];for(a=n;a>=0&&a<r.length;a-=i)if(t[r[a]])return t[r[a]]}var ECe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},q7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function U7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function W7(t){return t.trimLeft()}function _Ce(t,r){for(var n=0;n<t.length;){if(t.charAt(n)===r)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function TCe(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var fp,ev,H7,V7,$7,hC=["times"];function G7(t,r,n,i,a){var s=4,o=Q7;switch(a){case Br.API.image_compression.FAST:s=1,o=K7;break;case Br.API.image_compression.MEDIUM:s=6,o=Y7;break;case Br.API.image_compression.SLOW:s=9,o=Z7}t=(function(u,d,f,p){for(var x,v=u.length/d,w=new Uint8Array(u.length+v),C=[ICe,K7,Q7,Y7,Z7],N=0;N<v;N+=1){var T=N*d,O=u.subarray(T,T+d);if(p)w.set(p(O,f,x),T+N);else{for(var D=C.length,M=[],Y=0;Y<D;Y+=1)M[Y]=C[Y](O,f,x);var q=kCe(M.concat());w.set(M[q],T+N)}x=O}return w})(t,r,Math.ceil(n*i/8),o);var l=aA(t,{level:s});return Br.API.__addimage__.arrayBufferToBinaryString(l)}function ICe(t){var r=Array.apply([],t);return r.unshift(0),r}function K7(t,r){var n=t.length,i=[];i[0]=1;for(var a=0;a<n;a+=1){var s=t[a-r]||0;i[a+1]=t[a]-s+256&255}return i}function Q7(t,r,n){var i=t.length,a=[];a[0]=2;for(var s=0;s<i;s+=1){var o=n&&n[s]||0;a[s+1]=t[s]-o+256&255}return a}function Y7(t,r,n){var i=t.length,a=[];a[0]=3;for(var s=0;s<i;s+=1){var o=t[s-r]||0,l=n&&n[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function Z7(t,r,n){var i=t.length,a=[];a[0]=4;for(var s=0;s<i;s+=1){var o=OCe(t[s-r]||0,n&&n[s]||0,n&&n[s-r]||0);a[s+1]=t[s]-o+256&255}return a}function OCe(t,r,n){if(t===r&&r===n)return t;var i=Math.abs(r-n),a=Math.abs(t-n),s=Math.abs(t+r-n-n);return i<=a&&i<=s?t:a<=s?r:n}function kCe(t){var r=t.map(function(n){return n.reduce(function(i,a){return i+Math.abs(a)},0)});return r.indexOf(Math.min.apply(null,r))}function fC(t,r,n){var i=r*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1;return sH(t,a)>>s&o}function X7(t,r,n,i){var a=n*i,s=Math.floor(a/8),o=16-(a-8*s+i),l=(1<<i)-1,u=(r&l)<<o;(function(d,f,p){if(f+1<d.byteLength)d.setUint16(f,p,!1);else{var x=p>>8&255;d.setUint8(f,x)}})(t,s,sH(t,s)&~(l<<o)&65535|u)}function sH(t,r){return r+1<t.byteLength?t.getUint16(r,!1):t.getUint8(r)<<8}function DCe(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[r++]|t[r++]<<8,i=t[r++]|t[r++]<<8,a=t[r++],s=a>>7,o=1<<1+(7&a);t[r++],t[r++];var l=null,u=null;s&&(l=r,u=o,r+=3*o);var d=!0,f=[],p=0,x=null,v=0,w=null;for(this.width=n,this.height=i;d&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,w=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((ne=t[r++])>=0))throw Error("Invalid block size");if(ne===0)break;r+=ne}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var C=t[r++];p=t[r++]|t[r++]<<8,x=t[r++],1&C||(x=null),v=C>>2&7,r++;break;case 254:for(;;){if(!((ne=t[r++])>=0))throw Error("Invalid block size");if(ne===0)break;r+=ne}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var N=t[r++]|t[r++]<<8,T=t[r++]|t[r++]<<8,O=t[r++]|t[r++]<<8,D=t[r++]|t[r++]<<8,M=t[r++],Y=M>>6&1,q=1<<1+(7&M),W=l,J=u,z=!1;M>>7&&(z=!0,W=r,J=q,r+=3*q);var G=r;for(r++;;){var ne;if(!((ne=t[r++])>=0))throw Error("Invalid block size");if(ne===0)break;r+=ne}f.push({x:N,y:T,width:O,height:D,has_local_palette:z,palette_offset:W,palette_size:J,data_offset:G,data_length:r-G,transparent_index:x,interlaced:!!Y,delay:p,disposal:v});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(Z){if(Z<0||Z>=f.length)throw new Error("Frame index out of range.");return f[Z]},this.decodeAndBlitFrameBGRA=function(Z,ie){var me=this.frameInfo(Z),ce=me.width*me.height,Q=new Uint8Array(ce);J7(t,me.data_offset,Q,ce);var de=me.palette_offset,le=me.transparent_index;le===null&&(le=256);var ye=me.width,Se=n-ye,$=ye,X=4*(me.y*n+me.x),se=4*((me.y+me.height)*n+me.x),H=X,oe=4*Se;me.interlaced===!0&&(oe+=4*n*7);for(var ge=8,be=0,Le=Q.length;be<Le;++be){var ke=Q[be];if($===0&&($=ye,(H+=oe)>=se&&(oe=4*Se+4*n*(ge-1),H=X+(ye+Se)*(ge<<1),ge>>=1)),ke===le)H+=4;else{var He=t[de+3*ke],Je=t[de+3*ke+1],Qe=t[de+3*ke+2];ie[H++]=Qe,ie[H++]=Je,ie[H++]=He,ie[H++]=255}--$}},this.decodeAndBlitFrameRGBA=function(Z,ie){var me=this.frameInfo(Z),ce=me.width*me.height,Q=new Uint8Array(ce);J7(t,me.data_offset,Q,ce);var de=me.palette_offset,le=me.transparent_index;le===null&&(le=256);var ye=me.width,Se=n-ye,$=ye,X=4*(me.y*n+me.x),se=4*((me.y+me.height)*n+me.x),H=X,oe=4*Se;me.interlaced===!0&&(oe+=4*n*7);for(var ge=8,be=0,Le=Q.length;be<Le;++be){var ke=Q[be];if($===0&&($=ye,(H+=oe)>=se&&(oe=4*Se+4*n*(ge-1),H=X+(ye+Se)*(ge<<1),ge>>=1)),ke===le)H+=4;else{var He=t[de+3*ke],Je=t[de+3*ke+1],Qe=t[de+3*ke+2];ie[H++]=He,ie[H++]=Je,ie[H++]=Qe,ie[H++]=255}--$}}}function J7(t,r,n,i){for(var a=t[r++],s=1<<a,o=s+1,l=o+1,u=a+1,d=(1<<u)-1,f=0,p=0,x=0,v=t[r++],w=new Int32Array(4096),C=null;;){for(;f<16&&v!==0;)p|=t[r++]<<f,f+=8,v===1?v=t[r++]:--v;if(f<u)break;var N=p&d;if(p>>=u,f-=u,N!==s){if(N===o)break;for(var T=N<l?N:C,O=0,D=T;D>s;)D=w[D]>>8,++O;var M=D;if(x+O+(T!==N?1:0)>i)return void ta.log("Warning, gif stream longer than expected.");n[x++]=M;var Y=x+=O;for(T!==N&&(n[x++]=M),D=T;O--;)D=w[D],n[--Y]=255&D,D>>=8;C!==null&&l<4096&&(w[l++]=C<<8|M,l>=d+1&&u<12&&(++u,d=d<<1|1)),C=N}else l=o+1,d=(1<<(u=a+1))-1,C=null}return x!==i&&ta.log("Warning, gif stream shorter than expected."),n}function mC(t){var r,n,i,a,s,o=Math.floor,l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(64),p=new Array(65535),x=new Array(65535),v=new Array(64),w=new Array(64),C=[],N=0,T=7,O=new Array(64),D=new Array(64),M=new Array(64),Y=new Array(256),q=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ne=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(X,se){for(var H=0,oe=0,ge=new Array,be=1;be<=16;be++){for(var Le=1;Le<=X[be];Le++)ge[se[oe]]=[],ge[se[oe]][0]=H,ge[se[oe]][1]=be,oe++,H++;H*=2}return ge}function de(X){for(var se=X[0],H=X[1]-1;H>=0;)se&1<<H&&(N|=1<<T),H--,--T<0&&(N==255?(le(255),le(0)):le(N),T=7,N=0)}function le(X){C.push(X)}function ye(X){le(X>>8&255),le(255&X)}function Se(X,se,H,oe,ge){for(var be,Le=ge[0],ke=ge[240],He=(function(yt,rr){var St,xr,hr,zr,yn,Ir,xn,Yr,tr,tn,fr=0;for(tr=0;tr<8;++tr){St=yt[fr],xr=yt[fr+1],hr=yt[fr+2],zr=yt[fr+3],yn=yt[fr+4],Ir=yt[fr+5],xn=yt[fr+6];var Ki=St+(Yr=yt[fr+7]),Er=St-Yr,wt=xr+xn,sr=xr-xn,ur=hr+Ir,Yt=hr-Ir,Kn=zr+yn,Fr=zr-yn,Gr=Ki+Kn,Sr=Ki-Kn,Kr=wt+ur,_r=wt-ur;yt[fr]=Gr+Kr,yt[fr+4]=Gr-Kr;var On=.707106781*(_r+Sr);yt[fr+2]=Sr+On,yt[fr+6]=Sr-On;var Qi=.382683433*((Gr=Fr+Yt)-(_r=sr+Er)),Ta=.5411961*Gr+Qi,vi=1.306562965*_r+Qi,$a=.707106781*(Kr=Yt+sr),vr=Er+$a,Ia=Er-$a;yt[fr+5]=Ia+Ta,yt[fr+3]=Ia-Ta,yt[fr+1]=vr+vi,yt[fr+7]=vr-vi,fr+=8}for(fr=0,tr=0;tr<8;++tr){St=yt[fr],xr=yt[fr+8],hr=yt[fr+16],zr=yt[fr+24],yn=yt[fr+32],Ir=yt[fr+40],xn=yt[fr+48];var ml=St+(Yr=yt[fr+56]),pa=St-Yr,Ds=xr+xn,Xr=xr-xn,$t=hr+Ir,Qn=hr-Ir,er=zr+yn,Yi=zr-yn,Yn=ml+er,vn=ml-er,Bi=Ds+$t,Zi=Ds-$t;yt[fr]=Yn+Bi,yt[fr+32]=Yn-Bi;var cs=.707106781*(Zi+vn);yt[fr+16]=vn+cs,yt[fr+48]=vn-cs;var ds=.382683433*((Yn=Yi+Qn)-(Zi=Xr+pa)),Vo=.5411961*Yn+ds,$o=1.306562965*Zi+ds,Ga=.707106781*(Bi=Qn+Xr),fi=pa+Ga,kn=pa-Ga;yt[fr+40]=kn+Vo,yt[fr+24]=kn-Vo,yt[fr+8]=fi+$o,yt[fr+56]=fi-$o,fr++}for(tr=0;tr<64;++tr)tn=yt[tr]*rr[tr],v[tr]=tn>0?tn+.5|0:tn-.5|0;return v})(X,se),Je=0;Je<64;++Je)w[W[Je]]=He[Je];var Qe=w[0]-H;H=w[0],Qe==0?de(oe[0]):(de(oe[x[be=32767+Qe]]),de(p[be]));for(var vt=63;vt>0&&w[vt]==0;)vt--;if(vt==0)return de(Le),H;for(var Pt,Oe=1;Oe<=vt;){for(var at=Oe;w[Oe]==0&&Oe<=vt;)++Oe;var Wt=Oe-at;if(Wt>=16){Pt=Wt>>4;for(var Bt=1;Bt<=Pt;++Bt)de(ke);Wt&=15}be=32767+w[Oe],de(ge[(Wt<<4)+x[be]]),de(p[be]),Oe++}return vt!=63&&de(Le),H}function $(X){X=Math.min(Math.max(X,1),100),s!=X&&((function(se){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var ge=o((H[oe]*se+50)/100);ge=Math.min(Math.max(ge,1),255),l[W[oe]]=ge}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var ke=o((be[Le]*se+50)/100);ke=Math.min(Math.max(ke,1),255),u[W[Le]]=ke}for(var He=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Je=0,Qe=0;Qe<8;Qe++)for(var vt=0;vt<8;vt++)d[Je]=1/(l[W[Je]]*He[Qe]*He[vt]*8),f[Je]=1/(u[W[Je]]*He[Qe]*He[vt]*8),Je++})(X<50?Math.floor(5e3/X):Math.floor(200-2*X)),s=X)}this.encode=function(X,se){se&&$(se),C=new Array,N=0,T=7,ye(65496),ye(65504),ye(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),ye(1),ye(1),le(0),le(0),(function(){ye(65499),ye(132),le(0);for(var xr=0;xr<64;xr++)le(l[xr]);le(1);for(var hr=0;hr<64;hr++)le(u[hr])})(),(function(xr,hr){ye(65472),ye(17),le(8),ye(hr),ye(xr),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)})(X.width,X.height),(function(){ye(65476),ye(418),le(0);for(var xr=0;xr<16;xr++)le(J[xr+1]);for(var hr=0;hr<=11;hr++)le(z[hr]);le(16);for(var zr=0;zr<16;zr++)le(G[zr+1]);for(var yn=0;yn<=161;yn++)le(ne[yn]);le(1);for(var Ir=0;Ir<16;Ir++)le(Z[Ir+1]);for(var xn=0;xn<=11;xn++)le(ie[xn]);le(17);for(var Yr=0;Yr<16;Yr++)le(me[Yr+1]);for(var tr=0;tr<=161;tr++)le(ce[tr])})(),ye(65498),ye(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var H=0,oe=0,ge=0;N=0,T=7,this.encode.displayName="_encode_";for(var be,Le,ke,He,Je,Qe,vt,Pt,Oe,at=X.data,Wt=X.width,Bt=X.height,yt=4*Wt,rr=0;rr<Bt;){for(be=0;be<yt;){for(Je=yt*rr+be,vt=-1,Pt=0,Oe=0;Oe<64;Oe++)Qe=Je+(Pt=Oe>>3)*yt+(vt=4*(7&Oe)),rr+Pt>=Bt&&(Qe-=yt*(rr+1+Pt-Bt)),be+vt>=yt&&(Qe-=be+vt-yt+4),Le=at[Qe++],ke=at[Qe++],He=at[Qe++],O[Oe]=(q[Le]+q[ke+256|0]+q[He+512|0]>>16)-128,D[Oe]=(q[Le+768|0]+q[ke+1024|0]+q[He+1280|0]>>16)-128,M[Oe]=(q[Le+1280|0]+q[ke+1536|0]+q[He+1792|0]>>16)-128;H=Se(O,d,H,r,i),oe=Se(D,f,oe,n,a),ge=Se(M,f,ge,n,a),be+=32}rr+=8}if(T>=0){var St=[];St[1]=T+1,St[0]=(1<<T+1)-1,de(St)}return ye(65497),new Uint8Array(C)},t=t||50,(function(){for(var X=String.fromCharCode,se=0;se<256;se++)Y[se]=X(se)})(),r=Q(J,z),n=Q(Z,ie),i=Q(G,ne),a=Q(me,ce),(function(){for(var X=1,se=2,H=1;H<=15;H++){for(var oe=X;oe<se;oe++)x[32767+oe]=H,p[32767+oe]=[],p[32767+oe][1]=H,p[32767+oe][0]=oe;for(var ge=-(se-1);ge<=-X;ge++)x[32767+ge]=H,p[32767+ge]=[],p[32767+ge][1]=H,p[32767+ge][0]=se-1+ge;X<<=1,se<<=1}})(),(function(){for(var X=0;X<256;X++)q[X]=19595*X,q[X+256|0]=38470*X,q[X+512|0]=7471*X+32768,q[X+768|0]=-11059*X,q[X+1024|0]=-21709*X,q[X+1280|0]=32768*X+8421375,q[X+1536|0]=-27439*X,q[X+1792|0]=-5329*X})(),$(t)}function wd(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eM(t){function r(z){if(!z)throw Error("assert :P")}function n(z,G,ne){for(var Z=0;4>Z;Z++)if(z[G+Z]!=ne.charCodeAt(Z))return!0;return!1}function i(z,G,ne,Z,ie){for(var me=0;me<ie;me++)z[G+me]=ne[Z+me]}function a(z,G,ne,Z){for(var ie=0;ie<Z;ie++)z[G+ie]=ne}function s(z){return new Int32Array(z)}function o(z,G){for(var ne=[],Z=0;Z<z;Z++)ne.push(new G);return ne}function l(z,G){var ne=[];return(function Z(ie,me,ce){for(var Q=ce[me],de=0;de<Q&&(ie.push(ce.length>me+1?[]:new G),!(ce.length<me+1));de++)Z(ie[de],me+1,ce)})(ne,0,z),ne}var u=function(){var z=this;function G(P,U){for(var ae=1<<U-1>>>0;P&ae;)ae>>>=1;return ae?(P&ae-1)+ae:P}function ne(P,U,ae,he,Ce){r(!(he%ae));do P[U+(he-=ae)]=Ce;while(0<he)}function Z(P,U,ae,he,Ce){if(r(2328>=Ce),512>=Ce)var Ae=s(512);else if((Ae=s(Ce))==null)return 0;return(function(_e,Ie,De,Be,Ge,dt){var ze,Ye,it=Ie,Et=1<<De,lt=s(16),Nt=s(16);for(r(Ge!=0),r(Be!=null),r(_e!=null),r(0<De),Ye=0;Ye<Ge;++Ye){if(15<Be[Ye])return 0;++lt[Be[Ye]]}if(lt[0]==Ge)return 0;for(Nt[1]=0,ze=1;15>ze;++ze){if(lt[ze]>1<<ze)return 0;Nt[ze+1]=Nt[ze]+lt[ze]}for(Ye=0;Ye<Ge;++Ye)ze=Be[Ye],0<Be[Ye]&&(dt[Nt[ze]++]=Ye);if(Nt[15]==1)return(Be=new ie).g=0,Be.value=dt[0],ne(_e,it,1,Et,Be),Et;var Ot,qt=-1,zt=Et-1,Nr=0,cr=1,un=1,gr=1<<De;for(Ye=0,ze=1,Ge=2;ze<=De;++ze,Ge<<=1){if(cr+=un<<=1,0>(un-=lt[ze]))return 0;for(;0<lt[ze];--lt[ze])(Be=new ie).g=ze,Be.value=dt[Ye++],ne(_e,it+Nr,Ge,gr,Be),Nr=G(Nr,ze)}for(ze=De+1,Ge=2;15>=ze;++ze,Ge<<=1){if(cr+=un<<=1,0>(un-=lt[ze]))return 0;for(;0<lt[ze];--lt[ze]){if(Be=new ie,(Nr&zt)!=qt){for(it+=gr,Ot=1<<(qt=ze)-De;15>qt&&!(0>=(Ot-=lt[qt]));)++qt,Ot<<=1;Et+=gr=1<<(Ot=qt-De),_e[Ie+(qt=Nr&zt)].g=Ot+De,_e[Ie+qt].value=it-Ie-qt}Be.g=ze-De,Be.value=dt[Ye++],ne(_e,it+(Nr>>De),Ge,gr,Be),Nr=G(Nr,ze)}}return cr!=2*Nt[15]-1?0:Et})(P,U,ae,he,Ce,Ae)}function ie(){this.value=this.g=0}function me(){this.value=this.g=0}function ce(){this.G=o(5,ie),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(da,me)}function Q(P,U,ae,he){r(P!=null),r(U!=null),r(2147483648>he),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=U,P.pa=ae,P.Jd=U,P.Yc=ae+he,P.Zc=4<=he?ae+he-4+1:ae,Le(P)}function de(P,U){for(var ae=0;0<U--;)ae|=He(P,128)<<U;return ae}function le(P,U){var ae=de(P,U);return ke(P)?-ae:ae}function ye(P,U,ae,he){var Ce,Ae=0;for(r(P!=null),r(U!=null),r(4294967288>he),P.Sb=he,P.Ra=0,P.u=0,P.h=0,4<he&&(he=4),Ce=0;Ce<he;++Ce)Ae+=U[ae+Ce]<<8*Ce;P.Ra=Ae,P.bb=he,P.oa=U,P.pa=ae}function Se(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<is-8>>>0,++P.bb,P.u-=8;oe(P)&&(P.h=1,P.u=0)}function $(P,U){if(r(0<=U),!P.h&&U<=_i){var ae=H(P)&Ys[U];return P.u+=U,Se(P),ae}return P.h=1,P.u=0}function X(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(P){return P.Ra>>>(P.u&is-1)>>>0}function oe(P){return r(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>is}function ge(P,U){P.u=U,P.h=oe(P)}function be(P){P.u>=ln&&(r(P.u>=ln),Se(P))}function Le(P){r(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(r(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function ke(P){return de(P,1)}function He(P,U){var ae=P.Ca;0>P.b&&Le(P);var he=P.b,Ce=ae*U>>>8,Ae=(P.I>>>he>Ce)+0;for(Ae?(ae-=Ce,P.I-=Ce+1<<he>>>0):ae=Ce+1,he=ae,Ce=0;256<=he;)Ce+=8,he>>=8;return he=7^Ce+Zs[he],P.b-=he,P.Ca=(ae<<he)-1,Ae}function Je(P,U,ae){P[U+0]=ae>>24&255,P[U+1]=ae>>16&255,P[U+2]=ae>>8&255,P[U+3]=255&ae}function Qe(P,U){return P[U+0]|P[U+1]<<8}function vt(P,U){return Qe(P,U)|P[U+2]<<16}function Pt(P,U){return Qe(P,U)|Qe(P,U+2)<<16}function Oe(P,U){var ae=1<<U;return r(P!=null),r(0<U),P.X=s(ae),P.X==null?0:(P.Mb=32-U,P.Xa=U,1)}function at(P,U){r(P!=null),r(U!=null),r(P.Xa==U.Xa),i(U.X,0,P.X,0,1<<U.Xa)}function Wt(){this.X=[],this.Xa=this.Mb=0}function Bt(P,U,ae,he){r(ae!=null),r(he!=null);var Ce=ae[0],Ae=he[0];return Ce==0&&(Ce=(P*Ae+U/2)/U),Ae==0&&(Ae=(U*Ce+P/2)/P),0>=Ce||0>=Ae?0:(ae[0]=Ce,he[0]=Ae,1)}function yt(P,U){return P+(1<<U)-1>>>U}function rr(P,U){return((4278255360&P)+(4278255360&U)>>>0&4278255360)+((16711935&P)+(16711935&U)>>>0&16711935)>>>0}function St(P,U){z[U]=function(ae,he,Ce,Ae,_e,Ie,De){var Be;for(Be=0;Be<_e;++Be){var Ge=z[P](Ie[De+Be-1],Ce,Ae+Be);Ie[De+Be]=rr(ae[he+Be],Ge)}}}function xr(){this.ud=this.hd=this.jd=0}function hr(P,U){return((4278124286&(P^U))>>>1)+(P&U)>>>0}function zr(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function yn(P,U){return zr(P+(P-U+.5>>1))}function Ir(P,U,ae){return Math.abs(U-ae)-Math.abs(P-ae)}function xn(P,U,ae,he,Ce,Ae,_e){for(he=Ae[_e-1],ae=0;ae<Ce;++ae)Ae[_e+ae]=he=rr(P[U+ae],he)}function Yr(P,U,ae,he,Ce){var Ae;for(Ae=0;Ae<ae;++Ae){var _e=P[U+Ae],Ie=_e>>8&255,De=16711935&(De=(De=16711935&_e)+((Ie<<16)+Ie));he[Ce+Ae]=(4278255360&_e)+De>>>0}}function tr(P,U){U.jd=255&P,U.hd=P>>8&255,U.ud=P>>16&255}function tn(P,U,ae,he,Ce,Ae){var _e;for(_e=0;_e<he;++_e){var Ie=U[ae+_e],De=Ie>>>8,Be=Ie,Ge=255&(Ge=(Ge=Ie>>>16)+((P.jd<<24>>24)*(De<<24>>24)>>>5));Be=255&(Be=(Be+=(P.hd<<24>>24)*(De<<24>>24)>>>5)+((P.ud<<24>>24)*(Ge<<24>>24)>>>5)),Ce[Ae+_e]=(4278255360&Ie)+(Ge<<16)+Be}}function fr(P,U,ae,he,Ce){z[U]=function(Ae,_e,Ie,De,Be,Ge,dt,ze,Ye){for(De=dt;De<ze;++De)for(dt=0;dt<Ye;++dt)Be[Ge++]=Ce(Ie[he(Ae[_e++])])},z[P]=function(Ae,_e,Ie,De,Be,Ge,dt){var ze=8>>Ae.b,Ye=Ae.Ea,it=Ae.K[0],Et=Ae.w;if(8>ze)for(Ae=(1<<Ae.b)-1,Et=(1<<ze)-1;_e<Ie;++_e){var lt,Nt=0;for(lt=0;lt<Ye;++lt)lt&Ae||(Nt=he(De[Be++])),Ge[dt++]=Ce(it[Nt&Et]),Nt>>=ze}else z["VP8LMapColor"+ae](De,Be,it,Et,Ge,dt,_e,Ie,Ye)}}function Ki(P,U,ae,he,Ce){for(ae=U+ae;U<ae;){var Ae=P[U++];he[Ce++]=Ae>>16&255,he[Ce++]=Ae>>8&255,he[Ce++]=255&Ae}}function Er(P,U,ae,he,Ce){for(ae=U+ae;U<ae;){var Ae=P[U++];he[Ce++]=Ae>>16&255,he[Ce++]=Ae>>8&255,he[Ce++]=255&Ae,he[Ce++]=Ae>>24&255}}function wt(P,U,ae,he,Ce){for(ae=U+ae;U<ae;){var Ae=(_e=P[U++])>>16&240|_e>>12&15,_e=240&_e|_e>>28&15;he[Ce++]=Ae,he[Ce++]=_e}}function sr(P,U,ae,he,Ce){for(ae=U+ae;U<ae;){var Ae=(_e=P[U++])>>16&248|_e>>13&7,_e=_e>>5&224|_e>>3&31;he[Ce++]=Ae,he[Ce++]=_e}}function ur(P,U,ae,he,Ce){for(ae=U+ae;U<ae;){var Ae=P[U++];he[Ce++]=255&Ae,he[Ce++]=Ae>>8&255,he[Ce++]=Ae>>16&255}}function Yt(P,U,ae,he,Ce,Ae){if(Ae==0)for(ae=U+ae;U<ae;)Je(he,((Ae=P[U++])[0]>>24|Ae[1]>>8&65280|Ae[2]<<8&16711680|Ae[3]<<24)>>>0),Ce+=32;else i(he,Ce,P,U,ae)}function Kn(P,U){z[U][0]=z[P+"0"],z[U][1]=z[P+"1"],z[U][2]=z[P+"2"],z[U][3]=z[P+"3"],z[U][4]=z[P+"4"],z[U][5]=z[P+"5"],z[U][6]=z[P+"6"],z[U][7]=z[P+"7"],z[U][8]=z[P+"8"],z[U][9]=z[P+"9"],z[U][10]=z[P+"10"],z[U][11]=z[P+"11"],z[U][12]=z[P+"12"],z[U][13]=z[P+"13"],z[U][14]=z[P+"0"],z[U][15]=z[P+"0"]}function Fr(P){return P==Ld||P==Cu||P==zd||P==y}function Gr(){this.eb=[],this.size=this.A=this.fb=0}function Sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gr,this.f.kb=new Sr,this.sd=null}function _r(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function On(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Qi(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function Ta(P,U){var ae=P.T,he=U.ba.f.RGBA,Ce=he.eb,Ae=he.fb+P.ka*he.A,_e=Ma[U.ba.S],Ie=P.y,De=P.O,Be=P.f,Ge=P.N,dt=P.ea,ze=P.W,Ye=U.cc,it=U.dc,Et=U.Mc,lt=U.Nc,Nt=P.ka,Ot=P.ka+P.T,qt=P.U,zt=qt+1>>1;for(Nt==0?_e(Ie,De,null,null,Be,Ge,dt,ze,Be,Ge,dt,ze,Ce,Ae,null,null,qt):(_e(U.ec,U.fc,Ie,De,Ye,it,Et,lt,Be,Ge,dt,ze,Ce,Ae-he.A,Ce,Ae,qt),++ae);Nt+2<Ot;Nt+=2)Ye=Be,it=Ge,Et=dt,lt=ze,Ge+=P.Rc,ze+=P.Rc,Ae+=2*he.A,_e(Ie,(De+=2*P.fa)-P.fa,Ie,De,Ye,it,Et,lt,Be,Ge,dt,ze,Ce,Ae-he.A,Ce,Ae,qt);return De+=P.fa,P.j+Ot<P.o?(i(U.ec,U.fc,Ie,De,qt),i(U.cc,U.dc,Be,Ge,zt),i(U.Mc,U.Nc,dt,ze,zt),ae--):1&Ot||_e(Ie,De,null,null,Be,Ge,dt,ze,Be,Ge,dt,ze,Ce,Ae+he.A,null,null,qt),ae}function vi(P,U,ae){var he=P.F,Ce=[P.J];if(he!=null){var Ae=P.U,_e=U.ba.S,Ie=_e==Md||_e==zd;U=U.ba.f.RGBA;var De=[0],Be=P.ka;De[0]=P.T,P.Kb&&(Be==0?--De[0]:(--Be,Ce[0]-=P.width),P.j+P.ka+P.T==P.o&&(De[0]=P.o-P.j-Be));var Ge=U.eb;Be=U.fb+Be*U.A,P=Pd(he,Ce[0],P.width,Ae,De,Ge,Be+(Ie?0:3),U.A),r(ae==De),P&&Fr(_e)&&ko(Ge,Be,Ie,Ae,De,U.A)}return 0}function $a(P){var U=P.ma,ae=U.ba.S,he=11>ae,Ce=ae==zs||ae==nl||ae==Md||ae==fd||ae==12||Fr(ae);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!el(U.Oa,P,Ce?11:12))return 0;if(Ce&&Fr(ae)&&Zo(),P.da)alert("todo:use_scaling");else{if(he){if(U.Ib=Qi,P.Kb){if(ae=P.U+1>>1,U.memory=s(P.U+2*ae),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+P.U,U.Mc=U.cc,U.Nc=U.dc+ae,U.Ib=Ta,Zo()}}else alert("todo:EmitYUV");Ce&&(U.Jb=vi,he&&ts())}if(he&&!Wd){for(P=0;256>P;++P)ho[P]=89858*(P-128)+Nh>>Zl,oj[P]=-22014*(P-128)+Nh,Ky[P]=-45773*(P-128),Om[P]=113618*(P-128)+Nh>>Zl;for(P=Nu;P<Ud;++P)U=76283*(P-16)+Nh>>Zl,lj[P-Nu]=Jr(U,255),cj[P-Nu]=Jr(U+8>>4,15);Wd=1}return 1}function vr(P){var U=P.ma,ae=P.U,he=P.T;return r(!(1&P.ka)),0>=ae||0>=he?0:(ae=U.Ib(P,U),U.Jb!=null&&U.Jb(P,U,ae),U.Dc+=ae,1)}function Ia(P){P.ma.memory=null}function ml(P,U,ae,he){return $(P,8)!=47?0:(U[0]=$(P,14)+1,ae[0]=$(P,14)+1,he[0]=$(P,1),$(P,3)!=0?0:!P.h)}function pa(P,U){if(4>P)return P+1;var ae=P-2>>1;return(2+(1&P)<<ae)+$(U,ae)+1}function Ds(P,U){return 120<U?U-120:1<=(ae=((ae=Fe[U-1])>>4)*P+(8-(15&ae)))?ae:1;var ae}function Xr(P,U,ae){var he=H(ae),Ce=P[U+=255&he].g-8;return 0<Ce&&(ge(ae,ae.u+8),he=H(ae),U+=P[U].value,U+=he&(1<<Ce)-1),ge(ae,ae.u+P[U].g),P[U].value}function $t(P,U,ae){return ae.g+=P.g,ae.value+=P.value<<U>>>0,r(8>=ae.g),P.g}function Qn(P,U,ae){var he=P.xc;return r((U=he==0?0:P.vc[P.md*(ae>>he)+(U>>he)])<P.Wb),P.Ya[U]}function er(P,U,ae,he){var Ce=P.ab,Ae=P.c*U,_e=P.C;U=_e+U;var Ie=ae,De=he;for(he=P.Ta,ae=P.Ua;0<Ce--;){var Be=P.gc[Ce],Ge=_e,dt=U,ze=Ie,Ye=De,it=(De=he,Ie=ae,Be.Ea);switch(r(Ge<dt),r(dt<=Be.nc),Be.hc){case 2:g(ze,Ye,(dt-Ge)*it,De,Ie);break;case 0:var Et=Ge,lt=dt,Nt=De,Ot=Ie,qt=(gr=Be).Ea;Et==0&&(je(ze,Ye,null,null,1,Nt,Ot),xn(ze,Ye+1,0,0,qt-1,Nt,Ot+1),Ye+=qt,Ot+=qt,++Et);for(var zt=1<<gr.b,Nr=zt-1,cr=yt(qt,gr.b),un=gr.K,gr=gr.w+(Et>>gr.b)*cr;Et<lt;){var Wn=un,Ji=gr,bn=1;for(h(ze,Ye,Nt,Ot-qt,1,Nt,Ot);bn<qt;){var dr=(bn&~Nr)+zt;dr>qt&&(dr=qt),(0,R[Wn[Ji++]>>8&15])(ze,Ye+ +bn,Nt,Ot+bn-qt,dr-bn,Nt,Ot+bn),bn=dr}Ye+=qt,Ot+=qt,++Et&Nr||(gr+=cr)}dt!=Be.nc&&i(De,Ie-it,De,Ie+(dt-Ge-1)*it,it);break;case 1:for(it=ze,lt=Ye,qt=(ze=Be.Ea)-(Ot=ze&~(Nt=(Ye=1<<Be.b)-1)),Et=yt(ze,Be.b),zt=Be.K,Be=Be.w+(Ge>>Be.b)*Et;Ge<dt;){for(Nr=zt,cr=Be,un=new xr,gr=lt+Ot,Wn=lt+ze;lt<gr;)tr(Nr[cr++],un),V(un,it,lt,Ye,De,Ie),lt+=Ye,Ie+=Ye;lt<Wn&&(tr(Nr[cr++],un),V(un,it,lt,qt,De,Ie),lt+=qt,Ie+=qt),++Ge&Nt||(Be+=Et)}break;case 3:if(ze==De&&Ye==Ie&&0<Be.b){for(lt=De,ze=it=Ie+(dt-Ge)*it-(Ot=(dt-Ge)*yt(Be.Ea,Be.b)),Ye=De,Nt=Ie,Et=[],Ot=(qt=Ot)-1;0<=Ot;--Ot)Et[Ot]=Ye[Nt+Ot];for(Ot=qt-1;0<=Ot;--Ot)lt[ze+Ot]=Et[Ot];b(Be,Ge,dt,De,it,De,Ie)}else b(Be,Ge,dt,ze,Ye,De,Ie)}Ie=he,De=ae}De!=ae&&i(he,ae,Ie,De,Ae)}function Yi(P,U){var ae=P.V,he=P.Ba+P.c*P.C,Ce=U-P.C;if(r(U<=P.l.o),r(16>=Ce),0<Ce){var Ae=P.l,_e=P.Ta,Ie=P.Ua,De=Ae.width;if(er(P,Ce,ae,he),Ce=Ie=[Ie],r((ae=P.C)<(he=U)),r(Ae.v<Ae.va),he>Ae.o&&(he=Ae.o),ae<Ae.j){var Be=Ae.j-ae;ae=Ae.j,Ce[0]+=Be*De}if(ae>=he?ae=0:(Ce[0]+=4*Ae.v,Ae.ka=ae-Ae.j,Ae.U=Ae.va-Ae.v,Ae.T=he-ae,ae=1),ae){if(Ie=Ie[0],11>(ae=P.ca).S){var Ge=ae.f.RGBA,dt=(he=ae.S,Ce=Ae.U,Ae=Ae.T,Be=Ge.eb,Ge.A),ze=Ae;for(Ge=Ge.fb+P.Ma*Ge.A;0<ze--;){var Ye=_e,it=Ie,Et=Ce,lt=Be,Nt=Ge;switch(he){case Sh:te(Ye,it,Et,lt,Nt);break;case zs:ue(Ye,it,Et,lt,Nt);break;case Ld:ue(Ye,it,Et,lt,Nt),ko(lt,Nt,0,Et,1,0);break;case Su:Me(Ye,it,Et,lt,Nt);break;case nl:Yt(Ye,it,Et,lt,Nt,1);break;case Cu:Yt(Ye,it,Et,lt,Nt,1),ko(lt,Nt,0,Et,1,0);break;case Md:Yt(Ye,it,Et,lt,Nt,0);break;case zd:Yt(Ye,it,Et,lt,Nt,0),ko(lt,Nt,1,Et,1,0);break;case fd:ve(Ye,it,Et,lt,Nt);break;case y:ve(Ye,it,Et,lt,Nt),tl(lt,Nt,Et,1,0);break;case Wc:Ne(Ye,it,Et,lt,Nt);break;default:r(0)}Ie+=De,Ge+=dt}P.Ma+=Ae}else alert("todo:EmitRescaledRowsYUVA");r(P.Ma<=ae.height)}}P.C=U,r(P.C<=P.i)}function Yn(P){var U;if(0<P.ua)return 0;for(U=0;U<P.Wb;++U){var ae=P.Ya[U].G,he=P.Ya[U].H;if(0<ae[1][he[1]+0].g||0<ae[2][he[2]+0].g||0<ae[3][he[3]+0].g)return 0}return 1}function vn(P,U,ae,he,Ce,Ae){if(P.Z!=0){var _e=P.qd,Ie=P.rd;for(r(pi[P.Z]!=null);U<ae;++U)pi[P.Z](_e,Ie,he,Ce,he,Ce,Ae),_e=he,Ie=Ce,Ce+=Ae;P.qd=_e,P.rd=Ie}}function Bi(P,U){var ae=P.l.ma,he=ae.Z==0||ae.Z==1?P.l.j:P.C;if(he=P.C<he?he:P.C,r(U<=P.l.o),U>he){var Ce=P.l.width,Ae=ae.ca,_e=ae.tb+Ce*he,Ie=P.V,De=P.Ba+P.c*he,Be=P.gc;r(P.ab==1),r(Be[0].hc==3),A(Be[0],he,U,Ie,De,Ae,_e),vn(ae,he,U,Ae,_e,Ce)}P.C=P.Ma=U}function Zi(P,U,ae,he,Ce,Ae,_e){var Ie=P.$/he,De=P.$%he,Be=P.m,Ge=P.s,dt=ae+P.$,ze=dt;Ce=ae+he*Ce;var Ye=ae+he*Ae,it=280+Ge.ua,Et=P.Pb?Ie:16777216,lt=0<Ge.ua?Ge.Wa:null,Nt=Ge.wc,Ot=dt<Ye?Qn(Ge,De,Ie):null;r(P.C<Ae),r(Ye<=Ce);var qt=!1;e:for(;;){for(;qt||dt<Ye;){var zt=0;if(Ie>=Et){var Nr=dt-ae;r((Et=P).Pb),Et.wd=Et.m,Et.xd=Nr,0<Et.s.ua&&at(Et.s.Wa,Et.s.vb),Et=Ie+mt}if(De&Nt||(Ot=Qn(Ge,De,Ie)),r(Ot!=null),Ot.Qb&&(U[dt]=Ot.qb,qt=!0),!qt)if(be(Be),Ot.jc){zt=Be,Nr=U;var cr=dt,un=Ot.pd[H(zt)&da-1];r(Ot.jc),256>un.g?(ge(zt,zt.u+un.g),Nr[cr]=un.value,zt=0):(ge(zt,zt.u+un.g-256),r(256<=un.value),zt=un.value),zt==0&&(qt=!0)}else zt=Xr(Ot.G[0],Ot.H[0],Be);if(Be.h)break;if(qt||256>zt){if(!qt)if(Ot.nd)U[dt]=(Ot.qb|zt<<8)>>>0;else{if(be(Be),qt=Xr(Ot.G[1],Ot.H[1],Be),be(Be),Nr=Xr(Ot.G[2],Ot.H[2],Be),cr=Xr(Ot.G[3],Ot.H[3],Be),Be.h)break;U[dt]=(cr<<24|qt<<16|zt<<8|Nr)>>>0}if(qt=!1,++dt,++De>=he&&(De=0,++Ie,_e!=null&&Ie<=Ae&&!(Ie%16)&&_e(P,Ie),lt!=null))for(;ze<dt;)zt=U[ze++],lt.X[(506832829*zt&4294967295)>>>lt.Mb]=zt}else if(280>zt){if(zt=pa(zt-256,Be),Nr=Xr(Ot.G[4],Ot.H[4],Be),be(Be),Nr=Ds(he,Nr=pa(Nr,Be)),Be.h)break;if(dt-ae<Nr||Ce-dt<zt)break e;for(cr=0;cr<zt;++cr)U[dt+cr]=U[dt+cr-Nr];for(dt+=zt,De+=zt;De>=he;)De-=he,++Ie,_e!=null&&Ie<=Ae&&!(Ie%16)&&_e(P,Ie);if(r(dt<=Ce),De&Nt&&(Ot=Qn(Ge,De,Ie)),lt!=null)for(;ze<dt;)zt=U[ze++],lt.X[(506832829*zt&4294967295)>>>lt.Mb]=zt}else{if(!(zt<it))break e;for(qt=zt-280,r(lt!=null);ze<dt;)zt=U[ze++],lt.X[(506832829*zt&4294967295)>>>lt.Mb]=zt;zt=dt,r(!(qt>>>(Nr=lt).Xa)),U[zt]=Nr.X[qt],qt=!0}qt||r(Be.h==oe(Be))}if(P.Pb&&Be.h&&dt<Ce)r(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&at(P.s.vb,P.s.Wa);else{if(Be.h)break e;_e?.(P,Ie>Ae?Ae:Ie),P.a=0,P.$=dt-ae}return 1}return P.a=3,0}function cs(P){r(P!=null),P.vc=null,P.yc=null,P.Ya=null;var U=P.Wa;U!=null&&(U.X=null),P.vb=null,r(P!=null)}function ds(){var P=new Ur;return P==null?null:(P.a=0,P.xb=Ch,Kn("Predictor","VP8LPredictors"),Kn("Predictor","VP8LPredictors_C"),Kn("PredictorAdd","VP8LPredictorsAdd"),Kn("PredictorAdd","VP8LPredictorsAdd_C"),g=Yr,V=tn,te=Ki,ue=Er,ve=wt,Ne=sr,Me=ur,z.VP8LMapColor32b=S,z.VP8LMapColor8b=I,P)}function Vo(P,U,ae,he,Ce){var Ae=1,_e=[P],Ie=[U],De=he.m,Be=he.s,Ge=null,dt=0;e:for(;;){if(ae)for(;Ae&&$(De,1);){var ze=_e,Ye=Ie,it=he,Et=1,lt=it.m,Nt=it.gc[it.ab],Ot=$(lt,2);if(it.Oc&1<<Ot)Ae=0;else{switch(it.Oc|=1<<Ot,Nt.hc=Ot,Nt.Ea=ze[0],Nt.nc=Ye[0],Nt.K=[null],++it.ab,r(4>=it.ab),Ot){case 0:case 1:Nt.b=$(lt,3)+2,Et=Vo(yt(Nt.Ea,Nt.b),yt(Nt.nc,Nt.b),0,it,Nt.K),Nt.K=Nt.K[0];break;case 3:var qt,zt=$(lt,8)+1,Nr=16<zt?0:4<zt?1:2<zt?2:3;if(ze[0]=yt(Nt.Ea,Nr),Nt.b=Nr,qt=Et=Vo(zt,1,0,it,Nt.K)){var cr,un=zt,gr=Nt,Wn=1<<(8>>gr.b),Ji=s(Wn);if(Ji==null)qt=0;else{var bn=gr.K[0],dr=gr.w;for(Ji[0]=gr.K[0][0],cr=1;cr<1*un;++cr)Ji[cr]=rr(bn[dr+cr],Ji[cr-1]);for(;cr<4*Wn;++cr)Ji[cr]=0;gr.K[0]=null,gr.K[0]=Ji,qt=1}}Et=qt;break;case 2:break;default:r(0)}Ae=Et}}if(_e=_e[0],Ie=Ie[0],Ae&&$(De,1)&&!(Ae=1<=(dt=$(De,4))&&11>=dt)){he.a=3;break e}var Jt;if(Jt=Ae)t:{var ba,en,Nn,Si=he,Fs=_e,fo=Ie,qi=dt,ys=ae,Do=Si.m,xs=Si.s,Dn=[null],ai=1,ja=0,ui=tt[qi];r:for(;;){if(ys&&$(Do,1)){var qs=$(Do,3)+2,wa=yt(Fs,qs),si=yt(fo,qs),ss=wa*si;if(!Vo(wa,si,0,Si,Dn))break r;for(Dn=Dn[0],xs.xc=qs,ba=0;ba<ss;++ba){var Ci=Dn[ba]>>8&65535;Dn[ba]=Ci,Ci>=ai&&(ai=Ci+1)}}if(Do.h)break r;for(en=0;5>en;++en){var vs=re[en];!en&&0<qi&&(vs+=1<<qi),ja<vs&&(ja=vs)}var bs=o(ai*ui,ie),Di=ai,ti=o(Di,ce);if(ti==null)var Po=null;else r(65536>=Di),Po=ti;var La=s(ja);if(Po==null||La==null||bs==null){Si.a=1;break r}var Wr=bs;for(ba=Nn=0;ba<ai;++ba){var Hr=Po[ba],oi=Hr.G,vl=Hr.H,Xl=0,al=1,js=0;for(en=0;5>en;++en){vs=re[en],oi[en]=Wr,vl[en]=Nn,!en&&0<qi&&(vs+=1<<qi);i:{var Hd,Vd=vs,Dm=Si,Ui=La,x0=Wr,v0=Nn,Pm=0,pd=Dm.m,dj=$(pd,1);if(a(Ui,0,0,Vd),dj){var b0=$(pd,1)+1,j0=$(pd,1),Rm=$(pd,j0==0?1:8);Ui[Rm]=1,b0==2&&(Ui[Rm=$(pd,8)]=1);var Xs=1}else{var za=s(19),Sf=$(pd,4)+4;if(19<Sf){Dm.a=3;var $d=0;break i}for(Hd=0;Hd<Sf;++Hd)za[Ee[Hd]]=$(pd,3);var Eh=void 0,Au=void 0,Vc=Dm,Mm=za,_h=Vd,Lm=Ui,zm=0,gd=Vc.m,w0=8,S0=o(128,ie);n:for(;Z(S0,0,7,Mm,19);){if($(gd,1)){var Qy=2+2*$(gd,3);if((Eh=2+$(gd,Qy))>_h)break n}else Eh=_h;for(Au=0;Au<_h&&Eh--;){be(gd);var C0=S0[0+(127&H(gd))];ge(gd,gd.u+C0.g);var Gd=C0.value;if(16>Gd)Lm[Au++]=Gd,Gd!=0&&(w0=Gd);else{var Yy=Gd==16,Zy=Gd-16,Xy=B[Zy],N0=$(gd,E[Zy])+Xy;if(Au+N0>_h)break n;for(var Jy=Yy?w0:0;0<N0--;)Lm[Au++]=Jy}}zm=1;break n}zm||(Vc.a=3),Xs=zm}(Xs=Xs&&!pd.h)&&(Pm=Z(x0,v0,8,Ui,Vd)),Xs&&Pm!=0?$d=Pm:(Dm.a=3,$d=0)}if($d==0)break r;if(al&&fe[en]==1&&(al=Wr[Nn].g==0),Xl+=Wr[Nn].g,Nn+=$d,3>=en){var Eu,Bm=La[0];for(Eu=1;Eu<vs;++Eu)La[Eu]>Bm&&(Bm=La[Eu]);js+=Bm}}if(Hr.nd=al,Hr.Qb=0,al&&(Hr.qb=(oi[3][vl[3]+0].value<<24|oi[1][vl[1]+0].value<<16|oi[2][vl[2]+0].value)>>>0,Xl==0&&256>oi[0][vl[0]+0].value&&(Hr.Qb=1,Hr.qb+=oi[0][vl[0]+0].value<<8)),Hr.jc=!Hr.Qb&&6>js,Hr.jc){var Cf,$c=Hr;for(Cf=0;Cf<da;++Cf){var yd=Cf,xd=$c.pd[yd],Fm=$c.G[0][$c.H[0]+yd];256<=Fm.value?(xd.g=Fm.g+256,xd.value=Fm.value):(xd.g=0,xd.value=0,yd>>=$t(Fm,8,xd),yd>>=$t($c.G[1][$c.H[1]+yd],16,xd),yd>>=$t($c.G[2][$c.H[2]+yd],0,xd),$t($c.G[3][$c.H[3]+yd],24,xd))}}}xs.vc=Dn,xs.Wb=ai,xs.Ya=Po,xs.yc=bs,Jt=1;break t}Jt=0}if(!(Ae=Jt)){he.a=3;break e}if(0<dt){if(Be.ua=1<<dt,!Oe(Be.Wa,dt)){he.a=1,Ae=0;break e}}else Be.ua=0;var qm=he,_u=_e,ex=Ie,Th=qm.s,Ih=Th.xc;if(qm.c=_u,qm.i=ex,Th.md=yt(_u,Ih),Th.wc=Ih==0?-1:(1<<Ih)-1,ae){he.xb=Hc;break e}if((Ge=s(_e*Ie))==null){he.a=1,Ae=0;break e}Ae=(Ae=Zi(he,Ge,0,_e,Ie,Ie,null))&&!De.h;break e}return Ae?(Ce!=null?Ce[0]=Ge:(r(Ge==null),r(ae)),he.$=0,ae||cs(Be)):cs(Be),Ae}function $o(P,U){var ae=P.c*P.i,he=ae+U+16*U;return r(P.c<=U),P.V=s(he),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+ae+U,1)}function Ga(P,U){var ae=P.C,he=U-ae,Ce=P.V,Ae=P.Ba+P.c*ae;for(r(U<=P.l.o);0<he;){var _e=16<he?16:he,Ie=P.l.ma,De=P.l.width,Be=De*_e,Ge=Ie.ca,dt=Ie.tb+De*ae,ze=P.Ta,Ye=P.Ua;er(P,_e,Ce,Ae),rl(ze,Ye,Ge,dt,Be),vn(Ie,ae,ae+_e,Ge,dt,De),he-=_e,Ce+=_e*P.c,ae+=_e}r(ae==U),P.C=P.Ma=U}function fi(){this.ub=this.yd=this.td=this.Rb=0}function kn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Go(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ka(){this.Yb=(function(){var P=[];return(function U(ae,he,Ce){for(var Ae=Ce[he],_e=0;_e<Ae&&(ae.push(Ce.length>he+1?[]:0),!(Ce.length<he+1));_e++)U(ae[_e],he+1,Ce)})(P,0,[3,11]),P})()}function Oi(){this.jb=s(3),this.Wc=l([4,8],Ka),this.Xc=l([4,17],Ka)}function Rt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function io(){this.ld=this.La=this.dd=this.tc=0}function zn(){this.Na=this.la=0}function us(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function kl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _n(){this.uc=this.M=this.Nb=0,this.wa=Array(new io),this.Y=0,this.ya=Array(new kl),this.aa=0,this.l=new Rn}function An(){this.y=s(16),this.f=s(8),this.ea=s(8)}function on(){this.cb=this.a=0,this.sc="",this.m=new X,this.Od=new fi,this.Kc=new kn,this.ed=new Rt,this.Qa=new Go,this.Ic=this.$c=this.Aa=0,this.D=new _n,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,X),this.ia=0,this.pb=o(4,us),this.Pa=new Oi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new An),this.Hd=0,this.rb=Array(new zn),this.sb=0,this.wa=Array(new io),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new kl),this.L=this.aa=0,this.gd=l([4,2],io),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Jr(P,U){return 0>P?0:P>U?U:P}function Rn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hs(){var P=new on;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,br||(br=ir)),P}function Mr(P,U,ae){return P.a==0&&(P.a=U,P.sc=ae,P.cb=0),0}function Qa(P,U,ae){return 3<=ae&&P[U+0]==157&&P[U+1]==1&&P[U+2]==42}function Ao(P,U){if(P==null)return 0;if(P.a=0,P.sc="OK",U==null)return Mr(P,2,"null VP8Io passed to VP8GetHeaders()");var ae=U.data,he=U.w,Ce=U.ha;if(4>Ce)return Mr(P,7,"Truncated header.");var Ae=ae[he+0]|ae[he+1]<<8|ae[he+2]<<16,_e=P.Od;if(_e.Rb=!(1&Ae),_e.td=Ae>>1&7,_e.yd=Ae>>4&1,_e.ub=Ae>>5,3<_e.td)return Mr(P,3,"Incorrect keyframe parameters.");if(!_e.yd)return Mr(P,4,"Frame not displayable.");he+=3,Ce-=3;var Ie=P.Kc;if(_e.Rb){if(7>Ce)return Mr(P,7,"cannot parse picture header");if(!Qa(ae,he,Ce))return Mr(P,3,"Bad code word");Ie.c=16383&(ae[he+4]<<8|ae[he+3]),Ie.Td=ae[he+4]>>6,Ie.i=16383&(ae[he+6]<<8|ae[he+5]),Ie.Ud=ae[he+6]>>6,he+=7,Ce-=7,P.za=Ie.c+15>>4,P.Ub=Ie.i+15>>4,U.width=Ie.c,U.height=Ie.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,a((Ae=P.Pa).jb,0,255,Ae.jb.length),r((Ae=P.Qa)!=null),Ae.Cb=0,Ae.Bb=0,Ae.Fb=1,a(Ae.Zb,0,0,Ae.Zb.length),a(Ae.Lb,0,0,Ae.Lb)}if(_e.ub>Ce)return Mr(P,7,"bad partition length");Q(Ae=P.m,ae,he,_e.ub),he+=_e.ub,Ce-=_e.ub,_e.Rb&&(Ie.Ld=ke(Ae),Ie.Kd=ke(Ae)),Ie=P.Qa;var De,Be=P.Pa;if(r(Ae!=null),r(Ie!=null),Ie.Cb=ke(Ae),Ie.Cb){if(Ie.Bb=ke(Ae),ke(Ae)){for(Ie.Fb=ke(Ae),De=0;4>De;++De)Ie.Zb[De]=ke(Ae)?le(Ae,7):0;for(De=0;4>De;++De)Ie.Lb[De]=ke(Ae)?le(Ae,6):0}if(Ie.Bb)for(De=0;3>De;++De)Be.jb[De]=ke(Ae)?de(Ae,8):255}else Ie.Bb=0;if(Ae.Ka)return Mr(P,3,"cannot parse segment header");if((Ie=P.ed).zd=ke(Ae),Ie.Tb=de(Ae,6),Ie.wb=de(Ae,3),Ie.Pc=ke(Ae),Ie.Pc&&ke(Ae)){for(Be=0;4>Be;++Be)ke(Ae)&&(Ie.vd[Be]=le(Ae,6));for(Be=0;4>Be;++Be)ke(Ae)&&(Ie.od[Be]=le(Ae,6))}if(P.L=Ie.Tb==0?0:Ie.zd?1:2,Ae.Ka)return Mr(P,3,"cannot parse filter header");var Ge=Ce;if(Ce=De=he,he=De+Ge,Ie=Ge,P.Xb=(1<<de(P.m,2))-1,Ge<3*(Be=P.Xb))ae=7;else{for(De+=3*Be,Ie-=3*Be,Ge=0;Ge<Be;++Ge){var dt=ae[Ce+0]|ae[Ce+1]<<8|ae[Ce+2]<<16;dt>Ie&&(dt=Ie),Q(P.Jc[+Ge],ae,De,dt),De+=dt,Ie-=dt,Ce+=3}Q(P.Jc[+Be],ae,De,Ie),ae=De<he?0:5}if(ae!=0)return Mr(P,ae,"cannot parse partitions");for(ae=de(De=P.m,7),Ce=ke(De)?le(De,4):0,he=ke(De)?le(De,4):0,Ie=ke(De)?le(De,4):0,Be=ke(De)?le(De,4):0,De=ke(De)?le(De,4):0,Ge=P.Qa,dt=0;4>dt;++dt){if(Ge.Cb){var ze=Ge.Zb[dt];Ge.Fb||(ze+=ae)}else{if(0<dt){P.pb[dt]=P.pb[0];continue}ze=ae}var Ye=P.pb[dt];Ye.Sc[0]=kt[Jr(ze+Ce,127)],Ye.Sc[1]=Kt[Jr(ze+0,127)],Ye.Eb[0]=2*kt[Jr(ze+he,127)],Ye.Eb[1]=101581*Kt[Jr(ze+Ie,127)]>>16,8>Ye.Eb[1]&&(Ye.Eb[1]=8),Ye.Qc[0]=kt[Jr(ze+Be,117)],Ye.Qc[1]=Kt[Jr(ze+De,127)],Ye.lc=ze+De}if(!_e.Rb)return Mr(P,4,"Not a key frame.");for(ke(Ae),_e=P.Pa,ae=0;4>ae;++ae){for(Ce=0;8>Ce;++Ce)for(he=0;3>he;++he)for(Ie=0;11>Ie;++Ie)Be=He(Ae,ii[ae][Ce][he][Ie])?de(Ae,8):il[ae][Ce][he][Ie],_e.Wc[ae][Ce].Yb[he][Ie]=Be;for(Ce=0;17>Ce;++Ce)_e.Xc[ae][Ce]=_e.Wc[ae][Ln[Ce]]}return P.kc=ke(Ae),P.kc&&(P.Bd=de(Ae,8)),P.cb=1}function ir(P,U,ae,he,Ce,Ae,_e){var Ie=U[Ce].Yb[ae];for(ae=0;16>Ce;++Ce){if(!He(P,Ie[ae+0]))return Ce;for(;!He(P,Ie[ae+1]);)if(Ie=U[++Ce].Yb[0],ae=0,Ce==16)return 16;var De=U[Ce+1].Yb;if(He(P,Ie[ae+2])){var Be=P,Ge=0;if(He(Be,(ze=Ie)[(dt=ae)+3]))if(He(Be,ze[dt+6])){for(Ie=0,dt=2*(Ge=He(Be,ze[dt+8]))+(ze=He(Be,ze[dt+9+Ge])),Ge=0,ze=Cn[dt];ze[Ie];++Ie)Ge+=Ge+He(Be,ze[Ie]);Ge+=3+(8<<dt)}else He(Be,ze[dt+7])?(Ge=7+2*He(Be,165),Ge+=He(Be,145)):Ge=5+He(Be,159);else Ge=He(Be,ze[dt+4])?3+He(Be,ze[dt+5]):2;Ie=De[2]}else Ge=1,Ie=De[1];De=_e+Bs[Ce],0>(Be=P).b&&Le(Be);var dt,ze=Be.b,Ye=(dt=Be.Ca>>1)-(Be.I>>ze)>>31;--Be.b,Be.Ca+=Ye,Be.Ca|=1,Be.I-=(dt+1&Ye)<<ze,Ae[De]=((Ge^Ye)-Ye)*he[(0<Ce)+0]}return 16}function Bn(P){var U=P.rb[P.sb-1];U.la=0,U.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function Ya(P,U,ae,he,Ce){Ce=P[U+ae+32*he]+(Ce>>3),P[U+ae+32*he]=-256&Ce?0>Ce?0:255:Ce}function di(P,U,ae,he,Ce,Ae){Ya(P,U,0,ae,he+Ce),Ya(P,U,1,ae,he+Ae),Ya(P,U,2,ae,he-Ae),Ya(P,U,3,ae,he-Ce)}function Or(P){return(20091*P>>16)+P}function Xi(P,U,ae,he){var Ce,Ae=0,_e=s(16);for(Ce=0;4>Ce;++Ce){var Ie=P[U+0]+P[U+8],De=P[U+0]-P[U+8],Be=(35468*P[U+4]>>16)-Or(P[U+12]),Ge=Or(P[U+4])+(35468*P[U+12]>>16);_e[Ae+0]=Ie+Ge,_e[Ae+1]=De+Be,_e[Ae+2]=De-Be,_e[Ae+3]=Ie-Ge,Ae+=4,U++}for(Ce=Ae=0;4>Ce;++Ce)Ie=(P=_e[Ae+0]+4)+_e[Ae+8],De=P-_e[Ae+8],Be=(35468*_e[Ae+4]>>16)-Or(_e[Ae+12]),Ya(ae,he,0,0,Ie+(Ge=Or(_e[Ae+4])+(35468*_e[Ae+12]>>16))),Ya(ae,he,1,0,De+Be),Ya(ae,he,2,0,De-Be),Ya(ae,he,3,0,Ie-Ge),Ae++,he+=32}function nt(P,U,ae,he){var Ce=P[U+0]+4,Ae=35468*P[U+4]>>16,_e=Or(P[U+4]),Ie=35468*P[U+1]>>16;di(ae,he,0,Ce+_e,P=Or(P[U+1]),Ie),di(ae,he,1,Ce+Ae,P,Ie),di(ae,he,2,Ce-Ae,P,Ie),di(ae,he,3,Ce-_e,P,Ie)}function Pe(P,U,ae,he,Ce){Xi(P,U,ae,he),Ce&&Xi(P,U+16,ae,he+4)}function Ht(P,U,ae,he){$e(P,U+0,ae,he,1),$e(P,U+32,ae,he+128,1)}function ri(P,U,ae,he){var Ce;for(P=P[U+0]+4,Ce=0;4>Ce;++Ce)for(U=0;4>U;++U)Ya(ae,he,U,Ce,P)}function la(P,U,ae,he){P[U+0]&&Tt(P,U+0,ae,he),P[U+16]&&Tt(P,U+16,ae,he+4),P[U+32]&&Tt(P,U+32,ae,he+128),P[U+48]&&Tt(P,U+48,ae,he+128+4)}function Ps(P,U,ae,he){var Ce,Ae=s(16);for(Ce=0;4>Ce;++Ce){var _e=P[U+0+Ce]+P[U+12+Ce],Ie=P[U+4+Ce]+P[U+8+Ce],De=P[U+4+Ce]-P[U+8+Ce],Be=P[U+0+Ce]-P[U+12+Ce];Ae[0+Ce]=_e+Ie,Ae[8+Ce]=_e-Ie,Ae[4+Ce]=Be+De,Ae[12+Ce]=Be-De}for(Ce=0;4>Ce;++Ce)_e=(P=Ae[0+4*Ce]+3)+Ae[3+4*Ce],Ie=Ae[1+4*Ce]+Ae[2+4*Ce],De=Ae[1+4*Ce]-Ae[2+4*Ce],Be=P-Ae[3+4*Ce],ae[he+0]=_e+Ie>>3,ae[he+16]=Be+De>>3,ae[he+32]=_e-Ie>>3,ae[he+48]=Be-De>>3,he+=64}function Ko(P,U,ae){var he,Ce=U-32,Ae=Ls,_e=255-P[Ce-1];for(he=0;he<ae;++he){var Ie,De=Ae,Be=_e+P[U-1];for(Ie=0;Ie<ae;++Ie)P[U+Ie]=De[Be+P[Ce+Ie]];U+=32}}function ga(P,U){Ko(P,U,4)}function Cr(P,U){Ko(P,U,8)}function Jn(P,U){Ko(P,U,16)}function Dl(P,U){var ae;for(ae=0;16>ae;++ae)i(P,U+32*ae,P,U-32,16)}function Uc(P,U){var ae;for(ae=16;0<ae;--ae)a(P,U,P[U-1],16),U+=32}function Oa(P,U,ae){var he;for(he=0;16>he;++he)a(U,ae+32*he,P,16)}function Za(P,U){var ae,he=16;for(ae=0;16>ae;++ae)he+=P[U-1+32*ae]+P[U+ae-32];Oa(he>>5,P,U)}function Eo(P,U){var ae,he=8;for(ae=0;16>ae;++ae)he+=P[U-1+32*ae];Oa(he>>4,P,U)}function Pl(P,U){var ae,he=8;for(ae=0;16>ae;++ae)he+=P[U+ae-32];Oa(he>>4,P,U)}function bi(P,U){Oa(128,P,U)}function Ft(P,U,ae){return P+2*U+ae+2>>2}function ca(P,U){var ae,he=U-32;for(he=new Uint8Array([Ft(P[he-1],P[he+0],P[he+1]),Ft(P[he+0],P[he+1],P[he+2]),Ft(P[he+1],P[he+2],P[he+3]),Ft(P[he+2],P[he+3],P[he+4])]),ae=0;4>ae;++ae)i(P,U+32*ae,he,0,he.length)}function Zt(P,U){var ae=P[U-1],he=P[U-1+32],Ce=P[U-1+64],Ae=P[U-1+96];Je(P,U+0,16843009*Ft(P[U-1-32],ae,he)),Je(P,U+32,16843009*Ft(ae,he,Ce)),Je(P,U+64,16843009*Ft(he,Ce,Ae)),Je(P,U+96,16843009*Ft(Ce,Ae,Ae))}function hd(P,U){var ae,he=4;for(ae=0;4>ae;++ae)he+=P[U+ae-32]+P[U-1+32*ae];for(he>>=3,ae=0;4>ae;++ae)a(P,U+32*ae,he,4)}function Lr(P,U){var ae=P[U-1+0],he=P[U-1+32],Ce=P[U-1+64],Ae=P[U-1-32],_e=P[U+0-32],Ie=P[U+1-32],De=P[U+2-32],Be=P[U+3-32];P[U+0+96]=Ft(he,Ce,P[U-1+96]),P[U+1+96]=P[U+0+64]=Ft(ae,he,Ce),P[U+2+96]=P[U+1+64]=P[U+0+32]=Ft(Ae,ae,he),P[U+3+96]=P[U+2+64]=P[U+1+32]=P[U+0+0]=Ft(_e,Ae,ae),P[U+3+64]=P[U+2+32]=P[U+1+0]=Ft(Ie,_e,Ae),P[U+3+32]=P[U+2+0]=Ft(De,Ie,_e),P[U+3+0]=Ft(Be,De,Ie)}function Tn(P,U){var ae=P[U+1-32],he=P[U+2-32],Ce=P[U+3-32],Ae=P[U+4-32],_e=P[U+5-32],Ie=P[U+6-32],De=P[U+7-32];P[U+0+0]=Ft(P[U+0-32],ae,he),P[U+1+0]=P[U+0+32]=Ft(ae,he,Ce),P[U+2+0]=P[U+1+32]=P[U+0+64]=Ft(he,Ce,Ae),P[U+3+0]=P[U+2+32]=P[U+1+64]=P[U+0+96]=Ft(Ce,Ae,_e),P[U+3+32]=P[U+2+64]=P[U+1+96]=Ft(Ae,_e,Ie),P[U+3+64]=P[U+2+96]=Ft(_e,Ie,De),P[U+3+96]=Ft(Ie,De,De)}function gc(P,U){var ae=P[U-1+0],he=P[U-1+32],Ce=P[U-1+64],Ae=P[U-1-32],_e=P[U+0-32],Ie=P[U+1-32],De=P[U+2-32],Be=P[U+3-32];P[U+0+0]=P[U+1+64]=Ae+_e+1>>1,P[U+1+0]=P[U+2+64]=_e+Ie+1>>1,P[U+2+0]=P[U+3+64]=Ie+De+1>>1,P[U+3+0]=De+Be+1>>1,P[U+0+96]=Ft(Ce,he,ae),P[U+0+64]=Ft(he,ae,Ae),P[U+0+32]=P[U+1+96]=Ft(ae,Ae,_e),P[U+1+32]=P[U+2+96]=Ft(Ae,_e,Ie),P[U+2+32]=P[U+3+96]=Ft(_e,Ie,De),P[U+3+32]=Ft(Ie,De,Be)}function Rs(P,U){var ae=P[U+0-32],he=P[U+1-32],Ce=P[U+2-32],Ae=P[U+3-32],_e=P[U+4-32],Ie=P[U+5-32],De=P[U+6-32],Be=P[U+7-32];P[U+0+0]=ae+he+1>>1,P[U+1+0]=P[U+0+64]=he+Ce+1>>1,P[U+2+0]=P[U+1+64]=Ce+Ae+1>>1,P[U+3+0]=P[U+2+64]=Ae+_e+1>>1,P[U+0+32]=Ft(ae,he,Ce),P[U+1+32]=P[U+0+96]=Ft(he,Ce,Ae),P[U+2+32]=P[U+1+96]=Ft(Ce,Ae,_e),P[U+3+32]=P[U+2+96]=Ft(Ae,_e,Ie),P[U+3+64]=Ft(_e,Ie,De),P[U+3+96]=Ft(Ie,De,Be)}function fs(P,U){var ae=P[U-1+0],he=P[U-1+32],Ce=P[U-1+64],Ae=P[U-1+96];P[U+0+0]=ae+he+1>>1,P[U+2+0]=P[U+0+32]=he+Ce+1>>1,P[U+2+32]=P[U+0+64]=Ce+Ae+1>>1,P[U+1+0]=Ft(ae,he,Ce),P[U+3+0]=P[U+1+32]=Ft(he,Ce,Ae),P[U+3+32]=P[U+1+64]=Ft(Ce,Ae,Ae),P[U+3+64]=P[U+2+64]=P[U+0+96]=P[U+1+96]=P[U+2+96]=P[U+3+96]=Ae}function Xa(P,U){var ae=P[U-1+0],he=P[U-1+32],Ce=P[U-1+64],Ae=P[U-1+96],_e=P[U-1-32],Ie=P[U+0-32],De=P[U+1-32],Be=P[U+2-32];P[U+0+0]=P[U+2+32]=ae+_e+1>>1,P[U+0+32]=P[U+2+64]=he+ae+1>>1,P[U+0+64]=P[U+2+96]=Ce+he+1>>1,P[U+0+96]=Ae+Ce+1>>1,P[U+3+0]=Ft(Ie,De,Be),P[U+2+0]=Ft(_e,Ie,De),P[U+1+0]=P[U+3+32]=Ft(ae,_e,Ie),P[U+1+32]=P[U+3+64]=Ft(he,ae,_e),P[U+1+64]=P[U+3+96]=Ft(Ce,he,ae),P[U+1+96]=Ft(Ae,Ce,he)}function mi(P,U){var ae;for(ae=0;8>ae;++ae)i(P,U+32*ae,P,U-32,8)}function Ks(P,U){var ae;for(ae=0;8>ae;++ae)a(P,U,P[U-1],8),U+=32}function Ja(P,U,ae){var he;for(he=0;8>he;++he)a(U,ae+32*he,P,8)}function Qo(P,U){var ae,he=8;for(ae=0;8>ae;++ae)he+=P[U+ae-32]+P[U-1+32*ae];Ja(he>>4,P,U)}function yc(P,U){var ae,he=4;for(ae=0;8>ae;++ae)he+=P[U+ae-32];Ja(he>>3,P,U)}function ki(P,U){var ae,he=4;for(ae=0;8>ae;++ae)he+=P[U-1+32*ae];Ja(he>>3,P,U)}function ms(P,U){Ja(128,P,U)}function ji(P,U,ae){var he=P[U-ae],Ce=P[U+0],Ae=3*(Ce-he)+yl[1020+P[U-2*ae]-P[U+ae]],_e=bc[112+(Ae+4>>3)];P[U-ae]=Ls[255+he+bc[112+(Ae+3>>3)]],P[U+0]=Ls[255+Ce-_e]}function Yo(P,U,ae,he){var Ce=P[U+0],Ae=P[U+ae];return gs[255+P[U-2*ae]-P[U-ae]]>he||gs[255+Ae-Ce]>he}function mn(P,U,ae,he){return 4*gs[255+P[U-ae]-P[U+0]]+gs[255+P[U-2*ae]-P[U+ae]]<=he}function $l(P,U,ae,he,Ce){var Ae=P[U-3*ae],_e=P[U-2*ae],Ie=P[U-ae],De=P[U+0],Be=P[U+ae],Ge=P[U+2*ae],dt=P[U+3*ae];return 4*gs[255+Ie-De]+gs[255+_e-Be]>he?0:gs[255+P[U-4*ae]-Ae]<=Ce&&gs[255+Ae-_e]<=Ce&&gs[255+_e-Ie]<=Ce&&gs[255+dt-Ge]<=Ce&&gs[255+Ge-Be]<=Ce&&gs[255+Be-De]<=Ce}function ya(P,U,ae,he){var Ce=2*he+1;for(he=0;16>he;++he)mn(P,U+he,ae,Ce)&&ji(P,U+he,ae)}function ao(P,U,ae,he){var Ce=2*he+1;for(he=0;16>he;++he)mn(P,U+he*ae,1,Ce)&&ji(P,U+he*ae,1)}function Gl(P,U,ae,he){var Ce;for(Ce=3;0<Ce;--Ce)ya(P,U+=4*ae,ae,he)}function Fn(P,U,ae,he){var Ce;for(Ce=3;0<Ce;--Ce)ao(P,U+=4,ae,he)}function _o(P,U,ae,he,Ce,Ae,_e,Ie){for(Ae=2*Ae+1;0<Ce--;){if($l(P,U,ae,Ae,_e))if(Yo(P,U,ae,Ie))ji(P,U,ae);else{var De=P,Be=U,Ge=ae,dt=De[Be-2*Ge],ze=De[Be-Ge],Ye=De[Be+0],it=De[Be+Ge],Et=De[Be+2*Ge],lt=27*(Ot=yl[1020+3*(Ye-ze)+yl[1020+dt-it]])+63>>7,Nt=18*Ot+63>>7,Ot=9*Ot+63>>7;De[Be-3*Ge]=Ls[255+De[Be-3*Ge]+Ot],De[Be-2*Ge]=Ls[255+dt+Nt],De[Be-Ge]=Ls[255+ze+lt],De[Be+0]=Ls[255+Ye-lt],De[Be+Ge]=Ls[255+it-Nt],De[Be+2*Ge]=Ls[255+Et-Ot]}U+=he}}function To(P,U,ae,he,Ce,Ae,_e,Ie){for(Ae=2*Ae+1;0<Ce--;){if($l(P,U,ae,Ae,_e))if(Yo(P,U,ae,Ie))ji(P,U,ae);else{var De=P,Be=U,Ge=ae,dt=De[Be-Ge],ze=De[Be+0],Ye=De[Be+Ge],it=bc[112+(4+(Et=3*(ze-dt))>>3)],Et=bc[112+(Et+3>>3)],lt=it+1>>1;De[Be-2*Ge]=Ls[255+De[Be-2*Ge]+lt],De[Be-Ge]=Ls[255+dt+Et],De[Be+0]=Ls[255+ze-it],De[Be+Ge]=Ls[255+Ye-lt]}U+=he}}function Io(P,U,ae,he,Ce,Ae){_o(P,U,ae,1,16,he,Ce,Ae)}function Rl(P,U,ae,he,Ce,Ae){_o(P,U,1,ae,16,he,Ce,Ae)}function pt(P,U,ae,he,Ce,Ae){var _e;for(_e=3;0<_e;--_e)To(P,U+=4*ae,ae,1,16,he,Ce,Ae)}function ee(P,U,ae,he,Ce,Ae){var _e;for(_e=3;0<_e;--_e)To(P,U+=4,1,ae,16,he,Ce,Ae)}function we(P,U,ae,he,Ce,Ae,_e,Ie){_o(P,U,Ce,1,8,Ae,_e,Ie),_o(ae,he,Ce,1,8,Ae,_e,Ie)}function Re(P,U,ae,he,Ce,Ae,_e,Ie){_o(P,U,1,Ce,8,Ae,_e,Ie),_o(ae,he,1,Ce,8,Ae,_e,Ie)}function We(P,U,ae,he,Ce,Ae,_e,Ie){To(P,U+4*Ce,Ce,1,8,Ae,_e,Ie),To(ae,he+4*Ce,Ce,1,8,Ae,_e,Ie)}function et(P,U,ae,he,Ce,Ae,_e,Ie){To(P,U+4,1,Ce,8,Ae,_e,Ie),To(ae,he+4,1,Ce,8,Ae,_e,Ie)}function Ct(){this.ba=new Kr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new On,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Lt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ar(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gt(){this.ua=0,this.Wa=new Wt,this.vb=new Wt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ce,this.yc=new ie}function Ur(){this.xb=this.a=0,this.l=new Rn,this.ca=new Kr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new se,this.Pb=0,this.wd=new se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gt,this.ab=0,this.gc=o(4,ar),this.Oc=0}function lr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Rn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Sn(P,U,ae,he,Ce,Ae,_e){for(P=P==null?0:P[U+0],U=0;U<_e;++U)Ce[Ae+U]=P+ae[he+U]&255,P=Ce[Ae+U]}function ei(P,U,ae,he,Ce,Ae,_e){var Ie;if(P==null)Sn(null,null,ae,he,Ce,Ae,_e);else for(Ie=0;Ie<_e;++Ie)Ce[Ae+Ie]=P[U+Ie]+ae[he+Ie]&255}function Zr(P,U,ae,he,Ce,Ae,_e){if(P==null)Sn(null,null,ae,he,Ce,Ae,_e);else{var Ie,De=P[U+0],Be=De,Ge=De;for(Ie=0;Ie<_e;++Ie)Be=Ge+(De=P[U+Ie])-Be,Ge=ae[he+Ie]+(-256&Be?0>Be?0:255:Be)&255,Be=De,Ce[Ae+Ie]=Ge}}function Xt(P,U,ae,he){var Ce=U.width,Ae=U.o;if(r(P!=null&&U!=null),0>ae||0>=he||ae+he>Ae)return null;if(!P.Cc){if(P.ga==null){var _e;if(P.ga=new lr,(_e=P.ga==null)||(_e=U.width*U.o,r(P.Gb.length==0),P.Gb=s(_e),P.Uc=0,P.Gb==null?_e=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,_e=1),_e=!_e),!_e){_e=P.ga;var Ie=P.Fa,De=P.P,Be=P.qc,Ge=P.mb,dt=P.nb,ze=De+1,Ye=Be-1,it=_e.l;if(r(Ie!=null&&Ge!=null&&U!=null),pi[0]=null,pi[1]=Sn,pi[2]=ei,pi[3]=Zr,_e.ca=Ge,_e.tb=dt,_e.c=U.width,_e.i=U.height,r(0<_e.c&&0<_e.i),1>=Be)U=0;else if(_e.$a=3&Ie[De+0],_e.Z=Ie[De+0]>>2&3,_e.Lc=Ie[De+0]>>4&3,De=Ie[De+0]>>6&3,0>_e.$a||1<_e.$a||4<=_e.Z||1<_e.Lc||De)U=0;else if(it.put=vr,it.ac=$a,it.bc=Ia,it.ma=_e,it.width=U.width,it.height=U.height,it.Da=U.Da,it.v=U.v,it.va=U.va,it.j=U.j,it.o=U.o,_e.$a)e:{r(_e.$a==1),U=ds();t:for(;;){if(U==null){U=0;break e}if(r(_e!=null),_e.mc=U,U.c=_e.c,U.i=_e.i,U.l=_e.l,U.l.ma=_e,U.l.width=_e.c,U.l.height=_e.i,U.a=0,ye(U.m,Ie,ze,Ye),!Vo(_e.c,_e.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Yn(U.s)?(_e.ic=1,Ie=U.c*U.i,U.Ta=null,U.Ua=0,U.V=s(Ie),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(_e.ic=0,U=$o(U,_e.c)),!U))break t;U=1;break e}_e.mc=null,U=0}else U=Ye>=_e.c*_e.i;_e=!U}if(_e)return null;P.ga.Lc!=1?P.Ga=0:he=Ae-ae}r(P.ga!=null),r(ae+he<=Ae);e:{if(U=(Ie=P.ga).c,Ae=Ie.l.o,Ie.$a==0){if(ze=P.rc,Ye=P.Vc,it=P.Fa,De=P.P+1+ae*U,Be=P.mb,Ge=P.nb+ae*U,r(De<=P.P+P.qc),Ie.Z!=0)for(r(pi[Ie.Z]!=null),_e=0;_e<he;++_e)pi[Ie.Z](ze,Ye,it,De,Be,Ge,U),ze=Be,Ye=Ge,Ge+=U,De+=U;else for(_e=0;_e<he;++_e)i(Be,Ge,it,De,U),ze=Be,Ye=Ge,Ge+=U,De+=U;P.rc=ze,P.Vc=Ye}else{if(r(Ie.mc!=null),U=ae+he,r((_e=Ie.mc)!=null),r(U<=_e.i),_e.C>=U)U=1;else if(Ie.ic||ts(),Ie.ic){Ie=_e.V,ze=_e.Ba,Ye=_e.c;var Et=_e.i,lt=(it=1,De=_e.$/Ye,Be=_e.$%Ye,Ge=_e.m,dt=_e.s,_e.$),Nt=Ye*Et,Ot=Ye*U,qt=dt.wc,zt=lt<Ot?Qn(dt,Be,De):null;r(lt<=Nt),r(U<=Et),r(Yn(dt));t:for(;;){for(;!Ge.h&&lt<Ot;){if(Be&qt||(zt=Qn(dt,Be,De)),r(zt!=null),be(Ge),256>(Et=Xr(zt.G[0],zt.H[0],Ge)))Ie[ze+lt]=Et,++lt,++Be>=Ye&&(Be=0,++De<=U&&!(De%16)&&Bi(_e,De));else{if(!(280>Et)){it=0;break t}Et=pa(Et-256,Ge);var Nr,cr=Xr(zt.G[4],zt.H[4],Ge);if(be(Ge),!(lt>=(cr=Ds(Ye,cr=pa(cr,Ge)))&&Nt-lt>=Et)){it=0;break t}for(Nr=0;Nr<Et;++Nr)Ie[ze+lt+Nr]=Ie[ze+lt+Nr-cr];for(lt+=Et,Be+=Et;Be>=Ye;)Be-=Ye,++De<=U&&!(De%16)&&Bi(_e,De);lt<Ot&&Be&qt&&(zt=Qn(dt,Be,De))}r(Ge.h==oe(Ge))}Bi(_e,De>U?U:De);break t}!it||Ge.h&&lt<Nt?(it=0,_e.a=Ge.h?5:3):_e.$=lt,U=it}else U=Zi(_e,_e.V,_e.Ba,_e.c,_e.i,U,Ga);if(!U){he=0;break e}}ae+he>=Ae&&(P.Cc=1),he=1}if(!he)return null;if(P.Cc&&((he=P.ga)!=null&&(he.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+ae*Ce}function xa(P,U,ae,he,Ce,Ae){for(;0<Ce--;){var _e,Ie=P,De=U+(ae?1:0),Be=P,Ge=U+(ae?0:3);for(_e=0;_e<he;++_e){var dt=Be[Ge+4*_e];dt!=255&&(dt*=32897,Ie[De+4*_e+0]=Ie[De+4*_e+0]*dt>>23,Ie[De+4*_e+1]=Ie[De+4*_e+1]*dt>>23,Ie[De+4*_e+2]=Ie[De+4*_e+2]*dt>>23)}U+=Ae}}function rn(P,U,ae,he,Ce){for(;0<he--;){var Ae;for(Ae=0;Ae<ae;++Ae){var _e=P[U+2*Ae+0],Ie=15&(Be=P[U+2*Ae+1]),De=4369*Ie,Be=(240&Be|Be>>4)*De>>16;P[U+2*Ae+0]=(240&_e|_e>>4)*De>>16&240|(15&_e|_e<<4)*De>>16>>4&15,P[U+2*Ae+1]=240&Be|Ie}U+=Ce}}function Ei(P,U,ae,he,Ce,Ae,_e,Ie){var De,Be,Ge=255;for(Be=0;Be<Ce;++Be){for(De=0;De<he;++De){var dt=P[U+De];Ae[_e+4*De]=dt,Ge&=dt}U+=ae,_e+=Ie}return Ge!=255}function es(P,U,ae,he,Ce){var Ae;for(Ae=0;Ae<Ce;++Ae)ae[he+Ae]=P[U+Ae]>>8}function ts(){ko=xa,tl=rn,Pd=Ei,rl=es}function ka(P,U,ae){z[P]=function(he,Ce,Ae,_e,Ie,De,Be,Ge,dt,ze,Ye,it,Et,lt,Nt,Ot,qt){var zt,Nr=qt-1>>1,cr=Ie[De+0]|Be[Ge+0]<<16,un=dt[ze+0]|Ye[it+0]<<16;r(he!=null);var gr=3*cr+un+131074>>2;for(U(he[Ce+0],255&gr,gr>>16,Et,lt),Ae!=null&&(gr=3*un+cr+131074>>2,U(Ae[_e+0],255&gr,gr>>16,Nt,Ot)),zt=1;zt<=Nr;++zt){var Wn=Ie[De+zt]|Be[Ge+zt]<<16,Ji=dt[ze+zt]|Ye[it+zt]<<16,bn=cr+Wn+un+Ji+524296,dr=bn+2*(Wn+un)>>3;gr=dr+cr>>1,cr=(bn=bn+2*(cr+Ji)>>3)+Wn>>1,U(he[Ce+2*zt-1],255&gr,gr>>16,Et,lt+(2*zt-1)*ae),U(he[Ce+2*zt-0],255&cr,cr>>16,Et,lt+(2*zt-0)*ae),Ae!=null&&(gr=bn+un>>1,cr=dr+Ji>>1,U(Ae[_e+2*zt-1],255&gr,gr>>16,Nt,Ot+(2*zt-1)*ae),U(Ae[_e+2*zt+0],255&cr,cr>>16,Nt,Ot+(2*zt+0)*ae)),cr=Wn,un=Ji}1&qt||(gr=3*cr+un+131074>>2,U(he[Ce+qt-1],255&gr,gr>>16,Et,lt+(qt-1)*ae),Ae!=null&&(gr=3*un+cr+131074>>2,U(Ae[_e+qt-1],255&gr,gr>>16,Nt,Ot+(qt-1)*ae)))}}function Zo(){Ma[Sh]=md,Ma[zs]=Bd,Ma[Su]=bf,Ma[nl]=Fd,Ma[Md]=jc,Ma[fd]=Yl,Ma[Wc]=qd,Ma[Ld]=Bd,Ma[Cu]=Fd,Ma[zd]=jc,Ma[y]=Yl}function Da(P){return P&-16384?0>P?0:255:P>>Im}function so(P,U){return Da((19077*P>>8)+(26149*U>>8)-14234)}function oo(P,U,ae){return Da((19077*P>>8)-(6419*U>>8)-(13320*ae>>8)+8708)}function Kl(P,U){return Da((19077*P>>8)+(33050*U>>8)-17685)}function Xo(P,U,ae,he,Ce){he[Ce+0]=so(P,ae),he[Ce+1]=oo(P,U,ae),he[Ce+2]=Kl(P,U)}function wi(P,U,ae,he,Ce){he[Ce+0]=Kl(P,U),he[Ce+1]=oo(P,U,ae),he[Ce+2]=so(P,ae)}function pl(P,U,ae,he,Ce){var Ae=oo(P,U,ae);U=Ae<<3&224|Kl(P,U)>>3,he[Ce+0]=248&so(P,ae)|Ae>>5,he[Ce+1]=U}function Ql(P,U,ae,he,Ce){var Ae=240&Kl(P,U)|15;he[Ce+0]=240&so(P,ae)|oo(P,U,ae)>>4,he[Ce+1]=Ae}function Jo(P,U,ae,he,Ce){he[Ce+0]=255,Xo(P,U,ae,he,Ce+1)}function gl(P,U,ae,he,Ce){wi(P,U,ae,he,Ce),he[Ce+3]=255}function qn(P,U,ae,he,Ce){Xo(P,U,ae,he,Ce),he[Ce+3]=255}function rs(P,U,ae){z[P]=function(he,Ce,Ae,_e,Ie,De,Be,Ge,dt){for(var ze=Ge+(-2&dt)*ae;Ge!=ze;)U(he[Ce+0],Ae[_e+0],Ie[De+0],Be,Ge),U(he[Ce+1],Ae[_e+0],Ie[De+0],Be,Ge+ae),Ce+=2,++_e,++De,Ge+=2*ae;1&dt&&U(he[Ce+0],Ae[_e+0],Ie[De+0],Be,Ge)}}function ns(P,U,ae){return ae==0?P==0?U==0?6:5:U==0?4:0:ae}function Qs(P,U,ae,he,Ce){switch(P>>>30){case 3:$e(U,ae,he,Ce,0);break;case 2:Xe(U,ae,he,Ce);break;case 1:Tt(U,ae,he,Ce)}}function Fi(P,U){var ae,he,Ce=U.M,Ae=U.Nb,_e=P.oc,Ie=P.pc+40,De=P.oc,Be=P.pc+584,Ge=P.oc,dt=P.pc+600;for(ae=0;16>ae;++ae)_e[Ie+32*ae-1]=129;for(ae=0;8>ae;++ae)De[Be+32*ae-1]=129,Ge[dt+32*ae-1]=129;for(0<Ce?_e[Ie-1-32]=De[Be-1-32]=Ge[dt-1-32]=129:(a(_e,Ie-32-1,127,21),a(De,Be-32-1,127,9),a(Ge,dt-32-1,127,9)),he=0;he<P.za;++he){var ze=U.ya[U.aa+he];if(0<he){for(ae=-1;16>ae;++ae)i(_e,Ie+32*ae-4,_e,Ie+32*ae+12,4);for(ae=-1;8>ae;++ae)i(De,Be+32*ae-4,De,Be+32*ae+4,4),i(Ge,dt+32*ae-4,Ge,dt+32*ae+4,4)}var Ye=P.Gd,it=P.Hd+he,Et=ze.ad,lt=ze.Hc;if(0<Ce&&(i(_e,Ie-32,Ye[it].y,0,16),i(De,Be-32,Ye[it].f,0,8),i(Ge,dt-32,Ye[it].ea,0,8)),ze.Za){var Nt=_e,Ot=Ie-32+16;for(0<Ce&&(he>=P.za-1?a(Nt,Ot,Ye[it].y[15],4):i(Nt,Ot,Ye[it+1].y,0,4)),ae=0;4>ae;ae++)Nt[Ot+128+ae]=Nt[Ot+256+ae]=Nt[Ot+384+ae]=Nt[Ot+0+ae];for(ae=0;16>ae;++ae,lt<<=2)Nt=_e,Ot=Ie+as[ae],ha[ze.Ob[ae]](Nt,Ot),Qs(lt,Et,16*+ae,Nt,Ot)}else if(Nt=ns(he,Ce,ze.Ob[0]),uo[Nt](_e,Ie),lt!=0)for(ae=0;16>ae;++ae,lt<<=2)Qs(lt,Et,16*+ae,_e,Ie+as[ae]);for(ae=ze.Gc,Nt=ns(he,Ce,ze.Dd),xl[Nt](De,Be),xl[Nt](Ge,dt),lt=Et,Nt=De,Ot=Be,255&(ze=0|ae)&&(170&ze?ct(lt,256,Nt,Ot):_t(lt,256,Nt,Ot)),ze=Ge,lt=dt,255&(ae>>=8)&&(170&ae?ct(Et,320,ze,lt):_t(Et,320,ze,lt)),Ce<P.Ub-1&&(i(Ye[it].y,0,_e,Ie+480,16),i(Ye[it].f,0,De,Be+224,8),i(Ye[it].ea,0,Ge,dt+224,8)),ae=8*Ae*P.B,Ye=P.sa,it=P.ta+16*he+16*Ae*P.R,Et=P.qa,ze=P.ra+8*he+ae,lt=P.Ha,Nt=P.Ia+8*he+ae,ae=0;16>ae;++ae)i(Ye,it+ae*P.R,_e,Ie+32*ae,16);for(ae=0;8>ae;++ae)i(Et,ze+ae*P.B,De,Be+32*ae,8),i(lt,Nt+ae*P.B,Ge,dt+32*ae,8)}}function ps(P,U,ae,he,Ce,Ae,_e,Ie,De){var Be=[0],Ge=[0],dt=0,ze=De!=null?De.kd:0,Ye=De??new Lt;if(P==null||12>ae)return 7;Ye.data=P,Ye.w=U,Ye.ha=ae,U=[U],ae=[ae],Ye.gb=[Ye.gb];e:{var it=U,Et=ae,lt=Ye.gb;if(r(P!=null),r(Et!=null),r(lt!=null),lt[0]=0,12<=Et[0]&&!n(P,it[0],"RIFF")){if(n(P,it[0]+8,"WEBP")){lt=3;break e}var Nt=Pt(P,it[0]+4);if(12>Nt||4294967286<Nt){lt=3;break e}if(ze&&Nt>Et[0]-8){lt=7;break e}lt[0]=Nt,it[0]+=12,Et[0]-=12}lt=0}if(lt!=0)return lt;for(Nt=0<Ye.gb[0],ae=ae[0];;){e:{var Ot=P;Et=U,lt=ae;var qt=Be,zt=Ge,Nr=it=[0];if((gr=dt=[dt])[0]=0,8>lt[0])lt=7;else{if(!n(Ot,Et[0],"VP8X")){if(Pt(Ot,Et[0]+4)!=10){lt=3;break e}if(18>lt[0]){lt=7;break e}var cr=Pt(Ot,Et[0]+8),un=1+vt(Ot,Et[0]+12);if(2147483648<=un*(Ot=1+vt(Ot,Et[0]+15))){lt=3;break e}Nr!=null&&(Nr[0]=cr),qt!=null&&(qt[0]=un),zt!=null&&(zt[0]=Ot),Et[0]+=18,lt[0]-=18,gr[0]=1}lt=0}}if(dt=dt[0],it=it[0],lt!=0)return lt;if(Et=!!(2&it),!Nt&&dt)return 3;if(Ae!=null&&(Ae[0]=!!(16&it)),_e!=null&&(_e[0]=Et),Ie!=null&&(Ie[0]=0),_e=Be[0],it=Ge[0],dt&&Et&&De==null){lt=0;break}if(4>ae){lt=7;break}if(Nt&&dt||!Nt&&!dt&&!n(P,U[0],"ALPH")){ae=[ae],Ye.na=[Ye.na],Ye.P=[Ye.P],Ye.Sa=[Ye.Sa];e:{cr=P,lt=U,Nt=ae;var gr=Ye.gb;qt=Ye.na,zt=Ye.P,Nr=Ye.Sa,un=22,r(cr!=null),r(Nt!=null),Ot=lt[0];var Wn=Nt[0];for(r(qt!=null),r(Nr!=null),qt[0]=null,zt[0]=null,Nr[0]=0;;){if(lt[0]=Ot,Nt[0]=Wn,8>Wn){lt=7;break e}var Ji=Pt(cr,Ot+4);if(4294967286<Ji){lt=3;break e}var bn=8+Ji+1&-2;if(un+=bn,0<gr&&un>gr){lt=3;break e}if(!n(cr,Ot,"VP8 ")||!n(cr,Ot,"VP8L")){lt=0;break e}if(Wn[0]<bn){lt=7;break e}n(cr,Ot,"ALPH")||(qt[0]=cr,zt[0]=Ot+8,Nr[0]=Ji),Ot+=bn,Wn-=bn}}if(ae=ae[0],Ye.na=Ye.na[0],Ye.P=Ye.P[0],Ye.Sa=Ye.Sa[0],lt!=0)break}ae=[ae],Ye.Ja=[Ye.Ja],Ye.xa=[Ye.xa];e:if(gr=P,lt=U,Nt=ae,qt=Ye.gb[0],zt=Ye.Ja,Nr=Ye.xa,cr=lt[0],Ot=!n(gr,cr,"VP8 "),un=!n(gr,cr,"VP8L"),r(gr!=null),r(Nt!=null),r(zt!=null),r(Nr!=null),8>Nt[0])lt=7;else{if(Ot||un){if(gr=Pt(gr,cr+4),12<=qt&&gr>qt-12){lt=3;break e}if(ze&&gr>Nt[0]-8){lt=7;break e}zt[0]=gr,lt[0]+=8,Nt[0]-=8,Nr[0]=un}else Nr[0]=5<=Nt[0]&&gr[cr+0]==47&&!(gr[cr+4]>>5),zt[0]=Nt[0];lt=0}if(ae=ae[0],Ye.Ja=Ye.Ja[0],Ye.xa=Ye.xa[0],U=U[0],lt!=0)break;if(4294967286<Ye.Ja)return 3;if(Ie==null||Et||(Ie[0]=Ye.xa?2:1),_e=[_e],it=[it],Ye.xa){if(5>ae){lt=7;break}Ie=_e,ze=it,Et=Ae,P==null||5>ae?P=0:5<=ae&&P[U+0]==47&&!(P[U+4]>>5)?(Nt=[0],gr=[0],qt=[0],ye(zt=new se,P,U,ae),ml(zt,Nt,gr,qt)?(Ie!=null&&(Ie[0]=Nt[0]),ze!=null&&(ze[0]=gr[0]),Et!=null&&(Et[0]=qt[0]),P=1):P=0):P=0}else{if(10>ae){lt=7;break}Ie=it,P==null||10>ae||!Qa(P,U+3,ae-3)?P=0:(ze=P[U+0]|P[U+1]<<8|P[U+2]<<16,Et=16383&(P[U+7]<<8|P[U+6]),P=16383&(P[U+9]<<8|P[U+8]),1&ze||3<(ze>>1&7)||!(ze>>4&1)||ze>>5>=Ye.Ja||!Et||!P?P=0:(_e&&(_e[0]=Et),Ie&&(Ie[0]=P),P=1))}if(!P||(_e=_e[0],it=it[0],dt&&(Be[0]!=_e||Ge[0]!=it)))return 3;De!=null&&(De[0]=Ye,De.offset=U-De.w,r(4294967286>U-De.w),r(De.offset==De.ha-ae));break}return lt==0||lt==7&&dt&&De==null?(Ae!=null&&(Ae[0]|=Ye.na!=null&&0<Ye.na.length),he!=null&&(he[0]=_e),Ce!=null&&(Ce[0]=it),0):lt}function el(P,U,ae){var he=U.width,Ce=U.height,Ae=0,_e=0,Ie=he,De=Ce;if(U.Da=P!=null&&0<P.Da,U.Da&&(Ie=P.cd,De=P.bd,Ae=P.v,_e=P.j,11>ae||(Ae&=-2,_e&=-2),0>Ae||0>_e||0>=Ie||0>=De||Ae+Ie>he||_e+De>Ce))return 0;if(U.v=Ae,U.j=_e,U.va=Ae+Ie,U.o=_e+De,U.U=Ie,U.T=De,U.da=P!=null&&0<P.da,U.da){if(!Bt(Ie,De,ae=[P.ib],Ae=[P.hb]))return 0;U.ib=ae[0],U.hb=Ae[0]}return U.ob=P!=null&&P.ob,U.Kb=P==null||!P.Sd,U.da&&(U.ob=U.ib<3*he/4&&U.hb<3*Ce/4,U.Kb=0),1}function Ml(P){if(P==null)return 2;if(11>P.S){var U=P.f.RGBA;U.fb+=(P.height-1)*U.A,U.A=-U.A}else U=P.f.kb,P=P.height,U.O+=(P-1)*U.fa,U.fa=-U.fa,U.N+=(P-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(P-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(P-1)*U.lb,U.lb=-U.lb);return 0}function lo(P,U,ae,he){if(he==null||0>=P||0>=U)return 2;if(ae!=null){if(ae.Da){var Ce=ae.cd,Ae=ae.bd,_e=-2&ae.v,Ie=-2&ae.j;if(0>_e||0>Ie||0>=Ce||0>=Ae||_e+Ce>P||Ie+Ae>U)return 2;P=Ce,U=Ae}if(ae.da){if(!Bt(P,U,Ce=[ae.ib],Ae=[ae.hb]))return 2;P=Ce[0],U=Ae[0]}}he.width=P,he.height=U;e:{var De=he.width,Be=he.height;if(P=he.S,0>=De||0>=Be||!(P>=Sh&&13>P))P=2;else{if(0>=he.Rd&&he.sd==null){_e=Ae=Ce=U=0;var Ge=(Ie=De*km[P])*Be;if(11>P||(Ae=(Be+1)/2*(U=(De+1)/2),P==12&&(_e=(Ce=De)*Be)),(Be=s(Ge+2*Ae+_e))==null){P=1;break e}he.sd=Be,11>P?((De=he.f.RGBA).eb=Be,De.fb=0,De.A=Ie,De.size=Ge):((De=he.f.kb).y=Be,De.O=0,De.fa=Ie,De.Fd=Ge,De.f=Be,De.N=0+Ge,De.Ab=U,De.Cd=Ae,De.ea=Be,De.W=0+Ge+Ae,De.Db=U,De.Ed=Ae,P==12&&(De.F=Be,De.J=0+Ge+2*Ae),De.Tc=_e,De.lb=Ce)}if(U=1,Ce=he.S,Ae=he.width,_e=he.height,Ce>=Sh&&13>Ce)if(11>Ce)P=he.f.RGBA,U&=(Ie=Math.abs(P.A))*(_e-1)+Ae<=P.size,U&=Ie>=Ae*km[Ce],U&=P.eb!=null;else{P=he.f.kb,Ie=(Ae+1)/2,Ge=(_e+1)/2,De=Math.abs(P.fa),Be=Math.abs(P.Ab);var dt=Math.abs(P.Db),ze=Math.abs(P.lb),Ye=ze*(_e-1)+Ae;U&=De*(_e-1)+Ae<=P.Fd,U&=Be*(Ge-1)+Ie<=P.Cd,U=(U&=dt*(Ge-1)+Ie<=P.Ed)&De>=Ae&Be>=Ie&dt>=Ie,U&=P.y!=null,U&=P.f!=null,U&=P.ea!=null,Ce==12&&(U&=ze>=Ae,U&=Ye<=P.Tc,U&=P.F!=null)}else U=0;P=U?0:2}}return P!=0||ae!=null&&ae.fd&&(P=Ml(he)),P}var da=64,Ys=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_i=24,is=32,ln=8,Zs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];St("Predictor0","PredictorAdd0"),z.Predictor0=function(){return 4278190080},z.Predictor1=function(P){return P},z.Predictor2=function(P,U,ae){return U[ae+0]},z.Predictor3=function(P,U,ae){return U[ae+1]},z.Predictor4=function(P,U,ae){return U[ae-1]},z.Predictor5=function(P,U,ae){return hr(hr(P,U[ae+1]),U[ae+0])},z.Predictor6=function(P,U,ae){return hr(P,U[ae-1])},z.Predictor7=function(P,U,ae){return hr(P,U[ae+0])},z.Predictor8=function(P,U,ae){return hr(U[ae-1],U[ae+0])},z.Predictor9=function(P,U,ae){return hr(U[ae+0],U[ae+1])},z.Predictor10=function(P,U,ae){return hr(hr(P,U[ae-1]),hr(U[ae+0],U[ae+1]))},z.Predictor11=function(P,U,ae){var he=U[ae+0];return 0>=Ir(he>>24&255,P>>24&255,(U=U[ae-1])>>24&255)+Ir(he>>16&255,P>>16&255,U>>16&255)+Ir(he>>8&255,P>>8&255,U>>8&255)+Ir(255&he,255&P,255&U)?he:P},z.Predictor12=function(P,U,ae){var he=U[ae+0];return(zr((P>>24&255)+(he>>24&255)-((U=U[ae-1])>>24&255))<<24|zr((P>>16&255)+(he>>16&255)-(U>>16&255))<<16|zr((P>>8&255)+(he>>8&255)-(U>>8&255))<<8|zr((255&P)+(255&he)-(255&U)))>>>0},z.Predictor13=function(P,U,ae){var he=U[ae-1];return(yn((P=hr(P,U[ae+0]))>>24&255,he>>24&255)<<24|yn(P>>16&255,he>>16&255)<<16|yn(P>>8&255,he>>8&255)<<8|yn(255&P,255&he))>>>0};var je=z.PredictorAdd0;z.PredictorAdd1=xn,St("Predictor2","PredictorAdd2"),St("Predictor3","PredictorAdd3"),St("Predictor4","PredictorAdd4"),St("Predictor5","PredictorAdd5"),St("Predictor6","PredictorAdd6"),St("Predictor7","PredictorAdd7"),St("Predictor8","PredictorAdd8"),St("Predictor9","PredictorAdd9"),St("Predictor10","PredictorAdd10"),St("Predictor11","PredictorAdd11"),St("Predictor12","PredictorAdd12"),St("Predictor13","PredictorAdd13");var h=z.PredictorAdd2;fr("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),fr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var g,b=z.ColorIndexInverseTransform,S=z.MapARGB,A=z.VP8LColorIndexInverseTransformAlpha,I=z.MapAlpha,R=z.VP8LPredictorsAdd=[];R.length=16,(z.VP8LPredictors=[]).length=16,(z.VP8LPredictorsAdd_C=[]).length=16,(z.VP8LPredictors_C=[]).length=16;var V,te,ue,ve,Ne,Me,qe,$e,Xe,ct,Tt,_t,At,Tr,qr,Mn,ua,Pa,Un,Ra,Ms,xc,Oo,ju,ko,tl,Pd,rl,co=s(511),wu=s(2041),Rd=s(225),vc=s(767),wh=0,yl=wu,bc=Rd,Ls=vc,gs=co,Sh=0,zs=1,Su=2,nl=3,Md=4,fd=5,Wc=6,Ld=7,Cu=8,zd=9,y=10,E=[2,3,7],B=[3,3,11],re=[280,256,256,256,40],fe=[0,1,1,1,0],Ee=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mt=8,kt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],br=null,Cn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Bs=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],va=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],il=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ni=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ii=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ln=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],uo=[],ha=[],xl=[],Hc=1,Ch=2,pi=[],Ma=[];ka("UpsampleRgbLinePair",Xo,3),ka("UpsampleBgrLinePair",wi,3),ka("UpsampleRgbaLinePair",qn,4),ka("UpsampleBgraLinePair",gl,4),ka("UpsampleArgbLinePair",Jo,4),ka("UpsampleRgba4444LinePair",Ql,2),ka("UpsampleRgb565LinePair",pl,2);var md=z.UpsampleRgbLinePair,bf=z.UpsampleBgrLinePair,Bd=z.UpsampleRgbaLinePair,Fd=z.UpsampleBgraLinePair,jc=z.UpsampleArgbLinePair,Yl=z.UpsampleRgba4444LinePair,qd=z.UpsampleRgb565LinePair,Zl=16,Nh=1<<Zl-1,Nu=-227,Ud=482,Im=6,Wd=0,ho=s(256),Om=s(256),Ky=s(256),oj=s(256),lj=s(Ud-Nu),cj=s(Ud-Nu);rs("YuvToRgbRow",Xo,3),rs("YuvToBgrRow",wi,3),rs("YuvToRgbaRow",qn,4),rs("YuvToBgraRow",gl,4),rs("YuvToArgbRow",Jo,4),rs("YuvToRgba4444Row",Ql,2),rs("YuvToRgb565Row",pl,2);var as=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ah=[0,2,8],jf=[8,7,6,4,4,2,2,2,1,1,1,1],wf=1;this.WebPDecodeRGBA=function(P,U,ae,he,Ce){var Ae=zs,_e=new Ct,Ie=new Kr;_e.ba=Ie,Ie.S=Ae,Ie.width=[Ie.width],Ie.height=[Ie.height];var De=Ie.width,Be=Ie.height,Ge=new _r;if(Ge==null||P==null)var dt=2;else r(Ge!=null),dt=ps(P,U,ae,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(dt!=0?De=0:(De!=null&&(De[0]=Ge.width[0]),Be!=null&&(Be[0]=Ge.height[0]),De=1),De){Ie.width=Ie.width[0],Ie.height=Ie.height[0],he!=null&&(he[0]=Ie.width),Ce!=null&&(Ce[0]=Ie.height);e:{if(he=new Rn,(Ce=new Lt).data=P,Ce.w=U,Ce.ha=ae,Ce.kd=1,U=[0],r(Ce!=null),((P=ps(Ce.data,Ce.w,Ce.ha,null,null,null,U,null,Ce))==0||P==7)&&U[0]&&(P=4),(U=P)==0){if(r(_e!=null),he.data=Ce.data,he.w=Ce.w+Ce.offset,he.ha=Ce.ha-Ce.offset,he.put=vr,he.ac=$a,he.bc=Ia,he.ma=_e,Ce.xa){if((P=ds())==null){_e=1;break e}if((function(ze,Ye){var it=[0],Et=[0],lt=[0];t:for(;;){if(ze==null)return 0;if(Ye==null)return ze.a=2,0;if(ze.l=Ye,ze.a=0,ye(ze.m,Ye.data,Ye.w,Ye.ha),!ml(ze.m,it,Et,lt)){ze.a=3;break t}if(ze.xb=Ch,Ye.width=it[0],Ye.height=Et[0],!Vo(it[0],Et[0],1,ze,null))break t;return 1}return r(ze.a!=0),0})(P,he)){if(he=(U=lo(he.width,he.height,_e.Oa,_e.ba))==0){t:{he=P;r:for(;;){if(he==null){he=0;break t}if(r(he.s.yc!=null),r(he.s.Ya!=null),r(0<he.s.Wb),r((ae=he.l)!=null),r((Ce=ae.ma)!=null),he.xb!=0){if(he.ca=Ce.ba,he.tb=Ce.tb,r(he.ca!=null),!el(Ce.Oa,ae,nl)){he.a=2;break r}if(!$o(he,ae.width)||ae.da)break r;if((ae.da||Fr(he.ca.S))&&ts(),11>he.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),he.ca.f.kb.F!=null&&ts()),he.Pb&&0<he.s.ua&&he.s.vb.X==null&&!Oe(he.s.vb,he.s.Wa.Xa)){he.a=1;break r}he.xb=0}if(!Zi(he,he.V,he.Ba,he.c,he.i,ae.o,Yi))break r;Ce.Dc=he.Ma,he=1;break t}r(he.a!=0),he=0}he=!he}he&&(U=P.a)}else U=P.a}else{if((P=new hs)==null){_e=1;break e}if(P.Fa=Ce.na,P.P=Ce.P,P.qc=Ce.Sa,Ao(P,he)){if((U=lo(he.width,he.height,_e.Oa,_e.ba))==0){if(P.Aa=0,ae=_e.Oa,r((Ce=P)!=null),ae!=null){if(0<(De=0>(De=ae.Md)?0:100<De?255:255*De/100)){for(Be=Ge=0;4>Be;++Be)12>(dt=Ce.pb[Be]).lc&&(dt.ia=De*jf[0>dt.lc?0:dt.lc]>>3),Ge|=dt.ia;Ge&&(alert("todo:VP8InitRandom"),Ce.ia=1)}Ce.Ga=ae.Id,100<Ce.Ga?Ce.Ga=100:0>Ce.Ga&&(Ce.Ga=0)}(function(ze,Ye){if(ze==null)return 0;if(Ye==null)return Mr(ze,2,"NULL VP8Io parameter in VP8Decode().");if(!ze.cb&&!Ao(ze,Ye))return 0;if(r(ze.cb),Ye.ac==null||Ye.ac(Ye)){Ye.ob&&(ze.L=0);var it=Ah[ze.L];if(ze.L==2?(ze.yb=0,ze.zb=0):(ze.yb=Ye.v-it>>4,ze.zb=Ye.j-it>>4,0>ze.yb&&(ze.yb=0),0>ze.zb&&(ze.zb=0)),ze.Va=Ye.o+15+it>>4,ze.Hb=Ye.va+15+it>>4,ze.Hb>ze.za&&(ze.Hb=ze.za),ze.Va>ze.Ub&&(ze.Va=ze.Ub),0<ze.L){var Et=ze.ed;for(it=0;4>it;++it){var lt;if(ze.Qa.Cb){var Nt=ze.Qa.Lb[it];ze.Qa.Fb||(Nt+=Et.Tb)}else Nt=Et.Tb;for(lt=0;1>=lt;++lt){var Ot=ze.gd[it][lt],qt=Nt;if(Et.Pc&&(qt+=Et.vd[0],lt&&(qt+=Et.od[0])),0<(qt=0>qt?0:63<qt?63:qt)){var zt=qt;0<Et.wb&&(zt=4<Et.wb?zt>>2:zt>>1)>9-Et.wb&&(zt=9-Et.wb),1>zt&&(zt=1),Ot.dd=zt,Ot.tc=2*qt+zt,Ot.ld=40<=qt?2:15<=qt?1:0}else Ot.tc=0;Ot.La=lt}}}it=0}else Mr(ze,6,"Frame setup failed"),it=ze.a;if(it=it==0){if(it){ze.$c=0,0<ze.Aa||(ze.Ic=wf);t:{it=ze.Ic,Et=4*(zt=ze.za);var Nr=32*zt,cr=zt+1,un=0<ze.L?zt*(0<ze.Aa?2:1):0,gr=(ze.Aa==2?2:1)*zt;if((Ot=Et+832+(lt=3*(16*it+Ah[ze.L])/2*Nr)+(Nt=ze.Fa!=null&&0<ze.Fa.length?ze.Kc.c*ze.Kc.i:0))!=Ot)it=0;else{if(Ot>ze.Vb){if(ze.Vb=0,ze.Ec=s(Ot),ze.Fc=0,ze.Ec==null){it=Mr(ze,1,"no memory during frame initialization.");break t}ze.Vb=Ot}Ot=ze.Ec,qt=ze.Fc,ze.Ac=Ot,ze.Bc=qt,qt+=Et,ze.Gd=o(Nr,An),ze.Hd=0,ze.rb=o(cr+1,zn),ze.sb=1,ze.wa=un?o(un,io):null,ze.Y=0,ze.D.Nb=0,ze.D.wa=ze.wa,ze.D.Y=ze.Y,0<ze.Aa&&(ze.D.Y+=zt),r(!0),ze.oc=Ot,ze.pc=qt,qt+=832,ze.ya=o(gr,kl),ze.aa=0,ze.D.ya=ze.ya,ze.D.aa=ze.aa,ze.Aa==2&&(ze.D.aa+=zt),ze.R=16*zt,ze.B=8*zt,zt=(Nr=Ah[ze.L])*ze.R,Nr=Nr/2*ze.B,ze.sa=Ot,ze.ta=qt+zt,ze.qa=ze.sa,ze.ra=ze.ta+16*it*ze.R+Nr,ze.Ha=ze.qa,ze.Ia=ze.ra+8*it*ze.B+Nr,ze.$c=0,qt+=lt,ze.mb=Nt?Ot:null,ze.nb=Nt?qt:null,r(qt+Nt<=ze.Fc+ze.Vb),Bn(ze),a(ze.Ac,ze.Bc,0,Et),it=1}}if(it){if(Ye.ka=0,Ye.y=ze.sa,Ye.O=ze.ta,Ye.f=ze.qa,Ye.N=ze.ra,Ye.ea=ze.Ha,Ye.Vd=ze.Ia,Ye.fa=ze.R,Ye.Rc=ze.B,Ye.F=null,Ye.J=0,!wh){for(it=-255;255>=it;++it)co[255+it]=0>it?-it:it;for(it=-1020;1020>=it;++it)wu[1020+it]=-128>it?-128:127<it?127:it;for(it=-112;112>=it;++it)Rd[112+it]=-16>it?-16:15<it?15:it;for(it=-255;510>=it;++it)vc[255+it]=0>it?0:255<it?255:it;wh=1}qe=Ps,$e=Pe,ct=Ht,Tt=ri,_t=la,Xe=nt,At=Io,Tr=Rl,qr=we,Mn=Re,ua=pt,Pa=ee,Un=We,Ra=et,Ms=ya,xc=ao,Oo=Gl,ju=Fn,ha[0]=hd,ha[1]=ga,ha[2]=ca,ha[3]=Zt,ha[4]=Lr,ha[5]=gc,ha[6]=Tn,ha[7]=Rs,ha[8]=Xa,ha[9]=fs,uo[0]=Za,uo[1]=Jn,uo[2]=Dl,uo[3]=Uc,uo[4]=Eo,uo[5]=Pl,uo[6]=bi,xl[0]=Qo,xl[1]=Cr,xl[2]=mi,xl[3]=Ks,xl[4]=ki,xl[5]=yc,xl[6]=ms,it=1}else it=0}it&&(it=(function(Wn,Ji){for(Wn.M=0;Wn.M<Wn.Va;++Wn.M){var bn,dr=Wn.Jc[Wn.M&Wn.Xb],Jt=Wn.m,ba=Wn;for(bn=0;bn<ba.za;++bn){var en=Jt,Nn=ba,Si=Nn.Ac,Fs=Nn.Bc+4*bn,fo=Nn.zc,qi=Nn.ya[Nn.aa+bn];if(Nn.Qa.Bb?qi.$b=He(en,Nn.Pa.jb[0])?2+He(en,Nn.Pa.jb[2]):He(en,Nn.Pa.jb[1]):qi.$b=0,Nn.kc&&(qi.Ad=He(en,Nn.Bd)),qi.Za=!He(en,145)+0,qi.Za){var ys=qi.Ob,Do=0;for(Nn=0;4>Nn;++Nn){var xs,Dn=fo[0+Nn];for(xs=0;4>xs;++xs){Dn=ni[Si[Fs+xs]][Dn];for(var ai=va[He(en,Dn[0])];0<ai;)ai=va[2*ai+He(en,Dn[ai])];Dn=-ai,Si[Fs+xs]=Dn}i(ys,Do,Si,Fs,4),Do+=4,fo[0+Nn]=Dn}}else Dn=He(en,156)?He(en,128)?1:3:He(en,163)?2:0,qi.Ob[0]=Dn,a(Si,Fs,Dn,4),a(fo,0,Dn,4);qi.Dd=He(en,142)?He(en,114)?He(en,183)?1:3:2:0}if(ba.m.Ka)return Mr(Wn,7,"Premature end-of-partition0 encountered.");for(;Wn.ja<Wn.za;++Wn.ja){if(ba=dr,en=(Jt=Wn).rb[Jt.sb-1],Si=Jt.rb[Jt.sb+Jt.ja],bn=Jt.ya[Jt.aa+Jt.ja],Fs=Jt.kc?bn.Ad:0)en.la=Si.la=0,bn.Za||(en.Na=Si.Na=0),bn.Hc=0,bn.Gc=0,bn.ia=0;else{var ja,ui;if(en=Si,Si=ba,Fs=Jt.Pa.Xc,fo=Jt.ya[Jt.aa+Jt.ja],qi=Jt.pb[fo.$b],Nn=fo.ad,ys=0,Do=Jt.rb[Jt.sb-1],Dn=xs=0,a(Nn,ys,0,384),fo.Za)var qs=0,wa=Fs[3];else{ai=s(16);var si=en.Na+Do.Na;if(si=br(Si,Fs[1],si,qi.Eb,0,ai,0),en.Na=Do.Na=(0<si)+0,1<si)qe(ai,0,Nn,ys);else{var ss=ai[0]+3>>3;for(ai=0;256>ai;ai+=16)Nn[ys+ai]=ss}qs=1,wa=Fs[0]}var Ci=15&en.la,vs=15&Do.la;for(ai=0;4>ai;++ai){var bs=1&vs;for(ss=ui=0;4>ss;++ss)Ci=Ci>>1|(bs=(si=br(Si,wa,si=bs+(1&Ci),qi.Sc,qs,Nn,ys))>qs)<<7,ui=ui<<2|(3<si?3:1<si?2:Nn[ys+0]!=0),ys+=16;Ci>>=4,vs=vs>>1|bs<<7,xs=(xs<<8|ui)>>>0}for(wa=Ci,qs=vs>>4,ja=0;4>ja;ja+=2){for(ui=0,Ci=en.la>>4+ja,vs=Do.la>>4+ja,ai=0;2>ai;++ai){for(bs=1&vs,ss=0;2>ss;++ss)si=bs+(1&Ci),Ci=Ci>>1|(bs=0<(si=br(Si,Fs[2],si,qi.Qc,0,Nn,ys)))<<3,ui=ui<<2|(3<si?3:1<si?2:Nn[ys+0]!=0),ys+=16;Ci>>=2,vs=vs>>1|bs<<5}Dn|=ui<<4*ja,wa|=Ci<<4<<ja,qs|=(240&vs)<<ja}en.la=wa,Do.la=qs,fo.Hc=xs,fo.Gc=Dn,fo.ia=43690&Dn?0:qi.ia,Fs=!(xs|Dn)}if(0<Jt.L&&(Jt.wa[Jt.Y+Jt.ja]=Jt.gd[bn.$b][bn.Za],Jt.wa[Jt.Y+Jt.ja].La|=!Fs),ba.Ka)return Mr(Wn,7,"Premature end-of-file encountered.")}if(Bn(Wn),Jt=Ji,ba=1,bn=(dr=Wn).D,en=0<dr.L&&dr.M>=dr.zb&&dr.M<=dr.Va,dr.Aa==0)t:{if(bn.M=dr.M,bn.uc=en,Fi(dr,bn),ba=1,bn=(ui=dr.D).Nb,en=(Dn=Ah[dr.L])*dr.R,Si=Dn/2*dr.B,ai=16*bn*dr.R,ss=8*bn*dr.B,Fs=dr.sa,fo=dr.ta-en+ai,qi=dr.qa,Nn=dr.ra-Si+ss,ys=dr.Ha,Do=dr.Ia-Si+ss,vs=(Ci=ui.M)==0,xs=Ci>=dr.Va-1,dr.Aa==2&&Fi(dr,ui),ui.uc)for(bs=(si=dr).D.M,r(si.D.uc),ui=si.yb;ui<si.Hb;++ui){qs=ui,wa=bs;var Di=(ti=(js=si).D).Nb;ja=js.R;var ti=ti.wa[ti.Y+qs],Po=js.sa,La=js.ta+16*Di*ja+16*qs,Wr=ti.dd,Hr=ti.tc;if(Hr!=0)if(r(3<=Hr),js.L==1)0<qs&&xc(Po,La,ja,Hr+4),ti.La&&ju(Po,La,ja,Hr),0<wa&&Ms(Po,La,ja,Hr+4),ti.La&&Oo(Po,La,ja,Hr);else{var oi=js.B,vl=js.qa,Xl=js.ra+8*Di*oi+8*qs,al=js.Ha,js=js.Ia+8*Di*oi+8*qs;Di=ti.ld,0<qs&&(Tr(Po,La,ja,Hr+4,Wr,Di),Mn(vl,Xl,al,js,oi,Hr+4,Wr,Di)),ti.La&&(Pa(Po,La,ja,Hr,Wr,Di),Ra(vl,Xl,al,js,oi,Hr,Wr,Di)),0<wa&&(At(Po,La,ja,Hr+4,Wr,Di),qr(vl,Xl,al,js,oi,Hr+4,Wr,Di)),ti.La&&(ua(Po,La,ja,Hr,Wr,Di),Un(vl,Xl,al,js,oi,Hr,Wr,Di))}}if(dr.ia&&alert("todo:DitherRow"),Jt.put!=null){if(ui=16*Ci,Ci=16*(Ci+1),vs?(Jt.y=dr.sa,Jt.O=dr.ta+ai,Jt.f=dr.qa,Jt.N=dr.ra+ss,Jt.ea=dr.Ha,Jt.W=dr.Ia+ss):(ui-=Dn,Jt.y=Fs,Jt.O=fo,Jt.f=qi,Jt.N=Nn,Jt.ea=ys,Jt.W=Do),xs||(Ci-=Dn),Ci>Jt.o&&(Ci=Jt.o),Jt.F=null,Jt.J=null,dr.Fa!=null&&0<dr.Fa.length&&ui<Ci&&(Jt.J=Xt(dr,Jt,ui,Ci-ui),Jt.F=dr.mb,Jt.F==null&&Jt.F.length==0)){ba=Mr(dr,3,"Could not decode alpha data.");break t}ui<Jt.j&&(Dn=Jt.j-ui,ui=Jt.j,r(!(1&Dn)),Jt.O+=dr.R*Dn,Jt.N+=dr.B*(Dn>>1),Jt.W+=dr.B*(Dn>>1),Jt.F!=null&&(Jt.J+=Jt.width*Dn)),ui<Ci&&(Jt.O+=Jt.v,Jt.N+=Jt.v>>1,Jt.W+=Jt.v>>1,Jt.F!=null&&(Jt.J+=Jt.v),Jt.ka=ui-Jt.j,Jt.U=Jt.va-Jt.v,Jt.T=Ci-ui,ba=Jt.put(Jt))}bn+1!=dr.Ic||xs||(i(dr.sa,dr.ta-en,Fs,fo+16*dr.R,en),i(dr.qa,dr.ra-Si,qi,Nn+8*dr.B,Si),i(dr.Ha,dr.Ia-Si,ys,Do+8*dr.B,Si))}if(!ba)return Mr(Wn,6,"Output aborted.")}return 1})(ze,Ye)),Ye.bc!=null&&Ye.bc(Ye),it&=1}return it?(ze.cb=0,it):0})(P,he)||(U=P.a)}}else U=P.a}U==0&&_e.Oa!=null&&_e.Oa.fd&&(U=Ml(_e.ba))}_e=U}Ae=_e!=0?null:11>Ae?Ie.f.RGBA.eb:Ie.f.kb.y}else Ae=null;return Ae};var km=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(z,G){for(var ne="",Z=0;Z<4;Z++)ne+=String.fromCharCode(z[G++]);return ne}function f(z,G){return z[G+0]|z[G+1]<<8}function p(z,G){return(z[G+0]|z[G+1]<<8|z[G+2]<<16)>>>0}function x(z,G){return(z[G+0]|z[G+1]<<8|z[G+2]<<16|z[G+3]<<24)>>>0}new u;var v=[0],w=[0],C=[],N=new u,T=t,O=(function(z,G){var ne={},Z=0,ie=!1,me=0,ce=0;if(ne.frames=[],!(function(X,se){for(var H=0;H<4;H++)if(X[se+H]!="RIFF".charCodeAt(H))return!0;return!1})(z,G)){for(x(z,G+=4),G+=8;G<z.length;){var Q=d(z,G),de=x(z,G+=4);G+=4;var le=de+(1&de);switch(Q){case"VP8 ":case"VP8L":ne.frames[Z]===void 0&&(ne.frames[Z]={}),($=ne.frames[Z]).src_off=ie?ce:G-8,$.src_size=me+de+8,Z++,ie&&(ie=!1,me=0,ce=0);break;case"VP8X":($=ne.header={}).feature_flags=z[G];var ye=G+4;$.canvas_width=1+p(z,ye),ye+=3,$.canvas_height=1+p(z,ye),ye+=3;break;case"ALPH":ie=!0,me=le+8,ce=G-8;break;case"ANIM":($=ne.header).bgcolor=x(z,G),ye=G+4,$.loop_count=f(z,ye),ye+=2;break;case"ANMF":var Se,$;($=ne.frames[Z]={}).offset_x=2*p(z,G),G+=3,$.offset_y=2*p(z,G),G+=3,$.width=1+p(z,G),G+=3,$.height=1+p(z,G),G+=3,$.duration=p(z,G),G+=3,Se=z[G++],$.dispose=1&Se,$.blend=Se>>1&1}Q!="ANMF"&&(G+=le)}return ne}})(T,0);O.response=T,O.rgbaoutput=!0,O.dataurl=!1;var D=O.header?O.header:null,M=O.frames?O.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],w=[D.canvas_width];for(var Y=0;Y<M.length&&M[Y].blend!=0;Y++);}var q=M[0],W=N.WebPDecodeRGBA(T,q.src_off,q.src_size,w,v);q.rgba=W,q.imgwidth=w[0],q.imgheight=v[0];for(var J=0;J<w[0]*v[0]*4;J++)C[J]=W[J];return this.width=w,this.height=v,this.data=C,this}function PCe(){var t,r=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(r));t=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function RCe(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var r,n,i,a,s,o,l,u,d,f=function(X){return X=X||{},this.isStrokeTransparent=X.isStrokeTransparent||!1,this.strokeOpacity=X.strokeOpacity||1,this.strokeStyle=X.strokeStyle||"#000000",this.fillStyle=X.fillStyle||"#000000",this.isFillTransparent=X.isFillTransparent||!1,this.fillOpacity=X.fillOpacity||1,this.font=X.font||"10px sans-serif",this.textBaseline=X.textBaseline||"alphabetic",this.textAlign=X.textAlign||"left",this.lineWidth=X.lineWidth||1,this.lineJoin=X.lineJoin||"miter",this.lineCap=X.lineCap||"butt",this.path=X.path||[],this.transform=X.transform!==void 0?X.transform.clone():new u,this.globalCompositeOperation=X.globalCompositeOperation||"normal",this.globalAlpha=X.globalAlpha||1,this.clip_path=X.clip_path||[],this.currentPoint=X.currentPoint||new o,this.miterLimit=X.miterLimit||10,this.lastPoint=X.lastPoint||new o,this.lineDashOffset=X.lineDashOffset||0,this.lineDash=X.lineDash||[],this.margin=X.margin||[0,0,0,0],this.prevPageLastElemOffset=X.prevPageLastElemOffset||0,this.ignoreClearRect=typeof X.ignoreClearRect!="boolean"||X.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),r=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,d=new f}]);var p=function(X){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var se=X;Object.defineProperty(this,"pdf",{get:function(){return se}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(Oe){H=!!Oe}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(Oe){oe=!!Oe}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(Oe){isNaN(Oe)||(ge=Oe)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(Oe){isNaN(Oe)||(be=Oe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Oe){var at;typeof Oe=="number"?at=[Oe,Oe,Oe,Oe]:((at=new Array(4))[0]=Oe[0],at[1]=Oe.length>=2?Oe[1]:at[0],at[2]=Oe.length>=3?Oe[2]:at[0],at[3]=Oe.length>=4?Oe[3]:at[1]),d.margin=at}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(Oe){Le=Oe}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(Oe){ke=Oe}});var He=[];Object.defineProperty(this,"pageBreaks",{get:function(){return He},set:function(Oe){He=Oe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Oe){Oe instanceof f&&(d=Oe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Oe){d.path=Oe}});var Je=[];Object.defineProperty(this,"ctxStack",{get:function(){return Je},set:function(Oe){Je=Oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Oe){var at;at=x(Oe),this.ctx.fillStyle=at.style,this.ctx.isFillTransparent=at.a===0,this.ctx.fillOpacity=at.a,this.pdf.setFillColor(at.r,at.g,at.b,{a:at.a}),this.pdf.setTextColor(at.r,at.g,at.b,{a:at.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Oe){var at=x(Oe);this.ctx.strokeStyle=at.style,this.ctx.isStrokeTransparent=at.a===0,this.ctx.strokeOpacity=at.a,at.a===0?this.pdf.setDrawColor(255,255,255):(at.a,this.pdf.setDrawColor(at.r,at.g,at.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Oe){["butt","round","square"].indexOf(Oe)!==-1&&(this.ctx.lineCap=Oe,this.pdf.setLineCap(Oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Oe){isNaN(Oe)||(this.ctx.lineWidth=Oe,this.pdf.setLineWidth(Oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Oe){["bevel","round","miter"].indexOf(Oe)!==-1&&(this.ctx.lineJoin=Oe,this.pdf.setLineJoin(Oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Oe){isNaN(Oe)||(this.ctx.miterLimit=Oe,this.pdf.setMiterLimit(Oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Oe){this.ctx.textBaseline=Oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Oe){["right","end","center","left","start"].indexOf(Oe)!==-1&&(this.ctx.textAlign=Oe)}});var Qe=null,vt=null,Pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pt},set:function(Oe){Qe=null,vt=null,Pt=Oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Oe){var at;if(this.ctx.font=Oe,(at=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Oe))!==null){var Wt=at[1];at[2];var Bt=at[3],yt=at[4];at[5];var rr=at[6],St=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(yt)[2];yt=Math.floor(St==="px"?parseFloat(yt)*this.pdf.internal.scaleFactor:St==="em"?parseFloat(yt)*this.pdf.getFontSize():parseFloat(yt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(yt);var xr=(function(fr){var Ki,Er,wt=[],sr=fr.trim();if(sr==="")return hC;if(sr in q7)return[q7[sr]];for(;sr!=="";){switch(Er=null,Ki=(sr=W7(sr)).charAt(0)){case'"':case"'":Er=_Ce(sr.substring(1),Ki);break;default:Er=TCe(sr)}if(Er===null||(wt.push(Er[0]),(sr=W7(Er[1]))!==""&&sr.charAt(0)!==","))return hC;sr=sr.replace(/^,/,"")}return wt})(rr);if(this.fontFaces){var hr=(function(fr,Ki){var Er=fr.getFontList(),wt=JSON.stringify(Er);if(Qe===null||vt!==wt){var sr=(function(ur){var Yt=[];return Object.keys(ur).forEach(function(Kn){ur[Kn].forEach(function(Fr){var Gr=null;switch(Fr){case"bold":Gr={family:Kn,weight:"bold"};break;case"italic":Gr={family:Kn,style:"italic"};break;case"bolditalic":Gr={family:Kn,weight:"bold",style:"italic"};break;case"":case"normal":Gr={family:Kn}}Gr!==null&&(Gr.ref={name:Kn,style:Fr},Yt.push(Gr))})}),Yt})(Er);Qe=(function(ur){for(var Yt={},Kn=0;Kn<ur.length;++Kn){var Fr=uC(ur[Kn]),Gr=Fr.family,Sr=Fr.stretch,Kr=Fr.style,_r=Fr.weight;Yt[Gr]=Yt[Gr]||{},Yt[Gr][Sr]=Yt[Gr][Sr]||{},Yt[Gr][Sr][Kr]=Yt[Gr][Sr][Kr]||{},Yt[Gr][Sr][Kr][_r]=Fr}return Yt})(sr.concat(Ki)),vt=wt}return Qe})(this.pdf,this.fontFaces),zr=xr.map(function(fr){return{family:fr,stretch:"normal",weight:Bt,style:Wt}}),yn=(function(fr,Ki,Er){for(var wt=(Er=Er||{}).defaultFontFamily||"times",sr=Object.assign({},ECe,Er.genericFontFamilies||{}),ur=null,Yt=null,Kn=0;Kn<Ki.length;++Kn)if(sr[(ur=uC(Ki[Kn])).family]&&(ur.family=sr[ur.family]),fr.hasOwnProperty(ur.family)){Yt=fr[ur.family];break}if(!(Yt=Yt||fr[wt]))throw new Error("Could not find a font-family for the rule '"+U7(ur)+"' and default family '"+wt+"'.");if(Yt=(function(Fr,Gr){if(Gr[Fr])return Gr[Fr];var Sr=hA[Fr],Kr=Sr<=hA.normal?-1:1,_r=F7(Gr,iH,Sr,Kr);if(!_r)throw new Error("Could not find a matching font-stretch value for "+Fr);return _r})(ur.stretch,Yt),Yt=(function(Fr,Gr){if(Gr[Fr])return Gr[Fr];for(var Sr=nH[Fr],Kr=0;Kr<Sr.length;++Kr)if(Gr[Sr[Kr]])return Gr[Sr[Kr]];throw new Error("Could not find a matching font-style for "+Fr)})(ur.style,Yt),!(Yt=(function(Fr,Gr){if(Gr[Fr])return Gr[Fr];if(Fr===400&&Gr[500])return Gr[500];if(Fr===500&&Gr[400])return Gr[400];var Sr=ACe[Fr],Kr=F7(Gr,aH,Sr,Fr<400?-1:1);if(!Kr)throw new Error("Could not find a matching font-weight for value "+Fr);return Kr})(ur.weight,Yt)))throw new Error("Failed to resolve a font for the rule '"+U7(ur)+"'.");return Yt})(hr,zr);this.pdf.setFont(yn.ref.name,yn.ref.style)}else{var Ir="";(Bt==="bold"||parseInt(Bt,10)>=700||Wt==="bold")&&(Ir="bold"),Wt==="italic"&&(Ir+="italic"),Ir.length===0&&(Ir="normal");for(var xn="",Yr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tr=0;tr<xr.length;tr++){if(this.pdf.internal.getFont(xr[tr],Ir,{noFallback:!0,disableWarning:!0})!==void 0){xn=xr[tr];break}if(Ir==="bolditalic"&&this.pdf.internal.getFont(xr[tr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xn=xr[tr],Ir="bold";else if(this.pdf.internal.getFont(xr[tr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xn=xr[tr],Ir="normal";break}}if(xn===""){for(var tn=0;tn<xr.length;tn++)if(Yr[xr[tn]]){xn=Yr[xr[tn]];break}}xn=xn===""?"Times":xn,this.pdf.setFont(xn,Ir)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Oe){this.ctx.globalCompositeOperation=Oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Oe){this.ctx.globalAlpha=Oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Oe){this.ctx.lineDashOffset=Oe,$.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Oe){this.ctx.lineDash=Oe,$.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Oe){this.ctx.ignoreClearRect=!!Oe}})};p.prototype.setLineDash=function(X){this.lineDash=X},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){M.call(this,"fill",!1)},p.prototype.stroke=function(){M.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(X,se){if(isNaN(X)||isNaN(se))throw ta.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new o(X,se));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(X,se)},p.prototype.closePath=function(){var X=new o(0,0),se=0;for(se=this.path.length-1;se!==-1;se--)if(this.path[se].type==="begin"&&zi(this.path[se+1])==="object"&&typeof this.path[se+1].x=="number"){X=new o(this.path[se+1].x,this.path[se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(X.x,X.y)},p.prototype.lineTo=function(X,se){if(isNaN(X)||isNaN(se))throw ta.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new o(X,se));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},p.prototype.quadraticCurveTo=function(X,se,H,oe){if(isNaN(H)||isNaN(oe)||isNaN(X)||isNaN(se))throw ta.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new o(H,oe)),be=this.ctx.transform.applyToPoint(new o(X,se));this.path.push({type:"qct",x1:be.x,y1:be.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},p.prototype.bezierCurveTo=function(X,se,H,oe,ge,be){if(isNaN(ge)||isNaN(be)||isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe))throw ta.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new o(ge,be)),ke=this.ctx.transform.applyToPoint(new o(X,se)),He=this.ctx.transform.applyToPoint(new o(H,oe));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:He.x,y2:He.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new o(Le.x,Le.y)},p.prototype.arc=function(X,se,H,oe,ge,be){if(isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe)||isNaN(ge))throw ta.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new o(X,se));X=Le.x,se=Le.y;var ke=this.ctx.transform.applyToPoint(new o(0,H)),He=this.ctx.transform.applyToPoint(new o(0,0));H=Math.sqrt(Math.pow(ke.x-He.x,2)+Math.pow(ke.y-He.y,2))}Math.abs(ge-oe)>=2*Math.PI&&(oe=0,ge=2*Math.PI),this.path.push({type:"arc",x:X,y:se,radius:H,startAngle:oe,endAngle:ge,counterclockwise:be})},p.prototype.arcTo=function(X,se,H,oe,ge){throw new Error("arcTo not implemented.")},p.prototype.rect=function(X,se,H,oe){if(isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe))throw ta.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(X,se),this.lineTo(X+H,se),this.lineTo(X+H,se+oe),this.lineTo(X,se+oe),this.lineTo(X,se),this.lineTo(X+H,se),this.lineTo(X,se)},p.prototype.fillRect=function(X,se,H,oe){if(isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe))throw ta.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(X,se,H,oe),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},p.prototype.strokeRect=function(X,se,H,oe){if(isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe))throw ta.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(X,se,H,oe),this.stroke())},p.prototype.clearRect=function(X,se,H,oe){if(isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe))throw ta.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(X,se,H,oe))},p.prototype.save=function(X){X=typeof X!="boolean"||X;for(var se=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(se),X){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},p.prototype.restore=function(X){X=typeof X!="boolean"||X;for(var se=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(se),X&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(X){var se,H,oe,ge;if(X.isCanvasGradient===!0&&(X=X.getColor()),!X)return{r:0,g:0,b:0,a:0,style:X};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(X))se=0,H=0,oe=0,ge=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(X);if(be!==null)se=parseInt(be[1]),H=parseInt(be[2]),oe=parseInt(be[3]),ge=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(X))!==null)se=parseInt(be[1]),H=parseInt(be[2]),oe=parseInt(be[3]),ge=parseFloat(be[4]);else{if(ge=1,typeof X=="string"&&X.charAt(0)!=="#"){var Le=new YW(X);X=Le.ok?Le.toHex():"#000000"}X.length===4?(se=X.substring(1,2),se+=se,H=X.substring(2,3),H+=H,oe=X.substring(3,4),oe+=oe):(se=X.substring(1,3),H=X.substring(3,5),oe=X.substring(5,7)),se=parseInt(se,16),H=parseInt(H,16),oe=parseInt(oe,16)}}return{r:se,g:H,b:oe,a:ge,style:X}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(X,se,H,oe){if(isNaN(se)||isNaN(H)||typeof X!="string")throw ta.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!v.call(this)){var ge=le(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;Z.call(this,{text:X,x:se,y:H,scale:be,angle:ge,align:this.textAlign,maxWidth:oe})}},p.prototype.strokeText=function(X,se,H,oe){if(isNaN(se)||isNaN(H)||typeof X!="string")throw ta.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){oe=isNaN(oe)?void 0:oe;var ge=le(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;Z.call(this,{text:X,x:se,y:H,scale:be,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:oe})}},p.prototype.measureText=function(X){if(typeof X!="string")throw ta.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var se=this.pdf,H=this.pdf.internal.scaleFactor,oe=se.internal.getFontSize(),ge=se.getStringUnitWidth(X)*oe/se.internal.scaleFactor;return new function(be){var Le=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:ge*=Math.round(96*H/72*1e4)/1e4})},p.prototype.scale=function(X,se){if(isNaN(X)||isNaN(se))throw ta.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new u(X,0,0,se,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.rotate=function(X){if(isNaN(X))throw ta.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var se=new u(Math.cos(X),Math.sin(X),-Math.sin(X),Math.cos(X),0,0);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.translate=function(X,se){if(isNaN(X)||isNaN(se))throw ta.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new u(1,0,0,1,X,se);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.transform=function(X,se,H,oe,ge,be){if(isNaN(X)||isNaN(se)||isNaN(H)||isNaN(oe)||isNaN(ge)||isNaN(be))throw ta.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new u(X,se,H,oe,ge,be);this.ctx.transform=this.ctx.transform.multiply(Le)},p.prototype.setTransform=function(X,se,H,oe,ge,be){X=isNaN(X)?1:X,se=isNaN(se)?0:se,H=isNaN(H)?0:H,oe=isNaN(oe)?1:oe,ge=isNaN(ge)?0:ge,be=isNaN(be)?0:be,this.ctx.transform=new u(X,se,H,oe,ge,be)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(X,se,H,oe,ge,be,Le,ke,He){var Je=this.pdf.getImageProperties(X),Qe=1,vt=1,Pt=1,Oe=1;oe!==void 0&&ke!==void 0&&(Pt=ke/oe,Oe=He/ge,Qe=Je.width/oe*ke/oe,vt=Je.height/ge*He/ge),be===void 0&&(be=se,Le=H,se=0,H=0),oe!==void 0&&ke===void 0&&(ke=oe,He=ge),oe===void 0&&ke===void 0&&(ke=Je.width,He=Je.height);var at=this.ctx.transform.decompose(),Wt=le(at.rotate.shx),Bt=new u,yt=(Bt=(Bt=(Bt=Bt.multiply(at.translate)).multiply(at.skew)).multiply(at.scale)).applyToRectangle(new l(be-se*Pt,Le-H*Oe,oe*Qe,ge*vt));if(this.autoPaging){for(var rr,St=N.call(this,yt),xr=[],hr=0;hr<St.length;hr+=1)xr.indexOf(St[hr])===-1&&xr.push(St[hr]);D(xr);for(var zr=xr[0],yn=xr[xr.length-1],Ir=zr;Ir<yn+1;Ir++){this.pdf.setPage(Ir);var xn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Yr=Ir===1?this.posY+this.margin[0]:this.margin[0],tr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fr=Ir===1?0:tr+(Ir-2)*tn;if(this.ctx.clip_path.length!==0){var Ki=this.path;rr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(rr,this.posX+this.margin[3],-fr+Yr+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=Ki}var Er=JSON.parse(JSON.stringify(yt));Er=O([Er],this.posX+this.margin[3],-fr+Yr+this.ctx.prevPageLastElemOffset)[0];var wt=(Ir>zr||Ir<yn)&&C.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xn,tn,null).clip().discardPath()),this.pdf.addImage(X,"JPEG",Er.x,Er.y,Er.w,Er.h,null,null,Wt),wt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(X,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,Wt)};var N=function(X,se,H){var oe=[];se=se||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(X.type){default:case"mt":case"lt":oe.push(Math.floor((X.y+ge)/H)+1);break;case"arc":oe.push(Math.floor((X.y+ge-X.radius)/H)+1),oe.push(Math.floor((X.y+ge+X.radius)/H)+1);break;case"qct":var be=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,X.x1,X.y1,X.x,X.y);oe.push(Math.floor((be.y+ge)/H)+1),oe.push(Math.floor((be.y+be.h+ge)/H)+1);break;case"bct":var Le=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,X.x1,X.y1,X.x2,X.y2,X.x,X.y);oe.push(Math.floor((Le.y+ge)/H)+1),oe.push(Math.floor((Le.y+Le.h+ge)/H)+1);break;case"rect":oe.push(Math.floor((X.y+ge)/H)+1),oe.push(Math.floor((X.y+X.h+ge)/H)+1)}for(var ke=0;ke<oe.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<oe[ke];)T.call(this);return oe},T=function(){var X=this.fillStyle,se=this.strokeStyle,H=this.font,oe=this.lineCap,ge=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=X,this.strokeStyle=se,this.font=H,this.lineCap=oe,this.lineWidth=ge,this.lineJoin=be},O=function(X,se,H){for(var oe=0;oe<X.length;oe++)switch(X[oe].type){case"bct":X[oe].x2+=se,X[oe].y2+=H;case"qct":X[oe].x1+=se,X[oe].y1+=H;default:X[oe].x+=se,X[oe].y+=H}return X},D=function(X){return X.sort(function(se,H){return se-H})},M=function(X,se){var H=this.fillStyle,oe=this.strokeStyle,ge=this.lineCap,be=this.lineWidth,Le=Math.abs(be*this.ctx.transform.scaleX),ke=this.lineJoin;if(this.autoPaging){for(var He,Je,Qe=JSON.parse(JSON.stringify(this.path)),vt=JSON.parse(JSON.stringify(this.path)),Pt=[],Oe=0;Oe<vt.length;Oe++)if(vt[Oe].x!==void 0)for(var at=N.call(this,vt[Oe]),Wt=0;Wt<at.length;Wt+=1)Pt.indexOf(at[Wt])===-1&&Pt.push(at[Wt]);for(var Bt=0;Bt<Pt.length;Bt++)for(;this.pdf.internal.getNumberOfPages()<Pt[Bt];)T.call(this);D(Pt);for(var yt=Pt[0],rr=Pt[Pt.length-1],St=yt;St<rr+1;St++){this.pdf.setPage(St),this.fillStyle=H,this.strokeStyle=oe,this.lineCap=ge,this.lineWidth=Le,this.lineJoin=ke;var xr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],hr=St===1?this.posY+this.margin[0]:this.margin[0],zr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ir=St===1?0:zr+(St-2)*yn;if(this.ctx.clip_path.length!==0){var xn=this.path;He=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(He,this.posX+this.margin[3],-Ir+hr+this.ctx.prevPageLastElemOffset),Y.call(this,X,!0),this.path=xn}if(Je=JSON.parse(JSON.stringify(Qe)),this.path=O(Je,this.posX+this.margin[3],-Ir+hr+this.ctx.prevPageLastElemOffset),se===!1||St===0){var Yr=(St>yt||St<rr)&&C.call(this);Yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xr,yn,null).clip().discardPath()),Y.call(this,X,se),Yr&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=Qe}else this.lineWidth=Le,Y.call(this,X,se),this.lineWidth=be},Y=function(X,se){if((X!=="stroke"||se||!w.call(this))&&(X==="stroke"||se||!v.call(this))){for(var H,oe,ge=[],be=this.path,Le=0;Le<be.length;Le++){var ke=be[Le];switch(ke.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:ke,deltas:[],abs:[]});break;case"lt":var He=ge.length;if(be[Le-1]&&!isNaN(be[Le-1].x)&&(H=[ke.x-be[Le-1].x,ke.y-be[Le-1].y],He>0)){for(;He>=0;He--)if(ge[He-1].close!==!0&&ge[He-1].begin!==!0){ge[He-1].deltas.push(H),ge[He-1].abs.push(ke);break}}break;case"bct":H=[ke.x1-be[Le-1].x,ke.y1-be[Le-1].y,ke.x2-be[Le-1].x,ke.y2-be[Le-1].y,ke.x-be[Le-1].x,ke.y-be[Le-1].y],ge[ge.length-1].deltas.push(H);break;case"qct":var Je=be[Le-1].x+2/3*(ke.x1-be[Le-1].x),Qe=be[Le-1].y+2/3*(ke.y1-be[Le-1].y),vt=ke.x+2/3*(ke.x1-ke.x),Pt=ke.y+2/3*(ke.y1-ke.y),Oe=ke.x,at=ke.y;H=[Je-be[Le-1].x,Qe-be[Le-1].y,vt-be[Le-1].x,Pt-be[Le-1].y,Oe-be[Le-1].x,at-be[Le-1].y],ge[ge.length-1].deltas.push(H);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(ke)}}oe=se?null:X==="stroke"?"stroke":"fill";for(var Wt=!1,Bt=0;Bt<ge.length;Bt++)if(ge[Bt].arc)for(var yt=ge[Bt].abs,rr=0;rr<yt.length;rr++){var St=yt[rr];St.type==="arc"?J.call(this,St.x,St.y,St.radius,St.startAngle,St.endAngle,St.counterclockwise,void 0,se,!Wt):ie.call(this,St.x,St.y),Wt=!0}else if(ge[Bt].close===!0)this.pdf.internal.out("h"),Wt=!1;else if(ge[Bt].begin!==!0){var xr=ge[Bt].start.x,hr=ge[Bt].start.y;me.call(this,ge[Bt].deltas,xr,hr),Wt=!0}oe&&z.call(this,oe),se&&G.call(this)}},q=function(X){var se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return X-H;case"top":return X+se-H;case"hanging":return X+se-2*H;case"middle":return X+se/2-H;default:return X}},W=function(X){return X+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var X=function(){};return X.colorStops=[],X.addColorStop=function(se,H){this.colorStops.push([se,H])},X.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},X.isCanvasGradient=!0,X},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(X,se,H,oe,ge,be,Le,ke,He){for(var Je=Q.call(this,H,oe,ge,be),Qe=0;Qe<Je.length;Qe++){var vt=Je[Qe];Qe===0&&(He?ne.call(this,vt.x1+X,vt.y1+se):ie.call(this,vt.x1+X,vt.y1+se)),ce.call(this,X,se,vt.x2,vt.y2,vt.x3,vt.y3,vt.x4,vt.y4)}ke?G.call(this):z.call(this,Le)},z=function(X){switch(X){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},ne=function(X,se){this.pdf.internal.out(n(X)+" "+i(se)+" m")},Z=function(X){var se;switch(X.align){case"right":case"end":se="right";break;case"center":se="center";break;default:se="left"}var H,oe,ge,be=this.pdf.getTextDimensions(X.text),Le=q.call(this,X.y),ke=W.call(this,Le)-be.h,He=this.ctx.transform.applyToPoint(new o(X.x,Le));if(this.autoPaging){var Je=this.ctx.transform.decompose(),Qe=new u;Qe=(Qe=(Qe=Qe.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale);for(var vt=this.ctx.transform.applyToRectangle(new l(X.x,Le,be.w,be.h)),Pt=Qe.applyToRectangle(new l(X.x,ke,be.w,be.h)),Oe=N.call(this,Pt),at=[],Wt=0;Wt<Oe.length;Wt+=1)at.indexOf(Oe[Wt])===-1&&at.push(Oe[Wt]);D(at);for(var Bt=at[0],yt=at[at.length-1],rr=Bt;rr<yt+1;rr++){this.pdf.setPage(rr);var St=rr===1?this.posY+this.margin[0]:this.margin[0],xr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],hr=this.pdf.internal.pageSize.height-this.margin[2],zr=hr-this.margin[0],yn=this.pdf.internal.pageSize.width-this.margin[1],Ir=yn-this.margin[3],xn=rr===1?0:xr+(rr-2)*zr;if(this.ctx.clip_path.length!==0){var Yr=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(H,this.posX+this.margin[3],-1*xn+St),Y.call(this,"fill",!0),this.path=Yr}var tr=O([JSON.parse(JSON.stringify(Pt))],this.posX+this.margin[3],-xn+St+this.ctx.prevPageLastElemOffset)[0];X.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*X.scale),ge=this.lineWidth,this.lineWidth=ge*X.scale);var tn=this.autoPaging!=="text";if(tn||tr.y+tr.h<=hr){if(tn||tr.y>=St&&tr.x<=yn){var fr=tn?X.text:this.pdf.splitTextToSize(X.text,X.maxWidth||yn-tr.x)[0],Ki=O([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-xn+St+this.ctx.prevPageLastElemOffset)[0],Er=tn&&(rr>Bt||rr<yt)&&C.call(this);Er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ir,zr,null).clip().discardPath()),this.pdf.text(fr,Ki.x,Ki.y,{angle:X.angle,align:se,renderingMode:X.renderingMode}),Er&&this.pdf.restoreGraphicsState()}}else tr.y<hr&&(this.ctx.prevPageLastElemOffset+=hr-tr.y);X.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=ge)}}else X.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*X.scale),ge=this.lineWidth,this.lineWidth=ge*X.scale),this.pdf.text(X.text,He.x+this.posX,He.y+this.posY,{angle:X.angle,align:se,renderingMode:X.renderingMode,maxWidth:X.maxWidth}),X.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=ge)},ie=function(X,se,H,oe){H=H||0,oe=oe||0,this.pdf.internal.out(n(X+H)+" "+i(se+oe)+" l")},me=function(X,se,H){return this.pdf.lines(X,se,H,null,null)},ce=function(X,se,H,oe,ge,be,Le,ke){this.pdf.internal.out([r(a(H+X)),r(s(oe+se)),r(a(ge+X)),r(s(be+se)),r(a(Le+X)),r(s(ke+se)),"c"].join(" "))},Q=function(X,se,H,oe){for(var ge=2*Math.PI,be=Math.PI/2;se>H;)se-=ge;var Le=Math.abs(H-se);Le<ge&&oe&&(Le=ge-Le);for(var ke=[],He=oe?-1:1,Je=se;Le>1e-5;){var Qe=Je+He*Math.min(Le,be);ke.push(de.call(this,X,Je,Qe)),Le-=Math.abs(Qe-Je),Je=Qe}return ke},de=function(X,se,H){var oe=(H-se)/2,ge=X*Math.cos(oe),be=X*Math.sin(oe),Le=ge,ke=-be,He=Le*Le+ke*ke,Je=He+Le*ge+ke*be,Qe=4/3*(Math.sqrt(2*He*Je)-Je)/(Le*be-ke*ge),vt=Le-Qe*ke,Pt=ke+Qe*Le,Oe=vt,at=-Pt,Wt=oe+se,Bt=Math.cos(Wt),yt=Math.sin(Wt);return{x1:X*Math.cos(se),y1:X*Math.sin(se),x2:vt*Bt-Pt*yt,y2:vt*yt+Pt*Bt,x3:Oe*Bt-at*yt,y3:Oe*yt+at*Bt,x4:X*Math.cos(H),y4:X*Math.sin(H)}},le=function(X){return 180*X/Math.PI},ye=function(X,se,H,oe,ge,be){var Le=X+.5*(H-X),ke=se+.5*(oe-se),He=ge+.5*(H-ge),Je=be+.5*(oe-be),Qe=Math.min(X,ge,Le,He),vt=Math.max(X,ge,Le,He),Pt=Math.min(se,be,ke,Je),Oe=Math.max(se,be,ke,Je);return new l(Qe,Pt,vt-Qe,Oe-Pt)},Se=function(X,se,H,oe,ge,be,Le,ke){var He,Je,Qe,vt,Pt,Oe,at,Wt,Bt,yt,rr,St,xr,hr,zr=H-X,yn=oe-se,Ir=ge-H,xn=be-oe,Yr=Le-ge,tr=ke-be;for(Je=0;Je<41;Je++)Bt=(at=(Qe=X+(He=Je/40)*zr)+He*((Pt=H+He*Ir)-Qe))+He*(Pt+He*(ge+He*Yr-Pt)-at),yt=(Wt=(vt=se+He*yn)+He*((Oe=oe+He*xn)-vt))+He*(Oe+He*(be+He*tr-Oe)-Wt),Je==0?(rr=Bt,St=yt,xr=Bt,hr=yt):(rr=Math.min(rr,Bt),St=Math.min(St,yt),xr=Math.max(xr,Bt),hr=Math.max(hr,yt));return new l(Math.round(rr),Math.round(St),Math.round(xr-rr),Math.round(hr-St))},$=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var X,se,H=(X=this.ctx.lineDash,se=this.ctx.lineDashOffset,JSON.stringify({lineDash:X,lineDashOffset:se}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(Br.API),(function(t){var r=function(o){var l,u,d,f,p,x,v,w,C,N;for(u=[],d=0,f=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;f>d;d+=4)(p=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(x=(p=((p=((p=((p=(p-(N=p%85))/85)-(C=p%85))/85)-(w=p%85))/85)-(v=p%85))/85)%85,u.push(x+33,v+33,w+33,C+33,N+33)):u.push(122);return(function(T,O){for(var D=O;D>0;D--)T.pop()})(u,l.length),String.fromCharCode.apply(String,u)+"~>"},n=function(o){var l,u,d,f,p,x=String,v="length",w=255,C="charCodeAt",N="slice",T="replace";for(o[N](-2),o=o[N](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),d=[],f=0,p=(o+=l="uuuuu"[N](o[v]%5||5))[v];p>f;f+=5)u=52200625*(o[C](f)-33)+614125*(o[C](f+1)-33)+7225*(o[C](f+2)-33)+85*(o[C](f+3)-33)+(o[C](f+4)-33),d.push(w&u>>24,w&u>>16,w&u>>8,w&u);return(function(O,D){for(var M=D;M>0;M--)O.pop()})(d,l[v]),x.fromCharCode.apply(x,d)},i=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var u="",d=0;d<o.length;d+=2)u+=String.fromCharCode("0x"+(o[d]+o[d+1]));return u},s=function(o){for(var l=new Uint8Array(o.length),u=o.length;u--;)l[u]=o.charCodeAt(u);return(l=aA(l)).reduce(function(d,f){return d+String.fromCharCode(f)},"")};t.processDataByFilters=function(o,l){var u=0,d=o||"",f=[];for(typeof(l=l||[])=="string"&&(l=[l]),u=0;u<l.length;u+=1)switch(l[u]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=r(d),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=i(d),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=s(d),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[u]+'" is not implemented')}return{data:d,reverseChain:f.reverse().join(" ")}}})(Br.API),(function(t){t.loadFile=function(r,n,i){return(function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(u,d,f){var p=new XMLHttpRequest,x=0,v=function(w){var C=w.length,N=[],T=String.fromCharCode;for(x=0;x<C;x+=1)N.push(T(255&w.charCodeAt(x)));return N.join("")};if(p.open("GET",u,!d),p.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(p.onload=function(){p.status===200?f(v(this.responseText)):f(void 0)}),p.send(null),d&&p.status===200)return v(p.responseText)})(a,s,o)}catch{}return l})(r,n,i)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(Br.API),(function(t){function r(){return(hn.html2canvas?Promise.resolve(hn.html2canvas):jv(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(hn.DOMPurify?Promise.resolve(hn.DOMPurify):jv(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var u=zi(l);return u==="undefined"?"undefined":u==="string"||l instanceof String?"string":u==="number"||l instanceof Number?"number":u==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":u==="object"?"object":"unknown"},a=function(l,u){var d=document.createElement(l);for(var f in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[f]=u.style[f];return d},s=function l(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(l(p,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f},o=function l(u){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),f=l.convert(Promise.resolve(),d);return(f=f.setProgress(1,l,1,[l])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,u){return l.__proto__=u||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,u){return this.then(function(){switch(u=u||(function(d){switch(i(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),u){case"string":return this.then(n).then(function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(r).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(r).then(function(u){var d=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=f,f)for(var v=0;v<f.length;++v){var w=f[v],C=w.src.find(function(N){return N.format==="truetype"});C&&d.addFont(C.url,w.ref.name,w.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,d.context2d.save(!0),u(this.prop.container,x)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,u):this.outputPdf(l,u)},o.prototype.outputPdf=function(l,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,u)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(i(l)!=="object")return this;var u=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(l,u){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return u?u(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function u(d,f){return Math.floor(d*f/72*96)}return this.then(function(){(l=l||Br.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:u(l.inner.width,l.k),height:u(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,u,d,f){return l!=null&&(this.progress.val=l),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,u,d,f){return this.setProgress(l?this.progress.val+l:null,u||null,d?this.progress.n+d:null,f?this.progress.stack.concat(f):null)},o.prototype.then=function(l,u){var d=this;return this.thenCore(l,u,function(f,p){return d.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(x){return d.updateProgress(null,f),x}).then(f,p).then(function(x){return d.updateProgress(1),x})})},o.prototype.thenCore=function(l,u,d){d=d||Promise.prototype.then;var f=this;l&&(l=l.bind(f)),u&&(u=u.bind(f));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:o.convert(Object.assign({},f),Promise.prototype),x=d.call(p,l,u);return o.convert(x,f.__proto__)},o.prototype.thenExternal=function(l,u){return Promise.prototype.then.call(this,l,u)},o.prototype.thenList=function(l){var u=this;return l.forEach(function(d){u=u.thenCore(d)}),u},o.prototype.catch=function(l){l&&(l=l.bind(this));var u=Promise.prototype.catch.call(this,l);return o.convert(u,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Br.getPageSize=function(l,u,d){if(zi(l)==="object"){var f=l;l=f.orientation,u=f.unit||u,d=f.format||d}u=u||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var p,x=(""+d).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+u}var w,C=0,N=0;if(v.hasOwnProperty(x))C=v[x][1]/p,N=v[x][0]/p;else try{C=d[1],N=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",N>C&&(w=N,N=C,C=w);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",C>N&&(w=N,N=C,C=w)}return{width:N,height:C,unit:u,k:p,orientation:l}},t.html=function(l,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(uC):null;var d=new o(u);return u.worker?d:d.from(l).doCallback()}})(Br.API),Br.API.addJS=function(t){var r,n,i=t;return this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(r+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){r!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+r+" 0 R>>")}),this},(function(t){var r;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=i.exec(o);if(l!=null){var u=l[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(s=0;s<d;s++){var p=n.internal.newObject();f.push(p);var x=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),r=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,a,s){var o={title:a,options:s,children:[]};return i==null&&(i=this.root),i.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var o=i.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var u=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<i.children.length;d++)this.renderItems(i.children[d])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,a){for(var s=0;s<a.children.length;s++)i.count++,this.count_r(i,a.children[s]);return i.count}}])})(Br.API),(function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,a,s,o,l){var u,d=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,u=(function(p){for(var x,v=256*p.charCodeAt(4)+p.charCodeAt(5),w=p.length,C={width:0,height:0,numcomponents:1},N=4;N<w;N+=2){if(N+=v,r.indexOf(p.charCodeAt(N+1))!==-1){x=256*p.charCodeAt(N+5)+p.charCodeAt(N+6),C={width:256*p.charCodeAt(N+7)+p.charCodeAt(N+8),height:x,numcomponents:p.charCodeAt(N+9)};break}v=256*p.charCodeAt(N+2)+p.charCodeAt(N+3)}return C})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),u.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:n,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:d,index:i,alias:a}}return f}})(Br.API),Br.API.processPNG=function(t,r,n,i){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=hCe(t,{checkCrc:!0}),o=s.width,l=s.height,u=s.channels,d=s.palette,f=s.depth;a=d&&u===1?(function(J){for(var z=J.width,G=J.height,ne=J.data,Z=J.palette,ie=J.depth,me=!1,ce=[],Q=[],de=void 0,le=!1,ye=0,Se=0;Se<Z.length;Se++){var $=QR(Z[Se],4),X=$[0],se=$[1],H=$[2],oe=$[3];ce.push(X,se,H),oe!=null&&(oe===0?(ye++,Q.length<1&&Q.push(Se)):oe<255&&(le=!0))}if(le||ye>1){me=!0,Q=void 0;var ge=z*G;de=new Uint8Array(ge);for(var be=new DataView(ne.buffer),Le=0;Le<ge;Le++){var ke=fC(be,Le,ie),He=QR(Z[ke],4)[3];de[Le]=He}}else ye===0&&(Q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:me?8:void 0,colorBytes:ne,alphaBytes:de,needSMask:me,palette:ce,mask:Q}})(s):u===2||u===4?(function(J){for(var z=J.data,G=J.width,ne=J.height,Z=J.channels,ie=J.depth,me=Z===2?"DeviceGray":"DeviceRGB",ce=Z-1,Q=G*ne,de=ce,le=Q*de,ye=1*Q,Se=Math.ceil(le*ie/8),$=Math.ceil(ye*ie/8),X=new Uint8Array(Se),se=new Uint8Array($),H=new DataView(z.buffer),oe=new DataView(X.buffer),ge=new DataView(se.buffer),be=!1,Le=0;Le<Q;Le++){for(var ke=Le*Z,He=0;He<de;He++)X7(oe,fC(H,ke+He,ie),Le*de+He,ie);var Je=fC(H,ke+de,ie);Je<(1<<ie)-1&&(be=!0),X7(ge,Je,1*Le,ie)}return{colorSpace:me,colorsPerPixel:ce,sMaskBitsPerComponent:be?ie:void 0,colorBytes:X,alphaBytes:se,needSMask:be}})(s):(function(J){var z=J.data,G=J.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:z instanceof Uint16Array?(function(ne){for(var Z=ne.length,ie=new Uint8Array(2*Z),me=new DataView(ie.buffer,ie.byteOffset,ie.byteLength),ce=0;ce<Z;ce++)me.setUint16(2*ce,ne[ce],!1);return ie})(z):z,needSMask:!1}})(s);var p,x,v,w=a,C=w.colorSpace,N=w.colorsPerPixel,T=w.sMaskBitsPerComponent,O=w.colorBytes,D=w.alphaBytes,M=w.needSMask,Y=w.palette,q=w.mask,W=null;return i!==Br.API.image_compression.NONE&&typeof aA=="function"?(W=(function(J){var z;switch(J){case Br.API.image_compression.FAST:z=11;break;case Br.API.image_compression.MEDIUM:z=13;break;case Br.API.image_compression.SLOW:z=14;break;default:z=12}return z})(i),p=this.decode.FLATE_DECODE,x="/Predictor ".concat(W," /Colors ").concat(N," /BitsPerComponent ").concat(f," /Columns ").concat(o),t=G7(O,Math.ceil(o*N*f/8),N,f,i),M&&(v=G7(D,Math.ceil(o*T/8),1,T,i))):(p=void 0,x=void 0,t=O,M&&(v=D)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:n,data:t,index:r,filter:p,decodeParameters:x,transparency:q,palette:Y,sMask:v,predictor:W,width:o,height:l,bitsPerComponent:f,sMaskBitsPerComponent:T,colorSpace:C}}},(function(t){t.processGIF89A=function(r,n,i,a){var s=new DCe(r),o=s.width,l=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:o,height:l},f=new mC(100).encode(d,100);return t.processJPEG.call(this,f,n,i,a)},t.processGIF87A=t.processGIF89A})(Br.API),wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:a,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wd.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,r=this.width*this.height*4;if(r>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(r);try{this[t]()}catch(n){ta.log("bit decode error:"+n)}},wd.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),n=r%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<r;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var u=this.palette[s>>7-l&1];this.data[o+4*l]=u.blue,this.data[o+4*l+1]=u.green,this.data[o+4*l+2]=u.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},wd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*a*4,l=s>>4,u=15&s,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[u],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}r!==0&&(this.pos+=4-r)}},wd.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},wd.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&r)/r*255|0,l=(s>>5&r)/r*255|0,u=(s>>10&r)/r*255|0,d=s>>15?255:0,f=i*this.width*4+4*a;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=d}this.pos+=t}},wd.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&r)/r*255|0,u=(o>>5&n)/n*255|0,d=(o>>11)/r*255|0,f=a*this.width*4+4*s;this.data[f]=d,this.data[f+1]=u,this.data[f+2]=l,this.data[f+3]=255}this.pos+=t}},wd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},wd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*n;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=o}},wd.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(r,n,i,a){var s=new wd(r,!1),o=s.width,l=s.height,u={data:s.getData(),width:o,height:l},d=new mC(100).encode(u,100);return t.processJPEG.call(this,d,n,i,a)}})(Br.API),eM.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(r,n,i,a){var s=new eM(r),o=s.width,l=s.height,u={data:s.getData(),width:o,height:l},d=new mC(100).encode(u,100);return t.processJPEG.call(this,d,n,i,a)}})(Br.API),Br.API.processRGBA=function(t,r,n){for(var i=t.data,a=i.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,u=0,d=0;d<a;d+=4){var f=i[d],p=i[d+1],x=i[d+2],v=i[d+3];s[l++]=f,s[l++]=p,s[l++]=x,o[u++]=v}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:w,index:r,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Br.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fp=Br.API,ev=fp.getCharWidthsArray=function(t,r){var n,i,a=(r=r||{}).font||this.internal.getFont(),s=r.fontSize||this.internal.getFontSize(),o=r.charSpace||this.internal.getCharSpace(),l=r.widths?r.widths:a.metadata.Unicode.widths,u=l.fof?l.fof:1,d=r.kerning?r.kerning:a.metadata.Unicode.kerning,f=d.fof?d.fof:1,p=r.doKerning!==!1,x=0,v=t.length,w=0,C=l[0]||u,N=[];for(n=0;n<v;n++)i=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?N.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+o*(1e3/s)||0)/1e3):(x=p&&zi(d[i])==="object"&&!isNaN(parseInt(d[i][w],10))?d[i][w]/f:0,N.push((l[i]||C)/u+x)),w=i;return N},H7=fp.getStringUnitWidth=function(t,r){var n=(r=r||{}).fontSize||this.internal.getFontSize(),i=r.font||this.internal.getFont(),a=r.charSpace||this.internal.getCharSpace();return fp.processArabic&&(t=fp.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,a)/n:ev.apply(this,arguments).reduce(function(s,o){return s+o},0)},V7=function(t,r,n,i){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+r[s]<n;)l+=r[s],s++;a.push(t.slice(0,s));var u=s;for(l=0;s!==o;)l+r[s]>i&&(a.push(t.slice(u,s)),l=0,u=s),l+=r[s],s++;return u!==s&&a.push(t.slice(u,s)),a},$7=function(t,r,n){n||(n={});var i,a,s,o,l,u,d,f=[],p=[f],x=n.textIndent||0,v=0,w=0,C=t.split(" "),N=ev.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?C[0].length+2:n.lineIndent||0){var T=Array(u).join(" "),O=[];C.map(function(M){(M=M.split(/\s*\n/)).length>1?O=O.concat(M.map(function(Y,q){return(q&&Y.length?`
`:"")+Y})):O.push(M[0])}),C=O,u=H7.apply(this,[T,n])}for(s=0,o=C.length;s<o;s++){var D=0;if(i=C[s],u&&i[0]==`
`&&(i=i.substr(1),D=1),x+v+(w=(a=ev.apply(this,[i,n])).reduce(function(M,Y){return M+Y},0))>r||D){if(w>r){for(l=V7.apply(this,[i,a,r-(x+v),r]),f.push(l.shift()),f=[l.pop()];l.length;)p.push([l.shift()]);w=a.slice(i.length-(f[0]?f[0].length:0)).reduce(function(M,Y){return M+Y},0)}else f=[i];p.push(f),x=w+u,v=N}else f.push(i),x+=v+w,v=N}return d=u?function(M,Y){return(Y?T:"")+M.join(" ")}:function(M){return M.join(" ")},p.map(d)},fp.splitTextToSize=function(t,r,n){var i,a=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle),x="Unicode";return p.metadata[x]?{widths:p.metadata[x].widths||{0:1},kerning:p.metadata[x].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*r/a;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=n.lineIndent;var l,u,d=[];for(l=0,u=i.length;l<u;l++)d=d.concat($7.apply(this,[i[l],o,s]));return d},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="0123456789abcdef",n="klmnopqrstuvwxyz",i={},a={},s=0;s<16;s++)i[n[s]]=r[s],a[r[s]]=n[s];var o=function(x){return"0x"+parseInt(x,10).toString(16)},l=t.__fontmetrics__.compress=function(x){var v,w,C,N,T=["{"];for(var O in x){if(v=x[O],isNaN(parseInt(O,10))?w="'"+O+"'":(O=parseInt(O,10),w=(w=o(O).slice(2)).slice(0,-1)+a[w.slice(-1)]),typeof v=="number")v<0?(C=o(v).slice(3),N="-"):(C=o(v).slice(2),N=""),C=N+C.slice(0,-1)+a[C.slice(-1)];else{if(zi(v)!=="object")throw new Error("Don't know what to do with value type "+zi(v)+".");C=l(v)}T.push(w+C)}return T.push("}"),T.join("")},u=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,w,C,N,T={},O=1,D=T,M=[],Y="",q="",W=x.length-1,J=1;J<W;J+=1)(N=x[J])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(N):N=="{"?(M.push([D,C]),D={},C=void 0):N=="}"?((w=M.pop())[0][w[1]]=D,C=void 0,D=w[0]):N=="-"?O=-1:C===void 0?i.hasOwnProperty(N)?(Y+=i[N],C=parseInt(Y,16)*O,O=1,Y=""):Y+=N:i.hasOwnProperty(N)?(q+=i[N],D[C]=parseInt(q,16)*O,O=1,C=void 0,q=""):q+=N;return T},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var v=x.font,w=p.Unicode[v.postScriptName];w&&(v.metadata.Unicode={},v.metadata.Unicode.widths=w.widths,v.metadata.Unicode.kerning=w.kerning);var C=f.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])})(Br.API),(function(t){var r=function(n){for(var i=n.length,a=new Uint8Array(i),s=0;s<i;s++)a[s]=n.charCodeAt(s);return a};t.API.events.push(["addFont",function(n){var i=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?r(l):r(Sv(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,i)}}])})(Br),Br.API.addSvgAsImage=function(t,r,n,i,a,s,o,l){if(isNaN(r)||isNaN(n))throw ta.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw ta.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(hn.canvg?Promise.resolve(hn.canvg):jv(()=>import("./index.es-SOep5qu5.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(d,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),r,n,i,a,o,l)})},Br.API.putTotalPages=function(t){var r,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(r,n);return this},Br.API.viewerPreferences=function(t,r){var n;t=t||{},r=r||!1;var i,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),u=[],d=0,f=0,p=0;function x(w,C){var N,T=!1;for(N=0;N<w.length;N+=1)w[N]===C&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var v=l.length;for(p=0;p<v;p+=1)n[l[p]].value=n[l[p]].defaultValue,n[l[p]].explicitSet=!1}if(zi(t)==="object"){for(a in t)if(s=t[a],x(l,a)&&s!==void 0){if(n[a].type==="boolean"&&typeof s=="boolean")n[a].value=s;else if(n[a].type==="name"&&x(n[a].valueSet,s))n[a].value=s;else if(n[a].type==="integer"&&Number.isInteger(s))n[a].value=s;else if(n[a].type==="array"){for(d=0;d<s.length;d+=1)if(i=!0,s[d].length===1&&typeof s[d][0]=="number")u.push(String(s[d]-1));else if(s[d].length>1){for(f=0;f<s[d].length;f+=1)typeof s[d][f]!="number"&&(i=!1);i===!0&&u.push([s[d][0]-1,s[d][1]-1].join(" "))}n[a].value="["+u.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,C=[];for(w in n)n[w].explicitSet===!0&&(n[w].type==="name"?C.push("/"+w+" /"+n[w].value):C.push("/"+w+" "+n[w].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},Br.API.addMetadata=function(t,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:r??"http://jspdf.default.namespaceuri/",rawXml:typeof r=="boolean"&&r},this.internal.events.subscribe("putCatalog",RCe),this.internal.events.subscribe("postPutResources",PCe)),this},(function(t){var r=t.API,n=r.pdfEscape16=function(s,o){for(var l,u=o.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],p=0,x=s.length;p<x;++p){if(l=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(p),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},i=function(s){var o,l,u,d,f,p,x;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,x=(l=Object.keys(s).sort(function(v,w){return v-w})).length;p<x;p++)o=l[p],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+d+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(s){(function(o){var l=o.font,u=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),v="",w=0;w<x.length;w++)v+=String.fromCharCode(x[w]);var C=d();f({data:v,addLength1:!0,objectId:C}),u("endobj");var N=d();f({data:i(l.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var T=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+xp(l.fontName)),u("/FontFile2 "+C+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var O=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+xp(l.fontName)),u("/FontDescriptor "+T+" 0 R"),u("/W "+t.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+N+" 0 R"),u("/BaseFont /"+xp(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+O+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(s)}]),r.events.push(["putFont",function(s){(function(o){var l=o.font,u=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,x="",v=0;v<p.length;v++)x+=String.fromCharCode(p[v]);var w=d();f({data:x,addLength1:!0,objectId:w}),u("endobj");var C=d();f({data:i(l.metadata.toUnicode),addLength1:!0,objectId:C}),u("endobj");var N=d();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+w+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+xp(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=d();for(var T=0;T<l.metadata.hmtx.widths.length;T++)l.metadata.hmtx.widths[T]=parseInt(l.metadata.hmtx.widths[T]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+xp(l.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",u=s.x,d=s.y,f=s.options||{},p=s.mutex||{},x=p.pdfEscape,v=p.activeFontKey,w=p.fonts,C=v,N="",T=0,O="",D=w[C].encoding;if(w[C].encoding!=="Identity-H")return{text:l,x:u,y:d,options:f,mutex:p};for(O=l,C=v,Array.isArray(l)&&(O=l[0]),T=0;T<O.length;T+=1)w[C].metadata.hasOwnProperty("cmap")&&(o=w[C].metadata.cmap.unicode.codeMap[O[T].charCodeAt(0)]),o||O[T].charCodeAt(0)<256&&w[C].metadata.hasOwnProperty("Unicode")?N+=O[T]:N+="";var M="";return parseInt(C.slice(1))<14||D==="WinAnsiEncoding"?M=x(N,C).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(M=n(N,w[C])),p.isHex=!0,{text:M,x:u,y:d,options:f,mutex:p}};r.events.push(["postProcessText",function(s){var o=s.text||"",l=[],u={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},u,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},u,{text:o[d]})).text);s.text=l}else s.text=a(Object.assign({},u,{text:o})).text}])})(Br),(function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return r.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Br.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var a,s,o,l,u,d,f,p=r,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,D=0;this.__bidiEngine__={};var M=function(ne){var Z=ne.charCodeAt(),ie=Z>>8,me=C[ie];return me!==void 0?p[256*me+(255&Z)]:ie===252||ie===253?"AL":T.test(ie)?"L":ie===8?"R":"N"},Y=function(ne){for(var Z,ie=0;ie<ne.length;ie++){if((Z=M(ne.charAt(ie)))==="L")return!1;if(Z==="R")return!0}return!1},q=function(ne,Z,ie,me){var ce,Q,de,le,ye=Z[me];switch(ye){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(ye="AN");break;case"AL":O=!0,ye="R";break;case"WS":case"BN":ye="N";break;case"CS":me<1||me+1>=Z.length||(ce=ie[me-1])!=="EN"&&ce!=="AN"||(Q=Z[me+1])!=="EN"&&Q!=="AN"?ye="N":O&&(Q="AN"),ye=Q===ce?Q:"N";break;case"ES":ye=(ce=me>0?ie[me-1]:"B")==="EN"&&me+1<Z.length&&Z[me+1]==="EN"?"EN":"N";break;case"ET":if(me>0&&ie[me-1]==="EN"){ye="EN";break}if(O){ye="N";break}for(de=me+1,le=Z.length;de<le&&Z[de]==="ET";)de++;ye=de<le&&Z[de]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(le=Z.length,de=me+1;de<le&&Z[de]==="NSM";)de++;if(de<le){var Se=ne[me],$=Se>=1425&&Se<=2303||Se===64286;if(ce=Z[de],$&&(ce==="R"||ce==="AL")){ye="R";break}}}ye=me<1||(ce=Z[me-1])==="B"?"N":ie[me-1];break;case"B":O=!1,a=!0,ye=D;break;case"S":s=!0,ye="N"}return ye},W=function(ne,Z,ie){var me=ne.split("");return ie&&J(me,ie,{hiLevel:D}),me.reverse(),Z&&Z.reverse(),me.join("")},J=function(ne,Z,ie){var me,ce,Q,de,le,ye=-1,Se=ne.length,$=0,X=[],se=D?v:x,H=[];for(O=!1,a=!1,s=!1,ce=0;ce<Se;ce++)H[ce]=M(ne[ce]);for(Q=0;Q<Se;Q++){if(le=$,X[Q]=q(ne,H,X,Q),me=240&($=se[le][w[X[Q]]]),$&=15,Z[Q]=de=se[$][5],me>0)if(me===16){for(ce=ye;ce<Q;ce++)Z[ce]=1;ye=-1}else ye=-1;if(se[$][6])ye===-1&&(ye=Q);else if(ye>-1){for(ce=ye;ce<Q;ce++)Z[ce]=de;ye=-1}H[Q]==="B"&&(Z[Q]=0),ie.hiLevel|=de}s&&(function(oe,ge,be){for(var Le=0;Le<be;Le++)if(oe[Le]==="S"){ge[Le]=D;for(var ke=Le-1;ke>=0&&oe[ke]==="WS";ke--)ge[ke]=D}})(H,Z,Se)},z=function(ne,Z,ie,me,ce){if(!(ce.hiLevel<ne)){if(ne===1&&D===1&&!a)return Z.reverse(),void(ie&&ie.reverse());for(var Q,de,le,ye,Se=Z.length,$=0;$<Se;){if(me[$]>=ne){for(le=$+1;le<Se&&me[le]>=ne;)le++;for(ye=$,de=le-1;ye<de;ye++,de--)Q=Z[ye],Z[ye]=Z[de],Z[de]=Q,ie&&(Q=ie[ye],ie[ye]=ie[de],ie[de]=Q);$=le}$++}}},G=function(ne,Z,ie){var me=ne.split(""),ce={hiLevel:D};return ie||(ie=[]),J(me,ie,ce),(function(Q,de,le){if(le.hiLevel!==0&&f)for(var ye,Se=0;Se<Q.length;Se++)de[Se]===1&&(ye=N.indexOf(Q[Se]))>=0&&(Q[Se]=N[ye+1])})(me,ie,ce),z(2,me,Z,ie,ce),z(1,me,Z,ie,ce),me.join("")};return this.__bidiEngine__.doBidiReorder=function(ne,Z,ie){if((function(ce,Q){if(Q)for(var de=0;de<ce.length;de++)Q[de]=de;l===void 0&&(l=Y(ce)),d===void 0&&(d=Y(ce))})(ne,Z),o||!u||d)if(o&&u&&l^d)D=l?1:0,ne=W(ne,Z,ie);else if(!o&&u&&d)D=l?1:0,ne=G(ne,Z,ie),ne=W(ne,Z);else if(!o||l||u||d){if(o&&!u&&l^d)ne=W(ne,Z),l?(D=0,ne=G(ne,Z,ie)):(D=1,ne=G(ne,Z,ie),ne=W(ne,Z));else if(o&&l&&!u&&d)D=1,ne=G(ne,Z,ie),ne=W(ne,Z);else if(!o&&!u&&l^d){var me=f;l?(D=1,ne=G(ne,Z,ie),D=0,f=!1,ne=G(ne,Z,ie),f=me):(D=0,ne=G(ne,Z,ie),ne=W(ne,Z),D=1,f=!1,ne=G(ne,Z,ie),f=me,ne=W(ne,Z))}}else D=0,ne=G(ne,Z,ie);else D=l?1:0,ne=G(ne,Z,ie);return ne},this.__bidiEngine__.setOptions=function(ne){ne&&(o=ne.isInputVisual,u=ne.isOutputVisual,l=ne.isInputRtl,d=ne.isOutputRtl,f=ne.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([n.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([n.doBidiReorder(a[l])]);i.text=o}else i.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(Br),Br.API.TTFFont=(function(){function t(r){var n;if(this.rawData=r,n=this.contents=new mf(r),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new YCe(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new MCe(this.contents),this.head=new zCe(this),this.name=new WCe(this),this.cmap=new oH(this),this.toUnicode={},this.hhea=new BCe(this),this.maxp=new HCe(this),this.hmtx=new VCe(this),this.post=new qCe(this),this.os2=new FCe(this),this.loca=new QCe(this),this.glyf=new $Ce(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,n,i,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,u,d;for(d=[],o=0,l=(u=this.bbox).length;o<l;o++)r=u[o],d.push(Math.round(r*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var n;return((n=this.cmap.unicode)!=null?n.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*n},t.prototype.widthOfString=function(r,n,i){var a,s,o,l;for(o=0,s=0,l=(r=""+r).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=r.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(r,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*r},t})();var Dd,mf=(function(){function t(r){this.data=r??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var n,i;for(i=[],n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(r){var n,i,a;for(a=[],n=0,i=r.length;0<=i?n<i:n>i;n=0<=i?++n:--n)a.push(this.writeByte(r.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,n,i,a,s,o,l,u;return r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^u)+1):72057594037927940*r+281474976710656*n+1099511627776*i+4294967296*a+16777216*s+65536*o+256*l+u},t.prototype.writeLongLong=function(r){var n,i;return n=Math.floor(r/4294967296),i=4294967295&r,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var n,i;for(n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(r){var n,i,a,s;for(s=[],i=0,a=r.length;i<a;i++)n=r[i],s.push(this.writeByte(n));return s},t})(),MCe=(function(){var t;function r(n){var i,a,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return r.prototype.encode=function(n){var i,a,s,o,l,u,d,f,p,x,v,w,C;for(C in v=Object.keys(n).length,u=Math.log(2),p=16*Math.floor(Math.log(v)/u),o=Math.floor(p/u),f=16*v-p,(a=new mf).writeInt(this.scalarType),a.writeShort(v),a.writeShort(p),a.writeShort(o),a.writeShort(f),s=16*v,d=a.pos+s,l=null,w=[],n)for(x=n[C],a.writeString(C),a.writeInt(t(x)),a.writeInt(d),a.writeInt(x.length),w=w.concat(x),C==="head"&&(l=d),d+=x.length;d%4;)w.push(0),d++;return a.write(w),i=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(i),a.data},t=function(n){var i,a,s,o;for(n=lH.call(n);n.length%4;)n.push(0);for(s=new mf(n),a=0,i=0,o=n.length;i<o;i=i+=4)a+=s.readUInt32();return 4294967295&a},r})(),LCe={}.hasOwnProperty,bu=function(t,r){for(var n in r)LCe.call(r,n)&&(t[n]=r[n]);function i(){this.constructor=t}return i.prototype=r.prototype,t.prototype=new i,t.__super__=r.prototype,t};Dd=(function(){function t(r){var n;this.file=r,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var zCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new mf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t})(),tM=(function(){function t(r,n){var i,a,s,o,l,u,d,f,p,x,v,w,C,N,T,O,D;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=n+r.readInt(),p=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=r.readByte();break;case 4:for(v=r.readUInt16(),x=v/2,r.pos+=6,s=(function(){var M,Y;for(Y=[],u=M=0;0<=x?M<x:M>x;u=0<=x?++M:--M)Y.push(r.readUInt16());return Y})(),r.pos+=2,C=(function(){var M,Y;for(Y=[],u=M=0;0<=x?M<x:M>x;u=0<=x?++M:--M)Y.push(r.readUInt16());return Y})(),d=(function(){var M,Y;for(Y=[],u=M=0;0<=x?M<x:M>x;u=0<=x?++M:--M)Y.push(r.readUInt16());return Y})(),f=(function(){var M,Y;for(Y=[],u=M=0;0<=x?M<x:M>x;u=0<=x?++M:--M)Y.push(r.readUInt16());return Y})(),a=(this.length-r.pos+this.offset)/2,l=(function(){var M,Y;for(Y=[],u=M=0;0<=a?M<a:M>a;u=0<=a?++M:--M)Y.push(r.readUInt16());return Y})(),u=T=0,D=s.length;T<D;u=++T)for(N=s[u],i=O=w=C[u];w<=N?O<=N:O>=N;i=w<=N?++O:--O)f[u]===0?o=i+d[u]:(o=l[f[u]/2+(i-w)-(x-u)]||0)!==0&&(o+=d[u]),this.codeMap[i]=65535&o}r.pos=p}return t.encode=function(r,n){var i,a,s,o,l,u,d,f,p,x,v,w,C,N,T,O,D,M,Y,q,W,J,z,G,ne,Z,ie,me,ce,Q,de,le,ye,Se,$,X,se,H,oe,ge,be,Le,ke,He,Je,Qe;switch(me=new mf,o=Object.keys(r).sort(function(vt,Pt){return vt-Pt}),n){case"macroman":for(C=0,N=(function(){var vt=[];for(w=0;w<256;++w)vt.push(0);return vt})(),O={0:0},s={},ce=0,ye=o.length;ce<ye;ce++)O[ke=r[a=o[ce]]]==null&&(O[ke]=++C),s[a]={old:r[a],new:O[r[a]]},N[a]=O[r[a]];return me.writeUInt16(1),me.writeUInt16(0),me.writeUInt32(12),me.writeUInt16(0),me.writeUInt16(262),me.writeUInt16(0),me.write(N),{charMap:s,subtable:me.data,maxGlyphID:C+1};case"unicode":for(Z=[],p=[],D=0,O={},i={},T=d=null,Q=0,Se=o.length;Q<Se;Q++)O[Y=r[a=o[Q]]]==null&&(O[Y]=++D),i[a]={old:Y,new:O[Y]},l=O[Y]-a,T!=null&&l===d||(T&&p.push(T),Z.push(a),d=l),T=a;for(T&&p.push(T),p.push(65535),Z.push(65535),G=2*(z=Z.length),J=2*Math.pow(Math.log(z)/Math.LN2,2),x=Math.log(J/2)/Math.LN2,W=2*z-J,u=[],q=[],v=[],w=de=0,$=Z.length;de<$;w=++de){if(ne=Z[w],f=p[w],ne===65535){u.push(0),q.push(0);break}if(ne-(ie=i[ne].new)>=32768)for(u.push(0),q.push(2*(v.length+z-w)),a=le=ne;ne<=f?le<=f:le>=f;a=ne<=f?++le:--le)v.push(i[a].new);else u.push(ie-ne),q.push(0)}for(me.writeUInt16(3),me.writeUInt16(1),me.writeUInt32(12),me.writeUInt16(4),me.writeUInt16(16+8*z+2*v.length),me.writeUInt16(0),me.writeUInt16(G),me.writeUInt16(J),me.writeUInt16(x),me.writeUInt16(W),be=0,X=p.length;be<X;be++)a=p[be],me.writeUInt16(a);for(me.writeUInt16(0),Le=0,se=Z.length;Le<se;Le++)a=Z[Le],me.writeUInt16(a);for(He=0,H=u.length;He<H;He++)l=u[He],me.writeUInt16(l);for(Je=0,oe=q.length;Je<oe;Je++)M=q[Je],me.writeUInt16(M);for(Qe=0,ge=v.length;Qe<ge;Qe++)C=v[Qe],me.writeUInt16(C);return{charMap:i,subtable:me.data,maxGlyphID:D+1}}},t})(),oH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,i,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new tM(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var i,a;return n==null&&(n="macroman"),i=tM.encode(r,n),(a=new mf).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},t})(),BCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),FCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i})(),this.charRange=(function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),qCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="post",t.prototype.parse=function(r){var n,i,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(i=r.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 262144:return this.map=(function(){var o,l,u;for(u=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t})(),UCe=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},WCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="name",t.prototype.parse=function(r){var n,i,a,s,o,l,u,d,f,p,x;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),i=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},s=f=0,p=i.length;f<p;s=++f)a=i[s],r.pos=a.offset,d=r.readString(a.length),o=new UCe(d,a),u[x=a.nameID]==null&&(u[x]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t})(),HCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),VCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,i,a,s,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,f;for(f=[],n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)f.push(r.readInt16());return f})(),this.widths=(function(){var d,f,p,x;for(x=[],d=0,f=(p=this.metrics).length;d<f;d++)s=p[d],x.push(s.advance);return x}).call(this),i=this.widths[this.widths.length-1],u=[],n=o=0;0<=a?o<a:o>a;n=0<=a?++o:--o)u.push(this.widths.push(i));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),lH=[].slice,$Ce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,i,a,s,o,l,u,d,f,p;return r in this.cache?this.cache[r]:(s=this.file.loca,n=this.file.contents,i=s.indexOf(r),(a=s.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,o=(l=new mf(n.read(a))).readShort(),d=l.readShort(),p=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=o===-1?new KCe(l,d,p,u,f):new GCe(l,o,d,p,u,f),this.cache[r]))},t.prototype.encode=function(r,n,i){var a,s,o,l,u;for(o=[],s=[],l=0,u=n.length;l<u;l++)a=r[n[l]],s.push(o.length),a&&(o=o.concat(a.encode(i)));return s.push(o.length),{table:o,offsets:s}},t})(),GCe=(function(){function t(r,n,i,a,s,o){this.raw=r,this.numberOfContours=n,this.xMin=i,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),KCe=(function(){function t(r,n,i,a,s){var o,l;for(this.raw=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var r,n,i;for(n=new mf(lH.call(this.raw.data)),r=0,i=this.glyphIDs.length;r<i;++r)n.pos=this.glyphOffsets[r];return n.data},t})(),QCe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return bu(t,Dd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=2)s.push(2*r.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=4)s.push(r.readUInt32());return s}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<i.length;++o)if(i[o]=a,s<n.length&&n[s]==o){++s,i[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var d=new Array(4*i.length),f=0;f<i.length;++f)d[4*f+3]=255&i[f],d[4*f+2]=(65280&i[f])>>8,d[4*f+1]=(16711680&i[f])>>16,d[4*f]=(4278190080&i[f])>>24;return d},t})(),YCe=(function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,n,i,a,s;for(n in a=this.font.cmap.tables[0].codeMap,r={},s=this.subset)i=s[n],r[n]=a[i];return r},t.prototype.glyphsFor=function(r){var n,i,a,s,o,l,u;for(a={},o=0,l=r.length;o<l;o++)a[s=r[o]]=this.font.glyf.glyphFor(s);for(s in n=[],a)(i=a[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in u=this.glyphsFor(n))i=u[s],a[s]=i;return a},t.prototype.encode=function(r,n){var i,a,s,o,l,u,d,f,p,x,v,w,C,N,T;for(a in i=oH.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(r),v={0:0},T=i.charMap)v[(u=T[a]).old]=u.new;for(w in x=i.maxGlyphID,o)w in v||(v[w]=x++);return f=(function(O){var D,M;for(D in M={},O)M[O[D]]=D;return M})(v),p=Object.keys(f).sort(function(O,D){return O-D}),C=(function(){var O,D,M;for(M=[],O=0,D=p.length;O<D;O++)l=p[O],M.push(f[l]);return M})(),s=this.font.glyf.encode(o,C,v),d=this.font.loca.encode(s.offsets,C),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},t})();Br.API.PDFObject=(function(){var t;function r(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},r.convert=function(n){var i,a,s,o;if(Array.isArray(n))return"["+(function(){var l,u,d;for(d=[],l=0,u=n.length;l<u;l++)i=n[l],d.push(r.convert(i));return d})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in s=["<<"],n)o=n[a],s.push("/"+a+" "+r.convert(o));return s.push(">>"),s.join(`
`)}return""+n},r})();function ZCe(t,r,n){const i=new Date(t.invoiceDate).toISOString(),a=t.totalAmount.toFixed(2),s=t.taxAmount.toFixed(2),o=[{tag:1,value:r},{tag:2,value:n},{tag:3,value:i},{tag:4,value:a},{tag:5,value:s}];let l=[];return o.forEach(d=>{const f=new TextEncoder().encode(d.value);l.push(d.tag),l.push(f.length),l.push(...f)}),btoa(String.fromCharCode(...l))}function XCe(){const[t,r]=k.useState(null),[n,i]=k.useState(!1),[a,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState("details"),[f,p]=k.useState(!1),x=pr(),{formatDateOnly:v}=mh(),{data:w,isLoading:C}=Ve({queryKey:["invoices",o],queryFn:async()=>{const ye={};o&&(ye.status=o);const{data:Se}=await xe.get("/invoices",{params:ye});return Se}}),{data:N}=Ve({queryKey:["invoices","stats"],queryFn:async()=>{const{data:ye}=await xe.get("/invoices/stats");return ye}}),{data:T}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:ye}=await xe.get("/customers");return ye}}),{data:O}=Ve({queryKey:["orders","DELIVERED"],queryFn:async()=>{const{data:ye}=await xe.get("/orders",{params:{status:"DELIVERED"}});return ye}}),[D,M]=k.useState({amount:"",paymentMethod:"BANK_TRANSFER",referenceNumber:"",notes:""}),Y=ot({mutationFn:async ye=>xe.put(`/invoices/${ye}/submit-for-approval`),onSuccess:()=>{x.invalidateQueries({queryKey:["invoices"]})}}),q=ot({mutationFn:async ye=>xe.put(`/invoices/${ye}/approve-post`),onSuccess:()=>{x.invalidateQueries({queryKey:["invoices"]})}});ot({mutationFn:async ye=>xe.put(`/invoices/${ye}/close`),onSuccess:()=>{x.invalidateQueries({queryKey:["invoices"]})}});const W=ot({mutationFn:async({id:ye,...Se})=>xe.post(`/invoices/${ye}/payments`,Se),onSuccess:()=>{x.invalidateQueries({queryKey:["invoices"]}),s(null),M({amount:"",paymentMethod:"BANK_TRANSFER",referenceNumber:"",notes:""})}});ot({mutationFn:async({id:ye,reason:Se})=>xe.put(`/invoices/${ye}/void`,{reason:Se}),onSuccess:()=>{x.invalidateQueries({queryKey:["invoices"]})}});const J=ot({mutationFn:async ye=>xe.post("/invoices/generate-from-orders",ye),onSuccess:()=>{x.invalidateQueries({queryKey:["invoices"]}),i(!1)}}),[z,G]=k.useState({customerId:"",selectedOrders:[],taxRate:15}),ne=ye=>({DRAFT:"default",PENDING_APPROVAL:"warning",ISSUED_POSTED:"info",PAID:"success",PARTIALLY_PAID:"warning",CLOSED_ARCHIVED:"success",CANCELLED_VOIDED:"danger",OVERDUE:"danger",DISPUTED:"danger"})[ye]||"default",Z=()=>{!a||!D.amount||W.mutate({id:a.id,amount:parseFloat(D.amount),paymentMethod:D.paymentMethod,referenceNumber:D.referenceNumber||void 0,notes:D.notes||void 0})},ie=()=>{!z.customerId||z.selectedOrders.length===0||J.mutate({customerId:z.customerId,orderIds:z.selectedOrders,taxRate:z.taxRate})},me=k.useCallback(async ye=>{p(!0);try{const Se=new Br({orientation:"portrait",unit:"mm",format:"a4"}),$=210,X=297,se=20,H=$-se*2,oe="RadioPharma Manufacturing Co.",ge="300000000000003",be=ZCe(ye,oe,ge);let Le="";try{Le=await yW.toDataURL(be,{width:100,margin:1,errorCorrectionLevel:"M"})}catch(vt){console.error("QR generation error:",vt)}Se.setFillColor(30,58,95),Se.rect(0,0,$,45,"F"),Se.setTextColor(255,255,255),Se.setFontSize(24),Se.setFont("helvetica","bold"),Se.text("INVOICE",se,25),Se.setFontSize(10),Se.setFont("helvetica","normal"),Se.text(ye.invoiceNumber,se,35),Se.setFontSize(12),Se.setFont("helvetica","bold"),Se.text(oe,$-se,20,{align:"right"}),Se.setFontSize(9),Se.setFont("helvetica","normal"),Se.text("Riyadh, Saudi Arabia",$-se,27,{align:"right"}),Se.text(`VAT: ${ge}`,$-se,34,{align:"right"});let ke=60;Se.setTextColor(100,100,100),Se.setFontSize(9),Se.text("BILL TO",se,ke),Se.setTextColor(0,0,0),Se.setFontSize(12),Se.setFont("helvetica","bold"),Se.text(ye.customer?.name||"Customer",se,ke+7),Se.setFont("helvetica","normal"),Se.setFontSize(10),ye.customer?.address&&Se.text(ye.customer.address,se,ke+14);const He=v(ye.invoiceDate),Je=v(ye.dueDate);Se.setTextColor(100,100,100),Se.setFontSize(9),Se.text("INVOICE DATE",$-se-50,ke,{align:"left"}),Se.text("DUE DATE",$-se-50,ke+15,{align:"left"}),Se.setTextColor(0,0,0),Se.setFontSize(10),Se.text(He,$-se-50,ke+6),Se.text(Je,$-se-50,ke+21),ke=105,Se.setFillColor(245,247,250),Se.rect(se,ke,H,10,"F"),Se.setTextColor(100,100,100),Se.setFontSize(8),Se.setFont("helvetica","bold"),Se.text("DESCRIPTION",se+3,ke+7),Se.text("QTY",se+95,ke+7),Se.text("UNIT PRICE",se+115,ke+7),Se.text("TOTAL",se+H-3,ke+7,{align:"right"}),ke+=15,Se.setFont("helvetica","normal"),Se.setTextColor(0,0,0),Se.setFontSize(10),ye.items&&ye.items.length>0&&ye.items.forEach(vt=>{Se.text(vt.description||"Item",se+3,ke),Se.text(vt.quantity?.toString()||"1",se+95,ke),Se.text(`${Jc} ${vt.unitPrice?.toFixed(2)||"0.00"}`,se+115,ke),Se.text(`${Jc} ${vt.lineTotal?.toFixed(2)||"0.00"}`,se+H-3,ke,{align:"right"}),Se.setDrawColor(230,230,230),Se.line(se,ke+3,se+H,ke+3),ke+=10}),ke+=10;const Qe=se+100;if(Se.setFontSize(10),Se.setTextColor(100,100,100),Se.text("Subtotal:",Qe,ke),Se.setTextColor(0,0,0),Se.text(`${Jc} ${ye.subtotal?.toFixed(2)||"0.00"}`,se+H-3,ke,{align:"right"}),ke+=8,Se.setTextColor(100,100,100),Se.text(`VAT (${ye.taxRate||15}%):`,Qe,ke),Se.setTextColor(0,0,0),Se.text(`${Jc} ${ye.taxAmount?.toFixed(2)||"0.00"}`,se+H-3,ke,{align:"right"}),ke+=10,Se.setFillColor(30,58,95),Se.rect(Qe-5,ke-5,H-Qe+se+5,12,"F"),Se.setTextColor(255,255,255),Se.setFont("helvetica","bold"),Se.setFontSize(11),Se.text("TOTAL:",Qe,ke+3),Se.text(`${Jc} ${ye.totalAmount?.toFixed(2)||"0.00"}`,se+H-3,ke+3,{align:"right"}),ye.paidAmount>0){ke+=18,Se.setTextColor(34,197,94),Se.setFontSize(10),Se.text(`Paid: ${Jc} ${ye.paidAmount?.toFixed(2)}`,Qe,ke);const vt=ye.totalAmount-ye.paidAmount;vt>0&&(ke+=8,Se.setTextColor(239,68,68),Se.text(`Balance Due: ${Jc} ${vt.toFixed(2)}`,Qe,ke))}Le&&(Se.addImage(Le,"PNG",se,X-se-30-15,30,30),Se.setTextColor(100,100,100),Se.setFontSize(7),Se.text("ZATCA E-Invoice QR Code",se,X-se-12)),Se.setTextColor(100,100,100),Se.setFontSize(8),Se.setFont("helvetica","normal"),Se.text("Thank you for your business!",$/2,X-se-5,{align:"center"}),Se.setDrawColor(200,200,200),Se.line(se,X-se-20,$-se,X-se-20),Se.save(`Invoice_${ye.invoiceNumber}.pdf`)}catch(Se){console.error("PDF generation error:",Se),alert("Failed to generate PDF. Please try again.")}finally{p(!1)}},[]),ce=O?.filter(ye=>ye.customerId===z.customerId)||[],Q=w?.filter(ye=>ye.status==="PAID"||ye.status==="CLOSED_ARCHIVED").length||0,de=w?.filter(ye=>ye.status==="ISSUED_POSTED").length||0;w?.filter(ye=>ye.status==="DRAFT").length;const le=w?.filter(ye=>ye.status==="PENDING_APPROVAL").length||0;return C?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Invoicing"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Generate invoices from delivered orders and track payments"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"140px"},value:o,onChange:ye=>l(ye.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"PENDING_APPROVAL",children:"Pending Approval"}),e.jsx("option",{value:"ISSUED_POSTED",children:"Issued"}),e.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"CLOSED_ARCHIVED",children:"Closed"}),e.jsx("option",{value:"CANCELLED_VOIDED",children:"Voided"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[e.jsx(cn,{size:16})," Generate Invoice"]})]})]}),N&&e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Pending Approval",value:N.pendingApproval||le,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>l("PENDING_APPROVAL"),selected:o==="PENDING_APPROVAL"}),e.jsx(st,{title:"Issued",value:N.issued||de,icon:e.jsx(Gi,{size:20}),color:"info",onClick:()=>l("ISSUED_POSTED"),selected:o==="ISSUED_POSTED"}),e.jsx(st,{title:"Outstanding",value:`${Jc} ${((N.outstanding||0)/1e3).toFixed(1)}k`,icon:e.jsx(DA,{size:20}),color:"primary",onClick:()=>l(""),selected:!o}),e.jsx(st,{title:"Paid",value:N.paid||Q,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>l("PAID"),selected:o==="PAID"}),e.jsx(st,{title:"Overdue",value:N.overdue||0,icon:e.jsx(sn,{size:20}),color:"danger",onClick:()=>l("OVERDUE"),selected:o==="OVERDUE"})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:t?"1fr 440px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Invoice"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"140px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[w?.map(ye=>{const Se=["SENT","PARTIALLY_PAID"].includes(ye.status)&&new Date(ye.dueDate)<new Date,$=ye.totalAmount-ye.paidAmount;return e.jsxs("tr",{style:{cursor:"pointer",backgroundColor:t?.id===ye.id?"var(--bg-secondary)":void 0},onClick:()=>{r(ye),d("details")},children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.125rem"},children:ye.invoiceNumber}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Due: ",v(ye.dueDate)]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ts,{size:16,style:{color:"var(--text-muted)"}})}),e.jsx("span",{style:{fontWeight:500},children:ye.customer?.name})]})}),e.jsx("td",{children:e.jsx("div",{style:{fontSize:"0.875rem"},children:v(ye.invoiceDate)})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",fontFamily:"var(--font-mono, monospace)"},children:li(ye.totalAmount)}),ye.paidAmount>0&&ye.paidAmount<ye.totalAmount&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--success)"},children:["Paid: ",li(ye.paidAmount)]})]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${Se?"danger":ne(ye.status)}`,children:Se?"OVERDUE":ye.status.replace("_"," ")})}),e.jsx("td",{onClick:X=>X.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>me(ye),disabled:f,title:"Download PDF",children:e.jsx(Xp,{size:14})}),ye.status==="DRAFT"&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>Y.mutate(ye.id),disabled:Y.isPending,title:"Submit for Approval",children:e.jsx(Gi,{size:14})}),ye.status==="PENDING_APPROVAL"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>q.mutate(ye.id),disabled:q.isPending,title:"Approve & Post",children:e.jsx(Ut,{size:14})}),["ISSUED_POSTED","PARTIALLY_PAID"].includes(ye.status)&&e.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--success)",border:"none"},onClick:()=>{M({...D,amount:$.toFixed(2)}),s(ye)},title:"Record Payment",children:e.jsx(Ul,{size:14})})]})})]},ye.id)}),(!w||w.length===0)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:6,style:{textAlign:"center",color:"var(--text-muted)",padding:"3rem"},children:[e.jsx(rd,{size:40,style:{opacity:.2,marginBottom:"0.75rem"}}),e.jsx("div",{children:"No invoices found"})]})})]})]})}),t&&e.jsxs("div",{className:"card",style:{padding:0},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:e.jsx("span",{className:`badge badge-${ne(t.status)}`,children:t.status.replace("_"," ")})}),e.jsxs("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:["Invoice ",t.invoiceNumber]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:t.customer?.name})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>me(t),disabled:f,title:"Download PDF",children:e.jsx(wm,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>r(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})]})}),e.jsx("div",{style:{borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",padding:"0 1rem"},children:[e.jsx("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:u==="details"?"2px solid var(--primary)":"2px solid transparent",color:u==="details"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>d("details"),children:"Invoice Details"}),e.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:u==="payments"?"2px solid var(--primary)":"2px solid transparent",color:u==="payments"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>d("payments"),children:["Payments (",t.payments?.length||0,")"]}),e.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:u==="attachments"?"2px solid var(--primary)":"2px solid transparent",color:u==="attachments"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.375rem"},onClick:()=>d("attachments"),children:[e.jsx(ah,{size:14})," Documents"]})]})}),e.jsxs("div",{style:{padding:"1.25rem"},children:[u==="details"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx($n,{size:18,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Invoice Date"}),e.jsx("div",{style:{fontWeight:500},children:v(t.invoiceDate)})]})]}),e.jsxs("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Qt,{size:18,style:{color:new Date(t.dueDate)<new Date?"var(--danger)":"var(--warning)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Due Date"}),e.jsx("div",{style:{fontWeight:500,color:new Date(t.dueDate)<new Date?"var(--danger)":void 0},children:v(t.dueDate)})]})]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, var(--primary) 0%, #1e40af 100%)",color:"white",padding:"1.25rem",borderRadius:"var(--radius)",marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.8,marginBottom:"0.25rem"},children:"Total Amount"}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700},children:li(t.totalAmount)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.8,marginBottom:"0.25rem"},children:"Paid"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600},children:li(t.paidAmount)})]})]}),t.totalAmount-t.paidAmount>0&&e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(255,255,255,0.2)",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"0.875rem",opacity:.8},children:"Balance Due"}),e.jsx("span",{style:{fontWeight:600},children:li(t.totalAmount-t.paidAmount)})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.75rem"},children:"Line Items"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.items?.map(ye=>e.jsxs("div",{style:{padding:"0.875rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.125rem"},children:ye.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[ye.quantity," x ",li(ye.unitPrice)]})]}),e.jsx("div",{style:{fontWeight:600,color:"var(--primary)"},children:li(ye.lineTotal)})]},ye.id))})]}),e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Subtotal"}),e.jsx("span",{children:li(t.subtotal)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{color:"var(--text-muted)"},children:["VAT (",t.taxRate||15,"%)"]}),e.jsx("span",{children:li(t.taxAmount)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:"1px solid var(--border)",fontWeight:600},children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:li(t.totalAmount)})]})]})]}),u==="payments"&&e.jsxs(e.Fragment,{children:[t.payments?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.payments.map(ye=>e.jsxs("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ut,{size:20,style:{color:"var(--success)"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--success)",marginBottom:"0.125rem"},children:li(ye.amount)}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[v(ye.paymentDate)," via ",ye.paymentMethod.replace("_"," ")]})]}),ye.referenceNumber&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontFamily:"monospace"},children:["#",ye.referenceNumber]})]},ye.id))}):e.jsxs("div",{style:{textAlign:"center",padding:"2.5rem 1rem",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(Ul,{size:32,style:{opacity:.3,marginBottom:"0.75rem"}}),e.jsx("div",{style:{marginBottom:"0.25rem"},children:"No payments recorded"}),e.jsx("div",{style:{fontSize:"0.75rem"},children:"Payments will appear here once recorded"})]}),["SENT","PARTIALLY_PAID"].includes(t.status)&&e.jsxs("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"1rem"},onClick:()=>{const ye=t.totalAmount-t.paidAmount;M({...D,amount:ye.toFixed(2)}),s(t)},children:[e.jsx(Ul,{size:18})," Record Payment"]})]}),u==="attachments"&&e.jsx(mc,{entityType:"INVOICE",entityId:t.id,title:"Invoice Documents"})]})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"560px"},onClick:ye=>ye.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Generate Invoice"}),e.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Select delivered orders to include in the invoice"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{className:"form-select",value:z.customerId,onChange:ye=>G({...z,customerId:ye.target.value,selectedOrders:[]}),children:[e.jsx("option",{value:"",children:"Select a customer"}),T?.map(ye=>e.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]}),z.customerId&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Select Delivered Orders *"}),e.jsx("div",{style:{maxHeight:"200px",overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:ce.length>0?ce.map(ye=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",cursor:"pointer",borderBottom:"1px solid var(--border)",backgroundColor:z.selectedOrders.includes(ye.id)?"rgba(59, 130, 246, 0.1)":void 0},children:[e.jsx("input",{type:"checkbox",checked:z.selectedOrders.includes(ye.id),onChange:Se=>{Se.target.checked?G({...z,selectedOrders:[...z.selectedOrders,ye.id]}):G({...z,selectedOrders:z.selectedOrders.filter($=>$!==ye.id)})},style:{width:"16px",height:"16px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:ye.orderNumber}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[ye.product?.name," - ",ye.requestedActivity," ",ye.activityUnit]})]})]},ye.id)):e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No delivered orders for this customer"})}),z.selectedOrders.length>0&&e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--primary)"},children:[z.selectedOrders.length," order(s) selected"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VAT Rate (%)"}),e.jsx("input",{type:"number",className:"form-input",value:z.taxRate,onChange:ye=>G({...z,taxRate:parseFloat(ye.target.value)||0}),min:"0",max:"100",step:"0.5"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Saudi Arabia standard VAT is 15%"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:ie,disabled:J.isPending||z.selectedOrders.length===0,children:J.isPending?"Generating...":"Generate Invoice"})]})]})}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:"440px"},onClick:ye=>ye.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Record Payment"}),e.jsx("button",{onClick:()=>s(null),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Invoice"}),e.jsx("span",{style:{fontWeight:500},children:a.invoiceNumber})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Outstanding"}),e.jsx("span",{style:{fontWeight:600,color:"var(--danger)"},children:li(a.totalAmount-a.paidAmount)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Amount *"}),e.jsx("input",{type:"number",className:"form-input",value:D.amount,onChange:ye=>M({...D,amount:ye.target.value}),step:"0.01",placeholder:"Enter payment amount"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Payment Method"}),e.jsxs("select",{className:"form-select",value:D.paymentMethod,onChange:ye=>M({...D,paymentMethod:ye.target.value}),children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CHECK",children:"Check"}),e.jsx("option",{value:"CREDIT_CARD",children:"Credit Card"}),e.jsx("option",{value:"CASH",children:"Cash"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reference Number"}),e.jsx("input",{type:"text",className:"form-input",value:D.referenceNumber,onChange:ye=>M({...D,referenceNumber:ye.target.value}),placeholder:"e.g., Check #, Transaction ID"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-input",value:D.notes,onChange:ye=>M({...D,notes:ye.target.value}),rows:2,placeholder:"Optional notes"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(null),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:Z,disabled:W.isPending||!D.amount,children:W.isPending?"Recording...":"Record Payment"})]})]})})]})}const rM=[{key:"SUBMITTED",label:"Submitted",icon:Pr},{key:"VALIDATED",label:"Validated",icon:Ut},{key:"SCHEDULED",label:"Scheduled",icon:$n},{key:"IN_PRODUCTION",label:"Production",icon:sa},{key:"QC_PENDING",label:"QC",icon:gu},{key:"RELEASED",label:"Released",icon:ia},{key:"DISPATCHED",label:"Dispatched",icon:dn},{key:"DELIVERED",label:"Delivered",icon:Rr}],nM={DRAFT:{color:"#94a3b8",badge:"default",description:"Order created, awaiting submission"},SUBMITTED:{color:"#3b82f6",badge:"info",description:"Order submitted for validation"},VALIDATED:{color:"#06b6d4",badge:"info",description:"Order validated and approved"},SCHEDULED:{color:"#8b5cf6",badge:"info",description:"Scheduled for production"},IN_PRODUCTION:{color:"#f59e0b",badge:"warning",description:"Radiopharmaceutical being manufactured"},QC_PENDING:{color:"#f59e0b",badge:"warning",description:"Quality control in progress"},RELEASED:{color:"#22c55e",badge:"success",description:"Released by Qualified Person"},DISPATCHED:{color:"#3b82f6",badge:"info",description:"Shipped to customer"},DELIVERED:{color:"#22c55e",badge:"success",description:"Delivered successfully"},CANCELLED:{color:"#ef4444",badge:"danger",description:"Order cancelled"},REJECTED:{color:"#ef4444",badge:"danger",description:"Order rejected during validation"},FAILED_QC:{color:"#ef4444",badge:"danger",description:"Quality control failed"},REWORK:{color:"#f59e0b",badge:"warning",description:"Order being reworked"}},JCe={DRAFT:{action:"Submit Order",role:"Sales / Customer",description:"Review order details and submit for processing",link:"/orders"},SUBMITTED:{action:"Validate Order",role:"Sales Team",description:"Verify customer license, product permissions, and feasibility",link:"/orders"},VALIDATED:{action:"Schedule Production",role:"Production Planner",description:"Assign to production batch and schedule manufacturing",link:"/planner"},SCHEDULED:{action:"Start Production",role:"Production Team",description:"Begin radiopharmaceutical synthesis",link:"/batches"},IN_PRODUCTION:{action:"Complete Production",role:"Production Team",description:"Finish manufacturing and send to QC",link:"/batches"},QC_PENDING:{action:"Complete QC Testing",role:"QC Analyst",description:"Perform quality control tests on batch",link:"/qc"},RELEASED:{action:"Dispatch Shipment",role:"Logistics",description:"Create shipment and dispatch to customer",link:"/shipments"},DISPATCHED:{action:"Confirm Delivery",role:"Logistics / Customer",description:"Confirm order was received by customer",link:"/shipments"},DELIVERED:{action:"Complete",role:"-",description:"Order successfully completed"}};function If(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}function eNe(){const{id:t}=hl(),r=Qr(),n=gn(),i=pr(),{user:a}=Il(),[s,o]=k.useState(!1),{data:l,isLoading:u}=Ve({queryKey:["order",t],queryFn:async()=>{const{data:T}=await xe.get(`/orders/${t}`);return T},enabled:!!t}),{data:d}=Ve({queryKey:["order-events",t],queryFn:async()=>{const{data:T}=await xe.get(`/orders/${t}/events`);return T},enabled:!!t});if(ot({mutationFn:async({status:T,comment:O})=>xe.post(`/orders/${t}/transition`,{status:T,comment:O}),onSuccess:(T,O)=>{i.invalidateQueries({queryKey:["order",t]}),i.invalidateQueries({queryKey:["order-events",t]}),n.success("Status Updated",`Order moved to ${O.status.replace("_"," ")}`)},onError:T=>{const O=an(T);n.error("Update Failed",O?.userMessage||"Failed to update order status")}}),u)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!l)return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>r("/orders"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[e.jsx(aa,{size:18})," Back to Orders"]}),e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h3",{children:"Order Not Found"})]})]});const f=rM.findIndex(T=>T.key===l.status),p=["CANCELLED","REJECTED","FAILED_QC","DELIVERED"].includes(l.status),x=JCe[l.status],v=nM[l.status]||nM.DRAFT,w=(T,O)=>p&&l.status!=="DELIVERED"?"skipped":l.status===T?"current":f>=0&&O<f?"completed":(l.status==="DRAFT"&&O===0||f>=0&&O>f,"pending"),C=T=>T.toStatus==="DELIVERED"?e.jsx(Rr,{size:16}):T.toStatus==="DISPATCHED"?e.jsx(dn,{size:16}):T.toStatus==="RELEASED"?e.jsx(ia,{size:16}):T.toStatus?.includes("QC")?e.jsx(gu,{size:16}):T.toStatus==="IN_PRODUCTION"?e.jsx(sa,{size:16}):T.toStatus==="SCHEDULED"?e.jsx($n,{size:16}):e.jsx(Qt,{size:16}),N=s?d:d?.slice(0,5);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("button",{onClick:()=>r("/orders"),className:"btn btn-secondary",children:[e.jsx(aa,{size:18})," Back to Orders"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs(nr,{to:`/orders/${t}`,className:"btn btn-secondary",children:[e.jsx(Pr,{size:18})," Edit Order"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),children:[e.jsx(wm,{size:18})," Print"]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:l.orderNumber}),e.jsx("span",{className:`badge badge-${v.badge}`,style:{fontSize:"0.875rem"},children:l.status.replace("_"," ")})]}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:v.description})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Delivery"}),e.jsx("div",{style:{fontWeight:600},children:If(l.deliveryDate,"MMM dd, yyyy")}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[If(l.deliveryTimeStart,"HH:mm")," - ",If(l.deliveryTimeEnd,"HH:mm")]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem 1.5rem",backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Ts,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Customer"}),e.jsx("div",{style:{fontWeight:500},children:l.customer?.name})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Rr,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),e.jsx("div",{style:{fontWeight:500},children:l.product?.name})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Mc,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Activity"}),e.jsxs("div",{style:{fontWeight:500},children:[l.requestedActivity," ",l.activityUnit]})]})]}),l.numberOfDoses&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(sa,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Doses"}),e.jsx("div",{style:{fontWeight:500},children:l.numberOfDoses})]})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1.5rem"},children:"Order Journey"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"1rem"},children:[e.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",right:"40px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),rM.map((T,O)=>{const D=w(T.key,O),M=T.icon,Y=d?.find(q=>q.toStatus===T.key);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,flex:1},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:D==="completed"?"var(--success)":D==="current"?"var(--primary)":"var(--bg-tertiary)",color:D==="completed"||D==="current"?"white":"var(--text-muted)",border:D==="current"?"3px solid rgba(37, 99, 235, 0.3)":"none",transition:"all 0.2s"},children:D==="completed"?e.jsx(Ut,{size:20}):e.jsx(M,{size:20})}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",fontWeight:D==="current"?600:400,color:D==="pending"?"var(--text-muted)":"var(--text-primary)",textAlign:"center"},children:T.label}),Y&&e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:If(Y.createdAt,"MMM dd HH:mm")})]},T.key)})]})]}),x&&!p&&e.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem",borderLeft:"4px solid var(--primary)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"WHAT HAPPENS NEXT"}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"0.25rem"},children:x.action}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:x.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:[e.jsx(Uo,{size:12,style:{display:"inline",marginRight:"0.25rem"}}),"Responsible: ",e.jsx("strong",{children:x.role})]})]}),x.link&&l.status!=="DELIVERED"&&e.jsxs(nr,{to:x.link,className:"btn btn-primary",children:["Go to ",x.action.split(" ")[0]," ",e.jsx(oc,{size:16})]})]})}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Timeline"}),d?.length>5&&e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o(!s),children:[s?e.jsx(nh,{size:14}):e.jsx(bo,{size:14}),s?"Show Less":`Show All (${d.length})`]})]}),e.jsx("div",{style:{padding:"1rem 1.5rem"},children:N?.length>0?e.jsxs("div",{style:{position:"relative",paddingLeft:"2rem"},children:[e.jsx("div",{style:{position:"absolute",left:"11px",top:"8px",bottom:"8px",width:"2px",backgroundColor:"var(--border)"}}),N.map((T,O)=>e.jsxs("div",{style:{position:"relative",paddingBottom:O<N.length-1?"1.25rem":0},children:[e.jsx("div",{style:{position:"absolute",left:"-2rem",top:"4px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:O===0?"var(--primary)":"var(--bg-tertiary)",color:O===0?"white":"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid var(--bg-primary)"},children:C(T)}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[e.jsxs("span",{style:{fontWeight:500},children:[T.fromStatus?`${T.fromStatus.replace("_"," ")}  `:"",T.toStatus.replace("_"," ")]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:If(T.createdAt,"MMM dd, yyyy HH:mm")})]}),T.changedByUser&&e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:["by ",T.changedByUser.firstName," ",T.changedByUser.lastName,T.role&&e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" (",T.role,")"]})]}),T.changeNotes&&e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",marginTop:"0.25rem",fontStyle:"italic"},children:['"',T.changeNotes,'"']})]})]},T.id))]}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"No timeline events yet"})})]}),l.batch&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Production & QC"})}),e.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Batch Number"}),e.jsx("div",{style:{fontWeight:500},children:l.batch.batchNumber})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Batch Status"}),e.jsx("span",{className:`badge badge-${l.batch.status==="RELEASED"?"success":"info"}`,children:l.batch.status.replace("_"," ")})]}),l.batch.qcResults?.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"QC Tests"}),e.jsxs("div",{style:{fontWeight:500},children:[l.batch.qcResults.filter(T=>T.status==="PASSED").length," / ",l.batch.qcResults.length," Passed"]})]})]}),e.jsx("div",{style:{marginTop:"1rem"},children:e.jsxs(nr,{to:"/batches",className:"btn btn-secondary btn-sm",children:["View Batch Details ",e.jsx(oc,{size:14})]})})]})]}),l.shipment&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Shipment"})}),e.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Shipment Number"}),e.jsx("div",{style:{fontWeight:500},children:l.shipment.shipmentNumber})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Status"}),e.jsx("span",{className:`badge badge-${l.shipment.status==="DELIVERED"?"success":"info"}`,children:l.shipment.status})]}),l.shipment.dispatchedAt&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Dispatched At"}),e.jsx("div",{style:{fontWeight:500},children:If(l.shipment.dispatchedAt,"MMM dd HH:mm")})]})]}),e.jsx("div",{style:{marginTop:"1rem"},children:e.jsxs(nr,{to:"/shipments",className:"btn btn-secondary btn-sm",children:["View Shipment Details ",e.jsx(oc,{size:14})]})})]})]}),t&&e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx(mc,{entityType:"ORDER",entityId:t,title:"Order Attachments"})}),a?.role==="Admin"&&e.jsx("div",{className:"card",style:{marginBottom:"1.5rem",backgroundColor:"var(--bg-tertiary)"},children:e.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem"},children:"ADMIN INFO"}),e.jsxs("div",{style:{fontSize:"0.8125rem"},children:[e.jsx("strong",{children:"Order ID:"})," ",l.id]}),e.jsxs("div",{style:{fontSize:"0.8125rem",marginTop:"0.25rem"},children:[e.jsx("strong",{children:"Created:"})," ",If(l.createdAt,"MMM dd, yyyy HH:mm:ss")]}),e.jsx("div",{style:{marginTop:"0.5rem"},children:e.jsx(nr,{to:"/audit",className:"btn btn-secondary btn-sm",children:"View Audit Log"})})]})})]})}const iM=[{key:"PLANNED",label:"Planned",icon:$n,includes:["PLANNED","SCHEDULED"]},{key:"IN_PRODUCTION",label:"Production",icon:sa,includes:["IN_PRODUCTION","PRODUCTION_COMPLETE"]},{key:"QC_PENDING",label:"QC",icon:dc,includes:["QC_PENDING","QC_IN_PROGRESS","QC_PASSED"]},{key:"QP_REVIEW",label:"QP Review",icon:ia,includes:["QP_REVIEW"]},{key:"RELEASED",label:"Released",icon:Ut,includes:["RELEASED"]},{key:"DISPENSING_IN_PROGRESS",label:"Dispensing",icon:_g,includes:["DISPENSING_IN_PROGRESS","DISPENSED"]},{key:"PACKED",label:"Packed",icon:rh,includes:["PACKED"]},{key:"DISPATCHED",label:"Dispatched",icon:dn,includes:["DISPATCHED","CLOSED"]}],tNe=["PLANNED","SCHEDULED","IN_PRODUCTION","PRODUCTION_COMPLETE","QC_PENDING","QC_IN_PROGRESS","QC_PASSED","QP_REVIEW","RELEASED","DISPENSING_IN_PROGRESS","DISPENSED","PACKED","DISPATCHED","CLOSED"],aM={PLANNED:{color:"#94a3b8",badge:"default",description:"Batch is planned and awaiting production start"},SCHEDULED:{color:"#64748b",badge:"secondary",description:"Batch is scheduled for production"},IN_PRODUCTION:{color:"#3b82f6",badge:"info",description:"Radiopharmaceutical synthesis in progress"},PRODUCTION_COMPLETE:{color:"#3b82f6",badge:"info",description:"Production completed, ready for QC"},QC_PENDING:{color:"#f59e0b",badge:"warning",description:"Awaiting quality control testing"},QC_IN_PROGRESS:{color:"#f59e0b",badge:"warning",description:"Quality control tests in progress"},QC_PASSED:{color:"#eab308",badge:"qc-passed",description:"All QC tests passed"},QP_REVIEW:{color:"#f97316",badge:"qp-passed",description:"Awaiting Qualified Person review"},RELEASED:{color:"#22c55e",badge:"released",description:"Released by QP for dispensing"},DISPENSING_IN_PROGRESS:{color:"#14b8a6",badge:"teal",description:"Dose units being dispensed"},DISPENSED:{color:"#14b8a6",badge:"teal",description:"All doses dispensed"},PACKED:{color:"#3b82f6",badge:"info",description:"Packaged and ready for dispatch"},DISPATCHED:{color:"#3b82f6",badge:"info",description:"Shipped to customer"},CLOSED:{color:"#dc2626",badge:"closed",description:"Batch completed"},ON_HOLD:{color:"#f59e0b",badge:"warning",description:"Batch on hold - requires investigation"},REJECTED:{color:"#ef4444",badge:"danger",description:"Batch rejected by QP"},FAILED_QC:{color:"#ef4444",badge:"danger",description:"Quality control failed"},CANCELLED:{color:"#ef4444",badge:"danger",description:"Batch cancelled"},DEVIATION_OPEN:{color:"#f59e0b",badge:"warning",description:"Deviation investigation in progress"}},rNe={PLANNED:{action:"Start Production",role:"Production",description:"Begin radiopharmaceutical synthesis",nextStatus:"IN_PRODUCTION"},SCHEDULED:{action:"Start Production",role:"Production",description:"Begin radiopharmaceutical synthesis",nextStatus:"IN_PRODUCTION"},IN_PRODUCTION:{action:"Complete Production",role:"Production",description:"Mark synthesis as complete",nextStatus:"PRODUCTION_COMPLETE"},PRODUCTION_COMPLETE:{action:"Start QC",role:"QC Analyst",description:"Begin quality control testing",nextStatus:"QC_PENDING"},QC_PENDING:{action:"Enter QC Results",role:"QC Analyst",description:"Perform and record QC test results",nextStatus:"QC_IN_PROGRESS"},QC_IN_PROGRESS:{action:"Complete QC",role:"QC Analyst",description:"Finalize QC testing",nextStatus:"QC_PASSED"},QC_PASSED:{action:"Submit for QP Review",role:"QC Analyst",description:"Send batch for QP approval",nextStatus:"QP_REVIEW"},QP_REVIEW:{action:"Release Batch",role:"Qualified Person",description:"Review and release batch with e-signature",nextStatus:"RELEASED"},RELEASED:{action:"Start Dispensing",role:"Dispensing",description:"Begin creating dose units",nextStatus:"DISPENSING_IN_PROGRESS"},DISPENSING_IN_PROGRESS:{action:"Complete Dispensing",role:"Dispensing",description:"Finish dispensing all doses",nextStatus:"DISPENSED"},DISPENSED:{action:"Pack for Shipment",role:"Logistics",description:"Package doses for transport",nextStatus:"PACKED"},PACKED:{action:"Dispatch",role:"Logistics",description:"Ship batch to customer",nextStatus:"DISPATCHED"},DISPATCHED:{action:"Close Batch",role:"Admin",description:"Close batch after delivery confirmation",nextStatus:"CLOSED"},CLOSED:{action:"Complete",role:"-",description:"Batch lifecycle complete"}};function Of(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}function nNe(){const{id:t}=hl(),r=Qr(),n=gn(),i=pr(),{user:a}=Il(),[s,o]=k.useState(!1),[l,u]=k.useState("overview"),{data:d,isLoading:f}=Ve({queryKey:["batch",t],queryFn:async()=>{const{data:W}=await xe.get(`/batches/${t}`);return W},enabled:!!t}),{data:p}=Ve({queryKey:["batch-events",t],queryFn:async()=>{const{data:W}=await xe.get(`/batches/${t}/events`);return W},enabled:!!t}),x=ot({mutationFn:async({status:W,note:J})=>xe.post(`/batches/${t}/transition`,{status:W,note:J}),onSuccess:(W,J)=>{i.invalidateQueries({queryKey:["batch",t]}),i.invalidateQueries({queryKey:["batch-events",t]}),n.success("Status Updated",`Batch moved to ${J.status.replace(/_/g," ")}`)},onError:W=>{const J=an(W);n.error("Update Failed",J?.userMessage||"Failed to update batch status")}});if(f)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!d)return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>r("/batches"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[e.jsx(aa,{size:18})," Back to Batches"]}),e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h3",{children:"Batch Not Found"})]})]});const v=iM.findIndex(W=>W.includes?.includes(d.status)||W.key===d.status);tNe.indexOf(d.status);const w=["ON_HOLD","REJECTED","FAILED_QC","CANCELLED","DEVIATION_OPEN"].includes(d.status),C=["CLOSED","CANCELLED"].includes(d.status),N=rNe[d.status],T=aM[d.status]||aM.PLANNED,O=(W,J)=>w?J<=v?"completed":"skipped":W.includes?.includes(d.status)?"current":d.status==="CLOSED"&&W.key==="DISPATCHED"||v>=0&&J<v?"completed":(v>=0&&J>v,"pending"),D=W=>W.toStatus==="DISPATCHED"?e.jsx(dn,{size:16}):W.toStatus==="RELEASED"?e.jsx(ia,{size:16}):W.toStatus?.includes("QC")||W.toStatus?.includes("QP")?e.jsx(dc,{size:16}):W.toStatus==="IN_PRODUCTION"?e.jsx(sa,{size:16}):W.toStatus?.includes("DISPENS")?e.jsx(_g,{size:16}):W.toStatus==="PACKED"?e.jsx(rh,{size:16}):W.eventType==="MATERIAL_ADDED"?e.jsx(Rr,{size:16}):e.jsx(Qt,{size:16}),M=s?p:p?.slice(0,5),Y=d.doseUnits?.length||0,q=d.doseUnits?.filter(W=>W.status==="DISPENSED").length||0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("button",{onClick:()=>r("/batches"),className:"btn btn-secondary",children:[e.jsx(aa,{size:18})," Back to Batches"]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:e.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),children:[e.jsx(wm,{size:18})," Print"]})})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:d.batchNumber}),e.jsx("span",{className:`badge badge-${T.badge}`,style:{fontSize:"0.875rem"},children:d.status.replace(/_/g," ")}),w&&e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx($r,{size:12})," Exception"]})]}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:T.description})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Planned Start"}),e.jsx("div",{style:{fontWeight:600},children:Of(d.plannedStartTime,"MMM dd, yyyy HH:mm")})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",padding:"1rem 1.5rem",backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Rr,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),e.jsx("div",{style:{fontWeight:500},children:d.product?.name})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Mc,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Target Activity"}),e.jsxs("div",{style:{fontWeight:500},children:[d.targetActivity," ",d.activityUnit]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(JL,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Orders"}),e.jsx("div",{style:{fontWeight:500},children:d.orders?.length||0})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(_g,{size:20,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Doses"}),e.jsxs("div",{style:{fontWeight:500},children:[q," / ",Y]})]})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)"},children:["overview","orders","doses","qc","release","logistics"].map(W=>e.jsx("button",{onClick:()=>u(W),className:"btn",style:{borderRadius:0,borderBottom:l===W?"2px solid var(--primary)":"2px solid transparent",fontWeight:l===W?600:400,padding:"0.75rem 1rem",background:"transparent"},children:W.charAt(0).toUpperCase()+W.slice(1)},W))}),l==="overview"&&e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1.5rem"},children:"Batch Journey"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"2rem"},children:[e.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",right:"40px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),iM.map((W,J)=>{const z=O(W,J),G=W.icon,ne=p?.find(Z=>W.includes?.includes(Z.toStatus)||Z.toStatus===W.key);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,flex:1},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:z==="completed"?"var(--success)":z==="current"?"var(--primary)":z==="skipped"?"var(--danger-light, #fecaca)":"var(--bg-tertiary)",color:z==="completed"||z==="current"?"white":z==="skipped"?"var(--danger)":"var(--text-muted)",border:z==="current"?"3px solid rgba(37, 99, 235, 0.3)":"none",transition:"all 0.2s"},children:z==="completed"?e.jsx(Ut,{size:20}):z==="skipped"?e.jsx(zC,{size:16}):e.jsx(G,{size:20})}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",fontWeight:z==="current"?600:400,color:z==="pending"||z==="skipped"?"var(--text-muted)":"var(--text-primary)",textAlign:"center"},children:W.label}),ne&&e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:Of(ne.createdAt,"MMM dd HH:mm")})]},W.key)})]}),N&&!C&&e.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem",borderLeft:`4px solid ${w?"var(--danger)":"var(--primary)"}`,background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:w?"BATCH BLOCKED":"WHAT HAPPENS NEXT"}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"0.25rem"},children:N.action}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:N.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:[e.jsx(Uo,{size:12,style:{display:"inline",marginRight:"0.25rem"}}),"Responsible: ",e.jsx("strong",{children:N.role})]})]}),N.nextStatus&&!w&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>x.mutate({status:N.nextStatus}),disabled:x.isPending,children:[e.jsx(yo,{size:16})," ",N.action]})]})}),e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Timeline",p?.length>5&&e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o(!s),children:[s?e.jsx(nh,{size:14}):e.jsx(bo,{size:14}),s?"Show Less":`Show All (${p.length})`]})]}),M?.length>0?e.jsxs("div",{style:{position:"relative",paddingLeft:"2rem"},children:[e.jsx("div",{style:{position:"absolute",left:"11px",top:"8px",bottom:"8px",width:"2px",backgroundColor:"var(--border)"}}),M.map((W,J)=>e.jsxs("div",{style:{position:"relative",paddingBottom:J<M.length-1?"1.25rem":0},children:[e.jsx("div",{style:{position:"absolute",left:"-2rem",top:"4px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:J===0?"var(--primary)":"var(--bg-tertiary)",color:J===0?"white":"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid var(--bg-primary)"},children:D(W)}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[e.jsxs("span",{style:{fontWeight:500},children:[W.fromStatus?`${W.fromStatus.replace(/_/g," ")}  `:"",W.toStatus?.replace(/_/g," ")||W.eventType.replace(/_/g," ")]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Of(W.createdAt,"MMM dd, yyyy HH:mm")})]}),W.actor&&e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:["by ",W.actor.firstName," ",W.actor.lastName,W.actorRole&&e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" (",W.actorRole,")"]})]}),W.note&&e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",marginTop:"0.25rem",fontStyle:"italic"},children:['"',W.note,'"']})]})]},W.id))]}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"No timeline events yet"})]}),l==="orders"&&e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Linked Orders"}),d.orders?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order No"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Delivery"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:d.orders.map(W=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:W.orderNumber})}),e.jsx("td",{children:W.customer?.name}),e.jsxs("td",{children:[W.requestedActivity," ",W.activityUnit]}),e.jsx("td",{children:Of(W.deliveryDate,"MMM dd")}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-info",children:W.status})}),e.jsx("td",{children:e.jsx(nr,{to:`/orders/${W.id}/journey`,className:"btn btn-secondary btn-sm",children:"View Journey"})})]},W.id))})]}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No orders linked to this batch"})]}),l==="doses"&&e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Dose Units"}),d.doseUnits?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Dose ID"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Patient Ref"}),e.jsx("th",{children:"Dispensed At"})]})}),e.jsx("tbody",{children:d.doseUnits.map(W=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:W.doseNumber||W.id.slice(0,8)})}),e.jsxs("td",{children:[W.activity," ",W.activityUnit]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${W.status==="DISPENSED"?"success":"default"}`,children:W.status})}),e.jsx("td",{children:W.patientReference||"-"}),e.jsx("td",{children:W.dispensedAt?Of(W.dispensedAt,"MMM dd HH:mm"):"-"})]},W.id))})]}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[e.jsx(_g,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:"No dose units created yet"}),d.status==="RELEASED"&&e.jsx(nr,{to:"/dispensing",className:"btn btn-primary",children:"Create Dose Units"})]})]}),l==="qc"&&e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"QC Results"}),d.qcResults?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Test"}),e.jsx("th",{children:"Result"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Tested By"}),e.jsx("th",{children:"Tested At"})]})}),e.jsx("tbody",{children:d.qcResults.map(W=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:W.template?.testName})}),e.jsx("td",{children:W.numericResult||W.textResult||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${W.passed?"success":W.passed===!1?"danger":"default"}`,children:W.passed?"PASSED":W.passed===!1?"FAILED":"PENDING"})}),e.jsx("td",{children:W.testedBy?`${W.testedBy.firstName} ${W.testedBy.lastName}`:"-"}),e.jsx("td",{children:W.testedAt?Of(W.testedAt,"MMM dd HH:mm"):"-"})]},W.id))})]}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[e.jsx(dc,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:"No QC results yet"}),["QC_PENDING","QC_IN_PROGRESS"].includes(d.status)&&e.jsx(nr,{to:"/qc",className:"btn btn-primary",children:"Enter QC Results"})]})]}),l==="release"&&e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"QP Release"}),d.batchReleases?.length>0?e.jsx("div",{children:d.batchReleases.map(W=>e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem",borderLeft:"4px solid var(--success)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:["Released by ",W.releasedBy?.firstName," ",W.releasedBy?.lastName]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:Of(W.signatureTimestamp,"MMM dd, yyyy HH:mm:ss")}),W.reason&&e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:W.reason})]}),e.jsx("div",{children:e.jsx("span",{className:"badge badge-success",children:W.releaseType})})]})},W.id))}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[e.jsx(ia,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:"Batch not yet released"}),d.status==="QP_REVIEW"&&e.jsx(nr,{to:"/release",className:"btn btn-primary",children:"Go to QP Release"})]})]}),l==="logistics"&&e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Logistics & Shipment"}),d.orders?.some(W=>W.shipmentId)?e.jsx("div",{children:d.orders.filter(W=>W.shipmentId).map(W=>e.jsxs("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{fontWeight:600},children:["Order: ",W.orderNumber]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Shipment ID: ",W.shipmentId]}),e.jsx(nr,{to:"/shipments",className:"btn btn-secondary btn-sm",style:{marginTop:"0.5rem"},children:"View Shipment"})]},W.id))}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[e.jsx(dn,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:"No shipments created yet"}),["DISPENSED","PACKED"].includes(d.status)&&e.jsx(nr,{to:"/shipments",className:"btn btn-primary",children:"Create Shipment"})]})]}),t&&e.jsx(mc,{entityType:"BATCH",entityId:t,title:"Batch Attachments"})]})]})}const pC=[{id:"creation",title:"Order Creation",description:"Customer places order through portal or internal order desk",icon:qo,color:"#3b82f6",status:"DRAFT",substeps:[{title:"Customer Portal",description:"Book capacity and submit order request"},{title:"Order Desk",description:"Create order manually for walk-in customers"},{title:"Capacity Reservation",description:"Reserve delivery window slot"}]},{id:"approval",title:"Order Approval",description:"Multi-level approval workflow for order validation",icon:af,color:"#8b5cf6",status:"PENDING_APPROVAL  APPROVED",substeps:[{title:"Order Desk Review",description:"Validate order details and availability"},{title:"Manager Approval",description:"Approve high-value or special orders"},{title:"Customer Notification",description:"Notify customer of approval status"}]},{id:"planning",title:"Production Planning",description:"Schedule production based on delivery time and product half-life",icon:$n,color:"#06b6d4",status:"SCHEDULED",substeps:[{title:"Backward Scheduling",description:"Calculate production start based on decay"},{title:"Batch Creation",description:"Create batch with recipe/BOM assignment"},{title:"Equipment Allocation",description:"Reserve equipment and resources"},{title:"eBR Generation",description:"Generate electronic batch record"}]},{id:"manufacturing",title:"Manufacturing",description:"Execute production following GMP-compliant batch record",icon:lu,color:"#f59e0b",status:"IN_PRODUCTION",substeps:[{title:"Material Consumption",description:"Consume raw materials from inventory"},{title:"Step Execution",description:"Follow eBR steps with electronic signatures"},{title:"Deviation Recording",description:"Document any process deviations"},{title:"Production Complete",description:"Mark batch ready for QC"}]},{id:"quality",title:"Quality Control",description:"Test product quality and obtain QP release",icon:sa,color:"#10b981",status:"QC_PENDING  QC_PASSED  RELEASED",substeps:[{title:"QC Testing",description:"Run product-specific quality tests"},{title:"Auto-Evaluation",description:"Automatic pass/fail determination"},{title:"OOS Investigation",description:"Investigate out-of-spec results"},{title:"QP Release",description:"Qualified Person batch release"}]},{id:"dispensing",title:"Dose Dispensing",description:"Dispense individual doses with decay-corrected activity",icon:Bf,color:"#ec4899",status:"DISPENSED",substeps:[{title:"Activity Calculation",description:"Calculate decay-corrected activity"},{title:"Dose Dispensing",description:"Dispense patient-specific doses"},{title:"Label Printing",description:"Print dose labels with QR codes"},{title:"Packaging",description:"Package doses for delivery"}]},{id:"logistics",title:"Logistics & Delivery",description:"Ship doses to customer with real-time tracking",icon:dn,color:"#6366f1",status:"SHIPPED  DELIVERED",substeps:[{title:"Shipment Creation",description:"Create shipment with assigned driver"},{title:"Driver Pickup",description:"Driver collects package from facility"},{title:"In Transit",description:"Real-time GPS tracking"},{title:"Delivery Confirmation",description:"Customer signature and POD"}]},{id:"invoicing",title:"Invoicing & Payment",description:"Generate ZATCA-compliant invoice and process payment",icon:rd,color:"#f97316",status:"INVOICED  PAID",substeps:[{title:"Invoice Generation",description:"Apply contract pricing and generate invoice"},{title:"ZATCA QR Code",description:"Generate compliant QR code"},{title:"Payment Submission",description:"Customer submits payment with proof"},{title:"Payment Confirmation",description:"Finance confirms and generates receipt"}]},{id:"complete",title:"Order Complete",description:"Full audit trail and analytics updated",icon:uY,color:"#22c55e",status:"COMPLETED",substeps:[{title:"Audit Trail",description:"Complete history of all actions"},{title:"Reports Update",description:"Analytics and KPIs updated"},{title:"Customer Feedback",description:"Optional satisfaction survey"}]}];function iNe(){const[t,r]=k.useState(["creation"]),n=s=>{r(o=>o.includes(s)?o.filter(l=>l!==s):[...o,s])},i=()=>r(pC.map(s=>s.id)),a=()=>r([]);return e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Order Journey"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:"Complete lifecycle of an order from creation to completion"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-outline btn-sm",onClick:i,children:"Expand All"}),e.jsx("button",{className:"btn btn-outline btn-sm",onClick:a,children:"Collapse All"})]})]}),e.jsxs("div",{className:"card",style:{padding:"2rem"},children:[e.jsx("div",{style:{position:"relative"},children:pC.map((s,o)=>{const l=t.includes(s.id),u=s.icon,d=o===pC.length-1;return e.jsxs("div",{style:{position:"relative"},children:[!d&&e.jsx("div",{style:{position:"absolute",left:"24px",top:"48px",bottom:l?"0":"-24px",width:"2px",backgroundColor:"var(--border)",zIndex:0}}),e.jsxs("div",{onClick:()=>n(s.id),style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",padding:"0.75rem",borderRadius:"0.5rem",transition:"background-color 0.2s",position:"relative",zIndex:1},className:"hover-bg",children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:s.color,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(u,{size:24,color:"white"})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:600},children:[o+1,". ",s.title]}),l?e.jsx(bo,{size:18}):e.jsx(jo,{size:18})]}),e.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.875rem"},children:s.description}),s.status&&e.jsxs("div",{style:{marginTop:"0.5rem",display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",backgroundColor:`${s.color}15`,borderRadius:"0.25rem",fontSize:"0.75rem",fontFamily:"monospace",color:s.color},children:[e.jsx(Qt,{size:12}),s.status]})]})]}),l&&s.substeps&&e.jsx("div",{style:{marginLeft:"72px",marginTop:"0.5rem",marginBottom:"1.5rem",paddingLeft:"1rem",borderLeft:`2px solid ${s.color}40`},children:s.substeps.map((f,p)=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.5rem 0"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:`${s.color}20`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600,color:s.color,flexShrink:0},children:String.fromCharCode(97+p)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:f.title}),f.description&&e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:f.description})]})]},p))}),!d&&!l&&e.jsx("div",{style:{height:"1rem"}})]},s.id)})}),e.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:"var(--background-secondary)",borderRadius:"0.75rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(e2,{size:20}),"Status Flow Summary"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",alignItems:"center",fontSize:"0.8125rem",fontFamily:"monospace"},children:["DRAFT","PENDING_APPROVAL","APPROVED","SCHEDULED","IN_PRODUCTION","QC_PENDING","QC_PASSED","RELEASED","DISPENSED","SHIPPED","DELIVERED","INVOICED","PAID","COMPLETED"].map((s,o,l)=>e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"var(--background)",borderRadius:"0.25rem",border:"1px solid var(--border)"},children:s}),o<l.length-1&&e.jsx("span",{style:{color:"var(--text-muted)"},children:""})]},s))})]}),e.jsxs("div",{style:{marginTop:"1.5rem",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(cc,{size:18,color:"#3b82f6"}),e.jsx("span",{style:{fontWeight:600,color:"#3b82f6"},children:"Key Roles"})]}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Customer, Order Desk, Planner, Production, QC, QP, Logistics, Driver, Finance"})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Pr,{size:18,color:"#10b981"}),e.jsx("span",{style:{fontWeight:600,color:"#10b981"},children:"Documents"})]}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Order Form, eBR, QC Report, Release Certificate, Invoice, Receipt"})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Qt,{size:18,color:"#f59e0b"}),e.jsx("span",{style:{fontWeight:600,color:"#f59e0b"},children:"Time-Critical"})]}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Radioactive decay requires precise scheduling and delivery timing"})]})]})]})]})}function aNe(){const{user:t}=Il(),r=Qr(),{data:n,isLoading:i,isError:a,error:s,refetch:o,isFetching:l}=Ve({queryKey:["portal-orders"],queryFn:async()=>{const{data:w}=await xe.get("/orders",{params:{limit:20}});return w}}),{data:u}=Ve({queryKey:["portal-invoices"],queryFn:async()=>{const{data:w}=await xe.get("/invoices",{params:{limit:5}});return w}});if(a)return e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx($r,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load dashboard"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:s instanceof Error?s.message:"An error occurred while loading your dashboard."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>o(),children:"Try Again"})]});if(i)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(w=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},w))}),e.jsx("div",{className:"card skeleton",style:{height:"120px",marginBottom:"1.5rem"}}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2].map(w=>e.jsx("div",{className:"card skeleton",style:{height:"300px"}},w))})]});const d={totalOrders:n?.length||0,activeOrders:n?.filter(w=>!["DELIVERED","CANCELLED","REJECTED"].includes(w.status)).length||0,deliveredOrders:n?.filter(w=>w.status==="DELIVERED").length||0,pendingInvoices:u?.filter(w=>["SENT","PARTIALLY_PAID"].includes(w.status)).length||0},f=(n||[]).reduce((w,C)=>(w[C.status]=(w[C.status]||0)+1,w),{}),p=[{id:"submitted",label:"Submitted",count:f.SUBMITTED||0,color:"blue",linkTo:"/portal/orders?status=SUBMITTED"},{id:"confirmed",label:"Confirmed",count:f.VALIDATED||0,color:"blue",linkTo:"/portal/orders?status=VALIDATED"},{id:"scheduled",label:"Scheduled",count:f.SCHEDULED||0,color:"blue",linkTo:"/portal/orders?status=SCHEDULED"},{id:"in_production",label:"In Production",count:f.IN_PRODUCTION||0,color:"yellow",linkTo:"/portal/orders?status=IN_PRODUCTION"},{id:"dispatched",label:"Dispatched",count:f.DISPATCHED||0,color:"teal",linkTo:"/portal/orders?status=DISPATCHED"},{id:"delivered",label:"Delivered",count:f.DELIVERED||0,color:"green",linkTo:"/portal/orders?status=DELIVERED"}],x=(n||[]).filter(w=>{const C=new Date(w.deliveryDate),N=new Date;return C.toDateString()===N.toDateString()&&!["DELIVERED","CANCELLED"].includes(w.status)}).map(w=>({id:w.id,identifier:w.orderNumber,title:w.product?.name||"Unknown Product",eta:w.deliveryDate,status:w.status,nextAction:"Track",linkTo:`/portal/orders/${w.id}/journey`})),v=(n||[]).filter(w=>w.status==="DISPATCHED").map(w=>({id:w.id,identifier:w.orderNumber,title:w.product?.name||"Unknown Product",subtitle:"In Transit",eta:w.deliveryDate,status:w.status,nextAction:"Track Shipment",linkTo:`/portal/orders/${w.id}/journey`}));return e.jsxs("div",{children:[e.jsx(a0,{title:`Welcome back, ${t?.firstName}!`,subtitle:"Manage your radiopharmaceutical orders and track deliveries",lastRefreshed:new Date,onRefresh:()=>o(),isRefreshing:l,actions:e.jsxs(nr,{to:"/portal/orders/new",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(cn,{size:18})," Place New Order"]})}),t?.customerName&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",backgroundColor:"rgba(13, 148, 136, 0.1)",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid rgba(13, 148, 136, 0.2)"},children:[e.jsx(Ts,{size:18,style:{color:"#0d9488"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Viewing portal for: "}),e.jsx("span",{style:{fontWeight:600,color:"#0d9488"},children:t.customerName})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Orders",value:d.totalOrders,icon:e.jsx(qo,{size:20}),color:"primary",linkTo:"/portal/orders"}),e.jsx(st,{title:"In Progress",value:d.activeOrders,icon:e.jsx(Qt,{size:20}),color:"warning",linkTo:"/portal/orders?active=true"}),e.jsx(st,{title:"Delivered",value:d.deliveredOrders,icon:e.jsx(Ut,{size:20}),color:"success",linkTo:"/portal/orders?status=DELIVERED"}),e.jsx(st,{title:"Pending Invoices",value:d.pendingInvoices,icon:e.jsx(rd,{size:20}),color:d.pendingInvoices>0?"danger":"info",linkTo:"/portal/invoices"})]}),e.jsx(Hz,{title:"My Orders Journey",stages:p}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(Tc,{title:"Arriving Today",items:x,viewAllLink:"/portal/orders?due=today",maxItems:5,icon:e.jsx(Rr,{size:18,style:{color:"#0d9488"}}),accentColor:"#0d9488",emptyMessage:"No orders arriving today"}),e.jsx(Tc,{title:"In Transit",items:v,viewAllLink:"/portal/orders?status=DISPATCHED",maxItems:5,icon:e.jsx(dn,{size:18,style:{color:"#0891b2"}}),accentColor:"#0891b2",emptyMessage:"No orders in transit"})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Recent Orders"}),e.jsx(nr,{to:"/portal/orders",className:"btn btn-sm btn-secondary",children:"View All"})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order #"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Delivery"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[n?.slice(0,5).map(w=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>r(`/portal/orders/${w.id}/journey`),children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:w.orderNumber}),e.jsx("td",{children:w.product?.name}),e.jsx("td",{style:{fontSize:"0.875rem"},children:Ze(new Date(w.deliveryDate),"MMM d")}),e.jsx("td",{children:e.jsx(Pn,{status:w.status,size:"sm"})})]},w.id)),(!n||n.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No orders yet. Place your first order!"})})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Recent Invoices"}),e.jsx(nr,{to:"/portal/invoices",className:"btn btn-sm btn-secondary",children:"View All"})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Invoice #"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[u?.slice(0,5).map(w=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:w.invoiceNumber}),e.jsx("td",{style:{fontSize:"0.875rem"},children:Ze(new Date(w.invoiceDate),"MMM d, yyyy")}),e.jsx("td",{style:{fontWeight:500},children:li(w.totalAmount)}),e.jsx("td",{children:e.jsx(Pn,{status:w.status,size:"sm"})})]},w.id)),(!u||u.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No invoices yet"})})]})]})]})]})]})}function sNe(){const[t,r]=k.useState(""),{data:n,isLoading:i}=Ve({queryKey:["portal-orders",t],queryFn:async()=>{const o={};t&&(o.status=t);const{data:l}=await xe.get("/orders",{params:o});return l}}),a=o=>({DRAFT:"default",SUBMITTED:"info",VALIDATED:"info",SCHEDULED:"info",IN_PRODUCTION:"warning",QC_PENDING:"warning",RELEASED:"success",DISPATCHED:"info",DELIVERED:"success",CANCELLED:"danger",REJECTED:"danger"})[o]||"default",s=o=>{switch(o){case"DELIVERED":return e.jsx(Ut,{size:16,style:{color:"var(--success)"}});case"DISPATCHED":return e.jsx(dn,{size:16,style:{color:"var(--primary)"}});case"CANCELLED":case"REJECTED":return e.jsx(ci,{size:16,style:{color:"var(--danger)"}});default:return e.jsx(Qt,{size:16,style:{color:"var(--warning)"}})}};return i?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Orders"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"View and track all your radiopharmaceutical orders"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{className:"form-select",style:{width:"auto"},value:t,onChange:o=>r(o.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"SUBMITTED",children:"Submitted"}),e.jsx("option",{value:"VALIDATED",children:"Validated"}),e.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"RELEASED",children:"Released"}),e.jsx("option",{value:"DISPATCHED",children:"Dispatched"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"})]}),e.jsxs(nr,{to:"/portal/orders/new",className:"btn btn-primary",children:[e.jsx(cn,{size:18})," Place Order"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order #"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Delivery Date"}),e.jsx("th",{children:"Delivery Time"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"}),e.jsx("th",{style:{width:"80px"},children:"Track"})]})}),e.jsxs("tbody",{children:[n?.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rr,{size:16,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontFamily:"monospace",fontWeight:500},children:o.orderNumber})]})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:o.product?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:o.product?.radionuclide})]}),e.jsxs("td",{style:{fontWeight:500},children:[o.requestedActivity," ",o.activityUnit]}),e.jsx("td",{children:Ze(new Date(o.deliveryDate),"MMM d, yyyy")}),e.jsxs("td",{children:[Ze(new Date(o.deliveryTimeStart),"HH:mm")," - ",Ze(new Date(o.deliveryTimeEnd),"HH:mm")]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s(o.status),e.jsx("span",{className:`badge badge-${a(o.status)}`,children:o.status.replace("_"," ")})]})}),e.jsx("td",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:Ze(new Date(o.createdAt),"MMM d, yyyy")}),e.jsx("td",{children:e.jsx(nr,{to:`/portal/orders/${o.id}/journey`,className:"btn btn-sm btn-outline",title:"Track Order",children:e.jsx(Ea,{size:14})})})]},o.id)),(!n||n.length===0)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:8,style:{textAlign:"center",padding:"3rem"},children:[e.jsx(Rr,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"No orders found"}),e.jsxs(nr,{to:"/portal/orders/new",className:"btn btn-primary",children:[e.jsx(cn,{size:16})," Place Your First Order"]})]})})]})]})})]})}function oNe(){const t=Qr(),r=pr(),{user:n}=Il(),[i,a]=k.useState(1),[s,o]=k.useState({productId:"",requestedActivity:"",activityUnit:"mCi",deliveryDate:Ze(ul(new Date,2),"yyyy-MM-dd"),deliveryTimeStart:"09:00",deliveryTimeEnd:"10:00",priority:"NORMAL",notes:""}),[l,u]=k.useState(""),[d,f]=k.useState(!1),{data:p}=Ve({queryKey:["portal-profile"],queryFn:async()=>{const{data:T}=await xe.get("/portal/profile");return T}}),{data:x}=Ve({queryKey:["products"],queryFn:async()=>{const{data:T}=await xe.get("/products");return T}}),v=x?.find(T=>T.id===s.productId),w=ot({mutationFn:async T=>xe.post("/orders",T),onSuccess:()=>{r.invalidateQueries({queryKey:["portal-orders"]}),f(!0),setTimeout(()=>{t("/portal/orders")},2e3)},onError:T=>{u(T.response?.data?.error||"Failed to create order")}}),C=()=>{if(!s.productId||!s.requestedActivity){u("Please fill in all required fields");return}const T=new Date(s.deliveryDate);w.mutate({productId:s.productId,requestedActivity:parseFloat(s.requestedActivity),activityUnit:s.activityUnit,deliveryDate:T.toISOString(),deliveryTimeStart:new Date(`${s.deliveryDate}T${s.deliveryTimeStart}`).toISOString(),deliveryTimeEnd:new Date(`${s.deliveryDate}T${s.deliveryTimeEnd}`).toISOString(),priority:s.priority,notes:s.notes||void 0})};if(d)return e.jsx("div",{style:{maxWidth:"600px",margin:"4rem auto",textAlign:"center"},children:e.jsxs("div",{className:"card",style:{padding:"3rem"},children:[e.jsx(Ut,{size:64,style:{color:"var(--success)",marginBottom:"1.5rem"}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.5rem"},children:"Order Submitted!"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Your order has been submitted successfully and is pending approval."}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Redirecting to your orders..."})]})});const N=p?.nameEn||p?.name||n?.customerName||"Your Facility";return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Place New Order"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Order radiopharmaceuticals for your facility"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.25rem",backgroundColor:"rgba(13, 148, 136, 0.1)",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid rgba(13, 148, 136, 0.2)"},children:[e.jsx(Ts,{size:20,style:{color:"#0d9488"}}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Ordering as: "}),e.jsx("span",{style:{fontWeight:600,color:"#0d9488"},children:N})]})]}),e.jsx("div",{style:{display:"flex",marginBottom:"2rem",gap:"0.5rem"},children:[1,2,3].map(T=>e.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",backgroundColor:i>=T?"#0d9488":"var(--border)",transition:"background-color 0.3s"}},T))}),l&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",marginBottom:"1.5rem",color:"var(--danger)"},children:[e.jsx(sn,{size:20}),l]}),e.jsxs("div",{className:"card",style:{padding:"2rem"},children:[i===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx(Rr,{size:24,style:{color:"#0d9488"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem"},children:"Select Product"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{children:"Product *"}),e.jsxs("select",{className:"form-select",value:s.productId,onChange:T=>o({...s,productId:T.target.value}),style:{fontSize:"1rem",padding:"0.875rem"},children:[e.jsx("option",{value:"",children:"Choose a radiopharmaceutical..."}),x?.map(T=>e.jsxs("option",{value:T.id,children:[T.name," (",T.radionuclide,")"]},T.id))]})]}),v&&e.jsx("div",{style:{backgroundColor:"var(--background-secondary)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Type"}),e.jsx("div",{style:{fontWeight:500},children:v.productType})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Half-Life"}),e.jsxs("div",{style:{fontWeight:500},children:[v.halfLifeMinutes," min"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Standard Dose"}),e.jsxs("div",{style:{fontWeight:500},children:[v.standardDose," ",v.doseUnit]})]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Requested Activity *"}),e.jsx("input",{type:"number",className:"form-input",value:s.requestedActivity,onChange:T=>o({...s,requestedActivity:T.target.value}),placeholder:"e.g., 10",step:"0.1",style:{fontSize:"1rem",padding:"0.875rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Unit"}),e.jsxs("select",{className:"form-select",value:s.activityUnit,onChange:T=>o({...s,activityUnit:T.target.value}),style:{fontSize:"1rem",padding:"0.875rem"},children:[e.jsx("option",{value:"mCi",children:"mCi"}),e.jsx("option",{value:"MBq",children:"MBq"}),e.jsx("option",{value:"GBq",children:"GBq"})]})]})]})]}),i===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx($n,{size:24,style:{color:"#0d9488"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem"},children:"Delivery Schedule"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{children:"Delivery Date *"}),e.jsx("input",{type:"date",className:"form-input",value:s.deliveryDate,onChange:T=>o({...s,deliveryDate:T.target.value}),min:Ze(ul(new Date,1),"yyyy-MM-dd"),style:{fontSize:"1rem",padding:"0.875rem"}})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Delivery Window Start *"}),e.jsx("input",{type:"time",className:"form-input",value:s.deliveryTimeStart,onChange:T=>o({...s,deliveryTimeStart:T.target.value}),style:{fontSize:"1rem",padding:"0.875rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Delivery Window End *"}),e.jsx("input",{type:"time",className:"form-input",value:s.deliveryTimeEnd,onChange:T=>o({...s,deliveryTimeEnd:T.target.value}),style:{fontSize:"1rem",padding:"0.875rem"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Priority"}),e.jsxs("select",{className:"form-select",value:s.priority,onChange:T=>o({...s,priority:T.target.value}),style:{fontSize:"1rem",padding:"0.875rem"},children:[e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"URGENT",children:"Urgent"}),e.jsx("option",{value:"STAT",children:"STAT (Emergency)"})]})]})]}),i===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx(Ut,{size:24,style:{color:"#0d9488"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem"},children:"Review & Submit"})]}),e.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"1.5rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{fontWeight:600,marginBottom:"1rem"},children:"Order Summary"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Product"}),e.jsx("div",{style:{fontWeight:500},children:v?.name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Activity"}),e.jsxs("div",{style:{fontWeight:500},children:[s.requestedActivity," ",s.activityUnit]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Delivery Date"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(s.deliveryDate),"MMMM d, yyyy")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Delivery Time"}),e.jsxs("div",{style:{fontWeight:500},children:[s.deliveryTimeStart," - ",s.deliveryTimeEnd]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Priority"}),e.jsx("div",{style:{fontWeight:500},children:s.priority})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Special Instructions (Optional)"}),e.jsx("textarea",{className:"form-input",value:s.notes,onChange:T=>o({...s,notes:T.target.value}),rows:3,placeholder:"Any special delivery instructions or patient-specific requirements...",style:{fontSize:"1rem",padding:"0.875rem"}})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid var(--border)"},children:[i>1?e.jsx("button",{className:"btn btn-outline",onClick:()=>a(i-1),style:{padding:"0.75rem 1.5rem"},children:"Back"}):e.jsx("button",{className:"btn btn-outline",onClick:()=>t("/portal/orders"),style:{padding:"0.75rem 1.5rem"},children:"Cancel"}),i<3?e.jsx("button",{className:"btn btn-primary",onClick:()=>{if(u(""),i===1&&(!s.productId||!s.requestedActivity)){u("Please select a product and enter activity");return}a(i+1)},style:{padding:"0.75rem 1.5rem",backgroundColor:"#0d9488"},children:"Continue"}):e.jsx("button",{className:"btn btn-primary",onClick:C,disabled:w.isPending,style:{padding:"0.75rem 1.5rem",backgroundColor:"#0d9488"},children:w.isPending?"Submitting...":"Submit Order"})]})]})]})}function lNe(){const t=pr(),[r,n]=k.useState(null),[i,a]=k.useState(""),[s,o]=k.useState(!1),[l,u]=k.useState({amount:"",paymentMethod:"BANK_TRANSFER",reference:"",notes:"",proofFile:null}),d=k.useRef(null),{data:f,isLoading:p}=Ve({queryKey:["portal-invoices",i],queryFn:async()=>{const Y={};i&&(Y.status=i);const{data:q}=await xe.get("/portal/invoices",{params:Y});return q}}),{data:x,refetch:v}=Ve({queryKey:["portal-invoice-detail",r?.id],queryFn:async()=>{if(!r?.id)return null;const{data:Y}=await xe.get(`/portal/invoices/${r.id}`);return Y},enabled:!!r?.id}),w=ot({mutationFn:async Y=>{const{data:q}=await xe.post("/portal/payments",Y,{headers:{"Content-Type":"multipart/form-data"}});return q},onSuccess:()=>{$i.success("Payment submitted successfully! Awaiting confirmation."),t.invalidateQueries({queryKey:["portal-invoices"]}),v(),o(!1),u({amount:"",paymentMethod:"BANK_TRANSFER",reference:"",notes:"",proofFile:null})},onError:Y=>{$i.error(Y.response?.data?.error||"Failed to submit payment")}}),C=()=>{if(!r||!l.amount){$i.error("Please enter payment amount");return}if(!l.proofFile){$i.error("Payment proof is required");return}const Y=new FormData;Y.append("invoiceId",r.id),Y.append("amount",l.amount),Y.append("paymentMethod",l.paymentMethod),Y.append("reference",l.reference),Y.append("notes",l.notes),Y.append("proofFile",l.proofFile),w.mutate(Y)},N={total:f?.reduce((Y,q)=>Y+q.totalAmount,0)||0,paid:f?.reduce((Y,q)=>Y+q.paidAmount,0)||0,outstanding:f?.reduce((Y,q)=>Y+(q.totalAmount-q.paidAmount),0)||0,overdue:f?.filter(Y=>Y.status==="OVERDUE"||["SENT","PARTIALLY_PAID"].includes(Y.status)&&new Date(Y.dueDate)<new Date).length||0},T=(Y,q)=>["SENT","PARTIALLY_PAID"].includes(Y)&&new Date(q)<new Date?"danger":{DRAFT:"default",SENT:"warning",PAID:"success",PARTIALLY_PAID:"warning",OVERDUE:"danger",CANCELLED:"danger"}[Y]||"default",O=Y=>{const q={PENDING:{color:"warning",icon:Qt},CONFIRMED:{color:"success",icon:Ut},REJECTED:{color:"danger",icon:ci}},{color:W,icon:J}=q[Y]||{color:"default",icon:Qt};return e.jsxs("span",{className:`badge badge-${W}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(J,{size:12}),Y]})},D=r?r.totalAmount-r.paidAmount:0,M=r&&["SENT","ISSUED_POSTED","PARTIALLY_PAID","OVERDUE"].includes(r.status)&&D>0;return p?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Invoices"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"View and manage your billing history"})]}),e.jsxs("select",{className:"form-select",style:{width:"auto"},value:i,onChange:Y=>a(Y.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"SENT",children:"Pending"}),e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),e.jsx("option",{value:"OVERDUE",children:"Overdue"})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{className:"card",style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rd,{size:20,style:{color:"#0d9488"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600},children:li(N.total)}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Total Billed"})]})]})}),e.jsx("div",{className:"card",style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ut,{size:20,style:{color:"var(--success)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--success)"},children:li(N.paid)}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Paid"})]})]})}),e.jsx("div",{className:"card",style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(234, 179, 8, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ul,{size:20,style:{color:"var(--warning)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--warning)"},children:li(N.outstanding)}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Outstanding"})]})]})}),e.jsx("div",{className:"card",style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(sn,{size:20,style:{color:"var(--danger)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--danger)"},children:N.overdue}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Overdue"})]})]})})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:r?"1fr 420px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Invoice #"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Due Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Paid"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"60px"},children:"View"})]})}),e.jsxs("tbody",{children:[f?.map(Y=>{const q=["SENT","PARTIALLY_PAID"].includes(Y.status)&&new Date(Y.dueDate)<new Date;return e.jsxs("tr",{style:{cursor:"pointer",backgroundColor:r?.id===Y.id?"var(--background-secondary)":void 0},onClick:()=>n(Y),children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:Y.invoiceNumber}),e.jsx("td",{children:Ze(new Date(Y.invoiceDate),"MMM d, yyyy")}),e.jsx("td",{style:{color:q?"var(--danger)":void 0},children:Ze(new Date(Y.dueDate),"MMM d, yyyy")}),e.jsx("td",{style:{fontWeight:500},children:li(Y.totalAmount)}),e.jsx("td",{style:{color:Y.paidAmount>0?"var(--success)":"var(--text-muted)"},children:li(Y.paidAmount)}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${T(Y.status,Y.dueDate)}`,children:q?"OVERDUE":Y.status})}),e.jsx("td",{onClick:W=>W.stopPropagation(),children:e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>n(Y),children:e.jsx(os,{size:14})})})]},Y.id)}),(!f||f.length===0)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:7,style:{textAlign:"center",padding:"3rem"},children:[e.jsx(rd,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"No invoices found"})]})})]})]})}),r&&e.jsxs("div",{className:"card",style:{padding:0,maxHeight:"calc(100vh - 240px)",overflowY:"auto",width:"380px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Invoice Details"}),e.jsx("button",{onClick:()=>n(null),style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:e.jsx(kr,{size:18,style:{color:"var(--text-muted)"}})})]}),e.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rd,{size:20,style:{color:"#0d9488"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:r.invoiceNumber}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:600},children:Ze(new Date(r.invoiceDate),"MMMM d, yyyy")})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Status"}),e.jsx("span",{className:`badge badge-${T(r.status,r.dueDate)}`,children:r.status.replace(/_/g," ")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Due Date"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500},children:Ze(new Date(r.dueDate),"MMM d, yyyy")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Total Amount"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#0d9488"},children:li(r.totalAmount)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Paid"}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--success)"},children:li(r.paidAmount)})]}),D>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Balance Due"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--danger)"},children:li(D)})]})]})]}),e.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("h4",{style:{fontSize:"0.8125rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Line Items"}),(x?.items||r.items)?.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:(x?.items||r.items)?.map(Y=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.875rem"},children:Y.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Qty: ",Y.quantity]})]}),e.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:li(Y.lineTotal)})]},Y.id))}):e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No line items"}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Subtotal"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:li(x?.vatBreakdown?.subtotal||r.subtotal)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:["VAT (",x?.vatBreakdown?.vatRate||15,"%)"]}),e.jsx("span",{style:{fontSize:"0.875rem"},children:li(x?.vatBreakdown?.vatAmount||r.taxAmount)})]}),(x?.vatBreakdown?.discount>0||r.discountAmount>0)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--success)"},children:"Discount"}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--success)"},children:["- ",li(x?.vatBreakdown?.discount||r.discountAmount)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.5rem",borderTop:"1px solid var(--border)",marginTop:"0.25rem"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600},children:"Grand Total"}),e.jsx("span",{style:{fontSize:"1rem",fontWeight:700,color:"#0d9488"},children:li(x?.vatBreakdown?.grandTotal||r.totalAmount)})]})]})]}),e.jsx("div",{style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn",style:{flex:1,background:"var(--bg-secondary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem"},onClick:async()=>{try{const Y=await xe.get(`/invoice-pdf/${r.id}`,{responseType:"blob"}),q=new Blob([Y.data],{type:"application/pdf"}),W=window.URL.createObjectURL(q),J=document.createElement("a");J.href=W,J.download=`Invoice-${r.invoiceNumber}.pdf`,document.body.appendChild(J),J.click(),window.URL.revokeObjectURL(W),document.body.removeChild(J)}catch{$i.error("Failed to download PDF")}},children:[e.jsx(BY,{size:16}),"Download PDF"]}),M&&e.jsxs("button",{className:"btn",style:{flex:1,background:"#0d9488",borderColor:"#0d9488",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem"},onClick:()=>{u(Y=>({...Y,amount:D.toString()})),o(!0)},children:[e.jsx(Ul,{size:16}),"Pay Now"]})]})}),x?.paymentRequests?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{style:{fontWeight:600,marginTop:"1.5rem",marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Payment Requests"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:x.paymentRequests.map(Y=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--background-secondary)",borderRadius:"0.5rem",borderLeft:`3px solid ${Y.status==="CONFIRMED"?"var(--success)":Y.status==="REJECTED"?"var(--danger)":"var(--warning)"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontWeight:500},children:li(Y.amount)}),O(Y.status)]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[Ze(new Date(Y.submittedAt),"MMM d, yyyy HH:mm")," via ",Y.paymentMethod.replace("_"," ")]}),Y.reference&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Ref: ",Y.reference]}),Y.status==="REJECTED"&&Y.rejectReason&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--danger)",marginTop:"0.25rem"},children:["Reason: ",Y.rejectReason]})]},Y.id))})]}),(x?.payments?.length>0||r.payments?.length>0)&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{style:{fontWeight:600,marginTop:"1.5rem",marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Confirmed Payments"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Method"}),e.jsx("th",{children:"Amount"})]})}),e.jsx("tbody",{children:(x?.payments||r.payments).map(Y=>e.jsxs("tr",{children:[e.jsx("td",{children:Ze(new Date(Y.paymentDate),"MMM d, yyyy")}),e.jsx("td",{children:Y.paymentMethod.replace("_"," ")}),e.jsx("td",{style:{fontWeight:500,color:"var(--success)"},children:li(Y.amount)})]},Y.id))})]})]})]})]}),s&&e.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:e.jsxs("div",{className:"modal",onClick:Y=>Y.stopPropagation(),style:{maxWidth:"480px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Submit Payment"}),e.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:e.jsx(kr,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Invoice"}),e.jsx("div",{style:{fontWeight:600},children:r?.invoiceNumber}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Balance Due: ",li(D)]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Payment Amount (SAR) *"}),e.jsx("input",{type:"number",className:"form-input",value:l.amount,onChange:Y=>u(q=>({...q,amount:Y.target.value})),max:D,step:"0.01"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Payment Method *"}),e.jsxs("select",{className:"form-select",value:l.paymentMethod,onChange:Y=>u(q=>({...q,paymentMethod:Y.target.value})),children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CREDIT_CARD",children:"Credit Card"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Transaction Reference"}),e.jsx("input",{type:"text",className:"form-input",value:l.reference,onChange:Y=>u(q=>({...q,reference:Y.target.value})),placeholder:"e.g., Bank transfer reference number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Proof ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"file",ref:d,style:{display:"none"},accept:".png,.jpg,.jpeg,.pdf",onChange:Y=>{const q=Y.target.files?.[0];if(q){if(q.size>10*1024*1024){$i.error("File size must be less than 10MB");return}u(W=>({...W,proofFile:q}))}}}),e.jsx("div",{onClick:()=>d.current?.click(),style:{border:"2px dashed var(--border)",borderRadius:"0.5rem",padding:"1.5rem",textAlign:"center",cursor:"pointer",backgroundColor:l.proofFile?"rgba(13, 148, 136, 0.05)":void 0},children:l.proofFile?e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Pr,{size:20,style:{color:"#0d9488"}}),e.jsx("span",{children:l.proofFile.name}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:Y=>{Y.stopPropagation(),u(q=>({...q,proofFile:null}))},children:e.jsx(kr,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx(om,{size:24,style:{color:"var(--text-muted)",marginBottom:"0.5rem"}}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:["Click to upload payment proof",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"PNG, JPG or PDF up to 10MB"})]})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-textarea",value:l.notes,onChange:Y=>u(q=>({...q,notes:Y.target.value})),placeholder:"Any additional notes for finance team",rows:2})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:C,disabled:w.isPending||!l.amount||!l.proofFile,children:w.isPending?"Submitting...":"Submit Payment"})]})]})})]})}function cNe(){const{id:t}=hl(),{data:r,isLoading:n,error:i}=Ve({queryKey:["portal-order-journey",t],queryFn:async()=>{const{data:w}=await xe.get(`/journey/orders/${t}/journey`);return w},enabled:!!t});if(n)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(i||!r)return e.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"Order Not Found"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"The order you're looking for doesn't exist or you don't have access to it."}),e.jsx(nr,{to:"/portal/orders",className:"btn btn-primary",children:"Back to Orders"})]});const{order:a,events:s,milestones:o}=r,l=s.filter(w=>!["QC_TEST_ENTERED","BATCH_ASSIGNED"].includes(w.type)&&w.actorRole!=="QC Analyst").map(w=>({...w,actor:void 0,actorRole:void 0})),u=o.filter(w=>["SUBMITTED","SCHEDULED","IN_PRODUCTION","RELEASED","DISPATCHED","DELIVERED"].includes(w.key)).map(w=>({...w,label:w.key==="IN_PRODUCTION"?"Processing":w.label})),d=()=>u.map(w=>({key:w.key,label:w.label,completed:w.completed})),f=()=>{const w=d();for(let C=w.length-1;C>=0;C--)if(w[C].completed)return w[C].key;return w[0]?.key||"SUBMITTED"},p=()=>l.map(w=>{let C=w.title;return w.type==="STATUS_CHANGE"&&w.toStatus&&(C={SUBMITTED:"Order submitted",VALIDATED:"Order validated",SCHEDULED:"Production scheduled",IN_PRODUCTION:"Processing started",QC_PENDING:"Quality check in progress",QC_PASSED:"Quality check passed",QP_REVIEW:"Final review in progress",RELEASED:"Order ready for dispatch",DISPATCHED:"Order dispatched",IN_TRANSIT:"In transit",DELIVERED:"Delivered"}[w.toStatus]||w.title),{id:w.id,type:w.type,title:C,description:w.type==="CREATED"?`Order ${a.orderNumber}`:void 0,timestamp:w.timestamp,severity:w.severity}}),v=(()=>{const w=s.filter(T=>T.entityType==="shipment");if(w.length===0)return null;const C=w.find(T=>T.type==="DISPATCHED"),N=w.find(T=>T.type==="DELIVERED");return{dispatched:C,delivered:N}})();return e.jsxs("div",{children:[e.jsxs(nr,{to:"/portal/orders",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",textDecoration:"none",marginBottom:"1rem",fontSize:"0.875rem"},children:[e.jsx(aa,{size:16})," Back to Orders"]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"1.5rem"},children:e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:["Order ",a.orderNumber,e.jsx(Pn,{status:a.status})]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Track the progress of your order"})]})}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",marginBottom:"1.25rem"},children:"Order Progress"}),e.jsx(Uz,{steps:d(),currentStep:f()})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 320px",gap:"1.5rem"},children:[e.jsx("div",{children:e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Timeline"})}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsx(Wz,{events:p(),maxVisible:20})})]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{className:"card",style:{padding:0},children:[e.jsx("div",{style:{padding:"0.875rem 1rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:"Order Details"})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Rr,{size:20,style:{color:"#0d9488"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.productCode||"Product"}),e.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600},children:a.product})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(RA,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Doses"})]}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:600},children:a.numberOfDoses||1})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Mc,{size:12,style:{color:"#0d9488"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Activity"})]}),e.jsxs("span",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#0d9488"},children:[a.requestedActivity," ",a.activityUnit||"mCi"]})]}),a.hospitalOrderReference&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Ts,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Reference"})]}),e.jsx("span",{style:{fontSize:"0.8125rem"},children:a.hospitalOrderReference})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx($n,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Window"})]}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:a.deliveryTimeStart&&a.deliveryTimeEnd?`${Ze(new Date(a.deliveryTimeStart),"HH:mm")} - ${Ze(new Date(a.deliveryTimeEnd),"HH:mm")}`:a.deliveryTime?Ze(new Date(a.deliveryTime),"HH:mm"):"N/A"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx($n,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Date"})]}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:a.deliveryDate?Ze(new Date(a.deliveryDate),"MMM d, yyyy"):"N/A"})]}),a.estimatedDispatchTime&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(dn,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Est. Dispatch"})]}),e.jsx("span",{style:{fontSize:"0.8125rem"},children:Ze(new Date(a.estimatedDispatchTime),"MMM d, HH:mm")})]}),a.estimatedDeliveryTime&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Ea,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Est. Arrival"})]}),e.jsx("span",{style:{fontSize:"0.8125rem"},children:Ze(new Date(a.estimatedDeliveryTime),"MMM d, HH:mm")})]})]}),a.specialNotes&&e.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(Pr,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Special Notes"})]}),e.jsx("p",{style:{fontSize:"0.8125rem",margin:0,color:"var(--text-secondary)"},children:a.specialNotes})]})]})]}),v&&e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(dn,{size:18,style:{color:"var(--primary)"}}),"Shipment Tracking"]})}),e.jsx("div",{style:{padding:"1rem 1.5rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v.dispatched&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Ut,{size:18,style:{color:"var(--success)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Dispatched"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(v.dispatched.timestamp),"MMM d, yyyy HH:mm")})]})]}),v.delivered?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Ut,{size:18,style:{color:"var(--success)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(v.delivered.timestamp),"MMM d, yyyy HH:mm")})]})]}):v.dispatched?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:"rgba(234, 179, 8, 0.1)",borderRadius:"var(--radius)"},children:[e.jsx(Qt,{size:18,style:{color:"var(--warning)"}}),e.jsx("div",{style:{fontWeight:500,color:"var(--warning)"},children:"In Transit"})]}):null]})})]}),e.jsxs("div",{className:"card",style:{padding:0},children:[e.jsx("div",{style:{padding:"0.875rem 1rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Jp,{size:16,style:{color:"#0d9488"}}),"Communication"]})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",margin:"0 0 0.75rem 0"},children:"Have questions about this order? Open a support ticket to communicate with our team."}),e.jsxs(nr,{to:`/portal/helpdesk/new?subject=Order ${a.orderNumber}&orderId=${a.id}`,className:"btn",style:{width:"100%",boxSizing:"border-box",background:"#0d9488",borderColor:"#0d9488",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.625rem 1rem",fontSize:"0.8125rem",fontWeight:600,textDecoration:"none"},children:[e.jsx(Gi,{size:14}),"Contact Support"]})]})]})]})]})]})}var wg={exports:{}};var dNe=wg.exports,sM;function uNe(){return sM||(sM=1,(function(t,r){(function(n,i){i(r)})(dNe,(function(n){var i="1.9.4";function a(y){var E,B,re,fe;for(B=1,re=arguments.length;B<re;B++){fe=arguments[B];for(E in fe)y[E]=fe[E]}return y}var s=Object.create||(function(){function y(){}return function(E){return y.prototype=E,new y}})();function o(y,E){var B=Array.prototype.slice;if(y.bind)return y.bind.apply(y,B.call(arguments,1));var re=B.call(arguments,2);return function(){return y.apply(E,re.length?re.concat(B.call(arguments)):arguments)}}var l=0;function u(y){return"_leaflet_id"in y||(y._leaflet_id=++l),y._leaflet_id}function d(y,E,B){var re,fe,Ee,Fe;return Fe=function(){re=!1,fe&&(Ee.apply(B,fe),fe=!1)},Ee=function(){re?fe=arguments:(y.apply(B,arguments),setTimeout(Fe,E),re=!0)},Ee}function f(y,E,B){var re=E[1],fe=E[0],Ee=re-fe;return y===re&&B?y:((y-fe)%Ee+Ee)%Ee+fe}function p(){return!1}function x(y,E){if(E===!1)return y;var B=Math.pow(10,E===void 0?6:E);return Math.round(y*B)/B}function v(y){return y.trim?y.trim():y.replace(/^\s+|\s+$/g,"")}function w(y){return v(y).split(/\s+/)}function C(y,E){Object.prototype.hasOwnProperty.call(y,"options")||(y.options=y.options?s(y.options):{});for(var B in E)y.options[B]=E[B];return y.options}function N(y,E,B){var re=[];for(var fe in y)re.push(encodeURIComponent(B?fe.toUpperCase():fe)+"="+encodeURIComponent(y[fe]));return(!E||E.indexOf("?")===-1?"?":"&")+re.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function O(y,E){return y.replace(T,function(B,re){var fe=E[re];if(fe===void 0)throw new Error("No value provided for variable "+B);return typeof fe=="function"&&(fe=fe(E)),fe})}var D=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"};function M(y,E){for(var B=0;B<y.length;B++)if(y[B]===E)return B;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(y){return window["webkit"+y]||window["moz"+y]||window["ms"+y]}var W=0;function J(y){var E=+new Date,B=Math.max(0,16-(E-W));return W=E+B,window.setTimeout(y,B)}var z=window.requestAnimationFrame||q("RequestAnimationFrame")||J,G=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(y){window.clearTimeout(y)};function ne(y,E,B){if(B&&z===J)y.call(E);else return z.call(window,o(y,E))}function Z(y){y&&G.call(window,y)}var ie={__proto__:null,extend:a,create:s,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:f,falseFn:p,formatNum:x,trim:v,splitWords:w,setOptions:C,getParamString:N,template:O,isArray:D,indexOf:M,emptyImageUrl:Y,requestFn:z,cancelFn:G,requestAnimFrame:ne,cancelAnimFrame:Z};function me(){}me.extend=function(y){var E=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},B=E.__super__=this.prototype,re=s(B);re.constructor=E,E.prototype=re;for(var fe in this)Object.prototype.hasOwnProperty.call(this,fe)&&fe!=="prototype"&&fe!=="__super__"&&(E[fe]=this[fe]);return y.statics&&a(E,y.statics),y.includes&&(ce(y.includes),a.apply(null,[re].concat(y.includes))),a(re,y),delete re.statics,delete re.includes,re.options&&(re.options=B.options?s(B.options):{},a(re.options,y.options)),re._initHooks=[],re.callInitHooks=function(){if(!this._initHooksCalled){B.callInitHooks&&B.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ee=0,Fe=re._initHooks.length;Ee<Fe;Ee++)re._initHooks[Ee].call(this)}},E},me.include=function(y){var E=this.prototype.options;return a(this.prototype,y),y.options&&(this.prototype.options=E,this.mergeOptions(y.options)),this},me.mergeOptions=function(y){return a(this.prototype.options,y),this},me.addInitHook=function(y){var E=Array.prototype.slice.call(arguments,1),B=typeof y=="function"?y:function(){this[y].apply(this,E)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(B),this};function ce(y){if(!(typeof L>"u"||!L||!L.Mixin)){y=D(y)?y:[y];for(var E=0;E<y.length;E++)y[E]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Q={on:function(y,E,B){if(typeof y=="object")for(var re in y)this._on(re,y[re],E);else{y=w(y);for(var fe=0,Ee=y.length;fe<Ee;fe++)this._on(y[fe],E,B)}return this},off:function(y,E,B){if(!arguments.length)delete this._events;else if(typeof y=="object")for(var re in y)this._off(re,y[re],E);else{y=w(y);for(var fe=arguments.length===1,Ee=0,Fe=y.length;Ee<Fe;Ee++)fe?this._off(y[Ee]):this._off(y[Ee],E,B)}return this},_on:function(y,E,B,re){if(typeof E!="function"){console.warn("wrong listener type: "+typeof E);return}if(this._listens(y,E,B)===!1){B===this&&(B=void 0);var fe={fn:E,ctx:B};re&&(fe.once=!0),this._events=this._events||{},this._events[y]=this._events[y]||[],this._events[y].push(fe)}},_off:function(y,E,B){var re,fe,Ee;if(this._events&&(re=this._events[y],!!re)){if(arguments.length===1){if(this._firingCount)for(fe=0,Ee=re.length;fe<Ee;fe++)re[fe].fn=p;delete this._events[y];return}if(typeof E!="function"){console.warn("wrong listener type: "+typeof E);return}var Fe=this._listens(y,E,B);if(Fe!==!1){var tt=re[Fe];this._firingCount&&(tt.fn=p,this._events[y]=re=re.slice()),re.splice(Fe,1)}}},fire:function(y,E,B){if(!this.listens(y,B))return this;var re=a({},E,{type:y,target:this,sourceTarget:E&&E.sourceTarget||this});if(this._events){var fe=this._events[y];if(fe){this._firingCount=this._firingCount+1||1;for(var Ee=0,Fe=fe.length;Ee<Fe;Ee++){var tt=fe[Ee],mt=tt.fn;tt.once&&this.off(y,mt,tt.ctx),mt.call(tt.ctx||this,re)}this._firingCount--}}return B&&this._propagateEvent(re),this},listens:function(y,E,B,re){typeof y!="string"&&console.warn('"string" type argument expected');var fe=E;typeof E!="function"&&(re=!!E,fe=void 0,B=void 0);var Ee=this._events&&this._events[y];if(Ee&&Ee.length&&this._listens(y,fe,B)!==!1)return!0;if(re){for(var Fe in this._eventParents)if(this._eventParents[Fe].listens(y,E,B,re))return!0}return!1},_listens:function(y,E,B){if(!this._events)return!1;var re=this._events[y]||[];if(!E)return!!re.length;B===this&&(B=void 0);for(var fe=0,Ee=re.length;fe<Ee;fe++)if(re[fe].fn===E&&re[fe].ctx===B)return fe;return!1},once:function(y,E,B){if(typeof y=="object")for(var re in y)this._on(re,y[re],E,!0);else{y=w(y);for(var fe=0,Ee=y.length;fe<Ee;fe++)this._on(y[fe],E,B,!0)}return this},addEventParent:function(y){return this._eventParents=this._eventParents||{},this._eventParents[u(y)]=y,this},removeEventParent:function(y){return this._eventParents&&delete this._eventParents[u(y)],this},_propagateEvent:function(y){for(var E in this._eventParents)this._eventParents[E].fire(y.type,a({layer:y.target,propagatedFrom:y.target},y),!0)}};Q.addEventListener=Q.on,Q.removeEventListener=Q.clearAllEventListeners=Q.off,Q.addOneTimeEventListener=Q.once,Q.fireEvent=Q.fire,Q.hasEventListeners=Q.listens;var de=me.extend(Q);function le(y,E,B){this.x=B?Math.round(y):y,this.y=B?Math.round(E):E}var ye=Math.trunc||function(y){return y>0?Math.floor(y):Math.ceil(y)};le.prototype={clone:function(){return new le(this.x,this.y)},add:function(y){return this.clone()._add(Se(y))},_add:function(y){return this.x+=y.x,this.y+=y.y,this},subtract:function(y){return this.clone()._subtract(Se(y))},_subtract:function(y){return this.x-=y.x,this.y-=y.y,this},divideBy:function(y){return this.clone()._divideBy(y)},_divideBy:function(y){return this.x/=y,this.y/=y,this},multiplyBy:function(y){return this.clone()._multiplyBy(y)},_multiplyBy:function(y){return this.x*=y,this.y*=y,this},scaleBy:function(y){return new le(this.x*y.x,this.y*y.y)},unscaleBy:function(y){return new le(this.x/y.x,this.y/y.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ye(this.x),this.y=ye(this.y),this},distanceTo:function(y){y=Se(y);var E=y.x-this.x,B=y.y-this.y;return Math.sqrt(E*E+B*B)},equals:function(y){return y=Se(y),y.x===this.x&&y.y===this.y},contains:function(y){return y=Se(y),Math.abs(y.x)<=Math.abs(this.x)&&Math.abs(y.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Se(y,E,B){return y instanceof le?y:D(y)?new le(y[0],y[1]):y==null?y:typeof y=="object"&&"x"in y&&"y"in y?new le(y.x,y.y):new le(y,E,B)}function $(y,E){if(y)for(var B=E?[y,E]:y,re=0,fe=B.length;re<fe;re++)this.extend(B[re])}$.prototype={extend:function(y){var E,B;if(!y)return this;if(y instanceof le||typeof y[0]=="number"||"x"in y)E=B=Se(y);else if(y=X(y),E=y.min,B=y.max,!E||!B)return this;return!this.min&&!this.max?(this.min=E.clone(),this.max=B.clone()):(this.min.x=Math.min(E.x,this.min.x),this.max.x=Math.max(B.x,this.max.x),this.min.y=Math.min(E.y,this.min.y),this.max.y=Math.max(B.y,this.max.y)),this},getCenter:function(y){return Se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,y)},getBottomLeft:function(){return Se(this.min.x,this.max.y)},getTopRight:function(){return Se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(y){var E,B;return typeof y[0]=="number"||y instanceof le?y=Se(y):y=X(y),y instanceof $?(E=y.min,B=y.max):E=B=y,E.x>=this.min.x&&B.x<=this.max.x&&E.y>=this.min.y&&B.y<=this.max.y},intersects:function(y){y=X(y);var E=this.min,B=this.max,re=y.min,fe=y.max,Ee=fe.x>=E.x&&re.x<=B.x,Fe=fe.y>=E.y&&re.y<=B.y;return Ee&&Fe},overlaps:function(y){y=X(y);var E=this.min,B=this.max,re=y.min,fe=y.max,Ee=fe.x>E.x&&re.x<B.x,Fe=fe.y>E.y&&re.y<B.y;return Ee&&Fe},isValid:function(){return!!(this.min&&this.max)},pad:function(y){var E=this.min,B=this.max,re=Math.abs(E.x-B.x)*y,fe=Math.abs(E.y-B.y)*y;return X(Se(E.x-re,E.y-fe),Se(B.x+re,B.y+fe))},equals:function(y){return y?(y=X(y),this.min.equals(y.getTopLeft())&&this.max.equals(y.getBottomRight())):!1}};function X(y,E){return!y||y instanceof $?y:new $(y,E)}function se(y,E){if(y)for(var B=E?[y,E]:y,re=0,fe=B.length;re<fe;re++)this.extend(B[re])}se.prototype={extend:function(y){var E=this._southWest,B=this._northEast,re,fe;if(y instanceof oe)re=y,fe=y;else if(y instanceof se){if(re=y._southWest,fe=y._northEast,!re||!fe)return this}else return y?this.extend(ge(y)||H(y)):this;return!E&&!B?(this._southWest=new oe(re.lat,re.lng),this._northEast=new oe(fe.lat,fe.lng)):(E.lat=Math.min(re.lat,E.lat),E.lng=Math.min(re.lng,E.lng),B.lat=Math.max(fe.lat,B.lat),B.lng=Math.max(fe.lng,B.lng)),this},pad:function(y){var E=this._southWest,B=this._northEast,re=Math.abs(E.lat-B.lat)*y,fe=Math.abs(E.lng-B.lng)*y;return new se(new oe(E.lat-re,E.lng-fe),new oe(B.lat+re,B.lng+fe))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(y){typeof y[0]=="number"||y instanceof oe||"lat"in y?y=ge(y):y=H(y);var E=this._southWest,B=this._northEast,re,fe;return y instanceof se?(re=y.getSouthWest(),fe=y.getNorthEast()):re=fe=y,re.lat>=E.lat&&fe.lat<=B.lat&&re.lng>=E.lng&&fe.lng<=B.lng},intersects:function(y){y=H(y);var E=this._southWest,B=this._northEast,re=y.getSouthWest(),fe=y.getNorthEast(),Ee=fe.lat>=E.lat&&re.lat<=B.lat,Fe=fe.lng>=E.lng&&re.lng<=B.lng;return Ee&&Fe},overlaps:function(y){y=H(y);var E=this._southWest,B=this._northEast,re=y.getSouthWest(),fe=y.getNorthEast(),Ee=fe.lat>E.lat&&re.lat<B.lat,Fe=fe.lng>E.lng&&re.lng<B.lng;return Ee&&Fe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(y,E){return y?(y=H(y),this._southWest.equals(y.getSouthWest(),E)&&this._northEast.equals(y.getNorthEast(),E)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function H(y,E){return y instanceof se?y:new se(y,E)}function oe(y,E,B){if(isNaN(y)||isNaN(E))throw new Error("Invalid LatLng object: ("+y+", "+E+")");this.lat=+y,this.lng=+E,B!==void 0&&(this.alt=+B)}oe.prototype={equals:function(y,E){if(!y)return!1;y=ge(y);var B=Math.max(Math.abs(this.lat-y.lat),Math.abs(this.lng-y.lng));return B<=(E===void 0?1e-9:E)},toString:function(y){return"LatLng("+x(this.lat,y)+", "+x(this.lng,y)+")"},distanceTo:function(y){return Le.distance(this,ge(y))},wrap:function(){return Le.wrapLatLng(this)},toBounds:function(y){var E=180*y/40075017,B=E/Math.cos(Math.PI/180*this.lat);return H([this.lat-E,this.lng-B],[this.lat+E,this.lng+B])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function ge(y,E,B){return y instanceof oe?y:D(y)&&typeof y[0]!="object"?y.length===3?new oe(y[0],y[1],y[2]):y.length===2?new oe(y[0],y[1]):null:y==null?y:typeof y=="object"&&"lat"in y?new oe(y.lat,"lng"in y?y.lng:y.lon,y.alt):E===void 0?null:new oe(y,E,B)}var be={latLngToPoint:function(y,E){var B=this.projection.project(y),re=this.scale(E);return this.transformation._transform(B,re)},pointToLatLng:function(y,E){var B=this.scale(E),re=this.transformation.untransform(y,B);return this.projection.unproject(re)},project:function(y){return this.projection.project(y)},unproject:function(y){return this.projection.unproject(y)},scale:function(y){return 256*Math.pow(2,y)},zoom:function(y){return Math.log(y/256)/Math.LN2},getProjectedBounds:function(y){if(this.infinite)return null;var E=this.projection.bounds,B=this.scale(y),re=this.transformation.transform(E.min,B),fe=this.transformation.transform(E.max,B);return new $(re,fe)},infinite:!1,wrapLatLng:function(y){var E=this.wrapLng?f(y.lng,this.wrapLng,!0):y.lng,B=this.wrapLat?f(y.lat,this.wrapLat,!0):y.lat,re=y.alt;return new oe(B,E,re)},wrapLatLngBounds:function(y){var E=y.getCenter(),B=this.wrapLatLng(E),re=E.lat-B.lat,fe=E.lng-B.lng;if(re===0&&fe===0)return y;var Ee=y.getSouthWest(),Fe=y.getNorthEast(),tt=new oe(Ee.lat-re,Ee.lng-fe),mt=new oe(Fe.lat-re,Fe.lng-fe);return new se(tt,mt)}},Le=a({},be,{wrapLng:[-180,180],R:6371e3,distance:function(y,E){var B=Math.PI/180,re=y.lat*B,fe=E.lat*B,Ee=Math.sin((E.lat-y.lat)*B/2),Fe=Math.sin((E.lng-y.lng)*B/2),tt=Ee*Ee+Math.cos(re)*Math.cos(fe)*Fe*Fe,mt=2*Math.atan2(Math.sqrt(tt),Math.sqrt(1-tt));return this.R*mt}}),ke=6378137,He={R:ke,MAX_LATITUDE:85.0511287798,project:function(y){var E=Math.PI/180,B=this.MAX_LATITUDE,re=Math.max(Math.min(B,y.lat),-B),fe=Math.sin(re*E);return new le(this.R*y.lng*E,this.R*Math.log((1+fe)/(1-fe))/2)},unproject:function(y){var E=180/Math.PI;return new oe((2*Math.atan(Math.exp(y.y/this.R))-Math.PI/2)*E,y.x*E/this.R)},bounds:(function(){var y=ke*Math.PI;return new $([-y,-y],[y,y])})()};function Je(y,E,B,re){if(D(y)){this._a=y[0],this._b=y[1],this._c=y[2],this._d=y[3];return}this._a=y,this._b=E,this._c=B,this._d=re}Je.prototype={transform:function(y,E){return this._transform(y.clone(),E)},_transform:function(y,E){return E=E||1,y.x=E*(this._a*y.x+this._b),y.y=E*(this._c*y.y+this._d),y},untransform:function(y,E){return E=E||1,new le((y.x/E-this._b)/this._a,(y.y/E-this._d)/this._c)}};function Qe(y,E,B,re){return new Je(y,E,B,re)}var vt=a({},Le,{code:"EPSG:3857",projection:He,transformation:(function(){var y=.5/(Math.PI*He.R);return Qe(y,.5,-y,.5)})()}),Pt=a({},vt,{code:"EPSG:900913"});function Oe(y){return document.createElementNS("http://www.w3.org/2000/svg",y)}function at(y,E){var B="",re,fe,Ee,Fe,tt,mt;for(re=0,Ee=y.length;re<Ee;re++){for(tt=y[re],fe=0,Fe=tt.length;fe<Fe;fe++)mt=tt[fe],B+=(fe?"L":"M")+mt.x+" "+mt.y;B+=E?$t.svg?"z":"x":""}return B||"M0 0"}var Wt=document.documentElement.style,Bt="ActiveXObject"in window,yt=Bt&&!document.addEventListener,rr="msLaunchUri"in navigator&&!("documentMode"in document),St=Xr("webkit"),xr=Xr("android"),hr=Xr("android 2")||Xr("android 3"),zr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yn=xr&&Xr("Google")&&zr<537&&!("AudioNode"in window),Ir=!!window.opera,xn=!rr&&Xr("chrome"),Yr=Xr("gecko")&&!St&&!Ir&&!Bt,tr=!xn&&Xr("safari"),tn=Xr("phantom"),fr="OTransition"in Wt,Ki=navigator.platform.indexOf("Win")===0,Er=Bt&&"transition"in Wt,wt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!hr,sr="MozPerspective"in Wt,ur=!window.L_DISABLE_3D&&(Er||wt||sr)&&!fr&&!tn,Yt=typeof orientation<"u"||Xr("mobile"),Kn=Yt&&St,Fr=Yt&&wt,Gr=!window.PointerEvent&&window.MSPointerEvent,Sr=!!(window.PointerEvent||Gr),Kr="ontouchstart"in window||!!window.TouchEvent,_r=!window.L_NO_TOUCH&&(Kr||Sr),On=Yt&&Ir,Qi=Yt&&Yr,Ta=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vi=(function(){var y=!1;try{var E=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("testPassiveEventSupport",p,E),window.removeEventListener("testPassiveEventSupport",p,E)}catch{}return y})(),$a=(function(){return!!document.createElement("canvas").getContext})(),vr=!!(document.createElementNS&&Oe("svg").createSVGRect),Ia=!!vr&&(function(){var y=document.createElement("div");return y.innerHTML="<svg/>",(y.firstChild&&y.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ml=!vr&&(function(){try{var y=document.createElement("div");y.innerHTML='<v:shape adj="1"/>';var E=y.firstChild;return E.style.behavior="url(#default#VML)",E&&typeof E.adj=="object"}catch{return!1}})(),pa=navigator.platform.indexOf("Mac")===0,Ds=navigator.platform.indexOf("Linux")===0;function Xr(y){return navigator.userAgent.toLowerCase().indexOf(y)>=0}var $t={ie:Bt,ielt9:yt,edge:rr,webkit:St,android:xr,android23:hr,androidStock:yn,opera:Ir,chrome:xn,gecko:Yr,safari:tr,phantom:tn,opera12:fr,win:Ki,ie3d:Er,webkit3d:wt,gecko3d:sr,any3d:ur,mobile:Yt,mobileWebkit:Kn,mobileWebkit3d:Fr,msPointer:Gr,pointer:Sr,touch:_r,touchNative:Kr,mobileOpera:On,mobileGecko:Qi,retina:Ta,passiveEvents:vi,canvas:$a,svg:vr,vml:ml,inlineSvg:Ia,mac:pa,linux:Ds},Qn=$t.msPointer?"MSPointerDown":"pointerdown",er=$t.msPointer?"MSPointerMove":"pointermove",Yi=$t.msPointer?"MSPointerUp":"pointerup",Yn=$t.msPointer?"MSPointerCancel":"pointercancel",vn={touchstart:Qn,touchmove:er,touchend:Yi,touchcancel:Yn},Bi={touchstart:Ka,touchmove:Go,touchend:Go,touchcancel:Go},Zi={},cs=!1;function ds(y,E,B){return E==="touchstart"&&kn(),Bi[E]?(B=Bi[E].bind(this,B),y.addEventListener(vn[E],B,!1),B):(console.warn("wrong event specified:",E),p)}function Vo(y,E,B){if(!vn[E]){console.warn("wrong event specified:",E);return}y.removeEventListener(vn[E],B,!1)}function $o(y){Zi[y.pointerId]=y}function Ga(y){Zi[y.pointerId]&&(Zi[y.pointerId]=y)}function fi(y){delete Zi[y.pointerId]}function kn(){cs||(document.addEventListener(Qn,$o,!0),document.addEventListener(er,Ga,!0),document.addEventListener(Yi,fi,!0),document.addEventListener(Yn,fi,!0),cs=!0)}function Go(y,E){if(E.pointerType!==(E.MSPOINTER_TYPE_MOUSE||"mouse")){E.touches=[];for(var B in Zi)E.touches.push(Zi[B]);E.changedTouches=[E],y(E)}}function Ka(y,E){E.MSPOINTER_TYPE_TOUCH&&E.pointerType===E.MSPOINTER_TYPE_TOUCH&&mi(E),Go(y,E)}function Oi(y){var E={},B,re;for(re in y)B=y[re],E[re]=B&&B.bind?B.bind(y):B;return y=E,E.type="dblclick",E.detail=2,E.isTrusted=!1,E._simulated=!0,E}var Rt=200;function io(y,E){y.addEventListener("dblclick",E);var B=0,re;function fe(Ee){if(Ee.detail!==1){re=Ee.detail;return}if(!(Ee.pointerType==="mouse"||Ee.sourceCapabilities&&!Ee.sourceCapabilities.firesTouchEvents)){var Fe=Ja(Ee);if(!(Fe.some(function(mt){return mt instanceof HTMLLabelElement&&mt.attributes.for})&&!Fe.some(function(mt){return mt instanceof HTMLInputElement||mt instanceof HTMLSelectElement}))){var tt=Date.now();tt-B<=Rt?(re++,re===2&&E(Oi(Ee))):re=1,B=tt}}}return y.addEventListener("click",fe),{dblclick:E,simDblclick:fe}}function zn(y,E){y.removeEventListener("dblclick",E.dblclick),y.removeEventListener("click",E.simDblclick)}var us=nt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kl=nt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_n=kl==="webkitTransition"||kl==="OTransition"?kl+"End":"transitionend";function An(y){return typeof y=="string"?document.getElementById(y):y}function on(y,E){var B=y.style[E]||y.currentStyle&&y.currentStyle[E];if((!B||B==="auto")&&document.defaultView){var re=document.defaultView.getComputedStyle(y,null);B=re?re[E]:null}return B==="auto"?null:B}function Jr(y,E,B){var re=document.createElement(y);return re.className=E||"",B&&B.appendChild(re),re}function Rn(y){var E=y.parentNode;E&&E.removeChild(y)}function hs(y){for(;y.firstChild;)y.removeChild(y.firstChild)}function Mr(y){var E=y.parentNode;E&&E.lastChild!==y&&E.appendChild(y)}function Qa(y){var E=y.parentNode;E&&E.firstChild!==y&&E.insertBefore(y,E.firstChild)}function Ao(y,E){if(y.classList!==void 0)return y.classList.contains(E);var B=di(y);return B.length>0&&new RegExp("(^|\\s)"+E+"(\\s|$)").test(B)}function ir(y,E){if(y.classList!==void 0)for(var B=w(E),re=0,fe=B.length;re<fe;re++)y.classList.add(B[re]);else if(!Ao(y,E)){var Ee=di(y);Ya(y,(Ee?Ee+" ":"")+E)}}function Bn(y,E){y.classList!==void 0?y.classList.remove(E):Ya(y,v((" "+di(y)+" ").replace(" "+E+" "," ")))}function Ya(y,E){y.className.baseVal===void 0?y.className=E:y.className.baseVal=E}function di(y){return y.correspondingElement&&(y=y.correspondingElement),y.className.baseVal===void 0?y.className:y.className.baseVal}function Or(y,E){"opacity"in y.style?y.style.opacity=E:"filter"in y.style&&Xi(y,E)}function Xi(y,E){var B=!1,re="DXImageTransform.Microsoft.Alpha";try{B=y.filters.item(re)}catch{if(E===1)return}E=Math.round(E*100),B?(B.Enabled=E!==100,B.Opacity=E):y.style.filter+=" progid:"+re+"(opacity="+E+")"}function nt(y){for(var E=document.documentElement.style,B=0;B<y.length;B++)if(y[B]in E)return y[B];return!1}function Pe(y,E,B){var re=E||new le(0,0);y.style[us]=($t.ie3d?"translate("+re.x+"px,"+re.y+"px)":"translate3d("+re.x+"px,"+re.y+"px,0)")+(B?" scale("+B+")":"")}function Ht(y,E){y._leaflet_pos=E,$t.any3d?Pe(y,E):(y.style.left=E.x+"px",y.style.top=E.y+"px")}function ri(y){return y._leaflet_pos||new le(0,0)}var la,Ps,Ko;if("onselectstart"in document)la=function(){Ft(window,"selectstart",mi)},Ps=function(){Zt(window,"selectstart",mi)};else{var ga=nt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);la=function(){if(ga){var y=document.documentElement.style;Ko=y[ga],y[ga]="none"}},Ps=function(){ga&&(document.documentElement.style[ga]=Ko,Ko=void 0)}}function Cr(){Ft(window,"dragstart",mi)}function Jn(){Zt(window,"dragstart",mi)}var Dl,Uc;function Oa(y){for(;y.tabIndex===-1;)y=y.parentNode;y.style&&(Za(),Dl=y,Uc=y.style.outlineStyle,y.style.outlineStyle="none",Ft(window,"keydown",Za))}function Za(){Dl&&(Dl.style.outlineStyle=Uc,Dl=void 0,Uc=void 0,Zt(window,"keydown",Za))}function Eo(y){do y=y.parentNode;while((!y.offsetWidth||!y.offsetHeight)&&y!==document.body);return y}function Pl(y){var E=y.getBoundingClientRect();return{x:E.width/y.offsetWidth||1,y:E.height/y.offsetHeight||1,boundingClientRect:E}}var bi={__proto__:null,TRANSFORM:us,TRANSITION:kl,TRANSITION_END:_n,get:An,getStyle:on,create:Jr,remove:Rn,empty:hs,toFront:Mr,toBack:Qa,hasClass:Ao,addClass:ir,removeClass:Bn,setClass:Ya,getClass:di,setOpacity:Or,testProp:nt,setTransform:Pe,setPosition:Ht,getPosition:ri,get disableTextSelection(){return la},get enableTextSelection(){return Ps},disableImageDrag:Cr,enableImageDrag:Jn,preventOutline:Oa,restoreOutline:Za,getSizedParentNode:Eo,getScale:Pl};function Ft(y,E,B,re){if(E&&typeof E=="object")for(var fe in E)Tn(y,fe,E[fe],B);else{E=w(E);for(var Ee=0,Fe=E.length;Ee<Fe;Ee++)Tn(y,E[Ee],B,re)}return this}var ca="_leaflet_events";function Zt(y,E,B,re){if(arguments.length===1)hd(y),delete y[ca];else if(E&&typeof E=="object")for(var fe in E)gc(y,fe,E[fe],B);else if(E=w(E),arguments.length===2)hd(y,function(tt){return M(E,tt)!==-1});else for(var Ee=0,Fe=E.length;Ee<Fe;Ee++)gc(y,E[Ee],B,re);return this}function hd(y,E){for(var B in y[ca]){var re=B.split(/\d/)[0];(!E||E(re))&&gc(y,re,null,null,B)}}var Lr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Tn(y,E,B,re){var fe=E+u(B)+(re?"_"+u(re):"");if(y[ca]&&y[ca][fe])return this;var Ee=function(tt){return B.call(re||y,tt||window.event)},Fe=Ee;!$t.touchNative&&$t.pointer&&E.indexOf("touch")===0?Ee=ds(y,E,Ee):$t.touch&&E==="dblclick"?Ee=io(y,Ee):"addEventListener"in y?E==="touchstart"||E==="touchmove"||E==="wheel"||E==="mousewheel"?y.addEventListener(Lr[E]||E,Ee,$t.passiveEvents?{passive:!1}:!1):E==="mouseenter"||E==="mouseleave"?(Ee=function(tt){tt=tt||window.event,ms(y,tt)&&Fe(tt)},y.addEventListener(Lr[E],Ee,!1)):y.addEventListener(E,Fe,!1):y.attachEvent("on"+E,Ee),y[ca]=y[ca]||{},y[ca][fe]=Ee}function gc(y,E,B,re,fe){fe=fe||E+u(B)+(re?"_"+u(re):"");var Ee=y[ca]&&y[ca][fe];if(!Ee)return this;!$t.touchNative&&$t.pointer&&E.indexOf("touch")===0?Vo(y,E,Ee):$t.touch&&E==="dblclick"?zn(y,Ee):"removeEventListener"in y?y.removeEventListener(Lr[E]||E,Ee,!1):y.detachEvent("on"+E,Ee),y[ca][fe]=null}function Rs(y){return y.stopPropagation?y.stopPropagation():y.originalEvent?y.originalEvent._stopped=!0:y.cancelBubble=!0,this}function fs(y){return Tn(y,"wheel",Rs),this}function Xa(y){return Ft(y,"mousedown touchstart dblclick contextmenu",Rs),y._leaflet_disable_click=!0,this}function mi(y){return y.preventDefault?y.preventDefault():y.returnValue=!1,this}function Ks(y){return mi(y),Rs(y),this}function Ja(y){if(y.composedPath)return y.composedPath();for(var E=[],B=y.target;B;)E.push(B),B=B.parentNode;return E}function Qo(y,E){if(!E)return new le(y.clientX,y.clientY);var B=Pl(E),re=B.boundingClientRect;return new le((y.clientX-re.left)/B.x-E.clientLeft,(y.clientY-re.top)/B.y-E.clientTop)}var yc=$t.linux&&$t.chrome?window.devicePixelRatio:$t.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ki(y){return $t.edge?y.wheelDeltaY/2:y.deltaY&&y.deltaMode===0?-y.deltaY/yc:y.deltaY&&y.deltaMode===1?-y.deltaY*20:y.deltaY&&y.deltaMode===2?-y.deltaY*60:y.deltaX||y.deltaZ?0:y.wheelDelta?(y.wheelDeltaY||y.wheelDelta)/2:y.detail&&Math.abs(y.detail)<32765?-y.detail*20:y.detail?y.detail/-32765*60:0}function ms(y,E){var B=E.relatedTarget;if(!B)return!0;try{for(;B&&B!==y;)B=B.parentNode}catch{return!1}return B!==y}var ji={__proto__:null,on:Ft,off:Zt,stopPropagation:Rs,disableScrollPropagation:fs,disableClickPropagation:Xa,preventDefault:mi,stop:Ks,getPropagationPath:Ja,getMousePosition:Qo,getWheelDelta:ki,isExternalTarget:ms,addListener:Ft,removeListener:Zt},Yo=de.extend({run:function(y,E,B,re){this.stop(),this._el=y,this._inProgress=!0,this._duration=B||.25,this._easeOutPower=1/Math.max(re||.5,.2),this._startPos=ri(y),this._offset=E.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(y){var E=+new Date-this._startTime,B=this._duration*1e3;E<B?this._runFrame(this._easeOut(E/B),y):(this._runFrame(1),this._complete())},_runFrame:function(y,E){var B=this._startPos.add(this._offset.multiplyBy(y));E&&B._round(),Ht(this._el,B),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(y){return 1-Math.pow(1-y,this._easeOutPower)}}),mn=de.extend({options:{crs:vt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(y,E){E=C(this,E),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(y),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),E.maxBounds&&this.setMaxBounds(E.maxBounds),E.zoom!==void 0&&(this._zoom=this._limitZoom(E.zoom)),E.center&&E.zoom!==void 0&&this.setView(ge(E.center),E.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=kl&&$t.any3d&&!$t.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ft(this._proxy,_n,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(y,E,B){if(E=E===void 0?this._zoom:this._limitZoom(E),y=this._limitCenter(ge(y),E,this.options.maxBounds),B=B||{},this._stop(),this._loaded&&!B.reset&&B!==!0){B.animate!==void 0&&(B.zoom=a({animate:B.animate},B.zoom),B.pan=a({animate:B.animate,duration:B.duration},B.pan));var re=this._zoom!==E?this._tryAnimatedZoom&&this._tryAnimatedZoom(y,E,B.zoom):this._tryAnimatedPan(y,B.pan);if(re)return clearTimeout(this._sizeTimer),this}return this._resetView(y,E,B.pan&&B.pan.noMoveStart),this},setZoom:function(y,E){return this._loaded?this.setView(this.getCenter(),y,{zoom:E}):(this._zoom=y,this)},zoomIn:function(y,E){return y=y||($t.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+y,E)},zoomOut:function(y,E){return y=y||($t.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-y,E)},setZoomAround:function(y,E,B){var re=this.getZoomScale(E),fe=this.getSize().divideBy(2),Ee=y instanceof le?y:this.latLngToContainerPoint(y),Fe=Ee.subtract(fe).multiplyBy(1-1/re),tt=this.containerPointToLatLng(fe.add(Fe));return this.setView(tt,E,{zoom:B})},_getBoundsCenterZoom:function(y,E){E=E||{},y=y.getBounds?y.getBounds():H(y);var B=Se(E.paddingTopLeft||E.padding||[0,0]),re=Se(E.paddingBottomRight||E.padding||[0,0]),fe=this.getBoundsZoom(y,!1,B.add(re));if(fe=typeof E.maxZoom=="number"?Math.min(E.maxZoom,fe):fe,fe===1/0)return{center:y.getCenter(),zoom:fe};var Ee=re.subtract(B).divideBy(2),Fe=this.project(y.getSouthWest(),fe),tt=this.project(y.getNorthEast(),fe),mt=this.unproject(Fe.add(tt).divideBy(2).add(Ee),fe);return{center:mt,zoom:fe}},fitBounds:function(y,E){if(y=H(y),!y.isValid())throw new Error("Bounds are not valid.");var B=this._getBoundsCenterZoom(y,E);return this.setView(B.center,B.zoom,E)},fitWorld:function(y){return this.fitBounds([[-90,-180],[90,180]],y)},panTo:function(y,E){return this.setView(y,this._zoom,{pan:E})},panBy:function(y,E){if(y=Se(y).round(),E=E||{},!y.x&&!y.y)return this.fire("moveend");if(E.animate!==!0&&!this.getSize().contains(y))return this._resetView(this.unproject(this.project(this.getCenter()).add(y)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Yo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),E.noMoveStart||this.fire("movestart"),E.animate!==!1){ir(this._mapPane,"leaflet-pan-anim");var B=this._getMapPanePos().subtract(y).round();this._panAnim.run(this._mapPane,B,E.duration||.25,E.easeLinearity)}else this._rawPanBy(y),this.fire("move").fire("moveend");return this},flyTo:function(y,E,B){if(B=B||{},B.animate===!1||!$t.any3d)return this.setView(y,E,B);this._stop();var re=this.project(this.getCenter()),fe=this.project(y),Ee=this.getSize(),Fe=this._zoom;y=ge(y),E=E===void 0?Fe:E;var tt=Math.max(Ee.x,Ee.y),mt=tt*this.getZoomScale(Fe,E),kt=fe.distanceTo(re)||1,Kt=1.42,br=Kt*Kt;function Cn(pi){var Ma=pi?-1:1,md=pi?mt:tt,bf=mt*mt-tt*tt+Ma*br*br*kt*kt,Bd=2*md*br*kt,Fd=bf/Bd,jc=Math.sqrt(Fd*Fd+1)-Fd,Yl=jc<1e-9?-18:Math.log(jc);return Yl}function Bs(pi){return(Math.exp(pi)-Math.exp(-pi))/2}function va(pi){return(Math.exp(pi)+Math.exp(-pi))/2}function il(pi){return Bs(pi)/va(pi)}var ni=Cn(0);function ii(pi){return tt*(va(ni)/va(ni+Kt*pi))}function Ln(pi){return tt*(va(ni)*il(ni+Kt*pi)-Bs(ni))/br}function uo(pi){return 1-Math.pow(1-pi,1.5)}var ha=Date.now(),xl=(Cn(1)-ni)/Kt,Hc=B.duration?1e3*B.duration:1e3*xl*.8;function Ch(){var pi=(Date.now()-ha)/Hc,Ma=uo(pi)*xl;pi<=1?(this._flyToFrame=ne(Ch,this),this._move(this.unproject(re.add(fe.subtract(re).multiplyBy(Ln(Ma)/kt)),Fe),this.getScaleZoom(tt/ii(Ma),Fe),{flyTo:!0})):this._move(y,E)._moveEnd(!0)}return this._moveStart(!0,B.noMoveStart),Ch.call(this),this},flyToBounds:function(y,E){var B=this._getBoundsCenterZoom(y,E);return this.flyTo(B.center,B.zoom,E)},setMaxBounds:function(y){return y=H(y),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),y.isValid()?(this.options.maxBounds=y,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(y){var E=this.options.minZoom;return this.options.minZoom=y,this._loaded&&E!==y&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(y):this},setMaxZoom:function(y){var E=this.options.maxZoom;return this.options.maxZoom=y,this._loaded&&E!==y&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(y):this},panInsideBounds:function(y,E){this._enforcingBounds=!0;var B=this.getCenter(),re=this._limitCenter(B,this._zoom,H(y));return B.equals(re)||this.panTo(re,E),this._enforcingBounds=!1,this},panInside:function(y,E){E=E||{};var B=Se(E.paddingTopLeft||E.padding||[0,0]),re=Se(E.paddingBottomRight||E.padding||[0,0]),fe=this.project(this.getCenter()),Ee=this.project(y),Fe=this.getPixelBounds(),tt=X([Fe.min.add(B),Fe.max.subtract(re)]),mt=tt.getSize();if(!tt.contains(Ee)){this._enforcingBounds=!0;var kt=Ee.subtract(tt.getCenter()),Kt=tt.extend(Ee).getSize().subtract(mt);fe.x+=kt.x<0?-Kt.x:Kt.x,fe.y+=kt.y<0?-Kt.y:Kt.y,this.panTo(this.unproject(fe),E),this._enforcingBounds=!1}return this},invalidateSize:function(y){if(!this._loaded)return this;y=a({animate:!1,pan:!0},y===!0?{animate:!0}:y);var E=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var B=this.getSize(),re=E.divideBy(2).round(),fe=B.divideBy(2).round(),Ee=re.subtract(fe);return!Ee.x&&!Ee.y?this:(y.animate&&y.pan?this.panBy(Ee):(y.pan&&this._rawPanBy(Ee),this.fire("move"),y.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:E,newSize:B}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(y){if(y=this._locateOptions=a({timeout:1e4,watch:!1},y),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var E=o(this._handleGeolocationResponse,this),B=o(this._handleGeolocationError,this);return y.watch?this._locationWatchId=navigator.geolocation.watchPosition(E,B,y):navigator.geolocation.getCurrentPosition(E,B,y),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(y){if(this._container._leaflet_id){var E=y.code,B=y.message||(E===1?"permission denied":E===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:E,message:"Geolocation error: "+B+"."})}},_handleGeolocationResponse:function(y){if(this._container._leaflet_id){var E=y.coords.latitude,B=y.coords.longitude,re=new oe(E,B),fe=re.toBounds(y.coords.accuracy*2),Ee=this._locateOptions;if(Ee.setView){var Fe=this.getBoundsZoom(fe);this.setView(re,Ee.maxZoom?Math.min(Fe,Ee.maxZoom):Fe)}var tt={latlng:re,bounds:fe,timestamp:y.timestamp};for(var mt in y.coords)typeof y.coords[mt]=="number"&&(tt[mt]=y.coords[mt]);this.fire("locationfound",tt)}},addHandler:function(y,E){if(!E)return this;var B=this[y]=new E(this);return this._handlers.push(B),this.options[y]&&B.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var y;for(y in this._layers)this._layers[y].remove();for(y in this._panes)Rn(this._panes[y]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(y,E){var B="leaflet-pane"+(y?" leaflet-"+y.replace("Pane","")+"-pane":""),re=Jr("div",B,E||this._mapPane);return y&&(this._panes[y]=re),re},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var y=this.getPixelBounds(),E=this.unproject(y.getBottomLeft()),B=this.unproject(y.getTopRight());return new se(E,B)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(y,E,B){y=H(y),B=Se(B||[0,0]);var re=this.getZoom()||0,fe=this.getMinZoom(),Ee=this.getMaxZoom(),Fe=y.getNorthWest(),tt=y.getSouthEast(),mt=this.getSize().subtract(B),kt=X(this.project(tt,re),this.project(Fe,re)).getSize(),Kt=$t.any3d?this.options.zoomSnap:1,br=mt.x/kt.x,Cn=mt.y/kt.y,Bs=E?Math.max(br,Cn):Math.min(br,Cn);return re=this.getScaleZoom(Bs,re),Kt&&(re=Math.round(re/(Kt/100))*(Kt/100),re=E?Math.ceil(re/Kt)*Kt:Math.floor(re/Kt)*Kt),Math.max(fe,Math.min(Ee,re))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new le(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(y,E){var B=this._getTopLeftPoint(y,E);return new $(B,B.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(y){return this.options.crs.getProjectedBounds(y===void 0?this.getZoom():y)},getPane:function(y){return typeof y=="string"?this._panes[y]:y},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(y,E){var B=this.options.crs;return E=E===void 0?this._zoom:E,B.scale(y)/B.scale(E)},getScaleZoom:function(y,E){var B=this.options.crs;E=E===void 0?this._zoom:E;var re=B.zoom(y*B.scale(E));return isNaN(re)?1/0:re},project:function(y,E){return E=E===void 0?this._zoom:E,this.options.crs.latLngToPoint(ge(y),E)},unproject:function(y,E){return E=E===void 0?this._zoom:E,this.options.crs.pointToLatLng(Se(y),E)},layerPointToLatLng:function(y){var E=Se(y).add(this.getPixelOrigin());return this.unproject(E)},latLngToLayerPoint:function(y){var E=this.project(ge(y))._round();return E._subtract(this.getPixelOrigin())},wrapLatLng:function(y){return this.options.crs.wrapLatLng(ge(y))},wrapLatLngBounds:function(y){return this.options.crs.wrapLatLngBounds(H(y))},distance:function(y,E){return this.options.crs.distance(ge(y),ge(E))},containerPointToLayerPoint:function(y){return Se(y).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(y){return Se(y).add(this._getMapPanePos())},containerPointToLatLng:function(y){var E=this.containerPointToLayerPoint(Se(y));return this.layerPointToLatLng(E)},latLngToContainerPoint:function(y){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(y)))},mouseEventToContainerPoint:function(y){return Qo(y,this._container)},mouseEventToLayerPoint:function(y){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(y))},mouseEventToLatLng:function(y){return this.layerPointToLatLng(this.mouseEventToLayerPoint(y))},_initContainer:function(y){var E=this._container=An(y);if(E){if(E._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ft(E,"scroll",this._onScroll,this),this._containerId=u(E)},_initLayout:function(){var y=this._container;this._fadeAnimated=this.options.fadeAnimation&&$t.any3d,ir(y,"leaflet-container"+($t.touch?" leaflet-touch":"")+($t.retina?" leaflet-retina":"")+($t.ielt9?" leaflet-oldie":"")+($t.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var E=on(y,"position");E!=="absolute"&&E!=="relative"&&E!=="fixed"&&E!=="sticky"&&(y.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var y=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ht(this._mapPane,new le(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ir(y.markerPane,"leaflet-zoom-hide"),ir(y.shadowPane,"leaflet-zoom-hide"))},_resetView:function(y,E,B){Ht(this._mapPane,new le(0,0));var re=!this._loaded;this._loaded=!0,E=this._limitZoom(E),this.fire("viewprereset");var fe=this._zoom!==E;this._moveStart(fe,B)._move(y,E)._moveEnd(fe),this.fire("viewreset"),re&&this.fire("load")},_moveStart:function(y,E){return y&&this.fire("zoomstart"),E||this.fire("movestart"),this},_move:function(y,E,B,re){E===void 0&&(E=this._zoom);var fe=this._zoom!==E;return this._zoom=E,this._lastCenter=y,this._pixelOrigin=this._getNewPixelOrigin(y),re?B&&B.pinch&&this.fire("zoom",B):((fe||B&&B.pinch)&&this.fire("zoom",B),this.fire("move",B)),this},_moveEnd:function(y){return y&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(y){Ht(this._mapPane,this._getMapPanePos().subtract(y))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(y){this._targets={},this._targets[u(this._container)]=this;var E=y?Zt:Ft;E(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&E(window,"resize",this._onResize,this),$t.any3d&&this.options.transform3DLimit&&(y?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var y=this._getMapPanePos();Math.max(Math.abs(y.x),Math.abs(y.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(y,E){for(var B=[],re,fe=E==="mouseout"||E==="mouseover",Ee=y.target||y.srcElement,Fe=!1;Ee;){if(re=this._targets[u(Ee)],re&&(E==="click"||E==="preclick")&&this._draggableMoved(re)){Fe=!0;break}if(re&&re.listens(E,!0)&&(fe&&!ms(Ee,y)||(B.push(re),fe))||Ee===this._container)break;Ee=Ee.parentNode}return!B.length&&!Fe&&!fe&&this.listens(E,!0)&&(B=[this]),B},_isClickDisabled:function(y){for(;y&&y!==this._container;){if(y._leaflet_disable_click)return!0;y=y.parentNode}},_handleDOMEvent:function(y){var E=y.target||y.srcElement;if(!(!this._loaded||E._leaflet_disable_events||y.type==="click"&&this._isClickDisabled(E))){var B=y.type;B==="mousedown"&&Oa(E),this._fireDOMEvent(y,B)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(y,E,B){if(y.type==="click"){var re=a({},y);re.type="preclick",this._fireDOMEvent(re,re.type,B)}var fe=this._findEventTargets(y,E);if(B){for(var Ee=[],Fe=0;Fe<B.length;Fe++)B[Fe].listens(E,!0)&&Ee.push(B[Fe]);fe=Ee.concat(fe)}if(fe.length){E==="contextmenu"&&mi(y);var tt=fe[0],mt={originalEvent:y};if(y.type!=="keypress"&&y.type!=="keydown"&&y.type!=="keyup"){var kt=tt.getLatLng&&(!tt._radius||tt._radius<=10);mt.containerPoint=kt?this.latLngToContainerPoint(tt.getLatLng()):this.mouseEventToContainerPoint(y),mt.layerPoint=this.containerPointToLayerPoint(mt.containerPoint),mt.latlng=kt?tt.getLatLng():this.layerPointToLatLng(mt.layerPoint)}for(Fe=0;Fe<fe.length;Fe++)if(fe[Fe].fire(E,mt,!0),mt.originalEvent._stopped||fe[Fe].options.bubblingMouseEvents===!1&&M(this._mouseEvents,E)!==-1)return}},_draggableMoved:function(y){return y=y.dragging&&y.dragging.enabled()?y:this,y.dragging&&y.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var y=0,E=this._handlers.length;y<E;y++)this._handlers[y].disable()},whenReady:function(y,E){return this._loaded?y.call(E||this,{target:this}):this.on("load",y,E),this},_getMapPanePos:function(){return ri(this._mapPane)||new le(0,0)},_moved:function(){var y=this._getMapPanePos();return y&&!y.equals([0,0])},_getTopLeftPoint:function(y,E){var B=y&&E!==void 0?this._getNewPixelOrigin(y,E):this.getPixelOrigin();return B.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(y,E){var B=this.getSize()._divideBy(2);return this.project(y,E)._subtract(B)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(y,E,B){var re=this._getNewPixelOrigin(B,E);return this.project(y,E)._subtract(re)},_latLngBoundsToNewLayerBounds:function(y,E,B){var re=this._getNewPixelOrigin(B,E);return X([this.project(y.getSouthWest(),E)._subtract(re),this.project(y.getNorthWest(),E)._subtract(re),this.project(y.getSouthEast(),E)._subtract(re),this.project(y.getNorthEast(),E)._subtract(re)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(y){return this.latLngToLayerPoint(y).subtract(this._getCenterLayerPoint())},_limitCenter:function(y,E,B){if(!B)return y;var re=this.project(y,E),fe=this.getSize().divideBy(2),Ee=new $(re.subtract(fe),re.add(fe)),Fe=this._getBoundsOffset(Ee,B,E);return Math.abs(Fe.x)<=1&&Math.abs(Fe.y)<=1?y:this.unproject(re.add(Fe),E)},_limitOffset:function(y,E){if(!E)return y;var B=this.getPixelBounds(),re=new $(B.min.add(y),B.max.add(y));return y.add(this._getBoundsOffset(re,E))},_getBoundsOffset:function(y,E,B){var re=X(this.project(E.getNorthEast(),B),this.project(E.getSouthWest(),B)),fe=re.min.subtract(y.min),Ee=re.max.subtract(y.max),Fe=this._rebound(fe.x,-Ee.x),tt=this._rebound(fe.y,-Ee.y);return new le(Fe,tt)},_rebound:function(y,E){return y+E>0?Math.round(y-E)/2:Math.max(0,Math.ceil(y))-Math.max(0,Math.floor(E))},_limitZoom:function(y){var E=this.getMinZoom(),B=this.getMaxZoom(),re=$t.any3d?this.options.zoomSnap:1;return re&&(y=Math.round(y/re)*re),Math.max(E,Math.min(B,y))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Bn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(y,E){var B=this._getCenterOffset(y)._trunc();return(E&&E.animate)!==!0&&!this.getSize().contains(B)?!1:(this.panBy(B,E),!0)},_createAnimProxy:function(){var y=this._proxy=Jr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(y),this.on("zoomanim",function(E){var B=us,re=this._proxy.style[B];Pe(this._proxy,this.project(E.center,E.zoom),this.getZoomScale(E.zoom,1)),re===this._proxy.style[B]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var y=this.getCenter(),E=this.getZoom();Pe(this._proxy,this.project(y,E),this.getZoomScale(E,1))},_catchTransitionEnd:function(y){this._animatingZoom&&y.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(y,E,B){if(this._animatingZoom)return!0;if(B=B||{},!this._zoomAnimated||B.animate===!1||this._nothingToAnimate()||Math.abs(E-this._zoom)>this.options.zoomAnimationThreshold)return!1;var re=this.getZoomScale(E),fe=this._getCenterOffset(y)._divideBy(1-1/re);return B.animate!==!0&&!this.getSize().contains(fe)?!1:(ne(function(){this._moveStart(!0,B.noMoveStart||!1)._animateZoom(y,E,!0)},this),!0)},_animateZoom:function(y,E,B,re){this._mapPane&&(B&&(this._animatingZoom=!0,this._animateToCenter=y,this._animateToZoom=E,ir(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:y,zoom:E,noUpdate:re}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Bn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $l(y,E){return new mn(y,E)}var ya=me.extend({options:{position:"topright"},initialize:function(y){C(this,y)},getPosition:function(){return this.options.position},setPosition:function(y){var E=this._map;return E&&E.removeControl(this),this.options.position=y,E&&E.addControl(this),this},getContainer:function(){return this._container},addTo:function(y){this.remove(),this._map=y;var E=this._container=this.onAdd(y),B=this.getPosition(),re=y._controlCorners[B];return ir(E,"leaflet-control"),B.indexOf("bottom")!==-1?re.insertBefore(E,re.firstChild):re.appendChild(E),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(y){this._map&&y&&y.screenX>0&&y.screenY>0&&this._map.getContainer().focus()}}),ao=function(y){return new ya(y)};mn.include({addControl:function(y){return y.addTo(this),this},removeControl:function(y){return y.remove(),this},_initControlPos:function(){var y=this._controlCorners={},E="leaflet-",B=this._controlContainer=Jr("div",E+"control-container",this._container);function re(fe,Ee){var Fe=E+fe+" "+E+Ee;y[fe+Ee]=Jr("div",Fe,B)}re("top","left"),re("top","right"),re("bottom","left"),re("bottom","right")},_clearControlPos:function(){for(var y in this._controlCorners)Rn(this._controlCorners[y]);Rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Gl=ya.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(y,E,B,re){return B<re?-1:re<B?1:0}},initialize:function(y,E,B){C(this,B),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var re in y)this._addLayer(y[re],re);for(re in E)this._addLayer(E[re],re,!0)},onAdd:function(y){this._initLayout(),this._update(),this._map=y,y.on("zoomend",this._checkDisabledLayers,this);for(var E=0;E<this._layers.length;E++)this._layers[E].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(y){return ya.prototype.addTo.call(this,y),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(y,E){return this._addLayer(y,E),this._map?this._update():this},addOverlay:function(y,E){return this._addLayer(y,E,!0),this._map?this._update():this},removeLayer:function(y){y.off("add remove",this._onLayerChange,this);var E=this._getLayer(u(y));return E&&this._layers.splice(this._layers.indexOf(E),1),this._map?this._update():this},expand:function(){ir(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var y=this._map.getSize().y-(this._container.offsetTop+50);return y<this._section.clientHeight?(ir(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=y+"px"):Bn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Bn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var y="leaflet-control-layers",E=this._container=Jr("div",y),B=this.options.collapsed;E.setAttribute("aria-haspopup",!0),Xa(E),fs(E);var re=this._section=Jr("section",y+"-list");B&&(this._map.on("click",this.collapse,this),Ft(E,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var fe=this._layersLink=Jr("a",y+"-toggle",E);fe.href="#",fe.title="Layers",fe.setAttribute("role","button"),Ft(fe,{keydown:function(Ee){Ee.keyCode===13&&this._expandSafely()},click:function(Ee){mi(Ee),this._expandSafely()}},this),B||this.expand(),this._baseLayersList=Jr("div",y+"-base",re),this._separator=Jr("div",y+"-separator",re),this._overlaysList=Jr("div",y+"-overlays",re),E.appendChild(re)},_getLayer:function(y){for(var E=0;E<this._layers.length;E++)if(this._layers[E]&&u(this._layers[E].layer)===y)return this._layers[E]},_addLayer:function(y,E,B){this._map&&y.on("add remove",this._onLayerChange,this),this._layers.push({layer:y,name:E,overlay:B}),this.options.sortLayers&&this._layers.sort(o(function(re,fe){return this.options.sortFunction(re.layer,fe.layer,re.name,fe.name)},this)),this.options.autoZIndex&&y.setZIndex&&(this._lastZIndex++,y.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hs(this._baseLayersList),hs(this._overlaysList),this._layerControlInputs=[];var y,E,B,re,fe=0;for(B=0;B<this._layers.length;B++)re=this._layers[B],this._addItem(re),E=E||re.overlay,y=y||!re.overlay,fe+=re.overlay?0:1;return this.options.hideSingleBase&&(y=y&&fe>1,this._baseLayersList.style.display=y?"":"none"),this._separator.style.display=E&&y?"":"none",this},_onLayerChange:function(y){this._handlingClick||this._update();var E=this._getLayer(u(y.target)),B=E.overlay?y.type==="add"?"overlayadd":"overlayremove":y.type==="add"?"baselayerchange":null;B&&this._map.fire(B,E)},_createRadioElement:function(y,E){var B='<input type="radio" class="leaflet-control-layers-selector" name="'+y+'"'+(E?' checked="checked"':"")+"/>",re=document.createElement("div");return re.innerHTML=B,re.firstChild},_addItem:function(y){var E=document.createElement("label"),B=this._map.hasLayer(y.layer),re;y.overlay?(re=document.createElement("input"),re.type="checkbox",re.className="leaflet-control-layers-selector",re.defaultChecked=B):re=this._createRadioElement("leaflet-base-layers_"+u(this),B),this._layerControlInputs.push(re),re.layerId=u(y.layer),Ft(re,"click",this._onInputClick,this);var fe=document.createElement("span");fe.innerHTML=" "+y.name;var Ee=document.createElement("span");E.appendChild(Ee),Ee.appendChild(re),Ee.appendChild(fe);var Fe=y.overlay?this._overlaysList:this._baseLayersList;return Fe.appendChild(E),this._checkDisabledLayers(),E},_onInputClick:function(){if(!this._preventClick){var y=this._layerControlInputs,E,B,re=[],fe=[];this._handlingClick=!0;for(var Ee=y.length-1;Ee>=0;Ee--)E=y[Ee],B=this._getLayer(E.layerId).layer,E.checked?re.push(B):E.checked||fe.push(B);for(Ee=0;Ee<fe.length;Ee++)this._map.hasLayer(fe[Ee])&&this._map.removeLayer(fe[Ee]);for(Ee=0;Ee<re.length;Ee++)this._map.hasLayer(re[Ee])||this._map.addLayer(re[Ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var y=this._layerControlInputs,E,B,re=this._map.getZoom(),fe=y.length-1;fe>=0;fe--)E=y[fe],B=this._getLayer(E.layerId).layer,E.disabled=B.options.minZoom!==void 0&&re<B.options.minZoom||B.options.maxZoom!==void 0&&re>B.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var y=this._section;this._preventClick=!0,Ft(y,"click",mi),this.expand();var E=this;setTimeout(function(){Zt(y,"click",mi),E._preventClick=!1})}}),Fn=function(y,E,B){return new Gl(y,E,B)},_o=ya.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(y){var E="leaflet-control-zoom",B=Jr("div",E+" leaflet-bar"),re=this.options;return this._zoomInButton=this._createButton(re.zoomInText,re.zoomInTitle,E+"-in",B,this._zoomIn),this._zoomOutButton=this._createButton(re.zoomOutText,re.zoomOutTitle,E+"-out",B,this._zoomOut),this._updateDisabled(),y.on("zoomend zoomlevelschange",this._updateDisabled,this),B},onRemove:function(y){y.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(y){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(y.shiftKey?3:1))},_zoomOut:function(y){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(y.shiftKey?3:1))},_createButton:function(y,E,B,re,fe){var Ee=Jr("a",B,re);return Ee.innerHTML=y,Ee.href="#",Ee.title=E,Ee.setAttribute("role","button"),Ee.setAttribute("aria-label",E),Xa(Ee),Ft(Ee,"click",Ks),Ft(Ee,"click",fe,this),Ft(Ee,"click",this._refocusOnMap,this),Ee},_updateDisabled:function(){var y=this._map,E="leaflet-disabled";Bn(this._zoomInButton,E),Bn(this._zoomOutButton,E),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||y._zoom===y.getMinZoom())&&(ir(this._zoomOutButton,E),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||y._zoom===y.getMaxZoom())&&(ir(this._zoomInButton,E),this._zoomInButton.setAttribute("aria-disabled","true"))}});mn.mergeOptions({zoomControl:!0}),mn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _o,this.addControl(this.zoomControl))});var To=function(y){return new _o(y)},Io=ya.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(y){var E="leaflet-control-scale",B=Jr("div",E),re=this.options;return this._addScales(re,E+"-line",B),y.on(re.updateWhenIdle?"moveend":"move",this._update,this),y.whenReady(this._update,this),B},onRemove:function(y){y.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(y,E,B){y.metric&&(this._mScale=Jr("div",E,B)),y.imperial&&(this._iScale=Jr("div",E,B))},_update:function(){var y=this._map,E=y.getSize().y/2,B=y.distance(y.containerPointToLatLng([0,E]),y.containerPointToLatLng([this.options.maxWidth,E]));this._updateScales(B)},_updateScales:function(y){this.options.metric&&y&&this._updateMetric(y),this.options.imperial&&y&&this._updateImperial(y)},_updateMetric:function(y){var E=this._getRoundNum(y),B=E<1e3?E+" m":E/1e3+" km";this._updateScale(this._mScale,B,E/y)},_updateImperial:function(y){var E=y*3.2808399,B,re,fe;E>5280?(B=E/5280,re=this._getRoundNum(B),this._updateScale(this._iScale,re+" mi",re/B)):(fe=this._getRoundNum(E),this._updateScale(this._iScale,fe+" ft",fe/E))},_updateScale:function(y,E,B){y.style.width=Math.round(this.options.maxWidth*B)+"px",y.innerHTML=E},_getRoundNum:function(y){var E=Math.pow(10,(Math.floor(y)+"").length-1),B=y/E;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:1,E*B}}),Rl=function(y){return new Io(y)},pt='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ee=ya.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($t.inlineSvg?pt+" ":"")+"Leaflet</a>"},initialize:function(y){C(this,y),this._attributions={}},onAdd:function(y){y.attributionControl=this,this._container=Jr("div","leaflet-control-attribution"),Xa(this._container);for(var E in y._layers)y._layers[E].getAttribution&&this.addAttribution(y._layers[E].getAttribution());return this._update(),y.on("layeradd",this._addAttribution,this),this._container},onRemove:function(y){y.off("layeradd",this._addAttribution,this)},_addAttribution:function(y){y.layer.getAttribution&&(this.addAttribution(y.layer.getAttribution()),y.layer.once("remove",function(){this.removeAttribution(y.layer.getAttribution())},this))},setPrefix:function(y){return this.options.prefix=y,this._update(),this},addAttribution:function(y){return y?(this._attributions[y]||(this._attributions[y]=0),this._attributions[y]++,this._update(),this):this},removeAttribution:function(y){return y?(this._attributions[y]&&(this._attributions[y]--,this._update()),this):this},_update:function(){if(this._map){var y=[];for(var E in this._attributions)this._attributions[E]&&y.push(E);var B=[];this.options.prefix&&B.push(this.options.prefix),y.length&&B.push(y.join(", ")),this._container.innerHTML=B.join(' <span aria-hidden="true">|</span> ')}}});mn.mergeOptions({attributionControl:!0}),mn.addInitHook(function(){this.options.attributionControl&&new ee().addTo(this)});var we=function(y){return new ee(y)};ya.Layers=Gl,ya.Zoom=_o,ya.Scale=Io,ya.Attribution=ee,ao.layers=Fn,ao.zoom=To,ao.scale=Rl,ao.attribution=we;var Re=me.extend({initialize:function(y){this._map=y},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Re.addTo=function(y,E){return y.addHandler(E,this),this};var We={Events:Q},et=$t.touch?"touchstart mousedown":"mousedown",Ct=de.extend({options:{clickTolerance:3},initialize:function(y,E,B,re){C(this,re),this._element=y,this._dragStartTarget=E||y,this._preventOutline=B},enable:function(){this._enabled||(Ft(this._dragStartTarget,et,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ct._dragging===this&&this.finishDrag(!0),Zt(this._dragStartTarget,et,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(y){if(this._enabled&&(this._moved=!1,!Ao(this._element,"leaflet-zoom-anim"))){if(y.touches&&y.touches.length!==1){Ct._dragging===this&&this.finishDrag();return}if(!(Ct._dragging||y.shiftKey||y.which!==1&&y.button!==1&&!y.touches)&&(Ct._dragging=this,this._preventOutline&&Oa(this._element),Cr(),la(),!this._moving)){this.fire("down");var E=y.touches?y.touches[0]:y,B=Eo(this._element);this._startPoint=new le(E.clientX,E.clientY),this._startPos=ri(this._element),this._parentScale=Pl(B);var re=y.type==="mousedown";Ft(document,re?"mousemove":"touchmove",this._onMove,this),Ft(document,re?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(y){if(this._enabled){if(y.touches&&y.touches.length>1){this._moved=!0;return}var E=y.touches&&y.touches.length===1?y.touches[0]:y,B=new le(E.clientX,E.clientY)._subtract(this._startPoint);!B.x&&!B.y||Math.abs(B.x)+Math.abs(B.y)<this.options.clickTolerance||(B.x/=this._parentScale.x,B.y/=this._parentScale.y,mi(y),this._moved||(this.fire("dragstart"),this._moved=!0,ir(document.body,"leaflet-dragging"),this._lastTarget=y.target||y.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ir(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(B),this._moving=!0,this._lastEvent=y,this._updatePosition())}},_updatePosition:function(){var y={originalEvent:this._lastEvent};this.fire("predrag",y),Ht(this._element,this._newPos),this.fire("drag",y)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(y){Bn(document.body,"leaflet-dragging"),this._lastTarget&&(Bn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Zt(document,"mousemove touchmove",this._onMove,this),Zt(document,"mouseup touchend touchcancel",this._onUp,this),Jn(),Ps();var E=this._moved&&this._moving;this._moving=!1,Ct._dragging=!1,E&&this.fire("dragend",{noInertia:y,distance:this._newPos.distanceTo(this._startPos)})}});function Lt(y,E,B){var re,fe=[1,4,2,8],Ee,Fe,tt,mt,kt,Kt,br,Cn;for(Ee=0,Kt=y.length;Ee<Kt;Ee++)y[Ee]._code=ts(y[Ee],E);for(tt=0;tt<4;tt++){for(br=fe[tt],re=[],Ee=0,Kt=y.length,Fe=Kt-1;Ee<Kt;Fe=Ee++)mt=y[Ee],kt=y[Fe],mt._code&br?kt._code&br||(Cn=es(kt,mt,br,E,B),Cn._code=ts(Cn,E),re.push(Cn)):(kt._code&br&&(Cn=es(kt,mt,br,E,B),Cn._code=ts(Cn,E),re.push(Cn)),re.push(mt));y=re}return y}function ar(y,E){var B,re,fe,Ee,Fe,tt,mt,kt,Kt;if(!y||y.length===0)throw new Error("latlngs not passed");Da(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var br=ge([0,0]),Cn=H(y),Bs=Cn.getNorthWest().distanceTo(Cn.getSouthWest())*Cn.getNorthEast().distanceTo(Cn.getNorthWest());Bs<1700&&(br=Gt(y));var va=y.length,il=[];for(B=0;B<va;B++){var ni=ge(y[B]);il.push(E.project(ge([ni.lat-br.lat,ni.lng-br.lng])))}for(tt=mt=kt=0,B=0,re=va-1;B<va;re=B++)fe=il[B],Ee=il[re],Fe=fe.y*Ee.x-Ee.y*fe.x,mt+=(fe.x+Ee.x)*Fe,kt+=(fe.y+Ee.y)*Fe,tt+=Fe*3;tt===0?Kt=il[0]:Kt=[mt/tt,kt/tt];var ii=E.unproject(Se(Kt));return ge([ii.lat+br.lat,ii.lng+br.lng])}function Gt(y){for(var E=0,B=0,re=0,fe=0;fe<y.length;fe++){var Ee=ge(y[fe]);E+=Ee.lat,B+=Ee.lng,re++}return ge([E/re,B/re])}var Ur={__proto__:null,clipPolygon:Lt,polygonCenter:ar,centroid:Gt};function lr(y,E){if(!E||!y.length)return y.slice();var B=E*E;return y=xa(y,B),y=Zr(y,B),y}function Sn(y,E,B){return Math.sqrt(Zo(y,E,B,!0))}function ei(y,E,B){return Zo(y,E,B)}function Zr(y,E){var B=y.length,re=typeof Uint8Array<"u"?Uint8Array:Array,fe=new re(B);fe[0]=fe[B-1]=1,Xt(y,fe,E,0,B-1);var Ee,Fe=[];for(Ee=0;Ee<B;Ee++)fe[Ee]&&Fe.push(y[Ee]);return Fe}function Xt(y,E,B,re,fe){var Ee=0,Fe,tt,mt;for(tt=re+1;tt<=fe-1;tt++)mt=Zo(y[tt],y[re],y[fe],!0),mt>Ee&&(Fe=tt,Ee=mt);Ee>B&&(E[Fe]=1,Xt(y,E,B,re,Fe),Xt(y,E,B,Fe,fe))}function xa(y,E){for(var B=[y[0]],re=1,fe=0,Ee=y.length;re<Ee;re++)ka(y[re],y[fe])>E&&(B.push(y[re]),fe=re);return fe<Ee-1&&B.push(y[Ee-1]),B}var rn;function Ei(y,E,B,re,fe){var Ee=re?rn:ts(y,B),Fe=ts(E,B),tt,mt,kt;for(rn=Fe;;){if(!(Ee|Fe))return[y,E];if(Ee&Fe)return!1;tt=Ee||Fe,mt=es(y,E,tt,B,fe),kt=ts(mt,B),tt===Ee?(y=mt,Ee=kt):(E=mt,Fe=kt)}}function es(y,E,B,re,fe){var Ee=E.x-y.x,Fe=E.y-y.y,tt=re.min,mt=re.max,kt,Kt;return B&8?(kt=y.x+Ee*(mt.y-y.y)/Fe,Kt=mt.y):B&4?(kt=y.x+Ee*(tt.y-y.y)/Fe,Kt=tt.y):B&2?(kt=mt.x,Kt=y.y+Fe*(mt.x-y.x)/Ee):B&1&&(kt=tt.x,Kt=y.y+Fe*(tt.x-y.x)/Ee),new le(kt,Kt,fe)}function ts(y,E){var B=0;return y.x<E.min.x?B|=1:y.x>E.max.x&&(B|=2),y.y<E.min.y?B|=4:y.y>E.max.y&&(B|=8),B}function ka(y,E){var B=E.x-y.x,re=E.y-y.y;return B*B+re*re}function Zo(y,E,B,re){var fe=E.x,Ee=E.y,Fe=B.x-fe,tt=B.y-Ee,mt=Fe*Fe+tt*tt,kt;return mt>0&&(kt=((y.x-fe)*Fe+(y.y-Ee)*tt)/mt,kt>1?(fe=B.x,Ee=B.y):kt>0&&(fe+=Fe*kt,Ee+=tt*kt)),Fe=y.x-fe,tt=y.y-Ee,re?Fe*Fe+tt*tt:new le(fe,Ee)}function Da(y){return!D(y[0])||typeof y[0][0]!="object"&&typeof y[0][0]<"u"}function so(y){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Da(y)}function oo(y,E){var B,re,fe,Ee,Fe,tt,mt,kt;if(!y||y.length===0)throw new Error("latlngs not passed");Da(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var Kt=ge([0,0]),br=H(y),Cn=br.getNorthWest().distanceTo(br.getSouthWest())*br.getNorthEast().distanceTo(br.getNorthWest());Cn<1700&&(Kt=Gt(y));var Bs=y.length,va=[];for(B=0;B<Bs;B++){var il=ge(y[B]);va.push(E.project(ge([il.lat-Kt.lat,il.lng-Kt.lng])))}for(B=0,re=0;B<Bs-1;B++)re+=va[B].distanceTo(va[B+1])/2;if(re===0)kt=va[0];else for(B=0,Ee=0;B<Bs-1;B++)if(Fe=va[B],tt=va[B+1],fe=Fe.distanceTo(tt),Ee+=fe,Ee>re){mt=(Ee-re)/fe,kt=[tt.x-mt*(tt.x-Fe.x),tt.y-mt*(tt.y-Fe.y)];break}var ni=E.unproject(Se(kt));return ge([ni.lat+Kt.lat,ni.lng+Kt.lng])}var Kl={__proto__:null,simplify:lr,pointToSegmentDistance:Sn,closestPointOnSegment:ei,clipSegment:Ei,_getEdgeIntersection:es,_getBitCode:ts,_sqClosestPointOnSegment:Zo,isFlat:Da,_flat:so,polylineCenter:oo},Xo={project:function(y){return new le(y.lng,y.lat)},unproject:function(y){return new oe(y.y,y.x)},bounds:new $([-180,-90],[180,90])},wi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(y){var E=Math.PI/180,B=this.R,re=y.lat*E,fe=this.R_MINOR/B,Ee=Math.sqrt(1-fe*fe),Fe=Ee*Math.sin(re),tt=Math.tan(Math.PI/4-re/2)/Math.pow((1-Fe)/(1+Fe),Ee/2);return re=-B*Math.log(Math.max(tt,1e-10)),new le(y.lng*E*B,re)},unproject:function(y){for(var E=180/Math.PI,B=this.R,re=this.R_MINOR/B,fe=Math.sqrt(1-re*re),Ee=Math.exp(-y.y/B),Fe=Math.PI/2-2*Math.atan(Ee),tt=0,mt=.1,kt;tt<15&&Math.abs(mt)>1e-7;tt++)kt=fe*Math.sin(Fe),kt=Math.pow((1-kt)/(1+kt),fe/2),mt=Math.PI/2-2*Math.atan(Ee*kt)-Fe,Fe+=mt;return new oe(Fe*E,y.x*E/B)}},pl={__proto__:null,LonLat:Xo,Mercator:wi,SphericalMercator:He},Ql=a({},Le,{code:"EPSG:3395",projection:wi,transformation:(function(){var y=.5/(Math.PI*wi.R);return Qe(y,.5,-y,.5)})()}),Jo=a({},Le,{code:"EPSG:4326",projection:Xo,transformation:Qe(1/180,1,-1/180,.5)}),gl=a({},be,{projection:Xo,transformation:Qe(1,0,-1,0),scale:function(y){return Math.pow(2,y)},zoom:function(y){return Math.log(y)/Math.LN2},distance:function(y,E){var B=E.lng-y.lng,re=E.lat-y.lat;return Math.sqrt(B*B+re*re)},infinite:!0});be.Earth=Le,be.EPSG3395=Ql,be.EPSG3857=vt,be.EPSG900913=Pt,be.EPSG4326=Jo,be.Simple=gl;var qn=de.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(y){return y.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(y){return y&&y.removeLayer(this),this},getPane:function(y){return this._map.getPane(y?this.options[y]||y:this.options.pane)},addInteractiveTarget:function(y){return this._map._targets[u(y)]=this,this},removeInteractiveTarget:function(y){return delete this._map._targets[u(y)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(y){var E=y.target;if(E.hasLayer(this)){if(this._map=E,this._zoomAnimated=E._zoomAnimated,this.getEvents){var B=this.getEvents();E.on(B,this),this.once("remove",function(){E.off(B,this)},this)}this.onAdd(E),this.fire("add"),E.fire("layeradd",{layer:this})}}});mn.include({addLayer:function(y){if(!y._layerAdd)throw new Error("The provided object is not a Layer.");var E=u(y);return this._layers[E]?this:(this._layers[E]=y,y._mapToAdd=this,y.beforeAdd&&y.beforeAdd(this),this.whenReady(y._layerAdd,y),this)},removeLayer:function(y){var E=u(y);return this._layers[E]?(this._loaded&&y.onRemove(this),delete this._layers[E],this._loaded&&(this.fire("layerremove",{layer:y}),y.fire("remove")),y._map=y._mapToAdd=null,this):this},hasLayer:function(y){return u(y)in this._layers},eachLayer:function(y,E){for(var B in this._layers)y.call(E,this._layers[B]);return this},_addLayers:function(y){y=y?D(y)?y:[y]:[];for(var E=0,B=y.length;E<B;E++)this.addLayer(y[E])},_addZoomLimit:function(y){(!isNaN(y.options.maxZoom)||!isNaN(y.options.minZoom))&&(this._zoomBoundLayers[u(y)]=y,this._updateZoomLevels())},_removeZoomLimit:function(y){var E=u(y);this._zoomBoundLayers[E]&&(delete this._zoomBoundLayers[E],this._updateZoomLevels())},_updateZoomLevels:function(){var y=1/0,E=-1/0,B=this._getZoomSpan();for(var re in this._zoomBoundLayers){var fe=this._zoomBoundLayers[re].options;y=fe.minZoom===void 0?y:Math.min(y,fe.minZoom),E=fe.maxZoom===void 0?E:Math.max(E,fe.maxZoom)}this._layersMaxZoom=E===-1/0?void 0:E,this._layersMinZoom=y===1/0?void 0:y,B!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rs=qn.extend({initialize:function(y,E){C(this,E),this._layers={};var B,re;if(y)for(B=0,re=y.length;B<re;B++)this.addLayer(y[B])},addLayer:function(y){var E=this.getLayerId(y);return this._layers[E]=y,this._map&&this._map.addLayer(y),this},removeLayer:function(y){var E=y in this._layers?y:this.getLayerId(y);return this._map&&this._layers[E]&&this._map.removeLayer(this._layers[E]),delete this._layers[E],this},hasLayer:function(y){var E=typeof y=="number"?y:this.getLayerId(y);return E in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(y){var E=Array.prototype.slice.call(arguments,1),B,re;for(B in this._layers)re=this._layers[B],re[y]&&re[y].apply(re,E);return this},onAdd:function(y){this.eachLayer(y.addLayer,y)},onRemove:function(y){this.eachLayer(y.removeLayer,y)},eachLayer:function(y,E){for(var B in this._layers)y.call(E,this._layers[B]);return this},getLayer:function(y){return this._layers[y]},getLayers:function(){var y=[];return this.eachLayer(y.push,y),y},setZIndex:function(y){return this.invoke("setZIndex",y)},getLayerId:function(y){return u(y)}}),ns=function(y,E){return new rs(y,E)},Qs=rs.extend({addLayer:function(y){return this.hasLayer(y)?this:(y.addEventParent(this),rs.prototype.addLayer.call(this,y),this.fire("layeradd",{layer:y}))},removeLayer:function(y){return this.hasLayer(y)?(y in this._layers&&(y=this._layers[y]),y.removeEventParent(this),rs.prototype.removeLayer.call(this,y),this.fire("layerremove",{layer:y})):this},setStyle:function(y){return this.invoke("setStyle",y)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var y=new se;for(var E in this._layers){var B=this._layers[E];y.extend(B.getBounds?B.getBounds():B.getLatLng())}return y}}),Fi=function(y,E){return new Qs(y,E)},ps=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(y){C(this,y)},createIcon:function(y){return this._createIcon("icon",y)},createShadow:function(y){return this._createIcon("shadow",y)},_createIcon:function(y,E){var B=this._getIconUrl(y);if(!B){if(y==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var re=this._createImg(B,E&&E.tagName==="IMG"?E:null);return this._setIconStyles(re,y),(this.options.crossOrigin||this.options.crossOrigin==="")&&(re.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),re},_setIconStyles:function(y,E){var B=this.options,re=B[E+"Size"];typeof re=="number"&&(re=[re,re]);var fe=Se(re),Ee=Se(E==="shadow"&&B.shadowAnchor||B.iconAnchor||fe&&fe.divideBy(2,!0));y.className="leaflet-marker-"+E+" "+(B.className||""),Ee&&(y.style.marginLeft=-Ee.x+"px",y.style.marginTop=-Ee.y+"px"),fe&&(y.style.width=fe.x+"px",y.style.height=fe.y+"px")},_createImg:function(y,E){return E=E||document.createElement("img"),E.src=y,E},_getIconUrl:function(y){return $t.retina&&this.options[y+"RetinaUrl"]||this.options[y+"Url"]}});function el(y){return new ps(y)}var Ml=ps.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(y){return typeof Ml.imagePath!="string"&&(Ml.imagePath=this._detectIconPath()),(this.options.imagePath||Ml.imagePath)+ps.prototype._getIconUrl.call(this,y)},_stripUrl:function(y){var E=function(B,re,fe){var Ee=re.exec(B);return Ee&&Ee[fe]};return y=E(y,/^url\((['"])?(.+)\1\)$/,2),y&&E(y,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var y=Jr("div","leaflet-default-icon-path",document.body),E=on(y,"background-image")||on(y,"backgroundImage");if(document.body.removeChild(y),E=this._stripUrl(E),E)return E;var B=document.querySelector('link[href$="leaflet.css"]');return B?B.href.substring(0,B.href.length-11-1):""}}),lo=Re.extend({initialize:function(y){this._marker=y},addHooks:function(){var y=this._marker._icon;this._draggable||(this._draggable=new Ct(y,y,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ir(y,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Bn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(y){var E=this._marker,B=E._map,re=this._marker.options.autoPanSpeed,fe=this._marker.options.autoPanPadding,Ee=ri(E._icon),Fe=B.getPixelBounds(),tt=B.getPixelOrigin(),mt=X(Fe.min._subtract(tt).add(fe),Fe.max._subtract(tt).subtract(fe));if(!mt.contains(Ee)){var kt=Se((Math.max(mt.max.x,Ee.x)-mt.max.x)/(Fe.max.x-mt.max.x)-(Math.min(mt.min.x,Ee.x)-mt.min.x)/(Fe.min.x-mt.min.x),(Math.max(mt.max.y,Ee.y)-mt.max.y)/(Fe.max.y-mt.max.y)-(Math.min(mt.min.y,Ee.y)-mt.min.y)/(Fe.min.y-mt.min.y)).multiplyBy(re);B.panBy(kt,{animate:!1}),this._draggable._newPos._add(kt),this._draggable._startPos._add(kt),Ht(E._icon,this._draggable._newPos),this._onDrag(y),this._panRequest=ne(this._adjustPan.bind(this,y))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(y){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,y)))},_onDrag:function(y){var E=this._marker,B=E._shadow,re=ri(E._icon),fe=E._map.layerPointToLatLng(re);B&&Ht(B,re),E._latlng=fe,y.latlng=fe,y.oldLatLng=this._oldLatLng,E.fire("move",y).fire("drag",y)},_onDragEnd:function(y){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",y)}}),da=qn.extend({options:{icon:new Ml,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(y,E){C(this,E),this._latlng=ge(y)},onAdd:function(y){this._zoomAnimated=this._zoomAnimated&&y.options.markerZoomAnimation,this._zoomAnimated&&y.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(y){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&y.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(y){var E=this._latlng;return this._latlng=ge(y),this.update(),this.fire("move",{oldLatLng:E,latlng:this._latlng})},setZIndexOffset:function(y){return this.options.zIndexOffset=y,this.update()},getIcon:function(){return this.options.icon},setIcon:function(y){return this.options.icon=y,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var y=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(y)}return this},_initIcon:function(){var y=this.options,E="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),B=y.icon.createIcon(this._icon),re=!1;B!==this._icon&&(this._icon&&this._removeIcon(),re=!0,y.title&&(B.title=y.title),B.tagName==="IMG"&&(B.alt=y.alt||"")),ir(B,E),y.keyboard&&(B.tabIndex="0",B.setAttribute("role","button")),this._icon=B,y.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(B,"focus",this._panOnFocus,this);var fe=y.icon.createShadow(this._shadow),Ee=!1;fe!==this._shadow&&(this._removeShadow(),Ee=!0),fe&&(ir(fe,E),fe.alt=""),this._shadow=fe,y.opacity<1&&this._updateOpacity(),re&&this.getPane().appendChild(this._icon),this._initInteraction(),fe&&Ee&&this.getPane(y.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(this._icon,"focus",this._panOnFocus,this),Rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rn(this._shadow),this._shadow=null},_setPos:function(y){this._icon&&Ht(this._icon,y),this._shadow&&Ht(this._shadow,y),this._zIndex=y.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(y){this._icon&&(this._icon.style.zIndex=this._zIndex+y)},_animateZoom:function(y){var E=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center).round();this._setPos(E)},_initInteraction:function(){if(this.options.interactive&&(ir(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),lo)){var y=this.options.draggable;this.dragging&&(y=this.dragging.enabled(),this.dragging.disable()),this.dragging=new lo(this),y&&this.dragging.enable()}},setOpacity:function(y){return this.options.opacity=y,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var y=this.options.opacity;this._icon&&Or(this._icon,y),this._shadow&&Or(this._shadow,y)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var y=this._map;if(y){var E=this.options.icon.options,B=E.iconSize?Se(E.iconSize):Se(0,0),re=E.iconAnchor?Se(E.iconAnchor):Se(0,0);y.panInside(this._latlng,{paddingTopLeft:re,paddingBottomRight:B.subtract(re)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ys(y,E){return new da(y,E)}var _i=qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(y){this._renderer=y.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(y){return C(this,y),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&y&&Object.prototype.hasOwnProperty.call(y,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),is=_i.extend({options:{fill:!0,radius:10},initialize:function(y,E){C(this,E),this._latlng=ge(y),this._radius=this.options.radius},setLatLng:function(y){var E=this._latlng;return this._latlng=ge(y),this.redraw(),this.fire("move",{oldLatLng:E,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(y){return this.options.radius=this._radius=y,this.redraw()},getRadius:function(){return this._radius},setStyle:function(y){var E=y&&y.radius||this._radius;return _i.prototype.setStyle.call(this,y),this.setRadius(E),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var y=this._radius,E=this._radiusY||y,B=this._clickTolerance(),re=[y+B,E+B];this._pxBounds=new $(this._point.subtract(re),this._point.add(re))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(y){return y.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ln(y,E){return new is(y,E)}var Zs=is.extend({initialize:function(y,E,B){if(typeof E=="number"&&(E=a({},B,{radius:E})),C(this,E),this._latlng=ge(y),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(y){return this._mRadius=y,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var y=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(y)),this._map.layerPointToLatLng(this._point.add(y)))},setStyle:_i.prototype.setStyle,_project:function(){var y=this._latlng.lng,E=this._latlng.lat,B=this._map,re=B.options.crs;if(re.distance===Le.distance){var fe=Math.PI/180,Ee=this._mRadius/Le.R/fe,Fe=B.project([E+Ee,y]),tt=B.project([E-Ee,y]),mt=Fe.add(tt).divideBy(2),kt=B.unproject(mt).lat,Kt=Math.acos((Math.cos(Ee*fe)-Math.sin(E*fe)*Math.sin(kt*fe))/(Math.cos(E*fe)*Math.cos(kt*fe)))/fe;(isNaN(Kt)||Kt===0)&&(Kt=Ee/Math.cos(Math.PI/180*E)),this._point=mt.subtract(B.getPixelOrigin()),this._radius=isNaN(Kt)?0:mt.x-B.project([kt,y-Kt]).x,this._radiusY=mt.y-Fe.y}else{var br=re.unproject(re.project(this._latlng).subtract([this._mRadius,0]));this._point=B.latLngToLayerPoint(this._latlng),this._radius=this._point.x-B.latLngToLayerPoint(br).x}this._updateBounds()}});function je(y,E,B){return new Zs(y,E,B)}var h=_i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(y,E){C(this,E),this._setLatLngs(y)},getLatLngs:function(){return this._latlngs},setLatLngs:function(y){return this._setLatLngs(y),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(y){for(var E=1/0,B=null,re=Zo,fe,Ee,Fe=0,tt=this._parts.length;Fe<tt;Fe++)for(var mt=this._parts[Fe],kt=1,Kt=mt.length;kt<Kt;kt++){fe=mt[kt-1],Ee=mt[kt];var br=re(y,fe,Ee,!0);br<E&&(E=br,B=re(y,fe,Ee))}return B&&(B.distance=Math.sqrt(E)),B},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(y,E){return E=E||this._defaultShape(),y=ge(y),E.push(y),this._bounds.extend(y),this.redraw()},_setLatLngs:function(y){this._bounds=new se,this._latlngs=this._convertLatLngs(y)},_defaultShape:function(){return Da(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(y){for(var E=[],B=Da(y),re=0,fe=y.length;re<fe;re++)B?(E[re]=ge(y[re]),this._bounds.extend(E[re])):E[re]=this._convertLatLngs(y[re]);return E},_project:function(){var y=new $;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,y),this._bounds.isValid()&&y.isValid()&&(this._rawPxBounds=y,this._updateBounds())},_updateBounds:function(){var y=this._clickTolerance(),E=new le(y,y);this._rawPxBounds&&(this._pxBounds=new $([this._rawPxBounds.min.subtract(E),this._rawPxBounds.max.add(E)]))},_projectLatlngs:function(y,E,B){var re=y[0]instanceof oe,fe=y.length,Ee,Fe;if(re){for(Fe=[],Ee=0;Ee<fe;Ee++)Fe[Ee]=this._map.latLngToLayerPoint(y[Ee]),B.extend(Fe[Ee]);E.push(Fe)}else for(Ee=0;Ee<fe;Ee++)this._projectLatlngs(y[Ee],E,B)},_clipPoints:function(){var y=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}var E=this._parts,B,re,fe,Ee,Fe,tt,mt;for(B=0,fe=0,Ee=this._rings.length;B<Ee;B++)for(mt=this._rings[B],re=0,Fe=mt.length;re<Fe-1;re++)tt=Ei(mt[re],mt[re+1],y,re,!0),tt&&(E[fe]=E[fe]||[],E[fe].push(tt[0]),(tt[1]!==mt[re+1]||re===Fe-2)&&(E[fe].push(tt[1]),fe++))}},_simplifyPoints:function(){for(var y=this._parts,E=this.options.smoothFactor,B=0,re=y.length;B<re;B++)y[B]=lr(y[B],E)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(y,E){var B,re,fe,Ee,Fe,tt,mt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(B=0,Ee=this._parts.length;B<Ee;B++)for(tt=this._parts[B],re=0,Fe=tt.length,fe=Fe-1;re<Fe;fe=re++)if(!(!E&&re===0)&&Sn(y,tt[fe],tt[re])<=mt)return!0;return!1}});function g(y,E){return new h(y,E)}h._flat=so;var b=h.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ar(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(y){var E=h.prototype._convertLatLngs.call(this,y),B=E.length;return B>=2&&E[0]instanceof oe&&E[0].equals(E[B-1])&&E.pop(),E},_setLatLngs:function(y){h.prototype._setLatLngs.call(this,y),Da(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Da(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var y=this._renderer._bounds,E=this.options.weight,B=new le(E,E);if(y=new $(y.min.subtract(B),y.max.add(B)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}for(var re=0,fe=this._rings.length,Ee;re<fe;re++)Ee=Lt(this._rings[re],y,!0),Ee.length&&this._parts.push(Ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(y){var E=!1,B,re,fe,Ee,Fe,tt,mt,kt;if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(Ee=0,mt=this._parts.length;Ee<mt;Ee++)for(B=this._parts[Ee],Fe=0,kt=B.length,tt=kt-1;Fe<kt;tt=Fe++)re=B[Fe],fe=B[tt],re.y>y.y!=fe.y>y.y&&y.x<(fe.x-re.x)*(y.y-re.y)/(fe.y-re.y)+re.x&&(E=!E);return E||h.prototype._containsPoint.call(this,y,!0)}});function S(y,E){return new b(y,E)}var A=Qs.extend({initialize:function(y,E){C(this,E),this._layers={},y&&this.addData(y)},addData:function(y){var E=D(y)?y:y.features,B,re,fe;if(E){for(B=0,re=E.length;B<re;B++)fe=E[B],(fe.geometries||fe.geometry||fe.features||fe.coordinates)&&this.addData(fe);return this}var Ee=this.options;if(Ee.filter&&!Ee.filter(y))return this;var Fe=I(y,Ee);return Fe?(Fe.feature=Me(y),Fe.defaultOptions=Fe.options,this.resetStyle(Fe),Ee.onEachFeature&&Ee.onEachFeature(y,Fe),this.addLayer(Fe)):this},resetStyle:function(y){return y===void 0?this.eachLayer(this.resetStyle,this):(y.options=a({},y.defaultOptions),this._setLayerStyle(y,this.options.style),this)},setStyle:function(y){return this.eachLayer(function(E){this._setLayerStyle(E,y)},this)},_setLayerStyle:function(y,E){y.setStyle&&(typeof E=="function"&&(E=E(y.feature)),y.setStyle(E))}});function I(y,E){var B=y.type==="Feature"?y.geometry:y,re=B?B.coordinates:null,fe=[],Ee=E&&E.pointToLayer,Fe=E&&E.coordsToLatLng||V,tt,mt,kt,Kt;if(!re&&!B)return null;switch(B.type){case"Point":return tt=Fe(re),R(Ee,y,tt,E);case"MultiPoint":for(kt=0,Kt=re.length;kt<Kt;kt++)tt=Fe(re[kt]),fe.push(R(Ee,y,tt,E));return new Qs(fe);case"LineString":case"MultiLineString":return mt=te(re,B.type==="LineString"?0:1,Fe),new h(mt,E);case"Polygon":case"MultiPolygon":return mt=te(re,B.type==="Polygon"?1:2,Fe),new b(mt,E);case"GeometryCollection":for(kt=0,Kt=B.geometries.length;kt<Kt;kt++){var br=I({geometry:B.geometries[kt],type:"Feature",properties:y.properties},E);br&&fe.push(br)}return new Qs(fe);case"FeatureCollection":for(kt=0,Kt=B.features.length;kt<Kt;kt++){var Cn=I(B.features[kt],E);Cn&&fe.push(Cn)}return new Qs(fe);default:throw new Error("Invalid GeoJSON object.")}}function R(y,E,B,re){return y?y(E,B):new da(B,re&&re.markersInheritOptions&&re)}function V(y){return new oe(y[1],y[0],y[2])}function te(y,E,B){for(var re=[],fe=0,Ee=y.length,Fe;fe<Ee;fe++)Fe=E?te(y[fe],E-1,B):(B||V)(y[fe]),re.push(Fe);return re}function ue(y,E){return y=ge(y),y.alt!==void 0?[x(y.lng,E),x(y.lat,E),x(y.alt,E)]:[x(y.lng,E),x(y.lat,E)]}function ve(y,E,B,re){for(var fe=[],Ee=0,Fe=y.length;Ee<Fe;Ee++)fe.push(E?ve(y[Ee],Da(y[Ee])?0:E-1,B,re):ue(y[Ee],re));return!E&&B&&fe.length>0&&fe.push(fe[0].slice()),fe}function Ne(y,E){return y.feature?a({},y.feature,{geometry:E}):Me(E)}function Me(y){return y.type==="Feature"||y.type==="FeatureCollection"?y:{type:"Feature",properties:{},geometry:y}}var qe={toGeoJSON:function(y){return Ne(this,{type:"Point",coordinates:ue(this.getLatLng(),y)})}};da.include(qe),Zs.include(qe),is.include(qe),h.include({toGeoJSON:function(y){var E=!Da(this._latlngs),B=ve(this._latlngs,E?1:0,!1,y);return Ne(this,{type:(E?"Multi":"")+"LineString",coordinates:B})}}),b.include({toGeoJSON:function(y){var E=!Da(this._latlngs),B=E&&!Da(this._latlngs[0]),re=ve(this._latlngs,B?2:E?1:0,!0,y);return E||(re=[re]),Ne(this,{type:(B?"Multi":"")+"Polygon",coordinates:re})}}),rs.include({toMultiPoint:function(y){var E=[];return this.eachLayer(function(B){E.push(B.toGeoJSON(y).geometry.coordinates)}),Ne(this,{type:"MultiPoint",coordinates:E})},toGeoJSON:function(y){var E=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(E==="MultiPoint")return this.toMultiPoint(y);var B=E==="GeometryCollection",re=[];return this.eachLayer(function(fe){if(fe.toGeoJSON){var Ee=fe.toGeoJSON(y);if(B)re.push(Ee.geometry);else{var Fe=Me(Ee);Fe.type==="FeatureCollection"?re.push.apply(re,Fe.features):re.push(Fe)}}}),B?Ne(this,{geometries:re,type:"GeometryCollection"}):{type:"FeatureCollection",features:re}}});function $e(y,E){return new A(y,E)}var Xe=$e,ct=qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(y,E,B){this._url=y,this._bounds=H(E),C(this,B)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ir(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(y){return this.options.opacity=y,this._image&&this._updateOpacity(),this},setStyle:function(y){return y.opacity&&this.setOpacity(y.opacity),this},bringToFront:function(){return this._map&&Mr(this._image),this},bringToBack:function(){return this._map&&Qa(this._image),this},setUrl:function(y){return this._url=y,this._image&&(this._image.src=y),this},setBounds:function(y){return this._bounds=H(y),this._map&&this._reset(),this},getEvents:function(){var y={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var y=this._url.tagName==="IMG",E=this._image=y?this._url:Jr("img");if(ir(E,"leaflet-image-layer"),this._zoomAnimated&&ir(E,"leaflet-zoom-animated"),this.options.className&&ir(E,this.options.className),E.onselectstart=p,E.onmousemove=p,E.onload=o(this.fire,this,"load"),E.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),y){this._url=E.src;return}E.src=this._url,E.alt=this.options.alt},_animateZoom:function(y){var E=this._map.getZoomScale(y.zoom),B=this._map._latLngBoundsToNewLayerBounds(this._bounds,y.zoom,y.center).min;Pe(this._image,B,E)},_reset:function(){var y=this._image,E=new $(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),B=E.getSize();Ht(y,E.min),y.style.width=B.x+"px",y.style.height=B.y+"px"},_updateOpacity:function(){Or(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var y=this.options.errorOverlayUrl;y&&this._url!==y&&(this._url=y,this._image.src=y)},getCenter:function(){return this._bounds.getCenter()}}),Tt=function(y,E,B){return new ct(y,E,B)},_t=ct.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var y=this._url.tagName==="VIDEO",E=this._image=y?this._url:Jr("video");if(ir(E,"leaflet-image-layer"),this._zoomAnimated&&ir(E,"leaflet-zoom-animated"),this.options.className&&ir(E,this.options.className),E.onselectstart=p,E.onmousemove=p,E.onloadeddata=o(this.fire,this,"load"),y){for(var B=E.getElementsByTagName("source"),re=[],fe=0;fe<B.length;fe++)re.push(B[fe].src);this._url=B.length>0?re:[E.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(E.style,"objectFit")&&(E.style.objectFit="fill"),E.autoplay=!!this.options.autoplay,E.loop=!!this.options.loop,E.muted=!!this.options.muted,E.playsInline=!!this.options.playsInline;for(var Ee=0;Ee<this._url.length;Ee++){var Fe=Jr("source");Fe.src=this._url[Ee],E.appendChild(Fe)}}});function At(y,E,B){return new _t(y,E,B)}var Tr=ct.extend({_initImage:function(){var y=this._image=this._url;ir(y,"leaflet-image-layer"),this._zoomAnimated&&ir(y,"leaflet-zoom-animated"),this.options.className&&ir(y,this.options.className),y.onselectstart=p,y.onmousemove=p}});function qr(y,E,B){return new Tr(y,E,B)}var Mn=qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(y,E){y&&(y instanceof oe||D(y))?(this._latlng=ge(y),C(this,E)):(C(this,y),this._source=E),this.options.content&&(this._content=this.options.content)},openOn:function(y){return y=arguments.length?y:this._source._map,y.hasLayer(this)||y.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(y){return this._map?this.close():(arguments.length?this._source=y:y=this._source,this._prepareOpen(),this.openOn(y._map)),this},onAdd:function(y){this._zoomAnimated=y._zoomAnimated,this._container||this._initLayout(),y._fadeAnimated&&Or(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),y._fadeAnimated&&Or(this._container,1),this.bringToFront(),this.options.interactive&&(ir(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(y){y._fadeAnimated?(Or(this._container,0),this._removeTimeout=setTimeout(o(Rn,void 0,this._container),200)):Rn(this._container),this.options.interactive&&(Bn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(y){return this._latlng=ge(y),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(y){return this._content=y,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var y={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Mr(this._container),this},bringToBack:function(){return this._map&&Qa(this._container),this},_prepareOpen:function(y){var E=this._source;if(!E._map)return!1;if(E instanceof Qs){E=null;var B=this._source._layers;for(var re in B)if(B[re]._map){E=B[re];break}if(!E)return!1;this._source=E}if(!y)if(E.getCenter)y=E.getCenter();else if(E.getLatLng)y=E.getLatLng();else if(E.getBounds)y=E.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(y),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var y=this._contentNode,E=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof E=="string")y.innerHTML=E;else{for(;y.hasChildNodes();)y.removeChild(y.firstChild);y.appendChild(E)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var y=this._map.latLngToLayerPoint(this._latlng),E=Se(this.options.offset),B=this._getAnchor();this._zoomAnimated?Ht(this._container,y.add(B)):E=E.add(y).add(B);var re=this._containerBottom=-E.y,fe=this._containerLeft=-Math.round(this._containerWidth/2)+E.x;this._container.style.bottom=re+"px",this._container.style.left=fe+"px"}},_getAnchor:function(){return[0,0]}});mn.include({_initOverlay:function(y,E,B,re){var fe=E;return fe instanceof y||(fe=new y(re).setContent(E)),B&&fe.setLatLng(B),fe}}),qn.include({_initOverlay:function(y,E,B,re){var fe=B;return fe instanceof y?(C(fe,re),fe._source=this):(fe=E&&!re?E:new y(re,this),fe.setContent(B)),fe}});var ua=Mn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(y){return y=arguments.length?y:this._source._map,!y.hasLayer(this)&&y._popup&&y._popup.options.autoClose&&y.removeLayer(y._popup),y._popup=this,Mn.prototype.openOn.call(this,y)},onAdd:function(y){Mn.prototype.onAdd.call(this,y),y.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _i||this._source.on("preclick",Rs))},onRemove:function(y){Mn.prototype.onRemove.call(this,y),y.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _i||this._source.off("preclick",Rs))},getEvents:function(){var y=Mn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(y.preclick=this.close),this.options.keepInView&&(y.moveend=this._adjustPan),y},_initLayout:function(){var y="leaflet-popup",E=this._container=Jr("div",y+" "+(this.options.className||"")+" leaflet-zoom-animated"),B=this._wrapper=Jr("div",y+"-content-wrapper",E);if(this._contentNode=Jr("div",y+"-content",B),Xa(E),fs(this._contentNode),Ft(E,"contextmenu",Rs),this._tipContainer=Jr("div",y+"-tip-container",E),this._tip=Jr("div",y+"-tip",this._tipContainer),this.options.closeButton){var re=this._closeButton=Jr("a",y+"-close-button",E);re.setAttribute("role","button"),re.setAttribute("aria-label","Close popup"),re.href="#close",re.innerHTML='<span aria-hidden="true">&#215;</span>',Ft(re,"click",function(fe){mi(fe),this.close()},this)}},_updateLayout:function(){var y=this._contentNode,E=y.style;E.width="",E.whiteSpace="nowrap";var B=y.offsetWidth;B=Math.min(B,this.options.maxWidth),B=Math.max(B,this.options.minWidth),E.width=B+1+"px",E.whiteSpace="",E.height="";var re=y.offsetHeight,fe=this.options.maxHeight,Ee="leaflet-popup-scrolled";fe&&re>fe?(E.height=fe+"px",ir(y,Ee)):Bn(y,Ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(y){var E=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center),B=this._getAnchor();Ht(this._container,E.add(B))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var y=this._map,E=parseInt(on(this._container,"marginBottom"),10)||0,B=this._container.offsetHeight+E,re=this._containerWidth,fe=new le(this._containerLeft,-B-this._containerBottom);fe._add(ri(this._container));var Ee=y.layerPointToContainerPoint(fe),Fe=Se(this.options.autoPanPadding),tt=Se(this.options.autoPanPaddingTopLeft||Fe),mt=Se(this.options.autoPanPaddingBottomRight||Fe),kt=y.getSize(),Kt=0,br=0;Ee.x+re+mt.x>kt.x&&(Kt=Ee.x+re-kt.x+mt.x),Ee.x-Kt-tt.x<0&&(Kt=Ee.x-tt.x),Ee.y+B+mt.y>kt.y&&(br=Ee.y+B-kt.y+mt.y),Ee.y-br-tt.y<0&&(br=Ee.y-tt.y),(Kt||br)&&(this.options.keepInView&&(this._autopanning=!0),y.fire("autopanstart").panBy([Kt,br]))}},_getAnchor:function(){return Se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pa=function(y,E){return new ua(y,E)};mn.mergeOptions({closePopupOnClick:!0}),mn.include({openPopup:function(y,E,B){return this._initOverlay(ua,y,E,B).openOn(this),this},closePopup:function(y){return y=arguments.length?y:this._popup,y&&y.close(),this}}),qn.include({bindPopup:function(y,E){return this._popup=this._initOverlay(ua,this._popup,y,E),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(y){return this._popup&&(this instanceof Qs||(this._popup._source=this),this._popup._prepareOpen(y||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(y){return this._popup&&this._popup.setContent(y),this},getPopup:function(){return this._popup},_openPopup:function(y){if(!(!this._popup||!this._map)){Ks(y);var E=y.layer||y.target;if(this._popup._source===E&&!(E instanceof _i)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(y.latlng);return}this._popup._source=E,this.openPopup(y.latlng)}},_movePopup:function(y){this._popup.setLatLng(y.latlng)},_onKeyPress:function(y){y.originalEvent.keyCode===13&&this._openPopup(y)}});var Un=Mn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(y){Mn.prototype.onAdd.call(this,y),this.setOpacity(this.options.opacity),y.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(y){Mn.prototype.onRemove.call(this,y),y.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var y=Mn.prototype.getEvents.call(this);return this.options.permanent||(y.preclick=this.close),y},_initLayout:function(){var y="leaflet-tooltip",E=y+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Jr("div",E),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(y){var E,B,re=this._map,fe=this._container,Ee=re.latLngToContainerPoint(re.getCenter()),Fe=re.layerPointToContainerPoint(y),tt=this.options.direction,mt=fe.offsetWidth,kt=fe.offsetHeight,Kt=Se(this.options.offset),br=this._getAnchor();tt==="top"?(E=mt/2,B=kt):tt==="bottom"?(E=mt/2,B=0):tt==="center"?(E=mt/2,B=kt/2):tt==="right"?(E=0,B=kt/2):tt==="left"?(E=mt,B=kt/2):Fe.x<Ee.x?(tt="right",E=0,B=kt/2):(tt="left",E=mt+(Kt.x+br.x)*2,B=kt/2),y=y.subtract(Se(E,B,!0)).add(Kt).add(br),Bn(fe,"leaflet-tooltip-right"),Bn(fe,"leaflet-tooltip-left"),Bn(fe,"leaflet-tooltip-top"),Bn(fe,"leaflet-tooltip-bottom"),ir(fe,"leaflet-tooltip-"+tt),Ht(fe,y)},_updatePosition:function(){var y=this._map.latLngToLayerPoint(this._latlng);this._setPosition(y)},setOpacity:function(y){this.options.opacity=y,this._container&&Or(this._container,y)},_animateZoom:function(y){var E=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center);this._setPosition(E)},_getAnchor:function(){return Se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ra=function(y,E){return new Un(y,E)};mn.include({openTooltip:function(y,E,B){return this._initOverlay(Un,y,E,B).openOn(this),this},closeTooltip:function(y){return y.close(),this}}),qn.include({bindTooltip:function(y,E){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Un,this._tooltip,y,E),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(y){if(!(!y&&this._tooltipHandlersAdded)){var E=y?"off":"on",B={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?B.add=this._openTooltip:(B.mouseover=this._openTooltip,B.mouseout=this.closeTooltip,B.click=this._openTooltip,this._map?this._addFocusListeners():B.add=this._addFocusListeners),this._tooltip.options.sticky&&(B.mousemove=this._moveTooltip),this[E](B),this._tooltipHandlersAdded=!y}},openTooltip:function(y){return this._tooltip&&(this instanceof Qs||(this._tooltip._source=this),this._tooltip._prepareOpen(y)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(y){return this._tooltip&&this._tooltip.setContent(y),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(y){var E=typeof y.getElement=="function"&&y.getElement();E&&(Ft(E,"focus",function(){this._tooltip._source=y,this.openTooltip()},this),Ft(E,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(y){var E=typeof y.getElement=="function"&&y.getElement();E&&E.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(y){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var E=this;this._map.once("moveend",function(){E._openOnceFlag=!1,E._openTooltip(y)});return}this._tooltip._source=y.layer||y.target,this.openTooltip(this._tooltip.options.sticky?y.latlng:void 0)}},_moveTooltip:function(y){var E=y.latlng,B,re;this._tooltip.options.sticky&&y.originalEvent&&(B=this._map.mouseEventToContainerPoint(y.originalEvent),re=this._map.containerPointToLayerPoint(B),E=this._map.layerPointToLatLng(re)),this._tooltip.setLatLng(E)}});var Ms=ps.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(y){var E=y&&y.tagName==="DIV"?y:document.createElement("div"),B=this.options;if(B.html instanceof Element?(hs(E),E.appendChild(B.html)):E.innerHTML=B.html!==!1?B.html:"",B.bgPos){var re=Se(B.bgPos);E.style.backgroundPosition=-re.x+"px "+-re.y+"px"}return this._setIconStyles(E,"icon"),E},createShadow:function(){return null}});function xc(y){return new Ms(y)}ps.Default=Ml;var Oo=qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$t.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(y){C(this,y)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(y){y._addZoomLimit(this)},onRemove:function(y){this._removeAllTiles(),Rn(this._container),y._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Mr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Qa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(y){return this.options.opacity=y,this._updateOpacity(),this},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var y=this._clampZoom(this._map.getZoom());y!==this._tileZoom&&(this._tileZoom=y,this._updateLevels()),this._update()}return this},getEvents:function(){var y={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),y.move=this._onMove),this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},createTile:function(){return document.createElement("div")},getTileSize:function(){var y=this.options.tileSize;return y instanceof le?y:new le(y,y)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(y){for(var E=this.getPane().children,B=-y(-1/0,1/0),re=0,fe=E.length,Ee;re<fe;re++)Ee=E[re].style.zIndex,E[re]!==this._container&&Ee&&(B=y(B,+Ee));isFinite(B)&&(this.options.zIndex=B+y(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$t.ielt9){Or(this._container,this.options.opacity);var y=+new Date,E=!1,B=!1;for(var re in this._tiles){var fe=this._tiles[re];if(!(!fe.current||!fe.loaded)){var Ee=Math.min(1,(y-fe.loaded)/200);Or(fe.el,Ee),Ee<1?E=!0:(fe.active?B=!0:this._onOpaqueTile(fe),fe.active=!0)}}B&&!this._noPrune&&this._pruneTiles(),E&&(Z(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Jr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var y=this._tileZoom,E=this.options.maxZoom;if(y!==void 0){for(var B in this._levels)B=Number(B),this._levels[B].el.children.length||B===y?(this._levels[B].el.style.zIndex=E-Math.abs(y-B),this._onUpdateLevel(B)):(Rn(this._levels[B].el),this._removeTilesAtZoom(B),this._onRemoveLevel(B),delete this._levels[B]);var re=this._levels[y],fe=this._map;return re||(re=this._levels[y]={},re.el=Jr("div","leaflet-tile-container leaflet-zoom-animated",this._container),re.el.style.zIndex=E,re.origin=fe.project(fe.unproject(fe.getPixelOrigin()),y).round(),re.zoom=y,this._setZoomTransform(re,fe.getCenter(),fe.getZoom()),p(re.el.offsetWidth),this._onCreateLevel(re)),this._level=re,re}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var y,E,B=this._map.getZoom();if(B>this.options.maxZoom||B<this.options.minZoom){this._removeAllTiles();return}for(y in this._tiles)E=this._tiles[y],E.retain=E.current;for(y in this._tiles)if(E=this._tiles[y],E.current&&!E.active){var re=E.coords;this._retainParent(re.x,re.y,re.z,re.z-5)||this._retainChildren(re.x,re.y,re.z,re.z+2)}for(y in this._tiles)this._tiles[y].retain||this._removeTile(y)}},_removeTilesAtZoom:function(y){for(var E in this._tiles)this._tiles[E].coords.z===y&&this._removeTile(E)},_removeAllTiles:function(){for(var y in this._tiles)this._removeTile(y)},_invalidateAll:function(){for(var y in this._levels)Rn(this._levels[y].el),this._onRemoveLevel(Number(y)),delete this._levels[y];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(y,E,B,re){var fe=Math.floor(y/2),Ee=Math.floor(E/2),Fe=B-1,tt=new le(+fe,+Ee);tt.z=+Fe;var mt=this._tileCoordsToKey(tt),kt=this._tiles[mt];return kt&&kt.active?(kt.retain=!0,!0):(kt&&kt.loaded&&(kt.retain=!0),Fe>re?this._retainParent(fe,Ee,Fe,re):!1)},_retainChildren:function(y,E,B,re){for(var fe=2*y;fe<2*y+2;fe++)for(var Ee=2*E;Ee<2*E+2;Ee++){var Fe=new le(fe,Ee);Fe.z=B+1;var tt=this._tileCoordsToKey(Fe),mt=this._tiles[tt];if(mt&&mt.active){mt.retain=!0;continue}else mt&&mt.loaded&&(mt.retain=!0);B+1<re&&this._retainChildren(fe,Ee,B+1,re)}},_resetView:function(y){var E=y&&(y.pinch||y.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),E,E)},_animateZoom:function(y){this._setView(y.center,y.zoom,!0,y.noUpdate)},_clampZoom:function(y){var E=this.options;return E.minNativeZoom!==void 0&&y<E.minNativeZoom?E.minNativeZoom:E.maxNativeZoom!==void 0&&E.maxNativeZoom<y?E.maxNativeZoom:y},_setView:function(y,E,B,re){var fe=Math.round(E);this.options.maxZoom!==void 0&&fe>this.options.maxZoom||this.options.minZoom!==void 0&&fe<this.options.minZoom?fe=void 0:fe=this._clampZoom(fe);var Ee=this.options.updateWhenZooming&&fe!==this._tileZoom;(!re||Ee)&&(this._tileZoom=fe,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),fe!==void 0&&this._update(y),B||this._pruneTiles(),this._noPrune=!!B),this._setZoomTransforms(y,E)},_setZoomTransforms:function(y,E){for(var B in this._levels)this._setZoomTransform(this._levels[B],y,E)},_setZoomTransform:function(y,E,B){var re=this._map.getZoomScale(B,y.zoom),fe=y.origin.multiplyBy(re).subtract(this._map._getNewPixelOrigin(E,B)).round();$t.any3d?Pe(y.el,fe,re):Ht(y.el,fe)},_resetGrid:function(){var y=this._map,E=y.options.crs,B=this._tileSize=this.getTileSize(),re=this._tileZoom,fe=this._map.getPixelWorldBounds(this._tileZoom);fe&&(this._globalTileRange=this._pxBoundsToTileRange(fe)),this._wrapX=E.wrapLng&&!this.options.noWrap&&[Math.floor(y.project([0,E.wrapLng[0]],re).x/B.x),Math.ceil(y.project([0,E.wrapLng[1]],re).x/B.y)],this._wrapY=E.wrapLat&&!this.options.noWrap&&[Math.floor(y.project([E.wrapLat[0],0],re).y/B.x),Math.ceil(y.project([E.wrapLat[1],0],re).y/B.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(y){var E=this._map,B=E._animatingZoom?Math.max(E._animateToZoom,E.getZoom()):E.getZoom(),re=E.getZoomScale(B,this._tileZoom),fe=E.project(y,this._tileZoom).floor(),Ee=E.getSize().divideBy(re*2);return new $(fe.subtract(Ee),fe.add(Ee))},_update:function(y){var E=this._map;if(E){var B=this._clampZoom(E.getZoom());if(y===void 0&&(y=E.getCenter()),this._tileZoom!==void 0){var re=this._getTiledPixelBounds(y),fe=this._pxBoundsToTileRange(re),Ee=fe.getCenter(),Fe=[],tt=this.options.keepBuffer,mt=new $(fe.getBottomLeft().subtract([tt,-tt]),fe.getTopRight().add([tt,-tt]));if(!(isFinite(fe.min.x)&&isFinite(fe.min.y)&&isFinite(fe.max.x)&&isFinite(fe.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var kt in this._tiles){var Kt=this._tiles[kt].coords;(Kt.z!==this._tileZoom||!mt.contains(new le(Kt.x,Kt.y)))&&(this._tiles[kt].current=!1)}if(Math.abs(B-this._tileZoom)>1){this._setView(y,B);return}for(var br=fe.min.y;br<=fe.max.y;br++)for(var Cn=fe.min.x;Cn<=fe.max.x;Cn++){var Bs=new le(Cn,br);if(Bs.z=this._tileZoom,!!this._isValidTile(Bs)){var va=this._tiles[this._tileCoordsToKey(Bs)];va?va.current=!0:Fe.push(Bs)}}if(Fe.sort(function(ni,ii){return ni.distanceTo(Ee)-ii.distanceTo(Ee)}),Fe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var il=document.createDocumentFragment();for(Cn=0;Cn<Fe.length;Cn++)this._addTile(Fe[Cn],il);this._level.el.appendChild(il)}}}},_isValidTile:function(y){var E=this._map.options.crs;if(!E.infinite){var B=this._globalTileRange;if(!E.wrapLng&&(y.x<B.min.x||y.x>B.max.x)||!E.wrapLat&&(y.y<B.min.y||y.y>B.max.y))return!1}if(!this.options.bounds)return!0;var re=this._tileCoordsToBounds(y);return H(this.options.bounds).overlaps(re)},_keyToBounds:function(y){return this._tileCoordsToBounds(this._keyToTileCoords(y))},_tileCoordsToNwSe:function(y){var E=this._map,B=this.getTileSize(),re=y.scaleBy(B),fe=re.add(B),Ee=E.unproject(re,y.z),Fe=E.unproject(fe,y.z);return[Ee,Fe]},_tileCoordsToBounds:function(y){var E=this._tileCoordsToNwSe(y),B=new se(E[0],E[1]);return this.options.noWrap||(B=this._map.wrapLatLngBounds(B)),B},_tileCoordsToKey:function(y){return y.x+":"+y.y+":"+y.z},_keyToTileCoords:function(y){var E=y.split(":"),B=new le(+E[0],+E[1]);return B.z=+E[2],B},_removeTile:function(y){var E=this._tiles[y];E&&(Rn(E.el),delete this._tiles[y],this.fire("tileunload",{tile:E.el,coords:this._keyToTileCoords(y)}))},_initTile:function(y){ir(y,"leaflet-tile");var E=this.getTileSize();y.style.width=E.x+"px",y.style.height=E.y+"px",y.onselectstart=p,y.onmousemove=p,$t.ielt9&&this.options.opacity<1&&Or(y,this.options.opacity)},_addTile:function(y,E){var B=this._getTilePos(y),re=this._tileCoordsToKey(y),fe=this.createTile(this._wrapCoords(y),o(this._tileReady,this,y));this._initTile(fe),this.createTile.length<2&&ne(o(this._tileReady,this,y,null,fe)),Ht(fe,B),this._tiles[re]={el:fe,coords:y,current:!0},E.appendChild(fe),this.fire("tileloadstart",{tile:fe,coords:y})},_tileReady:function(y,E,B){E&&this.fire("tileerror",{error:E,tile:B,coords:y});var re=this._tileCoordsToKey(y);B=this._tiles[re],B&&(B.loaded=+new Date,this._map._fadeAnimated?(Or(B.el,0),Z(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(B.active=!0,this._pruneTiles()),E||(ir(B.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:B.el,coords:y})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$t.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(y){return y.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(y){var E=new le(this._wrapX?f(y.x,this._wrapX):y.x,this._wrapY?f(y.y,this._wrapY):y.y);return E.z=y.z,E},_pxBoundsToTileRange:function(y){var E=this.getTileSize();return new $(y.min.unscaleBy(E).floor(),y.max.unscaleBy(E).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var y in this._tiles)if(!this._tiles[y].loaded)return!1;return!0}});function ju(y){return new Oo(y)}var ko=Oo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(y,E){this._url=y,E=C(this,E),E.detectRetina&&$t.retina&&E.maxZoom>0?(E.tileSize=Math.floor(E.tileSize/2),E.zoomReverse?(E.zoomOffset--,E.minZoom=Math.min(E.maxZoom,E.minZoom+1)):(E.zoomOffset++,E.maxZoom=Math.max(E.minZoom,E.maxZoom-1)),E.minZoom=Math.max(0,E.minZoom)):E.zoomReverse?E.minZoom=Math.min(E.maxZoom,E.minZoom):E.maxZoom=Math.max(E.minZoom,E.maxZoom),typeof E.subdomains=="string"&&(E.subdomains=E.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(y,E){return this._url===y&&E===void 0&&(E=!0),this._url=y,E||this.redraw(),this},createTile:function(y,E){var B=document.createElement("img");return Ft(B,"load",o(this._tileOnLoad,this,E,B)),Ft(B,"error",o(this._tileOnError,this,E,B)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(B.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(B.referrerPolicy=this.options.referrerPolicy),B.alt="",B.src=this.getTileUrl(y),B},getTileUrl:function(y){var E={r:$t.retina?"@2x":"",s:this._getSubdomain(y),x:y.x,y:y.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var B=this._globalTileRange.max.y-y.y;this.options.tms&&(E.y=B),E["-y"]=B}return O(this._url,a(E,this.options))},_tileOnLoad:function(y,E){$t.ielt9?setTimeout(o(y,this,null,E),0):y(null,E)},_tileOnError:function(y,E,B){var re=this.options.errorTileUrl;re&&E.getAttribute("src")!==re&&(E.src=re),y(B,E)},_onTileRemove:function(y){y.tile.onload=null},_getZoomForUrl:function(){var y=this._tileZoom,E=this.options.maxZoom,B=this.options.zoomReverse,re=this.options.zoomOffset;return B&&(y=E-y),y+re},_getSubdomain:function(y){var E=Math.abs(y.x+y.y)%this.options.subdomains.length;return this.options.subdomains[E]},_abortLoading:function(){var y,E;for(y in this._tiles)if(this._tiles[y].coords.z!==this._tileZoom&&(E=this._tiles[y].el,E.onload=p,E.onerror=p,!E.complete)){E.src=Y;var B=this._tiles[y].coords;Rn(E),delete this._tiles[y],this.fire("tileabort",{tile:E,coords:B})}},_removeTile:function(y){var E=this._tiles[y];if(E)return E.el.setAttribute("src",Y),Oo.prototype._removeTile.call(this,y)},_tileReady:function(y,E,B){if(!(!this._map||B&&B.getAttribute("src")===Y))return Oo.prototype._tileReady.call(this,y,E,B)}});function tl(y,E){return new ko(y,E)}var Pd=ko.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(y,E){this._url=y;var B=a({},this.defaultWmsParams);for(var re in E)re in this.options||(B[re]=E[re]);E=C(this,E);var fe=E.detectRetina&&$t.retina?2:1,Ee=this.getTileSize();B.width=Ee.x*fe,B.height=Ee.y*fe,this.wmsParams=B},onAdd:function(y){this._crs=this.options.crs||y.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var E=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[E]=this._crs.code,ko.prototype.onAdd.call(this,y)},getTileUrl:function(y){var E=this._tileCoordsToNwSe(y),B=this._crs,re=X(B.project(E[0]),B.project(E[1])),fe=re.min,Ee=re.max,Fe=(this._wmsVersion>=1.3&&this._crs===Jo?[fe.y,fe.x,Ee.y,Ee.x]:[fe.x,fe.y,Ee.x,Ee.y]).join(","),tt=ko.prototype.getTileUrl.call(this,y);return tt+N(this.wmsParams,tt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Fe},setParams:function(y,E){return a(this.wmsParams,y),E||this.redraw(),this}});function rl(y,E){return new Pd(y,E)}ko.WMS=Pd,tl.wms=rl;var co=qn.extend({options:{padding:.1},initialize:function(y){C(this,y),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ir(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var y={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(y.zoomanim=this._onAnimZoom),y},_onAnimZoom:function(y){this._updateTransform(y.center,y.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(y,E){var B=this._map.getZoomScale(E,this._zoom),re=this._map.getSize().multiplyBy(.5+this.options.padding),fe=this._map.project(this._center,E),Ee=re.multiplyBy(-B).add(fe).subtract(this._map._getNewPixelOrigin(y,E));$t.any3d?Pe(this._container,Ee,B):Ht(this._container,Ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var y in this._layers)this._layers[y]._reset()},_onZoomEnd:function(){for(var y in this._layers)this._layers[y]._project()},_updatePaths:function(){for(var y in this._layers)this._layers[y]._update()},_update:function(){var y=this.options.padding,E=this._map.getSize(),B=this._map.containerPointToLayerPoint(E.multiplyBy(-y)).round();this._bounds=new $(B,B.add(E.multiplyBy(1+y*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wu=co.extend({options:{tolerance:0},getEvents:function(){var y=co.prototype.getEvents.call(this);return y.viewprereset=this._onViewPreReset,y},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){co.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var y=this._container=document.createElement("canvas");Ft(y,"mousemove",this._onMouseMove,this),Ft(y,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ft(y,"mouseout",this._handleMouseOut,this),y._leaflet_disable_events=!0,this._ctx=y.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,Rn(this._container),Zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var y;this._redrawBounds=null;for(var E in this._layers)y=this._layers[E],y._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var y=this._bounds,E=this._container,B=y.getSize(),re=$t.retina?2:1;Ht(E,y.min),E.width=re*B.x,E.height=re*B.y,E.style.width=B.x+"px",E.style.height=B.y+"px",$t.retina&&this._ctx.scale(2,2),this._ctx.translate(-y.min.x,-y.min.y),this.fire("update")}},_reset:function(){co.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(y){this._updateDashArray(y),this._layers[u(y)]=y;var E=y._order={layer:y,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=E),this._drawLast=E,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(y){this._requestRedraw(y)},_removePath:function(y){var E=y._order,B=E.next,re=E.prev;B?B.prev=re:this._drawLast=re,re?re.next=B:this._drawFirst=B,delete y._order,delete this._layers[u(y)],this._requestRedraw(y)},_updatePath:function(y){this._extendRedrawBounds(y),y._project(),y._update(),this._requestRedraw(y)},_updateStyle:function(y){this._updateDashArray(y),this._requestRedraw(y)},_updateDashArray:function(y){if(typeof y.options.dashArray=="string"){var E=y.options.dashArray.split(/[, ]+/),B=[],re,fe;for(fe=0;fe<E.length;fe++){if(re=Number(E[fe]),isNaN(re))return;B.push(re)}y.options._dashArray=B}else y.options._dashArray=y.options.dashArray},_requestRedraw:function(y){this._map&&(this._extendRedrawBounds(y),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(y){if(y._pxBounds){var E=(y.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $,this._redrawBounds.extend(y._pxBounds.min.subtract([E,E])),this._redrawBounds.extend(y._pxBounds.max.add([E,E]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var y=this._redrawBounds;if(y){var E=y.getSize();this._ctx.clearRect(y.min.x,y.min.y,E.x,E.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var y,E=this._redrawBounds;if(this._ctx.save(),E){var B=E.getSize();this._ctx.beginPath(),this._ctx.rect(E.min.x,E.min.y,B.x,B.y),this._ctx.clip()}this._drawing=!0;for(var re=this._drawFirst;re;re=re.next)y=re.layer,(!E||y._pxBounds&&y._pxBounds.intersects(E))&&y._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(y,E){if(this._drawing){var B,re,fe,Ee,Fe=y._parts,tt=Fe.length,mt=this._ctx;if(tt){for(mt.beginPath(),B=0;B<tt;B++){for(re=0,fe=Fe[B].length;re<fe;re++)Ee=Fe[B][re],mt[re?"lineTo":"moveTo"](Ee.x,Ee.y);E&&mt.closePath()}this._fillStroke(mt,y)}}},_updateCircle:function(y){if(!(!this._drawing||y._empty())){var E=y._point,B=this._ctx,re=Math.max(Math.round(y._radius),1),fe=(Math.max(Math.round(y._radiusY),1)||re)/re;fe!==1&&(B.save(),B.scale(1,fe)),B.beginPath(),B.arc(E.x,E.y/fe,re,0,Math.PI*2,!1),fe!==1&&B.restore(),this._fillStroke(B,y)}},_fillStroke:function(y,E){var B=E.options;B.fill&&(y.globalAlpha=B.fillOpacity,y.fillStyle=B.fillColor||B.color,y.fill(B.fillRule||"evenodd")),B.stroke&&B.weight!==0&&(y.setLineDash&&y.setLineDash(E.options&&E.options._dashArray||[]),y.globalAlpha=B.opacity,y.lineWidth=B.weight,y.strokeStyle=B.color,y.lineCap=B.lineCap,y.lineJoin=B.lineJoin,y.stroke())},_onClick:function(y){for(var E=this._map.mouseEventToLayerPoint(y),B,re,fe=this._drawFirst;fe;fe=fe.next)B=fe.layer,B.options.interactive&&B._containsPoint(E)&&(!(y.type==="click"||y.type==="preclick")||!this._map._draggableMoved(B))&&(re=B);this._fireEvent(re?[re]:!1,y)},_onMouseMove:function(y){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var E=this._map.mouseEventToLayerPoint(y);this._handleMouseHover(y,E)}},_handleMouseOut:function(y){var E=this._hoveredLayer;E&&(Bn(this._container,"leaflet-interactive"),this._fireEvent([E],y,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(y,E){if(!this._mouseHoverThrottled){for(var B,re,fe=this._drawFirst;fe;fe=fe.next)B=fe.layer,B.options.interactive&&B._containsPoint(E)&&(re=B);re!==this._hoveredLayer&&(this._handleMouseOut(y),re&&(ir(this._container,"leaflet-interactive"),this._fireEvent([re],y,"mouseover"),this._hoveredLayer=re)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,y),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(y,E,B){this._map._fireDOMEvent(E,B||E.type,y)},_bringToFront:function(y){var E=y._order;if(E){var B=E.next,re=E.prev;if(B)B.prev=re;else return;re?re.next=B:B&&(this._drawFirst=B),E.prev=this._drawLast,this._drawLast.next=E,E.next=null,this._drawLast=E,this._requestRedraw(y)}},_bringToBack:function(y){var E=y._order;if(E){var B=E.next,re=E.prev;if(re)re.next=B;else return;B?B.prev=re:re&&(this._drawLast=re),E.prev=null,E.next=this._drawFirst,this._drawFirst.prev=E,this._drawFirst=E,this._requestRedraw(y)}}});function Rd(y){return $t.canvas?new wu(y):null}var vc=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(y){return document.createElement("<lvml:"+y+' class="lvml">')}}catch{}return function(y){return document.createElement("<"+y+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),wh={_initContainer:function(){this._container=Jr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(co.prototype._update.call(this),this.fire("update"))},_initPath:function(y){var E=y._container=vc("shape");ir(E,"leaflet-vml-shape "+(this.options.className||"")),E.coordsize="1 1",y._path=vc("path"),E.appendChild(y._path),this._updateStyle(y),this._layers[u(y)]=y},_addPath:function(y){var E=y._container;this._container.appendChild(E),y.options.interactive&&y.addInteractiveTarget(E)},_removePath:function(y){var E=y._container;Rn(E),y.removeInteractiveTarget(E),delete this._layers[u(y)]},_updateStyle:function(y){var E=y._stroke,B=y._fill,re=y.options,fe=y._container;fe.stroked=!!re.stroke,fe.filled=!!re.fill,re.stroke?(E||(E=y._stroke=vc("stroke")),fe.appendChild(E),E.weight=re.weight+"px",E.color=re.color,E.opacity=re.opacity,re.dashArray?E.dashStyle=D(re.dashArray)?re.dashArray.join(" "):re.dashArray.replace(/( *, *)/g," "):E.dashStyle="",E.endcap=re.lineCap.replace("butt","flat"),E.joinstyle=re.lineJoin):E&&(fe.removeChild(E),y._stroke=null),re.fill?(B||(B=y._fill=vc("fill")),fe.appendChild(B),B.color=re.fillColor||re.color,B.opacity=re.fillOpacity):B&&(fe.removeChild(B),y._fill=null)},_updateCircle:function(y){var E=y._point.round(),B=Math.round(y._radius),re=Math.round(y._radiusY||B);this._setPath(y,y._empty()?"M0 0":"AL "+E.x+","+E.y+" "+B+","+re+" 0,"+65535*360)},_setPath:function(y,E){y._path.v=E},_bringToFront:function(y){Mr(y._container)},_bringToBack:function(y){Qa(y._container)}},yl=$t.vml?vc:Oe,bc=co.extend({_initContainer:function(){this._container=yl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rn(this._container),Zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var y=this._bounds,E=y.getSize(),B=this._container;(!this._svgSize||!this._svgSize.equals(E))&&(this._svgSize=E,B.setAttribute("width",E.x),B.setAttribute("height",E.y)),Ht(B,y.min),B.setAttribute("viewBox",[y.min.x,y.min.y,E.x,E.y].join(" ")),this.fire("update")}},_initPath:function(y){var E=y._path=yl("path");y.options.className&&ir(E,y.options.className),y.options.interactive&&ir(E,"leaflet-interactive"),this._updateStyle(y),this._layers[u(y)]=y},_addPath:function(y){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(y._path),y.addInteractiveTarget(y._path)},_removePath:function(y){Rn(y._path),y.removeInteractiveTarget(y._path),delete this._layers[u(y)]},_updatePath:function(y){y._project(),y._update()},_updateStyle:function(y){var E=y._path,B=y.options;E&&(B.stroke?(E.setAttribute("stroke",B.color),E.setAttribute("stroke-opacity",B.opacity),E.setAttribute("stroke-width",B.weight),E.setAttribute("stroke-linecap",B.lineCap),E.setAttribute("stroke-linejoin",B.lineJoin),B.dashArray?E.setAttribute("stroke-dasharray",B.dashArray):E.removeAttribute("stroke-dasharray"),B.dashOffset?E.setAttribute("stroke-dashoffset",B.dashOffset):E.removeAttribute("stroke-dashoffset")):E.setAttribute("stroke","none"),B.fill?(E.setAttribute("fill",B.fillColor||B.color),E.setAttribute("fill-opacity",B.fillOpacity),E.setAttribute("fill-rule",B.fillRule||"evenodd")):E.setAttribute("fill","none"))},_updatePoly:function(y,E){this._setPath(y,at(y._parts,E))},_updateCircle:function(y){var E=y._point,B=Math.max(Math.round(y._radius),1),re=Math.max(Math.round(y._radiusY),1)||B,fe="a"+B+","+re+" 0 1,0 ",Ee=y._empty()?"M0 0":"M"+(E.x-B)+","+E.y+fe+B*2+",0 "+fe+-B*2+",0 ";this._setPath(y,Ee)},_setPath:function(y,E){y._path.setAttribute("d",E)},_bringToFront:function(y){Mr(y._path)},_bringToBack:function(y){Qa(y._path)}});$t.vml&&bc.include(wh);function Ls(y){return $t.svg||$t.vml?new bc(y):null}mn.include({getRenderer:function(y){var E=y.options.renderer||this._getPaneRenderer(y.options.pane)||this.options.renderer||this._renderer;return E||(E=this._renderer=this._createRenderer()),this.hasLayer(E)||this.addLayer(E),E},_getPaneRenderer:function(y){if(y==="overlayPane"||y===void 0)return!1;var E=this._paneRenderers[y];return E===void 0&&(E=this._createRenderer({pane:y}),this._paneRenderers[y]=E),E},_createRenderer:function(y){return this.options.preferCanvas&&Rd(y)||Ls(y)}});var gs=b.extend({initialize:function(y,E){b.prototype.initialize.call(this,this._boundsToLatLngs(y),E)},setBounds:function(y){return this.setLatLngs(this._boundsToLatLngs(y))},_boundsToLatLngs:function(y){return y=H(y),[y.getSouthWest(),y.getNorthWest(),y.getNorthEast(),y.getSouthEast()]}});function Sh(y,E){return new gs(y,E)}bc.create=yl,bc.pointsToPath=at,A.geometryToLayer=I,A.coordsToLatLng=V,A.coordsToLatLngs=te,A.latLngToCoords=ue,A.latLngsToCoords=ve,A.getFeature=Ne,A.asFeature=Me,mn.mergeOptions({boxZoom:!0});var zs=Re.extend({initialize:function(y){this._map=y,this._container=y._container,this._pane=y._panes.overlayPane,this._resetStateTimeout=0,y.on("unload",this._destroy,this)},addHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(y){if(!y.shiftKey||y.which!==1&&y.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),la(),Cr(),this._startPoint=this._map.mouseEventToContainerPoint(y),Ft(document,{contextmenu:Ks,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(y){this._moved||(this._moved=!0,this._box=Jr("div","leaflet-zoom-box",this._container),ir(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(y);var E=new $(this._point,this._startPoint),B=E.getSize();Ht(this._box,E.min),this._box.style.width=B.x+"px",this._box.style.height=B.y+"px"},_finish:function(){this._moved&&(Rn(this._box),Bn(this._container,"leaflet-crosshair")),Ps(),Jn(),Zt(document,{contextmenu:Ks,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(y){if(!(y.which!==1&&y.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var E=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(E).fire("boxzoomend",{boxZoomBounds:E})}},_onKeyDown:function(y){y.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});mn.addInitHook("addHandler","boxZoom",zs),mn.mergeOptions({doubleClickZoom:!0});var Su=Re.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(y){var E=this._map,B=E.getZoom(),re=E.options.zoomDelta,fe=y.originalEvent.shiftKey?B-re:B+re;E.options.doubleClickZoom==="center"?E.setZoom(fe):E.setZoomAround(y.containerPoint,fe)}});mn.addInitHook("addHandler","doubleClickZoom",Su),mn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nl=Re.extend({addHooks:function(){if(!this._draggable){var y=this._map;this._draggable=new Ct(y._mapPane,y._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),y.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),y.on("zoomend",this._onZoomEnd,this),y.whenReady(this._onZoomEnd,this))}ir(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Bn(this._map._container,"leaflet-grab"),Bn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var y=this._map;if(y._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var E=H(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(E.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(E.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;y.fire("movestart").fire("dragstart"),y.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(y){if(this._map.options.inertia){var E=this._lastTime=+new Date,B=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(B),this._times.push(E),this._prunePositions(E)}this._map.fire("move",y).fire("drag",y)},_prunePositions:function(y){for(;this._positions.length>1&&y-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var y=this._map.getSize().divideBy(2),E=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=E.subtract(y).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(y,E){return y-(y-E)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var y=this._draggable._newPos.subtract(this._draggable._startPos),E=this._offsetLimit;y.x<E.min.x&&(y.x=this._viscousLimit(y.x,E.min.x)),y.y<E.min.y&&(y.y=this._viscousLimit(y.y,E.min.y)),y.x>E.max.x&&(y.x=this._viscousLimit(y.x,E.max.x)),y.y>E.max.y&&(y.y=this._viscousLimit(y.y,E.max.y)),this._draggable._newPos=this._draggable._startPos.add(y)}},_onPreDragWrap:function(){var y=this._worldWidth,E=Math.round(y/2),B=this._initialWorldOffset,re=this._draggable._newPos.x,fe=(re-E+B)%y+E-B,Ee=(re+E+B)%y-E-B,Fe=Math.abs(fe+B)<Math.abs(Ee+B)?fe:Ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Fe},_onDragEnd:function(y){var E=this._map,B=E.options,re=!B.inertia||y.noInertia||this._times.length<2;if(E.fire("dragend",y),re)E.fire("moveend");else{this._prunePositions(+new Date);var fe=this._lastPos.subtract(this._positions[0]),Ee=(this._lastTime-this._times[0])/1e3,Fe=B.easeLinearity,tt=fe.multiplyBy(Fe/Ee),mt=tt.distanceTo([0,0]),kt=Math.min(B.inertiaMaxSpeed,mt),Kt=tt.multiplyBy(kt/mt),br=kt/(B.inertiaDeceleration*Fe),Cn=Kt.multiplyBy(-br/2).round();!Cn.x&&!Cn.y?E.fire("moveend"):(Cn=E._limitOffset(Cn,E.options.maxBounds),ne(function(){E.panBy(Cn,{duration:br,easeLinearity:Fe,noMoveStart:!0,animate:!0})}))}}});mn.addInitHook("addHandler","dragging",nl),mn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Md=Re.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(y){this._map=y,this._setPanDelta(y.options.keyboardPanDelta),this._setZoomDelta(y.options.zoomDelta)},addHooks:function(){var y=this._map._container;y.tabIndex<=0&&(y.tabIndex="0"),Ft(y,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var y=document.body,E=document.documentElement,B=y.scrollTop||E.scrollTop,re=y.scrollLeft||E.scrollLeft;this._map._container.focus(),window.scrollTo(re,B)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(y){var E=this._panKeys={},B=this.keyCodes,re,fe;for(re=0,fe=B.left.length;re<fe;re++)E[B.left[re]]=[-1*y,0];for(re=0,fe=B.right.length;re<fe;re++)E[B.right[re]]=[y,0];for(re=0,fe=B.down.length;re<fe;re++)E[B.down[re]]=[0,y];for(re=0,fe=B.up.length;re<fe;re++)E[B.up[re]]=[0,-1*y]},_setZoomDelta:function(y){var E=this._zoomKeys={},B=this.keyCodes,re,fe;for(re=0,fe=B.zoomIn.length;re<fe;re++)E[B.zoomIn[re]]=y;for(re=0,fe=B.zoomOut.length;re<fe;re++)E[B.zoomOut[re]]=-y},_addHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(y){if(!(y.altKey||y.ctrlKey||y.metaKey)){var E=y.keyCode,B=this._map,re;if(E in this._panKeys){if(!B._panAnim||!B._panAnim._inProgress)if(re=this._panKeys[E],y.shiftKey&&(re=Se(re).multiplyBy(3)),B.options.maxBounds&&(re=B._limitOffset(Se(re),B.options.maxBounds)),B.options.worldCopyJump){var fe=B.wrapLatLng(B.unproject(B.project(B.getCenter()).add(re)));B.panTo(fe)}else B.panBy(re)}else if(E in this._zoomKeys)B.setZoom(B.getZoom()+(y.shiftKey?3:1)*this._zoomKeys[E]);else if(E===27&&B._popup&&B._popup.options.closeOnEscapeKey)B.closePopup();else return;Ks(y)}}});mn.addInitHook("addHandler","keyboard",Md),mn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fd=Re.extend({addHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(y){var E=ki(y),B=this._map.options.wheelDebounceTime;this._delta+=E,this._lastMousePos=this._map.mouseEventToContainerPoint(y),this._startTime||(this._startTime=+new Date);var re=Math.max(B-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),re),Ks(y)},_performZoom:function(){var y=this._map,E=y.getZoom(),B=this._map.options.zoomSnap||0;y._stop();var re=this._delta/(this._map.options.wheelPxPerZoomLevel*4),fe=4*Math.log(2/(1+Math.exp(-Math.abs(re))))/Math.LN2,Ee=B?Math.ceil(fe/B)*B:fe,Fe=y._limitZoom(E+(this._delta>0?Ee:-Ee))-E;this._delta=0,this._startTime=null,Fe&&(y.options.scrollWheelZoom==="center"?y.setZoom(E+Fe):y.setZoomAround(this._lastMousePos,E+Fe))}});mn.addInitHook("addHandler","scrollWheelZoom",fd);var Wc=600;mn.mergeOptions({tapHold:$t.touchNative&&$t.safari&&$t.mobile,tapTolerance:15});var Ld=Re.extend({addHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(y){if(clearTimeout(this._holdTimeout),y.touches.length===1){var E=y.touches[0];this._startPos=this._newPos=new le(E.clientX,E.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ft(document,"touchend",mi),Ft(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",E))},this),Wc),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function y(){Zt(document,"touchend",mi),Zt(document,"touchend touchcancel",y)},_cancel:function(){clearTimeout(this._holdTimeout),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)},_onMove:function(y){var E=y.touches[0];this._newPos=new le(E.clientX,E.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(y,E){var B=new MouseEvent(y,{bubbles:!0,cancelable:!0,view:window,screenX:E.screenX,screenY:E.screenY,clientX:E.clientX,clientY:E.clientY});B._simulated=!0,E.target.dispatchEvent(B)}});mn.addInitHook("addHandler","tapHold",Ld),mn.mergeOptions({touchZoom:$t.touch,bounceAtZoomLimits:!0});var Cu=Re.extend({addHooks:function(){ir(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Bn(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(y){var E=this._map;if(!(!y.touches||y.touches.length!==2||E._animatingZoom||this._zooming)){var B=E.mouseEventToContainerPoint(y.touches[0]),re=E.mouseEventToContainerPoint(y.touches[1]);this._centerPoint=E.getSize()._divideBy(2),this._startLatLng=E.containerPointToLatLng(this._centerPoint),E.options.touchZoom!=="center"&&(this._pinchStartLatLng=E.containerPointToLatLng(B.add(re)._divideBy(2))),this._startDist=B.distanceTo(re),this._startZoom=E.getZoom(),this._moved=!1,this._zooming=!0,E._stop(),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),mi(y)}},_onTouchMove:function(y){if(!(!y.touches||y.touches.length!==2||!this._zooming)){var E=this._map,B=E.mouseEventToContainerPoint(y.touches[0]),re=E.mouseEventToContainerPoint(y.touches[1]),fe=B.distanceTo(re)/this._startDist;if(this._zoom=E.getScaleZoom(fe,this._startZoom),!E.options.bounceAtZoomLimits&&(this._zoom<E.getMinZoom()&&fe<1||this._zoom>E.getMaxZoom()&&fe>1)&&(this._zoom=E._limitZoom(this._zoom)),E.options.touchZoom==="center"){if(this._center=this._startLatLng,fe===1)return}else{var Ee=B._add(re)._divideBy(2)._subtract(this._centerPoint);if(fe===1&&Ee.x===0&&Ee.y===0)return;this._center=E.unproject(E.project(this._pinchStartLatLng,this._zoom).subtract(Ee),this._zoom)}this._moved||(E._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var Fe=o(E._move,E,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(Fe,this,!0),mi(y)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});mn.addInitHook("addHandler","touchZoom",Cu),mn.BoxZoom=zs,mn.DoubleClickZoom=Su,mn.Drag=nl,mn.Keyboard=Md,mn.ScrollWheelZoom=fd,mn.TapHold=Ld,mn.TouchZoom=Cu,n.Bounds=$,n.Browser=$t,n.CRS=be,n.Canvas=wu,n.Circle=Zs,n.CircleMarker=is,n.Class=me,n.Control=ya,n.DivIcon=Ms,n.DivOverlay=Mn,n.DomEvent=ji,n.DomUtil=bi,n.Draggable=Ct,n.Evented=de,n.FeatureGroup=Qs,n.GeoJSON=A,n.GridLayer=Oo,n.Handler=Re,n.Icon=ps,n.ImageOverlay=ct,n.LatLng=oe,n.LatLngBounds=se,n.Layer=qn,n.LayerGroup=rs,n.LineUtil=Kl,n.Map=mn,n.Marker=da,n.Mixin=We,n.Path=_i,n.Point=le,n.PolyUtil=Ur,n.Polygon=b,n.Polyline=h,n.Popup=ua,n.PosAnimation=Yo,n.Projection=pl,n.Rectangle=gs,n.Renderer=co,n.SVG=bc,n.SVGOverlay=Tr,n.TileLayer=ko,n.Tooltip=Un,n.Transformation=Je,n.Util=ie,n.VideoOverlay=_t,n.bind=o,n.bounds=X,n.canvas=Rd,n.circle=je,n.circleMarker=ln,n.control=ao,n.divIcon=xc,n.extend=a,n.featureGroup=Fi,n.geoJSON=$e,n.geoJson=Xe,n.gridLayer=ju,n.icon=el,n.imageOverlay=Tt,n.latLng=ge,n.latLngBounds=H,n.layerGroup=ns,n.map=$l,n.marker=Ys,n.point=Se,n.polygon=S,n.polyline=g,n.popup=Pa,n.rectangle=Sh,n.setOptions=C,n.stamp=u,n.svg=Ls,n.svgOverlay=qr,n.tileLayer=tl,n.tooltip=Ra,n.transformation=Qe,n.version=i,n.videoOverlay=At;var zd=window.L;n.noConflict=function(){return window.L=zd,this},window.L=n}))})(wg,wg.exports)),wg.exports}var hNe=uNe();const zf=hc(hNe),oM=[24.7136,46.6753],fNe=10,tv=zf.divIcon({className:"custom-marker",html:`<div style="
    background: #0d9488;
    width: 32px;
    height: 32px;
    border-radius: 50% 50% 50% 0;
    transform: rotate(-45deg);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    border: 2px solid white;
  ">
    <div style="transform: rotate(45deg); color: white; font-size: 14px;"></div>
  </div>`,iconSize:[32,32],iconAnchor:[16,32]});function mNe({latitude:t,longitude:r,onLocationSelect:n,height:i="300px"}){const a=k.useRef(null),s=k.useRef(null),o=k.useRef(null),[l,u]=k.useState(!1),d=()=>{if(!navigator.geolocation){$i.error("Geolocation is not supported by your browser");return}u(!0),navigator.geolocation.getCurrentPosition(f=>{const{latitude:p,longitude:x}=f.coords;s.current&&(o.current?o.current.setLatLng([p,x]):o.current=zf.marker([p,x],{icon:tv}).addTo(s.current),s.current.setView([p,x],16)),n(p,x),u(!1),$i.success("Location detected successfully")},f=>{switch(u(!1),f.code){case f.PERMISSION_DENIED:$i.error("Location access denied. Please enable location permissions.");break;case f.POSITION_UNAVAILABLE:$i.error("Location information unavailable");break;case f.TIMEOUT:$i.error("Location request timed out");break;default:$i.error("Unable to get your location")}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})};return k.useEffect(()=>{if(!a.current||s.current)return;const f=t||oM[0],p=r||oM[1],x=t&&r?15:fNe,v=zf.map(a.current).setView([f,p],x);return zf.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(v),t&&r&&(o.current=zf.marker([t,r],{icon:tv}).addTo(v)),v.on("click",w=>{const{lat:C,lng:N}=w.latlng;o.current?o.current.setLatLng([C,N]):o.current=zf.marker([C,N],{icon:tv}).addTo(v),n(C,N)}),s.current=v,()=>{s.current&&(s.current.remove(),s.current=null)}},[]),k.useEffect(()=>{s.current&&t&&r&&(o.current?o.current.setLatLng([t,r]):o.current=zf.marker([t,r],{icon:tv}).addTo(s.current),s.current.setView([t,r],15))},[t,r]),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{ref:a,style:{height:i,width:"100%",borderRadius:"8px",border:"1px solid var(--border)",overflow:"hidden"}}),e.jsx("button",{type:"button",onClick:d,disabled:l,style:{position:"absolute",top:"10px",right:"10px",background:"white",border:"none",padding:"8px 12px",borderRadius:"6px",fontSize:"0.8125rem",fontWeight:500,color:"#0d9488",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",cursor:l?"wait":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseOver:f=>{l||(f.currentTarget.style.background="#0d9488",f.currentTarget.style.color="white")},onMouseOut:f=>{f.currentTarget.style.background="white",f.currentTarget.style.color="#0d9488"},children:l?e.jsxs(e.Fragment,{children:[e.jsx(Eg,{size:16,style:{animation:"spin 1s linear infinite"}}),"Locating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(AY,{size:16}),"Use My Location"]})}),e.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"8px",background:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"0.75rem",color:"var(--text-muted)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ea,{size:14}),"Click on the map to select location"]}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}function pNe(){const t=pr(),r=gn(),[n,i]=k.useState({nameEn:"",nameAr:"",email:"",mobile:"",phone:"",fullAddress:"",postalCode:"",countryId:"",regionId:"",cityId:"",latitude:"",longitude:"",deliveryWindowStart:"",deliveryWindowEnd:"",preferredDeliveryTime:""}),[a,s]=k.useState([]),[o,l]=k.useState({}),[u,d]=k.useState(null),[f,p]=k.useState(!1),[x,v]=k.useState(!1),[w,C]=k.useState(""),N=k.useRef(null),T=k.useRef(null),{data:O,isLoading:D}=Ve({queryKey:["my-profile"],queryFn:async()=>{const{data:H}=await xe.get("/profile");return H}}),{data:M}=Ve({queryKey:["settings","countries"],queryFn:async()=>{const{data:H}=await xe.get("/settings/countries");return H}}),{data:Y}=Ve({queryKey:["settings","regions",n.countryId],queryFn:async()=>{const H=n.countryId?{countryId:n.countryId}:{},{data:oe}=await xe.get("/settings/regions",{params:H});return oe}}),{data:q}=Ve({queryKey:["settings","cities",n.regionId],queryFn:async()=>{const H=n.regionId?{regionId:n.regionId}:{},{data:oe}=await xe.get("/settings/cities",{params:H});return oe},enabled:!!n.regionId}),{data:W}=Ve({queryKey:["location-photos"],queryFn:async()=>{const{data:H}=await xe.get("/profile/location-photos");return H}});k.useEffect(()=>{O&&(i({nameEn:O.nameEn||O.name||"",nameAr:O.nameAr||"",email:O.email||"",mobile:O.mobile||"",phone:O.phone||"",fullAddress:O.fullAddress||O.address||"",postalCode:O.postalCode||"",countryId:O.countryId||"",regionId:O.regionId||"",cityId:O.cityId||"",latitude:O.latitude?.toString()||"",longitude:O.longitude?.toString()||"",deliveryWindowStart:O.deliveryWindowStart||"",deliveryWindowEnd:O.deliveryWindowEnd||"",preferredDeliveryTime:O.preferredDeliveryTime||""}),O.contacts?.length>0&&s(O.contacts),O.logoUrl&&d(O.logoUrl))},[O]);const J=ot({mutationFn:async H=>(await xe.put("/profile",H)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["my-profile"]}),r.success("Profile updated successfully")},onError:H=>{const oe=an(H);r.error(oe?.userMessage||"Failed to save profile")}}),z=()=>{const H={};return n.nameEn?.trim()||(H.nameEn="English name is required"),n.mobile?.trim()?/^(\+966|05)[0-9]{8,9}$/.test(n.mobile.replace(/\s/g,""))||(H.mobile="Invalid Saudi mobile format (+9665xxxxxxxx or 05xxxxxxxx)"):H.mobile="Mobile number is required",n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&(H.email="Invalid email format"),n.fullAddress?.trim()||(H.fullAddress="Address is required"),l(H),Object.keys(H).length===0},G=()=>{if(!z()){r.error("Please fix the validation errors");return}J.mutate({...n,contacts:a})},ne=async H=>{const oe=H.target.files?.[0];if(!oe)return;if(oe.size>5*1024*1024){r.error("Logo must be less than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(oe.type)){r.error("Only PNG and JPG images are allowed");return}p(!0);const ge=new FormData;ge.append("logo",oe);try{const{data:be}=await xe.post("/profile/logo",ge,{headers:{"Content-Type":"multipart/form-data"}});d(be.logoUrl),t.invalidateQueries({queryKey:["my-profile"]}),r.success("Logo uploaded successfully")}catch(be){const Le=an(be);r.error(Le?.userMessage||"Failed to upload logo")}finally{p(!1)}},Z=async()=>{try{await xe.delete("/profile/logo"),d(null),t.invalidateQueries({queryKey:["my-profile"]}),r.success("Logo removed")}catch(H){const oe=an(H);r.error(oe?.userMessage||"Failed to remove logo")}},ie=()=>{s([...a,{name:"",title:"",email:"",phone:""}])},me=(H,oe,ge)=>{const be=[...a];be[H]={...be[H],[oe]:ge},s(be)},ce=H=>{s(a.filter((oe,ge)=>ge!==H))},Q=(H,oe)=>{i({...n,latitude:H.toFixed(6),longitude:oe.toFixed(6)})},de=async H=>{const oe=H.target.files?.[0];if(!oe)return;if(oe.size>5*1024*1024){r.error("Photo must be less than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(oe.type)){r.error("Only PNG and JPG images are allowed");return}v(!0);const ge=new FormData;ge.append("photo",oe),ge.append("caption",w);try{await xe.post("/profile/location-photos",ge,{headers:{"Content-Type":"multipart/form-data"}}),t.invalidateQueries({queryKey:["location-photos"]}),C(""),r.success("Location photo uploaded")}catch(be){const Le=an(be);r.error(Le?.userMessage||"Failed to upload photo")}finally{v(!1),T.current&&(T.current.value="")}},le=async H=>{try{await xe.delete(`/profile/location-photos/${H}`),t.invalidateQueries({queryKey:["location-photos"]}),r.success("Photo deleted")}catch(oe){const ge=an(oe);r.error(ge?.userMessage||"Failed to delete photo")}};if(D)return e.jsx("div",{style:{padding:"2rem"},children:e.jsx("div",{className:"card skeleton",style:{height:"400px"}})});const ye={background:"white",border:"1px solid var(--border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},Se={display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)",fontSize:"1rem",fontWeight:600,color:"#0d9488"},$={display:"block",marginBottom:"0.375rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},X={width:"100%",padding:"0.625rem 0.875rem",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"0.875rem",transition:"border-color 0.15s ease"},se={...X,borderColor:"var(--danger)"};return e.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Profile"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Manage your company information and contact details"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:G,disabled:J.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(lc,{size:18}),J.isPending?"Saving...":"Save Changes"]})]}),e.jsxs("div",{style:ye,children:[e.jsxs("div",{style:Se,children:[e.jsx(Mp,{size:20}),"Company Information"]}),e.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{flex:"0 0 140px"},children:[e.jsx("div",{style:{width:"140px",height:"140px",borderRadius:"12px",border:"2px dashed var(--border)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f8fafc",overflow:"hidden",position:"relative"},children:u?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:u,alt:"Logo",style:{width:"100%",height:"100%",objectFit:"contain"}}),e.jsx("button",{onClick:Z,style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0,0,0,0.5)",border:"none",borderRadius:"50%",padding:"4px",cursor:"pointer",color:"white"},children:e.jsx(kr,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Dv,{size:32,style:{color:"var(--text-muted)",marginBottom:"0.5rem"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Company Logo"})]})}),e.jsx("input",{type:"file",ref:N,onChange:ne,accept:"image/png,image/jpeg,image/jpg",style:{display:"none"}}),e.jsxs("button",{onClick:()=>N.current?.click(),disabled:f,style:{width:"100%",marginTop:"0.5rem",padding:"0.5rem",fontSize:"0.75rem",border:"1px solid var(--border)",borderRadius:"6px",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[e.jsx(om,{size:14}),f?"Uploading...":"Upload Logo"]})]}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Name (English) *"}),e.jsx("input",{type:"text",value:n.nameEn,onChange:H=>i({...n,nameEn:H.target.value}),style:o.nameEn?se:X,placeholder:"Company name in English"}),o.nameEn&&e.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[e.jsx(sn,{size:12})," ",o.nameEn]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Name (Arabic)"}),e.jsx("input",{type:"text",value:n.nameAr,onChange:H=>i({...n,nameAr:H.target.value}),style:X,placeholder:"  ",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Email"}),e.jsx("input",{type:"email",value:n.email,onChange:H=>i({...n,email:H.target.value}),style:o.email?se:X,placeholder:"company@example.com"}),o.email&&e.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[e.jsx(sn,{size:12})," ",o.email]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Mobile *"}),e.jsx("input",{type:"tel",value:n.mobile,onChange:H=>i({...n,mobile:H.target.value}),style:o.mobile?se:X,placeholder:"+966 5x xxx xxxx"}),o.mobile&&e.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[e.jsx(sn,{size:12})," ",o.mobile]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Phone (Landline)"}),e.jsx("input",{type:"tel",value:n.phone,onChange:H=>i({...n,phone:H.target.value}),style:X,placeholder:"+966 1x xxx xxxx"})]})]})})]})]}),e.jsxs("div",{style:ye,children:[e.jsxs("div",{style:Se,children:[e.jsx(Ea,{size:20}),"Delivery Address"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Full Address *"}),e.jsx("textarea",{value:n.fullAddress,onChange:H=>i({...n,fullAddress:H.target.value}),style:{...X,minHeight:"80px",resize:"vertical"},placeholder:"Complete delivery address"}),o.fullAddress&&e.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[e.jsx(sn,{size:12})," ",o.fullAddress]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Country"}),e.jsxs("select",{value:n.countryId,onChange:H=>i({...n,countryId:H.target.value,regionId:"",cityId:""}),style:X,children:[e.jsx("option",{value:"",children:"Select Country"}),M?.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Region"}),e.jsxs("select",{value:n.regionId,onChange:H=>i({...n,regionId:H.target.value,cityId:""}),style:X,disabled:!n.countryId,children:[e.jsx("option",{value:"",children:"Select Region"}),Y?.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"City"}),e.jsxs("select",{value:n.cityId,onChange:H=>i({...n,cityId:H.target.value}),style:X,disabled:!n.regionId,children:[e.jsx("option",{value:"",children:"Select City"}),q?.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Postal Code"}),e.jsx("input",{type:"text",value:n.postalCode,onChange:H=>i({...n,postalCode:H.target.value}),style:X,placeholder:"12345"})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"GPS Latitude"}),e.jsx("input",{type:"text",value:n.latitude,onChange:H=>i({...n,latitude:H.target.value}),style:X,placeholder:"24.7136"})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"GPS Longitude"}),e.jsx("input",{type:"text",value:n.longitude,onChange:H=>i({...n,longitude:H.target.value}),style:X,placeholder:"46.6753"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:$,children:"Select Location on Map"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem"},children:"Click on the map to set your delivery location coordinates"}),e.jsx(mNe,{latitude:n.latitude?parseFloat(n.latitude):null,longitude:n.longitude?parseFloat(n.longitude):null,onLocationSelect:Q,height:"300px"})]})]}),e.jsxs("div",{style:ye,children:[e.jsxs("div",{style:Se,children:[e.jsx(Rv,{size:20}),"Location Photos"]}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"1rem"},children:"Upload photos of your delivery location to help drivers identify your building"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:$,children:"Caption (optional)"}),e.jsx("input",{type:"text",value:w,onChange:H=>C(H.target.value),style:X,placeholder:"e.g., Front entrance, Loading dock"})]}),e.jsx("input",{type:"file",ref:T,onChange:de,accept:"image/png,image/jpeg,image/jpg",style:{display:"none"}}),e.jsxs("button",{onClick:()=>T.current?.click(),disabled:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",border:"1px solid #0d9488",borderRadius:"8px",background:"#0d9488",color:"white",cursor:"pointer",fontSize:"0.875rem",whiteSpace:"nowrap"},children:[e.jsx(om,{size:16}),x?"Uploading...":"Upload Photo"]})]}),W&&W.length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem"},children:W.map(H=>e.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border)",background:"#f8fafc"},children:[e.jsx("img",{src:H.photoUrl,alt:H.caption||"Location photo",style:{width:"100%",height:"150px",objectFit:"cover"}}),e.jsx("button",{onClick:()=>le(H.id),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.5)",border:"none",borderRadius:"50%",padding:"6px",cursor:"pointer",color:"white"},children:e.jsx(ra,{size:14})}),H.caption&&e.jsx("div",{style:{padding:"0.5rem",fontSize:"0.75rem",color:"var(--text-secondary)",background:"white",borderTop:"1px solid var(--border)"},children:H.caption})]},H.id))}):e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)",background:"#f8fafc",borderRadius:"8px",border:"1px dashed var(--border)"},children:[e.jsx(Dv,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:"No location photos uploaded yet"})]})]}),e.jsxs("div",{style:ye,children:[e.jsxs("div",{style:Se,children:[e.jsx(vo,{size:20}),"Delivery Preferences"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Delivery Window Start"}),e.jsx("input",{type:"time",value:n.deliveryWindowStart,onChange:H=>i({...n,deliveryWindowStart:H.target.value}),style:X})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Delivery Window End"}),e.jsx("input",{type:"time",value:n.deliveryWindowEnd,onChange:H=>i({...n,deliveryWindowEnd:H.target.value}),style:X})]}),e.jsxs("div",{children:[e.jsx("label",{style:$,children:"Preferred Delivery Time"}),e.jsx("input",{type:"time",value:n.preferredDeliveryTime,onChange:H=>i({...n,preferredDeliveryTime:H.target.value}),style:X})]})]})]}),e.jsxs("div",{style:ye,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:600,color:"#0d9488"},children:[e.jsx(Uo,{size:20}),"Contact Persons"]}),e.jsxs("button",{onClick:ie,style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",fontSize:"0.875rem",border:"1px solid var(--border)",borderRadius:"6px",background:"white",cursor:"pointer"},children:[e.jsx(cn,{size:16}),"Add Contact"]})]}),a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:'No contact persons added. Click "Add Contact" to add one.'}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a.map((H,oe)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:"0.75rem",padding:"1rem",background:"#f8fafc",borderRadius:"8px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...$,fontSize:"0.75rem"},children:"Name"}),e.jsx("input",{type:"text",value:H.name,onChange:ge=>me(oe,"name",ge.target.value),style:X,placeholder:"Contact name"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...$,fontSize:"0.75rem"},children:"Title"}),e.jsx("input",{type:"text",value:H.title,onChange:ge=>me(oe,"title",ge.target.value),style:X,placeholder:"Job title"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...$,fontSize:"0.75rem"},children:"Email"}),e.jsx("input",{type:"email",value:H.email,onChange:ge=>me(oe,"email",ge.target.value),style:X,placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...$,fontSize:"0.75rem"},children:"Phone"}),e.jsx("input",{type:"tel",value:H.phone,onChange:ge=>me(oe,"phone",ge.target.value),style:X,placeholder:"+966 5x xxx xxxx"})]}),e.jsx("button",{onClick:()=>ce(oe),style:{padding:"0.625rem",border:"none",borderRadius:"6px",background:"#fee2e2",color:"var(--danger)",cursor:"pointer"},children:e.jsx(ra,{size:16})})]},oe))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",paddingBottom:"2rem"},children:e.jsxs("button",{className:"btn btn-primary",onClick:G,disabled:J.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(lc,{size:18}),J.isPending?"Saving...":"Save Changes"]})})]})}function gNe(){const{user:t}=Il(),r=Qr(),n=pr(),[i,a]=k.useState(0),[s,o]=k.useState(null),[l,u]=k.useState(""),[d,f]=k.useState(1),[p,x]=k.useState(10),[v,w]=k.useState(""),[C,N]=k.useState(""),[T,O]=k.useState("calendar"),[D,M]=k.useState(null),[Y,q]=k.useState(0),W=ul(Yf(new Date),i*7),J=ul(W,13),{data:z,isLoading:G}=Ve({queryKey:["portal-capacity-calendar",W.toISOString()],queryFn:async()=>{const{data:ge}=await xe.get("/portal/capacity/calendar",{params:{startDate:W.toISOString(),endDate:J.toISOString()}});return ge}}),{data:ne,isLoading:Z}=Ve({queryKey:["portal-available-products"],queryFn:async()=>{const{data:ge}=await xe.get("/portal/products/available");return ge}}),ie=ot({mutationFn:async ge=>{const{data:be}=await xe.post("/portal/reservations",ge);return be},onSuccess:ge=>{M(ge),q(ge.expiresInSeconds||900),O("confirm");const be=setInterval(()=>{q(Le=>Le<=1?(clearInterval(be),0):Le-1)},1e3)}}),me=ot({mutationFn:async()=>{const{data:ge}=await xe.post(`/portal/reservations/${D.id}/confirm`,{hospitalOrderReference:v,specialNotes:C});return ge},onSuccess:ge=>{n.invalidateQueries({queryKey:["portal-capacity-calendar"]}),n.invalidateQueries({queryKey:["portal-orders"]}),r(`/portal/orders/${ge.order.id}/journey`)}}),ce=ne?.find(ge=>ge.id===l),Q=ce?ce.dispensingMinutesPerDose*d:15*d,de=ge=>{ge.availableMinutes<=0||(o(ge),u(""),f(1),x(10),w(""),N(""))},le=()=>{!s||!l||ie.mutate({productId:l,windowId:s.id,requestedDate:s.date,requestedActivity:p,numberOfDoses:d,hospitalOrderReference:v})},ye=()=>{me.mutate()},Se=ge=>{const be=Math.floor(ge/60),Le=ge%60;return`${be}:${Le.toString().padStart(2,"0")}`},$=ne?.find(ge=>ge.id===l),X=ge=>{u(ge);const be=ne?.find(Le=>Le.id===ge);be?.standardDose&&x(be.standardDose)},se=ge=>ge>=90?"var(--danger)":ge>=70?"var(--warning)":"var(--success)",H=(z||[]).reduce((ge,be)=>{const Le=Ze(new Date(be.date),"yyyy-MM-dd");return ge[Le]||(ge[Le]=[]),ge[Le].push(be),ge},{}),oe={totalSlots:z?.length||0,availableSlots:z?.filter(ge=>ge.availableMinutes>0).length||0,totalCapacity:z?.reduce((ge,be)=>ge+be.capacityMinutes,0)||0,availableCapacity:z?.reduce((ge,be)=>ge+be.availableMinutes,0)||0};return G||Z?e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{className:"card skeleton",style:{height:"80px",marginBottom:"1rem"}}),e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:Array.from({length:4}).map((ge,be)=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},be))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem"},children:Array.from({length:14}).map((ge,be)=>e.jsx("div",{className:"card skeleton",style:{height:"120px"}},be))})]}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Book Capacity"}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ts,{size:14})," ",t?.customerName||"Select a delivery window to reserve capacity"]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Slots",value:oe.totalSlots,icon:e.jsx($n,{size:20}),color:"primary"}),e.jsx(st,{title:"Available Slots",value:oe.availableSlots,icon:e.jsx(LC,{size:20}),color:"success"}),e.jsx(st,{title:"Total Capacity",value:`${Math.round(oe.totalCapacity/60)}h`,icon:e.jsx(Qt,{size:20}),color:"info"}),e.jsx(st,{title:"Available",value:`${Math.round(oe.availableCapacity/60)}h`,icon:e.jsx(Lp,{size:20}),color:"warning"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx($n,{size:18,style:{color:"var(--primary)"}}),e.jsxs("span",{style:{fontWeight:500},children:[Ze(W,"MMM d")," - ",Ze(J,"MMM d, yyyy")]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>a(ge=>ge-1),disabled:i===0,children:e.jsx(Zp,{size:16})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>a(0),children:"Today"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>a(ge=>ge+1),children:e.jsx(jo,{size:16})})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"1rem",fontSize:"0.8125rem"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:"var(--success)"}}),"Available"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:"var(--warning)"}}),"Limited"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:"var(--danger)"}}),"Full"]})]})]})}),T==="calendar"&&e.jsxs("div",{className:"grid",style:{gridTemplateColumns:s?"1fr 380px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.75rem"},children:Array.from({length:14}).map((ge,be)=>{const Le=ul(W,be),ke=Ze(Le,"yyyy-MM-dd"),He=H[ke]||[],Je=Ze(Le,"yyyy-MM-dd")===Ze(new Date,"yyyy-MM-dd"),Qe=Le<Yf(new Date),vt=He.reduce((Pt,Oe)=>Pt+Oe.availableMinutes,0);return e.jsxs("div",{className:"card",style:{padding:0,opacity:Qe?.5:1,border:Je?"2px solid #0d9488":"1px solid var(--border)",overflow:"hidden"},children:[e.jsxs("div",{style:{background:Je?"rgba(13, 148, 136, 0.1)":"var(--bg-secondary)",padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:500,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.25rem"},children:Ze(Le,"EEE")}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:Je?"#0d9488":"var(--text-primary)"},children:Ze(Le,"d")})]}),e.jsx("div",{style:{padding:"0.75rem"},children:He.length===0?e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center",padding:"1.5rem 0",background:"var(--bg-secondary)",borderRadius:"8px"},children:"No slots"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:He.map(Pt=>{const Oe=s?.id===Pt.id,at=Pt.availableMinutes<=0,Wt=at?"Full":Pt.utilizationPercent>=70?"Limited":"Available",Bt=at?"var(--danger)":Pt.utilizationPercent>=70?"var(--warning)":"var(--success)",yt=at?"rgba(239, 68, 68, 0.1)":Pt.utilizationPercent>=70?"rgba(234, 179, 8, 0.1)":"rgba(34, 197, 94, 0.1)";return e.jsxs("button",{onClick:()=>!Qe&&de(Pt),disabled:Qe||at,style:{padding:0,borderRadius:"10px",border:Oe?"2px solid #0d9488":"1px solid var(--border)",background:Oe?"rgba(13, 148, 136, 0.08)":"var(--bg-primary)",cursor:Qe||at?"not-allowed":"pointer",textAlign:"left",transition:"all 0.2s ease",overflow:"hidden",boxShadow:Oe?"0 2px 8px rgba(13, 148, 136, 0.2)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.625rem 0.75rem",borderBottom:"1px solid var(--border)",background:Oe?"rgba(13, 148, 136, 0.05)":"var(--bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"0.8125rem",fontWeight:600},children:[e.jsx(Qt,{size:13,style:{color:Oe?"#0d9488":"var(--text-muted)"}}),Ze(new Date(Pt.startTime),"HH:mm")," - ",Ze(new Date(Pt.endTime),"HH:mm")]}),e.jsx("span",{style:{padding:"0.1875rem 0.5rem",borderRadius:"10px",fontSize:"0.625rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",background:yt,color:Bt},children:Wt})]}),e.jsxs("div",{style:{padding:"0.625rem 0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Capacity"}),e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:700,color:Bt},children:[Pt.availableMinutes," min"]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"var(--bg-muted)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Pt.utilizationPercent}%`,height:"100%",background:Bt,borderRadius:"3px",transition:"width 0.3s ease"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.375rem",fontSize:"0.625rem",color:"var(--text-muted)"},children:[e.jsxs("span",{children:[Pt.usedMinutes," used"]}),e.jsxs("span",{children:[Pt.capacityMinutes," total"]})]})]})]},Pt.id)})})}),He.length>0&&e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"0.5rem 0.75rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.375rem",fontSize:"0.6875rem",color:"var(--text-muted)"},children:[e.jsx(vp,{size:11}),vt," min available"]})]},be)})}),s&&e.jsxs("div",{className:"card",style:{padding:0,position:"sticky",top:"100px",alignSelf:"start",width:"340px",minWidth:"340px",maxWidth:"340px",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Slot Details"}),e.jsx("button",{onClick:()=>o(null),style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:e.jsx(kr,{size:18,style:{color:"var(--text-muted)"}})})]}),e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($n,{size:20,style:{color:"#0d9488"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:Ze(new Date(s.date),"EEEE")}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:600},children:Ze(new Date(s.date),"MMMM d, yyyy")})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Qt,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Time Slot"})]}),e.jsxs("span",{style:{fontSize:"0.8125rem",fontWeight:600},children:[Ze(new Date(s.startTime),"HH:mm")," - ",Ze(new Date(s.endTime),"HH:mm")]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Lp,{size:12,style:{color:"#0d9488"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Available"})]}),e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:700,color:se(s.utilizationPercent)},children:[s.availableMinutes," min"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(vp,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Total Capacity"})]}),e.jsxs("span",{style:{fontSize:"0.8125rem"},children:[s.capacityMinutes," min"]})]}),e.jsxs("div",{style:{padding:"0.375rem 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Utilization"}),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600},children:[s.utilizationPercent,"%"]})]}),e.jsx("div",{style:{height:"4px",background:"var(--bg-secondary)",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(s.utilizationPercent,100)}%`,height:"100%",background:se(s.utilizationPercent),borderRadius:"2px",transition:"width 0.3s ease"}})})]})]})]}),e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("h4",{style:{fontSize:"0.6875rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Reserve This Slot"}),e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsxs("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:["Product ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsxs("select",{className:"form-control",value:l,onChange:ge=>X(ge.target.value),style:{fontSize:"0.8125rem",padding:"0.4rem 0.5rem",width:"100%",boxSizing:"border-box",borderColor:l?"#0d9488":"var(--border)",borderWidth:l?"2px":"1px"},children:[e.jsx("option",{value:"",children:"Select a product..."}),ne?.map(ge=>e.jsxs("option",{value:ge.id,children:[ge.name," (",ge.code,")"]},ge.id))]})]}),$&&e.jsxs("div",{style:{padding:"0.625rem",background:"rgba(13, 148, 136, 0.06)",borderRadius:"6px",marginBottom:"0.75rem",border:"1px solid rgba(13, 148, 136, 0.15)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Rr,{size:14,style:{color:"#0d9488"}}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#0d9488"},children:$.code}),e.jsx("span",{style:{fontSize:"0.625rem",padding:"0.125rem 0.375rem",background:"rgba(13, 148, 136, 0.15)",borderRadius:"4px",color:"#0d9488",textTransform:"uppercase"},children:$.productType})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.6875rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Radionuclide: "}),e.jsx("span",{style:{fontWeight:500},children:$.radionuclide})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Half-life: "}),e.jsxs("span",{style:{fontWeight:500},children:[$.halfLifeMinutes," min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Dose Unit: "}),e.jsx("span",{style:{fontWeight:600,color:"#0d9488"},children:$.doseUnit})]}),$.standardDose&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Std. Dose: "}),e.jsxs("span",{style:{fontWeight:500},children:[$.standardDose," ",$.doseUnit]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:["Doses ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:d,onChange:ge=>f(Math.max(1,parseInt(ge.target.value)||1)),min:1,style:{fontSize:"0.8125rem",padding:"0.4rem 0.5rem",width:"100%",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:["Activity (",$?.doseUnit||"mCi",") ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:p,onChange:ge=>x(parseFloat(ge.target.value)||0),step:"0.1",style:{fontSize:"0.8125rem",padding:"0.4rem 0.5rem",width:"100%",boxSizing:"border-box"}})]})]}),e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"Hospital Reference"}),e.jsx("input",{type:"text",className:"form-control",value:v,onChange:ge=>w(ge.target.value),placeholder:"Your internal reference",style:{fontSize:"0.8125rem",padding:"0.4rem 0.5rem",width:"100%",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"Special Notes"}),e.jsx("textarea",{className:"form-control",value:C,onChange:ge=>N(ge.target.value),rows:2,placeholder:"Any special requirements...",style:{fontSize:"0.8125rem",padding:"0.4rem 0.5rem",resize:"none",width:"100%",boxSizing:"border-box"}})]})]}),e.jsxs("div",{style:{padding:"1rem"},children:[l&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0.75rem",background:Q>s.availableMinutes?"rgba(239, 68, 68, 0.08)":"rgba(13, 148, 136, 0.08)",borderRadius:"6px",marginBottom:"0.75rem",border:Q>s.availableMinutes?"1px solid rgba(239, 68, 68, 0.2)":"1px solid rgba(13, 148, 136, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(vp,{size:14,style:{color:Q>s.availableMinutes?"var(--danger)":"#0d9488"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Est. Time"})]}),e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:700,color:Q>s.availableMinutes?"var(--danger)":"#0d9488"},children:[Q," min",Q>s.availableMinutes&&e.jsx($r,{size:12,style:{marginLeft:"0.25rem",verticalAlign:"middle"}})]})]}),e.jsxs("button",{className:"btn",onClick:le,disabled:!l||Q>s.availableMinutes||ie.isPending,style:{width:"100%",boxSizing:"border-box",background:!l||Q>s.availableMinutes?"var(--bg-secondary)":"#0d9488",borderColor:!l||Q>s.availableMinutes?"var(--border)":"#0d9488",color:!l||Q>s.availableMinutes?"var(--text-muted)":"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.625rem 1rem",fontSize:"0.875rem",fontWeight:600,cursor:!l||Q>s.availableMinutes?"not-allowed":"pointer"},children:[e.jsx(LC,{size:16}),ie.isPending?"Reserving...":"Reserve Capacity"]})]})]})]}),T==="confirm"&&D&&e.jsxs("div",{className:"card",style:{padding:"2rem",maxWidth:"500px",margin:"2rem auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:e.jsx(Ai,{size:32,style:{color:"var(--success)"}})}),e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Capacity Reserved!"}),e.jsxs("p",{style:{color:"var(--text-muted)",margin:0},children:["Reservation: ",D.reservationNumber]})]}),e.jsxs("div",{style:{background:Y<120?"rgba(239, 68, 68, 0.1)":"rgba(234, 179, 8, 0.1)",border:`1px solid ${Y<120?"rgba(239, 68, 68, 0.3)":"rgba(234, 179, 8, 0.3)"}`,padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1.5rem"},children:[e.jsx(vp,{size:24,style:{marginBottom:"0.5rem",color:Y<120?"var(--danger)":"var(--warning)"}}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700},children:Se(Y)}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",margin:"0.25rem 0 0"},children:"Confirm before expiry"})]}),e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)",marginBottom:"0.75rem",fontWeight:500},children:"Order Summary"}),e.jsxs("div",{style:{display:"grid",gap:"0.625rem",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Product"}),e.jsx("span",{style:{fontWeight:500},children:D.product?.name})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Doses"}),e.jsx("span",{style:{fontWeight:500},children:D.numberOfDoses})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Activity"}),e.jsxs("span",{style:{fontWeight:500},children:[D.requestedActivity," mCi"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Delivery"}),e.jsx("span",{style:{fontWeight:500},children:Ze(new Date(D.requestedDate),"MMM d, yyyy")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Reserved Time"}),e.jsxs("span",{style:{fontWeight:500},children:[D.estimatedMinutes," min"]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{O("calendar"),M(null),o(null)},style:{flex:1},children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:ye,disabled:Y===0||me.isPending,style:{flex:2,background:"#0d9488",borderColor:"#0d9488"},children:me.isPending?"Creating Order...":"Confirm Order"})]})]})]})}const yNe=[{value:"",label:"All Statuses"},{value:"NEW",label:"New"},{value:"OPEN",label:"Open"},{value:"IN_PROGRESS",label:"In Progress"},{value:"WAITING_FOR_USER",label:"Waiting for You"},{value:"WAITING_FOR_ADMIN",label:"Waiting for Support"},{value:"RESOLVED",label:"Resolved"},{value:"CLOSED",label:"Closed"}],xNe=[{value:"",label:"All Categories"},{value:"ACCOUNT",label:"Account"},{value:"ORDER",label:"Order"},{value:"DELIVERY",label:"Delivery"},{value:"INVOICE",label:"Invoice"},{value:"PAYMENT",label:"Payment"},{value:"QC",label:"Quality"},{value:"SYSTEM",label:"System"},{value:"OTHER",label:"Other"}],rv={NEW:{color:"var(--info)",bg:"rgba(59, 130, 246, 0.1)"},OPEN:{color:"var(--primary)",bg:"rgba(99, 102, 241, 0.1)"},IN_PROGRESS:{color:"var(--warning)",bg:"rgba(234, 179, 8, 0.1)"},WAITING_FOR_USER:{color:"var(--danger)",bg:"rgba(239, 68, 68, 0.1)"},WAITING_FOR_ADMIN:{color:"var(--info)",bg:"rgba(59, 130, 246, 0.1)"},RESOLVED:{color:"var(--success)",bg:"rgba(34, 197, 94, 0.1)"},CLOSED:{color:"var(--text-muted)",bg:"var(--bg-secondary)"},CANCELLED:{color:"var(--text-muted)",bg:"var(--bg-secondary)"}},nv={LOW:{color:"var(--text-muted)",label:"Low",bg:"var(--bg-secondary)"},MEDIUM:{color:"var(--warning)",label:"Medium",bg:"rgba(234, 179, 8, 0.1)"},HIGH:{color:"var(--danger)",label:"High",bg:"rgba(239, 68, 68, 0.1)"},CRITICAL:{color:"#dc2626",label:"Critical",bg:"rgba(220, 38, 38, 0.15)"}},lM={ACCOUNT:"",ORDER:"",DELIVERY:"",INVOICE:"",PAYMENT:"",QC:"",SYSTEM:"",OTHER:""};function vNe(){const t=Qr(),[r,n]=k.useState(1),[i,a]=k.useState(""),[s,o]=k.useState(""),[l,u]=k.useState(""),[d,f]=k.useState(null),p=12,{data:x,isLoading:v}=Ve({queryKey:["portal-tickets",r,i,s,l],queryFn:async()=>{const D={page:r,limit:p};i&&(D.status=i),s&&(D.category=s),l&&(D.search=l);const{data:M}=await xe.get("/helpdesk/tickets",{params:D});return M}}),w=x?.tickets||[],C=x?.pagination||{total:0},N={total:C.total,waitingForYou:w.filter(D=>D.status==="WAITING_FOR_USER").length,open:w.filter(D=>["NEW","OPEN","IN_PROGRESS","WAITING_FOR_ADMIN"].includes(D.status)).length,resolved:w.filter(D=>["RESOLVED","CLOSED"].includes(D.status)).length},T=()=>{a(""),o(""),u(""),n(1)},O=i||s||l;return v?e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:Array.from({length:4}).map((D,M)=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},M))}),e.jsx("div",{className:"card skeleton",style:{height:"60px",marginBottom:"1rem"}}),e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},children:Array.from({length:6}).map((D,M)=>e.jsx("div",{className:"card skeleton",style:{height:"160px"}},M))})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Support Tickets"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"View and manage your support requests"})]}),e.jsxs(nr,{to:"/portal/helpdesk/new",className:"btn btn-primary",style:{background:"#0d9488",borderColor:"#0d9488"},children:[e.jsx(cn,{size:16})," New Ticket"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Tickets",value:N.total,icon:e.jsx(Sm,{size:20}),color:"primary",onClick:()=>{a(""),n(1)},active:!i}),e.jsx(st,{title:"Needs Response",value:N.waitingForYou,icon:e.jsx(sn,{size:20}),color:"danger",onClick:()=>{a(i==="WAITING_FOR_USER"?"":"WAITING_FOR_USER"),n(1)},active:i==="WAITING_FOR_USER"}),e.jsx(st,{title:"Open",value:N.open,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>{a(i==="OPEN"?"":"OPEN"),n(1)},active:i==="OPEN"}),e.jsx(st,{title:"Resolved",value:N.resolved,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>{a(i==="RESOLVED"?"":"RESOLVED"),n(1)},active:i==="RESOLVED"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search tickets...",value:l,onChange:D=>{u(D.target.value),n(1)},style:{paddingLeft:"2.25rem"}})]}),e.jsx("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:i,onChange:D=>{a(D.target.value),n(1)},children:yNe.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),e.jsx("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:s,onChange:D=>{o(D.target.value),n(1)},children:xNe.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),O&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:T,children:[e.jsx(kr,{size:14})," Clear"]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:d?"1fr 400px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{children:w.length===0?e.jsx("div",{className:"card",style:{padding:"3rem"},children:e.jsx(fn,{icon:"file",title:"No tickets found",message:O?"Try adjusting your filters":"Create your first support ticket to get help"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},children:w.map(D=>{const M=d?.id===D.id,Y=rv[D.status]||rv.OPEN,q=nv[D.priority]||nv.MEDIUM;return e.jsxs("div",{className:"card",onClick:()=>f(M?null:D),style:{padding:"1.25rem",cursor:"pointer",border:M?"2px solid #0d9488":"1px solid var(--border)",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.25rem"},children:lM[D.category]||""}),e.jsx("code",{style:{fontSize:"0.8125rem",fontWeight:500,color:"var(--text-muted)"},children:D.ticketNo})]}),e.jsx("span",{style:{padding:"0.25rem 0.625rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500,background:Y.bg,color:Y.color},children:D.status.replace(/_/g," ")})]}),e.jsx("h3",{style:{fontSize:"0.9375rem",fontWeight:600,marginBottom:"0.5rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.subject}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem",fontSize:"0.8125rem",color:"var(--text-muted)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(r2,{size:12}),D.category]}),e.jsx("span",{style:{padding:"0.125rem 0.5rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:500,background:q.bg,color:q.color},children:q.label})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.8125rem",color:"var(--text-muted)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(t2,{size:14})," ",D._count?.messages||0]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ah,{size:14})," ",D._count?.attachments||0]})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx(Qt,{size:12}),Ze(new Date(D.lastActivityAt),"MMM d, h:mm a")]})]})]},D.id)})}),C.total>p&&e.jsx("div",{style:{marginTop:"1.5rem"},children:e.jsx(i0,{page:r,pageSize:p,totalCount:C.total,onPageChange:n})})]})}),d&&e.jsxs("div",{className:"card",style:{padding:"1.5rem",position:"sticky",top:"100px",alignSelf:"start"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Ticket Details"}),e.jsx("button",{onClick:()=>f(null),style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:e.jsx(kr,{size:18,style:{color:"var(--text-muted)"}})})]}),e.jsxs("div",{style:{background:"rgba(13, 148, 136, 0.1)",padding:"1rem",borderRadius:"8px",marginBottom:"1.25rem",border:"1px solid rgba(13, 148, 136, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:lM[d.category]||""}),e.jsx("code",{style:{fontSize:"0.875rem",fontWeight:500},children:d.ticketNo})]}),e.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,margin:"0.5rem 0"},children:d.subject})]}),e.jsxs("div",{style:{display:"grid",gap:"0.875rem",fontSize:"0.875rem",marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("span",{style:{padding:"0.125rem 0.5rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:500,background:rv[d.status]?.bg,color:rv[d.status]?.color},children:d.status.replace(/_/g," ")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Category"}),e.jsx("span",{style:{fontWeight:500},children:d.category})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Priority"}),e.jsx("span",{style:{fontWeight:500,color:nv[d.priority]?.color},children:nv[d.priority]?.label||d.priority})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Created"}),e.jsx("span",{style:{fontWeight:500},children:Ze(new Date(d.createdAt),"MMM d, yyyy")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Last Activity"}),e.jsx("span",{style:{fontWeight:500},children:Ze(new Date(d.lastActivityAt),"MMM d, h:mm a")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Messages"}),e.jsx("span",{style:{fontWeight:500},children:d._count?.messages||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Attachments"}),e.jsx("span",{style:{fontWeight:500},children:d._count?.attachments||0})]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>t(`/portal/helpdesk/${d.id}`),style:{width:"100%",background:"#0d9488",borderColor:"#0d9488"},children:[e.jsx(ih,{size:16,style:{marginRight:"0.5rem"}}),"View Full Ticket"]})]})]})]})}const bNe=[{value:"ACCOUNT",label:"Account Issue",description:"Login, profile, or account settings"},{value:"ORDER",label:"Order Issue",description:"Problems with your orders"},{value:"DELIVERY",label:"Delivery Issue",description:"Shipping or delivery problems"},{value:"INVOICE",label:"Invoice Issue",description:"Billing or invoice questions"},{value:"PAYMENT",label:"Payment Issue",description:"Payment or refund requests"},{value:"QC",label:"Quality Issue",description:"Product quality concerns"},{value:"SYSTEM",label:"System Issue",description:"Technical problems or bugs"},{value:"OTHER",label:"Other",description:"Other inquiries"}],jNe=[{value:"LOW",label:"Low",description:"General inquiry, no urgency"},{value:"MEDIUM",label:"Medium",description:"Important but not urgent"},{value:"HIGH",label:"High",description:"Urgent, needs quick response"},{value:"CRITICAL",label:"Critical",description:"Emergency, requires immediate attention"}];function wNe(){const t=Qr(),r=pr(),[n,i]=k.useState({subject:"",description:"",category:"",priority:"MEDIUM",relatedEntityType:"",relatedEntityId:""}),[a,s]=k.useState(""),o=ot({mutationFn:async u=>{const{data:d}=await xe.post("/helpdesk/tickets",u);return d},onSuccess:u=>{r.invalidateQueries({queryKey:["portal-tickets"]}),t(`/portal/helpdesk/${u.id}`)},onError:u=>{s(u.response?.data?.error||"Failed to create ticket")}}),l=u=>{if(u.preventDefault(),s(""),!n.subject.trim()){s("Please enter a subject");return}if(!n.description.trim()){s("Please describe your issue");return}if(!n.category){s("Please select a category");return}o.mutate(n)};return e.jsxs("div",{style:{padding:"1.5rem",maxWidth:"800px",margin:"0 auto"},children:[e.jsxs(nr,{to:"/portal/helpdesk",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",marginBottom:"1rem",textDecoration:"none"},children:[e.jsx(aa,{size:18}),"Back to My Tickets"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[e.jsx(Sm,{size:28,style:{color:"var(--primary)"}}),e.jsx("h1",{style:{margin:0},children:"Create Support Ticket"})]}),e.jsx("form",{onSubmit:l,children:e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a&&e.jsxs("div",{className:"alert alert-danger",style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(sn,{size:18}),a]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Subject *"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Brief summary of your issue",value:n.subject,onChange:u=>i({...n,subject:u.target.value}),maxLength:200})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Category *"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"0.75rem"},children:bNe.map(u=>e.jsxs("label",{style:{padding:"1rem",border:`2px solid ${n.category===u.value?"var(--primary)":"var(--border)"}`,borderRadius:"8px",cursor:"pointer",background:n.category===u.value?"var(--primary-bg)":"transparent",transition:"all 0.2s"},children:[e.jsx("input",{type:"radio",name:"category",value:u.value,checked:n.category===u.value,onChange:d=>i({...n,category:d.target.value}),style:{display:"none"}}),e.jsx("div",{style:{fontWeight:500},children:u.label}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:u.description})]},u.value))})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:jNe.map(u=>e.jsxs("label",{style:{padding:"0.75rem 1rem",border:`2px solid ${n.priority===u.value?"var(--primary)":"var(--border)"}`,borderRadius:"8px",cursor:"pointer",background:n.priority===u.value?"var(--primary-bg)":"transparent",transition:"all 0.2s",flex:"1",minWidth:"140px"},children:[e.jsx("input",{type:"radio",name:"priority",value:u.value,checked:n.priority===u.value,onChange:d=>i({...n,priority:d.target.value}),style:{display:"none"}}),e.jsx("div",{style:{fontWeight:500},children:u.label}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:u.description})]},u.value))})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Description *"}),e.jsx("textarea",{className:"form-input",rows:6,placeholder:"Please describe your issue in detail. Include any relevant information such as order numbers, error messages, or steps to reproduce the problem.",value:n.description,onChange:u=>i({...n,description:u.target.value}),style:{resize:"vertical",minHeight:"120px"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx(nr,{to:"/portal/helpdesk",className:"btn",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:o.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gi,{size:18}),o.isPending?"Submitting...":"Submit Ticket"]})]})]})})]})}const cM={NEW:{color:"var(--info)",bg:"var(--info-bg)",label:"New"},OPEN:{color:"var(--primary)",bg:"var(--primary-bg)",label:"Open"},IN_PROGRESS:{color:"var(--warning)",bg:"var(--warning-bg)",label:"In Progress"},WAITING_FOR_USER:{color:"var(--danger)",bg:"var(--danger-bg)",label:"Waiting for Your Reply"},WAITING_FOR_ADMIN:{color:"var(--info)",bg:"var(--info-bg)",label:"Waiting for Support"},RESOLVED:{color:"var(--success)",bg:"var(--success-bg)",label:"Resolved"},CLOSED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"Closed"},CANCELLED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"Cancelled"}},SNe={LOW:"Low",MEDIUM:"Medium",HIGH:"High",CRITICAL:"Critical"};function CNe(){const{id:t}=hl(),{user:r}=Il(),n=pr(),[i,a]=k.useState(""),{data:s,isLoading:o,error:l}=Ve({queryKey:["portal-ticket",t],queryFn:async()=>{const{data:x}=await xe.get(`/helpdesk/tickets/${t}`);return x},enabled:!!t}),u=ot({mutationFn:async x=>{const{data:v}=await xe.post(`/helpdesk/tickets/${t}/reply`,{body:x});return v},onSuccess:()=>{a(""),n.invalidateQueries({queryKey:["portal-ticket",t]}),n.invalidateQueries({queryKey:["portal-tickets"]})}}),d=x=>{x.preventDefault(),i.trim()&&u.mutate(i)};if(o)return e.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[e.jsx("div",{className:"spinner"}),"Loading ticket..."]});if(l||!s)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsxs(nr,{to:"/portal/helpdesk",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",marginBottom:"1rem",textDecoration:"none"},children:[e.jsx(aa,{size:18}),"Back to My Tickets"]}),e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{children:"Ticket not found"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"This ticket may not exist or you don't have access to view it."})]})]});const f=!["CLOSED","CANCELLED","RESOLVED"].includes(s.status),p=cM[s.status]||cM.NEW;return e.jsxs("div",{style:{padding:"1.5rem",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs(nr,{to:"/portal/helpdesk",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",marginBottom:"1rem",textDecoration:"none"},children:[e.jsx(aa,{size:18}),"Back to My Tickets"]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(Sm,{size:24,style:{color:"var(--primary)"}}),e.jsx("code",{style:{fontSize:"1rem",fontWeight:600},children:s.ticketNo}),e.jsx("span",{className:"badge",style:{background:p.bg,color:p.color,fontWeight:500},children:p.label})]}),e.jsx("h1",{style:{margin:0,fontSize:"1.25rem"},children:s.subject})]}),e.jsxs("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--text-muted)"},children:[e.jsxs("div",{children:["Created ",Ze(new Date(s.createdAt),"MMM d, yyyy h:mm a")]}),e.jsxs("div",{children:["Last update ",Ze(new Date(s.lastActivityAt),"MMM d, yyyy h:mm a")]})]})]})}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",display:"flex",gap:"2rem",flexWrap:"wrap",fontSize:"0.9rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Category:"})," ",e.jsx("strong",{children:s.category})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Priority:"})," ",e.jsx("strong",{children:SNe[s.priority]||s.priority})]}),s.assignedToUser&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Assigned to:"})," ",e.jsxs("strong",{children:[s.assignedToUser.firstName," ",s.assignedToUser.lastName]})]}),s.relatedEntityType&&s.relatedEntityId&&e.jsxs("div",{children:[e.jsxs("span",{style:{color:"var(--text-muted)"},children:["Related ",s.relatedEntityType,":"]})," ",e.jsxs(nr,{to:`/portal/${s.relatedEntityType.toLowerCase()}s/${s.relatedEntityId}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:["View ",e.jsx(ih,{size:12})]})]})]})]}),s.status==="WAITING_FOR_USER"&&e.jsxs("div",{className:"alert alert-warning",style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(sn,{size:18}),e.jsx("span",{children:"Support is waiting for your response. Please reply below."})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(t2,{size:18}),"Conversation"]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:600},children:[s.requesterUser?.firstName?.[0],s.requesterUser?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[s.requesterUser?.firstName," ",s.requesterUser?.lastName]}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginLeft:"0.5rem"},children:["(You)  ",Ze(new Date(s.createdAt),"MMM d, h:mm a")]})]})]}),e.jsx("div",{style:{marginLeft:"40px",whiteSpace:"pre-wrap"},children:s.description}),s.attachments?.filter(x=>!x.messageId).length>0&&e.jsxs("div",{style:{marginLeft:"40px",marginTop:"1rem"},children:[e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"0.5rem"},children:[e.jsx(ah,{size:12})," Attachments"]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:s.attachments.filter(x=>!x.messageId).map(x=>e.jsxs("a",{href:x.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Pr,{size:14}),x.fileName]},x.id))})]})]}),s.messages?.map(x=>{const v=x.createdByUserId===r?.id;return e.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:v?"var(--primary)":"var(--success)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:600},children:[x.createdByUser?.firstName?.[0],x.createdByUser?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[x.createdByUser?.firstName," ",x.createdByUser?.lastName]}),v&&e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginLeft:"0.25rem"},children:"(You)"}),!v&&e.jsx("span",{className:"badge",style:{marginLeft:"0.5rem",background:"var(--success-bg)",color:"var(--success)",fontSize:"0.7rem"},children:"Support"}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginLeft:"0.5rem"},children:[" ",Ze(new Date(x.createdAt),"MMM d, h:mm a")]})]})]}),e.jsx("div",{style:{marginLeft:"40px",whiteSpace:"pre-wrap"},children:x.body}),x.attachments?.length>0&&e.jsx("div",{style:{marginLeft:"40px",marginTop:"1rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:x.attachments.map(w=>e.jsxs("a",{href:w.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Pr,{size:14}),w.fileName]},w.id))})})]},x.id)}),s.messages?.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:[e.jsx(Qt,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("p",{children:"No replies yet. Our support team will respond shortly."})]})]})]}),f?e.jsx("div",{className:"card",children:e.jsxs("form",{onSubmit:d,style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gi,{size:16}),"Your Reply"]}),e.jsx("textarea",{className:"form-input",rows:4,placeholder:"Type your message here...",value:i,onChange:x=>a(x.target.value),style:{resize:"vertical",minHeight:"100px"}})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:!i.trim()||u.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gi,{size:16}),u.isPending?"Sending...":"Send Reply"]})})]})}):e.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center",background:"var(--bg-secondary)"},children:[e.jsx(Ut,{size:32,style:{color:"var(--success)",marginBottom:"0.5rem"}}),e.jsxs("p",{style:{margin:0,color:"var(--text-muted)"},children:["This ticket is ",s.status.toLowerCase(),". If you need further assistance, please create a new ticket."]})]})]})}const NNe={ORDER:qo,BATCH:sa,SHIPMENT:dn,INVOICE:rd,APPROVAL:gu,ALERT:sn,INFO:of,TICKET:am},ANe={ORDER:"#0d9488",BATCH:"#8b5cf6",SHIPMENT:"#f59e0b",INVOICE:"#10b981",APPROVAL:"#ec4899",ALERT:"#ef4444",INFO:"#6b7280",TICKET:"#3b82f6"};function dM(t,r){if(!t||!r)return null;switch(t.toLowerCase()){case"order":return`/portal/orders/${r}/journey`;case"shipment":return"/portal/orders";case"invoice":return"/portal/invoices";case"ticket":return`/portal/helpdesk/${r}`;default:return null}}function ENe(){const t=Qr(),r=pr(),[n,i]=k.useState("all"),[a,s]=k.useState(""),[o,l]=k.useState(1),u=20,{data:d,isLoading:f}=Ve({queryKey:["portal-notifications",n,o],queryFn:async()=>{const O=new URLSearchParams;n==="unread"&&O.append("unreadOnly","true"),O.append("limit",u.toString()),O.append("page",o.toString());const{data:D}=await xe.get(`/notifications?${O.toString()}`);return D}}),p=ot({mutationFn:async O=>{await xe.patch(`/notifications/${O}/read`)},onSuccess:()=>{r.invalidateQueries({queryKey:["portal-notifications"]}),r.invalidateQueries({queryKey:["notifications"]})}}),x=ot({mutationFn:async()=>{await xe.patch("/notifications/read-all")},onSuccess:()=>{r.invalidateQueries({queryKey:["portal-notifications"]}),r.invalidateQueries({queryKey:["notifications"]})}}),v=O=>{O.isRead||p.mutate(O.id);const D=dM(O.relatedType,O.relatedId);D&&t(D)},w=d?.notifications||[],C=d?.unreadCount||0,N=w.filter(O=>!(n==="read"&&!O.isRead||a&&O.type!==a)),T=[...new Set(w.map(O=>O.type))];return f?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(xo,{size:24,style:{color:"#0d9488"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Notifications"}),e.jsxs("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:[C," unread notification",C!==1?"s":""]})]})]}),C>0&&e.jsxs("button",{onClick:()=>x.mutate(),disabled:x.isPending,className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#0d9488",borderColor:"#0d9488",color:"white"},children:[e.jsx(XL,{size:16}),"Mark All as Read"]})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:16,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:"Filter:"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","unread","read"].map(O=>e.jsx("button",{onClick:()=>{i(O),l(1)},style:{padding:"0.375rem 0.75rem",borderRadius:"6px",border:"none",background:n===O?"#0d9488":"var(--bg-secondary)",color:n===O?"white":"var(--text-primary)",fontSize:"0.8rem",fontWeight:500,cursor:"pointer",textTransform:"capitalize"},children:O},O))}),T.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"1px",height:"24px",background:"var(--border)",margin:"0 0.5rem"}}),e.jsxs("select",{value:a,onChange:O=>s(O.target.value),className:"form-select",style:{fontSize:"0.8rem",padding:"0.375rem 0.75rem",minWidth:"140px"},children:[e.jsx("option",{value:"",children:"All Types"}),T.map(O=>e.jsx("option",{value:O,children:O},O))]})]})]})}),e.jsx("div",{className:"card",style:{padding:0},children:N.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(xo,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:n==="unread"?"No unread notifications":"No notifications"})]}):e.jsx("div",{children:N.map((O,D)=>{const M=NNe[O.type]||xo,Y=ANe[O.type]||"#6b7280",q=!!dM(O.relatedType,O.relatedId);return e.jsxs("div",{onClick:()=>v(O),style:{display:"flex",gap:"1rem",padding:"1rem 1.25rem",borderBottom:D<N.length-1?"1px solid var(--border)":"none",background:O.isRead?"transparent":"rgba(13, 148, 136, 0.03)",cursor:q?"pointer":"default",transition:"background 0.15s"},onMouseEnter:W=>{q&&(W.currentTarget.style.background="var(--bg-secondary)")},onMouseLeave:W=>{W.currentTarget.style.background=O.isRead?"transparent":"rgba(13, 148, 136, 0.03)"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:`${Y}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(M,{size:20,style:{color:Y}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem",marginBottom:"0.25rem"},children:[e.jsxs("div",{style:{fontWeight:O.isRead?400:600,fontSize:"0.9375rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.title,q&&e.jsx(ih,{size:14,style:{color:"var(--text-muted)",opacity:.6}})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",whiteSpace:"nowrap"},children:Ze(new Date(O.createdAt),"MMM d, h:mm a")})]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"var(--text-muted)",lineHeight:1.5},children:O.message}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500,padding:"0.125rem 0.5rem",borderRadius:"4px",background:`${Y}15`,color:Y,textTransform:"uppercase",letterSpacing:"0.5px"},children:O.type}),!O.isRead&&e.jsxs("button",{onClick:W=>{W.stopPropagation(),p.mutate(O.id)},style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:"#0d9488",background:"none",border:"none",cursor:"pointer",padding:0},children:[e.jsx(Ai,{size:12}),"Mark as read"]})]})]})]},O.id)})})}),d&&d.totalCount>u&&e.jsx("div",{style:{marginTop:"1rem"},children:e.jsx(i0,{page:o,pageSize:u,totalCount:d.totalCount,onPageChange:l})})]})}const uM=[{id:"countries",label:"Countries",icon:sm},{id:"cities",label:"Cities",icon:Ea},{id:"regions",label:"Regions",icon:IZ},{id:"categories",label:"Categories",icon:r2},{id:"couriers",label:"Couriers",icon:dn},{id:"vehicles",label:"Vehicles",icon:ZL},{id:"dose-units",label:"Dose Units",icon:Mc},{id:"product-types",label:"Product Types",icon:Rr},{id:"production-methods",label:"Production Methods",icon:lu},{id:"currencies",label:"Currencies",icon:sf},{id:"attachments",label:"Attachment Types",icon:ah},{id:"notifications",label:"Notification Routing",icon:xo,link:"/settings/notifications"},{id:"channels",label:"Notification Channels",icon:uc,link:"/admin/notification-channels"},{id:"announcements",label:"Announcements",icon:az,link:"/admin/announcements"},{id:"languages",label:"Languages",icon:py,link:"/admin/languages"},{id:"exchange-rates",label:"Exchange Rates",icon:sf,link:"/admin/exchange-rates"},{id:"localization",label:"Localization",icon:Qt,link:"/admin/localization"},{id:"translations",label:"Translations",icon:sm,link:"/admin/translations"},{id:"zatca",label:"ZATCA Integration",icon:gu,link:"/admin/zatca"}];function _Ne(){const[t,r]=k.useState("countries"),[n,i]=k.useState(!1),[a,s]=k.useState(null),[o,l]=k.useState({}),u=pr(),d=Qr(),{data:f}=Ve({queryKey:["settings","countries"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/countries");return Q}}),{data:p}=Ve({queryKey:["settings","cities"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/cities");return Q}}),{data:x}=Ve({queryKey:["settings","regions"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/regions");return Q}}),{data:v}=Ve({queryKey:["settings","categories"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/categories");return Q}}),{data:w}=Ve({queryKey:["settings","couriers"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/couriers");return Q}}),{data:C}=Ve({queryKey:["settings","vehicles"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/vehicles");return Q}}),{data:N}=Ve({queryKey:["settings","dose-units"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/dose-units");return Q}}),{data:T}=Ve({queryKey:["settings","product-types"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/product-types");return Q}}),{data:O}=Ve({queryKey:["settings","production-methods"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/production-methods");return Q}}),{data:D}=Ve({queryKey:["settings","currencies"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/currencies");return Q}}),M=ot({mutationFn:async({endpoint:Q,data:de})=>xe.post(`/settings/${Q}`,de),onSuccess:()=>{u.invalidateQueries({queryKey:["settings",t]}),i(!1),l({})}}),Y=ot({mutationFn:async({endpoint:Q,id:de,data:le})=>xe.put(`/settings/${Q}/${de}`,le),onSuccess:()=>{u.invalidateQueries({queryKey:["settings",t]}),i(!1),s(null),l({})}}),q=ot({mutationFn:async({endpoint:Q,id:de})=>xe.delete(`/settings/${Q}/${de}`),onSuccess:()=>{u.invalidateQueries({queryKey:["settings",t]})}}),W=()=>{s(null),l({}),i(!0)},J=Q=>{s(Q),l(Q),i(!0)},z=async Q=>{confirm("Are you sure you want to delete this item?")&&q.mutate({endpoint:t,id:Q})},G=()=>{a?Y.mutate({endpoint:t,id:a.id,data:o}):M.mutate({endpoint:t,data:o})},ne=()=>{switch(t){case"countries":return f||[];case"cities":return p||[];case"regions":return x||[];case"categories":return v||[];case"couriers":return w||[];case"vehicles":return C||[];case"dose-units":return N||[];case"product-types":return T||[];case"production-methods":return O||[];case"currencies":return D||[];default:return[]}},Z=()=>{const Q=ne();switch(t){case"countries":return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Name (Arabic)"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:de.code}),e.jsx("td",{children:de.name}),e.jsx("td",{dir:"rtl",children:de.nameAr||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"cities":return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Name (Arabic)"}),e.jsx("th",{children:"Region"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:de.code}),e.jsx("td",{children:de.name}),e.jsx("td",{dir:"rtl",children:de.nameAr||"-"}),e.jsx("td",{children:de.region?.name||"-"}),e.jsx("td",{children:de.country?.name||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"regions":return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Name (Arabic)"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:de.code}),e.jsx("td",{children:de.name}),e.jsx("td",{dir:"rtl",children:de.nameAr||"-"}),e.jsx("td",{children:de.country?.name||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"couriers":return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Vehicles"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:de.code}),e.jsx("td",{children:de.name}),e.jsx("td",{children:de.phone||"-"}),e.jsx("td",{children:de.email||"-"}),e.jsx("td",{children:de.vehicles?.length||0}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"vehicles":return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Plate Number"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"Capacity"}),e.jsx("th",{children:"Courier"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:de.plateNumber}),e.jsx("td",{children:de.vehicleType}),e.jsx("td",{children:de.model||"-"}),e.jsx("td",{children:de.capacity||"-"}),e.jsx("td",{children:de.courier?.name||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"currencies":return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Symbol"}),e.jsx("th",{children:"Exchange Rate"}),e.jsx("th",{children:"Default"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:600},children:de.code}),e.jsx("td",{children:de.name}),e.jsx("td",{style:{fontSize:"1.125rem"},children:de.symbol}),e.jsx("td",{children:de.exchangeRate.toFixed(4)}),e.jsx("td",{children:de.isDefault&&e.jsx("span",{className:"badge badge-info",children:"Default"})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),!de.isDefault&&e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"attachments":return e.jsxs("div",{style:{padding:"3rem",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx(ah,{size:48,style:{color:"var(--primary)",marginBottom:"1rem"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem"},children:"Attachment Type Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:"Configure allowed file types, extensions, and size limits for attachments."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>d("/settings/attachments"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:["Manage Attachment Types",e.jsx(ih,{size:16})]})]});default:return e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),e.jsxs("tbody",{children:[Q.map(de=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:de.code}),e.jsx("td",{children:de.name}),e.jsx("td",{children:de.description||de.symbol||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${de.isActive?"success":"default"}`,children:de.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>J(de),title:"Edit",children:e.jsx(Kh,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z(de.id),title:"Delete",children:e.jsx(ra,{size:14})})]})})]},de.id)),Q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]})}},ie=()=>{switch(t){case"countries":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value.toUpperCase()}),placeholder:"e.g., SA, AE, US",maxLength:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"e.g., Saudi Arabia"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic)"}),e.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:o.nameAr||"",onChange:Q=>l({...o,nameAr:Q.target.value}),placeholder:"e.g.,   "})]})]});case"cities":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Country *"}),e.jsxs("select",{className:"form-select",value:o.countryId||"",onChange:Q=>l({...o,countryId:Q.target.value,regionId:""}),children:[e.jsx("option",{value:"",children:"Select Country"}),f?.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Region *"}),e.jsxs("select",{className:"form-select",value:o.regionId||"",onChange:Q=>l({...o,regionId:Q.target.value}),children:[e.jsx("option",{value:"",children:"Select Region"}),x?.filter(Q=>Q.countryId===o.countryId).map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value.toUpperCase()}),placeholder:"e.g., JED, RUH"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"e.g., Jeddah"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic)"}),e.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:o.nameAr||"",onChange:Q=>l({...o,nameAr:Q.target.value}),placeholder:"e.g., "})]})]});case"regions":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Country *"}),e.jsxs("select",{className:"form-select",value:o.countryId||"",onChange:Q=>l({...o,countryId:Q.target.value}),children:[e.jsx("option",{value:"",children:"Select Country"}),f?.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value.toUpperCase()}),placeholder:"e.g., WEST, CENT"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"e.g., Western Region"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic)"}),e.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:o.nameAr||"",onChange:Q=>l({...o,nameAr:Q.target.value}),placeholder:"e.g.,  "})]})]});case"couriers":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value.toUpperCase()}),placeholder:"e.g., COR001"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"e.g., Express Medical Courier"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("input",{type:"text",className:"form-input",value:o.phone||"",onChange:Q=>l({...o,phone:Q.target.value}),placeholder:"e.g., +966 12 345 6789"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-input",value:o.email||"",onChange:Q=>l({...o,email:Q.target.value}),placeholder:"e.g., courier@example.com"})]})]});case"vehicles":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Courier"}),e.jsxs("select",{className:"form-select",value:o.courierId||"",onChange:Q=>l({...o,courierId:Q.target.value||null}),children:[e.jsx("option",{value:"",children:"No Courier"}),w?.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Plate Number *"}),e.jsx("input",{type:"text",className:"form-input",value:o.plateNumber||"",onChange:Q=>l({...o,plateNumber:Q.target.value.toUpperCase()}),placeholder:"e.g., ABC 1234"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Vehicle Type *"}),e.jsxs("select",{className:"form-select",value:o.vehicleType||"",onChange:Q=>l({...o,vehicleType:Q.target.value}),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Van",children:"Van"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Motorcycle",children:"Motorcycle"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Model"}),e.jsx("input",{type:"text",className:"form-input",value:o.model||"",onChange:Q=>l({...o,model:Q.target.value}),placeholder:"e.g., Toyota Hiace 2024"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Capacity"}),e.jsx("input",{type:"text",className:"form-input",value:o.capacity||"",onChange:Q=>l({...o,capacity:Q.target.value}),placeholder:"e.g., 50 packages"})]})]});case"currencies":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value.toUpperCase()}),placeholder:"e.g., SAR, USD, EUR",maxLength:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"e.g., Saudi Riyal"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Symbol *"}),e.jsx("input",{type:"text",className:"form-input",value:o.symbol||"",onChange:Q=>l({...o,symbol:Q.target.value}),placeholder:"e.g., ., $, ",maxLength:5})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Exchange Rate (to SAR) *"}),e.jsx("input",{type:"number",className:"form-input",value:o.exchangeRate||1,onChange:Q=>l({...o,exchangeRate:parseFloat(Q.target.value)}),step:"0.0001",min:"0"}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Rate relative to SAR (SAR = 1.0000)"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:o.isDefault||!1,onChange:Q=>l({...o,isDefault:Q.target.checked})}),e.jsx("span",{className:"form-label",style:{marginBottom:0},children:"Set as default currency"})]})})]});case"dose-units":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value}),placeholder:"e.g., mCi, MBq, GBq"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"e.g., Millicurie"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Symbol *"}),e.jsx("input",{type:"text",className:"form-input",value:o.symbol||"",onChange:Q=>l({...o,symbol:Q.target.value}),placeholder:"e.g., mCi"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("input",{type:"text",className:"form-input",value:o.description||"",onChange:Q=>l({...o,description:Q.target.value}),placeholder:"e.g., Unit of radioactivity"})]})]});default:return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code||"",onChange:Q=>l({...o,code:Q.target.value.toUpperCase()}),placeholder:"Enter code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name||"",onChange:Q=>l({...o,name:Q.target.value}),placeholder:"Enter name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic)"}),e.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:o.nameAr||"",onChange:Q=>l({...o,nameAr:Q.target.value}),placeholder:"Enter Arabic name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-input",value:o.description||"",onChange:Q=>l({...o,description:Q.target.value}),placeholder:"Enter description",rows:2})]})]})}},me=uM.find(Q=>Q.id===t),ce=me?.icon||lf;return e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Configure lookup tables and system master data"})]})}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[e.jsx("div",{className:"card",style:{width:"220px",padding:"0.5rem",flexShrink:0},children:e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:uM.map(Q=>{const de=Q.icon,le=t===Q.id,ye=Q;return e.jsxs("button",{onClick:()=>{ye.link?d(ye.link):r(Q.id)},className:le?"btn btn-primary":"btn btn-secondary",style:{justifyContent:"flex-start",width:"100%",fontWeight:le?600:400},children:[e.jsx(de,{size:16}),Q.label,ye.link&&e.jsx(ih,{size:12,style:{marginLeft:"auto"}})]},Q.id)})})}),e.jsxs("div",{className:"card",style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ce,{size:18}),me?.label]}),e.jsxs("button",{className:"btn btn-primary",onClick:W,children:[e.jsx(cn,{size:18}),"Add New"]})]}),e.jsx("div",{style:{overflow:"auto"},children:Z()})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),style:{maxWidth:"500px",width:"95%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{style:{fontWeight:600,margin:0,fontSize:"1.125rem"},children:[a?"Edit":"Add New"," ",me?.label.replace(/ies$/,"y").replace(/s$/,"")]}),e.jsx("button",{className:"btn btn-sm",onClick:()=>i(!1),style:{padding:"0.375rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:e.jsx(kr,{size:18})})]}),e.jsxs("div",{className:"modal-body",children:[ie(),a&&e.jsx("div",{className:"form-group",style:{marginTop:"1.25rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"0.75rem 1rem",background:o.isActive!==!1?"rgba(34, 197, 94, 0.08)":"rgba(239, 68, 68, 0.08)",borderRadius:"var(--radius)",border:`1px solid ${o.isActive!==!1?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:[e.jsx("input",{type:"checkbox",checked:o.isActive!==!1,onChange:Q=>l({...o,isActive:Q.target.checked}),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{style:{fontWeight:500,color:o.isActive!==!1?"var(--success)":"var(--danger)"},children:o.isActive!==!1?"Active":"Inactive"})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:G,disabled:M.isPending||Y.isPending,children:M.isPending||Y.isPending?"Saving...":"Save"})]})]})})]})}function TNe(){const t=Qr(),{data:r,isLoading:n,isError:i,error:a,refetch:s,isFetching:o}=Ve({queryKey:["dashboard-qc"],queryFn:async()=>{const{data:u}=await xe.get("/dashboard/qc");return u},refetchInterval:6e4});if(i)return e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx($r,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load QC dashboard"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(u=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},u))}),e.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const l=[{id:"qc_failed",type:"error",icon:"qc_failed",title:"QC Failed Batches",count:r?.kpis?.qcFailed||0,linkTo:"/batches?status=FAILED_QC"}];return e.jsxs("div",{children:[e.jsx(a0,{title:"QC Dashboard",subtitle:"Quality control queue and batch testing overview",lastRefreshed:r?.lastRefreshed?new Date(r.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:o,actions:e.jsx("button",{className:"btn btn-secondary",onClick:()=>t("/"),children:"Back to Overview"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Awaiting Samples",value:r?.kpis?.awaitingSamples||0,icon:e.jsx(sa,{size:20}),color:"warning",linkTo:"/qc?status=QC_PENDING"}),e.jsx(st,{title:"QC In Progress",value:r?.kpis?.qcInProgress||0,icon:e.jsx(Qt,{size:20}),color:"info",linkTo:"/qc?status=QC_IN_PROGRESS"}),e.jsx(st,{title:"QC Failed",value:r?.kpis?.qcFailed||0,icon:e.jsx(ci,{size:20}),color:r?.kpis?.qcFailed>0?"danger":void 0,linkTo:"/batches?status=FAILED_QC"}),e.jsx(st,{title:"Nearing Deadline",value:r?.kpis?.nearingDeadline||0,icon:e.jsx($r,{size:20}),color:r?.kpis?.nearingDeadline>0?"warning":void 0,linkTo:"/qc?urgent=true"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[e.jsx(Tc,{title:"QC Queue - Prioritized by Delivery Urgency",items:r?.queue||[],viewAllLink:"/qc",maxItems:10,icon:e.jsx(sa,{size:18,style:{color:"#d97706"}}),accentColor:"#d97706",emptyMessage:"No batches awaiting QC testing"}),e.jsx(yy,{title:"QC Exceptions",items:l})]})]})}function INe(){const t=Qr(),{data:r,isLoading:n,isError:i,error:a,refetch:s,isFetching:o}=Ve({queryKey:["dashboard-qp"],queryFn:async()=>{const{data:u}=await xe.get("/dashboard/qp");return u},refetchInterval:6e4});if(i)return e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load QP dashboard"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(u=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},u))}),e.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const l=[{id:"on_hold",type:"warning",icon:"on_hold",title:"On Hold Batches",count:r?.kpis?.onHold||0,linkTo:"/batches?status=ON_HOLD"},{id:"rejected",type:"error",icon:"qc_failed",title:"Rejected Batches",count:r?.kpis?.rejected||0,linkTo:"/batches?status=REJECTED"}];return e.jsxs("div",{children:[e.jsx(a0,{title:"QP Release Dashboard",subtitle:"Batch release queue and QP approval overview",lastRefreshed:r?.lastRefreshed?new Date(r.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:o,actions:e.jsx("button",{className:"btn btn-secondary",onClick:()=>t("/"),children:"Back to Overview"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Awaiting QP Release",value:r?.kpis?.awaitingQP||0,icon:e.jsx(ia,{size:20}),color:"warning",linkTo:"/release?status=QC_PASSED"}),e.jsx(st,{title:"On Hold",value:r?.kpis?.onHold||0,icon:e.jsx(sn,{size:20}),color:r?.kpis?.onHold>0?"warning":void 0,linkTo:"/batches?status=ON_HOLD"}),e.jsx(st,{title:"Released Today",value:r?.kpis?.releasedToday||0,icon:e.jsx(Ut,{size:20}),color:"success",linkTo:"/batches?status=RELEASED&today=true"}),e.jsx(st,{title:"Rejected",value:r?.kpis?.rejected||0,icon:e.jsx(ci,{size:20}),color:r?.kpis?.rejected>0?"danger":void 0,linkTo:"/batches?status=REJECTED"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[e.jsx(Tc,{title:"QP Release Queue",items:r?.queue||[],viewAllLink:"/release",maxItems:10,icon:e.jsx(ia,{size:18,style:{color:"#7c3aed"}}),accentColor:"#7c3aed",emptyMessage:"No batches awaiting QP release"}),e.jsx(yy,{title:"Release Exceptions",items:l})]})]})}function ONe(){const t=Qr(),{data:r,isLoading:n,isError:i,error:a,refetch:s,isFetching:o}=Ve({queryKey:["dashboard-dispensing"],queryFn:async()=>{const{data:u}=await xe.get("/dashboard/dispensing");return u},refetchInterval:6e4});if(i)return e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx($r,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load Dispensing dashboard"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(u=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},u))}),e.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const l=[{id:"blocked",type:"warning",icon:"on_hold",title:"Blocked (Not Released)",count:r?.kpis?.blocked||0,linkTo:"/batches?status=ON_HOLD,FAILED_QC"}];return e.jsxs("div",{children:[e.jsx(a0,{title:"Dispensing Dashboard",subtitle:"Dose dispensing queue and progress tracking",lastRefreshed:r?.lastRefreshed?new Date(r.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:o,actions:e.jsx("button",{className:"btn btn-secondary",onClick:()=>t("/"),children:"Back to Overview"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Ready to Dispense",value:r?.kpis?.readyToDispense||0,icon:e.jsx(Rr,{size:20}),color:"success",linkTo:"/dispensing?ready=true"}),e.jsx(st,{title:"Dispensing In Progress",value:r?.kpis?.dispensingInProgress||0,icon:e.jsx(yo,{size:20}),color:"info",linkTo:"/dispensing?status=DISPENSING_IN_PROGRESS"}),e.jsx(st,{title:"Blocked",value:r?.kpis?.blocked||0,icon:e.jsx(FC,{size:20}),color:r?.kpis?.blocked>0?"warning":void 0,linkTo:"/batches?status=ON_HOLD,FAILED_QC"}),e.jsx(st,{title:"Dispensed Today",value:r?.kpis?.dispensedToday||0,icon:e.jsx(Ut,{size:20}),color:"success",linkTo:"/dispensing?dispensed=today"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[e.jsx(Tc,{title:"Dispensing Queue",items:r?.queue||[],viewAllLink:"/dispensing",maxItems:10,icon:e.jsx(Rr,{size:18,style:{color:"#0d9488"}}),accentColor:"#0d9488",emptyMessage:"No batches ready for dispensing"}),e.jsx(yy,{title:"Dispensing Exceptions",items:l})]})]})}function kNe(){const t=Qr(),{data:r,isLoading:n,isError:i,error:a,refetch:s,isFetching:o}=Ve({queryKey:["dashboard-logistics"],queryFn:async()=>{const{data:u}=await xe.get("/dashboard/logistics");return u},refetchInterval:6e4});if(i)return e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx($r,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load Logistics dashboard"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4,5].map(u=>e.jsx("div",{className:"card skeleton",style:{height:"100px"}},u))}),e.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const l=[{id:"delayed",type:"error",icon:"delay",title:"Delayed Shipments",count:r?.kpis?.delayed||0,linkTo:"/shipments?status=DELAYED"}];return e.jsxs("div",{children:[e.jsx(a0,{title:"Logistics Dashboard",subtitle:"Shipment tracking and delivery management",lastRefreshed:r?.lastRefreshed?new Date(r.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:o,actions:e.jsx("button",{className:"btn btn-secondary",onClick:()=>t("/"),children:"Back to Overview"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Ready to Pack",value:r?.kpis?.readyToPack||0,icon:e.jsx(Rr,{size:20}),linkTo:"/shipments?status=CREATED"}),e.jsx(st,{title:"Ready to Dispatch",value:r?.kpis?.readyToDispatch||0,icon:e.jsx(Gi,{size:20}),color:"info",linkTo:"/shipments?status=ASSIGNED"}),e.jsx(st,{title:"In Transit",value:r?.kpis?.inTransit||0,icon:e.jsx(dn,{size:20}),color:"warning",linkTo:"/shipments?status=IN_TRANSIT"}),e.jsx(st,{title:"Delayed",value:r?.kpis?.delayed||0,icon:e.jsx($r,{size:20}),color:r?.kpis?.delayed>0?"danger":void 0,linkTo:"/shipments?status=DELAYED"}),e.jsx(st,{title:"Delivered Today",value:r?.kpis?.deliveredToday||0,icon:e.jsx(Ut,{size:20}),color:"success",linkTo:"/shipments?delivered=today"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[e.jsx(Tc,{title:"Logistics Queue",items:r?.queue||[],viewAllLink:"/shipments",maxItems:10,icon:e.jsx(dn,{size:18,style:{color:"#0891b2"}}),accentColor:"#0891b2",emptyMessage:"No shipments in queue"}),e.jsx(yy,{title:"Logistics Exceptions",items:l})]})]})}function DNe(){const t=pr(),[r,n]=k.useState("PENDING_CONFIRMATION"),[i,a]=k.useState(null),[s,o]=k.useState(!1),[l,u]=k.useState(""),{data:d}=Ve({queryKey:["payment-stats"],queryFn:async()=>{const{data:T}=await xe.get("/payments/stats");return T}}),{data:f,isLoading:p}=Ve({queryKey:["payment-requests",r],queryFn:async()=>{const T={limit:50};r&&(T.status=r);const{data:O}=await xe.get("/payments",{params:T});return O.data}}),{data:x,refetch:v}=Ve({queryKey:["payment-request-detail",i?.id],queryFn:async()=>{if(!i?.id)return null;const{data:T}=await xe.get(`/payments/${i.id}`);return T},enabled:!!i?.id}),w=ot({mutationFn:async T=>{const{data:O}=await xe.post(`/payments/${T}/confirm`);return O},onSuccess:T=>{$i.success("Payment confirmed! Receipt voucher generated."),t.invalidateQueries({queryKey:["payment-requests"]}),t.invalidateQueries({queryKey:["payment-stats"]}),v(),a(null)},onError:T=>{$i.error(T.response?.data?.error||"Failed to confirm payment")}}),C=ot({mutationFn:async({id:T,reason:O})=>{const{data:D}=await xe.post(`/payments/${T}/reject`,{reason:O});return D},onSuccess:()=>{$i.success("Payment rejected"),t.invalidateQueries({queryKey:["payment-requests"]}),t.invalidateQueries({queryKey:["payment-stats"]}),o(!1),u(""),a(null)},onError:T=>{$i.error(T.response?.data?.error||"Failed to reject payment")}}),N=T=>{const O={PENDING_CONFIRMATION:{color:"warning",icon:Qt},CONFIRMED:{color:"success",icon:Ut},REJECTED:{color:"danger",icon:ci}},{color:D,icon:M}=O[T]||{color:"default",icon:Qt};return e.jsxs("span",{className:`badge badge-${D}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(M,{size:12}),T]})};return p?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Payment Approvals"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Review and process customer payment submissions"})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:r==="PENDING_CONFIRMATION"?"2px solid var(--warning)":void 0},onClick:()=>n("PENDING_CONFIRMATION"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(234, 179, 8, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Qt,{size:20,style:{color:"var(--warning)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600},children:d?.pending||0}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Pending Review"})]})]})}),e.jsx("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:r==="CONFIRMED"?"2px solid var(--success)":void 0},onClick:()=>n("CONFIRMED"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ut,{size:20,style:{color:"var(--success)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--success)"},children:d?.confirmed||0}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Confirmed"})]})]})}),e.jsx("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:r==="REJECTED"?"2px solid var(--danger)":void 0},onClick:()=>n("REJECTED"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ci,{size:20,style:{color:"var(--danger)"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--danger)"},children:d?.rejected||0}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Rejected"})]})]})}),e.jsx("div",{className:"card",style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ul,{size:20,style:{color:"#0d9488"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600},children:Mf(d?.totalPendingAmount||0)}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Pending Amount"})]})]})})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:i?"1fr 450px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Invoice"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Method"}),e.jsx("th",{children:"Submitted"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"60px"},children:"Action"})]})}),e.jsxs("tbody",{children:[f?.map(T=>e.jsxs("tr",{style:{cursor:"pointer",backgroundColor:i?.id===T.id?"var(--background-secondary)":void 0},onClick:()=>a(T),children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:T.invoice?.customer?.nameEn||T.invoice?.customer?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:T.invoice?.customer?.code})]}),e.jsx("td",{style:{fontFamily:"monospace"},children:T.invoice?.invoiceNumber}),e.jsx("td",{style:{fontWeight:500},children:Mf(T.amount)}),e.jsx("td",{children:T.paymentMethod?.replace("_"," ")}),e.jsx("td",{children:Ze(new Date(T.submittedAt),"MMM d, HH:mm")}),e.jsx("td",{children:N(T.status)}),e.jsx("td",{onClick:O=>O.stopPropagation(),children:e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>a(T),children:e.jsx(os,{size:14})})})]},T.id)),(!f||f.length===0)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:7,style:{textAlign:"center",padding:"3rem"},children:[e.jsx(Ul,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"No payment requests found"})]})})]})]})}),i&&e.jsxs("div",{className:"card",style:{maxHeight:"calc(100vh - 240px)",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingBottom:"1rem",borderBottom:"1px solid var(--border)",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:"Payment Request"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:x?.invoice?.customer?.nameEn||x?.invoice?.customer?.name})]}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>a(null),children:e.jsx(kr,{size:14})})]}),e.jsxs("div",{style:{backgroundColor:"rgba(234, 179, 8, 0.1)",borderLeft:"4px solid #3b82f6",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Payment Amount"}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"#16a34a"},children:Mf(i.amount)})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Invoice"}),e.jsx("div",{style:{fontWeight:500,fontFamily:"monospace",color:"var(--primary)"},children:x?.invoice?.invoiceNumber})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Method"}),e.jsx("div",{style:{fontWeight:600},children:i.paymentMethod?.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Submitted"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(i.submittedAt),"MMM d, yyyy HH:mm")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Status"}),e.jsx("div",{children:N(i.status)})]})]}),i.reference&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Reference"}),e.jsx("div",{style:{fontFamily:"monospace",backgroundColor:"var(--background-secondary)",padding:"0.5rem",borderRadius:"0.25rem"},children:i.reference})]}),i.notes&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Notes"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:i.notes})]}),i.proofUrl&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Payment Proof"}),e.jsxs("a",{href:i.proofUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pr,{size:16}),"View Proof",e.jsx(ih,{size:14})]})]}),x?.invoice&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.75rem"},children:"Invoice Summary"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Total Amount"}),e.jsx("span",{style:{fontWeight:500},children:Mf(x.invoice.totalAmount)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Already Paid"}),e.jsx("span",{style:{fontWeight:500,color:"#16a34a"},children:Mf(x.invoice.paidAmount)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid var(--border)",paddingTop:"0.75rem"},children:[e.jsx("span",{style:{fontWeight:500},children:"Balance After This Payment"}),e.jsx("span",{style:{fontWeight:600},children:Mf(Math.max(0,x.invoice.totalAmount-x.invoice.paidAmount-i.amount))})]})]})]}),i.status==="REJECTED"&&i.rejectReason&&e.jsxs("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--danger)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--danger)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Rejection Reason"}),e.jsx("div",{style:{color:"var(--danger)"},children:i.rejectReason})]}),i.status==="PENDING_CONFIRMATION"&&e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("button",{className:"btn btn-success",style:{flex:1},onClick:()=>w.mutate(i.id),disabled:w.isPending,children:[e.jsx(Ai,{size:16,style:{marginRight:"0.5rem"}}),w.isPending?"Confirming...":"Confirm Payment"]}),e.jsxs("button",{className:"btn btn-danger",style:{flex:1},onClick:()=>o(!0),disabled:C.isPending,children:[e.jsx(kr,{size:16,style:{marginRight:"0.5rem"}}),"Reject"]})]}),i.reviewedBy&&e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[i.status==="CONFIRMED"?"Confirmed":"Rejected"," by ",i.reviewedBy?.fullName||i.reviewedBy?.username,i.reviewedAt&&` on ${Ze(new Date(i.reviewedAt),"MMM d, yyyy HH:mm")}`]})]})]}),s&&e.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:e.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Reject Payment"}),e.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:e.jsx(kr,{size:20})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Rejection Reason *"}),e.jsx("textarea",{className:"form-textarea",value:l,onChange:T=>u(T.target.value),placeholder:"Please provide a reason for rejection",rows:3,required:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>C.mutate({id:i.id,reason:l}),disabled:!l||C.isPending,children:C.isPending?"Rejecting...":"Reject Payment"})]})]})})]})}function PNe(){const t=pr(),[r,n]=k.useState(!1),[i,a]=k.useState(null),[s,o]=k.useState({name:"",extensions:"",mimeTypes:"",maxSizeMB:5,isActive:!0}),{data:l,isLoading:u}=Ve({queryKey:["attachment-types"],queryFn:async()=>{const{data:C}=await xe.get("/attachments/types");return C}}),d=ot({mutationFn:async C=>{i?await xe.put(`/attachments/types/${i.id}`,C):await xe.post("/attachments/types",C)},onSuccess:()=>{t.invalidateQueries({queryKey:["attachment-types"]}),$i.success(i?"Type updated":"Type created"),x()},onError:()=>{$i.error("Failed to save attachment type")}}),f=ot({mutationFn:async C=>{await xe.delete(`/attachments/types/${C}`)},onSuccess:()=>{t.invalidateQueries({queryKey:["attachment-types"]}),$i.success("Type deleted")},onError:()=>{$i.error("Cannot delete type with existing attachments")}}),p=C=>{C?(a(C),o({name:C.name,extensions:C.extensions.join(", "),mimeTypes:C.mimeTypes.join(", "),maxSizeMB:C.maxSizeMB,isActive:C.isActive})):(a(null),o({name:"",extensions:"",mimeTypes:"",maxSizeMB:5,isActive:!0})),n(!0)},x=()=>{n(!1),a(null)},v=C=>{C.preventDefault();const N={name:s.name.trim(),extensions:s.extensions.split(",").map(T=>T.trim().toLowerCase().replace(/^\./,"")).filter(Boolean),mimeTypes:s.mimeTypes.split(",").map(T=>T.trim()).filter(Boolean),maxSizeMB:Number(s.maxSizeMB),isActive:s.isActive};d.mutate(N)},w=[{label:"PDF Documents",value:"pdf",mime:"application/pdf"},{label:"Images (JPG)",value:"jpg, jpeg",mime:"image/jpeg"},{label:"Images (PNG)",value:"png",mime:"image/png"},{label:"Word Documents",value:"doc, docx",mime:"application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{label:"Excel Files",value:"xls, xlsx",mime:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{label:"Text Files",value:"txt",mime:"text/plain"}];return e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Attachment Types"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Configure allowed file types and extensions for attachments"})]}),e.jsxs("button",{onClick:()=>p(),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:[e.jsx(cn,{size:18}),"Add Type"]})]}),e.jsx("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",border:"1px solid var(--border)",overflow:"hidden"},children:u?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading..."}):l?.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[e.jsx(KY,{size:48,style:{color:"var(--text-muted)",opacity:.5,marginBottom:"1rem"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem"},children:"No attachment types defined"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"All file types are currently allowed. Add types to restrict uploads."}),e.jsx("button",{onClick:()=>p(),style:{padding:"0.5rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Add First Type"})]}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[e.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600},children:"Name"}),e.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600},children:"Extensions"}),e.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600},children:"Max Size"}),e.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"center",fontWeight:600},children:"Status"}),e.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600},children:"Actions"})]})}),e.jsx("tbody",{children:l?.map(C=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"0.875rem 1rem",fontWeight:500},children:C.name}),e.jsx("td",{style:{padding:"0.875rem 1rem"},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:C.extensions.map(N=>e.jsxs("span",{style:{padding:"0.125rem 0.5rem",background:"var(--primary)",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontFamily:"monospace"},children:[".",N]},N))})}),e.jsxs("td",{style:{padding:"0.875rem 1rem"},children:[C.maxSizeMB," MB"]}),e.jsx("td",{style:{padding:"0.875rem 1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500,background:C.isActive?"rgba(34, 197, 94, 0.1)":"rgba(156, 163, 175, 0.1)",color:C.isActive?"#22c55e":"#9ca3af"},children:C.isActive?"Active":"Inactive"})}),e.jsx("td",{style:{padding:"0.875rem 1rem",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>p(C),style:{padding:"0.375rem",background:"none",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer"},children:e.jsx(Ha,{size:16})}),e.jsx("button",{onClick:()=>{confirm("Delete this attachment type?")&&f.mutate(C.id)},style:{padding:"0.375rem",background:"none",border:"1px solid #ef4444",borderRadius:"6px",cursor:"pointer",color:"#ef4444"},children:e.jsx(ra,{size:16})})]})})]},C.id))})]})}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsx("h4",{style:{margin:"0 0 0.5rem",fontSize:"0.875rem"},children:"How it works"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"When no types are defined, all file types up to 5MB are allowed. Once you add types, only files matching the defined extensions will be accepted. The maximum file size limit of 5MB applies globally."})]}),r&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",width:"100%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{margin:0},children:[i?"Edit":"Add"," Attachment Type"]}),e.jsx("button",{onClick:x,style:{background:"none",border:"none",cursor:"pointer"},children:e.jsx(kr,{size:20})})]}),e.jsxs("form",{onSubmit:v,style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Type Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:C=>o({...s,name:C.target.value}),placeholder:"e.g., Documents, Images, Certificates",required:!0,style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Allowed Extensions"}),e.jsx("input",{type:"text",value:s.extensions,onChange:C=>o({...s,extensions:C.target.value}),placeholder:"pdf, doc, docx, jpg, png",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Comma-separated list of extensions (without dots)"})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500,fontSize:"0.875rem"},children:"Quick Add"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.375rem"},children:w.map(C=>e.jsxs("button",{type:"button",onClick:()=>{const N=s.extensions.split(",").map(q=>q.trim()).filter(Boolean),T=C.value.split(",").map(q=>q.trim()),O=[...new Set([...N,...T])],D=s.mimeTypes.split(",").map(q=>q.trim()).filter(Boolean),M=C.mime.split(",").map(q=>q.trim()),Y=[...new Set([...D,...M])];o({...s,extensions:O.join(", "),mimeTypes:Y.join(", ")})},style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"4px",cursor:"pointer"},children:["+ ",C.label]},C.label))})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"MIME Types (optional)"}),e.jsx("input",{type:"text",value:s.mimeTypes,onChange:C=>o({...s,mimeTypes:C.target.value}),placeholder:"application/pdf, image/jpeg",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Max Size (MB)"}),e.jsx("input",{type:"number",value:s.maxSizeMB,onChange:C=>o({...s,maxSizeMB:Number(C.target.value)}),min:.1,max:5,step:.5,style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Status"}),e.jsxs("select",{value:s.isActive?"active":"inactive",onChange:C=>o({...s,isActive:C.target.value==="active"}),style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingTop:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:x,style:{padding:"0.625rem 1rem",background:"none",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:[e.jsx(lc,{size:16}),d.isPending?"Saving...":"Save"]})]})]})]})})]})}function RNe(){const t=gn(),r=pr(),[n,i]=k.useState(!1),[a,s]=k.useState(null),[o,l]=k.useState({code:"",name:"",nativeName:"",direction:"ltr",isActive:!0,isDefault:!1,sortOrder:0}),{data:u=[],isLoading:d}=Ve({queryKey:["languages"],queryFn:async()=>{const{data:M}=await xe.get("/localization/languages");return M}}),f=ot({mutationFn:async M=>{const{data:Y}=await xe.post("/localization/languages",M);return Y},onSuccess:()=>{r.invalidateQueries({queryKey:["languages"]}),t.success("Language Created","Language has been added successfully"),C()},onError:M=>{t.error("Error",M.response?.data?.error||"Failed to create language")}}),p=ot({mutationFn:async({id:M,data:Y})=>{const{data:q}=await xe.put(`/localization/languages/${M}`,Y);return q},onSuccess:()=>{r.invalidateQueries({queryKey:["languages"]}),t.success("Language Updated","Language has been updated successfully"),C()},onError:M=>{t.error("Error",M.response?.data?.error||"Failed to update language")}}),x=ot({mutationFn:async M=>{await xe.delete(`/localization/languages/${M}`)},onSuccess:()=>{r.invalidateQueries({queryKey:["languages"]}),t.success("Language Deleted","Language has been removed")},onError:M=>{t.error("Error",M.response?.data?.error||"Failed to delete language")}}),v=ot({mutationFn:async()=>{const{data:M}=await xe.post("/localization/seed-languages");return M},onSuccess:()=>{r.invalidateQueries({queryKey:["languages"]}),t.success("Languages Seeded","Default languages have been added")},onError:M=>{t.error("Error",M.response?.data?.error||"Failed to seed languages")}}),w=M=>{M?(s(M),l({code:M.code,name:M.name,nativeName:M.nativeName||"",direction:M.direction,isActive:M.isActive,isDefault:M.isDefault,sortOrder:M.sortOrder})):(s(null),l({code:"",name:"",nativeName:"",direction:"ltr",isActive:!0,isDefault:!1,sortOrder:u.length})),i(!0)},C=()=>{i(!1),s(null)},N=M=>{M.preventDefault(),a?p.mutate({id:a.id,data:o}):f.mutate(o)},T=M=>{if(M.isDefault){t.error("Cannot Delete","Cannot delete the default language");return}confirm(`Are you sure you want to delete ${M.name}?`)&&x.mutate(M.id)},O=M=>{p.mutate({id:M.id,data:{...M,isDefault:!0}})},D=M=>{p.mutate({id:M.id,data:{...M,isActive:!M.isActive}})};return e.jsxs("div",{children:[e.jsx(zc,{title:"Languages",subtitle:"Manage supported languages for the application",actions:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.length===0&&e.jsxs("button",{className:"btn btn-secondary",onClick:()=>v.mutate(),children:[e.jsx(py,{size:16}),"Seed Default Languages"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>w(),children:[e.jsx(cn,{size:16}),"Add Language"]})]})}),e.jsx("div",{className:"card",children:d?e.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading languages..."}):u.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[e.jsx(sm,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem"}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Languages Configured"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:'Click "Seed Default Languages" to add English and Arabic, or add languages manually.'})]}):e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Native Name"}),e.jsx("th",{children:"Direction"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Default"}),e.jsx("th",{children:"Order"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u.map(M=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("code",{style:{background:"var(--bg-secondary)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontWeight:600},children:M.code.toUpperCase()})}),e.jsx("td",{style:{fontWeight:500},children:M.name}),e.jsx("td",{children:M.nativeName||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${M.direction==="rtl"?"warning":"default"}`,children:M.direction.toUpperCase()})}),e.jsx("td",{children:e.jsx("button",{className:`badge badge-${M.isActive?"success":"danger"}`,onClick:()=>D(M),style:{cursor:"pointer",border:"none"},children:M.isActive?"Active":"Inactive"})}),e.jsx("td",{children:M.isDefault?e.jsx("span",{className:"badge badge-primary",children:"Default"}):e.jsx("button",{className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem"},onClick:()=>O(M),children:"Set Default"})}),e.jsx("td",{children:M.sortOrder}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary",style:{padding:"0.375rem"},onClick:()=>w(M),children:e.jsx(Ha,{size:14})}),e.jsx("button",{className:"btn btn-danger",style:{padding:"0.375rem"},onClick:()=>T(M),disabled:M.isDefault,children:e.jsx(ra,{size:14})})]})})]},M.id))})]})}),n&&e.jsx("div",{className:"modal-overlay",onClick:C,children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:a?"Edit Language":"Add Language"}),e.jsx("button",{className:"modal-close",onClick:C,children:e.jsx(kr,{size:20})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Language Code *"}),e.jsx("input",{type:"text",className:"form-input",value:o.code,onChange:M=>l({...o,code:M.target.value}),placeholder:"e.g., en, ar, fr",maxLength:5,required:!0,disabled:!!a})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Direction *"}),e.jsxs("select",{className:"form-select",value:o.direction,onChange:M=>l({...o,direction:M.target.value}),required:!0,children:[e.jsx("option",{value:"ltr",children:"Left to Right (LTR)"}),e.jsx("option",{value:"rtl",children:"Right to Left (RTL)"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Language Name *"}),e.jsx("input",{type:"text",className:"form-input",value:o.name,onChange:M=>l({...o,name:M.target.value}),placeholder:"e.g., English",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Native Name"}),e.jsx("input",{type:"text",className:"form-input",value:o.nativeName,onChange:M=>l({...o,nativeName:M.target.value}),placeholder:"e.g., "})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sort Order"}),e.jsx("input",{type:"number",className:"form-input",value:o.sortOrder,onChange:M=>l({...o,sortOrder:parseInt(M.target.value)||0})})]}),e.jsx("div",{className:"form-group",style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:o.isActive,onChange:M=>l({...o,isActive:M.target.checked})}),"Active"]})})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:o.isDefault,onChange:M=>l({...o,isDefault:M.target.checked})}),"Set as Default Language"]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:C,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[a?"Update":"Create"," Language"]})]})]})]})})]})}const hM=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"AED",name:"UAE Dirham"},{code:"KWD",name:"Kuwaiti Dinar"},{code:"BHD",name:"Bahraini Dinar"},{code:"QAR",name:"Qatari Riyal"},{code:"OMR",name:"Omani Rial"},{code:"EGP",name:"Egyptian Pound"},{code:"JOD",name:"Jordanian Dinar"}];function MNe(){const t=gn(),r=pr(),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(null),[u,d]=k.useState(""),[f,p]=k.useState(1),[x,v]=k.useState("exchangerate-api"),[w,C]=k.useState(""),[N,T]=k.useState({date:Ze(new Date,"yyyy-MM-dd"),fromCurrency:"USD",rate:3.75,source:"MANUAL"}),{data:O,isLoading:D}=Ve({queryKey:["exchange-rates",u,f],queryFn:async()=>{const ce={page:f,pageSize:25};u&&(ce.fromCurrency=u);const{data:Q}=await xe.get("/localization/exchange-rates",{params:ce});return Q}}),{data:M=[]}=Ve({queryKey:["latest-exchange-rates"],queryFn:async()=>{const{data:ce}=await xe.get("/localization/exchange-rates/latest");return ce}}),{data:Y=[]}=Ve({queryKey:["rate-providers"],queryFn:async()=>{const{data:ce}=await xe.get("/localization/exchange-rates/providers");return ce}}),q=ot({mutationFn:async ce=>{const{data:Q}=await xe.post("/localization/exchange-rates/fetch-online",ce);return Q},onSuccess:ce=>{r.invalidateQueries({queryKey:["exchange-rates"]}),r.invalidateQueries({queryKey:["latest-exchange-rates"]}),t.success("Rates Updated",ce.message),s(!1),C("")},onError:ce=>{t.error("Error",ce.response?.data?.error||"Failed to fetch rates")}}),W=ot({mutationFn:async ce=>{const{data:Q}=await xe.post("/localization/exchange-rates",ce);return Q},onSuccess:()=>{r.invalidateQueries({queryKey:["exchange-rates"]}),r.invalidateQueries({queryKey:["latest-exchange-rates"]}),t.success("Rate Saved","Exchange rate has been saved"),G()},onError:ce=>{t.error("Error",ce.response?.data?.error||"Failed to save rate")}}),J=ot({mutationFn:async ce=>{await xe.delete(`/localization/exchange-rates/${ce}`)},onSuccess:()=>{r.invalidateQueries({queryKey:["exchange-rates"]}),r.invalidateQueries({queryKey:["latest-exchange-rates"]}),t.success("Rate Deleted","Exchange rate has been removed")},onError:ce=>{t.error("Error",ce.response?.data?.error||"Failed to delete rate")}}),z=ce=>{ce?(l(ce),T({date:ce.date.split("T")[0],fromCurrency:ce.fromCurrency,rate:ce.rate,source:ce.source})):(l(null),T({date:Ze(new Date,"yyyy-MM-dd"),fromCurrency:"USD",rate:3.75,source:"MANUAL"})),i(!0)},G=()=>{i(!1),l(null)},ne=ce=>{ce.preventDefault(),W.mutate(N)},Z=ce=>{confirm(`Delete rate for ${ce.fromCurrency} on ${Ze(new Date(ce.date),"MMM dd, yyyy")}?`)&&J.mutate(ce.id)},ie=O?.data||[],me=O?.total||0;return e.jsxs("div",{children:[e.jsx(zc,{title:"Exchange Rates",subtitle:"Manage currency exchange rates to SAR (base currency)",actions:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>s(!0),children:[e.jsx(h8,{size:16}),"Fetch from Provider"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>z(),children:[e.jsx(cn,{size:16}),"Add Rate"]})]})}),M.length>0&&e.jsx("div",{className:"grid grid-4",style:{marginBottom:"1.5rem"},children:M.slice(0,4).map(ce=>e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(sf,{size:20,style:{color:"var(--primary)"}}),e.jsxs("span",{className:"stat-label",children:[ce.fromCurrency,"/SAR"]})]}),e.jsx("div",{className:"stat-value",children:ce.rate.toFixed(4)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Ze(new Date(ce.date),"MMM dd, yyyy")})]},ce.id))}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("select",{className:"form-select",value:u,onChange:ce=>{d(ce.target.value),p(1)},style:{width:"auto"},children:[e.jsx("option",{value:"",children:"All Currencies"}),hM.map(ce=>e.jsxs("option",{value:ce.code,children:[ce.code," - ",ce.name]},ce.code))]}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:[me," rates found"]})]}),D?e.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading rates..."}):ie.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[e.jsx(t0,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem"}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Exchange Rates"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Add exchange rates to enable multi-currency display"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"From Currency"}),e.jsx("th",{children:"To Currency"}),e.jsx("th",{children:"Rate"}),e.jsx("th",{children:"Source"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:ie.map(ce=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx($n,{size:14,style:{color:"var(--text-muted)"}}),Ze(new Date(ce.date),"MMM dd, yyyy")]})}),e.jsx("td",{children:e.jsx("code",{style:{background:"var(--bg-secondary)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontWeight:600},children:ce.fromCurrency})}),e.jsx("td",{children:e.jsx("code",{style:{background:"var(--primary-light)",color:"var(--primary)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontWeight:600},children:"SAR"})}),e.jsx("td",{style:{fontWeight:600,fontFamily:"monospace"},children:ce.rate.toFixed(4)}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${ce.source==="API"?"info":"default"}`,children:ce.source})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary",style:{padding:"0.375rem"},onClick:()=>z(ce),children:e.jsx(Ha,{size:14})}),e.jsx("button",{className:"btn btn-danger",style:{padding:"0.375rem"},onClick:()=>Z(ce),children:e.jsx(ra,{size:14})})]})})]},ce.id))})]}),e.jsx(i0,{page:f,pageSize:25,totalCount:me,onPageChange:p})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:G,children:e.jsxs("div",{className:"modal",onClick:ce=>ce.stopPropagation(),style:{maxWidth:"450px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:o?"Edit Exchange Rate":"Add Exchange Rate"}),e.jsx("button",{className:"modal-close",onClick:G,children:e.jsx(kr,{size:20})})]}),e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Date *"}),e.jsx("input",{type:"date",className:"form-input",value:N.date,onChange:ce=>T({...N,date:ce.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"From Currency *"}),e.jsx("select",{className:"form-select",value:N.fromCurrency,onChange:ce=>T({...N,fromCurrency:ce.target.value}),required:!0,children:hM.map(ce=>e.jsxs("option",{value:ce.code,children:[ce.code," - ",ce.name]},ce.code))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"To Currency"}),e.jsx("input",{type:"text",className:"form-input",value:"SAR (Saudi Riyal)",disabled:!0,style:{background:"var(--bg-secondary)"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Exchange Rate *"}),e.jsx("input",{type:"number",className:"form-input",value:N.rate,onChange:ce=>T({...N,rate:parseFloat(ce.target.value)||0}),step:"0.0001",min:"0.0001",placeholder:"e.g., 3.75",required:!0}),e.jsxs("small",{style:{color:"var(--text-muted)"},children:["1 ",N.fromCurrency," = ",N.rate," SAR"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Source"}),e.jsxs("select",{className:"form-select",value:N.source,onChange:ce=>T({...N,source:ce.target.value}),children:[e.jsx("option",{value:"MANUAL",children:"Manual Entry"}),e.jsx("option",{value:"API",children:"API Import"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:G,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Update":"Add"," Rate"]})]})]})]})}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal",onClick:ce=>ce.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Fetch Rates from Provider"}),e.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:e.jsx(kr,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Fetch today's exchange rates from an online provider. Rates will be saved to SAR (Saudi Riyal)."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Provider"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Y.map(ce=>e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",background:x===ce.id?"var(--bg-secondary)":"transparent"},children:[e.jsx("input",{type:"radio",name:"provider",value:ce.id,checked:x===ce.id,onChange:Q=>v(Q.target.value),style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:ce.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[ce.description,ce.requiresKey&&e.jsx("span",{style:{color:"var(--warning)",marginLeft:"0.5rem"},children:"(API key required)"})]})]})]},ce.id))})]}),Y.find(ce=>ce.id===x)?.requiresKey&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"API Key *"}),e.jsx("input",{type:"password",className:"form-input",value:w,onChange:ce=>C(ce.target.value),placeholder:"Enter your API key"}),e.jsx("small",{style:{color:"var(--text-muted)",marginTop:"0.25rem",display:"block"},children:"Get a free API key from the provider's website"})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"0.8125rem",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Currencies to fetch:"})," USD, EUR, GBP, AED, KWD, BHD, QAR, OMR, EGP, JOD"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(Y.find(Q=>Q.id===x)?.requiresKey&&!w){t.error("API Key Required","Please enter your API key");return}q.mutate({provider:x,apiKey:w||void 0})},disabled:q.isPending,children:q.isPending?e.jsxs(e.Fragment,{children:[e.jsx(cu,{size:16,className:"spin"}),"Fetching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h8,{size:16}),"Fetch Rates"]})})]})]})})]})}const LNe=["Asia/Riyadh","Asia/Dubai","Asia/Kuwait","Asia/Bahrain","Asia/Qatar","Africa/Cairo","Europe/London","Europe/Paris","America/New_York","America/Los_Angeles","UTC"],zNe=[{value:"yyyy-MM-dd",label:"2024-01-15"},{value:"dd/MM/yyyy",label:"15/01/2024"},{value:"MM/dd/yyyy",label:"01/15/2024"},{value:"dd-MM-yyyy",label:"15-01-2024"},{value:"dd MMM yyyy",label:"15 Jan 2024"}],BNe=[{value:"HH:mm",label:"14:30 (24-hour)"},{value:"HH:mm:ss",label:"14:30:00 (24-hour with seconds)"},{value:"hh:mm a",label:"02:30 PM (12-hour)"},{value:"hh:mm:ss a",label:"02:30:00 PM (12-hour with seconds)"}];function FNe(){const t=gn(),r=pr(),[n,i]=k.useState({}),{data:a,isLoading:s}=Ve({queryKey:["localization-settings"],queryFn:async()=>{const{data:f}=await xe.get("/localization/settings");return f}}),{data:o=[]}=Ve({queryKey:["languages-active"],queryFn:async()=>{const{data:f}=await xe.get("/localization/languages",{params:{activeOnly:"true"}});return f}});k.useEffect(()=>{a&&i(a)},[a]);const l=ot({mutationFn:async f=>{const{data:p}=await xe.put("/localization/settings",f);return p},onSuccess:()=>{r.invalidateQueries({queryKey:["localization-settings"]}),t.success("Settings Saved","Localization settings have been updated")},onError:f=>{t.error("Error",f.response?.data?.error||"Failed to save settings")}}),u=f=>{f.preventDefault(),l.mutate(n)},d=(f,p)=>{i(x=>({...x,[f]:p}))};return s?e.jsxs("div",{children:[e.jsx(zc,{title:"Localization Settings",subtitle:"Configure system-wide localization preferences"}),e.jsx("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading settings..."})]}):e.jsxs("div",{children:[e.jsx(zc,{title:"Localization Settings",subtitle:"Configure system-wide language, timezone, and currency preferences"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"grid grid-2",style:{gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(sm,{size:20,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Language Settings"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Default Language"}),e.jsxs("select",{className:"form-select",value:n.defaultLanguageCode||"en",onChange:f=>d("defaultLanguageCode",f.target.value),children:[o.map(f=>e.jsxs("option",{value:f.code,children:[f.name," (",f.code.toUpperCase(),")"]},f.code)),o.length===0&&e.jsx("option",{value:"en",children:"English (en)"})]}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Used when user has no preference set"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:n.enableUserLanguageOverride??!0,onChange:f=>d("enableUserLanguageOverride",f.target.checked)}),"Allow users to override language"]}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"When disabled, all users will see the default language"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qt,{size:20,style:{color:"var(--warning)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Timezone Settings"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Default Timezone"}),e.jsx("select",{className:"form-select",value:n.defaultTimezone||"Asia/Riyadh",onChange:f=>d("defaultTimezone",f.target.value),children:LNe.map(f=>e.jsx("option",{value:f,children:f},f))}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"All timestamps displayed using this timezone by default"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:n.enableUserTimezoneOverride??!0,onChange:f=>d("enableUserTimezoneOverride",f.target.checked)}),"Allow users to override timezone"]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(sf,{size:20,style:{color:"var(--success)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Currency Settings"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Base Currency"}),e.jsx("input",{type:"text",className:"form-input",value:"SAR (Saudi Riyal)",disabled:!0,style:{background:"var(--bg-secondary)"}}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"All accounting is stored in SAR"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:n.enableMultiCurrencyDisplay??!0,onChange:f=>d("enableMultiCurrencyDisplay",f.target.checked)}),"Enable multi-currency display"]}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Allow displaying amounts in other currencies using exchange rates"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:n.enableUserCurrencyOverride??!0,onChange:f=>d("enableUserCurrencyOverride",f.target.checked)}),"Allow users to override display currency"]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(lf,{size:20,style:{color:"var(--info)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Format Settings"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Date Format"}),e.jsx("select",{className:"form-select",value:n.dateFormat||"yyyy-MM-dd",onChange:f=>d("dateFormat",f.target.value),children:zNe.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Time Format"}),e.jsx("select",{className:"form-select",value:n.timeFormat||"HH:mm",onChange:f=>d("timeFormat",f.target.value),children:BNe.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Number Format Locale"}),e.jsxs("select",{className:"form-select",value:n.numberFormat||"en-US",onChange:f=>d("numberFormat",f.target.value),children:[e.jsx("option",{value:"en-US",children:"English (US) - 1,234.56"}),e.jsx("option",{value:"en-GB",children:"English (UK) - 1,234.56"}),e.jsx("option",{value:"ar-SA",children:"Arabic (SA) - "}),e.jsx("option",{value:"de-DE",children:"German - 1.234,56"}),e.jsx("option",{value:"fr-FR",children:"French - 1 234,56"})]})]})]})]})]}),e.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:l.isPending,children:[e.jsx(lc,{size:16}),"Save Settings"]})})]})]})}const fM=[{value:"SYSTEM",label:"System UI",icon:sm,description:"Navigation, buttons, labels"},{value:"PRODUCT",label:"Products",icon:rh,description:"Product names and descriptions"},{value:"CUSTOMER",label:"Customers",icon:Ts,description:"Customer information"},{value:"MATERIAL",label:"Materials",icon:r2,description:"Material names"},{value:"SUPPLIER",label:"Suppliers",icon:cc,description:"Supplier details"},{value:"CATEGORY",label:"Categories",icon:nz,description:"Category labels"},{value:"CITY",label:"Cities",icon:Ea,description:"City names"},{value:"REGION",label:"Regions",icon:Ea,description:"Region names"},{value:"COUNTRY",label:"Countries",icon:Ea,description:"Country names"}],xg=[{prefix:"nav.",label:"Navigation",color:"#3b82f6"},{prefix:"action.",label:"Actions",color:"#10b981"},{prefix:"label.",label:"Labels",color:"#8b5cf6"},{prefix:"status.",label:"Status",color:"#f59e0b"},{prefix:"message.",label:"Messages",color:"#06b6d4"},{prefix:"page.",label:"Pages",color:"#ec4899"}];function qNe(){const t=gn(),r=pr(),[n,i]=k.useState("SYSTEM"),[a,s]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState(1),[f,p]=k.useState(null),[x,v]=k.useState(""),[w,C]=k.useState(null),[N,T]=k.useState(new Set(["nav.","action.","label."])),{data:O=[]}=Ve({queryKey:["languages-active"],queryFn:async()=>{const{data:Q}=await xe.get("/localization/languages",{params:{activeOnly:"true"}});return Q}}),{data:D,isLoading:M,refetch:Y}=Ve({queryKey:["translations",n,"",a,o,u],queryFn:async()=>{const Q={page:u,pageSize:100};n&&(Q.entityType=n),a&&(Q.langCode=a),o&&(Q.search=o);const{data:de}=await xe.get("/localization/translations",{params:Q});return de}}),q=ot({mutationFn:async({entityType:Q,entityId:de,fieldKey:le,langCode:ye,value:Se})=>{const{data:$}=await xe.post("/localization/translations",{entityType:Q,entityId:de,fieldKey:le,langCode:ye,value:Se});return $},onSuccess:()=>{r.invalidateQueries({queryKey:["translations"]}),t.success("Saved","Translation updated successfully"),p(null)},onError:Q=>{t.error("Error",Q.response?.data?.error||"Failed to save translation")}}),W=ot({mutationFn:async()=>{const{data:Q}=await xe.post("/localization/seed-system-translations");return Q},onSuccess:Q=>{r.invalidateQueries({queryKey:["translations"]}),t.success("Translations Added",`Created ${Q.created} new translations`)},onError:Q=>{t.error("Failed",Q.response?.data?.error||"Could not add translations")}}),J=Q=>{q.mutate({entityType:Q.entityType,entityId:Q.entityId,fieldKey:Q.fieldKey,langCode:Q.langCode,value:x})},z=async()=>{try{const Q=await xe.get("/localization/translations/export",{params:{entityType:n},responseType:"blob"}),de=URL.createObjectURL(Q.data),le=document.createElement("a");le.href=de,le.download=`translations-${n.toLowerCase()}.json`,le.click(),URL.revokeObjectURL(de),t.success("Exported","Translations file downloaded")}catch(Q){t.error("Export Failed",Q.response?.data?.error||"Could not export translations")}},G=async Q=>{const de=Q.target.files?.[0];if(de){try{const le=await de.text(),ye=JSON.parse(le);await xe.post("/localization/translations/import",{translations:ye}),r.invalidateQueries({queryKey:["translations"]}),t.success("Imported","Translations uploaded successfully")}catch(le){t.error("Import Failed",le.response?.data?.error||"Could not import translations")}Q.target.value=""}},ne=D?.data||[],Z=D?.total||0,ie=k.useMemo(()=>{if(n!=="SYSTEM")return null;const Q={};return ne.forEach(de=>{const ye=xg.find(Se=>de.fieldKey.startsWith(Se.prefix))?.prefix||"other";Q[ye]||(Q[ye]=[]),Q[ye].push(de)}),Q},[ne,n]),me=Q=>{T(de=>{const le=new Set(de);return le.has(Q)?le.delete(Q):le.add(Q),le})};fM.find(Q=>Q.value===n);const ce=(Q,de=!1)=>{const le=f===Q.id,ye=xg.find($=>Q.fieldKey.startsWith($.prefix)),Se=Q.fieldKey.replace(ye?.prefix||"","");return e.jsxs("div",{style:{padding:"1rem",background:le?"var(--bg-secondary)":"var(--bg-primary)",borderRadius:"8px",border:"1px solid var(--border)",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[de&&ye&&e.jsx("span",{style:{fontSize:"0.6875rem",padding:"0.125rem 0.5rem",borderRadius:"4px",background:`${ye.color}15`,color:ye.color,fontWeight:600,textTransform:"uppercase"},children:ye.label}),e.jsx("span",{style:{fontWeight:600,fontSize:"0.875rem",color:"var(--text-primary)",fontFamily:"var(--font-mono, monospace)"},children:Se})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:Q.langCode==="ar"?"#10b98115":"#3b82f615",color:Q.langCode==="ar"?"#10b981":"#3b82f6",fontWeight:600},children:Q.langCode==="ar"?"":"English"}),le?e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsxs("button",{className:"btn btn-primary",style:{padding:"0.375rem 0.625rem",fontSize:"0.75rem"},onClick:()=>J(Q),disabled:q.isPending,children:[e.jsx(lc,{size:14}),"Save"]}),e.jsx("button",{className:"btn btn-secondary",style:{padding:"0.375rem 0.625rem",fontSize:"0.75rem"},onClick:()=>p(null),children:e.jsx(kr,{size:14})})]}):e.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.375rem 0.625rem",fontSize:"0.75rem"},onClick:()=>{p(Q.id),v(Q.value)},children:[e.jsx(Ha,{size:14}),"Edit"]})]})]}),le?e.jsx("textarea",{className:"form-input",value:x,onChange:$=>v($.target.value),autoFocus:!0,rows:2,style:{width:"100%",resize:"vertical",direction:Q.langCode==="ar"?"rtl":"ltr",fontFamily:Q.langCode==="ar"?"inherit":"var(--font-mono, monospace)"}}):e.jsx("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px",fontSize:"0.9375rem",lineHeight:1.5,direction:Q.langCode==="ar"?"rtl":"ltr",color:Q.value?"var(--text-primary)":"var(--text-muted)",fontStyle:Q.value?"normal":"italic"},children:Q.value||"No translation yet"})]},Q.id)};return e.jsxs("div",{children:[e.jsx(zc,{title:"Translations",subtitle:"Manage text content in multiple languages",actions:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>W.mutate(),disabled:W.isPending,title:"Add default system translations for common UI elements",children:[e.jsx(f8,{size:16}),W.isPending?"Adding...":"Add Default Translations"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:z,title:"Download translations as file",children:[e.jsx(Xp,{size:16}),"Export"]}),e.jsxs("label",{className:"btn btn-secondary",style:{cursor:"pointer"},title:"Upload translations file",children:[e.jsx(om,{size:16}),"Import",e.jsx("input",{type:"file",accept:".json",onChange:G,style:{display:"none"}})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Content Type"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:fM.map(Q=>{const de=Q.icon,le=n===Q.value;return e.jsxs("button",{onClick:()=>{i(Q.value),d(1),C(null)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:le?"var(--primary)":"var(--bg-primary)",color:le?"white":"var(--text-primary)",border:`1px solid ${le?"var(--primary)":"var(--border)"}`,borderRadius:"8px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[e.jsx(de,{size:18,style:{opacity:.8}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:Q.label}),e.jsx("div",{style:{fontSize:"0.75rem",opacity:le?.85:.6,marginTop:"0.125rem"},children:Q.description})]})]},Q.value)})}),n==="SYSTEM"&&ie&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginTop:"1.5rem",marginBottom:"0.75rem"},children:"Categories"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:xg.map(Q=>{const de=ie[Q.prefix]?.length||0,le=w===Q.prefix;return e.jsxs("button",{onClick:()=>C(le?null:Q.prefix),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.625rem 0.875rem",background:le?`${Q.color}10`:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",background:Q.color}}),e.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:le?600:400,color:le?Q.color:"var(--text-secondary)"},children:Q.label})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"var(--bg-secondary)",padding:"0.125rem 0.5rem",borderRadius:"10px"},children:de})]},Q.prefix)})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"card",style:{marginBottom:"1rem",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"1rem 1.25rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search translations...",value:o,onChange:Q=>{l(Q.target.value),d(1)},style:{paddingLeft:"2.25rem",width:"280px"}})]}),e.jsxs("select",{className:"form-select",value:a,onChange:Q=>{s(Q.target.value),d(1)},style:{width:"auto"},children:[e.jsx("option",{value:"",children:"All Languages"}),O.map(Q=>e.jsx("option",{value:Q.code,children:Q.name},Q.code))]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8125rem",display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(py,{size:14}),Z," translations"]})})]})}),M?e.jsxs("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 1rem"}}),"Loading translations..."]}):ne.length===0?e.jsxs("div",{className:"card",style:{padding:"4rem",textAlign:"center"},children:[e.jsx(Pr,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem"}}),e.jsx("h3",{style:{marginBottom:"0.5rem",fontWeight:600},children:"No Translations Found"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem",maxWidth:"400px",margin:"0 auto"},children:n==="SYSTEM"?'Click "Add Default Translations" to populate common UI text, or add translations manually.':"Translations will appear here when you add multilingual content to this type of data."}),n==="SYSTEM"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>W.mutate(),disabled:W.isPending,style:{marginTop:"1rem"},children:[e.jsx(f8,{size:16}),"Add Default Translations"]})]}):n==="SYSTEM"&&ie?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(w?[{prefix:w,...xg.find(Q=>Q.prefix===w)}]:xg).filter(Q=>ie[Q.prefix]?.length>0).map(Q=>{const de=ie[Q.prefix]||[],le=N.has(Q.prefix);return e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("button",{onClick:()=>me(Q.prefix),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:"var(--bg-secondary)",border:"none",borderBottom:le?"1px solid var(--border)":"none",cursor:"pointer",textAlign:"left"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[le?e.jsx(bo,{size:18}):e.jsx(jo,{size:18}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"3px",background:Q.color}}),e.jsx("span",{style:{fontWeight:600,fontSize:"0.9375rem"},children:Q.label}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"var(--bg-primary)",padding:"0.25rem 0.625rem",borderRadius:"12px"},children:[de.length," items"]})]})}),le&&e.jsx("div",{style:{padding:"1rem",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"0.75rem"},children:de.map(ye=>ce(ye,!1))})]},Q.prefix)})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"0.75rem"},children:ne.map(Q=>ce(Q,!0))}),Z>0&&e.jsx("div",{style:{marginTop:"1rem",borderRadius:"8px",overflow:"hidden"},children:e.jsx(i0,{page:u,pageSize:100,totalCount:Z,onPageChange:d})})]})]})]})}function UNe(){const t=Qr(),{data:r,isLoading:n,refetch:i}=Ve({queryKey:["zatca-status"],queryFn:async()=>{const{data:s}=await xe.get("/zatca/status");return s}}),a=s=>{switch(s){case"ACCEPTED":case"CLEARED":case"REPORTED":return"success";case"PENDING":return"warning";case"REJECTED":case"FAILED":return"danger";default:return"default"}};return e.jsxs("div",{children:[e.jsx(zc,{title:"ZATCA Integration",subtitle:"Fatoora e-invoice integration status and management",actions:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>i(),children:[e.jsx(cu,{size:16}),"Refresh"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/admin/zatca/config"),children:[e.jsx(lf,{size:16}),"Configuration"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/admin/zatca/onboarding"),children:[e.jsx(ia,{size:16}),"Onboarding"]})]})}),n?e.jsx("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:"Loading ZATCA status..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-4",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Mc,{size:20,style:{color:"var(--primary)"}}),e.jsx("span",{className:"stat-label",children:"Total Submissions"})]}),e.jsx("div",{className:"stat-value",children:r?.stats?.total||0})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Ut,{size:20,style:{color:"var(--success)"}}),e.jsx("span",{className:"stat-label",children:"Accepted"})]}),e.jsx("div",{className:"stat-value",style:{color:"var(--success)"},children:r?.stats?.accepted||0})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Qt,{size:20,style:{color:"var(--warning)"}}),e.jsx("span",{className:"stat-label",children:"Pending"})]}),e.jsx("div",{className:"stat-value",style:{color:"var(--warning)"},children:r?.stats?.pending||0})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(ci,{size:20,style:{color:"var(--danger)"}}),e.jsx("span",{className:"stat-label",children:"Rejected/Failed"})]}),e.jsx("div",{className:"stat-value",style:{color:"var(--danger)"},children:(r?.stats?.rejected||0)+(r?.stats?.failed||0)})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{margin:0,fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(lf,{size:18})," Configuration Status"]})}),e.jsx("div",{style:{padding:"1.25rem"},children:r?.config?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Environment"}),e.jsx("span",{className:`badge badge-${r.config.environment==="PRODUCTION"?"danger":"info"}`,children:r.config.environment})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"ZATCA Posting"}),e.jsx("span",{className:`badge badge-${r.config.enableZatcaPosting?"success":"default"}`,children:r.config.enableZatcaPosting?"Enabled":"Disabled"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Seller Info"}),e.jsx("span",{className:`badge badge-${r.config.hasSellerInfo?"success":"warning"}`,children:r.config.hasSellerInfo?"Configured":"Missing"})]})]}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:[e.jsx($r,{size:32,style:{marginBottom:"0.5rem"}}),e.jsx("p",{children:"ZATCA not configured"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>t("/admin/zatca/config"),children:"Configure Now"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{margin:0,fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ia,{size:18})," Active Credential"]})}),e.jsx("div",{style:{padding:"1.25rem"},children:r?.credential?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Device"}),e.jsx("span",{style:{fontWeight:500},children:r.credential.deviceName})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Status"}),e.jsx("span",{className:"badge badge-success",children:r.credential.status})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Environment"}),e.jsx("span",{className:`badge badge-${r.credential.environment==="PRODUCTION"?"danger":"info"}`,children:r.credential.environment})]})]}):e.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:[e.jsx(ia,{size:32,style:{marginBottom:"0.5rem"}}),e.jsx("p",{children:"No active credential"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>t("/admin/zatca/onboarding"),children:"Complete Onboarding"})]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{margin:0,fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(gu,{size:18})," Recent Submissions"]}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>t("/admin/zatca/logs"),children:"View All Logs"})]}),r?.recentSubmissions?.length>0?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Invoice"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Submitted"})]})}),e.jsx("tbody",{children:r.recentSubmissions.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace",fontWeight:600},children:s.invoice?.invoiceNumber||"-"}),e.jsx("td",{children:s.invoice?.customer?.name||"-"}),e.jsx("td",{children:li(s.invoice?.totalAmount)}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${a(s.status)}`,children:s.status})}),e.jsx("td",{children:s.submittedAt?Ze(new Date(s.submittedAt),"MMM dd, HH:mm"):"-"})]},s.id))})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No submissions yet"})]})]})]})}function WNe(){const t=Qr(),r=gn(),n=pr(),[i,a]=k.useState({}),{data:s,isLoading:o}=Ve({queryKey:["zatca-config"],queryFn:async()=>{const{data:p}=await xe.get("/zatca/config");return p}});k.useEffect(()=>{s&&a(s)},[s]);const l=ot({mutationFn:async p=>{const{data:x}=await xe.put("/zatca/config",p);return x},onSuccess:()=>{n.invalidateQueries({queryKey:["zatca-config"]}),n.invalidateQueries({queryKey:["zatca-status"]}),r.success("Configuration Saved","ZATCA settings have been updated")},onError:p=>{r.error("Error",p.response?.data?.error||"Failed to save configuration")}}),u=ot({mutationFn:async()=>{const{data:p}=await xe.post("/zatca/test-connection");return p},onSuccess:p=>{r.success("Connection Test Passed",p.message)},onError:p=>{r.error("Connection Test Failed",p.response?.data?.error||"Failed to connect")}}),d=p=>{p.preventDefault(),l.mutate(i)},f=(p,x)=>{a(v=>({...v,[p]:x}))};return o?e.jsxs("div",{children:[e.jsx(zc,{title:"ZATCA Configuration",subtitle:"Configure e-invoice integration settings"}),e.jsx("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:"Loading..."})]}):e.jsxs("div",{children:[e.jsx(zc,{title:"ZATCA Configuration",subtitle:"Configure Fatoora e-invoice integration settings",actions:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/admin/zatca"),children:[e.jsx(aa,{size:16}),"Back"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>u.mutate(),disabled:u.isPending,children:[e.jsx(cu,{size:16}),"Test Connection"]})]})}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"grid grid-2",style:{gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(lf,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"General Settings"})]}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Environment"}),e.jsxs("select",{className:"form-select",value:i.environment||"SIMULATION",onChange:p=>f("environment",p.target.value),children:[e.jsx("option",{value:"SIMULATION",children:"Simulation (Testing)"}),e.jsx("option",{value:"PRODUCTION",children:"Production"})]}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Use Simulation for testing before going live"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:i.enableZatcaPosting||!1,onChange:p=>f("enableZatcaPosting",p.target.checked)}),"Enable ZATCA Posting"]}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"When enabled, issued invoices will be submitted to ZATCA automatically"})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Simplified Invoice Mode (B2C)"}),e.jsxs("select",{className:"form-select",value:i.simplifiedMode||"REPORTING",onChange:p=>f("simplifiedMode",p.target.value),children:[e.jsx("option",{value:"REPORTING",children:"Reporting"}),e.jsx("option",{value:"CLEARANCE",children:"Clearance"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Standard Invoice Mode (B2B)"}),e.jsxs("select",{className:"form-select",value:i.standardMode||"CLEARANCE",onChange:p=>f("standardMode",p.target.value),children:[e.jsx("option",{value:"CLEARANCE",children:"Clearance"}),e.jsx("option",{value:"REPORTING",children:"Reporting"})]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mp,{size:18,style:{color:"var(--info)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Seller Information"})]}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Seller Name (English)"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerName||"",onChange:p=>f("sellerName",p.target.value),placeholder:"Company name in English"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Seller Name (Arabic)"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerNameAr||"",onChange:p=>f("sellerNameAr",p.target.value),placeholder:"  ",dir:"rtl"})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VAT Number"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerVatNo||"",onChange:p=>f("sellerVatNo",p.target.value),placeholder:"300000000000003",maxLength:15})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"CR Number"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerCrNo||"",onChange:p=>f("sellerCrNo",p.target.value),placeholder:"Commercial Registration"})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Street"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerStreet||"",onChange:p=>f("sellerStreet",p.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Building Number"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerBuilding||"",onChange:p=>f("sellerBuilding",p.target.value)})]})]}),e.jsxs("div",{className:"grid grid-3",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"District"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerDistrict||"",onChange:p=>f("sellerDistrict",p.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerCity||"",onChange:p=>f("sellerCity",p.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Postal Code"}),e.jsx("input",{type:"text",className:"form-input",value:i.sellerPostalCode||"",onChange:p=>f("sellerPostalCode",p.target.value)})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pr,{size:18,style:{color:"var(--warning)"}}),e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Retry & Notification Settings"})]}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Retry Count"}),e.jsx("input",{type:"number",className:"form-input",value:i.retriesCount||3,onChange:p=>f("retriesCount",parseInt(p.target.value)),min:0,max:10})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Backoff Seconds"}),e.jsx("input",{type:"number",className:"form-input",value:i.backoffSeconds||60,onChange:p=>f("backoffSeconds",parseInt(p.target.value)),min:10})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:i.blockUntilAccepted||!1,onChange:p=>f("blockUntilAccepted",p.target.checked)}),"Block customer visibility until ZATCA accepted"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:i.notifyOnRejection!==!1,onChange:p=>f("notifyOnRejection",p.target.checked)}),"Notify admin on rejection/failure"]})})]})]})]}),e.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:l.isPending,children:[e.jsx(lc,{size:16}),"Save Configuration"]})})]})]})}const mM=[{id:1,title:"Create Device",icon:cn},{id:2,title:"Generate CSR",icon:Bg},{id:3,title:"Request CCSID",icon:Pr},{id:4,title:"Compliance Check",icon:ia},{id:5,title:"Request PCSID",icon:Ut}];function HNe(){const t=Qr(),r=gn(),n=pr(),[i,a]=k.useState(null),[s,o]=k.useState(""),[l,u]=k.useState(""),{data:d=[],isLoading:f}=Ve({queryKey:["zatca-credentials"],queryFn:async()=>{const{data:Y}=await xe.get("/zatca/credentials");return Y}}),{data:p}=Ve({queryKey:["zatca-config"],queryFn:async()=>{const{data:Y}=await xe.get("/zatca/config");return Y}}),x=ot({mutationFn:async Y=>{const{data:q}=await xe.post("/zatca/credentials",{deviceName:Y,environment:p?.environment||"SIMULATION"});return q},onSuccess:Y=>{n.invalidateQueries({queryKey:["zatca-credentials"]}),a(Y.id),u(""),r.success("Device Created","New device credential created")},onError:Y=>{r.error("Error",Y.response?.data?.error||"Failed to create device")}}),v=ot({mutationFn:async Y=>{const{data:q}=await xe.post(`/zatca/credentials/${Y}/generate-csr`,{});return q},onSuccess:()=>{n.invalidateQueries({queryKey:["zatca-credentials"]}),r.success("CSR Generated","Certificate Signing Request has been generated")},onError:Y=>{r.error("Error",Y.response?.data?.error||"Failed to generate CSR")}}),w=ot({mutationFn:async({id:Y,otp:q})=>{const{data:W}=await xe.post(`/zatca/credentials/${Y}/request-ccsid`,{otp:q});return W},onSuccess:()=>{n.invalidateQueries({queryKey:["zatca-credentials"]}),o(""),r.success("CCSID Obtained","Compliance CSID has been issued")},onError:Y=>{r.error("Error",Y.response?.data?.error||"Failed to obtain CCSID")}}),C=ot({mutationFn:async Y=>{const{data:q}=await xe.post(`/zatca/credentials/${Y}/run-compliance`);return q},onSuccess:Y=>{n.invalidateQueries({queryKey:["zatca-credentials"]}),Y.result?.passed?r.success("Compliance Passed","All compliance checks passed"):r.error("Compliance Failed","Some checks failed. Review errors.")},onError:Y=>{r.error("Error",Y.response?.data?.error||"Failed to run compliance")}}),N=ot({mutationFn:async Y=>{const{data:q}=await xe.post(`/zatca/credentials/${Y}/request-pcsid`);return q},onSuccess:()=>{n.invalidateQueries({queryKey:["zatca-credentials"]}),n.invalidateQueries({queryKey:["zatca-status"]}),r.success("PCSID Obtained","Production CSID issued. Integration is now ACTIVE!")},onError:Y=>{r.error("Error",Y.response?.data?.error||"Failed to obtain PCSID")}}),T=ot({mutationFn:async Y=>{await xe.delete(`/zatca/credentials/${Y}`)},onSuccess:()=>{n.invalidateQueries({queryKey:["zatca-credentials"]}),a(null),r.success("Deleted","Credential has been removed")},onError:Y=>{r.error("Error",Y.response?.data?.error||"Failed to delete")}}),O=d.find(Y=>Y.id===i),D=Y=>Y.status==="ACTIVE"?6:Y.compliancePassed?5:Y.status==="COMPLIANCE_READY"?4:Y.csrPem?3:2,M=(Y,q)=>Y<q?"completed":Y===q?"current":"pending";return e.jsxs("div",{children:[e.jsx(zc,{title:"ZATCA Onboarding",subtitle:"Complete the onboarding process to activate ZATCA e-invoice integration",actions:e.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/admin/zatca"),children:[e.jsx(aa,{size:16}),"Back to Overview"]})}),e.jsxs("div",{className:"grid grid-3",style:{gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{gridColumn:"span 1"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Devices / Solution Units"})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("input",{type:"text",className:"form-input",placeholder:"New device name...",value:l,onChange:Y=>u(Y.target.value),style:{marginBottom:"0.5rem"}}),e.jsxs("button",{className:"btn btn-primary",style:{width:"100%"},onClick:()=>x.mutate(l),disabled:!l||x.isPending,children:[e.jsx(cn,{size:16}),"Create Device"]})]}),f?e.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-muted)"},children:"Loading..."}):d.length===0?e.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-muted)"},children:"No devices created yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:d.map(Y=>e.jsxs("div",{onClick:()=>a(Y.id),style:{padding:"0.75rem",borderRadius:"8px",border:`2px solid ${i===Y.id?"var(--primary)":"var(--border)"}`,cursor:"pointer",background:i===Y.id?"var(--primary-light)":"transparent"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:500},children:Y.deviceName}),e.jsx("span",{className:`badge badge-${Y.status==="ACTIVE"?"success":Y.status==="COMPLIANCE_READY"?"warning":"default"}`,children:Y.status})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Y.environment})]},Y.id))})]})]}),e.jsxs("div",{className:"card",style:{gridColumn:"span 2"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{margin:0,fontWeight:600},children:"Onboarding Steps"})}),O?e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem"},children:mM.map((Y,q)=>{const W=D(O),J=M(Y.id,W),z=Y.icon;return e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.5rem",background:J==="completed"?"var(--success)":J==="current"?"var(--primary)":"var(--bg-tertiary)",color:J==="pending"?"var(--text-muted)":"#fff"},children:J==="completed"?e.jsx(Ai,{size:20}):e.jsx(z,{size:20})}),e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:J==="current"?600:400},children:Y.title}),q<mM.length-1&&e.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",width:"100%",height:"2px",background:J==="completed"?"var(--success)":"var(--border)"}})]},Y.id)})}),O.status==="ACTIVE"?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx(Ut,{size:64,style:{color:"var(--success)",marginBottom:"1rem"}}),e.jsx("h3",{children:"Onboarding Complete!"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"This device is now active and ready to submit invoices to ZATCA."})]}):e.jsx("div",{className:"card",style:{background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{padding:"1.25rem"},children:[D(O)===2&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Step 2: Generate CSR"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Generate a Certificate Signing Request (CSR) with your organization details."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>v.mutate(O.id),disabled:v.isPending,children:[e.jsx(Bg,{size:16}),"Generate CSR"]})]}),D(O)===3&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Step 3: Request CCSID"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Enter the OTP from the Fatoora portal to obtain a Compliance CSID."}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",className:"form-input",placeholder:"Enter OTP from Fatoora portal",value:s,onChange:Y=>o(Y.target.value),style:{flex:1}}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>w.mutate({id:O.id,otp:s}),disabled:!s||w.isPending,children:[e.jsx(Pr,{size:16}),"Request CCSID"]})]})]}),D(O)===4&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Step 4: Run Compliance Checks"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Submit sample invoices to verify compliance with ZATCA requirements."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>C.mutate(O.id),disabled:C.isPending,children:[e.jsx(ia,{size:16}),"Run Compliance Checks"]})]}),D(O)===5&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Step 5: Request PCSID"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Compliance passed! Request a Production CSID to activate the integration."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>N.mutate(O.id),disabled:N.isPending,children:[e.jsx(Ut,{size:16}),"Request PCSID & Activate"]})]})]})}),O.status!=="ACTIVE"&&e.jsx("div",{style:{marginTop:"1.5rem",textAlign:"right"},children:e.jsxs("button",{className:"btn btn-danger",onClick:()=>{confirm("Delete this device credential?")&&T.mutate(O.id)},children:[e.jsx(ra,{size:16}),"Delete Device"]})})]}):e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(ia,{size:48,style:{marginBottom:"1rem"}}),e.jsx("p",{children:"Select a device from the left panel or create a new one to begin onboarding"})]})]})]})]})}const VNe=[{id:"IN_APP",label:"In-App",icon:xo},{id:"EMAIL",label:"Email",icon:uc},{id:"SMS",label:"SMS",icon:vo},{id:"WHATSAPP",label:"WhatsApp",icon:Jp}],$Ne=[{value:"SMTP",label:"SMTP"},{value:"RESEND",label:"Resend"}],GNe=[{value:"TWILIO",label:"Twilio"}],KNe=[{value:"META_WHATSAPP",label:"Meta Cloud API"},{value:"TWILIO",label:"Twilio"}];function QNe(){const t=pr(),r=gn(),[n,i]=k.useState("EMAIL"),[a,s]=k.useState(""),[o,l]=k.useState(!1),[u,d]=k.useState({}),[f,p]=k.useState({providerType:"SMTP",host:"",port:"587",secure:!1,username:"",password:"",fromEmail:"",fromName:"RadioPharma OMS",isEnabled:!1}),[x,v]=k.useState({providerType:"TWILIO",accountSid:"",authToken:"",phoneNumber:"",isEnabled:!1}),[w,C]=k.useState({providerType:"META_WHATSAPP",accessToken:"",phoneNumberId:"",businessAccountId:"",isEnabled:!1}),{data:N,isLoading:T}=Ve({queryKey:["notification-channel-configs"],queryFn:async()=>{const{data:ce}=await xe.get("/notification-channels");return ce}}),{data:O,isLoading:D,refetch:M}=Ve({queryKey:["notification-channel-status"],queryFn:async()=>{const{data:ce}=await xe.get("/notification-channels/status");return ce}});k.useEffect(()=>{if(N?.EMAIL){const ce=N.EMAIL.settingsJson||{};p({providerType:N.EMAIL.providerType||"SMTP",host:ce.host||"",port:ce.port||"587",secure:ce.secure||!1,username:ce.username||"",password:ce.password||"",fromEmail:ce.fromEmail||N.EMAIL.fromAddress||"",fromName:ce.fromName||N.EMAIL.fromName||"RadioPharma OMS",isEnabled:N.EMAIL.isEnabled||!1})}if(N?.SMS){const ce=N.SMS.settingsJson||{};v({providerType:N.SMS.providerType||"TWILIO",accountSid:ce.accountSid||"",authToken:ce.authToken||"",phoneNumber:ce.phoneNumber||"",isEnabled:N.SMS.isEnabled||!1})}if(N?.WHATSAPP){const ce=N.WHATSAPP.settingsJson||{};C({providerType:N.WHATSAPP.providerType||"META_WHATSAPP",accessToken:ce.accessToken||"",phoneNumberId:ce.phoneNumberId||"",businessAccountId:ce.businessAccountId||"",isEnabled:N.WHATSAPP.isEnabled||!1})}},[N]);const Y=ot({mutationFn:async({channel:ce,data:Q})=>{await xe.put(`/notification-channels/${ce}`,Q)},onSuccess:()=>{r.success("Settings Saved","Channel configuration updated successfully"),t.invalidateQueries({queryKey:["notification-channel-configs"]}),t.invalidateQueries({queryKey:["notification-channel-status"]})},onError:()=>{r.error("Save Failed","Failed to save channel configuration")}}),q=async()=>{const ce=f.providerType==="SMTP"?{host:f.host,port:f.port,secure:f.secure,username:f.username,password:f.password,fromEmail:f.fromEmail,fromName:f.fromName}:{};Y.mutate({channel:"EMAIL",data:{providerType:f.providerType,settingsJson:ce,fromName:f.fromName,fromAddress:f.fromEmail,isEnabled:f.isEnabled}})},W=async()=>{Y.mutate({channel:"SMS",data:{providerType:x.providerType,settingsJson:{accountSid:x.accountSid,authToken:x.authToken,phoneNumber:x.phoneNumber},isEnabled:x.isEnabled}})},J=async()=>{Y.mutate({channel:"WHATSAPP",data:{providerType:w.providerType,settingsJson:{accessToken:w.accessToken,phoneNumberId:w.phoneNumberId,businessAccountId:w.businessAccountId},isEnabled:w.isEnabled}})},z=async ce=>{if(!a){r.error("Recipient Required","Please enter a recipient to send the test to");return}l(!0);try{const{data:Q}=await xe.post(`/notification-channels/${ce}/test`,{recipient:a});Q.success?r.success("Test Sent",Q.message||"Test message sent successfully"):r.error("Test Failed",Q.message||"Failed to send test message"),t.invalidateQueries({queryKey:["notification-channel-configs"]})}catch(Q){r.error("Test Failed",Q.response?.data?.error||"Failed to send test message")}l(!1)};if(T||D)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const G=()=>e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx(xo,{size:24,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{margin:0},children:"In-App Notifications"}),e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Always Enabled"]})]}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"In-app notifications are always enabled and cannot be disabled. They appear in the notification bell in the header and in the notification center."}),e.jsxs("div",{className:"card",style:{padding:"1rem",background:"var(--bg-secondary)"},children:[e.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Features"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--text-muted)"},children:[e.jsx("li",{children:"Real-time notification bell with unread count"}),e.jsx("li",{children:"Notification center with full history"}),e.jsx("li",{children:"Click-to-navigate to related records"}),e.jsx("li",{children:"Mark as read / Mark all as read"}),e.jsx("li",{children:"Filter by notification type"})]})]})]}),ne=()=>{const ce=O?.email,Q=ce?.connected&&f.isEnabled;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(uc,{size:24,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{margin:0},children:"Email Configuration"}),Q&&e.jsx("span",{className:"badge badge-success",children:"Active"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[ce?.connected?e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Connected"]}):e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ci,{size:12})," Not Connected"]}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>M(),children:e.jsx(cu,{size:14})})]})]}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:"Configure email notification settings"}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--bg-secondary)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:"Provider Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.875rem"},children:"Select your email service provider"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:"Provider"}),e.jsx("select",{className:"form-control",value:f.providerType,onChange:de=>p({...f,providerType:de.target.value}),style:{maxWidth:"300px"},children:$Ne.map(de=>e.jsx("option",{value:de.value,children:de.label},de.value))})]})]}),f.providerType==="SMTP"&&e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--bg-secondary)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Credentials"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.875rem"},children:"Enter your SMTP API credentials"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["SMTP Host ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:f.host,onChange:de=>p({...f,host:de.target.value}),placeholder:"smtp.example.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["SMTP Port ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:f.port,onChange:de=>p({...f,port:de.target.value}),placeholder:"587"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:f.secure,onChange:de=>p({...f,secure:de.target.checked})}),e.jsx("span",{style:{fontWeight:500},children:"Use SSL/TLS"})]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.75rem",margin:"0.25rem 0 0 1.5rem"},children:"Enable secure connection for SMTP"})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Username ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:f.username,onChange:de=>p({...f,username:de.target.value}),placeholder:"your-username"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Password ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:u.emailPassword?"text":"password",className:"form-control",value:f.password,onChange:de=>p({...f,password:de.target.value}),placeholder:"Enter password",style:{paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>d({...u,emailPassword:!u.emailPassword}),style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:u.emailPassword?e.jsx(Ag,{size:16}):e.jsx(os,{size:16})})]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["From Email ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"email",className:"form-control",value:f.fromEmail,onChange:de=>p({...f,fromEmail:de.target.value}),placeholder:"noreply@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:"From Name"}),e.jsx("input",{type:"text",className:"form-control",value:f.fromName,onChange:de=>p({...f,fromName:de.target.value}),placeholder:"RadioPharma OMS"})]})]})]}),f.providerType==="RESEND"&&e.jsx("div",{className:"card",style:{padding:"1rem",background:"var(--info-bg)",marginBottom:"1.5rem"},children:e.jsx("p",{style:{margin:0,color:"var(--info)",fontSize:"0.875rem"},children:"Resend credentials are managed through Replit integrations. Configure your Resend API key in the Replit secrets panel."})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Enable Channel"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Allow notifications to be sent through this channel"})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:f.isEnabled,onChange:de=>p({...f,isEnabled:de.target.checked})}),e.jsx("span",{className:"toggle-slider"})]})]}),ce?.error&&e.jsxs("div",{style:{padding:"0.75rem",background:"var(--danger-bg)",borderRadius:"6px",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)",marginTop:"1rem"},children:[e.jsx(sn,{size:16}),e.jsx("span",{style:{fontSize:"0.875rem"},children:ce.error})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"1.5rem"},children:e.jsxs("button",{className:"btn btn-primary",onClick:q,disabled:Y.isPending,children:[e.jsx(lc,{size:16,style:{marginRight:"0.5rem"}}),"Save Changes"]})})]}),me("EMAIL","email address","test@example.com")]})},Z=()=>{const ce=O?.sms,Q=ce?.connected&&x.isEnabled;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(vo,{size:24,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{margin:0},children:"SMS Configuration"}),Q&&e.jsx("span",{className:"badge badge-success",children:"Active"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[ce?.connected?e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Connected"]}):e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ci,{size:12})," Not Connected"]}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>M(),children:e.jsx(cu,{size:14})})]})]}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:"Configure SMS notification settings"}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--bg-secondary)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:"Provider Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.875rem"},children:"Select your SMS service provider"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:"Provider"}),e.jsx("select",{className:"form-control",value:x.providerType,onChange:de=>v({...x,providerType:de.target.value}),style:{maxWidth:"300px"},children:GNe.map(de=>e.jsx("option",{value:de.value,children:de.label},de.value))})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--bg-secondary)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Credentials"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.875rem"},children:"Enter your Twilio API credentials"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Account SID ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:x.accountSid,onChange:de=>v({...x,accountSid:de.target.value}),placeholder:"AC..."})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Auth Token ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:u.smsAuthToken?"text":"password",className:"form-control",value:x.authToken,onChange:de=>v({...x,authToken:de.target.value}),placeholder:"Enter auth token",style:{paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>d({...u,smsAuthToken:!u.smsAuthToken}),style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:u.smsAuthToken?e.jsx(Ag,{size:16}):e.jsx(os,{size:16})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Phone Number ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"tel",className:"form-control",value:x.phoneNumber,onChange:de=>v({...x,phoneNumber:de.target.value}),placeholder:"+1234567890"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Enable Channel"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Allow notifications to be sent through this channel"})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:x.isEnabled,onChange:de=>v({...x,isEnabled:de.target.checked})}),e.jsx("span",{className:"toggle-slider"})]})]}),ce?.error&&e.jsxs("div",{style:{padding:"0.75rem",background:"var(--danger-bg)",borderRadius:"6px",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)",marginTop:"1rem"},children:[e.jsx(sn,{size:16}),e.jsx("span",{style:{fontSize:"0.875rem"},children:ce.error})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"1.5rem"},children:e.jsxs("button",{className:"btn btn-primary",onClick:W,disabled:Y.isPending,children:[e.jsx(lc,{size:16,style:{marginRight:"0.5rem"}}),"Save Changes"]})})]}),me("SMS","phone number","+966501234567")]})},ie=()=>{const ce=O?.whatsapp,Q=ce?.connected&&w.isEnabled;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Jp,{size:24,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{margin:0},children:"WhatsApp Configuration"}),Q&&e.jsx("span",{className:"badge badge-success",children:"Active"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[ce?.connected?e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Connected"]}):e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ci,{size:12})," Not Connected"]}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>M(),children:e.jsx(cu,{size:14})})]})]}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:"Configure WhatsApp notification settings"}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--bg-secondary)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:"Provider Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.875rem"},children:"Select your WhatsApp service provider"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:"Provider"}),e.jsx("select",{className:"form-control",value:w.providerType,onChange:de=>C({...w,providerType:de.target.value}),style:{maxWidth:"300px"},children:KNe.map(de=>e.jsx("option",{value:de.value,children:de.label},de.value))})]})]}),w.providerType==="META_WHATSAPP"&&e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--bg-secondary)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Credentials"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.875rem"},children:"Enter your Meta API credentials"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Access Token ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:u.whatsappToken?"text":"password",className:"form-control",value:w.accessToken,onChange:de=>C({...w,accessToken:de.target.value}),placeholder:"Enter access token",style:{paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>d({...u,whatsappToken:!u.whatsappToken}),style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:u.whatsappToken?e.jsx(Ag,{size:16}):e.jsx(os,{size:16})})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Phone Number ID ",e.jsx("span",{style:{color:"var(--danger)"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:w.phoneNumberId,onChange:de=>C({...w,phoneNumberId:de.target.value}),placeholder:"Enter phone number id"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:"Business Account ID"}),e.jsx("input",{type:"text",className:"form-control",value:w.businessAccountId,onChange:de=>C({...w,businessAccountId:de.target.value}),placeholder:"Enter business account id"})]})]}),w.providerType==="TWILIO"&&e.jsx("div",{className:"card",style:{padding:"1rem",background:"var(--info-bg)",marginBottom:"1.5rem"},children:e.jsx("p",{style:{margin:0,color:"var(--info)",fontSize:"0.875rem"},children:"Twilio WhatsApp uses the same credentials as SMS. Configure your Twilio credentials in the SMS tab."})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Enable Channel"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Allow notifications to be sent through this channel"})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:w.isEnabled,onChange:de=>C({...w,isEnabled:de.target.checked})}),e.jsx("span",{className:"toggle-slider"})]})]}),ce?.error&&e.jsxs("div",{style:{padding:"0.75rem",background:"var(--danger-bg)",borderRadius:"6px",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)",marginTop:"1rem"},children:[e.jsx(sn,{size:16}),e.jsx("span",{style:{fontSize:"0.875rem"},children:ce.error})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"1.5rem"},children:e.jsxs("button",{className:"btn btn-primary",onClick:J,disabled:Y.isPending,children:[e.jsx(lc,{size:16,style:{marginRight:"0.5rem"}}),"Save Changes"]})})]}),me("WHATSAPP","phone number","+966501234567")]})},me=(ce,Q,de)=>{const le=N?.[ce];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gi,{size:18}),"Send Test Message"]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:1,maxWidth:"400px"},children:[e.jsxs("label",{style:{fontWeight:500,marginBottom:"0.5rem",display:"block"},children:["Recipient ",Q]}),e.jsx("input",{type:ce==="EMAIL"?"email":"tel",className:"form-control",value:a,onChange:ye=>s(ye.target.value),placeholder:de})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>z(ce),disabled:o,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o?e.jsx("div",{className:"spinner",style:{width:"16px",height:"16px"}}):e.jsx(Gi,{size:16}),"Send Test"]})]}),le?.lastTestedAt&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[le.lastTestStatus==="SENT"?e.jsx(Ut,{size:14,style:{color:"var(--success)"}}):e.jsx(ci,{size:14,style:{color:"var(--danger)"}}),e.jsxs("span",{children:["Last test: ",new Date(le.lastTestedAt).toLocaleString()," -",e.jsx("span",{style:{color:le.lastTestStatus==="SENT"?"var(--success)":"var(--danger)",marginLeft:"0.25rem"},children:le.lastTestStatus==="SENT"?"Successful":"Failed"})]})]}),le.lastTestMessage&&le.lastTestStatus!=="SENT"&&e.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"var(--text-muted)"},children:le.lastTestMessage})]})]}),e.jsx("div",{className:"card",style:{padding:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pr,{size:18}),"Delivery Logs"]}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:"View detailed logs of all delivery attempts"})]}),e.jsx(nr,{to:"/admin/notification-delivery-logs",className:"btn btn-outline",children:"View Logs"})]})})]})};return e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(nr,{to:"/settings",className:"btn btn-outline btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.5rem"},children:"Notification Channels"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.875rem"},children:"Configure email, SMS, and WhatsApp notification channels"})]})]})}),e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",marginBottom:"1.5rem"},children:VNe.map(ce=>{const Q=ce.id==="EMAIL"?f.isEnabled:ce.id==="SMS"?x.isEnabled:ce.id==="WHATSAPP"?w.isEnabled:!0;return e.jsxs("button",{onClick:()=>i(ce.id),className:`tab-button ${n===ce.id?"active":""}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",border:"none",background:"transparent",cursor:"pointer",borderBottom:n===ce.id?"2px solid var(--primary)":"2px solid transparent",color:n===ce.id?"var(--primary)":"var(--text-muted)",fontWeight:n===ce.id?600:400},children:[e.jsx(ce.icon,{size:18}),ce.label,ce.id!=="IN_APP"&&Q&&e.jsx("span",{className:"badge badge-success",style:{padding:"0.125rem 0.375rem",fontSize:"0.625rem"},children:"ON"}),ce.id!=="IN_APP"&&!Q&&e.jsx("span",{className:"badge badge-secondary",style:{padding:"0.125rem 0.375rem",fontSize:"0.625rem"},children:"OFF"})]},ce.id)})}),n==="IN_APP"&&G(),n==="EMAIL"&&ne(),n==="SMS"&&Z(),n==="WHATSAPP"&&ie()]})}const YNe={EMAIL:uc,SMS:vo,WHATSAPP:Jp,IN_APP:xo},pM={SENT:{color:"var(--success)",bg:"var(--success-bg)",icon:Ut},FAILED:{color:"var(--danger)",bg:"var(--danger-bg)",icon:ci},PENDING:{color:"var(--warning)",bg:"var(--warning-bg)",icon:Qt},SKIPPED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",icon:QL}};function ZNe(){const{formatDateTime:t}=mh(),[r,n]=k.useState({channel:"all",status:"all",startDate:"",endDate:"",search:""}),[i,a]=k.useState(1),s=25,{data:o,isLoading:l}=Ve({queryKey:["delivery-attempts",r,i],queryFn:async()=>{const p=new URLSearchParams;r.channel!=="all"&&p.append("channel",r.channel),r.status!=="all"&&p.append("status",r.status),r.startDate&&p.append("startDate",r.startDate),r.endDate&&p.append("endDate",r.endDate),r.search&&p.append("search",r.search),p.append("page",i.toString()),p.append("limit",s.toString());const{data:x}=await xe.get(`/notification-channels/delivery-attempts?${p}`);return x}}),u=async()=>{const p=new URLSearchParams;r.channel!=="all"&&p.append("channel",r.channel),r.status!=="all"&&p.append("status",r.status),r.startDate&&p.append("startDate",r.startDate),r.endDate&&p.append("endDate",r.endDate),p.append("limit","10000");try{const{data:x}=await xe.get(`/notification-channels/delivery-attempts?${p}`),v=[["Date","Channel","Status","Recipient","Notification","Provider ID","Error"].join(","),...x.data.map(T=>[new Date(T.attemptedAt).toISOString(),T.channel,T.status,`"${T.recipientAddress}"`,`"${T.notification?.title||"N/A"}"`,T.providerMessageId||"",`"${T.errorMessage||""}"`].join(","))],w=new Blob([v.join(`
`)],{type:"text/csv"}),C=URL.createObjectURL(w),N=document.createElement("a");N.href=C,N.download=`notification-logs-${new Date().toISOString().split("T")[0]}.csv`,N.click(),URL.revokeObjectURL(C)}catch(x){console.error("Export failed",x)}},d=p=>{const x=pM[p]||pM.PENDING,v=x.icon;return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,color:x.color,background:x.bg},children:[e.jsx(v,{size:12}),p]})},f=p=>{const x=YNe[p]||xo;return e.jsx(x,{size:16,style:{color:"var(--text-muted)"}})};return e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(nr,{to:"/admin/notification-channels",className:"btn btn-outline btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.5rem"},children:"Notification Delivery Logs"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.875rem"},children:"View all notification delivery attempts across channels"})]})]}),e.jsxs("button",{className:"btn btn-outline",onClick:u,children:[e.jsx(Xp,{size:16}),"Export CSV"]})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"Channel"}),e.jsxs("select",{className:"form-control",value:r.channel,onChange:p=>{n({...r,channel:p.target.value}),a(1)},style:{minWidth:"120px"},children:[e.jsx("option",{value:"all",children:"All Channels"}),e.jsx("option",{value:"EMAIL",children:"Email"}),e.jsx("option",{value:"SMS",children:"SMS"}),e.jsx("option",{value:"WHATSAPP",children:"WhatsApp"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"Status"}),e.jsxs("select",{className:"form-control",value:r.status,onChange:p=>{n({...r,status:p.target.value}),a(1)},style:{minWidth:"120px"},children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"SENT",children:"Sent"}),e.jsx("option",{value:"FAILED",children:"Failed"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"SKIPPED",children:"Skipped"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"From Date"}),e.jsx("input",{type:"date",className:"form-control",value:r.startDate,onChange:p=>{n({...r,startDate:p.target.value}),a(1)}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"To Date"}),e.jsx("input",{type:"date",className:"form-control",value:r.endDate,onChange:p=>{n({...r,endDate:p.target.value}),a(1)}})]}),e.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:500,display:"block",marginBottom:"0.25rem"},children:"Search Recipient"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by email or phone...",value:r.search,onChange:p=>{n({...r,search:p.target.value}),a(1)}})]}),e.jsxs("button",{className:"btn btn-outline btn-sm",onClick:()=>{n({channel:"all",status:"all",startDate:"",endDate:"",search:""}),a(1)},children:[e.jsx(fl,{size:14}),"Clear"]})]})}),l?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem"},children:e.jsx("div",{className:"spinner"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card",style:{overflow:"hidden"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date/Time"}),e.jsx("th",{children:"Channel"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Recipient"}),e.jsx("th",{children:"Notification"}),e.jsx("th",{children:"Provider ID"}),e.jsx("th",{children:"Error"})]})}),e.jsx("tbody",{children:o?.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:"No delivery attempts found matching your filters"})}):o?.data.map(p=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"nowrap"},children:t(p.attemptedAt)}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f(p.channel),e.jsx("span",{children:p.channel})]})}),e.jsx("td",{children:d(p.status)}),e.jsx("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis"},children:p.recipientAddress}),e.jsx("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis"},children:p.notification?.title||"-"}),e.jsx("td",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--text-muted)"},children:p.providerMessageId?p.providerMessageId.substring(0,20)+"...":"-"}),e.jsx("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",color:"var(--danger)"},children:p.errorMessage||"-"})]},p.id))})]})}),o?.pagination&&o.pagination.total>0&&e.jsx("div",{style:{marginTop:"1rem",borderRadius:"8px",overflow:"hidden"},children:e.jsx(i0,{page:i,pageSize:s,totalCount:o.pagination.total,onPageChange:a})})]})]})}const XNe=[{value:"INFO",label:"All Notifications",description:"Receive all notifications including informational updates"},{value:"ACTION_REQUIRED",label:"Action Required & Above",description:"Only notifications that require your action"},{value:"WARNING",label:"Warnings & Critical Only",description:"Only warnings and critical alerts"},{value:"CRITICAL",label:"Critical Only",description:"Only receive critical system alerts"}];function JNe(){const t=pr(),r=gn(),[n,i]=k.useState(null),[a,s]=k.useState(!1),{data:o,isLoading:l}=Ve({queryKey:["user-notification-preferences"],queryFn:async()=>{const{data:x}=await xe.get("/notification-channels/user-preferences");return x}});k.useEffect(()=>{o&&i(o)},[o]);const u=ot({mutationFn:async x=>{await xe.put("/notification-channels/user-preferences",x)},onSuccess:()=>{r.success("Preferences Saved","Your notification preferences have been updated"),t.invalidateQueries({queryKey:["user-notification-preferences"]}),s(!1)},onError:()=>{r.error("Save Failed","Failed to save notification preferences")}}),d=(x,v)=>{n&&(i({...n,[x]:v}),s(!0))},f=()=>{n&&u.mutate({emailEnabled:n.emailEnabled,smsEnabled:n.smsEnabled,whatsappEnabled:n.whatsappEnabled,minSeverity:n.minSeverity})};if(l||!n)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const p=(x,v,w,C,N,T)=>{const O=v,D=N===!1;return e.jsxs("div",{className:"card",style:{padding:"1.25rem",opacity:D?.6:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(O,{size:24,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0},children:w}),e.jsxs("p",{style:{margin:0,fontSize:"0.875rem",color:"var(--text-muted)"},children:["Receive notifications via ",w.toLowerCase()]})]})]}),e.jsxs("label",{className:"switch",style:{position:"relative"},children:[e.jsx("input",{type:"checkbox",checked:C&&!D,disabled:D,onChange:M=>T(M.target.checked)}),e.jsx("span",{className:"slider"})]})]}),D&&e.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.5rem 0.75rem",background:"var(--warning-bg)",borderRadius:"4px",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--warning)"},children:[e.jsx(sn,{size:14}),"This channel has been disabled by an administrator"]})]})};return e.jsxs("div",{style:{padding:"1.5rem",maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(nr,{to:"/profile",className:"btn btn-outline btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.5rem"},children:"Notification Preferences"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.875rem"},children:"Choose how you want to receive notifications"})]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:f,disabled:!a||u.isPending,children:[u.isPending?e.jsx("div",{className:"spinner",style:{width:"16px",height:"16px"}}):e.jsx(lc,{size:16}),"Save Changes"]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(xo,{size:20}),"Notification Channels"]}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Select which channels you want to receive notifications on. In-app notifications are always enabled."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsx("div",{className:"card",style:{padding:"1.25rem",background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(xo,{size:24,style:{color:"var(--primary)"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0},children:"In-App Notifications"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"var(--text-muted)"},children:"Always enabled - notifications appear in the notification bell"})]}),e.jsx("span",{className:"badge badge-success",children:"Always On"})]})}),p("email",uc,"Email",n.emailEnabled,n.emailGlobalEnabled,x=>d("emailEnabled",x)),p("sms",vo,"SMS",n.smsEnabled,n.smsGlobalEnabled,x=>d("smsEnabled",x)),p("whatsapp",Jp,"WhatsApp",n.whatsappEnabled,n.whatsappGlobalEnabled,x=>d("whatsappEnabled",x))]})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(of,{size:20}),"Notification Threshold"]}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Set the minimum severity level for notifications you want to receive."}),e.jsx("div",{className:"card",style:{padding:"1.25rem"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:XNe.map(x=>e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem",borderRadius:"6px",cursor:"pointer",background:n.minSeverity===x.value?"var(--primary-bg)":"transparent",border:n.minSeverity===x.value?"1px solid var(--primary)":"1px solid transparent"},children:[e.jsx("input",{type:"radio",name:"severity",value:x.value,checked:n.minSeverity===x.value,onChange:v=>d("minSeverity",v.target.value),style:{marginTop:"0.125rem"}}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500},children:x.label}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"var(--text-muted)"},children:x.description})]})]},x.value))})})]}),e.jsx("style",{children:`
        .switch {
          position: relative;
          display: inline-block;
          width: 48px;
          height: 26px;
        }
        .switch input {
          opacity: 0;
          width: 0;
          height: 0;
        }
        .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: var(--bg-tertiary);
          transition: 0.3s;
          border-radius: 26px;
        }
        .slider:before {
          position: absolute;
          content: "";
          height: 20px;
          width: 20px;
          left: 3px;
          bottom: 3px;
          background-color: white;
          transition: 0.3s;
          border-radius: 50%;
        }
        input:checked + .slider {
          background-color: var(--primary);
        }
        input:checked + .slider:before {
          transform: translateX(22px);
        }
        input:disabled + .slider {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})}function eAe(){const t=Qr(),r=pr(),n=gn(),[i,a]=k.useState({}),[s,o]=k.useState(null),{data:l,isLoading:u}=Ve({queryKey:["admin-announcements"],queryFn:async()=>{const{data:M}=await xe.get("/announcements/admin/announcements");return M}}),d=ot({mutationFn:async M=>xe.post(`/announcements/admin/announcements/${M}/publish`),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-announcements"]}),n.success("Published","Announcement is now active")},onError:M=>{n.error("Error",M.response?.data?.error||"Failed to publish")}}),f=ot({mutationFn:async M=>xe.post(`/announcements/admin/announcements/${M}/unpublish`),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-announcements"]}),n.success("Unpublished","Announcement is now a draft")}}),p=ot({mutationFn:async M=>xe.delete(`/announcements/admin/announcements/${M}`),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-announcements"]}),n.success("Deleted","Announcement has been removed")}}),x=ot({mutationFn:async M=>xe.post(`/announcements/admin/announcements/${M}/duplicate`),onSuccess:M=>{r.invalidateQueries({queryKey:["admin-announcements"]}),n.success("Duplicated","A copy has been created"),t(`/admin/announcements/${M.data.id}/edit`)}}),v=[{key:"search",label:"Search",type:"search",placeholder:"Search title or content..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"DRAFT",label:"Draft"},{value:"SCHEDULED",label:"Scheduled"},{value:"ACTIVE",label:"Active"},{value:"EXPIRED",label:"Expired"}]},{key:"severity",label:"Severity",type:"select",options:[{value:"",label:"All Severities"},{value:"INFO",label:"Info"},{value:"WARNING",label:"Warning"},{value:"CRITICAL",label:"Critical"}]}],w=M=>M.computedStatus||M.status,C=l?.filter(M=>{const Y=w(M);if(i.status&&Y!==i.status||i.severity&&M.severity!==i.severity||s==="draft"&&Y!=="DRAFT"||s==="scheduled"&&Y!=="SCHEDULED"||s==="active"&&Y!=="ACTIVE"||s==="expired"&&Y!=="EXPIRED")return!1;if(i.search){const q=i.search.toLowerCase();if(!M.title.toLowerCase().includes(q)&&!M.body.toLowerCase().includes(q))return!1}return!0}),N={total:l?.length||0,draft:l?.filter(M=>w(M)==="DRAFT").length||0,scheduled:l?.filter(M=>w(M)==="SCHEDULED").length||0,active:l?.filter(M=>w(M)==="ACTIVE").length||0,expired:l?.filter(M=>w(M)==="EXPIRED").length||0},T=M=>{o(s===M?null:M)},O=M=>{switch(M){case"CRITICAL":return e.jsx(sn,{size:14,style:{color:"var(--danger)"}});case"WARNING":return e.jsx($r,{size:14,style:{color:"var(--warning)"}});default:return e.jsx(of,{size:14,style:{color:"var(--info)"}})}},D=M=>{const Y={DRAFT:"badge-secondary",SCHEDULED:"badge-info",ACTIVE:"badge-success",EXPIRED:"badge-danger"};return e.jsx("span",{className:`badge ${Y[M]||"badge-secondary"}`,children:M})};return u?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Announcement Management"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Create and manage system-wide announcements"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/admin/announcements/new"),children:[e.jsx(cn,{size:16}),"New Announcement"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total",value:N.total,icon:e.jsx(az,{size:20}),color:"primary",onClick:()=>o(null),selected:s===null}),e.jsx(st,{title:"Draft",value:N.draft,icon:e.jsx(Ha,{size:20}),color:"default",onClick:()=>T("draft"),selected:s==="draft"}),e.jsx(st,{title:"Scheduled",value:N.scheduled,icon:e.jsx($n,{size:20}),color:"info",onClick:()=>T("scheduled"),selected:s==="scheduled"}),e.jsx(st,{title:"Active",value:N.active,icon:e.jsx(yo,{size:20}),color:"success",onClick:()=>T("active"),selected:s==="active"}),e.jsx(st,{title:"Expired",value:N.expired,icon:e.jsx(FC,{size:20}),color:"danger",onClick:()=>T("expired"),selected:s==="expired"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:v,values:i,onChange:(M,Y)=>a(q=>({...q,[M]:Y})),onReset:()=>{a({}),o(null)}})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Announcements (",C?.length||0,")"]})}),C&&C.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Severity"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Schedule"}),e.jsx("th",{children:"Audience"}),e.jsx("th",{children:"Delivered"}),e.jsx("th",{children:"Created"}),e.jsx("th",{style:{width:"150px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:C.map(M=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500,maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.title}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[M.body.substring(0,60),"..."]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O(M.severity),e.jsx("span",{style:{fontSize:"0.8125rem"},children:M.severity})]})}),e.jsx("td",{children:D(w(M))}),e.jsx("td",{style:{fontSize:"0.8125rem"},children:M.startAt?e.jsxs("div",{children:[e.jsx("div",{children:Ze(new Date(M.startAt),"MMM dd, yyyy HH:mm")}),M.endAt&&e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:["to ",Ze(new Date(M.endAt),"MMM dd, yyyy HH:mm")]})]}):e.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(cc,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem"},children:M.audiences.length===0?"All":`${M.audiences.length} targets`})]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(os,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.8125rem"},children:M._count.deliveries})]})}),e.jsx("td",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Ze(new Date(M.createdAt),"MMM dd")}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.25rem",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>t(`/admin/announcements/${M.id}/edit`),title:"Edit",disabled:w(M)==="ACTIVE",children:e.jsx(Ha,{size:14})}),M.isPublished?w(M)==="ACTIVE"?e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>f.mutate(M.id),title:"Unpublish",disabled:f.isPending,children:e.jsx(FC,{size:14})}):null:e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>d.mutate(M.id),title:"Publish",disabled:d.isPending,children:e.jsx(yo,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>x.mutate(M.id),title:"Duplicate",children:e.jsx(PA,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>{confirm("Delete this announcement?")&&p.mutate(M.id)},title:"Delete",children:e.jsx(ra,{size:14})})]})})]},M.id))})]})}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No announcements found",message:"Create your first announcement to notify users",icon:"alert"})})]})]})}function gM(){const{id:t}=hl(),r=Qr(),n=pr(),i=gn(),a=!!t,[s,o]=k.useState({title:"",body:"",severity:"INFO",publishMode:"IMMEDIATE",startAt:"",endAt:"",sendEmail:!1,sendSms:!1,sendWhatsapp:!1,targetRoleCodes:[],specificCustomerIds:[],specificUserIds:[]}),{data:l,isLoading:u}=Ve({queryKey:["announcement",t],queryFn:async()=>{const{data:C}=await xe.get(`/announcements/admin/announcements/${t}`);return C},enabled:a}),{data:d}=Ve({queryKey:["roles"],queryFn:async()=>{const{data:C}=await xe.get("/roles");return C}}),{data:f}=Ve({queryKey:["customers"],queryFn:async()=>{const{data:C}=await xe.get("/customers");return C}}),{data:p}=Ve({queryKey:["users"],queryFn:async()=>{const{data:C}=await xe.get("/users");return C}});k.useEffect(()=>{if(l){const C=l.audiences.filter(O=>O.audienceType==="ROLE"),N=l.audiences.filter(O=>O.audienceType==="CUSTOMER"),T=l.audiences.filter(O=>O.audienceType==="USER");o({title:l.title,body:l.body,severity:l.severity,publishMode:l.publishMode,startAt:l.startAt?new Date(l.startAt).toISOString().slice(0,16):"",endAt:l.endAt?new Date(l.endAt).toISOString().slice(0,16):"",sendEmail:l.sendEmail,sendSms:l.sendSms,sendWhatsapp:l.sendWhatsapp,targetRoleCodes:C.map(O=>O.roleCode),specificCustomerIds:N.filter(O=>O.customerId).map(O=>O.customerId),specificUserIds:T.map(O=>O.userId)})}},[l]);const x=ot({mutationFn:async C=>a?xe.put(`/announcements/admin/announcements/${t}`,C):xe.post("/announcements/admin/announcements",C),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-announcements"]}),i.success("Saved",a?"Announcement updated":"Announcement created"),r("/admin/announcements")},onError:C=>{i.error("Error",C.response?.data?.error||"Failed to save")}}),v=ot({mutationFn:async C=>xe.post(`/announcements/admin/announcements/${C}/publish`),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-announcements"]}),i.success("Published","Announcement is now active"),r("/admin/announcements")},onError:C=>{i.error("Error",C.response?.data?.error||"Failed to publish")}}),w=async(C,N=!1)=>{if(C.preventDefault(),!s.title.trim()||!s.body.trim()){i.error("Validation Error","Title and message are required");return}if(s.publishMode==="SCHEDULED"&&!s.startAt){i.error("Validation Error","Start date is required for scheduled announcements");return}if(s.startAt&&s.endAt&&new Date(s.startAt)>=new Date(s.endAt)){i.error("Validation Error","End date must be after start date");return}const T=[];s.targetRoleCodes.forEach(M=>{T.push({audienceType:"ROLE",roleCode:M})}),s.specificCustomerIds.forEach(M=>{T.push({audienceType:"CUSTOMER",customerId:M})}),s.specificUserIds.forEach(M=>{T.push({audienceType:"USER",userId:M})});const O={title:s.title,body:s.body,severity:s.severity,publishMode:s.publishMode,startAt:s.startAt||null,endAt:s.endAt||null,sendEmail:s.sendEmail,sendSms:s.sendSms,sendWhatsapp:s.sendWhatsapp,audiences:T},D=await x.mutateAsync(O);N&&D.data.id&&await v.mutateAsync(D.data.id)};return a&&u?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs(nr,{to:"/admin/announcements",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",textDecoration:"none",marginBottom:"0.5rem"},children:[e.jsx(aa,{size:16}),"Back to Announcements"]}),e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:a?"Edit Announcement":"Create Announcement"})]}),e.jsxs("form",{onSubmit:C=>w(C,!1),children:[e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"1rem",fontSize:"1rem"},children:"Content"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title *"}),e.jsx("input",{type:"text",className:"form-input",value:s.title,onChange:C=>o(N=>({...N,title:C.target.value})),placeholder:"Announcement title",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Message *"}),e.jsx("textarea",{className:"form-input",value:s.body,onChange:C=>o(N=>({...N,body:C.target.value})),placeholder:"Write your announcement message...",rows:6,required:!0,style:{resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Severity"}),e.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:["INFO","WARNING","CRITICAL"].map(C=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",border:`2px solid ${s.severity===C?"var(--primary)":"var(--border)"}`,borderRadius:"var(--radius)",cursor:"pointer",background:s.severity===C?"var(--primary-light)":"transparent",flex:1},children:[e.jsx("input",{type:"radio",name:"severity",value:C,checked:s.severity===C,onChange:()=>o(N=>({...N,severity:C})),style:{display:"none"}}),C==="CRITICAL"?e.jsx(sn,{size:18,style:{color:"var(--danger)"}}):C==="WARNING"?e.jsx($r,{size:18,style:{color:"var(--warning)"}}):e.jsx(of,{size:18,style:{color:"var(--info)"}}),e.jsx("span",{style:{fontWeight:500},children:C.charAt(0)+C.slice(1).toLowerCase()})]},C))})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"1rem",fontSize:"1rem"},children:"Audience Targeting"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",style:{marginBottom:"0.5rem",display:"block"},children:"Target Roles"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem"},children:d?.map(C=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.targetRoleCodes.includes(C.code),onChange:N=>{N.target.checked?o(T=>({...T,targetRoleCodes:[...T.targetRoleCodes,C.code]})):o(T=>({...T,targetRoleCodes:T.targetRoleCodes.filter(O=>O!==C.code)}))}}),C.name]},C.id))}),!d?.length&&e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"No roles found in the system"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Specific Customers (optional)"}),e.jsx("select",{className:"form-select",multiple:!0,value:s.specificCustomerIds,onChange:C=>{const N=Array.from(C.target.selectedOptions,T=>T.value);o(T=>({...T,specificCustomerIds:N}))},style:{minHeight:"100px"},children:f?.map(C=>e.jsxs("option",{value:C.id,children:[C.nameEn||C.name," (",C.code,")"]},C.id))}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Select specific customers to target. Hold Ctrl/Cmd to select multiple."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Specific Users (optional)"}),e.jsx("select",{className:"form-select",multiple:!0,value:s.specificUserIds,onChange:C=>{const N=Array.from(C.target.selectedOptions,T=>T.value);o(T=>({...T,specificUserIds:N}))},style:{minHeight:"100px"},children:p?.map(C=>e.jsxs("option",{value:C.id,children:[C.firstName," ",C.lastName," (",C.email,")"]},C.id))}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Select specific users to always include. Hold Ctrl/Cmd to select multiple."})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"1rem",fontSize:"1rem"},children:"Scheduling"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Publish Mode"}),e.jsxs("select",{className:"form-select",value:s.publishMode,onChange:C=>o(N=>({...N,publishMode:C.target.value})),children:[e.jsx("option",{value:"IMMEDIATE",children:"Immediate"}),e.jsx("option",{value:"SCHEDULED",children:"Scheduled"})]})]}),s.publishMode==="SCHEDULED"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Date/Time *"}),e.jsx("input",{type:"datetime-local",className:"form-input",value:s.startAt,onChange:C=>o(N=>({...N,startAt:C.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Date/Time (optional)"}),e.jsx("input",{type:"datetime-local",className:"form-input",value:s.endAt,onChange:C=>o(N=>({...N,endAt:C.target.value}))}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Leave empty for no expiration"})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"1rem",fontSize:"1rem"},children:"Notification Channels"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1rem"},children:"In addition to in-app notifications, send via:"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.sendEmail,onChange:C=>o(N=>({...N,sendEmail:C.target.checked}))}),"Email"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.sendSms,onChange:C=>o(N=>({...N,sendSms:C.target.checked}))}),"SMS"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.sendWhatsapp,onChange:C=>o(N=>({...N,sendWhatsapp:C.target.checked}))}),"WhatsApp"]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",background:"var(--primary-light)"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"1rem",fontSize:"1rem"},children:"Preview"}),e.jsxs("div",{style:{padding:"0.75rem 1rem",borderRadius:"var(--radius)",background:s.severity==="CRITICAL"?"var(--danger)":s.severity==="WARNING"?"var(--warning)":"var(--info)",color:"white"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600},children:[s.severity==="CRITICAL"?e.jsx(sn,{size:16}):s.severity==="WARNING"?e.jsx($r,{size:16}):e.jsx(of,{size:16}),s.title||"Announcement Title"]}),e.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:[s.body.substring(0,80)||"Your message will appear here...",s.body.length>80&&"..."]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>r("/admin/announcements"),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-outline",disabled:x.isPending,children:[e.jsx(lc,{size:16}),x.isPending?"Saving...":"Save as Draft"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:C=>w(C,!0),disabled:x.isPending||v.isPending,children:[e.jsx(yo,{size:16}),v.isPending?"Publishing...":"Save & Publish"]})]})]})]})}function tAe(){const t=pr(),[r,n]=k.useState(null),{data:i,isLoading:a,refetch:s}=Ve({queryKey:["demo-status"],queryFn:async()=>{const{data:d}=await xe.get("/admin/demo/status");return d}}),o=ot({mutationFn:async({action:d,payload:f})=>{const{data:p}=await xe.post(`/admin/demo/actions/${d}`,f||{});return p},onSuccess:d=>{n({success:!0,message:d.message}),t.invalidateQueries({queryKey:["demo-status"]}),setTimeout(()=>n(null),5e3)},onError:d=>{n({success:!1,message:d.response?.data?.error||"Action failed"}),setTimeout(()=>n(null),5e3)}}),l=ot({mutationFn:async d=>{const{data:f}=await xe.post("/admin/demo/seed",{mode:d});return f},onSuccess:d=>{n({success:!0,message:d.message}),t.invalidateQueries({queryKey:["demo-status"]})},onError:d=>{n({success:!1,message:d.response?.data?.error||"Seed failed"})}}),u=d=>({DELIVERED:"#22c55e",PAID:"#22c55e",CLOSED_ARCHIVED:"#6b7280",IN_TRANSIT:"#3b82f6",ISSUED_POSTED:"#f59e0b",PARTIALLY_PAID:"#f59e0b",DISPATCHED:"#8b5cf6"})[d]||"#6b7280";return a?e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[e.jsx(cu,{size:24,className:"spin",style:{margin:"0 auto 1rem"}}),e.jsx("p",{children:"Loading demo status..."})]})}):e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Demo Actions Panel"}),e.jsx("p",{className:"page-subtitle",children:"Quick actions for live demonstrations"})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>s(),children:[e.jsx(cu,{size:16}),"Refresh Status"]})]}),r&&e.jsx("div",{className:`alert ${r.success?"alert-success":"alert-error"}`,style:{marginBottom:"1.5rem"},children:r.message}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Lp,{size:20,style:{color:"#f59e0b"}}),"Demo Mode"]}),e.jsx("div",{style:{padding:"1rem",background:i?.demoMode==="LIVE_DEMO"?"#fef3c7":"#d1fae5",borderRadius:"0.5rem",textAlign:"center",fontWeight:600,fontSize:"1.25rem"},children:i?.demoMode||"Unknown"}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-primary",style:{flex:1},onClick:()=>l.mutate("LIVE_DEMO"),disabled:l.isPending,children:"Seed Live Demo"}),e.jsx("button",{className:"btn btn-secondary",style:{flex:1},onClick:()=>l.mutate("FULLY_COMPLETED"),disabled:l.isPending,children:"Seed Completed"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Current Journey Status"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:["Order ",i?.mainJourney.order?.number||"-"]}),e.jsx("span",{className:"badge",style:{background:u(i?.mainJourney.order?.status||""),color:"white"},children:i?.mainJourney.order?.status||"N/A"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:["Shipment ",i?.mainJourney.shipment?.number||"-"]}),e.jsx("span",{className:"badge",style:{background:u(i?.mainJourney.shipment?.status||""),color:"white"},children:i?.mainJourney.shipment?.status||"N/A"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:["Invoice ",i?.mainJourney.invoice?.number||"-"]}),e.jsx("span",{className:"badge",style:{background:u(i?.mainJourney.invoice?.status||""),color:"white"},children:i?.mainJourney.invoice?.status||"N/A"})]}),i?.mainJourney.invoice&&e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.5rem"},children:["Paid: SAR ",i.mainJourney.invoice.paidAmount.toLocaleString()," / Remaining: SAR ",i.mainJourney.invoice.remainingAmount.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Quick Demo Actions"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("mark-arrived")?"#3b82f6":"#e5e7eb",color:i?.availableActions.includes("mark-arrived")?"white":"#9ca3af",cursor:i?.availableActions.includes("mark-arrived")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("mark-arrived")||o.isPending,onClick:()=>o.mutate({action:"mark-arrived"}),children:[e.jsx(Rr,{size:32}),e.jsx("span",{style:{fontWeight:600},children:"Mark Arrived"}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Shipment arrives at destination"})]}),e.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("mark-delivered")?"#22c55e":"#e5e7eb",color:i?.availableActions.includes("mark-delivered")?"white":"#9ca3af",cursor:i?.availableActions.includes("mark-delivered")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("mark-delivered")||o.isPending,onClick:()=>o.mutate({action:"mark-delivered"}),children:[e.jsx(dn,{size:32}),e.jsx("span",{style:{fontWeight:600},children:"Mark Delivered"}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Complete delivery with POD"})]}),e.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("create-payment-request")?"#f59e0b":"#e5e7eb",color:i?.availableActions.includes("create-payment-request")?"white":"#9ca3af",cursor:i?.availableActions.includes("create-payment-request")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("create-payment-request")||o.isPending,onClick:()=>o.mutate({action:"create-payment-request",payload:{isPartial:!0}}),children:[e.jsx(Ul,{size:32}),e.jsx("span",{style:{fontWeight:600},children:"Submit Payment"}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Create partial payment request"})]}),e.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("confirm-payment")?"#8b5cf6":"#e5e7eb",color:i?.availableActions.includes("confirm-payment")?"white":"#9ca3af",cursor:i?.availableActions.includes("confirm-payment")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("confirm-payment")||o.isPending,onClick:()=>o.mutate({action:"confirm-payment"}),children:[e.jsx(Ut,{size:32}),e.jsx("span",{style:{fontWeight:600},children:"Confirm Payment"}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Finance confirms & generates receipt"})]}),e.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("close-invoice")?"#6b7280":"#e5e7eb",color:i?.availableActions.includes("close-invoice")?"white":"#9ca3af",cursor:i?.availableActions.includes("close-invoice")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("close-invoice")||o.isPending,onClick:()=>o.mutate({action:"close-invoice"}),children:[e.jsx(zg,{size:32}),e.jsx("span",{style:{fontWeight:600},children:"Close Invoice"}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Archive paid invoice"})]})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(dn,{size:20,style:{color:"#3b82f6"}}),"Logistics Demo Data"]}),e.jsx("p",{style:{marginBottom:"1rem",color:"#6b7280",fontSize:"0.875rem"},children:"Create shipments ready for driver assignment to test the logistics workflow."}),e.jsxs("button",{className:"btn btn-primary",style:{padding:"1rem 2rem",display:"flex",alignItems:"center",gap:"0.75rem"},disabled:o.isPending,onClick:()=>o.mutate({action:"create-logistics-shipments"}),children:[e.jsx(Rr,{size:20}),e.jsx("span",{style:{fontWeight:600},children:"Create Shipments for Driver Assignment"})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#eff6ff",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("strong",{children:"This will create:"}),e.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.25rem",lineHeight:1.8},children:[e.jsx("li",{children:"3 shipments with PACKED status (ready for driver assignment)"}),e.jsx("li",{children:"Each with an associated order and realistic delivery address"}),e.jsx("li",{children:"One marked as URGENT priority"})]}),e.jsxs("div",{style:{marginTop:"0.75rem",color:"#1d4ed8"},children:["After creation, go to ",e.jsx("strong",{children:"Logistics  Shipments"})," to assign drivers."]})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Demo Credentials"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.75rem",color:"#374151"},children:"Internal Users"}),e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.75"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"admin@demo.com"})," - Admin"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"orderdesk@demo.com"})," - Order Desk"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"planner@demo.com"})," - Planner"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"qc@demo.com"})," - QC Analyst"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"qp@demo.com"})," - QP"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"logistics@demo.com"})," - Logistics"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"finance@demo.com"})," - Finance"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"driver1@demo.com"})," - Driver"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.75rem",color:"#374151"},children:"Customer Portal"}),e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.75"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"portal1@hospitaldemo.com"})," - Al Noor Hospital"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"portal2@hospitaldemo.com"})," - Al Noor Hospital (Billing)"]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#fef3c7",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("strong",{children:"Password for all:"})," demo123"]})]})]})]})]})}const rAe=[{value:"",label:"All Statuses"},{value:"NEW",label:"New"},{value:"OPEN",label:"Open"},{value:"IN_PROGRESS",label:"In Progress"},{value:"WAITING_FOR_USER",label:"Waiting for User"},{value:"WAITING_FOR_ADMIN",label:"Waiting for Admin"},{value:"RESOLVED",label:"Resolved"},{value:"CLOSED",label:"Closed"}],nAe=[{value:"",label:"All Priorities"},{value:"LOW",label:"Low"},{value:"MEDIUM",label:"Medium"},{value:"HIGH",label:"High"},{value:"CRITICAL",label:"Critical"}],iAe=[{value:"",label:"All Categories"},{value:"ACCOUNT",label:"Account"},{value:"ORDER",label:"Order"},{value:"DELIVERY",label:"Delivery"},{value:"INVOICE",label:"Invoice"},{value:"PAYMENT",label:"Payment"},{value:"QC",label:"QC"},{value:"SYSTEM",label:"System"},{value:"OTHER",label:"Other"}],yM={NEW:{color:"var(--info)",bg:"var(--info-bg)",label:"New"},OPEN:{color:"var(--primary)",bg:"var(--primary-bg)",label:"Open"},IN_PROGRESS:{color:"var(--warning)",bg:"var(--warning-bg)",label:"In Progress"},WAITING_FOR_USER:{color:"var(--danger)",bg:"var(--danger-bg)",label:"Waiting"},WAITING_FOR_ADMIN:{color:"var(--info)",bg:"var(--info-bg)",label:"Pending"},RESOLVED:{color:"var(--success)",bg:"var(--success-bg)",label:"Resolved"},CLOSED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"Closed"},CANCELLED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"Cancelled"}},xM={LOW:{color:"var(--text-muted)",bg:"var(--bg-secondary)"},MEDIUM:{color:"var(--warning)",bg:"var(--warning-bg)"},HIGH:{color:"var(--danger)",bg:"var(--danger-bg)"},CRITICAL:{color:"white",bg:"var(--danger)"}},vM={ACCOUNT:{color:"var(--primary)",bg:"rgba(59, 130, 246, 0.1)"},ORDER:{color:"var(--success)",bg:"rgba(34, 197, 94, 0.1)"},DELIVERY:{color:"var(--warning)",bg:"rgba(234, 179, 8, 0.1)"},INVOICE:{color:"var(--info)",bg:"rgba(6, 182, 212, 0.1)"},PAYMENT:{color:"#8b5cf6",bg:"rgba(139, 92, 246, 0.1)"},QC:{color:"#ec4899",bg:"rgba(236, 72, 153, 0.1)"},SYSTEM:{color:"var(--text-muted)",bg:"var(--bg-secondary)"},OTHER:{color:"var(--text-muted)",bg:"var(--bg-secondary)"}};function aAe(){const t=Qr(),[r,n]=k.useState(""),[i,a]=k.useState(""),[s,o]=k.useState(""),[l,u]=k.useState(""),[d,f]=k.useState(null),{data:p,isLoading:x}=Ve({queryKey:["admin-tickets",r,i,s,l],queryFn:async()=>{const D={limit:100};r&&(D.status=r),i&&(D.priority=i),s&&(D.category=s),l&&(D.search=l);const{data:M}=await xe.get("/helpdesk/admin/tickets",{params:D});return M}}),v=p?.tickets||[],w=p?.stats||{new:0,open:0,slaBreached:0,unassigned:0},C=v,N=D=>vM[D]||vM.OTHER,T=D=>yM[D]||yM.NEW,O=D=>xM[D]||xM.MEDIUM;return x?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Support Tickets"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage customer support requests and inquiries"})]}),e.jsxs(nr,{to:"/admin/helpdesk/tasks",className:"btn",children:[e.jsx(Fg,{size:16})," View Tasks"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"New Tickets",value:w.new,icon:e.jsx(Sm,{size:20}),color:"info",onClick:()=>{n("NEW")},selected:r==="NEW"}),e.jsx(st,{title:"Open Tickets",value:w.open,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>{n(""),a("")},selected:!r&&!i}),e.jsx(st,{title:"SLA Breached",value:w.slaBreached,icon:e.jsx($r,{size:20}),color:"danger"}),e.jsx(st,{title:"Unassigned",value:w.unassigned,icon:e.jsx(Uo,{size:20}),color:"primary"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"0.75rem 1rem",background:"var(--bg-primary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsx(fl,{size:16,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Filters:"}),e.jsxs("div",{style:{position:"relative",flex:"1",maxWidth:"280px"},children:[e.jsx(Gs,{size:14,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by subject, ticket number...",value:l,onChange:D=>u(D.target.value),className:"form-input",style:{paddingLeft:"2rem",fontSize:"0.875rem",height:"36px"}})]}),e.jsx("select",{className:"form-input",value:r,onChange:D=>n(D.target.value),style:{width:"auto",fontSize:"0.875rem",height:"36px"},children:rAe.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),e.jsx("select",{className:"form-input",value:i,onChange:D=>a(D.target.value),style:{width:"auto",fontSize:"0.875rem",height:"36px"},children:nAe.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),e.jsx("select",{className:"form-input",value:s,onChange:D=>o(D.target.value),style:{width:"auto",fontSize:"0.875rem",height:"36px"},children:iAe.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:d?"1fr 340px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{children:C.length===0?e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{icon:"file",title:"No tickets found",message:"Try adjusting your filters or wait for new support requests"})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:C.map(D=>{const M=N(D.category),Y=T(D.status),q=O(D.priority),W=D.slaResponseDueAt&&new Date(D.slaResponseDueAt)<new Date&&!D.slaResponseMet||D.slaResolveDueAt&&new Date(D.slaResolveDueAt)<new Date&&!D.slaResolveMet&&!["RESOLVED","CLOSED","CANCELLED"].includes(D.status);return e.jsxs("div",{className:"card",onClick:()=>f(D),style:{padding:"1rem",cursor:"pointer",border:d?.id===D.id?"2px solid var(--primary)":"1px solid var(--border)",transition:"all 0.15s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:M.bg,color:M.color,fontWeight:600},children:D.category}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:J=>{J.stopPropagation(),t(`/admin/helpdesk/tickets/${D.id}`)},style:{padding:"0.25rem 0.5rem"},children:e.jsx(Ha,{size:14})})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"0.9375rem"},children:D.subject}),e.jsxs("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:[e.jsx("span",{style:{fontFamily:"monospace"},children:D.ticketNo}),"  ",D.requesterUser?.firstName," ",D.requesterUser?.lastName]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8125rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(t2,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["Messages: ",D._count?.messages||0]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Fg,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["Tasks: ",D._count?.tasks||0]})]})]}),e.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{className:"badge",style:{background:Y.bg,color:Y.color,fontSize:"0.6875rem"},children:Y.label}),e.jsx("span",{className:"badge",style:{background:q.bg,color:q.color,fontSize:"0.6875rem"},children:D.priority}),W&&e.jsx("span",{title:"SLA Breached",children:e.jsx($r,{size:14,style:{color:"var(--danger)"}})})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Ze(new Date(D.lastActivityAt),"MMM d")})]})]},D.id)})})}),d&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",background:N(d.category).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:N(d.category).color,color:"white",marginBottom:"0.5rem"},children:d.category}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:"0.5rem 0 0.25rem"},children:d.subject}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",margin:0},children:d.ticketNo})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>f(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:""})]})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Requester"}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[e.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:600},children:[d.requesterUser?.firstName?.[0],d.requesterUser?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:"0.875rem"},children:[d.requesterUser?.firstName," ",d.requesterUser?.lastName]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:d.requesterUser?.email})]})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Ticket Info"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Status"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem",color:T(d.status).color},children:T(d.status).label})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Priority"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem"},children:d.priority})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Team"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem"},children:d.assignedTeam||"Unassigned"})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Assignee"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem"},children:d.assignedToUser?d.assignedToUser.firstName:"Unassigned"})]})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Activity"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.8125rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Created"}),e.jsx("span",{children:Ze(new Date(d.createdAt),"MMM d, yyyy")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Last Activity"}),e.jsx("span",{children:Ze(new Date(d.lastActivityAt),"MMM d, h:mm a")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Messages"}),e.jsx("span",{children:d._count?.messages||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Tasks"}),e.jsx("span",{children:d._count?.tasks||0})]})]})]}),e.jsx(nr,{to:`/admin/helpdesk/tickets/${d.id}`,className:"btn btn-primary",style:{width:"100%",justifyContent:"center"},children:"Open Ticket"})]})]})]})]})}const sAe=[{value:"",label:"All Statuses"},{value:"TODO",label:"To Do"},{value:"IN_PROGRESS",label:"In Progress"},{value:"DONE",label:"Done"},{value:"BLOCKED",label:"Blocked"}],oAe=[{value:"",label:"All Priorities"},{value:"LOW",label:"Low"},{value:"MEDIUM",label:"Medium"},{value:"HIGH",label:"High"},{value:"CRITICAL",label:"Critical"}],bM={TODO:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"To Do"},IN_PROGRESS:{color:"var(--warning)",bg:"var(--warning-bg)",label:"In Progress"},DONE:{color:"var(--success)",bg:"var(--success-bg)",label:"Done"},BLOCKED:{color:"var(--danger)",bg:"var(--danger-bg)",label:"Blocked"}},jM={LOW:{color:"var(--text-muted)",bg:"var(--bg-secondary)"},MEDIUM:{color:"var(--warning)",bg:"var(--warning-bg)"},HIGH:{color:"var(--danger)",bg:"var(--danger-bg)"},CRITICAL:{color:"white",bg:"var(--danger)"}};function lAe(){const t=Qr(),r=pr(),[n,i]=k.useState(""),[a,s]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(null),{data:x,isLoading:v}=Ve({queryKey:["admin-tasks",n,o],queryFn:async()=>{const q={limit:100};n&&(q.status=n),o&&(q.assignedTo=o);const{data:W}=await xe.get("/helpdesk/admin/tasks",{params:q});return W}}),{data:w}=Ve({queryKey:["support-users"],queryFn:async()=>{const{data:q}=await xe.get("/helpdesk/admin/support-users");return q}}),C=ot({mutationFn:async({taskId:q,updates:W})=>{const{data:J}=await xe.patch(`/helpdesk/admin/tasks/${q}`,W);return J},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-tasks"]}),f&&p(q=>({...q,...C.variables?.updates}))}}),N=x?.tasks||[],T=N.filter(q=>{if(a&&q.priority!==a)return!1;if(u){const W=u.toLowerCase();return q.title.toLowerCase().includes(W)||q.ticket?.ticketNo?.toLowerCase().includes(W)||q.ticket?.subject?.toLowerCase().includes(W)}return!0}),O={total:N.length,todo:N.filter(q=>q.status==="TODO").length,inProgress:N.filter(q=>q.status==="IN_PROGRESS").length,done:N.filter(q=>q.status==="DONE").length},D=q=>bM[q]||bM.TODO,M=q=>jM[q]||jM.MEDIUM,Y=q=>q.dueAt?new Date(q.dueAt)<new Date&&q.status!=="DONE":!1;return v?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(nr,{to:"/admin/helpdesk",className:"btn btn-secondary btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Helpdesk Tasks"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage all tasks across support tickets"})]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Tasks",value:O.total,icon:e.jsx(Fg,{size:20}),color:"primary",onClick:()=>i(""),selected:!n}),e.jsx(st,{title:"To Do",value:O.todo,icon:e.jsx(Qt,{size:20}),color:"info",onClick:()=>i("TODO"),selected:n==="TODO"}),e.jsx(st,{title:"In Progress",value:O.inProgress,icon:e.jsx(sn,{size:20}),color:"warning",onClick:()=>i("IN_PROGRESS"),selected:n==="IN_PROGRESS"}),e.jsx(st,{title:"Completed",value:O.done,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>i("DONE"),selected:n==="DONE"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"0.75rem 1rem",background:"var(--bg-primary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[e.jsx(fl,{size:16,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Filters:"}),e.jsxs("div",{style:{position:"relative",flex:"1",maxWidth:"280px"},children:[e.jsx(Gs,{size:14,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by title, ticket...",value:u,onChange:q=>d(q.target.value),className:"form-input",style:{paddingLeft:"2rem",fontSize:"0.875rem",height:"36px"}})]}),e.jsx("select",{className:"form-input",value:n,onChange:q=>i(q.target.value),style:{width:"auto",fontSize:"0.875rem",height:"36px"},children:sAe.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsx("select",{className:"form-input",value:a,onChange:q=>s(q.target.value),style:{width:"auto",fontSize:"0.875rem",height:"36px"},children:oAe.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsxs("select",{className:"form-input",value:o,onChange:q=>l(q.target.value),style:{width:"auto",fontSize:"0.875rem",height:"36px"},children:[e.jsx("option",{value:"",children:"All Assignees"}),w?.map(q=>e.jsxs("option",{value:q.id,children:[q.firstName," ",q.lastName]},q.id))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:f?"1fr 340px":"1fr",gap:"1.5rem"},children:[e.jsx("div",{children:T.length===0?e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{icon:"file",title:"No tasks found",message:"Try adjusting your filters or create tasks from tickets"})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:T.map(q=>{const W=D(q.status),J=M(q.priority),z=Y(q);return e.jsxs("div",{className:"card",onClick:()=>p(q),style:{padding:"1rem",cursor:"pointer",border:f?.id===q.id?"2px solid var(--primary)":"1px solid var(--border)",background:q.status==="DONE"?"var(--success-bg)":z?"rgba(220, 38, 38, 0.03)":"var(--bg-primary)",transition:"all 0.15s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:W.bg,color:W.color,fontWeight:600},children:W.label}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:G=>{G.stopPropagation(),t(`/admin/helpdesk/tickets/${q.ticket?.id}`)},style:{padding:"0.25rem 0.5rem"},children:e.jsx(Ha,{size:14})})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"0.9375rem",textDecoration:q.status==="DONE"?"line-through":"none",opacity:q.status==="DONE"?.7:1},children:q.title}),e.jsxs("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:[e.jsx("span",{style:{fontFamily:"monospace"},children:q.ticket?.ticketNo}),"  ",q.ticket?.subject?.substring(0,30),q.ticket?.subject?.length>30?"...":""]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8125rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Uo,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:q.assignedToUser?.firstName||"Unassigned"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",color:z?"var(--danger)":"inherit"},children:[e.jsx($n,{size:14,style:{color:z?"var(--danger)":"var(--text-muted)"}}),e.jsx("span",{children:q.dueAt?Ze(new Date(q.dueAt),"MMM d"):"No due date"})]})]}),e.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{className:"badge",style:{background:J.bg,color:J.color,fontSize:"0.6875rem"},children:q.priority}),z&&e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--danger)",fontWeight:500},children:"Overdue"})]})]},q.id)})})}),f&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",background:D(f.status).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:D(f.status).color,color:"white",marginBottom:"0.5rem"},children:D(f.status).label}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:"0.5rem 0 0.25rem"},children:f.title})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>p(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Related Ticket"}),e.jsxs(nr,{to:`/admin/helpdesk/tickets/${f.ticket?.id}`,style:{display:"block",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textDecoration:"none",color:"inherit"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.875rem",marginBottom:"0.25rem"},children:f.ticket?.ticketNo}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:f.ticket?.subject})]})]}),f.description&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Description"}),e.jsx("p",{style:{fontSize:"0.875rem",margin:0,lineHeight:1.5},children:f.description})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Task Info"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Priority"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem"},children:f.priority})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Assignee"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem"},children:f.assignedToUser?.firstName||"Unassigned"})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Due Date"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem",color:Y(f)?"var(--danger)":"inherit"},children:f.dueAt?Ze(new Date(f.dueAt),"MMM d, yyyy"):"Not set"})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.125rem"},children:"Created"}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.8125rem"},children:Ze(new Date(f.createdAt),"MMM d")})]})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Update Status"}),e.jsxs("select",{className:"form-input",value:f.status,onChange:q=>C.mutate({taskId:f.id,updates:{status:q.target.value}}),style:{width:"100%",fontSize:"0.875rem"},children:[e.jsx("option",{value:"TODO",children:"To Do"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"DONE",children:"Done"}),e.jsx("option",{value:"BLOCKED",children:"Blocked"})]})]}),e.jsx(nr,{to:`/admin/helpdesk/tickets/${f.ticket?.id}`,className:"btn btn-primary",style:{width:"100%",justifyContent:"center"},children:"View Ticket"})]})]})]})]})}const wM={NEW:{color:"var(--info)",bg:"var(--info-bg)",label:"New"},OPEN:{color:"var(--primary)",bg:"var(--primary-bg)",label:"Open"},IN_PROGRESS:{color:"var(--warning)",bg:"var(--warning-bg)",label:"In Progress"},WAITING_FOR_USER:{color:"var(--danger)",bg:"var(--danger-bg)",label:"Waiting for User"},WAITING_FOR_ADMIN:{color:"var(--info)",bg:"var(--info-bg)",label:"Waiting for Admin"},RESOLVED:{color:"var(--success)",bg:"var(--success-bg)",label:"Resolved"},CLOSED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"Closed"},CANCELLED:{color:"var(--text-muted)",bg:"var(--bg-secondary)",label:"Cancelled"}},SM={LOW:{color:"var(--text-muted)",bg:"var(--bg-secondary)"},MEDIUM:{color:"var(--warning)",bg:"var(--warning-bg)"},HIGH:{color:"var(--danger)",bg:"var(--danger-bg)"},CRITICAL:{color:"white",bg:"var(--danger)"}},cAe=["NEW","OPEN","IN_PROGRESS","WAITING_FOR_USER","WAITING_FOR_ADMIN","RESOLVED","CLOSED","CANCELLED"],CM=["LOW","MEDIUM","HIGH","CRITICAL"],dAe=["SUPPORT","FINANCE","LOGISTICS","QC","IT"];function uAe(){const{id:t}=hl(),{user:r}=Il(),n=pr(),[i,a]=k.useState("conversation"),[s,o]=k.useState(""),[l,u]=k.useState(!1),[d,f]=k.useState(!1),[p,x]=k.useState({title:"",description:"",priority:"MEDIUM",assignedToUserId:"",dueAt:""}),{data:v,isLoading:w,error:C}=Ve({queryKey:["admin-ticket",t],queryFn:async()=>{const{data:G}=await xe.get(`/helpdesk/admin/tickets/${t}`);return G},enabled:!!t}),{data:N}=Ve({queryKey:["support-users"],queryFn:async()=>{const{data:G}=await xe.get("/helpdesk/admin/support-users");return G}}),T=ot({mutationFn:async G=>{const{data:ne}=await xe.patch(`/helpdesk/admin/tickets/${t}`,G);return ne},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-ticket",t]}),n.invalidateQueries({queryKey:["admin-tickets"]})}}),O=ot({mutationFn:async({body:G,isInternal:ne})=>{const Z=ne?`/helpdesk/admin/tickets/${t}/internal-note`:`/helpdesk/admin/tickets/${t}/reply`,{data:ie}=await xe.post(Z,{body:G});return ie},onSuccess:()=>{o(""),n.invalidateQueries({queryKey:["admin-ticket",t]})}}),D=ot({mutationFn:async G=>{const{data:ne}=await xe.post(`/helpdesk/admin/tickets/${t}/tasks`,G);return ne},onSuccess:()=>{f(!1),x({title:"",description:"",priority:"MEDIUM",assignedToUserId:"",dueAt:""}),n.invalidateQueries({queryKey:["admin-ticket",t]})}}),M=ot({mutationFn:async({taskId:G,updates:ne})=>{const{data:Z}=await xe.patch(`/helpdesk/admin/tasks/${G}`,ne);return Z},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-ticket",t]})}}),Y=G=>{G.preventDefault(),s.trim()&&O.mutate({body:s,isInternal:l})},q=G=>{G.preventDefault(),p.title.trim()&&D.mutate(p)};if(w)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(C||!v)return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsxs(nr,{to:"/admin/helpdesk",className:"btn btn-secondary btn-sm",style:{marginBottom:"1rem"},children:[e.jsx(aa,{size:16})," Back to Tickets"]}),e.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[e.jsx(sn,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),e.jsx("h2",{children:"Ticket not found"})]})]});const W=wM[v.status]||wM.NEW,J=SM[v.priority]||SM.MEDIUM,z=!["CLOSED","CANCELLED"].includes(v.status);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(nr,{to:"/admin/helpdesk",className:"btn btn-secondary btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:v.ticketNo}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:v.subject})]}),e.jsx("span",{className:"badge",style:{background:W.bg,color:W.color,fontWeight:500,padding:"0.5rem 1rem"},children:W.label}),e.jsx("span",{className:"badge",style:{background:J.bg,color:J.color,fontWeight:500,padding:"0.5rem 1rem"},children:v.priority})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:"1.5rem"},children:[e.jsx("div",{children:e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)"},children:[{key:"conversation",label:"Conversation",icon:t2,count:v.messages?.length||0},{key:"tasks",label:"Tasks",icon:Fg,count:v.tasks?.length||0}].map(G=>e.jsxs("button",{onClick:()=>a(G.key),style:{padding:"1rem 1.5rem",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",borderBottom:i===G.key?"2px solid var(--primary)":"2px solid transparent",color:i===G.key?"var(--primary)":"var(--text-secondary)",fontWeight:i===G.key?600:400},children:[e.jsx(G.icon,{size:16}),G.label,G.count>0&&e.jsx("span",{className:"badge badge-primary",style:{fontSize:"0.7rem"},children:G.count})]},G.key))}),e.jsxs("div",{style:{padding:"1.5rem"},children:[i==="conversation"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:600},children:[v.requesterUser?.firstName?.[0],v.requesterUser?.lastName?.[0]]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:600},children:[v.requesterUser?.firstName," ",v.requesterUser?.lastName]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:Ze(new Date(v.createdAt),"MMM d, yyyy h:mm a")})]})]}),e.jsx("div",{style:{marginLeft:"52px",whiteSpace:"pre-wrap",lineHeight:1.6},children:v.description})]}),v.messages?.map(G=>{const ne=G.visibility==="INTERNAL";return e.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--border)",background:ne?"var(--warning-bg)":"transparent",padding:ne?"1rem":"0 0 1.5rem 0",borderRadius:ne?"8px":0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:ne?"var(--warning)":"var(--success)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:600},children:[G.createdByUser?.firstName?.[0],G.createdByUser?.lastName?.[0]]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:600},children:[G.createdByUser?.firstName," ",G.createdByUser?.lastName]}),ne&&e.jsx("span",{className:"badge",style:{background:"var(--warning)",color:"white",fontSize:"0.65rem"},children:"Internal"})]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:Ze(new Date(G.createdAt),"MMM d, yyyy h:mm a")})]})]}),e.jsx("div",{style:{marginLeft:"52px",whiteSpace:"pre-wrap",lineHeight:1.6},children:G.body})]},G.id)}),z&&e.jsxs("form",{onSubmit:Y,style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"0.75rem",display:"flex",gap:"1.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("input",{type:"radio",checked:!l,onChange:()=>u(!1)}),e.jsx(os,{size:14})," Public Reply"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("input",{type:"radio",checked:l,onChange:()=>u(!0)}),e.jsx(Ag,{size:14})," Internal Note"]})]}),e.jsx("textarea",{className:"form-input",rows:4,placeholder:l?"Add an internal note...":"Type your reply...",value:s,onChange:G=>o(G.target.value),style:{resize:"vertical",background:l?"var(--warning-bg)":void 0}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"0.75rem"},children:e.jsxs("button",{type:"submit",className:`btn ${l?"btn-warning":"btn-primary"}`,disabled:!s.trim()||O.isPending,children:[e.jsx(Gi,{size:16}),O.isPending?"Sending...":l?"Add Note":"Send Reply"]})})]})]}),i==="tasks"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem"},children:"Tasks"}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>f(!0),children:[e.jsx(cn,{size:14})," Add Task"]})]}),d&&e.jsx("form",{onSubmit:q,style:{padding:"1rem",marginBottom:"1rem",background:"var(--bg-secondary)",borderRadius:"8px"},children:e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsx("input",{type:"text",className:"form-input",placeholder:"Task title",value:p.title,onChange:G=>x({...p,title:G.target.value})}),e.jsx("textarea",{className:"form-input",placeholder:"Description",rows:2,value:p.description,onChange:G=>x({...p,description:G.target.value})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsx("select",{className:"form-input",value:p.priority,onChange:G=>x({...p,priority:G.target.value}),children:CM.map(G=>e.jsx("option",{value:G,children:G},G))}),e.jsxs("select",{className:"form-input",value:p.assignedToUserId,onChange:G=>x({...p,assignedToUserId:G.target.value}),children:[e.jsx("option",{value:"",children:"Unassigned"}),N?.map(G=>e.jsxs("option",{value:G.id,children:[G.firstName," ",G.lastName]},G.id))]}),e.jsx("input",{type:"date",className:"form-input",value:p.dueAt,onChange:G=>x({...p,dueAt:G.target.value})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>f(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:D.isPending,children:"Create"})]})]})}),v.tasks?.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:[e.jsx(Fg,{size:32,style:{opacity:.5,marginBottom:"0.5rem"}}),e.jsx("p",{children:"No tasks yet"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:v.tasks?.map(G=>e.jsx("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"8px",background:G.status==="DONE"?"var(--success-bg)":"var(--bg-primary)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,textDecoration:G.status==="DONE"?"line-through":"none"},children:G.title}),G.description&&e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:G.description}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[G.assignedToUser&&e.jsxs("span",{children:[e.jsx(Uo,{size:12})," ",G.assignedToUser.firstName]}),G.dueAt&&e.jsxs("span",{children:[e.jsx(Qt,{size:12})," ",Ze(new Date(G.dueAt),"MMM d")]})]})]}),e.jsxs("select",{className:"form-input",value:G.status,onChange:ne=>M.mutate({taskId:G.id,updates:{status:ne.target.value}}),style:{width:"auto",fontSize:"0.75rem",padding:"0.25rem"},children:[e.jsx("option",{value:"TODO",children:"To Do"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"DONE",children:"Done"}),e.jsx("option",{value:"BLOCKED",children:"Blocked"})]})]})},G.id))})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:0,marginBottom:"1rem"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",background:W.bg},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Sm,{size:18,style:{color:W.color}}),e.jsx("span",{style:{fontWeight:600},children:v.ticketNo})]})}),e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Requester"}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:600,fontSize:"1rem"},children:[v.requesterUser?.firstName?.[0],v.requesterUser?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"0.125rem"},children:[v.requesterUser?.firstName," ",v.requesterUser?.lastName]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:v.requesterUser?.email}),v.customer&&e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:[e.jsx(Ts,{size:12,style:{marginRight:"0.25rem"}}),v.customer.name]})]})]}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Ticket Properties"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[e.jsx(nz,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Category"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.875rem"},children:v.category})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[e.jsx(ZY,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Priority"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.875rem"},children:v.priority})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[e.jsx(cc,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Team"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.875rem"},children:v.assignedTeam||"Unassigned"})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[e.jsx(UC,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Assignee"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"0.875rem"},children:v.assignedToUser?v.assignedToUser.firstName:"Unassigned"})]})]}),e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Dates"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.8rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Created"}),e.jsx("span",{children:Ze(new Date(v.createdAt),"MMM d, yyyy")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Last Activity"}),e.jsx("span",{children:Ze(new Date(v.lastActivityAt),"MMM d, h:mm a")})]})]}),(v.slaResponseDueAt||v.slaResolveDueAt)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"SLA"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.8rem",marginBottom:"1rem"},children:[v.slaResponseDueAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Response"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:v.slaResponseMet===!1?"var(--danger)":v.slaResponseMet?"var(--success)":"inherit"},children:[Ze(new Date(v.slaResponseDueAt),"MMM d"),v.slaResponseMet===!0&&e.jsx(Ut,{size:12}),v.slaResponseMet===!1&&e.jsx(sn,{size:12})]})]}),v.slaResolveDueAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Resolve"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:v.slaResolveMet===!1?"var(--danger)":v.slaResolveMet?"var(--success)":"inherit"},children:[Ze(new Date(v.slaResolveDueAt),"MMM d"),v.slaResolveMet===!0&&e.jsx(Ut,{size:12}),v.slaResolveMet===!1&&e.jsx(sn,{size:12})]})]})]})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Update Ticket"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"block",marginBottom:"0.25rem"},children:"Status"}),e.jsx("select",{className:"form-input",value:v.status,onChange:G=>T.mutate({status:G.target.value}),disabled:T.isPending,style:{fontSize:"0.875rem"},children:cAe.map(G=>e.jsx("option",{value:G,children:G.replace(/_/g," ")},G))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"block",marginBottom:"0.25rem"},children:"Priority"}),e.jsx("select",{className:"form-input",value:v.priority,onChange:G=>T.mutate({priority:G.target.value}),disabled:T.isPending,style:{fontSize:"0.875rem"},children:CM.map(G=>e.jsx("option",{value:G,children:G},G))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"block",marginBottom:"0.25rem"},children:"Assigned To"}),e.jsxs("select",{className:"form-input",value:v.assignedToUserId||"",onChange:G=>T.mutate({assignedToUserId:G.target.value||null}),disabled:T.isPending,style:{fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"Unassigned"}),N?.map(G=>e.jsxs("option",{value:G.id,children:[G.firstName," ",G.lastName]},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"block",marginBottom:"0.25rem"},children:"Team"}),e.jsxs("select",{className:"form-input",value:v.assignedTeam||"",onChange:G=>T.mutate({assignedTeam:G.target.value||null}),disabled:T.isPending,style:{fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"No Team"}),dAe.map(G=>e.jsx("option",{value:G,children:G},G))]})]})]})]})]})]})]})}function hAe(){const[t,r]=k.useState(!1),[n,i]=k.useState(null),[a,s]=k.useState(""),[o,l]=k.useState(""),u=pr(),d=gn(),{data:f,isLoading:p}=Ve({queryKey:["drivers",a,o],queryFn:async()=>{const T={};a&&(T.search=a),o&&(T.status=o);const{data:O}=await xe.get("/drivers",{params:T});return O}}),x=ot({mutationFn:async T=>xe.post("/drivers",T),onSuccess:()=>{u.invalidateQueries({queryKey:["drivers"]}),r(!1),i(null),d.success("Driver Created","New driver has been added successfully")},onError:T=>{const O=an(T);d.error("Creation Failed",O?.userMessage||"Failed to create driver")}}),v=ot({mutationFn:async({id:T,data:O})=>xe.put(`/drivers/${T}`,O),onSuccess:()=>{u.invalidateQueries({queryKey:["drivers"]}),r(!1),i(null),d.success("Driver Updated","Driver information has been updated")},onError:T=>{const O=an(T);d.error("Update Failed",O?.userMessage||"Failed to update driver")}}),w=ot({mutationFn:async T=>xe.delete(`/drivers/${T}`),onSuccess:()=>{u.invalidateQueries({queryKey:["drivers"]}),d.success("Driver Removed","Driver has been removed or deactivated")},onError:T=>{const O=an(T);d.error("Delete Failed",O?.userMessage||"Failed to remove driver")}}),C=T=>{T.preventDefault();const O=new FormData(T.currentTarget),D={fullName:O.get("fullName"),mobile:O.get("mobile"),email:O.get("email")||null,nationalId:O.get("nationalId")||null,driverLicenseNo:O.get("driverLicenseNo")||null,licenseExpiryDate:O.get("licenseExpiryDate")||null,vehicleType:O.get("vehicleType"),vehiclePlateNo:O.get("vehiclePlateNo")||null,vehicleModel:O.get("vehicleModel")||null,status:O.get("status")||"ACTIVE",createUserAccount:O.get("createUserAccount")==="on",userPassword:O.get("userPassword")||null};n?v.mutate({id:n.id,data:D}):x.mutate(D)},N={total:f?.length||0,active:f?.filter(T=>T.status==="ACTIVE").length||0,inactive:f?.filter(T=>T.status==="INACTIVE").length||0,onRoute:f?.filter(T=>T.inTransit>0).length||0};return p?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Driver Management"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage delivery drivers, vehicles, and availability"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{i(null),r(!0)},children:[e.jsx(cn,{size:16}),"Add Driver"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Drivers",value:N.total,icon:e.jsx(Uo,{size:20}),color:"primary",onClick:()=>l(""),selected:!o}),e.jsx(st,{title:"Active",value:N.active,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>l("ACTIVE"),selected:o==="ACTIVE"}),e.jsx(st,{title:"Inactive",value:N.inactive,icon:e.jsx(ci,{size:20}),color:"default",onClick:()=>l("INACTIVE"),selected:o==="INACTIVE"}),e.jsx(st,{title:"On Route",value:N.onRoute,icon:e.jsx(dn,{size:20}),color:"info"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name, mobile, email, or plate number...",className:"form-input",style:{paddingLeft:"2.25rem"},value:a,onChange:T=>s(T.target.value)})]}),e.jsxs("select",{className:"form-select",style:{width:"150px"},value:o,onChange:T=>l(T.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Drivers (",f?.length||0,")"]})}),f?.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Driver"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Vehicle"}),e.jsx("th",{children:"Workload"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"100px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:f.map(T=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:600},children:T.fullName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:T.fullName}),T.driverLicenseNo&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["License: ",T.driverLicenseNo]})]})]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx(vo,{size:12}),T.mobile]}),T.email&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx(uc,{size:12}),T.email]})]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ZL,{size:14}),T.vehicleType]}),T.vehiclePlateNo&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[T.vehiclePlateNo," ",T.vehicleModel&&` ${T.vehicleModel}`]})]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[T.inTransit>0?e.jsxs("span",{className:"badge badge-info",children:[T.inTransit," in transit"]}):e.jsx("span",{className:"badge badge-default",children:"Available"}),T.assignedToday>0&&e.jsxs("span",{className:"badge badge-warning",children:[T.assignedToday," today"]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${T.status==="ACTIVE"?"badge-success":"badge-default"}`,children:T.status})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>{i(T),r(!0)},title:"Edit",children:e.jsx(e0,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-outline",style:{color:"var(--danger)"},onClick:()=>{confirm(`Are you sure you want to ${T._count?.shipments>0?"deactivate":"delete"} this driver?`)&&w.mutate(T.id)},title:"Remove",children:e.jsx(ra,{size:14})})]})})]},T.id))})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No drivers found",message:"Add your first driver to start assigning shipments",icon:"user"})})]}),t&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:n?"Edit Driver":"Add Driver"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{r(!1),i(null)},children:""})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",style:{flex:2},children:[e.jsx("label",{className:"form-label",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",className:"form-input",required:!0,defaultValue:n?.fullName||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",className:"form-select",defaultValue:n?.status||"ACTIVE",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mobile *"}),e.jsx("input",{type:"tel",name:"mobile",className:"form-input",required:!0,placeholder:"+966 5xx xxx xxxx",defaultValue:n?.mobile||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"form-input",defaultValue:n?.email||""})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"National ID / Iqama"}),e.jsx("input",{type:"text",name:"nationalId",className:"form-input",defaultValue:n?.nationalId||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Driver License No"}),e.jsx("input",{type:"text",name:"driverLicenseNo",className:"form-input",defaultValue:n?.driverLicenseNo||""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"License Expiry Date"}),e.jsx("input",{type:"date",name:"licenseExpiryDate",className:"form-input",defaultValue:n?.licenseExpiryDate?Ze(new Date(n.licenseExpiryDate),"yyyy-MM-dd"):""})]}),e.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"1rem 0",paddingTop:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem"},children:"Vehicle Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Vehicle Type"}),e.jsxs("select",{name:"vehicleType",className:"form-select",defaultValue:n?.vehicleType||"CAR",children:[e.jsx("option",{value:"CAR",children:"Car"}),e.jsx("option",{value:"VAN",children:"Van"}),e.jsx("option",{value:"MOTORCYCLE",children:"Motorcycle"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Plate Number"}),e.jsx("input",{type:"text",name:"vehiclePlateNo",className:"form-input",placeholder:"ABC 1234",defaultValue:n?.vehiclePlateNo||""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Vehicle Model"}),e.jsx("input",{type:"text",name:"vehicleModel",className:"form-input",placeholder:"e.g., Toyota Hilux 2023",defaultValue:n?.vehicleModel||""})]})]}),!n&&e.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"1rem 0",paddingTop:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem"},children:"Portal Access"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"createUserAccount"}),e.jsx("span",{children:"Create user account for driver portal access"})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"0.75rem"},children:[e.jsx("label",{className:"form-label",children:"Initial Password"}),e.jsx("input",{type:"password",name:"userPassword",className:"form-input",placeholder:"Leave empty for default: driver123"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{r(!1),i(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:x.isPending||v.isPending,children:x.isPending||v.isPending?"Saving...":n?"Update Driver":"Add Driver"})]})]})]})})]})}const fA=[{status:"PACKED",label:"Packed",icon:Rr},{status:"ASSIGNED_TO_DRIVER",label:"Assigned",icon:Np},{status:"ACCEPTED_BY_DRIVER",label:"Accepted",icon:Ut},{status:"PICKED_UP",label:"Picked Up",icon:dn},{status:"IN_TRANSIT",label:"In Transit",icon:Gi},{status:"ARRIVED",label:"Arrived",icon:Ea},{status:"DELIVERED",label:"Delivered",icon:Ut}],fAe=fA.map(t=>t.status);function mAe(){const{id:t}=hl(),[r,n]=k.useState(!1),i=pr(),a=gn(),{data:s,isLoading:o}=Ve({queryKey:["shipment",t],queryFn:async()=>{const{data:v}=await xe.get(`/shipments/${t}`);return v},enabled:!!t}),{data:l}=Ve({queryKey:["drivers"],queryFn:async()=>{const{data:v}=await xe.get("/drivers");return v}}),u=ot({mutationFn:async v=>xe.post(`/shipments/${t}/assign-driver`,v),onSuccess:()=>{i.invalidateQueries({queryKey:["shipment",t]}),n(!1),a.success("Driver Assigned","Driver has been assigned to the shipment")},onError:v=>{const w=an(v);a.error("Assignment Failed",w?.userMessage||"Failed to assign driver")}}),d=v=>{v.preventDefault();const w=new FormData(v.currentTarget);u.mutate({driverId:w.get("driverId"),scheduledPickupAt:w.get("scheduledPickupAt"),scheduledDeliveryAt:w.get("scheduledDeliveryAt"),driverNotes:w.get("driverNotes")})},f=()=>!s||["DELIVERY_FAILED","RETURNED","CANCELLED","DELAYED"].includes(s.status)?-1:fAe.indexOf(s.status),p=v=>({PACKED:Rr,ASSIGNED_TO_DRIVER:Np,ACCEPTED:Ut,PICKED_UP:dn,IN_TRANSIT:Gi,ARRIVED:Ea,DELIVERED:Ut,DELIVERY_FAILED:$r,CHECKPOINT:Ea,SCHEDULED:$n,STATUS_CHANGE:Qt})[v]||Qt;if(o)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!s)return e.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[e.jsx("h3",{children:"Shipment not found"}),e.jsx(nr,{to:"/shipments",className:"btn btn-primary",style:{marginTop:"1rem"},children:"Back to Shipments"})]});const x=f();return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(nr,{to:"/shipments",className:"btn btn-secondary btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:600,margin:0},children:["Shipment ",s.shipmentNumber]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:s.customer?.nameEn||s.customer?.name})]}),e.jsx(Pn,{status:s.status,size:"md"}),s.priority==="URGENT"&&e.jsx("span",{className:"badge badge-danger",children:"Urgent"})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1.5rem"},children:"Shipment Journey"}),["DELIVERY_FAILED","CANCELLED","DELAYED"].includes(s.status)&&e.jsxs("div",{style:{backgroundColor:s.status==="CANCELLED"?"var(--bg-secondary)":"var(--danger-light)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx($r,{size:20,color:s.status==="CANCELLED"?"var(--text-muted)":"var(--danger)"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,color:s.status==="CANCELLED"?"var(--text-muted)":"var(--danger)"},children:[s.status==="DELIVERY_FAILED"&&"Delivery Failed",s.status==="CANCELLED"&&"Shipment Cancelled",s.status==="DELAYED"&&"Shipment Delayed"]}),s.driverNotes&&e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem"},children:s.driverNotes})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"1rem"},children:[e.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",right:"40px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),e.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",width:x>=0?`${x/(fA.length-1)*100}%`:"0%",maxWidth:"calc(100% - 80px)",height:"2px",backgroundColor:"var(--primary)",zIndex:1,transition:"width 0.3s ease"}}),fA.map((v,w)=>{const C=x>=w,N=x===w,T=v.icon;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:2,flex:1},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:C?"var(--primary)":"var(--bg-secondary)",border:N?"3px solid var(--primary)":"2px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",color:C?"white":"var(--text-muted)",transition:"all 0.3s ease"},children:e.jsx(T,{size:18})}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",fontWeight:N?600:400,color:C?"var(--text-primary)":"var(--text-muted)",textAlign:"center"},children:v.label})]},v.status)})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Driver"}),["PACKED","ASSIGNED_TO_DRIVER","DELIVERY_FAILED"].includes(s.status)&&e.jsxs("button",{className:"btn btn-sm btn-outline",onClick:()=>n(!0),children:[e.jsx(Np,{size:14}),s.driver?"Reassign":"Assign"]})]}),s.driver?e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:600,fontSize:"1.25rem"},children:s.driver.fullName.charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:s.driver.fullName}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:[e.jsx(vo,{size:14}),e.jsx("a",{href:`tel:${s.driver.mobile}`,children:s.driver.mobile})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-muted)"},children:[e.jsx(dn,{size:14}),s.driver.vehicleType,"  ",s.driver.vehiclePlateNo]})]})]}):e.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No driver assigned yet"})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Delivery Details"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(Uo,{size:16,style:{marginTop:"2px",color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Customer"}),e.jsx("div",{children:s.customer?.nameEn||s.customer?.name})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(Ea,{size:16,style:{marginTop:"2px",color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Address"}),e.jsx("div",{children:s.deliveryAddress||s.customer?.address||"Not specified"}),s.customer?.city&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:s.customer.city})]})]}),(s.scheduledPickupAt||s.scheduledDeliveryAt)&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx($n,{size:16,style:{marginTop:"2px",color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Schedule"}),s.scheduledPickupAt&&e.jsxs("div",{children:["Pickup: ",Ze(new Date(s.scheduledPickupAt),"MMM dd, HH:mm")]}),s.scheduledDeliveryAt&&e.jsxs("div",{children:["Delivery: ",Ze(new Date(s.scheduledDeliveryAt),"MMM dd, HH:mm")]})]})]})]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Timeline"}),s.events?.length>0?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"15px",top:"24px",bottom:"24px",width:"2px",backgroundColor:"var(--border)"}}),s.events.map((v,w)=>{const C=p(v.eventType);return e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:w<s.events.length-1?"1.5rem":0,position:"relative"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--bg-primary)",border:"2px solid var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:e.jsx(C,{size:14,color:"var(--primary)"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500},children:v.eventType.replace(/_/g," ")}),v.notes&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:v.notes}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[Ze(new Date(v.createdAt),"MMM dd, yyyy HH:mm"),v.driver&&`  by ${v.driver.fullName}`]})]})]},v.id)})]}):e.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No events recorded yet"})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:["Orders (",s.orders?.length||0,")"]}),s.orders?.map(v=>e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.5rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs(nr,{to:`/orders/${v.id}`,style:{fontWeight:500,color:"var(--primary)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.orderNumber,e.jsx(ih,{size:12})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:v.product?.name})]}),e.jsx(Pn,{status:v.status,size:"sm"})]})},v.id))]}),t&&e.jsx(mc,{entityType:"SHIPMENT",entityId:t,title:"Shipment Attachments"})]}),s.proofOfDelivery&&e.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Proof of Delivery"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Receiver"}),e.jsx("div",{style:{fontWeight:500},children:s.proofOfDelivery.receiverName}),s.proofOfDelivery.receiverMobile&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:s.proofOfDelivery.receiverMobile})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Delivered At"}),e.jsx("div",{children:Ze(new Date(s.proofOfDelivery.deliveredAt),"MMM dd, yyyy HH:mm")})]}),s.proofOfDelivery.gpsLat&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"GPS Location"}),e.jsxs("div",{children:[s.proofOfDelivery.gpsLat.toFixed(6),", ",s.proofOfDelivery.gpsLng.toFixed(6)]})]})]}),(s.proofOfDelivery.signatureFileUrl||s.proofOfDelivery.photos?.length>0)&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[s.proofOfDelivery.signatureFileUrl&&e.jsxs("div",{style:{border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Signature"}),e.jsx("img",{src:s.proofOfDelivery.signatureFileUrl,alt:"Signature",style:{maxWidth:"150px",maxHeight:"80px"}})]}),s.proofOfDelivery.photos?.map((v,w)=>e.jsxs("div",{style:{border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:[e.jsx(Dv,{size:12,style:{display:"inline",marginRight:"0.25rem"}}),"Photo ",w+1]}),e.jsx("img",{src:v.fileUrl,alt:`Delivery photo ${w+1}`,style:{maxWidth:"150px",maxHeight:"100px",objectFit:"cover"}})]},v.id))]}),s.proofOfDelivery.notes&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Notes"}),e.jsx("div",{children:s.proofOfDelivery.notes})]})]}),r&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Assign Driver"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n(!1),children:""})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Driver *"}),e.jsxs("select",{name:"driverId",className:"form-select",required:!0,defaultValue:s.driver?.id||"",children:[e.jsx("option",{value:"",children:"Select Driver"}),l?.filter(v=>v.status==="ACTIVE").map(v=>e.jsxs("option",{value:v.id,children:[v.fullName," - ",v.vehicleType," (",v.vehiclePlateNo,")"]},v.id))]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pickup Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledPickupAt",className:"form-input",defaultValue:s.scheduledPickupAt?Ze(new Date(s.scheduledPickupAt),"yyyy-MM-dd'T'HH:mm"):""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Time"}),e.jsx("input",{type:"datetime-local",name:"scheduledDeliveryAt",className:"form-input",defaultValue:s.scheduledDeliveryAt?Ze(new Date(s.scheduledDeliveryAt),"yyyy-MM-dd'T'HH:mm"):""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes for Driver"}),e.jsx("textarea",{name:"driverNotes",className:"form-textarea",rows:2,placeholder:"Special instructions...",defaultValue:s.driverNotes||""})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u.isPending,children:u.isPending?"Assigning...":"Assign Driver"})]})]})]})})]})}const pAe={ORDER:qo,BATCH:sa,SHIPMENT:dn,INVOICE:rd,APPROVAL:gu,ALERT:sn,INFO:of},gAe={ORDER:"#3b82f6",BATCH:"#8b5cf6",SHIPMENT:"#f59e0b",INVOICE:"#10b981",APPROVAL:"#ec4899",ALERT:"#ef4444",INFO:"#6b7280"};function NM(t,r){if(!t||!r)return null;switch(t.toLowerCase()){case"order":return`/orders/${r}/journey`;case"batch":return`/batches/${r}/journey`;case"shipment":return`/shipments/${r}`;case"invoice":return"/invoices";case"customer":return"/customers";case"approval":return"/approvals";case"payment":return"/payments";case"product":return"/products";default:return null}}function yAe(){const t=Qr(),r=pr(),[n,i]=k.useState("all"),[a,s]=k.useState(""),[o,l]=k.useState(1),u=20,{data:d,isLoading:f}=Ve({queryKey:["all-notifications",n,o],queryFn:async()=>{const O=new URLSearchParams;n==="unread"&&O.append("unreadOnly","true"),O.append("limit",u.toString()),O.append("page",o.toString());const{data:D}=await xe.get(`/notifications?${O.toString()}`);return D}}),p=ot({mutationFn:async O=>{await xe.patch(`/notifications/${O}/read`)},onSuccess:()=>{r.invalidateQueries({queryKey:["all-notifications"]}),r.invalidateQueries({queryKey:["notifications"]})}}),x=ot({mutationFn:async()=>{await xe.patch("/notifications/read-all")},onSuccess:()=>{r.invalidateQueries({queryKey:["all-notifications"]}),r.invalidateQueries({queryKey:["notifications"]})}}),v=O=>{O.isRead||p.mutate(O.id);const D=NM(O.relatedType,O.relatedId);D&&t(D)},w=d?.notifications||[],C=d?.unreadCount||0,N=w.filter(O=>!(n==="read"&&!O.isRead||a&&O.type!==a)),T=[...new Set(w.map(O=>O.type))];return f?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(xo,{size:28,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Notification Center"}),e.jsxs("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:[C," unread notification",C!==1?"s":""]})]})]}),C>0&&e.jsxs("button",{onClick:()=>x.mutate(),disabled:x.isPending,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(XL,{size:16}),"Mark All as Read"]})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:16,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:"Filter:"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","unread","read"].map(O=>e.jsx("button",{onClick:()=>{i(O),l(1)},style:{padding:"0.375rem 0.75rem",borderRadius:"6px",border:"none",background:n===O?"var(--primary)":"var(--bg-secondary)",color:n===O?"white":"var(--text-primary)",fontSize:"0.8rem",fontWeight:500,cursor:"pointer",textTransform:"capitalize"},children:O},O))}),T.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"1px",height:"24px",background:"var(--border)",margin:"0 0.5rem"}}),e.jsxs("select",{value:a,onChange:O=>s(O.target.value),className:"form-select",style:{fontSize:"0.8rem",padding:"0.375rem 0.75rem",minWidth:"140px"},children:[e.jsx("option",{value:"",children:"All Types"}),T.map(O=>e.jsx("option",{value:O,children:O},O))]})]})]})}),e.jsx("div",{className:"card",style:{overflow:"hidden"},children:N.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(xo,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:500,marginBottom:"0.5rem"},children:"No notifications"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:n!=="all"?`No ${n} notifications to display.`:"You're all caught up!"})]}):N.map((O,D)=>{const M=pAe[O.type]||xo,Y=gAe[O.type]||"#6b7280",q=!!NM(O.relatedType,O.relatedId);return e.jsx("div",{onClick:()=>v(O),style:{padding:"1rem 1.25rem",borderBottom:D<N.length-1?"1px solid var(--border)":"none",background:O.isRead?"transparent":"rgba(59, 130, 246, 0.03)",cursor:q?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:W=>{q&&(W.currentTarget.style.background="var(--bg-secondary)")},onMouseLeave:W=>{W.currentTarget.style.background=O.isRead?"transparent":"rgba(59, 130, 246, 0.03)"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:`${Y}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(M,{size:20,style:{color:Y}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"0.25rem"},children:[e.jsx("div",{style:{fontWeight:O.isRead?500:600,fontSize:"0.925rem",color:(O.isRead,"var(--text-primary)")},children:O.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[!O.isRead&&e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",whiteSpace:"nowrap"},children:Ze(new Date(O.createdAt),"MMM dd, yyyy HH:mm")})]})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",lineHeight:1.5,marginBottom:"0.5rem"},children:O.message}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{display:"inline-block",padding:"0.2rem 0.5rem",borderRadius:"4px",background:`${Y}15`,color:Y,fontSize:"0.7rem",fontWeight:600,textTransform:"uppercase"},children:O.type}),q&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:"var(--primary)"},children:[e.jsx(ih,{size:12}),"View Details"]}),!O.isRead&&e.jsxs("button",{onClick:W=>{W.stopPropagation(),p.mutate(O.id)},style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",border:"none",background:"none",color:"var(--text-muted)",fontSize:"0.75rem",cursor:"pointer",marginLeft:"auto"},children:[e.jsx(Ai,{size:12}),"Mark as read"]})]})]})]})},O.id)})}),d&&d.totalCount>0&&e.jsx("div",{style:{marginTop:"1rem",borderRadius:"8px",overflow:"hidden"},children:e.jsx(i0,{page:o,pageSize:u,totalCount:d.totalCount,onPageChange:l})})]})}function xAe(){const t=pr(),[r,n]=k.useState(!1),[i,a]=k.useState(null),[s,o]=k.useState({name:"",description:"",permissionIds:[]}),{data:l,isLoading:u}=Ve({queryKey:["roles"],queryFn:async()=>{const{data:N}=await xe.get("/roles");return N}}),{data:d}=Ve({queryKey:["permissions"],queryFn:async()=>{const{data:N}=await xe.get("/roles/permissions/all");return N}}),f=ot({mutationFn:async N=>{const{data:T}=await xe.post("/roles",N);return T},onSuccess:()=>{t.invalidateQueries({queryKey:["roles"]}),v()}}),p=ot({mutationFn:async({id:N,data:T})=>{const{data:O}=await xe.put(`/roles/${N}`,T);return O},onSuccess:()=>{t.invalidateQueries({queryKey:["roles"]}),v()}}),x=N=>{N?(a(N),o({name:N.name,description:N.description||"",permissionIds:N.permissions.map(T=>T.id)})):(a(null),o({name:"",description:"",permissionIds:[]})),n(!0)},v=()=>{n(!1),a(null),o({name:"",description:"",permissionIds:[]})},w=N=>{N.preventDefault(),i?p.mutate({id:i.id,data:s}):f.mutate(s)},C=N=>{o(T=>({...T,permissionIds:T.permissionIds.includes(N)?T.permissionIds.filter(O=>O!==N):[...T.permissionIds,N]}))};return u?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(ia,{size:28,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Role Management"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:"Manage system roles and their permissions"})]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>x(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(cn,{size:16}),"Add Role"]})]}),e.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:l?.map(N=>e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ia,{size:20,style:{color:"var(--primary)"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,margin:0},children:N.name}),N.description&&e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0,marginTop:"0.25rem"},children:N.description})]})]}),e.jsx("button",{onClick:()=>x(N),style:{background:"none",border:"none",padding:"0.5rem",cursor:"pointer",color:"var(--text-muted)",borderRadius:"6px"},children:e.jsx(Kh,{size:16})})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Bg,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:500,color:"var(--text-muted)"},children:["Permissions (",N.permissions.length,")"]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.375rem"},children:[N.permissions.length===0?e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontStyle:"italic"},children:"No permissions assigned"}):N.permissions.slice(0,5).map(T=>e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"4px",background:"var(--bg-secondary)",fontSize:"0.7rem",fontWeight:500},children:T.name},T.id)),N.permissions.length>5&&e.jsxs("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"4px",background:"var(--primary-light)",color:"var(--primary)",fontSize:"0.7rem",fontWeight:500},children:["+",N.permissions.length-5," more"]})]})]})]},N.id))}),l?.length===0&&e.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[e.jsx(cc,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"No roles found. Create your first role to get started."})]}),r&&e.jsx("div",{className:"modal-overlay",onClick:v,children:e.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{maxWidth:"500px",width:"100%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:i?"Edit Role":"Create New Role"}),e.jsx("button",{className:"modal-close",onClick:v,children:e.jsx(kr,{size:20})})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Role Name *"}),e.jsx("input",{type:"text",className:"form-input",value:s.name,onChange:N=>o({...s,name:N.target.value}),placeholder:"e.g., Manager, Supervisor",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-input",value:s.description,onChange:N=>o({...s,description:N.target.value}),placeholder:"Brief description of this role",rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Permissions"}),e.jsx("div",{style:{border:"1px solid var(--border)",borderRadius:"8px",maxHeight:"250px",overflow:"auto"},children:d?.length===0?e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)"},children:"No permissions available"}):d?.map(N=>e.jsxs("div",{onClick:()=>C(N.id),style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",borderBottom:"1px solid var(--border)",background:s.permissionIds.includes(N.id)?"rgba(59, 130, 246, 0.05)":"transparent"},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:s.permissionIds.includes(N.id)?"none":"2px solid var(--border)",background:s.permissionIds.includes(N.id)?"var(--primary)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:s.permissionIds.includes(N.id)&&e.jsx(Ai,{size:14,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:N.name}),N.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:N.description})]})]},N.id))}),e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[s.permissionIds.length," permission(s) selected"]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:v,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:f.isPending||p.isPending,children:i?"Update Role":"Create Role"})]})]})]})})]})}function vAe(){const{user:t,setUser:r}=Il();pr();const n=gn(),[i,a]=k.useState(!1),[s,o]=k.useState(!1),[l,u]=k.useState(!1),[d,f]=k.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:t?.phone||""}),[p,x]=k.useState({currentPassword:"",newPassword:"",confirmPassword:""}),v=ot({mutationFn:async T=>(await xe.put("/users/profile",T)).data,onSuccess:T=>{r(T),a(!1),n.success("Profile Updated","Your profile has been updated successfully")},onError:()=>{n.error("Update Failed","Failed to update profile")}}),w=ot({mutationFn:async T=>{await xe.put("/users/change-password",{currentPassword:T.currentPassword,newPassword:T.newPassword})},onSuccess:()=>{o(!1),x({currentPassword:"",newPassword:"",confirmPassword:""}),n.success("Password Changed","Your password has been changed successfully")},onError:()=>{n.error("Password Change Failed","Failed to change password. Please check your current password.")}}),C=T=>{T.preventDefault(),v.mutate(d)},N=T=>{if(T.preventDefault(),p.newPassword!==p.confirmPassword){n.error("Password Mismatch","New passwords do not match");return}if(p.newPassword.length<6){n.error("Password Too Short","Password must be at least 6 characters");return}w.mutate(p)};return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Profile"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"1.5rem"},children:[t?.firstName?.[0],t?.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{fontWeight:600,margin:0},children:[t?.firstName," ",t?.lastName]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[e.jsx(ia,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:t?.role})]})]})]}),!i&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>a(!0),children:"Edit Profile"})]}),e.jsxs("form",{onSubmit:C,style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Uo,{size:14})," First Name"]}),e.jsx("input",{type:"text",className:"form-input",value:d.firstName,onChange:T=>f({...d,firstName:T.target.value}),disabled:!i})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Uo,{size:14})," Last Name"]}),e.jsx("input",{type:"text",className:"form-input",value:d.lastName,onChange:T=>f({...d,lastName:T.target.value}),disabled:!i})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(uc,{size:14})," Email"]}),e.jsx("input",{type:"email",className:"form-input",value:d.email,onChange:T=>f({...d,email:T.target.value}),disabled:!i})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(vo,{size:14})," Phone"]}),e.jsx("input",{type:"tel",className:"form-input",value:d.phone,onChange:T=>f({...d,phone:T.target.value}),disabled:!i})]})]}),i&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{a(!1),f({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:t?.phone||""})},children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:v.isPending,children:[e.jsx(lc,{size:16})," Save Changes"]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{fontWeight:600,margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Bg,{size:18})," Security"]}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:"0.25rem 0 0"},children:"Manage your password and security settings"})]}),!s&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!0),children:"Change Password"})]}),s&&e.jsxs("form",{onSubmit:N,style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gap:"1rem",maxWidth:"400px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:l?"text":"password",className:"form-input",value:p.currentPassword,onChange:T=>x({...p,currentPassword:T.target.value}),required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!l),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:l?e.jsx(Ag,{size:16}):e.jsx(os,{size:16})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsx("input",{type:l?"text":"password",className:"form-input",value:p.newPassword,onChange:T=>x({...p,newPassword:T.target.value}),required:!0,minLength:6})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm New Password"}),e.jsx("input",{type:l?"text":"password",className:"form-input",value:p.confirmPassword,onChange:T=>x({...p,confirmPassword:T.target.value}),required:!0,minLength:6})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{o(!1),x({currentPassword:"",newPassword:"",confirmPassword:""})},children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:w.isPending,children:[e.jsx(Bg,{size:16})," Update Password"]})]})]}),!s&&e.jsx("div",{style:{padding:"1.5rem",color:"var(--text-muted)",fontSize:"0.875rem"},children:"Your password was last changed on your account creation date."})]})]})}function bAe(){const{data:t,isLoading:r}=Ve({queryKey:["driver-dashboard"],queryFn:async()=>{const{data:i}=await xe.get("/driver/dashboard");return i}});if(r)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const n=t?.stats||{};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:["Welcome, ",t?.driver?.fullName||"Driver"]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:[t?.driver?.vehicleType,"  ",t?.driver?.vehiclePlateNo]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Assigned Today",value:n.assignedToday||0,icon:e.jsx(Rr,{size:20}),color:"primary"}),e.jsx(st,{title:"Awaiting Accept",value:n.awaitingAcceptance||0,icon:e.jsx(Qt,{size:20}),color:"warning"}),e.jsx(st,{title:"In Transit",value:n.inTransit||0,icon:e.jsx(dn,{size:20}),color:"info"}),e.jsx(st,{title:"Delivered Today",value:n.deliveredToday||0,icon:e.jsx(Ut,{size:20}),color:"success"}),e.jsx(st,{title:"Failed",value:n.failed||0,icon:e.jsx($r,{size:20}),color:"danger"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Upcoming Deliveries"}),e.jsxs(nr,{to:"/driver/shipments",className:"btn btn-sm btn-outline",children:["View All",e.jsx(oc,{size:14})]})]}),t?.nextDeliveries?.length>0?e.jsx("div",{style:{padding:"1rem"},children:t.nextDeliveries.map(i=>e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:600,fontFamily:"monospace"},children:i.shipmentNumber}),e.jsx(Pn,{status:i.status,size:"sm"}),i.priority==="URGENT"&&e.jsx("span",{className:"badge badge-danger",children:"Urgent"})]}),e.jsx("div",{style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:i.customer?.nameEn||i.customer?.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ea,{size:12}),i.customer?.city||"N/A"]}),i.scheduledDeliveryAt&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Qt,{size:12}),Ze(new Date(i.scheduledDeliveryAt),"HH:mm")]}),e.jsxs("span",{children:[i.orders?.length||0," orders"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.customer?.mobile&&e.jsx("a",{href:`tel:${i.customer.mobile}`,className:"btn btn-sm btn-outline",children:e.jsx(vo,{size:14})}),e.jsxs(nr,{to:`/driver/shipments/${i.id}`,className:"btn btn-sm btn-primary",children:["Open",e.jsx(oc,{size:14})]})]})]},i.id))}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No pending deliveries"})]})]})}function jAe(){const[t,r]=k.useState({}),n=pr(),i=gn(),{data:a,isLoading:s}=Ve({queryKey:["driver-shipments",t],queryFn:async()=>{const{data:l}=await xe.get("/driver/shipments",{params:t});return l}}),o=ot({mutationFn:async l=>xe.post(`/driver/shipments/${l}/accept`),onSuccess:()=>{n.invalidateQueries({queryKey:["driver-shipments"]}),i.success("Accepted","Shipment accepted successfully")},onError:l=>{const u=an(l);i.error("Failed",u?.userMessage||"Failed to accept shipment")}});return s?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Shipments"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"View and manage your assigned deliveries"})]})}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search shipment...",className:"form-input",style:{paddingLeft:"2.25rem"},value:t.search||"",onChange:l=>r(u=>({...u,search:l.target.value}))})]}),e.jsxs("select",{className:"form-select",style:{width:"180px"},value:t.status||"",onChange:l=>r(u=>({...u,status:l.target.value})),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ASSIGNED_TO_DRIVER",children:"Awaiting Accept"}),e.jsx("option",{value:"ACCEPTED_BY_DRIVER",children:"Accepted"}),e.jsx("option",{value:"PICKED_UP",children:"Picked Up"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"ARRIVED",children:"Arrived"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"DELIVERY_FAILED",children:"Failed"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Shipments (",a?.length||0,")"]})}),a?.length>0?e.jsx("div",{style:{padding:"1rem"},children:a.map(l=>e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.75rem",border:l.status==="ASSIGNED_TO_DRIVER"?"2px solid var(--warning)":"none"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontWeight:600,fontFamily:"monospace"},children:l.shipmentNumber}),e.jsx(Pn,{status:l.status,size:"sm"}),l.priority==="URGENT"&&e.jsx("span",{className:"badge badge-danger",children:"Urgent"})]}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500},children:l.customer?.nameEn||l.customer?.name})]}),e.jsxs("div",{style:{textAlign:"right",fontSize:"0.75rem",color:"var(--text-muted)"},children:[l.orders?.length||0," orders"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",marginBottom:"0.75rem"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--text-muted)"},children:[e.jsx(Ea,{size:14}),l.deliveryAddress||l.customer?.address||"N/A"]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:[l.scheduledDeliveryAt&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Qt,{size:12}),"Deliver by ",Ze(new Date(l.scheduledDeliveryAt),"MMM dd, HH:mm")]}),l.customer?.city&&e.jsx("span",{children:l.customer.city})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[l.customer?.mobile&&e.jsxs("a",{href:`tel:${l.customer.mobile}`,className:"btn btn-sm btn-outline",children:[e.jsx(vo,{size:14}),"Call"]}),l.status==="ASSIGNED_TO_DRIVER"&&e.jsxs("button",{className:"btn btn-sm btn-success",onClick:()=>o.mutate(l.id),disabled:o.isPending,children:[e.jsx(Ut,{size:14}),"Accept"]}),e.jsxs(nr,{to:`/driver/shipments/${l.id}`,className:"btn btn-sm btn-primary",children:["Open",e.jsx(oc,{size:14})]})]})]},l.id))}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No shipments found",message:"You have no assigned shipments at this time",icon:"truck"})})]})]})}const gC=[{status:"ASSIGNED_TO_DRIVER",label:"Assigned"},{status:"ACCEPTED_BY_DRIVER",label:"Accepted"},{status:"PICKED_UP",label:"Picked Up"},{status:"IN_TRANSIT",label:"In Transit"},{status:"ARRIVED",label:"Arrived"},{status:"DELIVERED",label:"Delivered"}];function wAe(){const{id:t}=hl(),r=Qr(),[n,i]=k.useState(!1),[a,s]=k.useState(!1),[o,l]=k.useState(null),[u,d]=k.useState(!1),f=k.useRef(null),p=k.useRef(null),x=pr(),v=gn(),{data:w,isLoading:C}=Ve({queryKey:["driver-shipment",t],queryFn:async()=>{const{data:Z}=await xe.get(`/driver/shipments/${t}`);return Z},enabled:!!t}),N=ot({mutationFn:async()=>xe.post(`/driver/shipments/${t}/accept`),onSuccess:()=>{x.invalidateQueries({queryKey:["driver-shipment",t]}),v.success("Accepted","Shipment accepted")},onError:Z=>{const ie=an(Z);v.error("Failed",ie?.userMessage||"Failed to accept")}}),T=ot({mutationFn:async()=>xe.post(`/driver/shipments/${t}/pickup`,{latitude:o?.lat,longitude:o?.lng}),onSuccess:()=>{x.invalidateQueries({queryKey:["driver-shipment",t]}),v.success("Picked Up","Shipment picked up")},onError:Z=>{const ie=an(Z);v.error("Failed",ie?.userMessage||"Failed to confirm pickup")}}),O=ot({mutationFn:async()=>xe.post(`/driver/shipments/${t}/transit`,{latitude:o?.lat,longitude:o?.lng}),onSuccess:()=>{x.invalidateQueries({queryKey:["driver-shipment",t]}),v.success("In Transit","Started transit")},onError:Z=>{const ie=an(Z);v.error("Failed",ie?.userMessage||"Failed to start transit")}}),D=ot({mutationFn:async()=>xe.post(`/driver/shipments/${t}/arrived`,{latitude:o?.lat,longitude:o?.lng}),onSuccess:()=>{x.invalidateQueries({queryKey:["driver-shipment",t]}),v.success("Arrived","Marked as arrived")},onError:Z=>{const ie=an(Z);v.error("Failed",ie?.userMessage||"Failed to mark arrived")}}),M=ot({mutationFn:async Z=>xe.post(`/driver/shipments/${t}/deliver`,Z,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:()=>{x.invalidateQueries({queryKey:["driver-shipment",t]}),i(!1),v.success("Delivered","Delivery confirmed with proof"),r("/driver/shipments")},onError:Z=>{const ie=an(Z);v.error("Failed",ie?.userMessage||"Failed to confirm delivery")}}),Y=ot({mutationFn:async Z=>xe.post(`/driver/shipments/${t}/fail`,Z),onSuccess:()=>{x.invalidateQueries({queryKey:["driver-shipment",t]}),s(!1),v.success("Reported","Delivery failure reported")},onError:Z=>{const ie=an(Z);v.error("Failed",ie?.userMessage||"Failed to report")}}),q=()=>{if(!navigator.geolocation){v.error("Error","Geolocation is not supported");return}d(!0),navigator.geolocation.getCurrentPosition(Z=>{l({lat:Z.coords.latitude,lng:Z.coords.longitude}),d(!1),v.success("Location","GPS location captured")},Z=>{d(!1),v.error("Error","Failed to get location: "+Z.message)},{enableHighAccuracy:!0,timeout:1e4})},W=Z=>{Z.preventDefault();const ie=new FormData(Z.currentTarget);if(!ie.get("receiverName")?.trim()){v.error("Required","Receiver name is required");return}if(!o){v.error("Required","Please capture GPS location before confirming delivery");return}ie.append("latitude",o.lat.toString()),ie.append("longitude",o.lng.toString());const ce=f.current?.files;if(!ce||ce.length===0){v.error("Required","Please upload at least one delivery photo");return}for(let de=0;de<ce.length;de++)ie.append("photos",ce[de]);const Q=p.current?.files?.[0];Q&&ie.append("signature",Q),M.mutate(ie)},J=Z=>{Z.preventDefault();const ie=new FormData(Z.currentTarget);Y.mutate({reasonCode:ie.get("reasonCode"),notes:ie.get("notes"),latitude:o?.lat,longitude:o?.lng})},z=()=>w?gC.findIndex(Z=>Z.status===w.status):-1;if(C)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!w)return e.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[e.jsx("h3",{children:"Shipment not found"}),e.jsx(nr,{to:"/driver/shipments",className:"btn btn-primary",style:{marginTop:"1rem"},children:"Back to Shipments"})]});const G=z(),ne=["DELIVERED","DELIVERY_FAILED","CANCELLED","RETURNED"].includes(w.status);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(nr,{to:"/driver/shipments",className:"btn btn-secondary btn-sm",children:e.jsx(aa,{size:16})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,margin:0},children:w.shipmentNumber}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:w.customer?.nameEn||w.customer?.name})]}),e.jsx(Pn,{status:w.status,size:"md"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"1rem"},children:[e.jsx("div",{style:{position:"absolute",top:"15px",left:"30px",right:"30px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),e.jsx("div",{style:{position:"absolute",top:"15px",left:"30px",width:G>=0?`${G/(gC.length-1)*100}%`:"0%",maxWidth:"calc(100% - 60px)",height:"2px",backgroundColor:"var(--primary)",zIndex:1}}),gC.map((Z,ie)=>{const me=G>=ie,ce=G===ie;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:2,flex:1},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:me?"var(--primary)":"var(--bg-secondary)",border:ce?"3px solid var(--primary)":"2px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",color:me?"white":"var(--text-muted)",fontSize:"0.75rem",fontWeight:600},children:me?e.jsx(Ut,{size:14}):ie+1}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.625rem",fontWeight:ce?600:400,color:me?"var(--text-primary)":"var(--text-muted)",textAlign:"center"},children:Z.label})]},Z.status)})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Delivery Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(Ea,{size:18,style:{marginTop:"2px",color:"var(--primary)"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Address"}),e.jsx("div",{style:{fontWeight:500},children:w.deliveryAddress||w.customer?.address||"Not specified"}),w.customer?.city&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:w.customer.city}),w.deliveryLat&&e.jsxs("a",{href:`https://www.google.com/maps?q=${w.deliveryLat},${w.deliveryLng}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline",style:{marginTop:"0.5rem"},children:[e.jsx(FZ,{size:14}),"Navigate"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(vo,{size:18,style:{marginTop:"2px",color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Contact"}),e.jsx("a",{href:`tel:${w.customer?.mobile||w.customer?.phone}`,style:{fontWeight:500},children:w.customer?.mobile||w.customer?.phone||"N/A"})]})]}),w.scheduledDeliveryAt&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(Qt,{size:18,style:{marginTop:"2px",color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Deliver By"}),e.jsx("div",{style:{fontWeight:500},children:Ze(new Date(w.scheduledDeliveryAt),"MMM dd, HH:mm")})]})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:["Orders (",w.orders?.length||0,")"]}),w.orders?.map(Z=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{fontWeight:500},children:Z.orderNumber}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:Z.product?.name})]},Z.id)),w.driverNotes&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"var(--warning-light)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--warning)",fontWeight:600},children:"Instructions"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:w.driverNotes})]})]})]}),!ne&&e.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Actions"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:q,disabled:u,children:[e.jsx(Ea,{size:16}),u?"Getting Location...":o?"Location Captured":"Capture Location"]}),o&&e.jsxs("span",{style:{display:"flex",alignItems:"center",fontSize:"0.75rem",color:"var(--success)"},children:[e.jsx(Ut,{size:14,style:{marginRight:"0.25rem"}}),o.lat.toFixed(4),", ",o.lng.toFixed(4)]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[w.status==="ASSIGNED_TO_DRIVER"&&e.jsxs("button",{className:"btn btn-success",onClick:()=>N.mutate(),disabled:N.isPending,children:[e.jsx(Ut,{size:16}),"Accept Shipment"]}),w.status==="ACCEPTED_BY_DRIVER"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>T.mutate(),disabled:T.isPending,children:[e.jsx(Rr,{size:16}),"Confirm Pickup"]}),w.status==="PICKED_UP"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>O.mutate(),disabled:O.isPending,children:[e.jsx(dn,{size:16}),"Start Transit"]}),w.status==="IN_TRANSIT"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>D.mutate(),disabled:D.isPending,children:[e.jsx(Ea,{size:16}),"Mark Arrived"]}),["ARRIVED","IN_TRANSIT"].includes(w.status)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>i(!0),children:[e.jsx(Ut,{size:16}),"Complete Delivery"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>s(!0),children:[e.jsx($r,{size:16}),"Report Failed"]})]})]})]}),w.proofOfDelivery&&e.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Proof of Delivery"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Receiver"}),e.jsx("div",{style:{fontWeight:500},children:w.proofOfDelivery.receiverName})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered At"}),e.jsx("div",{children:Ze(new Date(w.proofOfDelivery.deliveredAt),"MMM dd, HH:mm")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"GPS"}),e.jsxs("div",{children:[w.proofOfDelivery.gpsLat?.toFixed(4),", ",w.proofOfDelivery.gpsLng?.toFixed(4)]})]})]})]}),n&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Confirm Delivery"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(!1),children:""})]}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Receiver Name *"}),e.jsx("input",{type:"text",name:"receiverName",className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Receiver Mobile"}),e.jsx("input",{type:"tel",name:"receiverMobile",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Photos *"}),e.jsx("input",{type:"file",ref:f,accept:"image/*",multiple:!0,className:"form-input"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"At least one photo required"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Signature Image"}),e.jsx("input",{type:"file",ref:p,accept:"image/*",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{name:"notes",className:"form-textarea",rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GPS Location *"}),o?e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--success)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",backgroundColor:"var(--success-light)",borderRadius:"var(--radius)"},children:[e.jsx(Ut,{size:14}),o.lat.toFixed(4),", ",o.lng.toFixed(4)]}):e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--danger)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",backgroundColor:"var(--danger-light)",borderRadius:"var(--radius)"},children:[e.jsx($r,{size:14}),'GPS not captured - use "Capture Location" button first']})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:M.isPending,children:M.isPending?"Confirming...":"Confirm Delivery"})]})]})]})}),a&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Report Delivery Failed"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>s(!1),children:""})]}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reason *"}),e.jsxs("select",{name:"reasonCode",className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select Reason"}),e.jsx("option",{value:"CUSTOMER_NOT_AVAILABLE",children:"Customer not available"}),e.jsx("option",{value:"WRONG_ADDRESS",children:"Wrong address"}),e.jsx("option",{value:"CUSTOMER_REFUSED",children:"Customer refused"}),e.jsx("option",{value:"ACCESS_ISSUE",children:"Access issue"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{name:"notes",className:"form-textarea",rows:3,placeholder:"Additional details..."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-danger",disabled:Y.isPending,children:Y.isPending?"Reporting...":"Report Failed"})]})]})]})})]})}var mr;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(mr||(mr={}));var AM=new Map([[mr.QR_CODE,"QR_CODE"],[mr.AZTEC,"AZTEC"],[mr.CODABAR,"CODABAR"],[mr.CODE_39,"CODE_39"],[mr.CODE_93,"CODE_93"],[mr.CODE_128,"CODE_128"],[mr.DATA_MATRIX,"DATA_MATRIX"],[mr.MAXICODE,"MAXICODE"],[mr.ITF,"ITF"],[mr.EAN_13,"EAN_13"],[mr.EAN_8,"EAN_8"],[mr.PDF_417,"PDF_417"],[mr.RSS_14,"RSS_14"],[mr.RSS_EXPANDED,"RSS_EXPANDED"],[mr.UPC_A,"UPC_A"],[mr.UPC_E,"UPC_E"],[mr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),EM;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(EM||(EM={}));function SAe(t){return Object.values(mr).includes(t)}var Hb;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Hb||(Hb={}));var CAe=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Hb.SCAN_TYPE_CAMERA,Hb.SCAN_TYPE_FILE],t})(),cH=(function(){function t(r,n){this.format=r,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(r){if(!AM.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new t(r,AM.get(r))},t})(),_M=(function(){function t(){}return t.createFromText=function(r){var n={text:r};return{decodedText:r,result:n}},t.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},t})(),mA;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(mA||(mA={}));var NAe=(function(){function t(){}return t.createFrom=function(r){return{errorMessage:r,type:mA.UNKWOWN_ERROR}},t})(),AAe=(function(){function t(r){this.verbose=r}return t.prototype.log=function(r){this.verbose&&console.log(r)},t.prototype.warn=function(r){this.verbose&&console.warn(r)},t.prototype.logError=function(r,n){(this.verbose||n===!0)&&console.error(r)},t.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},t})();function Uu(t){return typeof t>"u"||t===null}var Cp=(function(){function t(){}return t.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},t.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),dH=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(r,n){if(typeof r!="object"){var i=typeof r;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(a),o=Object.keys(r),l=0,u=o;l<u.length;l++){var d=u[l];if(s.has(d))return n.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},t})(),Sg={exports:{}},EAe=Sg.exports,TM;function _Ae(){return TM||(TM=1,(function(t,r){(function(n,i){i(r)})(EAe,(function(n){function i(je){return je==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(je,h){je.__proto__=h}||function(je,h){for(var g in h)h.hasOwnProperty(g)&&(je[g]=h[g])};function s(je,h){a(je,h);function g(){this.constructor=je}je.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}function o(je,h){var g=Object.setPrototypeOf;g?g(je,h):je.__proto__=h}function l(je,h){h===void 0&&(h=je.constructor);var g=Error.captureStackTrace;g&&g(je,h)}var u=(function(je){s(h,je);function h(g){var b=this.constructor,S=je.call(this,g)||this;return Object.defineProperty(S,"name",{value:b.name,enumerable:!1}),o(S,b.prototype),l(S),S}return h})(Error);class d extends u{constructor(h=void 0){super(h),this.message=h}getKind(){return this.constructor.kind}}d.kind="Exception";class f extends d{}f.kind="ArgumentException";class p extends d{}p.kind="IllegalArgumentException";class x{constructor(h){if(this.binarizer=h,h===null)throw new p("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(h,g){return this.binarizer.getBlackRow(h,g)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(h,g,b,S){const A=this.binarizer.getLuminanceSource().crop(h,g,b,S);return new x(this.binarizer.createBinarizer(A))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new x(this.binarizer.createBinarizer(h))}rotateCounterClockwise45(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new x(this.binarizer.createBinarizer(h))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class v extends d{static getChecksumInstance(){return new v}}v.kind="ChecksumException";class w{constructor(h){this.source=h}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(h,g,b,S,A){for(;A--;)b[S++]=h[g++]}static currentTimeMillis(){return Date.now()}}class N extends d{}N.kind="IndexOutOfBoundsException";class T extends N{constructor(h=void 0,g=void 0){super(g),this.index=h,this.message=g}}T.kind="ArrayIndexOutOfBoundsException";class O{static fill(h,g){for(let b=0,S=h.length;b<S;b++)h[b]=g}static fillWithin(h,g,b,S){O.rangeCheck(h.length,g,b);for(let A=g;A<b;A++)h[A]=S}static rangeCheck(h,g,b){if(g>b)throw new p("fromIndex("+g+") > toIndex("+b+")");if(g<0)throw new T(g);if(b>h)throw new T(b)}static asList(...h){return h}static create(h,g,b){return Array.from({length:h}).map(A=>Array.from({length:g}).fill(b))}static createInt32Array(h,g,b){return Array.from({length:h}).map(A=>Int32Array.from({length:g}).fill(b))}static equals(h,g){if(!h||!g||!h.length||!g.length||h.length!==g.length)return!1;for(let b=0,S=h.length;b<S;b++)if(h[b]!==g[b])return!1;return!0}static hashCode(h){if(h===null)return 0;let g=1;for(const b of h)g=31*g+b;return g}static fillUint8Array(h,g){for(let b=0;b!==h.length;b++)h[b]=g}static copyOf(h,g){return h.slice(0,g)}static copyOfUint8Array(h,g){if(h.length<=g){const b=new Uint8Array(g);return b.set(h),b}return h.slice(0,g)}static copyOfRange(h,g,b){const S=b-g,A=new Int32Array(S);return C.arraycopy(h,g,A,0,S),A}static binarySearch(h,g,b){b===void 0&&(b=O.numberComparator);let S=0,A=h.length-1;for(;S<=A;){const I=A+S>>1,R=b(g,h[I]);if(R>0)S=I+1;else if(R<0)A=I-1;else return I}return-S-1}static numberComparator(h,g){return h-g}}class D{static numberOfTrailingZeros(h){let g;if(h===0)return 32;let b=31;return g=h<<16,g!==0&&(b-=16,h=g),g=h<<8,g!==0&&(b-=8,h=g),g=h<<4,g!==0&&(b-=4,h=g),g=h<<2,g!==0&&(b-=2,h=g),b-(h<<1>>>31)}static numberOfLeadingZeros(h){if(h===0)return 32;let g=1;return h>>>16||(g+=16,h<<=16),h>>>24||(g+=8,h<<=8),h>>>28||(g+=4,h<<=4),h>>>30||(g+=2,h<<=2),g-=h>>>31,g}static toHexString(h){return h.toString(16)}static toBinaryString(h){return String(parseInt(String(h),2))}static bitCount(h){return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),h=h+(h>>>4)&252645135,h=h+(h>>>8),h=h+(h>>>16),h&63}static truncDivision(h,g){return Math.trunc(h/g)}static parseInt(h,g=void 0){return parseInt(h,g)}}D.MIN_VALUE_32_BITS=-2147483648,D.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(h,g){h===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=h,g==null?this.bits=M.makeArray(h):this.bits=g)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(h){if(h>this.bits.length*32){const g=M.makeArray(h);C.arraycopy(this.bits,0,g,0,this.bits.length),this.bits=g}}get(h){return(this.bits[Math.floor(h/32)]&1<<(h&31))!==0}set(h){this.bits[Math.floor(h/32)]|=1<<(h&31)}flip(h){this.bits[Math.floor(h/32)]^=1<<(h&31)}getNextSet(h){const g=this.size;if(h>=g)return g;const b=this.bits;let S=Math.floor(h/32),A=b[S];A&=~((1<<(h&31))-1);const I=b.length;for(;A===0;){if(++S===I)return g;A=b[S]}const R=S*32+D.numberOfTrailingZeros(A);return R>g?g:R}getNextUnset(h){const g=this.size;if(h>=g)return g;const b=this.bits;let S=Math.floor(h/32),A=~b[S];A&=~((1<<(h&31))-1);const I=b.length;for(;A===0;){if(++S===I)return g;A=~b[S]}const R=S*32+D.numberOfTrailingZeros(A);return R>g?g:R}setBulk(h,g){this.bits[Math.floor(h/32)]=g}setRange(h,g){if(g<h||h<0||g>this.size)throw new p;if(g===h)return;g--;const b=Math.floor(h/32),S=Math.floor(g/32),A=this.bits;for(let I=b;I<=S;I++){const R=I>b?0:h&31,te=(2<<(I<S?31:g&31))-(1<<R);A[I]|=te}}clear(){const h=this.bits.length,g=this.bits;for(let b=0;b<h;b++)g[b]=0}isRange(h,g,b){if(g<h||h<0||g>this.size)throw new p;if(g===h)return!0;g--;const S=Math.floor(h/32),A=Math.floor(g/32),I=this.bits;for(let R=S;R<=A;R++){const V=R>S?0:h&31,ue=(2<<(R<A?31:g&31))-(1<<V)&4294967295;if((I[R]&ue)!==(b?ue:0))return!1}return!0}appendBit(h){this.ensureCapacity(this.size+1),h&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(h,g){if(g<0||g>32)throw new p("Num bits must be between 0 and 32");this.ensureCapacity(this.size+g);for(let b=g;b>0;b--)this.appendBit((h>>b-1&1)===1)}appendBitArray(h){const g=h.size;this.ensureCapacity(this.size+g);for(let b=0;b<g;b++)this.appendBit(h.get(b))}xor(h){if(this.size!==h.size)throw new p("Sizes don't match");const g=this.bits;for(let b=0,S=g.length;b<S;b++)g[b]^=h.bits[b]}toBytes(h,g,b,S){for(let A=0;A<S;A++){let I=0;for(let R=0;R<8;R++)this.get(h)&&(I|=1<<7-R),h++;g[b+A]=I}}getBitArray(){return this.bits}reverse(){const h=new Int32Array(this.bits.length),g=Math.floor((this.size-1)/32),b=g+1,S=this.bits;for(let A=0;A<b;A++){let I=S[A];I=I>>1&1431655765|(I&1431655765)<<1,I=I>>2&858993459|(I&858993459)<<2,I=I>>4&252645135|(I&252645135)<<4,I=I>>8&16711935|(I&16711935)<<8,I=I>>16&65535|(I&65535)<<16,h[g-A]=I}if(this.size!==b*32){const A=b*32-this.size;let I=h[0]>>>A;for(let R=1;R<b;R++){const V=h[R];I|=V<<32-A,h[R-1]=I,I=V>>>A}h[b-1]=I}this.bits=h}static makeArray(h){return new Int32Array(Math.floor((h+31)/32))}equals(h){if(!(h instanceof M))return!1;const g=h;return this.size===g.size&&O.equals(this.bits,g.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let h="";for(let g=0,b=this.size;g<b;g++)(g&7)===0&&(h+=" "),h+=this.get(g)?"X":".";return h}clone(){return new M(this.size,this.bits.slice())}}var Y;(function(je){je[je.OTHER=0]="OTHER",je[je.PURE_BARCODE=1]="PURE_BARCODE",je[je.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",je[je.TRY_HARDER=3]="TRY_HARDER",je[je.CHARACTER_SET=4]="CHARACTER_SET",je[je.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",je[je.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",je[je.ASSUME_GS1=7]="ASSUME_GS1",je[je.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",je[je.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",je[je.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var q=Y;class W extends d{static getFormatInstance(){return new W}}W.kind="FormatException";var J;(function(je){je[je.Cp437=0]="Cp437",je[je.ISO8859_1=1]="ISO8859_1",je[je.ISO8859_2=2]="ISO8859_2",je[je.ISO8859_3=3]="ISO8859_3",je[je.ISO8859_4=4]="ISO8859_4",je[je.ISO8859_5=5]="ISO8859_5",je[je.ISO8859_6=6]="ISO8859_6",je[je.ISO8859_7=7]="ISO8859_7",je[je.ISO8859_8=8]="ISO8859_8",je[je.ISO8859_9=9]="ISO8859_9",je[je.ISO8859_10=10]="ISO8859_10",je[je.ISO8859_11=11]="ISO8859_11",je[je.ISO8859_13=12]="ISO8859_13",je[je.ISO8859_14=13]="ISO8859_14",je[je.ISO8859_15=14]="ISO8859_15",je[je.ISO8859_16=15]="ISO8859_16",je[je.SJIS=16]="SJIS",je[je.Cp1250=17]="Cp1250",je[je.Cp1251=18]="Cp1251",je[je.Cp1252=19]="Cp1252",je[je.Cp1256=20]="Cp1256",je[je.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",je[je.UTF8=22]="UTF8",je[je.ASCII=23]="ASCII",je[je.Big5=24]="Big5",je[je.GB18030=25]="GB18030",je[je.EUC_KR=26]="EUC_KR"})(J||(J={}));class z{constructor(h,g,b,...S){this.valueIdentifier=h,this.name=b,typeof g=="number"?this.values=Int32Array.from([g]):this.values=g,this.otherEncodingNames=S,z.VALUE_IDENTIFIER_TO_ECI.set(h,this),z.NAME_TO_ECI.set(b,this);const A=this.values;for(let I=0,R=A.length;I!==R;I++){const V=A[I];z.VALUES_TO_ECI.set(V,this)}for(const I of S)z.NAME_TO_ECI.set(I,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(h){if(h<0||h>=900)throw new W("incorect value");const g=z.VALUES_TO_ECI.get(h);if(g===void 0)throw new W("incorect value");return g}static getCharacterSetECIByName(h){const g=z.NAME_TO_ECI.get(h);if(g===void 0)throw new W("incorect value");return g}equals(h){if(!(h instanceof z))return!1;const g=h;return this.getName()===g.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(J.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(J.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(J.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(J.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(J.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(J.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(J.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(J.Big5,28,"Big5"),z.GB18030=new z(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(J.EUC_KR,30,"EUC_KR","EUC-KR");class G extends d{}G.kind="UnsupportedOperationException";class ne{static decode(h,g){const b=this.encodingName(g);return this.customDecoder?this.customDecoder(h,b):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(b)?this.decodeFallback(h,b):new TextDecoder(b).decode(h)}static shouldDecodeOnFallback(h){return!ne.isBrowser()&&h==="ISO-8859-1"}static encode(h,g){const b=this.encodingName(g);return this.customEncoder?this.customEncoder(h,b):typeof TextEncoder>"u"?this.encodeFallback(h):new TextEncoder().encode(h)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(h){return typeof h=="string"?h:h.getName()}static encodingCharacterSet(h){return h instanceof z?h:z.getCharacterSetECIByName(h)}static decodeFallback(h,g){const b=this.encodingCharacterSet(g);if(ne.isDecodeFallbackSupported(b)){let S="";for(let A=0,I=h.length;A<I;A++){let R=h[A].toString(16);R.length<2&&(R="0"+R),S+="%"+R}return decodeURIComponent(S)}if(b.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(h.buffer));throw new G(`Encoding ${this.encodingName(g)} not supported by fallback.`)}static isDecodeFallbackSupported(h){return h.equals(z.UTF8)||h.equals(z.ISO8859_1)||h.equals(z.ASCII)}static encodeFallback(h){const b=btoa(unescape(encodeURIComponent(h))).split(""),S=[];for(let A=0;A<b.length;A++)S.push(b[A].charCodeAt(0));return new Uint8Array(S)}}class Z{static castAsNonUtf8Char(h,g=null){const b=g?g.getName():this.ISO88591;return ne.decode(new Uint8Array([h]),b)}static guessEncoding(h,g){if(g!=null&&g.get(q.CHARACTER_SET)!==void 0)return g.get(q.CHARACTER_SET).toString();const b=h.length;let S=!0,A=!0,I=!0,R=0,V=0,te=0,ue=0,ve=0,Ne=0,Me=0,qe=0,$e=0,Xe=0,ct=0;const Tt=h.length>3&&h[0]===239&&h[1]===187&&h[2]===191;for(let _t=0;_t<b&&(S||A||I);_t++){const At=h[_t]&255;I&&(R>0?(At&128)===0?I=!1:R--:(At&128)!==0&&((At&64)===0?I=!1:(R++,(At&32)===0?V++:(R++,(At&16)===0?te++:(R++,(At&8)===0?ue++:I=!1))))),S&&(At>127&&At<160?S=!1:At>159&&(At<192||At===215||At===247)&&ct++),A&&(ve>0?At<64||At===127||At>252?A=!1:ve--:At===128||At===160||At>239?A=!1:At>160&&At<224?(Ne++,qe=0,Me++,Me>$e&&($e=Me)):At>127?(ve++,Me=0,qe++,qe>Xe&&(Xe=qe)):(Me=0,qe=0))}return I&&R>0&&(I=!1),A&&ve>0&&(A=!1),I&&(Tt||V+te+ue>0)?Z.UTF8:A&&(Z.ASSUME_SHIFT_JIS||$e>=3||Xe>=3)?Z.SHIFT_JIS:S&&A?$e===2&&Ne===2||ct*10>=b?Z.SHIFT_JIS:Z.ISO88591:S?Z.ISO88591:A?Z.SHIFT_JIS:I?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(h,...g){let b=-1;function S(I,R,V,te,ue,ve){if(I==="%%")return"%";if(g[++b]===void 0)return;I=te?parseInt(te.substr(1)):void 0;let Ne=ue?parseInt(ue.substr(1)):void 0,Me;switch(ve){case"s":Me=g[b];break;case"c":Me=g[b][0];break;case"f":Me=parseFloat(g[b]).toFixed(I);break;case"p":Me=parseFloat(g[b]).toPrecision(I);break;case"e":Me=parseFloat(g[b]).toExponential(I);break;case"x":Me=parseInt(g[b]).toString(Ne||16);break;case"d":Me=parseFloat(parseInt(g[b],Ne||10).toPrecision(I)).toFixed(0);break}Me=typeof Me=="object"?JSON.stringify(Me):(+Me).toString(Ne);let qe=parseInt(V),$e=V&&V[0]+""=="0"?"0":" ";for(;Me.length<qe;)Me=R!==void 0?Me+$e:$e+Me;return Me}let A=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(A,S)}static getBytes(h,g){return ne.encode(h,g)}static getCharCode(h,g=0){return h.charCodeAt(g)}static getCharAt(h){return String.fromCharCode(h)}}Z.SHIFT_JIS=z.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=z.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=z.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class ie{constructor(h=""){this.value=h}enableDecoding(h){return this.encoding=h,this}append(h){return typeof h=="string"?this.value+=h.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(h,this.encoding):this.value+=String.fromCharCode(h),this}appendChars(h,g,b){for(let S=g;g<g+b;S++)this.append(h[S]);return this}length(){return this.value.length}charAt(h){return this.value.charAt(h)}deleteCharAt(h){this.value=this.value.substr(0,h)+this.value.substring(h+1)}setCharAt(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+1)}substring(h,g){return this.value.substring(h,g)}setLengthToZero(){this.value=""}toString(){return this.value}insert(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+g.length)}}class me{constructor(h,g,b,S){if(this.width=h,this.height=g,this.rowSize=b,this.bits=S,g==null&&(g=h),this.height=g,h<1||g<1)throw new p("Both dimensions must be greater than 0");b==null&&(b=Math.floor((h+31)/32)),this.rowSize=b,S==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(h){const g=h.length,b=h[0].length,S=new me(b,g);for(let A=0;A<g;A++){const I=h[A];for(let R=0;R<b;R++)I[R]&&S.set(R,A)}return S}static parseFromString(h,g,b){if(h===null)throw new p("stringRepresentation cannot be null");const S=new Array(h.length);let A=0,I=0,R=-1,V=0,te=0;for(;te<h.length;)if(h.charAt(te)===`
`||h.charAt(te)==="\r"){if(A>I){if(R===-1)R=A-I;else if(A-I!==R)throw new p("row lengths do not match");I=A,V++}te++}else if(h.substring(te,te+g.length)===g)te+=g.length,S[A]=!0,A++;else if(h.substring(te,te+b.length)===b)te+=b.length,S[A]=!1,A++;else throw new p("illegal character encountered: "+h.substring(te));if(A>I){if(R===-1)R=A-I;else if(A-I!==R)throw new p("row lengths do not match");V++}const ue=new me(R,V);for(let ve=0;ve<A;ve++)S[ve]&&ue.set(Math.floor(ve%R),Math.floor(ve/R));return ue}get(h,g){const b=g*this.rowSize+Math.floor(h/32);return(this.bits[b]>>>(h&31)&1)!==0}set(h,g){const b=g*this.rowSize+Math.floor(h/32);this.bits[b]|=1<<(h&31)&4294967295}unset(h,g){const b=g*this.rowSize+Math.floor(h/32);this.bits[b]&=~(1<<(h&31)&4294967295)}flip(h,g){const b=g*this.rowSize+Math.floor(h/32);this.bits[b]^=1<<(h&31)&4294967295}xor(h){if(this.width!==h.getWidth()||this.height!==h.getHeight()||this.rowSize!==h.getRowSize())throw new p("input matrix dimensions do not match");const g=new M(Math.floor(this.width/32)+1),b=this.rowSize,S=this.bits;for(let A=0,I=this.height;A<I;A++){const R=A*b,V=h.getRow(A,g).getBitArray();for(let te=0;te<b;te++)S[R+te]^=V[te]}}clear(){const h=this.bits,g=h.length;for(let b=0;b<g;b++)h[b]=0}setRegion(h,g,b,S){if(g<0||h<0)throw new p("Left and top must be nonnegative");if(S<1||b<1)throw new p("Height and width must be at least 1");const A=h+b,I=g+S;if(I>this.height||A>this.width)throw new p("The region must fit inside the matrix");const R=this.rowSize,V=this.bits;for(let te=g;te<I;te++){const ue=te*R;for(let ve=h;ve<A;ve++)V[ue+Math.floor(ve/32)]|=1<<(ve&31)&4294967295}}getRow(h,g){g==null||g.getSize()<this.width?g=new M(this.width):g.clear();const b=this.rowSize,S=this.bits,A=h*b;for(let I=0;I<b;I++)g.setBulk(I*32,S[A+I]);return g}setRow(h,g){C.arraycopy(g.getBitArray(),0,this.bits,h*this.rowSize,this.rowSize)}rotate180(){const h=this.getWidth(),g=this.getHeight();let b=new M(h),S=new M(h);for(let A=0,I=Math.floor((g+1)/2);A<I;A++)b=this.getRow(A,b),S=this.getRow(g-1-A,S),b.reverse(),S.reverse(),this.setRow(A,S),this.setRow(g-1-A,b)}getEnclosingRectangle(){const h=this.width,g=this.height,b=this.rowSize,S=this.bits;let A=h,I=g,R=-1,V=-1;for(let te=0;te<g;te++)for(let ue=0;ue<b;ue++){const ve=S[te*b+ue];if(ve!==0){if(te<I&&(I=te),te>V&&(V=te),ue*32<A){let Ne=0;for(;(ve<<31-Ne&4294967295)===0;)Ne++;ue*32+Ne<A&&(A=ue*32+Ne)}if(ue*32+31>R){let Ne=31;for(;!(ve>>>Ne);)Ne--;ue*32+Ne>R&&(R=ue*32+Ne)}}}return R<A||V<I?null:Int32Array.from([A,I,R-A+1,V-I+1])}getTopLeftOnBit(){const h=this.rowSize,g=this.bits;let b=0;for(;b<g.length&&g[b]===0;)b++;if(b===g.length)return null;const S=b/h;let A=b%h*32;const I=g[b];let R=0;for(;(I<<31-R&4294967295)===0;)R++;return A+=R,Int32Array.from([A,S])}getBottomRightOnBit(){const h=this.rowSize,g=this.bits;let b=g.length-1;for(;b>=0&&g[b]===0;)b--;if(b<0)return null;const S=Math.floor(b/h);let A=Math.floor(b%h)*32;const I=g[b];let R=31;for(;!(I>>>R);)R--;return A+=R,Int32Array.from([A,S])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(h){if(!(h instanceof me))return!1;const g=h;return this.width===g.width&&this.height===g.height&&this.rowSize===g.rowSize&&O.equals(this.bits,g.bits)}hashCode(){let h=this.width;return h=31*h+this.width,h=31*h+this.height,h=31*h+this.rowSize,h=31*h+O.hashCode(this.bits),h}toString(h="X ",g="  ",b=`
`){return this.buildToString(h,g,b)}buildToString(h,g,b){let S=new ie;for(let A=0,I=this.height;A<I;A++){for(let R=0,V=this.width;R<V;R++)S.append(this.get(R,A)?h:g);S.append(b)}return S.toString()}clone(){return new me(this.width,this.height,this.rowSize,this.bits.slice())}}class ce extends d{static getNotFoundInstance(){return new ce}}ce.kind="NotFoundException";class Q extends w{constructor(h){super(h),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(h,g){const b=this.getLuminanceSource(),S=b.getWidth();g==null||g.getSize()<S?g=new M(S):g.clear(),this.initArrays(S);const A=b.getRow(h,this.luminances),I=this.buckets;for(let V=0;V<S;V++)I[(A[V]&255)>>Q.LUMINANCE_SHIFT]++;const R=Q.estimateBlackPoint(I);if(S<3)for(let V=0;V<S;V++)(A[V]&255)<R&&g.set(V);else{let V=A[0]&255,te=A[1]&255;for(let ue=1;ue<S-1;ue++){const ve=A[ue+1]&255;(te*4-V-ve)/2<R&&g.set(ue),V=te,te=ve}}return g}getBlackMatrix(){const h=this.getLuminanceSource(),g=h.getWidth(),b=h.getHeight(),S=new me(g,b);this.initArrays(g);const A=this.buckets;for(let V=1;V<5;V++){const te=Math.floor(b*V/5),ue=h.getRow(te,this.luminances),ve=Math.floor(g*4/5);for(let Ne=Math.floor(g/5);Ne<ve;Ne++){const Me=ue[Ne]&255;A[Me>>Q.LUMINANCE_SHIFT]++}}const I=Q.estimateBlackPoint(A),R=h.getMatrix();for(let V=0;V<b;V++){const te=V*g;for(let ue=0;ue<g;ue++)(R[te+ue]&255)<I&&S.set(ue,V)}return S}createBinarizer(h){return new Q(h)}initArrays(h){this.luminances.length<h&&(this.luminances=new Uint8ClampedArray(h));const g=this.buckets;for(let b=0;b<Q.LUMINANCE_BUCKETS;b++)g[b]=0}static estimateBlackPoint(h){const g=h.length;let b=0,S=0,A=0;for(let ue=0;ue<g;ue++)h[ue]>A&&(S=ue,A=h[ue]),h[ue]>b&&(b=h[ue]);let I=0,R=0;for(let ue=0;ue<g;ue++){const ve=ue-S,Ne=h[ue]*ve*ve;Ne>R&&(I=ue,R=Ne)}if(S>I){const ue=S;S=I,I=ue}if(I-S<=g/16)throw new ce;let V=I-1,te=-1;for(let ue=I-1;ue>S;ue--){const ve=ue-S,Ne=ve*ve*(I-ue)*(b-h[ue]);Ne>te&&(V=ue,te=Ne)}return V<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class de extends Q{constructor(h){super(h),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const h=this.getLuminanceSource(),g=h.getWidth(),b=h.getHeight();if(g>=de.MINIMUM_DIMENSION&&b>=de.MINIMUM_DIMENSION){const S=h.getMatrix();let A=g>>de.BLOCK_SIZE_POWER;(g&de.BLOCK_SIZE_MASK)!==0&&A++;let I=b>>de.BLOCK_SIZE_POWER;(b&de.BLOCK_SIZE_MASK)!==0&&I++;const R=de.calculateBlackPoints(S,A,I,g,b),V=new me(g,b);de.calculateThresholdForBlock(S,A,I,g,b,R,V),this.matrix=V}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(h){return new de(h)}static calculateThresholdForBlock(h,g,b,S,A,I,R){const V=A-de.BLOCK_SIZE,te=S-de.BLOCK_SIZE;for(let ue=0;ue<b;ue++){let ve=ue<<de.BLOCK_SIZE_POWER;ve>V&&(ve=V);const Ne=de.cap(ue,2,b-3);for(let Me=0;Me<g;Me++){let qe=Me<<de.BLOCK_SIZE_POWER;qe>te&&(qe=te);const $e=de.cap(Me,2,g-3);let Xe=0;for(let Tt=-2;Tt<=2;Tt++){const _t=I[Ne+Tt];Xe+=_t[$e-2]+_t[$e-1]+_t[$e]+_t[$e+1]+_t[$e+2]}const ct=Xe/25;de.thresholdBlock(h,qe,ve,ct,S,R)}}}static cap(h,g,b){return h<g?g:h>b?b:h}static thresholdBlock(h,g,b,S,A,I){for(let R=0,V=b*A+g;R<de.BLOCK_SIZE;R++,V+=A)for(let te=0;te<de.BLOCK_SIZE;te++)(h[V+te]&255)<=S&&I.set(g+te,b+R)}static calculateBlackPoints(h,g,b,S,A){const I=A-de.BLOCK_SIZE,R=S-de.BLOCK_SIZE,V=new Array(b);for(let te=0;te<b;te++){V[te]=new Int32Array(g);let ue=te<<de.BLOCK_SIZE_POWER;ue>I&&(ue=I);for(let ve=0;ve<g;ve++){let Ne=ve<<de.BLOCK_SIZE_POWER;Ne>R&&(Ne=R);let Me=0,qe=255,$e=0;for(let ct=0,Tt=ue*S+Ne;ct<de.BLOCK_SIZE;ct++,Tt+=S){for(let _t=0;_t<de.BLOCK_SIZE;_t++){const At=h[Tt+_t]&255;Me+=At,At<qe&&(qe=At),At>$e&&($e=At)}if($e-qe>de.MIN_DYNAMIC_RANGE)for(ct++,Tt+=S;ct<de.BLOCK_SIZE;ct++,Tt+=S)for(let _t=0;_t<de.BLOCK_SIZE;_t++)Me+=h[Tt+_t]&255}let Xe=Me>>de.BLOCK_SIZE_POWER*2;if($e-qe<=de.MIN_DYNAMIC_RANGE&&(Xe=qe/2,te>0&&ve>0)){const ct=(V[te-1][ve]+2*V[te][ve-1]+V[te-1][ve-1])/4;qe<ct&&(Xe=ct)}V[te][ve]=Xe}}return V}}de.BLOCK_SIZE_POWER=3,de.BLOCK_SIZE=1<<de.BLOCK_SIZE_POWER,de.BLOCK_SIZE_MASK=de.BLOCK_SIZE-1,de.MINIMUM_DIMENSION=de.BLOCK_SIZE*5,de.MIN_DYNAMIC_RANGE=24;class le{constructor(h,g){this.width=h,this.height=g}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(h,g,b,S){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const h=new Uint8ClampedArray(this.width);let g=new ie;for(let b=0;b<this.height;b++){const S=this.getRow(b,h);for(let A=0;A<this.width;A++){const I=S[A]&255;let R;I<64?R="#":I<128?R="+":I<192?R=".":R=" ",g.append(R)}g.append(`
`)}return g.toString()}}class ye extends le{constructor(h){super(h.getWidth(),h.getHeight()),this.delegate=h}getRow(h,g){const b=this.delegate.getRow(h,g),S=this.getWidth();for(let A=0;A<S;A++)b[A]=255-(b[A]&255);return b}getMatrix(){const h=this.delegate.getMatrix(),g=this.getWidth()*this.getHeight(),b=new Uint8ClampedArray(g);for(let S=0;S<g;S++)b[S]=255-(h[S]&255);return b}isCropSupported(){return this.delegate.isCropSupported()}crop(h,g,b,S){return new ye(this.delegate.crop(h,g,b,S))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ye(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ye(this.delegate.rotateCounterClockwise45())}}class Se extends le{constructor(h){super(h.width,h.height),this.canvas=h,this.tempCanvasElement=null,this.buffer=Se.makeBufferFromCanvasImageData(h)}static makeBufferFromCanvasImageData(h){const g=h.getContext("2d").getImageData(0,0,h.width,h.height);return Se.toGrayscaleBuffer(g.data,h.width,h.height)}static toGrayscaleBuffer(h,g,b){const S=new Uint8ClampedArray(g*b);for(let A=0,I=0,R=h.length;A<R;A+=4,I++){let V;if(h[A+3]===0)V=255;else{const ue=h[A],ve=h[A+1],Ne=h[A+2];V=306*ue+601*ve+117*Ne+512>>10}S[I]=V}return S}getRow(h,g){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth(),S=h*b;return g===null?g=this.buffer.slice(S,S+b):(g.length<b&&(g=new Uint8ClampedArray(b)),g.set(this.buffer.slice(S,S+b))),g}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(h,g,b,S){return super.crop(h,g,b,S),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const h=this.canvas.ownerDocument.createElement("canvas");h.width=this.canvas.width,h.height=this.canvas.height,this.tempCanvasElement=h}return this.tempCanvasElement}rotate(h){const g=this.getTempCanvasElement(),b=g.getContext("2d"),S=h*Se.DEGREE_TO_RADIANS,A=this.canvas.width,I=this.canvas.height,R=Math.ceil(Math.abs(Math.cos(S))*A+Math.abs(Math.sin(S))*I),V=Math.ceil(Math.abs(Math.sin(S))*A+Math.abs(Math.cos(S))*I);return g.width=R,g.height=V,b.translate(R/2,V/2),b.rotate(S),b.drawImage(this.canvas,A/-2,I/-2),this.buffer=Se.makeBufferFromCanvasImageData(g),this}invert(){return new ye(this)}}Se.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(h,g,b){this.deviceId=h,this.label=g,this.kind="videoinput",this.groupId=b||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var X=(globalThis||Rx||self||window||void 0)&&(globalThis||Rx||self||window||void 0).__awaiter||function(je,h,g,b){function S(A){return A instanceof g?A:new g(function(I){I(A)})}return new(g||(g=Promise))(function(A,I){function R(ue){try{te(b.next(ue))}catch(ve){I(ve)}}function V(ue){try{te(b.throw(ue))}catch(ve){I(ve)}}function te(ue){ue.done?A(ue.value):S(ue.value).then(R,V)}te((b=b.apply(je,h||[])).next())})};class se{constructor(h,g=500,b){this.reader=h,this.timeBetweenScansMillis=g,this._hints=b,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(h){this._timeBetweenDecodingAttempts=h<0?0:h}set hints(h){this._hints=h||null}get hints(){return this._hints}listVideoInputDevices(){return X(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const h=yield navigator.mediaDevices.enumerateDevices(),g=[];for(const b of h){const S=b.kind==="video"?"videoinput":b.kind;if(S!=="videoinput")continue;const A=b.deviceId||b.id,I=b.label||`Video device ${g.length+1}`,R=b.groupId,V={deviceId:A,label:I,kind:S,groupId:R};g.push(V)}return g})}getVideoInputDevices(){return X(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(g=>new $(g.deviceId,g.label))})}findDeviceById(h){return X(this,void 0,void 0,function*(){const g=yield this.listVideoInputDevices();return g?g.find(b=>b.deviceId===h):null})}decodeFromInputVideoDevice(h,g){return X(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(h,g)})}decodeOnceFromVideoDevice(h,g){return X(this,void 0,void 0,function*(){this.reset();let b;h?b={deviceId:{exact:h}}:b={facingMode:"environment"};const S={video:b};return yield this.decodeOnceFromConstraints(S,g)})}decodeOnceFromConstraints(h,g){return X(this,void 0,void 0,function*(){const b=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeOnceFromStream(b,g)})}decodeOnceFromStream(h,g){return X(this,void 0,void 0,function*(){this.reset();const b=yield this.attachStreamToVideo(h,g);return yield this.decodeOnce(b)})}decodeFromInputVideoDeviceContinuously(h,g,b){return X(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(h,g,b)})}decodeFromVideoDevice(h,g,b){return X(this,void 0,void 0,function*(){let S;h?S={deviceId:{exact:h}}:S={facingMode:"environment"};const A={video:S};return yield this.decodeFromConstraints(A,g,b)})}decodeFromConstraints(h,g,b){return X(this,void 0,void 0,function*(){const S=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeFromStream(S,g,b)})}decodeFromStream(h,g,b){return X(this,void 0,void 0,function*(){this.reset();const S=yield this.attachStreamToVideo(h,g);return yield this.decodeContinuously(S,b)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(h,g){return X(this,void 0,void 0,function*(){const b=this.prepareVideoElement(g);return this.addVideoSource(b,h),this.videoElement=b,this.stream=h,yield this.playVideoOnLoadAsync(b),b})}playVideoOnLoadAsync(h){return new Promise((g,b)=>this.playVideoOnLoad(h,()=>g()))}playVideoOnLoad(h,g){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(h),h.addEventListener("ended",this.videoEndedListener),h.addEventListener("canplay",this.videoCanPlayListener),h.addEventListener("playing",g),this.tryPlayVideo(h)}isVideoPlaying(h){return h.currentTime>0&&!h.paused&&!h.ended&&h.readyState>2}tryPlayVideo(h){return X(this,void 0,void 0,function*(){if(this.isVideoPlaying(h)){console.warn("Trying to play video that is already playing.");return}try{yield h.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(h,g){const b=document.getElementById(h);if(!b)throw new f(`element with id '${h}' not found`);if(b.nodeName.toLowerCase()!==g.toLowerCase())throw new f(`element with id '${h}' must be an ${g} element`);return b}decodeFromImage(h,g){if(!h&&!g)throw new f("either imageElement with a src set or an url must be provided");return g&&!h?this.decodeFromImageUrl(g):this.decodeFromImageElement(h)}decodeFromVideo(h,g){if(!h&&!g)throw new f("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrl(g):this.decodeFromVideoElement(h)}decodeFromVideoContinuously(h,g,b){if(h===void 0&&g===void 0)throw new f("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrlContinuously(g,b):this.decodeFromVideoElementContinuously(h,b)}decodeFromImageElement(h){if(!h)throw new f("An image element must be provided.");this.reset();const g=this.prepareImageElement(h);this.imageElement=g;let b;return this.isImageLoaded(g)?b=this.decodeOnce(g,!1,!0):b=this._decodeOnLoadImage(g),b}decodeFromVideoElement(h){const g=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideo(g)}decodeFromVideoElementContinuously(h,g){const b=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideoContinuously(b,g)}_decodeFromVideoElementSetup(h){if(!h)throw new f("A video element must be provided.");this.reset();const g=this.prepareVideoElement(h);return this.videoElement=g,g}decodeFromImageUrl(h){if(!h)throw new f("An URL must be provided.");this.reset();const g=this.prepareImageElement();this.imageElement=g;const b=this._decodeOnLoadImage(g);return g.src=h,b}decodeFromVideoUrl(h){if(!h)throw new f("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),b=this.decodeFromVideoElement(g);return g.src=h,b}decodeFromVideoUrlContinuously(h,g){if(!h)throw new f("An URL must be provided.");this.reset();const b=this.prepareVideoElement(),S=this.decodeFromVideoElementContinuously(b,g);return b.src=h,S}_decodeOnLoadImage(h){return new Promise((g,b)=>{this.imageLoadedListener=()=>this.decodeOnce(h,!1,!0).then(g,b),h.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(h){return X(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(h),yield this.decodeOnce(h)})}_decodeOnLoadVideoContinuously(h,g){return X(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(h),this.decodeContinuously(h,g)})}isImageLoaded(h){return!(!h.complete||h.naturalWidth===0)}prepareImageElement(h){let g;return typeof h>"u"&&(g=document.createElement("img"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"img")),h instanceof HTMLImageElement&&(g=h),g}prepareVideoElement(h){let g;return!h&&typeof document<"u"&&(g=document.createElement("video"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"video")),h instanceof HTMLVideoElement&&(g=h),g.setAttribute("autoplay","true"),g.setAttribute("muted","true"),g.setAttribute("playsinline","true"),g}decodeOnce(h,g=!0,b=!0){this._stopAsyncDecode=!1;const S=(A,I)=>{if(this._stopAsyncDecode){I(new ce("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const R=this.decode(h);A(R)}catch(R){const V=g&&R instanceof ce,ue=(R instanceof v||R instanceof W)&&b;if(V||ue)return setTimeout(S,this._timeBetweenDecodingAttempts,A,I);I(R)}};return new Promise((A,I)=>S(A,I))}decodeContinuously(h,g){this._stopContinuousDecode=!1;const b=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const S=this.decode(h);g(S,null),setTimeout(b,this.timeBetweenScansMillis)}catch(S){g(null,S);const A=S instanceof v||S instanceof W,I=S instanceof ce;(A||I)&&setTimeout(b,this._timeBetweenDecodingAttempts)}};b()}decode(h){const g=this.createBinaryBitmap(h);return this.decodeBitmap(g)}_isHTMLVideoElement(h){return h.videoWidth!==0}drawFrameOnCanvas(h,g,b){g||(g={sx:0,sy:0,sWidth:h.videoWidth,sHeight:h.videoHeight,dx:0,dy:0,dWidth:h.videoWidth,dHeight:h.videoHeight}),b||(b=this.captureCanvasContext),b.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}drawImageOnCanvas(h,g,b=this.captureCanvasContext){g||(g={sx:0,sy:0,sWidth:h.naturalWidth,sHeight:h.naturalHeight,dx:0,dy:0,dWidth:h.naturalWidth,dHeight:h.naturalHeight}),b||(b=this.captureCanvasContext),b.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}createBinaryBitmap(h){this.getCaptureCanvasContext(h),this._isHTMLVideoElement(h)?this.drawFrameOnCanvas(h):this.drawImageOnCanvas(h);const g=this.getCaptureCanvas(h),b=new Se(g),S=new de(b);return new x(S)}getCaptureCanvasContext(h){if(!this.captureCanvasContext){const b=this.getCaptureCanvas(h).getContext("2d");this.captureCanvasContext=b}return this.captureCanvasContext}getCaptureCanvas(h){if(!this.captureCanvas){const g=this.createCaptureCanvas(h);this.captureCanvas=g}return this.captureCanvas}decodeBitmap(h){return this.reader.decode(h,this._hints)}createCaptureCanvas(h){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const g=document.createElement("canvas");let b,S;return typeof h<"u"&&(h instanceof HTMLVideoElement?(b=h.videoWidth,S=h.videoHeight):h instanceof HTMLImageElement&&(b=h.naturalWidth||h.width,S=h.naturalHeight||h.height)),g.style.width=b+"px",g.style.height=S+"px",g.width=b,g.height=S,g}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(h=>h.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(h,g){try{h.srcObject=g}catch{h.src=URL.createObjectURL(g)}}cleanVideoSource(h){try{h.srcObject=null}catch{h.src=""}this.videoElement.removeAttribute("src")}}class H{constructor(h,g,b=g==null?0:8*g.length,S,A,I=C.currentTimeMillis()){this.text=h,this.rawBytes=g,this.numBits=b,this.resultPoints=S,this.format=A,this.timestamp=I,this.text=h,this.rawBytes=g,b==null?this.numBits=g==null?0:8*g.length:this.numBits=b,this.resultPoints=S,this.format=A,this.resultMetadata=null,I==null?this.timestamp=C.currentTimeMillis():this.timestamp=I}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(h,g){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(h,g)}putAllMetadata(h){h!==null&&(this.resultMetadata===null?this.resultMetadata=h:this.resultMetadata=new Map(h))}addResultPoints(h){const g=this.resultPoints;if(g===null)this.resultPoints=h;else if(h!==null&&h.length>0){const b=new Array(g.length+h.length);C.arraycopy(g,0,b,0,g.length),C.arraycopy(h,0,b,g.length,h.length),this.resultPoints=b}}getTimestamp(){return this.timestamp}toString(){return this.text}}var oe;(function(je){je[je.AZTEC=0]="AZTEC",je[je.CODABAR=1]="CODABAR",je[je.CODE_39=2]="CODE_39",je[je.CODE_93=3]="CODE_93",je[je.CODE_128=4]="CODE_128",je[je.DATA_MATRIX=5]="DATA_MATRIX",je[je.EAN_8=6]="EAN_8",je[je.EAN_13=7]="EAN_13",je[je.ITF=8]="ITF",je[je.MAXICODE=9]="MAXICODE",je[je.PDF_417=10]="PDF_417",je[je.QR_CODE=11]="QR_CODE",je[je.RSS_14=12]="RSS_14",je[je.RSS_EXPANDED=13]="RSS_EXPANDED",je[je.UPC_A=14]="UPC_A",je[je.UPC_E=15]="UPC_E",je[je.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(oe||(oe={}));var ge=oe,be;(function(je){je[je.OTHER=0]="OTHER",je[je.ORIENTATION=1]="ORIENTATION",je[je.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",je[je.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",je[je.ISSUE_NUMBER=4]="ISSUE_NUMBER",je[je.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",je[je.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",je[je.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",je[je.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",je[je.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",je[je.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(be||(be={}));var Le=be;class ke{constructor(h,g,b,S,A=-1,I=-1){this.rawBytes=h,this.text=g,this.byteSegments=b,this.ecLevel=S,this.structuredAppendSequenceNumber=A,this.structuredAppendParity=I,this.numBits=h==null?0:8*h.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(h){this.numBits=h}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(h){this.errorsCorrected=h}getErasures(){return this.erasures}setErasures(h){this.erasures=h}getOther(){return this.other}setOther(h){this.other=h}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class He{exp(h){return this.expTable[h]}log(h){if(h===0)throw new p;return this.logTable[h]}static addOrSubtract(h,g){return h^g}}class Je{constructor(h,g){if(g.length===0)throw new p;this.field=h;const b=g.length;if(b>1&&g[0]===0){let S=1;for(;S<b&&g[S]===0;)S++;S===b?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(b-S),C.arraycopy(g,S,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);const g=this.coefficients;let b;if(h===1){b=0;for(let I=0,R=g.length;I!==R;I++){const V=g[I];b=He.addOrSubtract(b,V)}return b}b=g[0];const S=g.length,A=this.field;for(let I=1;I<S;I++)b=He.addOrSubtract(A.multiply(h,b),g[I]);return b}addOrSubtract(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,b=h.coefficients;if(g.length>b.length){const I=g;g=b,b=I}let S=new Int32Array(b.length);const A=b.length-g.length;C.arraycopy(b,0,S,0,A);for(let I=A;I<b.length;I++)S[I]=He.addOrSubtract(g[I-A],b[I]);return new Je(this.field,S)}multiply(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero()||h.isZero())return this.field.getZero();const g=this.coefficients,b=g.length,S=h.coefficients,A=S.length,I=new Int32Array(b+A-1),R=this.field;for(let V=0;V<b;V++){const te=g[V];for(let ue=0;ue<A;ue++)I[V+ue]=He.addOrSubtract(I[V+ue],R.multiply(te,S[ue]))}return new Je(R,I)}multiplyScalar(h){if(h===0)return this.field.getZero();if(h===1)return this;const g=this.coefficients.length,b=this.field,S=new Int32Array(g),A=this.coefficients;for(let I=0;I<g;I++)S[I]=b.multiply(A[I],h);return new Je(b,S)}multiplyByMonomial(h,g){if(h<0)throw new p;if(g===0)return this.field.getZero();const b=this.coefficients,S=b.length,A=new Int32Array(S+h),I=this.field;for(let R=0;R<S;R++)A[R]=I.multiply(b[R],g);return new Je(I,A)}divide(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(h.isZero())throw new p("Divide by 0");const g=this.field;let b=g.getZero(),S=this;const A=h.getCoefficient(h.getDegree()),I=g.inverse(A);for(;S.getDegree()>=h.getDegree()&&!S.isZero();){const R=S.getDegree()-h.getDegree(),V=g.multiply(S.getCoefficient(S.getDegree()),I),te=h.multiplyByMonomial(R,V),ue=g.buildMonomial(R,V);b=b.addOrSubtract(ue),S=S.addOrSubtract(te)}return[b,S]}toString(){let h="";for(let g=this.getDegree();g>=0;g--){let b=this.getCoefficient(g);if(b!==0){if(b<0?(h+=" - ",b=-b):h.length>0&&(h+=" + "),g===0||b!==1){const S=this.field.log(b);S===0?h+="1":S===1?h+="a":(h+="a^",h+=S)}g!==0&&(g===1?h+="x":(h+="x^",h+=g))}}return h}}class Qe extends d{}Qe.kind="ArithmeticException";class vt extends He{constructor(h,g,b){super(),this.primitive=h,this.size=g,this.generatorBase=b;const S=new Int32Array(g);let A=1;for(let R=0;R<g;R++)S[R]=A,A*=2,A>=g&&(A^=h,A&=g-1);this.expTable=S;const I=new Int32Array(g);for(let R=0;R<g-1;R++)I[S[R]]=R;this.logTable=I,this.zero=new Je(this,Int32Array.from([0])),this.one=new Je(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new p;if(g===0)return this.zero;const b=new Int32Array(h+1);return b[0]=g,new Je(this,b)}inverse(h){if(h===0)throw new Qe;return this.expTable[this.size-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+D.toHexString(this.primitive)+","+this.size+")"}equals(h){return h===this}}vt.AZTEC_DATA_12=new vt(4201,4096,1),vt.AZTEC_DATA_10=new vt(1033,1024,1),vt.AZTEC_DATA_6=new vt(67,64,1),vt.AZTEC_PARAM=new vt(19,16,1),vt.QR_CODE_FIELD_256=new vt(285,256,0),vt.DATA_MATRIX_FIELD_256=new vt(301,256,1),vt.AZTEC_DATA_8=vt.DATA_MATRIX_FIELD_256,vt.MAXICODE_FIELD_64=vt.AZTEC_DATA_6;class Pt extends d{}Pt.kind="ReedSolomonException";class Oe extends d{}Oe.kind="IllegalStateException";class at{constructor(h){this.field=h}decode(h,g){const b=this.field,S=new Je(b,h),A=new Int32Array(g);let I=!0;for(let Me=0;Me<g;Me++){const qe=S.evaluateAt(b.exp(Me+b.getGeneratorBase()));A[A.length-1-Me]=qe,qe!==0&&(I=!1)}if(I)return;const R=new Je(b,A),V=this.runEuclideanAlgorithm(b.buildMonomial(g,1),R,g),te=V[0],ue=V[1],ve=this.findErrorLocations(te),Ne=this.findErrorMagnitudes(ue,ve);for(let Me=0;Me<ve.length;Me++){const qe=h.length-1-b.log(ve[Me]);if(qe<0)throw new Pt("Bad error location");h[qe]=vt.addOrSubtract(h[qe],Ne[Me])}}runEuclideanAlgorithm(h,g,b){if(h.getDegree()<g.getDegree()){const Me=h;h=g,g=Me}const S=this.field;let A=h,I=g,R=S.getZero(),V=S.getOne();for(;I.getDegree()>=(b/2|0);){let Me=A,qe=R;if(A=I,R=V,A.isZero())throw new Pt("r_{i-1} was zero");I=Me;let $e=S.getZero();const Xe=A.getCoefficient(A.getDegree()),ct=S.inverse(Xe);for(;I.getDegree()>=A.getDegree()&&!I.isZero();){const Tt=I.getDegree()-A.getDegree(),_t=S.multiply(I.getCoefficient(I.getDegree()),ct);$e=$e.addOrSubtract(S.buildMonomial(Tt,_t)),I=I.addOrSubtract(A.multiplyByMonomial(Tt,_t))}if(V=$e.multiply(R).addOrSubtract(qe),I.getDegree()>=A.getDegree())throw new Oe("Division algorithm failed to reduce polynomial?")}const te=V.getCoefficient(0);if(te===0)throw new Pt("sigmaTilde(0) was zero");const ue=S.inverse(te),ve=V.multiplyScalar(ue),Ne=I.multiplyScalar(ue);return[ve,Ne]}findErrorLocations(h){const g=h.getDegree();if(g===1)return Int32Array.from([h.getCoefficient(1)]);const b=new Int32Array(g);let S=0;const A=this.field;for(let I=1;I<A.getSize()&&S<g;I++)h.evaluateAt(I)===0&&(b[S]=A.inverse(I),S++);if(S!==g)throw new Pt("Error locator degree does not match number of roots");return b}findErrorMagnitudes(h,g){const b=g.length,S=new Int32Array(b),A=this.field;for(let I=0;I<b;I++){const R=A.inverse(g[I]);let V=1;for(let te=0;te<b;te++)if(I!==te){const ue=A.multiply(g[te],R),ve=(ue&1)===0?ue|1:ue&-2;V=A.multiply(V,ve)}S[I]=A.multiply(h.evaluateAt(R),A.inverse(V)),A.getGeneratorBase()!==0&&(S[I]=A.multiply(S[I],R))}return S}}var Wt;(function(je){je[je.UPPER=0]="UPPER",je[je.LOWER=1]="LOWER",je[je.MIXED=2]="MIXED",je[je.DIGIT=3]="DIGIT",je[je.PUNCT=4]="PUNCT",je[je.BINARY=5]="BINARY"})(Wt||(Wt={}));class Bt{decode(h){this.ddata=h;let g=h.getBits(),b=this.extractBits(g),S=this.correctBits(b),A=Bt.convertBoolArrayToByteArray(S),I=Bt.getEncodedData(S),R=new ke(A,I,null,null);return R.setNumBits(S.length),R}static highLevelDecode(h){return this.getEncodedData(h)}static getEncodedData(h){let g=h.length,b=Wt.UPPER,S=Wt.UPPER,A="",I=0;for(;I<g;)if(S===Wt.BINARY){if(g-I<5)break;let R=Bt.readCode(h,I,5);if(I+=5,R===0){if(g-I<11)break;R=Bt.readCode(h,I,11)+31,I+=11}for(let V=0;V<R;V++){if(g-I<8){I=g;break}const te=Bt.readCode(h,I,8);A+=Z.castAsNonUtf8Char(te),I+=8}S=b}else{let R=S===Wt.DIGIT?4:5;if(g-I<R)break;let V=Bt.readCode(h,I,R);I+=R;let te=Bt.getCharacter(S,V);te.startsWith("CTRL_")?(b=S,S=Bt.getTable(te.charAt(5)),te.charAt(6)==="L"&&(b=S)):(A+=te,S=b)}return A}static getTable(h){switch(h){case"L":return Wt.LOWER;case"P":return Wt.PUNCT;case"M":return Wt.MIXED;case"D":return Wt.DIGIT;case"B":return Wt.BINARY;default:return Wt.UPPER}}static getCharacter(h,g){switch(h){case Wt.UPPER:return Bt.UPPER_TABLE[g];case Wt.LOWER:return Bt.LOWER_TABLE[g];case Wt.MIXED:return Bt.MIXED_TABLE[g];case Wt.PUNCT:return Bt.PUNCT_TABLE[g];case Wt.DIGIT:return Bt.DIGIT_TABLE[g];default:throw new Oe("Bad table")}}correctBits(h){let g,b;this.ddata.getNbLayers()<=2?(b=6,g=vt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(b=8,g=vt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(b=10,g=vt.AZTEC_DATA_10):(b=12,g=vt.AZTEC_DATA_12);let S=this.ddata.getNbDatablocks(),A=h.length/b;if(A<S)throw new W;let I=h.length%b,R=new Int32Array(A);for(let Ne=0;Ne<A;Ne++,I+=b)R[Ne]=Bt.readCode(h,I,b);try{new at(g).decode(R,A-S)}catch(Ne){throw new W(Ne)}let V=(1<<b)-1,te=0;for(let Ne=0;Ne<S;Ne++){let Me=R[Ne];if(Me===0||Me===V)throw new W;(Me===1||Me===V-1)&&te++}let ue=new Array(S*b-te),ve=0;for(let Ne=0;Ne<S;Ne++){let Me=R[Ne];if(Me===1||Me===V-1)ue.fill(Me>1,ve,ve+b-1),ve+=b-1;else for(let qe=b-1;qe>=0;--qe)ue[ve++]=(Me&1<<qe)!==0}return ue}extractBits(h){let g=this.ddata.isCompact(),b=this.ddata.getNbLayers(),S=(g?11:14)+b*4,A=new Int32Array(S),I=new Array(this.totalBitsInLayer(b,g));if(g)for(let R=0;R<A.length;R++)A[R]=R;else{let R=S+1+2*D.truncDivision(D.truncDivision(S,2)-1,15),V=S/2,te=D.truncDivision(R,2);for(let ue=0;ue<V;ue++){let ve=ue+D.truncDivision(ue,15);A[V-ue-1]=te-ve-1,A[V+ue]=te+ve+1}}for(let R=0,V=0;R<b;R++){let te=(b-R)*4+(g?9:12),ue=R*2,ve=S-1-ue;for(let Ne=0;Ne<te;Ne++){let Me=Ne*2;for(let qe=0;qe<2;qe++)I[V+Me+qe]=h.get(A[ue+qe],A[ue+Ne]),I[V+2*te+Me+qe]=h.get(A[ue+Ne],A[ve-qe]),I[V+4*te+Me+qe]=h.get(A[ve-qe],A[ve-Ne]),I[V+6*te+Me+qe]=h.get(A[ve-Ne],A[ue+qe])}V+=te*8}return I}static readCode(h,g,b){let S=0;for(let A=g;A<g+b;A++)S<<=1,h[A]&&(S|=1);return S}static readByte(h,g){let b=h.length-g;return b>=8?Bt.readCode(h,g,8):Bt.readCode(h,g,b)<<8-b}static convertBoolArrayToByteArray(h){let g=new Uint8Array((h.length+7)/8);for(let b=0;b<g.length;b++)g[b]=Bt.readByte(h,8*b);return g}totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}Bt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Bt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Bt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Bt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Bt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class yt{constructor(){}static round(h){return h===NaN?0:h<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:h>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:h+(h<0?-.5:.5)|0}static distance(h,g,b,S){const A=h-b,I=g-S;return Math.sqrt(A*A+I*I)}static sum(h){let g=0;for(let b=0,S=h.length;b!==S;b++){const A=h[b];g+=A}return g}}class rr{static floatToIntBits(h){return h}}rr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class St{constructor(h,g){this.x=h,this.y=g}getX(){return this.x}getY(){return this.y}equals(h){if(h instanceof St){const g=h;return this.x===g.x&&this.y===g.y}return!1}hashCode(){return 31*rr.floatToIntBits(this.x)+rr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(h){const g=this.distance(h[0],h[1]),b=this.distance(h[1],h[2]),S=this.distance(h[0],h[2]);let A,I,R;if(b>=g&&b>=S?(I=h[0],A=h[1],R=h[2]):S>=b&&S>=g?(I=h[1],A=h[0],R=h[2]):(I=h[2],A=h[0],R=h[1]),this.crossProductZ(A,I,R)<0){const V=A;A=R,R=V}h[0]=A,h[1]=I,h[2]=R}static distance(h,g){return yt.distance(h.x,h.y,g.x,g.y)}static crossProductZ(h,g,b){const S=g.x,A=g.y;return(b.x-S)*(h.y-A)-(b.y-A)*(h.x-S)}}class xr{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class hr extends xr{constructor(h,g,b,S,A){super(h,g),this.compact=b,this.nbDatablocks=S,this.nbLayers=A}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class zr{constructor(h,g,b,S){this.image=h,this.height=h.getHeight(),this.width=h.getWidth(),g==null&&(g=zr.INIT_SIZE),b==null&&(b=h.getWidth()/2|0),S==null&&(S=h.getHeight()/2|0);const A=g/2|0;if(this.leftInit=b-A,this.rightInit=b+A,this.upInit=S-A,this.downInit=S+A,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ce}detect(){let h=this.leftInit,g=this.rightInit,b=this.upInit,S=this.downInit,A=!1,I=!0,R=!1,V=!1,te=!1,ue=!1,ve=!1;const Ne=this.width,Me=this.height;for(;I;){I=!1;let qe=!0;for(;(qe||!V)&&g<Ne;)qe=this.containsBlackPoint(b,S,g,!1),qe?(g++,I=!0,V=!0):V||g++;if(g>=Ne){A=!0;break}let $e=!0;for(;($e||!te)&&S<Me;)$e=this.containsBlackPoint(h,g,S,!0),$e?(S++,I=!0,te=!0):te||S++;if(S>=Me){A=!0;break}let Xe=!0;for(;(Xe||!ue)&&h>=0;)Xe=this.containsBlackPoint(b,S,h,!1),Xe?(h--,I=!0,ue=!0):ue||h--;if(h<0){A=!0;break}let ct=!0;for(;(ct||!ve)&&b>=0;)ct=this.containsBlackPoint(h,g,b,!0),ct?(b--,I=!0,ve=!0):ve||b--;if(b<0){A=!0;break}I&&(R=!0)}if(!A&&R){const qe=g-h;let $e=null;for(let _t=1;$e===null&&_t<qe;_t++)$e=this.getBlackPointOnSegment(h,S-_t,h+_t,S);if($e==null)throw new ce;let Xe=null;for(let _t=1;Xe===null&&_t<qe;_t++)Xe=this.getBlackPointOnSegment(h,b+_t,h+_t,b);if(Xe==null)throw new ce;let ct=null;for(let _t=1;ct===null&&_t<qe;_t++)ct=this.getBlackPointOnSegment(g,b+_t,g-_t,b);if(ct==null)throw new ce;let Tt=null;for(let _t=1;Tt===null&&_t<qe;_t++)Tt=this.getBlackPointOnSegment(g,S-_t,g-_t,S);if(Tt==null)throw new ce;return this.centerEdges(Tt,$e,ct,Xe)}else throw new ce}getBlackPointOnSegment(h,g,b,S){const A=yt.round(yt.distance(h,g,b,S)),I=(b-h)/A,R=(S-g)/A,V=this.image;for(let te=0;te<A;te++){const ue=yt.round(h+te*I),ve=yt.round(g+te*R);if(V.get(ue,ve))return new St(ue,ve)}return null}centerEdges(h,g,b,S){const A=h.getX(),I=h.getY(),R=g.getX(),V=g.getY(),te=b.getX(),ue=b.getY(),ve=S.getX(),Ne=S.getY(),Me=zr.CORR;return A<this.width/2?[new St(ve-Me,Ne+Me),new St(R+Me,V+Me),new St(te-Me,ue-Me),new St(A+Me,I-Me)]:[new St(ve+Me,Ne+Me),new St(R+Me,V-Me),new St(te-Me,ue+Me),new St(A-Me,I-Me)]}containsBlackPoint(h,g,b,S){const A=this.image;if(S){for(let I=h;I<=g;I++)if(A.get(I,b))return!0}else for(let I=h;I<=g;I++)if(A.get(b,I))return!0;return!1}}zr.INIT_SIZE=10,zr.CORR=1;class yn{static checkAndNudgePoints(h,g){const b=h.getWidth(),S=h.getHeight();let A=!0;for(let I=0;I<g.length&&A;I+=2){const R=Math.floor(g[I]),V=Math.floor(g[I+1]);if(R<-1||R>b||V<-1||V>S)throw new ce;A=!1,R===-1?(g[I]=0,A=!0):R===b&&(g[I]=b-1,A=!0),V===-1?(g[I+1]=0,A=!0):V===S&&(g[I+1]=S-1,A=!0)}A=!0;for(let I=g.length-2;I>=0&&A;I-=2){const R=Math.floor(g[I]),V=Math.floor(g[I+1]);if(R<-1||R>b||V<-1||V>S)throw new ce;A=!1,R===-1?(g[I]=0,A=!0):R===b&&(g[I]=b-1,A=!0),V===-1?(g[I+1]=0,A=!0):V===S&&(g[I+1]=S-1,A=!0)}}}class Ir{constructor(h,g,b,S,A,I,R,V,te){this.a11=h,this.a21=g,this.a31=b,this.a12=S,this.a22=A,this.a32=I,this.a13=R,this.a23=V,this.a33=te}static quadrilateralToQuadrilateral(h,g,b,S,A,I,R,V,te,ue,ve,Ne,Me,qe,$e,Xe){const ct=Ir.quadrilateralToSquare(h,g,b,S,A,I,R,V);return Ir.squareToQuadrilateral(te,ue,ve,Ne,Me,qe,$e,Xe).times(ct)}transformPoints(h){const g=h.length,b=this.a11,S=this.a12,A=this.a13,I=this.a21,R=this.a22,V=this.a23,te=this.a31,ue=this.a32,ve=this.a33;for(let Ne=0;Ne<g;Ne+=2){const Me=h[Ne],qe=h[Ne+1],$e=A*Me+V*qe+ve;h[Ne]=(b*Me+I*qe+te)/$e,h[Ne+1]=(S*Me+R*qe+ue)/$e}}transformPointsWithValues(h,g){const b=this.a11,S=this.a12,A=this.a13,I=this.a21,R=this.a22,V=this.a23,te=this.a31,ue=this.a32,ve=this.a33,Ne=h.length;for(let Me=0;Me<Ne;Me++){const qe=h[Me],$e=g[Me],Xe=A*qe+V*$e+ve;h[Me]=(b*qe+I*$e+te)/Xe,g[Me]=(S*qe+R*$e+ue)/Xe}}static squareToQuadrilateral(h,g,b,S,A,I,R,V){const te=h-b+A-R,ue=g-S+I-V;if(te===0&&ue===0)return new Ir(b-h,A-b,h,S-g,I-S,g,0,0,1);{const ve=b-A,Ne=R-A,Me=S-I,qe=V-I,$e=ve*qe-Ne*Me,Xe=(te*qe-Ne*ue)/$e,ct=(ve*ue-te*Me)/$e;return new Ir(b-h+Xe*b,R-h+ct*R,h,S-g+Xe*S,V-g+ct*V,g,Xe,ct,1)}}static quadrilateralToSquare(h,g,b,S,A,I,R,V){return Ir.squareToQuadrilateral(h,g,b,S,A,I,R,V).buildAdjoint()}buildAdjoint(){return new Ir(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(h){return new Ir(this.a11*h.a11+this.a21*h.a12+this.a31*h.a13,this.a11*h.a21+this.a21*h.a22+this.a31*h.a23,this.a11*h.a31+this.a21*h.a32+this.a31*h.a33,this.a12*h.a11+this.a22*h.a12+this.a32*h.a13,this.a12*h.a21+this.a22*h.a22+this.a32*h.a23,this.a12*h.a31+this.a22*h.a32+this.a32*h.a33,this.a13*h.a11+this.a23*h.a12+this.a33*h.a13,this.a13*h.a21+this.a23*h.a22+this.a33*h.a23,this.a13*h.a31+this.a23*h.a32+this.a33*h.a33)}}class xn extends yn{sampleGrid(h,g,b,S,A,I,R,V,te,ue,ve,Ne,Me,qe,$e,Xe,ct,Tt,_t){const At=Ir.quadrilateralToQuadrilateral(S,A,I,R,V,te,ue,ve,Ne,Me,qe,$e,Xe,ct,Tt,_t);return this.sampleGridWithTransform(h,g,b,At)}sampleGridWithTransform(h,g,b,S){if(g<=0||b<=0)throw new ce;const A=new me(g,b),I=new Float32Array(2*g);for(let R=0;R<b;R++){const V=I.length,te=R+.5;for(let ue=0;ue<V;ue+=2)I[ue]=ue/2+.5,I[ue+1]=te;S.transformPoints(I),yn.checkAndNudgePoints(h,I);try{for(let ue=0;ue<V;ue+=2)h.get(Math.floor(I[ue]),Math.floor(I[ue+1]))&&A.set(ue/2,R)}catch{throw new ce}}return A}}class Yr{static setGridSampler(h){Yr.gridSampler=h}static getInstance(){return Yr.gridSampler}}Yr.gridSampler=new xn;class tr{constructor(h,g){this.x=h,this.y=g}toResultPoint(){return new St(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class tn{constructor(h){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=h}detect(){return this.detectMirror(!1)}detectMirror(h){let g=this.getMatrixCenter(),b=this.getBullsEyeCorners(g);if(h){let I=b[0];b[0]=b[2],b[2]=I}this.extractParameters(b);let S=this.sampleGrid(this.image,b[this.shift%4],b[(this.shift+1)%4],b[(this.shift+2)%4],b[(this.shift+3)%4]),A=this.getMatrixCornerPoints(b);return new hr(S,A,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(h){if(!this.isValidPoint(h[0])||!this.isValidPoint(h[1])||!this.isValidPoint(h[2])||!this.isValidPoint(h[3]))throw new ce;let g=2*this.nbCenterLayers,b=new Int32Array([this.sampleLine(h[0],h[1],g),this.sampleLine(h[1],h[2],g),this.sampleLine(h[2],h[3],g),this.sampleLine(h[3],h[0],g)]);this.shift=this.getRotation(b,g);let S=0;for(let I=0;I<4;I++){let R=b[(this.shift+I)%4];this.compact?(S<<=7,S+=R>>1&127):(S<<=10,S+=(R>>2&992)+(R>>1&31))}let A=this.getCorrectedParameterData(S,this.compact);this.compact?(this.nbLayers=(A>>6)+1,this.nbDataBlocks=(A&63)+1):(this.nbLayers=(A>>11)+1,this.nbDataBlocks=(A&2047)+1)}getRotation(h,g){let b=0;h.forEach((S,A,I)=>{let R=(S>>g-2<<1)+(S&1);b=(b<<3)+R}),b=((b&1)<<11)+(b>>1);for(let S=0;S<4;S++)if(D.bitCount(b^this.EXPECTED_CORNER_BITS[S])<=2)return S;throw new ce}getCorrectedParameterData(h,g){let b,S;g?(b=7,S=2):(b=10,S=4);let A=b-S,I=new Int32Array(b);for(let V=b-1;V>=0;--V)I[V]=h&15,h>>=4;try{new at(vt.AZTEC_PARAM).decode(I,A)}catch{throw new ce}let R=0;for(let V=0;V<S;V++)R=(R<<4)+I[V];return R}getBullsEyeCorners(h){let g=h,b=h,S=h,A=h,I=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ve=this.getFirstDifferent(g,I,1,-1),Ne=this.getFirstDifferent(b,I,1,1),Me=this.getFirstDifferent(S,I,-1,1),qe=this.getFirstDifferent(A,I,-1,-1);if(this.nbCenterLayers>2){let $e=this.distancePoint(qe,ve)*this.nbCenterLayers/(this.distancePoint(A,g)*(this.nbCenterLayers+2));if($e<.75||$e>1.25||!this.isWhiteOrBlackRectangle(ve,Ne,Me,qe))break}g=ve,b=Ne,S=Me,A=qe,I=!I}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ce;this.compact=this.nbCenterLayers===5;let R=new St(g.getX()+.5,g.getY()-.5),V=new St(b.getX()+.5,b.getY()+.5),te=new St(S.getX()-.5,S.getY()+.5),ue=new St(A.getX()-.5,A.getY()-.5);return this.expandSquare([R,V,te,ue],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let h,g,b,S;try{let R=new zr(this.image).detect();h=R[0],g=R[1],b=R[2],S=R[3]}catch{let V=this.image.getWidth()/2,te=this.image.getHeight()/2;h=this.getFirstDifferent(new tr(V+7,te-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new tr(V+7,te+7),!1,1,1).toResultPoint(),b=this.getFirstDifferent(new tr(V-7,te+7),!1,-1,1).toResultPoint(),S=this.getFirstDifferent(new tr(V-7,te-7),!1,-1,-1).toResultPoint()}let A=yt.round((h.getX()+S.getX()+g.getX()+b.getX())/4),I=yt.round((h.getY()+S.getY()+g.getY()+b.getY())/4);try{let R=new zr(this.image,15,A,I).detect();h=R[0],g=R[1],b=R[2],S=R[3]}catch{h=this.getFirstDifferent(new tr(A+7,I-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new tr(A+7,I+7),!1,1,1).toResultPoint(),b=this.getFirstDifferent(new tr(A-7,I+7),!1,-1,1).toResultPoint(),S=this.getFirstDifferent(new tr(A-7,I-7),!1,-1,-1).toResultPoint()}return A=yt.round((h.getX()+S.getX()+g.getX()+b.getX())/4),I=yt.round((h.getY()+S.getY()+g.getY()+b.getY())/4),new tr(A,I)}getMatrixCornerPoints(h){return this.expandSquare(h,2*this.nbCenterLayers,this.getDimension())}sampleGrid(h,g,b,S,A){let I=Yr.getInstance(),R=this.getDimension(),V=R/2-this.nbCenterLayers,te=R/2+this.nbCenterLayers;return I.sampleGrid(h,R,R,V,V,te,V,te,te,V,te,g.getX(),g.getY(),b.getX(),b.getY(),S.getX(),S.getY(),A.getX(),A.getY())}sampleLine(h,g,b){let S=0,A=this.distanceResultPoint(h,g),I=A/b,R=h.getX(),V=h.getY(),te=I*(g.getX()-h.getX())/A,ue=I*(g.getY()-h.getY())/A;for(let ve=0;ve<b;ve++)this.image.get(yt.round(R+ve*te),yt.round(V+ve*ue))&&(S|=1<<b-ve-1);return S}isWhiteOrBlackRectangle(h,g,b,S){let A=3;h=new tr(h.getX()-A,h.getY()+A),g=new tr(g.getX()-A,g.getY()-A),b=new tr(b.getX()+A,b.getY()-A),S=new tr(S.getX()+A,S.getY()+A);let I=this.getColor(S,h);if(I===0)return!1;let R=this.getColor(h,g);return R!==I||(R=this.getColor(g,b),R!==I)?!1:(R=this.getColor(b,S),R===I)}getColor(h,g){let b=this.distancePoint(h,g),S=(g.getX()-h.getX())/b,A=(g.getY()-h.getY())/b,I=0,R=h.getX(),V=h.getY(),te=this.image.get(h.getX(),h.getY()),ue=Math.ceil(b);for(let Ne=0;Ne<ue;Ne++)R+=S,V+=A,this.image.get(yt.round(R),yt.round(V))!==te&&I++;let ve=I/b;return ve>.1&&ve<.9?0:ve<=.1===te?1:-1}getFirstDifferent(h,g,b,S){let A=h.getX()+b,I=h.getY()+S;for(;this.isValid(A,I)&&this.image.get(A,I)===g;)A+=b,I+=S;for(A-=b,I-=S;this.isValid(A,I)&&this.image.get(A,I)===g;)A+=b;for(A-=b;this.isValid(A,I)&&this.image.get(A,I)===g;)I+=S;return I-=S,new tr(A,I)}expandSquare(h,g,b){let S=b/(2*g),A=h[0].getX()-h[2].getX(),I=h[0].getY()-h[2].getY(),R=(h[0].getX()+h[2].getX())/2,V=(h[0].getY()+h[2].getY())/2,te=new St(R+S*A,V+S*I),ue=new St(R-S*A,V-S*I);A=h[1].getX()-h[3].getX(),I=h[1].getY()-h[3].getY(),R=(h[1].getX()+h[3].getX())/2,V=(h[1].getY()+h[3].getY())/2;let ve=new St(R+S*A,V+S*I),Ne=new St(R-S*A,V-S*I);return[te,ve,ue,Ne]}isValid(h,g){return h>=0&&h<this.image.getWidth()&&g>0&&g<this.image.getHeight()}isValidPoint(h){let g=yt.round(h.getX()),b=yt.round(h.getY());return this.isValid(g,b)}distancePoint(h,g){return yt.distance(h.getX(),h.getY(),g.getX(),g.getY())}distanceResultPoint(h,g){return yt.distance(h.getX(),h.getY(),g.getX(),g.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(D.truncDivision(this.nbLayers-4,8)+1)+15}}class fr{decode(h,g=null){let b=null,S=new tn(h.getBlackMatrix()),A=null,I=null;try{let ue=S.detectMirror(!1);A=ue.getPoints(),this.reportFoundResultPoints(g,A),I=new Bt().decode(ue)}catch(ue){b=ue}if(I==null)try{let ue=S.detectMirror(!0);A=ue.getPoints(),this.reportFoundResultPoints(g,A),I=new Bt().decode(ue)}catch(ue){throw b??ue}let R=new H(I.getText(),I.getRawBytes(),I.getNumBits(),A,ge.AZTEC,C.currentTimeMillis()),V=I.getByteSegments();V!=null&&R.putMetadata(Le.BYTE_SEGMENTS,V);let te=I.getECLevel();return te!=null&&R.putMetadata(Le.ERROR_CORRECTION_LEVEL,te),R}reportFoundResultPoints(h,g){if(h!=null){let b=h.get(q.NEED_RESULT_POINT_CALLBACK);b!=null&&g.forEach((S,A,I)=>{b.foundPossibleResultPoint(S)})}}reset(){}}class Ki extends se{constructor(h=500){super(new fr,h)}}class Er{decode(h,g){try{return this.doDecode(h,g)}catch{if(g&&g.get(q.TRY_HARDER)===!0&&h.isRotateSupported()){const A=h.rotateCounterClockwise(),I=this.doDecode(A,g),R=I.getResultMetadata();let V=270;R!==null&&R.get(Le.ORIENTATION)===!0&&(V=V+R.get(Le.ORIENTATION)%360),I.putMetadata(Le.ORIENTATION,V);const te=I.getResultPoints();if(te!==null){const ue=A.getHeight();for(let ve=0;ve<te.length;ve++)te[ve]=new St(ue-te[ve].getY()-1,te[ve].getX())}return I}else throw new ce}}reset(){}doDecode(h,g){const b=h.getWidth(),S=h.getHeight();let A=new M(b);const I=g&&g.get(q.TRY_HARDER)===!0,R=Math.max(1,S>>(I?8:5));let V;I?V=S:V=15;const te=Math.trunc(S/2);for(let ue=0;ue<V;ue++){const ve=Math.trunc((ue+1)/2),Ne=(ue&1)===0,Me=te+R*(Ne?ve:-ve);if(Me<0||Me>=S)break;try{A=h.getBlackRow(Me,A)}catch{continue}for(let qe=0;qe<2;qe++){if(qe===1&&(A.reverse(),g&&g.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const $e=new Map;g.forEach((Xe,ct)=>$e.set(ct,Xe)),$e.delete(q.NEED_RESULT_POINT_CALLBACK),g=$e}try{const $e=this.decodeRow(Me,A,g);if(qe===1){$e.putMetadata(Le.ORIENTATION,180);const Xe=$e.getResultPoints();Xe!==null&&(Xe[0]=new St(b-Xe[0].getX()-1,Xe[0].getY()),Xe[1]=new St(b-Xe[1].getX()-1,Xe[1].getY()))}return $e}catch{}}}throw new ce}static recordPattern(h,g,b){const S=b.length;for(let te=0;te<S;te++)b[te]=0;const A=h.getSize();if(g>=A)throw new ce;let I=!h.get(g),R=0,V=g;for(;V<A;){if(h.get(V)!==I)b[R]++;else{if(++R===S)break;b[R]=1,I=!I}V++}if(!(R===S||R===S-1&&V===A))throw new ce}static recordPatternInReverse(h,g,b){let S=b.length,A=h.get(g);for(;g>0&&S>=0;)h.get(--g)!==A&&(S--,A=!A);if(S>=0)throw new ce;Er.recordPattern(h,g+1,b)}static patternMatchVariance(h,g,b){const S=h.length;let A=0,I=0;for(let te=0;te<S;te++)A+=h[te],I+=g[te];if(A<I)return Number.POSITIVE_INFINITY;const R=A/I;b*=R;let V=0;for(let te=0;te<S;te++){const ue=h[te],ve=g[te]*R,Ne=ue>ve?ue-ve:ve-ue;if(Ne>b)return Number.POSITIVE_INFINITY;V+=Ne}return V/A}}class wt extends Er{static findStartPattern(h){const g=h.getSize(),b=h.getNextSet(0);let S=0,A=Int32Array.from([0,0,0,0,0,0]),I=b,R=!1;const V=6;for(let te=b;te<g;te++)if(h.get(te)!==R)A[S]++;else{if(S===V-1){let ue=wt.MAX_AVG_VARIANCE,ve=-1;for(let Ne=wt.CODE_START_A;Ne<=wt.CODE_START_C;Ne++){const Me=Er.patternMatchVariance(A,wt.CODE_PATTERNS[Ne],wt.MAX_INDIVIDUAL_VARIANCE);Me<ue&&(ue=Me,ve=Ne)}if(ve>=0&&h.isRange(Math.max(0,I-(te-I)/2),I,!1))return Int32Array.from([I,te,ve]);I+=A[0]+A[1],A=A.slice(2,A.length-1),A[S-1]=0,A[S]=0,S--}else S++;A[S]=1,R=!R}throw new ce}static decodeCode(h,g,b){Er.recordPattern(h,b,g);let S=wt.MAX_AVG_VARIANCE,A=-1;for(let I=0;I<wt.CODE_PATTERNS.length;I++){const R=wt.CODE_PATTERNS[I],V=this.patternMatchVariance(g,R,wt.MAX_INDIVIDUAL_VARIANCE);V<S&&(S=V,A=I)}if(A>=0)return A;throw new ce}decodeRow(h,g,b){const S=b&&b.get(q.ASSUME_GS1)===!0,A=wt.findStartPattern(g),I=A[2];let R=0;const V=new Uint8Array(20);V[R++]=I;let te;switch(I){case wt.CODE_START_A:te=wt.CODE_CODE_A;break;case wt.CODE_START_B:te=wt.CODE_CODE_B;break;case wt.CODE_START_C:te=wt.CODE_CODE_C;break;default:throw new W}let ue=!1,ve=!1,Ne="",Me=A[0],qe=A[1];const $e=Int32Array.from([0,0,0,0,0,0]);let Xe=0,ct=0,Tt=I,_t=0,At=!0,Tr=!1,qr=!1;for(;!ue;){const Oo=ve;switch(ve=!1,Xe=ct,ct=wt.decodeCode(g,$e,qe),V[R++]=ct,ct!==wt.CODE_STOP&&(At=!0),ct!==wt.CODE_STOP&&(_t++,Tt+=_t*ct),Me=qe,qe+=$e.reduce((ju,ko)=>ju+ko,0),ct){case wt.CODE_START_A:case wt.CODE_START_B:case wt.CODE_START_C:throw new W}switch(te){case wt.CODE_CODE_A:if(ct<64)qr===Tr?Ne+=String.fromCharCode(32+ct):Ne+=String.fromCharCode(32+ct+128),qr=!1;else if(ct<96)qr===Tr?Ne+=String.fromCharCode(ct-64):Ne+=String.fromCharCode(ct+64),qr=!1;else switch(ct!==wt.CODE_STOP&&(At=!1),ct){case wt.CODE_FNC_1:S&&(Ne.length===0?Ne+="]C1":Ne+="");break;case wt.CODE_FNC_2:case wt.CODE_FNC_3:break;case wt.CODE_FNC_4_A:!Tr&&qr?(Tr=!0,qr=!1):Tr&&qr?(Tr=!1,qr=!1):qr=!0;break;case wt.CODE_SHIFT:ve=!0,te=wt.CODE_CODE_B;break;case wt.CODE_CODE_B:te=wt.CODE_CODE_B;break;case wt.CODE_CODE_C:te=wt.CODE_CODE_C;break;case wt.CODE_STOP:ue=!0;break}break;case wt.CODE_CODE_B:if(ct<96)qr===Tr?Ne+=String.fromCharCode(32+ct):Ne+=String.fromCharCode(32+ct+128),qr=!1;else switch(ct!==wt.CODE_STOP&&(At=!1),ct){case wt.CODE_FNC_1:S&&(Ne.length===0?Ne+="]C1":Ne+="");break;case wt.CODE_FNC_2:case wt.CODE_FNC_3:break;case wt.CODE_FNC_4_B:!Tr&&qr?(Tr=!0,qr=!1):Tr&&qr?(Tr=!1,qr=!1):qr=!0;break;case wt.CODE_SHIFT:ve=!0,te=wt.CODE_CODE_A;break;case wt.CODE_CODE_A:te=wt.CODE_CODE_A;break;case wt.CODE_CODE_C:te=wt.CODE_CODE_C;break;case wt.CODE_STOP:ue=!0;break}break;case wt.CODE_CODE_C:if(ct<100)ct<10&&(Ne+="0"),Ne+=ct;else switch(ct!==wt.CODE_STOP&&(At=!1),ct){case wt.CODE_FNC_1:S&&(Ne.length===0?Ne+="]C1":Ne+="");break;case wt.CODE_CODE_A:te=wt.CODE_CODE_A;break;case wt.CODE_CODE_B:te=wt.CODE_CODE_B;break;case wt.CODE_STOP:ue=!0;break}break}Oo&&(te=te===wt.CODE_CODE_A?wt.CODE_CODE_B:wt.CODE_CODE_A)}const Mn=qe-Me;if(qe=g.getNextUnset(qe),!g.isRange(qe,Math.min(g.getSize(),qe+(qe-Me)/2),!1))throw new ce;if(Tt-=_t*Xe,Tt%103!==Xe)throw new v;const ua=Ne.length;if(ua===0)throw new ce;ua>0&&At&&(te===wt.CODE_CODE_C?Ne=Ne.substring(0,ua-2):Ne=Ne.substring(0,ua-1));const Pa=(A[1]+A[0])/2,Un=Me+Mn/2,Ra=V.length,Ms=new Uint8Array(Ra);for(let Oo=0;Oo<Ra;Oo++)Ms[Oo]=V[Oo];const xc=[new St(Pa,h),new St(Un,h)];return new H(Ne,Ms,0,xc,ge.CODE_128,new Date().getTime())}}wt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],wt.MAX_AVG_VARIANCE=.25,wt.MAX_INDIVIDUAL_VARIANCE=.7,wt.CODE_SHIFT=98,wt.CODE_CODE_C=99,wt.CODE_CODE_B=100,wt.CODE_CODE_A=101,wt.CODE_FNC_1=102,wt.CODE_FNC_2=97,wt.CODE_FNC_3=96,wt.CODE_FNC_4_A=101,wt.CODE_FNC_4_B=100,wt.CODE_START_A=103,wt.CODE_START_B=104,wt.CODE_START_C=105,wt.CODE_STOP=106;class sr extends Er{constructor(h=!1,g=!1){super(),this.usingCheckDigit=h,this.extendedMode=g,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(h,g,b){let S=this.counters;S.fill(0),this.decodeRowResult="";let A=sr.findAsteriskPattern(g,S),I=g.getNextSet(A[1]),R=g.getSize(),V,te;do{sr.recordPattern(g,I,S);let $e=sr.toNarrowWidePattern(S);if($e<0)throw new ce;V=sr.patternToChar($e),this.decodeRowResult+=V,te=I;for(let Xe of S)I+=Xe;I=g.getNextSet(I)}while(V!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let ue=0;for(let $e of S)ue+=$e;let ve=I-te-ue;if(I!==R&&ve*2<ue)throw new ce;if(this.usingCheckDigit){let $e=this.decodeRowResult.length-1,Xe=0;for(let ct=0;ct<$e;ct++)Xe+=sr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ct));if(this.decodeRowResult.charAt($e)!==sr.ALPHABET_STRING.charAt(Xe%43))throw new v;this.decodeRowResult=this.decodeRowResult.substring(0,$e)}if(this.decodeRowResult.length===0)throw new ce;let Ne;this.extendedMode?Ne=sr.decodeExtended(this.decodeRowResult):Ne=this.decodeRowResult;let Me=(A[1]+A[0])/2,qe=te+ue/2;return new H(Ne,null,0,[new St(Me,h),new St(qe,h)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(h,g){let b=h.getSize(),S=h.getNextSet(0),A=0,I=S,R=!1,V=g.length;for(let te=S;te<b;te++)if(h.get(te)!==R)g[A]++;else{if(A===V-1){if(this.toNarrowWidePattern(g)===sr.ASTERISK_ENCODING&&h.isRange(Math.max(0,I-Math.floor((te-I)/2)),I,!1))return[I,te];I+=g[0]+g[1],g.copyWithin(0,2,2+A-1),g[A-1]=0,g[A]=0,A--}else A++;g[A]=1,R=!R}throw new ce}static toNarrowWidePattern(h){let g=h.length,b=0,S;do{let A=2147483647;for(let V of h)V<A&&V>b&&(A=V);b=A,S=0;let I=0,R=0;for(let V=0;V<g;V++){let te=h[V];te>b&&(R|=1<<g-1-V,S++,I+=te)}if(S===3){for(let V=0;V<g&&S>0;V++){let te=h[V];if(te>b&&(S--,te*2>=I))return-1}return R}}while(S>3);return-1}static patternToChar(h){for(let g=0;g<sr.CHARACTER_ENCODINGS.length;g++)if(sr.CHARACTER_ENCODINGS[g]===h)return sr.ALPHABET_STRING.charAt(g);if(h===sr.ASTERISK_ENCODING)return"*";throw new ce}static decodeExtended(h){let g=h.length,b="";for(let S=0;S<g;S++){let A=h.charAt(S);if(A==="+"||A==="$"||A==="%"||A==="/"){let I=h.charAt(S+1),R="\0";switch(A){case"+":if(I>="A"&&I<="Z")R=String.fromCharCode(I.charCodeAt(0)+32);else throw new W;break;case"$":if(I>="A"&&I<="Z")R=String.fromCharCode(I.charCodeAt(0)-64);else throw new W;break;case"%":if(I>="A"&&I<="E")R=String.fromCharCode(I.charCodeAt(0)-38);else if(I>="F"&&I<="J")R=String.fromCharCode(I.charCodeAt(0)-11);else if(I>="K"&&I<="O")R=String.fromCharCode(I.charCodeAt(0)+16);else if(I>="P"&&I<="T")R=String.fromCharCode(I.charCodeAt(0)+43);else if(I==="U")R="\0";else if(I==="V")R="@";else if(I==="W")R="`";else if(I==="X"||I==="Y"||I==="Z")R="";else throw new W;break;case"/":if(I>="A"&&I<="O")R=String.fromCharCode(I.charCodeAt(0)-32);else if(I==="Z")R=":";else throw new W;break}b+=R,S++}else b+=A}return b}}sr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",sr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],sr.ASTERISK_ENCODING=148;class ur extends Er{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(h,g,b){let S=this.decodeStart(g),A=this.decodeEnd(g),I=new ie;ur.decodeMiddle(g,S[1],A[0],I);let R=I.toString(),V=null;b!=null&&(V=b.get(q.ALLOWED_LENGTHS)),V==null&&(V=ur.DEFAULT_ALLOWED_LENGTHS);let te=R.length,ue=!1,ve=0;for(let qe of V){if(te===qe){ue=!0;break}qe>ve&&(ve=qe)}if(!ue&&te>ve&&(ue=!0),!ue)throw new W;const Ne=[new St(S[1],h),new St(A[0],h)];return new H(R,null,0,Ne,ge.ITF,new Date().getTime())}static decodeMiddle(h,g,b,S){let A=new Int32Array(10),I=new Int32Array(5),R=new Int32Array(5);for(A.fill(0),I.fill(0),R.fill(0);g<b;){Er.recordPattern(h,g,A);for(let te=0;te<5;te++){let ue=2*te;I[te]=A[ue],R[te]=A[ue+1]}let V=ur.decodeDigit(I);S.append(V.toString()),V=this.decodeDigit(R),S.append(V.toString()),A.forEach(function(te){g+=te})}}decodeStart(h){let g=ur.skipWhiteSpace(h),b=ur.findGuardPattern(h,g,ur.START_PATTERN);return this.narrowLineWidth=(b[1]-b[0])/4,this.validateQuietZone(h,b[0]),b}validateQuietZone(h,g){let b=this.narrowLineWidth*10;b=b<g?b:g;for(let S=g-1;b>0&&S>=0&&!h.get(S);S--)b--;if(b!==0)throw new ce}static skipWhiteSpace(h){const g=h.getSize(),b=h.getNextSet(0);if(b===g)throw new ce;return b}decodeEnd(h){h.reverse();try{let g=ur.skipWhiteSpace(h),b;try{b=ur.findGuardPattern(h,g,ur.END_PATTERN_REVERSED[0])}catch(A){A instanceof ce&&(b=ur.findGuardPattern(h,g,ur.END_PATTERN_REVERSED[1]))}this.validateQuietZone(h,b[0]);let S=b[0];return b[0]=h.getSize()-b[1],b[1]=h.getSize()-S,b}finally{h.reverse()}}static findGuardPattern(h,g,b){let S=b.length,A=new Int32Array(S),I=h.getSize(),R=!1,V=0,te=g;A.fill(0);for(let ue=g;ue<I;ue++)if(h.get(ue)!==R)A[V]++;else{if(V===S-1){if(Er.patternMatchVariance(A,b,ur.MAX_INDIVIDUAL_VARIANCE)<ur.MAX_AVG_VARIANCE)return[te,ue];te+=A[0]+A[1],C.arraycopy(A,2,A,0,V-1),A[V-1]=0,A[V]=0,V--}else V++;A[V]=1,R=!R}throw new ce}static decodeDigit(h){let g=ur.MAX_AVG_VARIANCE,b=-1,S=ur.PATTERNS.length;for(let A=0;A<S;A++){let I=ur.PATTERNS[A],R=Er.patternMatchVariance(h,I,ur.MAX_INDIVIDUAL_VARIANCE);R<g?(g=R,b=A):R===g&&(b=-1)}if(b>=0)return b%10;throw new ce}}ur.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ur.MAX_AVG_VARIANCE=.38,ur.MAX_INDIVIDUAL_VARIANCE=.5,ur.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ur.START_PATTERN=Int32Array.from([1,1,1,1]),ur.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Yt extends Er{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(h){let g=!1,b,S=0,A=Int32Array.from([0,0,0]);for(;!g;){A=Int32Array.from([0,0,0]),b=Yt.findGuardPattern(h,S,!1,this.START_END_PATTERN,A);let I=b[0];S=b[1];let R=I-(S-I);R>=0&&(g=h.isRange(R,I,!1))}return b}static checkChecksum(h){return Yt.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let b=parseInt(h.charAt(g-1),10);return Yt.getStandardUPCEANChecksum(h.substring(0,g-1))===b}static getStandardUPCEANChecksum(h){let g=h.length,b=0;for(let S=g-1;S>=0;S-=2){let A=h.charAt(S).charCodeAt(0)-48;if(A<0||A>9)throw new W;b+=A}b*=3;for(let S=g-2;S>=0;S-=2){let A=h.charAt(S).charCodeAt(0)-48;if(A<0||A>9)throw new W;b+=A}return(1e3-b)%10}static decodeEnd(h,g){return Yt.findGuardPattern(h,g,!1,Yt.START_END_PATTERN,new Int32Array(Yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(h,g,b,S){return this.findGuardPattern(h,g,b,S,new Int32Array(S.length))}static findGuardPattern(h,g,b,S,A){let I=h.getSize();g=b?h.getNextUnset(g):h.getNextSet(g);let R=0,V=g,te=S.length,ue=b;for(let ve=g;ve<I;ve++)if(h.get(ve)!==ue)A[R]++;else{if(R===te-1){if(Er.patternMatchVariance(A,S,Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return Int32Array.from([V,ve]);V+=A[0]+A[1];let Ne=A.slice(2,A.length-1);for(let Me=0;Me<R-1;Me++)A[Me]=Ne[Me];A[R-1]=0,A[R]=0,R--}else R++;A[R]=1,ue=!ue}throw new ce}static decodeDigit(h,g,b,S){this.recordPattern(h,b,g);let A=this.MAX_AVG_VARIANCE,I=-1,R=S.length;for(let V=0;V<R;V++){let te=S[V],ue=Er.patternMatchVariance(g,te,Yt.MAX_INDIVIDUAL_VARIANCE);ue<A&&(A=ue,I=V)}if(I>=0)return I;throw new ce}}Yt.MAX_AVG_VARIANCE=.48,Yt.MAX_INDIVIDUAL_VARIANCE=.7,Yt.START_END_PATTERN=Int32Array.from([1,1,1]),Yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Kn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,b){let S=this.decodeRowStringBuffer,A=this.decodeMiddle(g,b,S),I=S.toString(),R=Kn.parseExtensionString(I),V=[new St((b[0]+b[1])/2,h),new St(A,h)],te=new H(I,null,0,V,ge.UPC_EAN_EXTENSION,new Date().getTime());return R!=null&&te.putAllMetadata(R),te}decodeMiddle(h,g,b){let S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let A=h.getSize(),I=g[1],R=0;for(let te=0;te<5&&I<A;te++){let ue=Yt.decodeDigit(h,S,I,Yt.L_AND_G_PATTERNS);b+=String.fromCharCode(48+ue%10);for(let ve of S)I+=ve;ue>=10&&(R|=1<<4-te),te!==4&&(I=h.getNextSet(I),I=h.getNextUnset(I))}if(b.length!==5)throw new ce;let V=this.determineCheckDigit(R);if(Kn.extensionChecksum(b.toString())!==V)throw new ce;return I}static extensionChecksum(h){let g=h.length,b=0;for(let S=g-2;S>=0;S-=2)b+=h.charAt(S).charCodeAt(0)-48;b*=3;for(let S=g-1;S>=0;S-=2)b+=h.charAt(S).charCodeAt(0)-48;return b*=3,b%10}determineCheckDigit(h){for(let g=0;g<10;g++)if(h===this.CHECK_DIGIT_ENCODINGS[g])return g;throw new ce}static parseExtensionString(h){if(h.length!==5)return null;let g=Kn.parseExtension5String(h);return g==null?null:new Map([[Le.SUGGESTED_PRICE,g]])}static parseExtension5String(h){let g;switch(h.charAt(0)){case"0":g="";break;case"5":g="$";break;case"9":switch(h){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}g="";break;default:g="";break}let b=parseInt(h.substring(1)),S=(b/100).toString(),A=b%100,I=A<10?"0"+A:A.toString();return g+S+"."+I}}class Fr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,b){let S=this.decodeRowStringBuffer,A=this.decodeMiddle(g,b,S),I=S.toString(),R=Fr.parseExtensionString(I),V=[new St((b[0]+b[1])/2,h),new St(A,h)],te=new H(I,null,0,V,ge.UPC_EAN_EXTENSION,new Date().getTime());return R!=null&&te.putAllMetadata(R),te}decodeMiddle(h,g,b){let S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let A=h.getSize(),I=g[1],R=0;for(let V=0;V<2&&I<A;V++){let te=Yt.decodeDigit(h,S,I,Yt.L_AND_G_PATTERNS);b+=String.fromCharCode(48+te%10);for(let ue of S)I+=ue;te>=10&&(R|=1<<1-V),V!==1&&(I=h.getNextSet(I),I=h.getNextUnset(I))}if(b.length!==2)throw new ce;if(parseInt(b.toString())%4!==R)throw new ce;return I}static parseExtensionString(h){return h.length!==2?null:new Map([[Le.ISSUE_NUMBER,parseInt(h)]])}}class Gr{static decodeRow(h,g,b){let S=Yt.findGuardPattern(g,b,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Kn().decodeRow(h,g,S)}catch{return new Fr().decodeRow(h,g,S)}}}Gr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Sr extends Yt{constructor(){super(),this.decodeRowStringBuffer="",Sr.L_AND_G_PATTERNS=Sr.L_PATTERNS.map(h=>Int32Array.from(h));for(let h=10;h<20;h++){let g=Sr.L_PATTERNS[h-10],b=new Int32Array(g.length);for(let S=0;S<g.length;S++)b[S]=g[g.length-S-1];Sr.L_AND_G_PATTERNS[h]=b}}decodeRow(h,g,b){let S=Sr.findStartGuardPattern(g),A=b==null?null:b.get(q.NEED_RESULT_POINT_CALLBACK);if(A!=null){const At=new St((S[0]+S[1])/2,h);A.foundPossibleResultPoint(At)}let I=this.decodeMiddle(g,S,this.decodeRowStringBuffer),R=I.rowOffset,V=I.resultString;if(A!=null){const At=new St(R,h);A.foundPossibleResultPoint(At)}let te=this.decodeEnd(g,R);if(A!=null){const At=new St((te[0]+te[1])/2,h);A.foundPossibleResultPoint(At)}let ue=te[1],ve=ue+(ue-te[0]);if(ve>=g.getSize()||!g.isRange(ue,ve,!1))throw new ce;let Ne=V.toString();if(Ne.length<8)throw new W;if(!Sr.checkChecksum(Ne))throw new v;let Me=(S[1]+S[0])/2,qe=(te[1]+te[0])/2,$e=this.getBarcodeFormat(),Xe=[new St(Me,h),new St(qe,h)],ct=new H(Ne,null,0,Xe,$e,new Date().getTime()),Tt=0;try{let At=Gr.decodeRow(h,g,te[1]);ct.putMetadata(Le.UPC_EAN_EXTENSION,At.getText()),ct.putAllMetadata(At.getResultMetadata()),ct.addResultPoints(At.getResultPoints()),Tt=At.getText().length}catch{}let _t=b==null?null:b.get(q.ALLOWED_EAN_EXTENSIONS);if(_t!=null){let At=!1;for(let Tr in _t)if(Tt.toString()===Tr){At=!0;break}if(!At)throw new ce}return ct}decodeEnd(h,g){return Sr.findGuardPattern(h,g,!1,Sr.START_END_PATTERN,new Int32Array(Sr.START_END_PATTERN.length).fill(0))}static checkChecksum(h){return Sr.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let b=parseInt(h.charAt(g-1),10);return Sr.getStandardUPCEANChecksum(h.substring(0,g-1))===b}static getStandardUPCEANChecksum(h){let g=h.length,b=0;for(let S=g-1;S>=0;S-=2){let A=h.charAt(S).charCodeAt(0)-48;if(A<0||A>9)throw new W;b+=A}b*=3;for(let S=g-2;S>=0;S-=2){let A=h.charAt(S).charCodeAt(0)-48;if(A<0||A>9)throw new W;b+=A}return(1e3-b)%10}}class Kr extends Sr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,b){let S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let A=h.getSize(),I=g[1],R=0;for(let te=0;te<6&&I<A;te++){let ue=Sr.decodeDigit(h,S,I,Sr.L_AND_G_PATTERNS);b+=String.fromCharCode(48+ue%10);for(let ve of S)I+=ve;ue>=10&&(R|=1<<5-te)}b=Kr.determineFirstDigit(b,R),I=Sr.findGuardPattern(h,I,!0,Sr.MIDDLE_PATTERN,new Int32Array(Sr.MIDDLE_PATTERN.length).fill(0))[1];for(let te=0;te<6&&I<A;te++){let ue=Sr.decodeDigit(h,S,I,Sr.L_PATTERNS);b+=String.fromCharCode(48+ue);for(let ve of S)I+=ve}return{rowOffset:I,resultString:b}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(h,g){for(let b=0;b<10;b++)if(g===this.FIRST_DIGIT_ENCODINGS[b])return h=String.fromCharCode(48+b)+h,h;throw new ce}}Kr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class _r extends Sr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,b){const S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let A=h.getSize(),I=g[1];for(let V=0;V<4&&I<A;V++){let te=Sr.decodeDigit(h,S,I,Sr.L_PATTERNS);b+=String.fromCharCode(48+te);for(let ue of S)I+=ue}I=Sr.findGuardPattern(h,I,!0,Sr.MIDDLE_PATTERN,new Int32Array(Sr.MIDDLE_PATTERN.length).fill(0))[1];for(let V=0;V<4&&I<A;V++){let te=Sr.decodeDigit(h,S,I,Sr.L_PATTERNS);b+=String.fromCharCode(48+te);for(let ue of S)I+=ue}return{rowOffset:I,resultString:b}}getBarcodeFormat(){return ge.EAN_8}}class On extends Sr{constructor(){super(...arguments),this.ean13Reader=new Kr}getBarcodeFormat(){return ge.UPC_A}decode(h,g){return this.maybeReturnResult(this.ean13Reader.decode(h))}decodeRow(h,g,b){return this.maybeReturnResult(this.ean13Reader.decodeRow(h,g,b))}decodeMiddle(h,g,b){return this.ean13Reader.decodeMiddle(h,g,b)}maybeReturnResult(h){let g=h.getText();if(g.charAt(0)==="0"){let b=new H(g.substring(1),null,null,h.getResultPoints(),ge.UPC_A);return h.getResultMetadata()!=null&&b.putAllMetadata(h.getResultMetadata()),b}else throw new ce}reset(){this.ean13Reader.reset()}}class Qi extends Sr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(h,g,b){const S=this.decodeMiddleCounters.map(te=>te);S[0]=0,S[1]=0,S[2]=0,S[3]=0;const A=h.getSize();let I=g[1],R=0;for(let te=0;te<6&&I<A;te++){const ue=Qi.decodeDigit(h,S,I,Qi.L_AND_G_PATTERNS);b+=String.fromCharCode(48+ue%10);for(let ve of S)I+=ve;ue>=10&&(R|=1<<5-te)}let V=Qi.determineNumSysAndCheckDigit(b,R);return{rowOffset:I,resultString:V}}decodeEnd(h,g){return Qi.findGuardPatternWithoutCounters(h,g,!0,Qi.MIDDLE_END_PATTERN)}checkChecksum(h){return Sr.checkChecksum(Qi.convertUPCEtoUPCA(h))}static determineNumSysAndCheckDigit(h,g){for(let b=0;b<=1;b++)for(let S=0;S<10;S++)if(g===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[b][S]){let A=String.fromCharCode(48+b),I=String.fromCharCode(48+S);return A+h+I}throw ce.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(h){const g=h.slice(1,7).split("").map(A=>A.charCodeAt(0)),b=new ie;b.append(h.charAt(0));let S=g[5];switch(S){case 0:case 1:case 2:b.appendChars(g,0,2),b.append(S),b.append("0000"),b.appendChars(g,2,3);break;case 3:b.appendChars(g,0,3),b.append("00000"),b.appendChars(g,3,2);break;case 4:b.appendChars(g,0,4),b.append("00000"),b.append(g[4]);break;default:b.appendChars(g,0,5),b.append("0000"),b.append(S);break}return h.length>=8&&b.append(h.charAt(7)),b.toString()}}Qi.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qi.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ta extends Er{constructor(h){super();let g=h==null?null:h.get(q.POSSIBLE_FORMATS),b=[];i(g)?(b.push(new Kr),b.push(new On),b.push(new _r),b.push(new Qi)):(g.indexOf(ge.EAN_13)>-1&&b.push(new Kr),g.indexOf(ge.UPC_A)>-1&&b.push(new On),g.indexOf(ge.EAN_8)>-1&&b.push(new _r),g.indexOf(ge.UPC_E)>-1&&b.push(new Qi)),this.readers=b}decodeRow(h,g,b){for(let S of this.readers)try{const A=S.decodeRow(h,g,b),I=A.getBarcodeFormat()===ge.EAN_13&&A.getText().charAt(0)==="0",R=b==null?null:b.get(q.POSSIBLE_FORMATS),V=R==null||R.includes(ge.UPC_A);if(I&&V){const te=A.getRawBytes(),ue=new H(A.getText().substring(1),te,te?te.length:null,A.getResultPoints(),ge.UPC_A);return ue.putAllMetadata(A.getResultMetadata()),ue}return A}catch{}throw new ce}reset(){for(let h of this.readers)h.reset()}}class vi extends Er{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(h,g){for(let b=0;b<g.length;b++)if(Er.patternMatchVariance(h,g[b],vi.MAX_INDIVIDUAL_VARIANCE)<vi.MAX_AVG_VARIANCE)return b;throw new ce}static count(h){return yt.sum(new Int32Array(h))}static increment(h,g){let b=0,S=g[0];for(let A=1;A<h.length;A++)g[A]>S&&(S=g[A],b=A);h[b]++}static decrement(h,g){let b=0,S=g[0];for(let A=1;A<h.length;A++)g[A]<S&&(S=g[A],b=A);h[b]--}static isFinderPattern(h){let g=h[0]+h[1],b=g+h[2]+h[3],S=g/b;if(S>=vi.MIN_FINDER_PATTERN_RATIO&&S<=vi.MAX_FINDER_PATTERN_RATIO){let A=Number.MAX_SAFE_INTEGER,I=Number.MIN_SAFE_INTEGER;for(let R of h)R>I&&(I=R),R<A&&(A=R);return I<10*A}return!1}}vi.MAX_AVG_VARIANCE=.2,vi.MAX_INDIVIDUAL_VARIANCE=.45,vi.MIN_FINDER_PATTERN_RATIO=9.5/12,vi.MAX_FINDER_PATTERN_RATIO=12.5/14;class $a{constructor(h,g){this.value=h,this.checksumPortion=g}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(h){if(!(h instanceof $a))return!1;const g=h;return this.value===g.value&&this.checksumPortion===g.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class vr{constructor(h,g,b,S,A){this.value=h,this.startEnd=g,this.value=h,this.startEnd=g,this.resultPoints=new Array,this.resultPoints.push(new St(b,A)),this.resultPoints.push(new St(S,A))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(h){if(!(h instanceof vr))return!1;const g=h;return this.value===g.value}hashCode(){return this.value}}class Ia{constructor(){}static getRSSvalue(h,g,b){let S=0;for(let V of h)S+=V;let A=0,I=0,R=h.length;for(let V=0;V<R-1;V++){let te;for(te=1,I|=1<<V;te<h[V];te++,I&=~(1<<V)){let ue=Ia.combins(S-te-1,R-V-2);if(b&&I===0&&S-te-(R-V-1)>=R-V-1&&(ue-=Ia.combins(S-te-(R-V),R-V-2)),R-V-1>1){let ve=0;for(let Ne=S-te-(R-V-2);Ne>g;Ne--)ve+=Ia.combins(S-te-Ne-1,R-V-3);ue-=ve*(R-1-V)}else S-te>g&&ue--;A+=ue}S-=te}return A}static combins(h,g){let b,S;h-g>g?(S=g,b=h-g):(S=h-g,b=g);let A=1,I=1;for(let R=h;R>b;R--)A*=R,I<=S&&(A/=I,I++);for(;I<=S;)A/=I,I++;return A}}class ml{static buildBitArray(h){let g=h.length*2-1;h[h.length-1].getRightChar()==null&&(g-=1);let b=12*g,S=new M(b),A=0,R=h[0].getRightChar().getValue();for(let V=11;V>=0;--V)(R&1<<V)!=0&&S.set(A),A++;for(let V=1;V<h.length;++V){let te=h[V],ue=te.getLeftChar().getValue();for(let ve=11;ve>=0;--ve)(ue&1<<ve)!=0&&S.set(A),A++;if(te.getRightChar()!=null){let ve=te.getRightChar().getValue();for(let Ne=11;Ne>=0;--Ne)(ve&1<<Ne)!=0&&S.set(A),A++}}return S}}class pa{constructor(h,g){g?this.decodedInformation=null:(this.finished=h,this.decodedInformation=g)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ds{constructor(h){this.newPosition=h}getNewPosition(){return this.newPosition}}class Xr extends Ds{constructor(h,g){super(h),this.value=g}getValue(){return this.value}isFNC1(){return this.value===Xr.FNC1}}Xr.FNC1="$";class $t extends Ds{constructor(h,g,b){super(h),b?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=g}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Qn extends Ds{constructor(h,g,b){if(super(h),g<0||g>10||b<0||b>10)throw new W;this.firstDigit=g,this.secondDigit=b}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Qn.FNC1}isAnyFNC1(){return this.firstDigit===Qn.FNC1||this.secondDigit===Qn.FNC1}}Qn.FNC1=10;class er{constructor(){}static parseFieldsInGeneralPurpose(h){if(!h)return null;if(h.length<2)throw new ce;let g=h.substring(0,2);for(let A of er.TWO_DIGIT_DATA_LENGTH)if(A[0]===g)return A[1]===er.VARIABLE_LENGTH?er.processVariableAI(2,A[2],h):er.processFixedAI(2,A[1],h);if(h.length<3)throw new ce;let b=h.substring(0,3);for(let A of er.THREE_DIGIT_DATA_LENGTH)if(A[0]===b)return A[1]===er.VARIABLE_LENGTH?er.processVariableAI(3,A[2],h):er.processFixedAI(3,A[1],h);for(let A of er.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(A[0]===b)return A[1]===er.VARIABLE_LENGTH?er.processVariableAI(4,A[2],h):er.processFixedAI(4,A[1],h);if(h.length<4)throw new ce;let S=h.substring(0,4);for(let A of er.FOUR_DIGIT_DATA_LENGTH)if(A[0]===S)return A[1]===er.VARIABLE_LENGTH?er.processVariableAI(4,A[2],h):er.processFixedAI(4,A[1],h);throw new ce}static processFixedAI(h,g,b){if(b.length<h)throw new ce;let S=b.substring(0,h);if(b.length<h+g)throw new ce;let A=b.substring(h,h+g),I=b.substring(h+g),R="("+S+")"+A,V=er.parseFieldsInGeneralPurpose(I);return V==null?R:R+V}static processVariableAI(h,g,b){let S=b.substring(0,h),A;b.length<h+g?A=b.length:A=h+g;let I=b.substring(h,A),R=b.substring(A),V="("+S+")"+I,te=er.parseFieldsInGeneralPurpose(R);return te==null?V:V+te}}er.VARIABLE_LENGTH=[],er.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",er.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",er.VARIABLE_LENGTH,20],["22",er.VARIABLE_LENGTH,29],["30",er.VARIABLE_LENGTH,8],["37",er.VARIABLE_LENGTH,8],["90",er.VARIABLE_LENGTH,30],["91",er.VARIABLE_LENGTH,30],["92",er.VARIABLE_LENGTH,30],["93",er.VARIABLE_LENGTH,30],["94",er.VARIABLE_LENGTH,30],["95",er.VARIABLE_LENGTH,30],["96",er.VARIABLE_LENGTH,30],["97",er.VARIABLE_LENGTH,3],["98",er.VARIABLE_LENGTH,30],["99",er.VARIABLE_LENGTH,30]],er.THREE_DIGIT_DATA_LENGTH=[["240",er.VARIABLE_LENGTH,30],["241",er.VARIABLE_LENGTH,30],["242",er.VARIABLE_LENGTH,6],["250",er.VARIABLE_LENGTH,30],["251",er.VARIABLE_LENGTH,30],["253",er.VARIABLE_LENGTH,17],["254",er.VARIABLE_LENGTH,20],["400",er.VARIABLE_LENGTH,30],["401",er.VARIABLE_LENGTH,30],["402",17],["403",er.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",er.VARIABLE_LENGTH,20],["421",er.VARIABLE_LENGTH,15],["422",3],["423",er.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],er.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",er.VARIABLE_LENGTH,15],["391",er.VARIABLE_LENGTH,18],["392",er.VARIABLE_LENGTH,15],["393",er.VARIABLE_LENGTH,18],["703",er.VARIABLE_LENGTH,30]],er.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",er.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",er.VARIABLE_LENGTH,20],["8003",er.VARIABLE_LENGTH,30],["8004",er.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",er.VARIABLE_LENGTH,30],["8008",er.VARIABLE_LENGTH,12],["8018",18],["8020",er.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",er.VARIABLE_LENGTH,70],["8200",er.VARIABLE_LENGTH,70]];class Yi{constructor(h){this.buffer=new ie,this.information=h}decodeAllCodes(h,g){let b=g,S=null;do{let A=this.decodeGeneralPurposeField(b,S),I=er.parseFieldsInGeneralPurpose(A.getNewString());if(I!=null&&h.append(I),A.isRemaining()?S=""+A.getRemainingValue():S=null,b===A.getNewPosition())break;b=A.getNewPosition()}while(!0);return h.toString()}isStillNumeric(h){if(h+7>this.information.getSize())return h+4<=this.information.getSize();for(let g=h;g<h+3;++g)if(this.information.get(g))return!0;return this.information.get(h+3)}decodeNumeric(h){if(h+7>this.information.getSize()){let A=this.extractNumericValueFromBitArray(h,4);return A===0?new Qn(this.information.getSize(),Qn.FNC1,Qn.FNC1):new Qn(this.information.getSize(),A-1,Qn.FNC1)}let g=this.extractNumericValueFromBitArray(h,7),b=(g-8)/11,S=(g-8)%11;return new Qn(h+7,b,S)}extractNumericValueFromBitArray(h,g){return Yi.extractNumericValueFromBitArray(this.information,h,g)}static extractNumericValueFromBitArray(h,g,b){let S=0;for(let A=0;A<b;++A)h.get(g+A)&&(S|=1<<b-A-1);return S}decodeGeneralPurposeField(h,g){this.buffer.setLengthToZero(),g!=null&&this.buffer.append(g),this.current.setPosition(h);let b=this.parseBlocks();return b!=null&&b.isRemaining()?new $t(this.current.getPosition(),this.buffer.toString(),b.getRemainingValue()):new $t(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let h,g;do{let b=this.current.getPosition();if(this.current.isAlpha()?(g=this.parseAlphaBlock(),h=g.isFinished()):this.current.isIsoIec646()?(g=this.parseIsoIec646Block(),h=g.isFinished()):(g=this.parseNumericBlock(),h=g.isFinished()),!(b!==this.current.getPosition())&&!h)break}while(!h);return g.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let h=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFirstDigitFNC1()){let g;return h.isSecondDigitFNC1()?g=new $t(this.current.getPosition(),this.buffer.toString()):g=new $t(this.current.getPosition(),this.buffer.toString(),h.getSecondDigit()),new pa(!0,g)}if(this.buffer.append(h.getFirstDigit()),h.isSecondDigitFNC1()){let g=new $t(this.current.getPosition(),this.buffer.toString());return new pa(!0,g)}this.buffer.append(h.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new pa(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let h=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new $t(this.current.getPosition(),this.buffer.toString());return new pa(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new pa(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let h=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new $t(this.current.getPosition(),this.buffer.toString());return new pa(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new pa(!1)}isStillIsoIec646(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+7>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(h,7);if(b>=64&&b<116)return!0;if(h+8>this.information.getSize())return!1;let S=this.extractNumericValueFromBitArray(h,8);return S>=232&&S<253}decodeIsoIec646(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Xr(h+5,Xr.FNC1);if(g>=5&&g<15)return new Xr(h+5,"0"+(g-5));let b=this.extractNumericValueFromBitArray(h,7);if(b>=64&&b<90)return new Xr(h+7,""+(b+1));if(b>=90&&b<116)return new Xr(h+7,""+(b+7));let S=this.extractNumericValueFromBitArray(h,8),A;switch(S){case 232:A="!";break;case 233:A='"';break;case 234:A="%";break;case 235:A="&";break;case 236:A="'";break;case 237:A="(";break;case 238:A=")";break;case 239:A="*";break;case 240:A="+";break;case 241:A=",";break;case 242:A="-";break;case 243:A=".";break;case 244:A="/";break;case 245:A=":";break;case 246:A=";";break;case 247:A="<";break;case 248:A="=";break;case 249:A=">";break;case 250:A="?";break;case 251:A="_";break;case 252:A=" ";break;default:throw new W}return new Xr(h+8,A)}isStillAlpha(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+6>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(h,6);return b>=16&&b<63}decodeAlphanumeric(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Xr(h+5,Xr.FNC1);if(g>=5&&g<15)return new Xr(h+5,"0"+(g-5));let b=this.extractNumericValueFromBitArray(h,6);if(b>=32&&b<58)return new Xr(h+6,""+(b+33));let S;switch(b){case 58:S="*";break;case 59:S=",";break;case 60:S="-";break;case 61:S=".";break;case 62:S="/";break;default:throw new Oe("Decoding invalid alphanumeric value: "+b)}return new Xr(h+6,S)}isAlphaTo646ToAlphaLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<5&&g+h<this.information.getSize();++g)if(g===2){if(!this.information.get(h+2))return!1}else if(this.information.get(h+g))return!1;return!0}isAlphaOr646ToNumericLatch(h){if(h+3>this.information.getSize())return!1;for(let g=h;g<h+3;++g)if(this.information.get(g))return!1;return!0}isNumericToAlphaNumericLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<4&&g+h<this.information.getSize();++g)if(this.information.get(h+g))return!1;return!0}}class Yn{constructor(h){this.information=h,this.generalDecoder=new Yi(h)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class vn extends Yn{constructor(h){super(h)}encodeCompressedGtin(h,g){h.append("(01)");let b=h.length();h.append("9"),this.encodeCompressedGtinWithoutAI(h,g,b)}encodeCompressedGtinWithoutAI(h,g,b){for(let S=0;S<4;++S){let A=this.getGeneralDecoder().extractNumericValueFromBitArray(g+10*S,10);A/100===0&&h.append("0"),A/10===0&&h.append("0"),h.append(A)}vn.appendCheckDigit(h,b)}static appendCheckDigit(h,g){let b=0;for(let S=0;S<13;S++){let A=h.charAt(S+g).charCodeAt(0)-48;b+=(S&1)===0?3*A:A}b=10-b%10,b===10&&(b=0),h.append(b)}}vn.GTIN_SIZE=40;class Bi extends vn{constructor(h){super(h)}parseInformation(){let h=new ie;h.append("(01)");let g=h.length(),b=this.getGeneralDecoder().extractNumericValueFromBitArray(Bi.HEADER_SIZE,4);return h.append(b),this.encodeCompressedGtinWithoutAI(h,Bi.HEADER_SIZE+4,g),this.getGeneralDecoder().decodeAllCodes(h,Bi.HEADER_SIZE+44)}}Bi.HEADER_SIZE=4;class Zi extends Yn{constructor(h){super(h)}parseInformation(){let h=new ie;return this.getGeneralDecoder().decodeAllCodes(h,Zi.HEADER_SIZE)}}Zi.HEADER_SIZE=5;class cs extends vn{constructor(h){super(h)}encodeCompressedWeight(h,g,b){let S=this.getGeneralDecoder().extractNumericValueFromBitArray(g,b);this.addWeightCode(h,S);let A=this.checkWeight(S),I=1e5;for(let R=0;R<5;++R)A/I===0&&h.append("0"),I/=10;h.append(A)}}class ds extends cs{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()!=ds.HEADER_SIZE+cs.GTIN_SIZE+ds.WEIGHT_SIZE)throw new ce;let h=new ie;return this.encodeCompressedGtin(h,ds.HEADER_SIZE),this.encodeCompressedWeight(h,ds.HEADER_SIZE+cs.GTIN_SIZE,ds.WEIGHT_SIZE),h.toString()}}ds.HEADER_SIZE=5,ds.WEIGHT_SIZE=15;class Vo extends ds{constructor(h){super(h)}addWeightCode(h,g){h.append("(3103)")}checkWeight(h){return h}}class $o extends ds{constructor(h){super(h)}addWeightCode(h,g){g<1e4?h.append("(3202)"):h.append("(3203)")}checkWeight(h){return h<1e4?h:h-1e4}}class Ga extends vn{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<Ga.HEADER_SIZE+vn.GTIN_SIZE)throw new ce;let h=new ie;this.encodeCompressedGtin(h,Ga.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(Ga.HEADER_SIZE+vn.GTIN_SIZE,Ga.LAST_DIGIT_SIZE);h.append("(392"),h.append(g),h.append(")");let b=this.getGeneralDecoder().decodeGeneralPurposeField(Ga.HEADER_SIZE+vn.GTIN_SIZE+Ga.LAST_DIGIT_SIZE,null);return h.append(b.getNewString()),h.toString()}}Ga.HEADER_SIZE=8,Ga.LAST_DIGIT_SIZE=2;class fi extends vn{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<fi.HEADER_SIZE+vn.GTIN_SIZE)throw new ce;let h=new ie;this.encodeCompressedGtin(h,fi.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(fi.HEADER_SIZE+vn.GTIN_SIZE,fi.LAST_DIGIT_SIZE);h.append("(393"),h.append(g),h.append(")");let b=this.getGeneralDecoder().extractNumericValueFromBitArray(fi.HEADER_SIZE+vn.GTIN_SIZE+fi.LAST_DIGIT_SIZE,fi.FIRST_THREE_DIGITS_SIZE);b/100==0&&h.append("0"),b/10==0&&h.append("0"),h.append(b);let S=this.getGeneralDecoder().decodeGeneralPurposeField(fi.HEADER_SIZE+vn.GTIN_SIZE+fi.LAST_DIGIT_SIZE+fi.FIRST_THREE_DIGITS_SIZE,null);return h.append(S.getNewString()),h.toString()}}fi.HEADER_SIZE=8,fi.LAST_DIGIT_SIZE=2,fi.FIRST_THREE_DIGITS_SIZE=10;class kn extends cs{constructor(h,g,b){super(h),this.dateCode=b,this.firstAIdigits=g}parseInformation(){if(this.getInformation().getSize()!=kn.HEADER_SIZE+kn.GTIN_SIZE+kn.WEIGHT_SIZE+kn.DATE_SIZE)throw new ce;let h=new ie;return this.encodeCompressedGtin(h,kn.HEADER_SIZE),this.encodeCompressedWeight(h,kn.HEADER_SIZE+kn.GTIN_SIZE,kn.WEIGHT_SIZE),this.encodeCompressedDate(h,kn.HEADER_SIZE+kn.GTIN_SIZE+kn.WEIGHT_SIZE),h.toString()}encodeCompressedDate(h,g){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(g,kn.DATE_SIZE);if(b==38400)return;h.append("("),h.append(this.dateCode),h.append(")");let S=b%32;b/=32;let A=b%12+1;b/=12;let I=b;I/10==0&&h.append("0"),h.append(I),A/10==0&&h.append("0"),h.append(A),S/10==0&&h.append("0"),h.append(S)}addWeightCode(h,g){h.append("("),h.append(this.firstAIdigits),h.append(g/1e5),h.append(")")}checkWeight(h){return h%1e5}}kn.HEADER_SIZE=8,kn.WEIGHT_SIZE=20,kn.DATE_SIZE=16;function Go(je){try{if(je.get(1))return new Bi(je);if(!je.get(2))return new Zi(je);switch(Yi.extractNumericValueFromBitArray(je,1,4)){case 4:return new Vo(je);case 5:return new $o(je)}switch(Yi.extractNumericValueFromBitArray(je,1,5)){case 12:return new Ga(je);case 13:return new fi(je)}switch(Yi.extractNumericValueFromBitArray(je,1,7)){case 56:return new kn(je,"310","11");case 57:return new kn(je,"320","11");case 58:return new kn(je,"310","13");case 59:return new kn(je,"320","13");case 60:return new kn(je,"310","15");case 61:return new kn(je,"320","15");case 62:return new kn(je,"310","17");case 63:return new kn(je,"320","17")}}catch(h){throw console.log(h),new Oe("unknown decoder: "+je)}}class Ka{constructor(h,g,b,S){this.leftchar=h,this.rightchar=g,this.finderpattern=b,this.maybeLast=S}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(h,g){return h instanceof Ka?Ka.equalsOrNull(h.leftchar,g.leftchar)&&Ka.equalsOrNull(h.rightchar,g.rightchar)&&Ka.equalsOrNull(h.finderpattern,g.finderpattern):!1}static equalsOrNull(h,g){return h===null?g===null:Ka.equals(h,g)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Oi{constructor(h,g,b){this.pairs=h,this.rowNumber=g,this.wasReversed=b}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(h){return this.checkEqualitity(this,h)}toString(){return"{ "+this.pairs+" }"}equals(h,g){return h instanceof Oi?this.checkEqualitity(h,g)&&h.wasReversed===g.wasReversed:!1}checkEqualitity(h,g){if(!h||!g)return;let b;return h.forEach((S,A)=>{g.forEach(I=>{S.getLeftChar().getValue()===I.getLeftChar().getValue()&&S.getRightChar().getValue()===I.getRightChar().getValue()&&S.getFinderPatter().getValue()===I.getFinderPatter().getValue()&&(b=!0)})}),b}}class Rt extends vi{constructor(h){super(...arguments),this.pairs=new Array(Rt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=h===!0}decodeRow(h,g,b){this.pairs.length=0,this.startFromEven=!1;try{return Rt.constructResult(this.decodeRow2pairs(h,g))}catch(S){this.verbose&&console.log(S)}return this.pairs.length=0,this.startFromEven=!0,Rt.constructResult(this.decodeRow2pairs(h,g))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(h,g){let b=!1;for(;!b;)try{this.pairs.push(this.retrieveNextPair(g,this.pairs,h))}catch(A){if(A instanceof ce){if(!this.pairs.length)throw new ce;b=!0}}if(this.checkChecksum())return this.pairs;let S;if(this.rows.length?S=!0:S=!1,this.storeRow(h,!1),S){let A=this.checkRowsBoolean(!1);if(A!=null||(A=this.checkRowsBoolean(!0),A!=null))return A}throw new ce}checkRowsBoolean(h){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,h&&(this.rows=this.rows.reverse());let g=null;try{g=this.checkRows(new Array,0)}catch(b){this.verbose&&console.log(b)}return h&&(this.rows=this.rows.reverse()),g}checkRows(h,g){for(let b=g;b<this.rows.length;b++){let S=this.rows[b];this.pairs.length=0;for(let I of h)this.pairs.push(I.getPairs());if(this.pairs.push(S.getPairs()),!Rt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let A=new Array(h);A.push(S);try{return this.checkRows(A,b+1)}catch(I){this.verbose&&console.log(I)}}throw new ce}static isValidSequence(h){for(let g of Rt.FINDER_PATTERN_SEQUENCES){if(h.length>g.length)continue;let b=!0;for(let S=0;S<h.length;S++)if(h[S].getFinderPattern().getValue()!=g[S]){b=!1;break}if(b)return!0}return!1}storeRow(h,g){let b=0,S=!1,A=!1;for(;b<this.rows.length;){let I=this.rows[b];if(I.getRowNumber()>h){A=I.isEquivalent(this.pairs);break}S=I.isEquivalent(this.pairs),b++}A||S||Rt.isPartialRow(this.pairs,this.rows)||(this.rows.push(b,new Oi(this.pairs,h,g)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(h,g){for(let b of g)if(b.getPairs().length!==h.length){for(let S of b.getPairs())for(let A of h)if(Ka.equals(S,A))break}}static isPartialRow(h,g){for(let b of g){let S=!0;for(let A of h){let I=!1;for(let R of b.getPairs())if(A.equals(R)){I=!0;break}if(!I){S=!1;break}}if(S)return!0}return!1}getRows(){return this.rows}static constructResult(h){let g=ml.buildBitArray(h),S=Go(g).parseInformation(),A=h[0].getFinderPattern().getResultPoints(),I=h[h.length-1].getFinderPattern().getResultPoints(),R=[A[0],A[1],I[0],I[1]];return new H(S,null,null,R,ge.RSS_EXPANDED,null)}checkChecksum(){let h=this.pairs.get(0),g=h.getLeftChar(),b=h.getRightChar();if(b==null)return!1;let S=b.getChecksumPortion(),A=2;for(let R=1;R<this.pairs.size();++R){let V=this.pairs.get(R);S+=V.getLeftChar().getChecksumPortion(),A++;let te=V.getRightChar();te!=null&&(S+=te.getChecksumPortion(),A++)}return S%=211,211*(A-4)+S==g.getValue()}static getNextSecondBar(h,g){let b;return h.get(g)?(b=h.getNextUnset(g),b=h.getNextSet(b)):(b=h.getNextSet(g),b=h.getNextUnset(b)),b}retrieveNextPair(h,g,b){let S=g.length%2==0;this.startFromEven&&(S=!S);let A,I=!0,R=-1;do this.findNextPair(h,g,R),A=this.parseFoundFinderPattern(h,b,S),A==null?R=Rt.getNextSecondBar(h,this.startEnd[0]):I=!1;while(I);let V=this.decodeDataCharacter(h,A,S,!0);if(!this.isEmptyPair(g)&&g[g.length-1].mustBeLast())throw new ce;let te;try{te=this.decodeDataCharacter(h,A,S,!1)}catch(ue){te=null,this.verbose&&console.log(ue)}return new Ka(V,te,A,!0)}isEmptyPair(h){return h.length===0}findNextPair(h,g,b){let S=this.getDecodeFinderCounters();S[0]=0,S[1]=0,S[2]=0,S[3]=0;let A=h.getSize(),I;b>=0?I=b:this.isEmptyPair(g)?I=0:I=g[g.length-1].getFinderPattern().getStartEnd()[1];let R=g.length%2!=0;this.startFromEven&&(R=!R);let V=!1;for(;I<A&&(V=!h.get(I),!!V);)I++;let te=0,ue=I;for(let ve=I;ve<A;ve++)if(h.get(ve)!=V)S[te]++;else{if(te==3){if(R&&Rt.reverseCounters(S),Rt.isFinderPattern(S)){this.startEnd[0]=ue,this.startEnd[1]=ve;return}R&&Rt.reverseCounters(S),ue+=S[0]+S[1],S[0]=S[2],S[1]=S[3],S[2]=0,S[3]=0,te--}else te++;S[te]=1,V=!V}throw new ce}static reverseCounters(h){let g=h.length;for(let b=0;b<g/2;++b){let S=h[b];h[b]=h[g-b-1],h[g-b-1]=S}}parseFoundFinderPattern(h,g,b){let S,A,I;if(b){let te=this.startEnd[0]-1;for(;te>=0&&!h.get(te);)te--;te++,S=this.startEnd[0]-te,A=te,I=this.startEnd[1]}else A=this.startEnd[0],I=h.getNextUnset(this.startEnd[1]+1),S=I-this.startEnd[1];let R=this.getDecodeFinderCounters();C.arraycopy(R,0,R,1,R.length-1),R[0]=S;let V;try{V=this.parseFinderValue(R,Rt.FINDER_PATTERNS)}catch{return null}return new vr(V,[A,I],A,I,g)}decodeDataCharacter(h,g,b,S){let A=this.getDataCharacterCounters();for(let Un=0;Un<A.length;Un++)A[Un]=0;if(S)Rt.recordPatternInReverse(h,g.getStartEnd()[0],A);else{Rt.recordPattern(h,g.getStartEnd()[1],A);for(let Un=0,Ra=A.length-1;Un<Ra;Un++,Ra--){let Ms=A[Un];A[Un]=A[Ra],A[Ra]=Ms}}let I=17,R=yt.sum(new Int32Array(A))/I,V=(g.getStartEnd()[1]-g.getStartEnd()[0])/15;if(Math.abs(R-V)/V>.3)throw new ce;let te=this.getOddCounts(),ue=this.getEvenCounts(),ve=this.getOddRoundingErrors(),Ne=this.getEvenRoundingErrors();for(let Un=0;Un<A.length;Un++){let Ra=1*A[Un]/R,Ms=Ra+.5;if(Ms<1){if(Ra<.3)throw new ce;Ms=1}else if(Ms>8){if(Ra>8.7)throw new ce;Ms=8}let xc=Un/2;(Un&1)==0?(te[xc]=Ms,ve[xc]=Ra-Ms):(ue[xc]=Ms,Ne[xc]=Ra-Ms)}this.adjustOddEvenCounts(I);let Me=4*g.getValue()+(b?0:2)+(S?0:1)-1,qe=0,$e=0;for(let Un=te.length-1;Un>=0;Un--){if(Rt.isNotA1left(g,b,S)){let Ra=Rt.WEIGHTS[Me][2*Un];$e+=te[Un]*Ra}qe+=te[Un]}let Xe=0;for(let Un=ue.length-1;Un>=0;Un--)if(Rt.isNotA1left(g,b,S)){let Ra=Rt.WEIGHTS[Me][2*Un+1];Xe+=ue[Un]*Ra}let ct=$e+Xe;if((qe&1)!=0||qe>13||qe<4)throw new ce;let Tt=(13-qe)/2,_t=Rt.SYMBOL_WIDEST[Tt],At=9-_t,Tr=Ia.getRSSvalue(te,_t,!0),qr=Ia.getRSSvalue(ue,At,!1),Mn=Rt.EVEN_TOTAL_SUBSET[Tt],ua=Rt.GSUM[Tt],Pa=Tr*Mn+qr+ua;return new $a(Pa,ct)}static isNotA1left(h,g,b){return!(h.getValue()==0&&g&&b)}adjustOddEvenCounts(h){let g=yt.sum(new Int32Array(this.getOddCounts())),b=yt.sum(new Int32Array(this.getEvenCounts())),S=!1,A=!1;g>13?A=!0:g<4&&(S=!0);let I=!1,R=!1;b>13?R=!0:b<4&&(I=!0);let V=g+b-h,te=(g&1)==1,ue=(b&1)==0;if(V==1)if(te){if(ue)throw new ce;A=!0}else{if(!ue)throw new ce;R=!0}else if(V==-1)if(te){if(ue)throw new ce;S=!0}else{if(!ue)throw new ce;I=!0}else if(V==0){if(te){if(!ue)throw new ce;g<b?(S=!0,R=!0):(A=!0,I=!0)}else if(ue)throw new ce}else throw new ce;if(S){if(A)throw new ce;Rt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(A&&Rt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),I){if(R)throw new ce;Rt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}R&&Rt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.SYMBOL_WIDEST=[7,5,4,3,1],Rt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Rt.GSUM=[0,348,1388,2948,3988],Rt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Rt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Rt.FINDER_PAT_A=0,Rt.FINDER_PAT_B=1,Rt.FINDER_PAT_C=2,Rt.FINDER_PAT_D=3,Rt.FINDER_PAT_E=4,Rt.FINDER_PAT_F=5,Rt.FINDER_PATTERN_SEQUENCES=[[Rt.FINDER_PAT_A,Rt.FINDER_PAT_A],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_B,Rt.FINDER_PAT_B],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_C,Rt.FINDER_PAT_B,Rt.FINDER_PAT_D],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_E,Rt.FINDER_PAT_B,Rt.FINDER_PAT_D,Rt.FINDER_PAT_C],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_E,Rt.FINDER_PAT_B,Rt.FINDER_PAT_D,Rt.FINDER_PAT_D,Rt.FINDER_PAT_F],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_E,Rt.FINDER_PAT_B,Rt.FINDER_PAT_D,Rt.FINDER_PAT_E,Rt.FINDER_PAT_F,Rt.FINDER_PAT_F],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_A,Rt.FINDER_PAT_B,Rt.FINDER_PAT_B,Rt.FINDER_PAT_C,Rt.FINDER_PAT_C,Rt.FINDER_PAT_D,Rt.FINDER_PAT_D],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_A,Rt.FINDER_PAT_B,Rt.FINDER_PAT_B,Rt.FINDER_PAT_C,Rt.FINDER_PAT_C,Rt.FINDER_PAT_D,Rt.FINDER_PAT_E,Rt.FINDER_PAT_E],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_A,Rt.FINDER_PAT_B,Rt.FINDER_PAT_B,Rt.FINDER_PAT_C,Rt.FINDER_PAT_C,Rt.FINDER_PAT_D,Rt.FINDER_PAT_E,Rt.FINDER_PAT_F,Rt.FINDER_PAT_F],[Rt.FINDER_PAT_A,Rt.FINDER_PAT_A,Rt.FINDER_PAT_B,Rt.FINDER_PAT_B,Rt.FINDER_PAT_C,Rt.FINDER_PAT_D,Rt.FINDER_PAT_D,Rt.FINDER_PAT_E,Rt.FINDER_PAT_E,Rt.FINDER_PAT_F,Rt.FINDER_PAT_F]],Rt.MAX_PAIRS=11;class io extends $a{constructor(h,g,b){super(h,g),this.count=0,this.finderPattern=b}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class zn extends vi{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(h,g,b){const S=this.decodePair(g,!1,h,b);zn.addOrTally(this.possibleLeftPairs,S),g.reverse();let A=this.decodePair(g,!0,h,b);zn.addOrTally(this.possibleRightPairs,A),g.reverse();for(let I of this.possibleLeftPairs)if(I.getCount()>1){for(let R of this.possibleRightPairs)if(R.getCount()>1&&zn.checkChecksum(I,R))return zn.constructResult(I,R)}throw new ce}static addOrTally(h,g){if(g==null)return;let b=!1;for(let S of h)if(S.getValue()===g.getValue()){S.incrementCount(),b=!0;break}b||h.push(g)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(h,g){let b=4537077*h.getValue()+g.getValue(),S=new String(b).toString(),A=new ie;for(let te=13-S.length;te>0;te--)A.append("0");A.append(S);let I=0;for(let te=0;te<13;te++){let ue=A.charAt(te).charCodeAt(0)-48;I+=(te&1)===0?3*ue:ue}I=10-I%10,I===10&&(I=0),A.append(I.toString());let R=h.getFinderPattern().getResultPoints(),V=g.getFinderPattern().getResultPoints();return new H(A.toString(),null,0,[R[0],R[1],V[0],V[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(h,g){let b=(h.getChecksumPortion()+16*g.getChecksumPortion())%79,S=9*h.getFinderPattern().getValue()+g.getFinderPattern().getValue();return S>72&&S--,S>8&&S--,b===S}decodePair(h,g,b,S){try{let A=this.findFinderPattern(h,g),I=this.parseFoundFinderPattern(h,b,g,A),R=S==null?null:S.get(q.NEED_RESULT_POINT_CALLBACK);if(R!=null){let ue=(A[0]+A[1])/2;g&&(ue=h.getSize()-1-ue),R.foundPossibleResultPoint(new St(ue,b))}let V=this.decodeDataCharacter(h,I,!0),te=this.decodeDataCharacter(h,I,!1);return new io(1597*V.getValue()+te.getValue(),V.getChecksumPortion()+4*te.getChecksumPortion(),I)}catch{return null}}decodeDataCharacter(h,g,b){let S=this.getDataCharacterCounters();for(let Xe=0;Xe<S.length;Xe++)S[Xe]=0;if(b)Er.recordPatternInReverse(h,g.getStartEnd()[0],S);else{Er.recordPattern(h,g.getStartEnd()[1]+1,S);for(let Xe=0,ct=S.length-1;Xe<ct;Xe++,ct--){let Tt=S[Xe];S[Xe]=S[ct],S[ct]=Tt}}let A=b?16:15,I=yt.sum(new Int32Array(S))/A,R=this.getOddCounts(),V=this.getEvenCounts(),te=this.getOddRoundingErrors(),ue=this.getEvenRoundingErrors();for(let Xe=0;Xe<S.length;Xe++){let ct=S[Xe]/I,Tt=Math.floor(ct+.5);Tt<1?Tt=1:Tt>8&&(Tt=8);let _t=Math.floor(Xe/2);(Xe&1)===0?(R[_t]=Tt,te[_t]=ct-Tt):(V[_t]=Tt,ue[_t]=ct-Tt)}this.adjustOddEvenCounts(b,A);let ve=0,Ne=0;for(let Xe=R.length-1;Xe>=0;Xe--)Ne*=9,Ne+=R[Xe],ve+=R[Xe];let Me=0,qe=0;for(let Xe=V.length-1;Xe>=0;Xe--)Me*=9,Me+=V[Xe],qe+=V[Xe];let $e=Ne+3*Me;if(b){if((ve&1)!==0||ve>12||ve<4)throw new ce;let Xe=(12-ve)/2,ct=zn.OUTSIDE_ODD_WIDEST[Xe],Tt=9-ct,_t=Ia.getRSSvalue(R,ct,!1),At=Ia.getRSSvalue(V,Tt,!0),Tr=zn.OUTSIDE_EVEN_TOTAL_SUBSET[Xe],qr=zn.OUTSIDE_GSUM[Xe];return new $a(_t*Tr+At+qr,$e)}else{if((qe&1)!==0||qe>10||qe<4)throw new ce;let Xe=(10-qe)/2,ct=zn.INSIDE_ODD_WIDEST[Xe],Tt=9-ct,_t=Ia.getRSSvalue(R,ct,!0),At=Ia.getRSSvalue(V,Tt,!1),Tr=zn.INSIDE_ODD_TOTAL_SUBSET[Xe],qr=zn.INSIDE_GSUM[Xe];return new $a(At*Tr+_t+qr,$e)}}findFinderPattern(h,g){let b=this.getDecodeFinderCounters();b[0]=0,b[1]=0,b[2]=0,b[3]=0;let S=h.getSize(),A=!1,I=0;for(;I<S&&(A=!h.get(I),g!==A);)I++;let R=0,V=I;for(let te=I;te<S;te++)if(h.get(te)!==A)b[R]++;else{if(R===3){if(vi.isFinderPattern(b))return[V,te];V+=b[0]+b[1],b[0]=b[2],b[1]=b[3],b[2]=0,b[3]=0,R--}else R++;b[R]=1,A=!A}throw new ce}parseFoundFinderPattern(h,g,b,S){let A=h.get(S[0]),I=S[0]-1;for(;I>=0&&A!==h.get(I);)I--;I++;const R=S[0]-I,V=this.getDecodeFinderCounters(),te=new Int32Array(V.length);C.arraycopy(V,0,te,1,V.length-1),te[0]=R;const ue=this.parseFinderValue(te,zn.FINDER_PATTERNS);let ve=I,Ne=S[1];return b&&(ve=h.getSize()-1-ve,Ne=h.getSize()-1-Ne),new vr(ue,[I,S[1]],ve,Ne,g)}adjustOddEvenCounts(h,g){let b=yt.sum(new Int32Array(this.getOddCounts())),S=yt.sum(new Int32Array(this.getEvenCounts())),A=!1,I=!1,R=!1,V=!1;h?(b>12?I=!0:b<4&&(A=!0),S>12?V=!0:S<4&&(R=!0)):(b>11?I=!0:b<5&&(A=!0),S>10?V=!0:S<4&&(R=!0));let te=b+S-g,ue=(b&1)===(h?1:0),ve=(S&1)===1;if(te===1)if(ue){if(ve)throw new ce;I=!0}else{if(!ve)throw new ce;V=!0}else if(te===-1)if(ue){if(ve)throw new ce;A=!0}else{if(!ve)throw new ce;R=!0}else if(te===0){if(ue){if(!ve)throw new ce;b<S?(A=!0,V=!0):(I=!0,R=!0)}else if(ve)throw new ce}else throw new ce;if(A){if(I)throw new ce;vi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(I&&vi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),R){if(V)throw new ce;vi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}V&&vi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}zn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],zn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],zn.OUTSIDE_GSUM=[0,161,961,2015,2715],zn.INSIDE_GSUM=[0,336,1036,1516],zn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],zn.INSIDE_ODD_WIDEST=[2,4,6,8],zn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class us extends Er{constructor(h,g){super(),this.readers=[],this.verbose=g===!0;const b=h?h.get(q.POSSIBLE_FORMATS):null,S=h&&h.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;b?((b.includes(ge.EAN_13)||b.includes(ge.UPC_A)||b.includes(ge.EAN_8)||b.includes(ge.UPC_E))&&this.readers.push(new Ta(h)),b.includes(ge.CODE_39)&&this.readers.push(new sr(S)),b.includes(ge.CODE_128)&&this.readers.push(new wt),b.includes(ge.ITF)&&this.readers.push(new ur),b.includes(ge.RSS_14)&&this.readers.push(new zn),b.includes(ge.RSS_EXPANDED)&&this.readers.push(new Rt(this.verbose))):(this.readers.push(new Ta(h)),this.readers.push(new sr),this.readers.push(new Ta(h)),this.readers.push(new wt),this.readers.push(new ur),this.readers.push(new zn),this.readers.push(new Rt(this.verbose)))}decodeRow(h,g,b){for(let S=0;S<this.readers.length;S++)try{return this.readers[S].decodeRow(h,g,b)}catch{}throw new ce}reset(){this.readers.forEach(h=>h.reset())}}class kl extends se{constructor(h=500,g){super(new us(g),h,g)}}class _n{constructor(h,g,b){this.ecCodewords=h,this.ecBlocks=[g],b&&this.ecBlocks.push(b)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class An{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class on{constructor(h,g,b,S,A,I){this.versionNumber=h,this.symbolSizeRows=g,this.symbolSizeColumns=b,this.dataRegionSizeRows=S,this.dataRegionSizeColumns=A,this.ecBlocks=I;let R=0;const V=I.getECCodewords(),te=I.getECBlocks();for(let ue of te)R+=ue.getCount()*(ue.getDataCodewords()+V);this.totalCodewords=R}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(h,g){if((h&1)!==0||(g&1)!==0)throw new W;for(let b of on.VERSIONS)if(b.symbolSizeRows===h&&b.symbolSizeColumns===g)return b;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new on(1,10,10,8,8,new _n(5,new An(1,3))),new on(2,12,12,10,10,new _n(7,new An(1,5))),new on(3,14,14,12,12,new _n(10,new An(1,8))),new on(4,16,16,14,14,new _n(12,new An(1,12))),new on(5,18,18,16,16,new _n(14,new An(1,18))),new on(6,20,20,18,18,new _n(18,new An(1,22))),new on(7,22,22,20,20,new _n(20,new An(1,30))),new on(8,24,24,22,22,new _n(24,new An(1,36))),new on(9,26,26,24,24,new _n(28,new An(1,44))),new on(10,32,32,14,14,new _n(36,new An(1,62))),new on(11,36,36,16,16,new _n(42,new An(1,86))),new on(12,40,40,18,18,new _n(48,new An(1,114))),new on(13,44,44,20,20,new _n(56,new An(1,144))),new on(14,48,48,22,22,new _n(68,new An(1,174))),new on(15,52,52,24,24,new _n(42,new An(2,102))),new on(16,64,64,14,14,new _n(56,new An(2,140))),new on(17,72,72,16,16,new _n(36,new An(4,92))),new on(18,80,80,18,18,new _n(48,new An(4,114))),new on(19,88,88,20,20,new _n(56,new An(4,144))),new on(20,96,96,22,22,new _n(68,new An(4,174))),new on(21,104,104,24,24,new _n(56,new An(6,136))),new on(22,120,120,18,18,new _n(68,new An(6,175))),new on(23,132,132,20,20,new _n(62,new An(8,163))),new on(24,144,144,22,22,new _n(62,new An(8,156),new An(2,155))),new on(25,8,18,6,16,new _n(7,new An(1,5))),new on(26,8,32,6,14,new _n(11,new An(1,10))),new on(27,12,26,10,24,new _n(14,new An(1,16))),new on(28,12,36,10,16,new _n(18,new An(1,22))),new on(29,16,36,14,16,new _n(24,new An(1,32))),new on(30,16,48,14,22,new _n(28,new An(1,49)))]}}on.VERSIONS=on.buildVersions();class Jr{constructor(h){const g=h.getHeight();if(g<8||g>144||(g&1)!==0)throw new W;this.version=Jr.readVersion(h),this.mappingBitMatrix=this.extractDataRegion(h),this.readMappingMatrix=new me(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(h){const g=h.getHeight(),b=h.getWidth();return on.getVersionForDimensions(g,b)}readCodewords(){const h=new Int8Array(this.version.getTotalCodewords());let g=0,b=4,S=0;const A=this.mappingBitMatrix.getHeight(),I=this.mappingBitMatrix.getWidth();let R=!1,V=!1,te=!1,ue=!1;do if(b===A&&S===0&&!R)h[g++]=this.readCorner1(A,I)&255,b-=2,S+=2,R=!0;else if(b===A-2&&S===0&&(I&3)!==0&&!V)h[g++]=this.readCorner2(A,I)&255,b-=2,S+=2,V=!0;else if(b===A+4&&S===2&&(I&7)===0&&!te)h[g++]=this.readCorner3(A,I)&255,b-=2,S+=2,te=!0;else if(b===A-2&&S===0&&(I&7)===4&&!ue)h[g++]=this.readCorner4(A,I)&255,b-=2,S+=2,ue=!0;else{do b<A&&S>=0&&!this.readMappingMatrix.get(S,b)&&(h[g++]=this.readUtah(b,S,A,I)&255),b-=2,S+=2;while(b>=0&&S<I);b+=1,S+=3;do b>=0&&S<I&&!this.readMappingMatrix.get(S,b)&&(h[g++]=this.readUtah(b,S,A,I)&255),b+=2,S-=2;while(b<A&&S>=0);b+=3,S+=1}while(b<A||S<I);if(g!==this.version.getTotalCodewords())throw new W;return h}readModule(h,g,b,S){return h<0&&(h+=b,g+=4-(b+4&7)),g<0&&(g+=S,h+=4-(S+4&7)),this.readMappingMatrix.set(g,h),this.mappingBitMatrix.get(g,h)}readUtah(h,g,b,S){let A=0;return this.readModule(h-2,g-2,b,S)&&(A|=1),A<<=1,this.readModule(h-2,g-1,b,S)&&(A|=1),A<<=1,this.readModule(h-1,g-2,b,S)&&(A|=1),A<<=1,this.readModule(h-1,g-1,b,S)&&(A|=1),A<<=1,this.readModule(h-1,g,b,S)&&(A|=1),A<<=1,this.readModule(h,g-2,b,S)&&(A|=1),A<<=1,this.readModule(h,g-1,b,S)&&(A|=1),A<<=1,this.readModule(h,g,b,S)&&(A|=1),A}readCorner1(h,g){let b=0;return this.readModule(h-1,0,h,g)&&(b|=1),b<<=1,this.readModule(h-1,1,h,g)&&(b|=1),b<<=1,this.readModule(h-1,2,h,g)&&(b|=1),b<<=1,this.readModule(0,g-2,h,g)&&(b|=1),b<<=1,this.readModule(0,g-1,h,g)&&(b|=1),b<<=1,this.readModule(1,g-1,h,g)&&(b|=1),b<<=1,this.readModule(2,g-1,h,g)&&(b|=1),b<<=1,this.readModule(3,g-1,h,g)&&(b|=1),b}readCorner2(h,g){let b=0;return this.readModule(h-3,0,h,g)&&(b|=1),b<<=1,this.readModule(h-2,0,h,g)&&(b|=1),b<<=1,this.readModule(h-1,0,h,g)&&(b|=1),b<<=1,this.readModule(0,g-4,h,g)&&(b|=1),b<<=1,this.readModule(0,g-3,h,g)&&(b|=1),b<<=1,this.readModule(0,g-2,h,g)&&(b|=1),b<<=1,this.readModule(0,g-1,h,g)&&(b|=1),b<<=1,this.readModule(1,g-1,h,g)&&(b|=1),b}readCorner3(h,g){let b=0;return this.readModule(h-1,0,h,g)&&(b|=1),b<<=1,this.readModule(h-1,g-1,h,g)&&(b|=1),b<<=1,this.readModule(0,g-3,h,g)&&(b|=1),b<<=1,this.readModule(0,g-2,h,g)&&(b|=1),b<<=1,this.readModule(0,g-1,h,g)&&(b|=1),b<<=1,this.readModule(1,g-3,h,g)&&(b|=1),b<<=1,this.readModule(1,g-2,h,g)&&(b|=1),b<<=1,this.readModule(1,g-1,h,g)&&(b|=1),b}readCorner4(h,g){let b=0;return this.readModule(h-3,0,h,g)&&(b|=1),b<<=1,this.readModule(h-2,0,h,g)&&(b|=1),b<<=1,this.readModule(h-1,0,h,g)&&(b|=1),b<<=1,this.readModule(0,g-2,h,g)&&(b|=1),b<<=1,this.readModule(0,g-1,h,g)&&(b|=1),b<<=1,this.readModule(1,g-1,h,g)&&(b|=1),b<<=1,this.readModule(2,g-1,h,g)&&(b|=1),b<<=1,this.readModule(3,g-1,h,g)&&(b|=1),b}extractDataRegion(h){const g=this.version.getSymbolSizeRows(),b=this.version.getSymbolSizeColumns();if(h.getHeight()!==g)throw new p("Dimension of bitMatrix must match the version size");const S=this.version.getDataRegionSizeRows(),A=this.version.getDataRegionSizeColumns(),I=g/S|0,R=b/A|0,V=I*S,te=R*A,ue=new me(te,V);for(let ve=0;ve<I;++ve){const Ne=ve*S;for(let Me=0;Me<R;++Me){const qe=Me*A;for(let $e=0;$e<S;++$e){const Xe=ve*(S+2)+1+$e,ct=Ne+$e;for(let Tt=0;Tt<A;++Tt){const _t=Me*(A+2)+1+Tt;if(h.get(_t,Xe)){const At=qe+Tt;ue.set(At,ct)}}}}}return ue}}class Rn{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g){const b=g.getECBlocks();let S=0;const A=b.getECBlocks();for(let $e of A)S+=$e.getCount();const I=new Array(S);let R=0;for(let $e of A)for(let Xe=0;Xe<$e.getCount();Xe++){const ct=$e.getDataCodewords(),Tt=b.getECCodewords()+ct;I[R++]=new Rn(ct,new Uint8Array(Tt))}const te=I[0].codewords.length-b.getECCodewords(),ue=te-1;let ve=0;for(let $e=0;$e<ue;$e++)for(let Xe=0;Xe<R;Xe++)I[Xe].codewords[$e]=h[ve++];const Ne=g.getVersionNumber()===24,Me=Ne?8:R;for(let $e=0;$e<Me;$e++)I[$e].codewords[te-1]=h[ve++];const qe=I[0].codewords.length;for(let $e=te;$e<qe;$e++)for(let Xe=0;Xe<R;Xe++){const ct=Ne?(Xe+8)%R:Xe,Tt=Ne&&ct>7?$e-1:$e;I[ct].codewords[Tt]=h[ve++]}if(ve!==h.length)throw new p;return I}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hs{constructor(h){this.bytes=h,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(h){if(h<1||h>32||h>this.available())throw new p(""+h);let g=0,b=this.bitOffset,S=this.byteOffset;const A=this.bytes;if(b>0){const I=8-b,R=h<I?h:I,V=I-R,te=255>>8-R<<V;g=(A[S]&te)>>V,h-=R,b+=R,b===8&&(b=0,S++)}if(h>0){for(;h>=8;)g=g<<8|A[S]&255,S++,h-=8;if(h>0){const I=8-h,R=255>>I<<I;g=g<<h|(A[S]&R)>>I,b+=h}}return this.bitOffset=b,this.byteOffset=S,g}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mr;(function(je){je[je.PAD_ENCODE=0]="PAD_ENCODE",je[je.ASCII_ENCODE=1]="ASCII_ENCODE",je[je.C40_ENCODE=2]="C40_ENCODE",je[je.TEXT_ENCODE=3]="TEXT_ENCODE",je[je.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",je[je.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",je[je.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mr||(Mr={}));class Qa{static decode(h){const g=new hs(h),b=new ie,S=new ie,A=new Array;let I=Mr.ASCII_ENCODE;do if(I===Mr.ASCII_ENCODE)I=this.decodeAsciiSegment(g,b,S);else{switch(I){case Mr.C40_ENCODE:this.decodeC40Segment(g,b);break;case Mr.TEXT_ENCODE:this.decodeTextSegment(g,b);break;case Mr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(g,b);break;case Mr.EDIFACT_ENCODE:this.decodeEdifactSegment(g,b);break;case Mr.BASE256_ENCODE:this.decodeBase256Segment(g,b,A);break;default:throw new W}I=Mr.ASCII_ENCODE}while(I!==Mr.PAD_ENCODE&&g.available()>0);return S.length()>0&&b.append(S.toString()),new ke(h,b.toString(),A.length===0?null:A,null)}static decodeAsciiSegment(h,g,b){let S=!1;do{let A=h.readBits(8);if(A===0)throw new W;if(A<=128)return S&&(A+=128),g.append(String.fromCharCode(A-1)),Mr.ASCII_ENCODE;if(A===129)return Mr.PAD_ENCODE;if(A<=229){const I=A-130;I<10&&g.append("0"),g.append(""+I)}else switch(A){case 230:return Mr.C40_ENCODE;case 231:return Mr.BASE256_ENCODE;case 232:g.append("");break;case 233:case 234:break;case 235:S=!0;break;case 236:g.append("[)>05"),b.insert(0,"");break;case 237:g.append("[)>06"),b.insert(0,"");break;case 238:return Mr.ANSIX12_ENCODE;case 239:return Mr.TEXT_ENCODE;case 240:return Mr.EDIFACT_ENCODE;case 241:break;default:if(A!==254||h.available()!==0)throw new W;break}}while(h.available()>0);return Mr.ASCII_ENCODE}static decodeC40Segment(h,g){let b=!1;const S=[];let A=0;do{if(h.available()===8)return;const I=h.readBits(8);if(I===254)return;this.parseTwoBytes(I,h.readBits(8),S);for(let R=0;R<3;R++){const V=S[R];switch(A){case 0:if(V<3)A=V+1;else if(V<this.C40_BASIC_SET_CHARS.length){const te=this.C40_BASIC_SET_CHARS[V];b?(g.append(String.fromCharCode(te.charCodeAt(0)+128)),b=!1):g.append(te)}else throw new W;break;case 1:b?(g.append(String.fromCharCode(V+128)),b=!1):g.append(String.fromCharCode(V)),A=0;break;case 2:if(V<this.C40_SHIFT2_SET_CHARS.length){const te=this.C40_SHIFT2_SET_CHARS[V];b?(g.append(String.fromCharCode(te.charCodeAt(0)+128)),b=!1):g.append(te)}else switch(V){case 27:g.append("");break;case 30:b=!0;break;default:throw new W}A=0;break;case 3:b?(g.append(String.fromCharCode(V+224)),b=!1):g.append(String.fromCharCode(V+96)),A=0;break;default:throw new W}}}while(h.available()>0)}static decodeTextSegment(h,g){let b=!1,S=[],A=0;do{if(h.available()===8)return;const I=h.readBits(8);if(I===254)return;this.parseTwoBytes(I,h.readBits(8),S);for(let R=0;R<3;R++){const V=S[R];switch(A){case 0:if(V<3)A=V+1;else if(V<this.TEXT_BASIC_SET_CHARS.length){const te=this.TEXT_BASIC_SET_CHARS[V];b?(g.append(String.fromCharCode(te.charCodeAt(0)+128)),b=!1):g.append(te)}else throw new W;break;case 1:b?(g.append(String.fromCharCode(V+128)),b=!1):g.append(String.fromCharCode(V)),A=0;break;case 2:if(V<this.TEXT_SHIFT2_SET_CHARS.length){const te=this.TEXT_SHIFT2_SET_CHARS[V];b?(g.append(String.fromCharCode(te.charCodeAt(0)+128)),b=!1):g.append(te)}else switch(V){case 27:g.append("");break;case 30:b=!0;break;default:throw new W}A=0;break;case 3:if(V<this.TEXT_SHIFT3_SET_CHARS.length){const te=this.TEXT_SHIFT3_SET_CHARS[V];b?(g.append(String.fromCharCode(te.charCodeAt(0)+128)),b=!1):g.append(te),A=0}else throw new W;break;default:throw new W}}}while(h.available()>0)}static decodeAnsiX12Segment(h,g){const b=[];do{if(h.available()===8)return;const S=h.readBits(8);if(S===254)return;this.parseTwoBytes(S,h.readBits(8),b);for(let A=0;A<3;A++){const I=b[A];switch(I){case 0:g.append("\r");break;case 1:g.append("*");break;case 2:g.append(">");break;case 3:g.append(" ");break;default:if(I<14)g.append(String.fromCharCode(I+44));else if(I<40)g.append(String.fromCharCode(I+51));else throw new W;break}}}while(h.available()>0)}static parseTwoBytes(h,g,b){let S=(h<<8)+g-1,A=Math.floor(S/1600);b[0]=A,S-=A*1600,A=Math.floor(S/40),b[1]=A,b[2]=S-A*40}static decodeEdifactSegment(h,g){do{if(h.available()<=16)return;for(let b=0;b<4;b++){let S=h.readBits(6);if(S===31){const A=8-h.getBitOffset();A!==8&&h.readBits(A);return}(S&32)===0&&(S|=64),g.append(String.fromCharCode(S))}}while(h.available()>0)}static decodeBase256Segment(h,g,b){let S=1+h.getByteOffset();const A=this.unrandomize255State(h.readBits(8),S++);let I;if(A===0?I=h.available()/8|0:A<250?I=A:I=250*(A-249)+this.unrandomize255State(h.readBits(8),S++),I<0)throw new W;const R=new Uint8Array(I);for(let V=0;V<I;V++){if(h.available()<8)throw new W;R[V]=this.unrandomize255State(h.readBits(8),S++)}b.push(R);try{g.append(ne.decode(R,Z.ISO88591))}catch(V){throw new Oe("Platform does not support required encoding: "+V.message)}}static unrandomize255State(h,g){const b=149*g%255+1,S=h-b;return S>=0?S:S+256}}Qa.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Qa.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Qa.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Qa.TEXT_SHIFT2_SET_CHARS=Qa.C40_SHIFT2_SET_CHARS,Qa.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ao{constructor(){this.rsDecoder=new at(vt.DATA_MATRIX_FIELD_256)}decode(h){const g=new Jr(h),b=g.getVersion(),S=g.readCodewords(),A=Rn.getDataBlocks(S,b);let I=0;for(let te of A)I+=te.getNumDataCodewords();const R=new Uint8Array(I),V=A.length;for(let te=0;te<V;te++){const ue=A[te],ve=ue.getCodewords(),Ne=ue.getNumDataCodewords();this.correctErrors(ve,Ne);for(let Me=0;Me<Ne;Me++)R[Me*V+te]=ve[Me]}return Qa.decode(R)}correctErrors(h,g){const b=new Int32Array(h);try{this.rsDecoder.decode(b,h.length-g)}catch{throw new v}for(let S=0;S<g;S++)h[S]=b[S]}}class ir{constructor(h){this.image=h,this.rectangleDetector=new zr(this.image)}detect(){const h=this.rectangleDetector.detect();let g=this.detectSolid1(h);if(g=this.detectSolid2(g),g[3]=this.correctTopRight(g),!g[3])throw new ce;g=this.shiftToModuleCenter(g);const b=g[0],S=g[1],A=g[2],I=g[3];let R=this.transitionsBetween(b,I)+1,V=this.transitionsBetween(A,I)+1;(R&1)===1&&(R+=1),(V&1)===1&&(V+=1),4*R<7*V&&4*V<7*R&&(R=V=Math.max(R,V));let te=ir.sampleGrid(this.image,b,S,A,I,R,V);return new xr(te,[b,S,A,I])}static shiftPoint(h,g,b){let S=(g.getX()-h.getX())/(b+1),A=(g.getY()-h.getY())/(b+1);return new St(h.getX()+S,h.getY()+A)}static moveAway(h,g,b){let S=h.getX(),A=h.getY();return S<g?S-=1:S+=1,A<b?A-=1:A+=1,new St(S,A)}detectSolid1(h){let g=h[0],b=h[1],S=h[3],A=h[2],I=this.transitionsBetween(g,b),R=this.transitionsBetween(b,S),V=this.transitionsBetween(S,A),te=this.transitionsBetween(A,g),ue=I,ve=[A,g,b,S];return ue>R&&(ue=R,ve[0]=g,ve[1]=b,ve[2]=S,ve[3]=A),ue>V&&(ue=V,ve[0]=b,ve[1]=S,ve[2]=A,ve[3]=g),ue>te&&(ve[0]=S,ve[1]=A,ve[2]=g,ve[3]=b),ve}detectSolid2(h){let g=h[0],b=h[1],S=h[2],A=h[3],I=this.transitionsBetween(g,A),R=ir.shiftPoint(b,S,(I+1)*4),V=ir.shiftPoint(S,b,(I+1)*4),te=this.transitionsBetween(R,g),ue=this.transitionsBetween(V,A);return te<ue?(h[0]=g,h[1]=b,h[2]=S,h[3]=A):(h[0]=b,h[1]=S,h[2]=A,h[3]=g),h}correctTopRight(h){let g=h[0],b=h[1],S=h[2],A=h[3],I=this.transitionsBetween(g,A),R=this.transitionsBetween(b,A),V=ir.shiftPoint(g,b,(R+1)*4),te=ir.shiftPoint(S,b,(I+1)*4);I=this.transitionsBetween(V,A),R=this.transitionsBetween(te,A);let ue=new St(A.getX()+(S.getX()-b.getX())/(I+1),A.getY()+(S.getY()-b.getY())/(I+1)),ve=new St(A.getX()+(g.getX()-b.getX())/(R+1),A.getY()+(g.getY()-b.getY())/(R+1));if(!this.isValid(ue))return this.isValid(ve)?ve:null;if(!this.isValid(ve))return ue;let Ne=this.transitionsBetween(V,ue)+this.transitionsBetween(te,ue),Me=this.transitionsBetween(V,ve)+this.transitionsBetween(te,ve);return Ne>Me?ue:ve}shiftToModuleCenter(h){let g=h[0],b=h[1],S=h[2],A=h[3],I=this.transitionsBetween(g,A)+1,R=this.transitionsBetween(S,A)+1,V=ir.shiftPoint(g,b,R*4),te=ir.shiftPoint(S,b,I*4);I=this.transitionsBetween(V,A)+1,R=this.transitionsBetween(te,A)+1,(I&1)===1&&(I+=1),(R&1)===1&&(R+=1);let ue=(g.getX()+b.getX()+S.getX()+A.getX())/4,ve=(g.getY()+b.getY()+S.getY()+A.getY())/4;g=ir.moveAway(g,ue,ve),b=ir.moveAway(b,ue,ve),S=ir.moveAway(S,ue,ve),A=ir.moveAway(A,ue,ve);let Ne,Me;return V=ir.shiftPoint(g,b,R*4),V=ir.shiftPoint(V,A,I*4),Ne=ir.shiftPoint(b,g,R*4),Ne=ir.shiftPoint(Ne,S,I*4),te=ir.shiftPoint(S,A,R*4),te=ir.shiftPoint(te,b,I*4),Me=ir.shiftPoint(A,S,R*4),Me=ir.shiftPoint(Me,g,I*4),[V,Ne,te,Me]}isValid(h){return h.getX()>=0&&h.getX()<this.image.getWidth()&&h.getY()>0&&h.getY()<this.image.getHeight()}static sampleGrid(h,g,b,S,A,I,R){return Yr.getInstance().sampleGrid(h,I,R,.5,.5,I-.5,.5,I-.5,R-.5,.5,R-.5,g.getX(),g.getY(),A.getX(),A.getY(),S.getX(),S.getY(),b.getX(),b.getY())}transitionsBetween(h,g){let b=Math.trunc(h.getX()),S=Math.trunc(h.getY()),A=Math.trunc(g.getX()),I=Math.trunc(g.getY()),R=Math.abs(I-S)>Math.abs(A-b);if(R){let $e=b;b=S,S=$e,$e=A,A=I,I=$e}let V=Math.abs(A-b),te=Math.abs(I-S),ue=-V/2,ve=S<I?1:-1,Ne=b<A?1:-1,Me=0,qe=this.image.get(R?S:b,R?b:S);for(let $e=b,Xe=S;$e!==A;$e+=Ne){let ct=this.image.get(R?Xe:$e,R?$e:Xe);if(ct!==qe&&(Me++,qe=ct),ue+=te,ue>0){if(Xe===I)break;Xe+=ve,ue-=V}}return Me}}class Bn{constructor(){this.decoder=new Ao}decode(h,g=null){let b,S;if(g!=null&&g.has(q.PURE_BARCODE)){const te=Bn.extractPureBits(h.getBlackMatrix());b=this.decoder.decode(te),S=Bn.NO_POINTS}else{const te=new ir(h.getBlackMatrix()).detect();b=this.decoder.decode(te.getBits()),S=te.getPoints()}const A=b.getRawBytes(),I=new H(b.getText(),A,8*A.length,S,ge.DATA_MATRIX,C.currentTimeMillis()),R=b.getByteSegments();R!=null&&I.putMetadata(Le.BYTE_SEGMENTS,R);const V=b.getECLevel();return V!=null&&I.putMetadata(Le.ERROR_CORRECTION_LEVEL,V),I}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),b=h.getBottomRightOnBit();if(g==null||b==null)throw new ce;const S=this.moduleSize(g,h);let A=g[1];const I=b[1];let R=g[0];const te=(b[0]-R+1)/S,ue=(I-A+1)/S;if(te<=0||ue<=0)throw new ce;const ve=S/2;A+=ve,R+=ve;const Ne=new me(te,ue);for(let Me=0;Me<ue;Me++){const qe=A+Me*S;for(let $e=0;$e<te;$e++)h.get(R+$e*S,qe)&&Ne.set($e,Me)}return Ne}static moduleSize(h,g){const b=g.getWidth();let S=h[0];const A=h[1];for(;S<b&&g.get(S,A);)S++;if(S===b)throw new ce;const I=S-h[0];if(I===0)throw new ce;return I}}Bn.NO_POINTS=[];class Ya extends se{constructor(h=500){super(new Bn,h)}}var di;(function(je){je[je.L=0]="L",je[je.M=1]="M",je[je.Q=2]="Q",je[je.H=3]="H"})(di||(di={}));class Or{constructor(h,g,b){this.value=h,this.stringValue=g,this.bits=b,Or.FOR_BITS.set(b,this),Or.FOR_VALUE.set(h,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(h){switch(h){case"L":return Or.L;case"M":return Or.M;case"Q":return Or.Q;case"H":return Or.H;default:throw new f(h+"not available")}}toString(){return this.stringValue}equals(h){if(!(h instanceof Or))return!1;const g=h;return this.value===g.value}static forBits(h){if(h<0||h>=Or.FOR_BITS.size)throw new p;return Or.FOR_BITS.get(h)}}Or.FOR_BITS=new Map,Or.FOR_VALUE=new Map,Or.L=new Or(di.L,"L",1),Or.M=new Or(di.M,"M",0),Or.Q=new Or(di.Q,"Q",3),Or.H=new Or(di.H,"H",2);class Xi{constructor(h){this.errorCorrectionLevel=Or.forBits(h>>3&3),this.dataMask=h&7}static numBitsDiffering(h,g){return D.bitCount(h^g)}static decodeFormatInformation(h,g){const b=Xi.doDecodeFormatInformation(h,g);return b!==null?b:Xi.doDecodeFormatInformation(h^Xi.FORMAT_INFO_MASK_QR,g^Xi.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(h,g){let b=Number.MAX_SAFE_INTEGER,S=0;for(const A of Xi.FORMAT_INFO_DECODE_LOOKUP){const I=A[0];if(I===h||I===g)return new Xi(A[1]);let R=Xi.numBitsDiffering(h,I);R<b&&(S=A[1],b=R),h!==g&&(R=Xi.numBitsDiffering(g,I),R<b&&(S=A[1],b=R))}return b<=3?new Xi(S):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(h){if(!(h instanceof Xi))return!1;const g=h;return this.errorCorrectionLevel===g.errorCorrectionLevel&&this.dataMask===g.dataMask}}Xi.FORMAT_INFO_MASK_QR=21522,Xi.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class nt{constructor(h,...g){this.ecCodewordsPerBlock=h,this.ecBlocks=g}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let h=0;const g=this.ecBlocks;for(const b of g)h+=b.getCount();return h}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Pe{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ht{constructor(h,g,...b){this.versionNumber=h,this.alignmentPatternCenters=g,this.ecBlocks=b;let S=0;const A=b[0].getECCodewordsPerBlock(),I=b[0].getECBlocks();for(const R of I)S+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(h){return this.ecBlocks[h.getValue()]}static getProvisionalVersionForDimension(h){if(h%4!==1)throw new W;try{return this.getVersionForNumber((h-17)/4)}catch{throw new W}}static getVersionForNumber(h){if(h<1||h>40)throw new p;return Ht.VERSIONS[h-1]}static decodeVersionInformation(h){let g=Number.MAX_SAFE_INTEGER,b=0;for(let S=0;S<Ht.VERSION_DECODE_INFO.length;S++){const A=Ht.VERSION_DECODE_INFO[S];if(A===h)return Ht.getVersionForNumber(S+7);const I=Xi.numBitsDiffering(h,A);I<g&&(b=S+7,g=I)}return g<=3?Ht.getVersionForNumber(b):null}buildFunctionPattern(){const h=this.getDimensionForVersion(),g=new me(h);g.setRegion(0,0,9,9),g.setRegion(h-8,0,8,9),g.setRegion(0,h-8,9,8);const b=this.alignmentPatternCenters.length;for(let S=0;S<b;S++){const A=this.alignmentPatternCenters[S]-2;for(let I=0;I<b;I++)S===0&&(I===0||I===b-1)||S===b-1&&I===0||g.setRegion(this.alignmentPatternCenters[I]-2,A,5,5)}return g.setRegion(6,9,1,h-17),g.setRegion(9,6,h-17,1),this.versionNumber>6&&(g.setRegion(h-11,0,3,6),g.setRegion(0,h-11,6,3)),g}toString(){return""+this.versionNumber}}Ht.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ht.VERSIONS=[new Ht(1,new Int32Array(0),new nt(7,new Pe(1,19)),new nt(10,new Pe(1,16)),new nt(13,new Pe(1,13)),new nt(17,new Pe(1,9))),new Ht(2,Int32Array.from([6,18]),new nt(10,new Pe(1,34)),new nt(16,new Pe(1,28)),new nt(22,new Pe(1,22)),new nt(28,new Pe(1,16))),new Ht(3,Int32Array.from([6,22]),new nt(15,new Pe(1,55)),new nt(26,new Pe(1,44)),new nt(18,new Pe(2,17)),new nt(22,new Pe(2,13))),new Ht(4,Int32Array.from([6,26]),new nt(20,new Pe(1,80)),new nt(18,new Pe(2,32)),new nt(26,new Pe(2,24)),new nt(16,new Pe(4,9))),new Ht(5,Int32Array.from([6,30]),new nt(26,new Pe(1,108)),new nt(24,new Pe(2,43)),new nt(18,new Pe(2,15),new Pe(2,16)),new nt(22,new Pe(2,11),new Pe(2,12))),new Ht(6,Int32Array.from([6,34]),new nt(18,new Pe(2,68)),new nt(16,new Pe(4,27)),new nt(24,new Pe(4,19)),new nt(28,new Pe(4,15))),new Ht(7,Int32Array.from([6,22,38]),new nt(20,new Pe(2,78)),new nt(18,new Pe(4,31)),new nt(18,new Pe(2,14),new Pe(4,15)),new nt(26,new Pe(4,13),new Pe(1,14))),new Ht(8,Int32Array.from([6,24,42]),new nt(24,new Pe(2,97)),new nt(22,new Pe(2,38),new Pe(2,39)),new nt(22,new Pe(4,18),new Pe(2,19)),new nt(26,new Pe(4,14),new Pe(2,15))),new Ht(9,Int32Array.from([6,26,46]),new nt(30,new Pe(2,116)),new nt(22,new Pe(3,36),new Pe(2,37)),new nt(20,new Pe(4,16),new Pe(4,17)),new nt(24,new Pe(4,12),new Pe(4,13))),new Ht(10,Int32Array.from([6,28,50]),new nt(18,new Pe(2,68),new Pe(2,69)),new nt(26,new Pe(4,43),new Pe(1,44)),new nt(24,new Pe(6,19),new Pe(2,20)),new nt(28,new Pe(6,15),new Pe(2,16))),new Ht(11,Int32Array.from([6,30,54]),new nt(20,new Pe(4,81)),new nt(30,new Pe(1,50),new Pe(4,51)),new nt(28,new Pe(4,22),new Pe(4,23)),new nt(24,new Pe(3,12),new Pe(8,13))),new Ht(12,Int32Array.from([6,32,58]),new nt(24,new Pe(2,92),new Pe(2,93)),new nt(22,new Pe(6,36),new Pe(2,37)),new nt(26,new Pe(4,20),new Pe(6,21)),new nt(28,new Pe(7,14),new Pe(4,15))),new Ht(13,Int32Array.from([6,34,62]),new nt(26,new Pe(4,107)),new nt(22,new Pe(8,37),new Pe(1,38)),new nt(24,new Pe(8,20),new Pe(4,21)),new nt(22,new Pe(12,11),new Pe(4,12))),new Ht(14,Int32Array.from([6,26,46,66]),new nt(30,new Pe(3,115),new Pe(1,116)),new nt(24,new Pe(4,40),new Pe(5,41)),new nt(20,new Pe(11,16),new Pe(5,17)),new nt(24,new Pe(11,12),new Pe(5,13))),new Ht(15,Int32Array.from([6,26,48,70]),new nt(22,new Pe(5,87),new Pe(1,88)),new nt(24,new Pe(5,41),new Pe(5,42)),new nt(30,new Pe(5,24),new Pe(7,25)),new nt(24,new Pe(11,12),new Pe(7,13))),new Ht(16,Int32Array.from([6,26,50,74]),new nt(24,new Pe(5,98),new Pe(1,99)),new nt(28,new Pe(7,45),new Pe(3,46)),new nt(24,new Pe(15,19),new Pe(2,20)),new nt(30,new Pe(3,15),new Pe(13,16))),new Ht(17,Int32Array.from([6,30,54,78]),new nt(28,new Pe(1,107),new Pe(5,108)),new nt(28,new Pe(10,46),new Pe(1,47)),new nt(28,new Pe(1,22),new Pe(15,23)),new nt(28,new Pe(2,14),new Pe(17,15))),new Ht(18,Int32Array.from([6,30,56,82]),new nt(30,new Pe(5,120),new Pe(1,121)),new nt(26,new Pe(9,43),new Pe(4,44)),new nt(28,new Pe(17,22),new Pe(1,23)),new nt(28,new Pe(2,14),new Pe(19,15))),new Ht(19,Int32Array.from([6,30,58,86]),new nt(28,new Pe(3,113),new Pe(4,114)),new nt(26,new Pe(3,44),new Pe(11,45)),new nt(26,new Pe(17,21),new Pe(4,22)),new nt(26,new Pe(9,13),new Pe(16,14))),new Ht(20,Int32Array.from([6,34,62,90]),new nt(28,new Pe(3,107),new Pe(5,108)),new nt(26,new Pe(3,41),new Pe(13,42)),new nt(30,new Pe(15,24),new Pe(5,25)),new nt(28,new Pe(15,15),new Pe(10,16))),new Ht(21,Int32Array.from([6,28,50,72,94]),new nt(28,new Pe(4,116),new Pe(4,117)),new nt(26,new Pe(17,42)),new nt(28,new Pe(17,22),new Pe(6,23)),new nt(30,new Pe(19,16),new Pe(6,17))),new Ht(22,Int32Array.from([6,26,50,74,98]),new nt(28,new Pe(2,111),new Pe(7,112)),new nt(28,new Pe(17,46)),new nt(30,new Pe(7,24),new Pe(16,25)),new nt(24,new Pe(34,13))),new Ht(23,Int32Array.from([6,30,54,78,102]),new nt(30,new Pe(4,121),new Pe(5,122)),new nt(28,new Pe(4,47),new Pe(14,48)),new nt(30,new Pe(11,24),new Pe(14,25)),new nt(30,new Pe(16,15),new Pe(14,16))),new Ht(24,Int32Array.from([6,28,54,80,106]),new nt(30,new Pe(6,117),new Pe(4,118)),new nt(28,new Pe(6,45),new Pe(14,46)),new nt(30,new Pe(11,24),new Pe(16,25)),new nt(30,new Pe(30,16),new Pe(2,17))),new Ht(25,Int32Array.from([6,32,58,84,110]),new nt(26,new Pe(8,106),new Pe(4,107)),new nt(28,new Pe(8,47),new Pe(13,48)),new nt(30,new Pe(7,24),new Pe(22,25)),new nt(30,new Pe(22,15),new Pe(13,16))),new Ht(26,Int32Array.from([6,30,58,86,114]),new nt(28,new Pe(10,114),new Pe(2,115)),new nt(28,new Pe(19,46),new Pe(4,47)),new nt(28,new Pe(28,22),new Pe(6,23)),new nt(30,new Pe(33,16),new Pe(4,17))),new Ht(27,Int32Array.from([6,34,62,90,118]),new nt(30,new Pe(8,122),new Pe(4,123)),new nt(28,new Pe(22,45),new Pe(3,46)),new nt(30,new Pe(8,23),new Pe(26,24)),new nt(30,new Pe(12,15),new Pe(28,16))),new Ht(28,Int32Array.from([6,26,50,74,98,122]),new nt(30,new Pe(3,117),new Pe(10,118)),new nt(28,new Pe(3,45),new Pe(23,46)),new nt(30,new Pe(4,24),new Pe(31,25)),new nt(30,new Pe(11,15),new Pe(31,16))),new Ht(29,Int32Array.from([6,30,54,78,102,126]),new nt(30,new Pe(7,116),new Pe(7,117)),new nt(28,new Pe(21,45),new Pe(7,46)),new nt(30,new Pe(1,23),new Pe(37,24)),new nt(30,new Pe(19,15),new Pe(26,16))),new Ht(30,Int32Array.from([6,26,52,78,104,130]),new nt(30,new Pe(5,115),new Pe(10,116)),new nt(28,new Pe(19,47),new Pe(10,48)),new nt(30,new Pe(15,24),new Pe(25,25)),new nt(30,new Pe(23,15),new Pe(25,16))),new Ht(31,Int32Array.from([6,30,56,82,108,134]),new nt(30,new Pe(13,115),new Pe(3,116)),new nt(28,new Pe(2,46),new Pe(29,47)),new nt(30,new Pe(42,24),new Pe(1,25)),new nt(30,new Pe(23,15),new Pe(28,16))),new Ht(32,Int32Array.from([6,34,60,86,112,138]),new nt(30,new Pe(17,115)),new nt(28,new Pe(10,46),new Pe(23,47)),new nt(30,new Pe(10,24),new Pe(35,25)),new nt(30,new Pe(19,15),new Pe(35,16))),new Ht(33,Int32Array.from([6,30,58,86,114,142]),new nt(30,new Pe(17,115),new Pe(1,116)),new nt(28,new Pe(14,46),new Pe(21,47)),new nt(30,new Pe(29,24),new Pe(19,25)),new nt(30,new Pe(11,15),new Pe(46,16))),new Ht(34,Int32Array.from([6,34,62,90,118,146]),new nt(30,new Pe(13,115),new Pe(6,116)),new nt(28,new Pe(14,46),new Pe(23,47)),new nt(30,new Pe(44,24),new Pe(7,25)),new nt(30,new Pe(59,16),new Pe(1,17))),new Ht(35,Int32Array.from([6,30,54,78,102,126,150]),new nt(30,new Pe(12,121),new Pe(7,122)),new nt(28,new Pe(12,47),new Pe(26,48)),new nt(30,new Pe(39,24),new Pe(14,25)),new nt(30,new Pe(22,15),new Pe(41,16))),new Ht(36,Int32Array.from([6,24,50,76,102,128,154]),new nt(30,new Pe(6,121),new Pe(14,122)),new nt(28,new Pe(6,47),new Pe(34,48)),new nt(30,new Pe(46,24),new Pe(10,25)),new nt(30,new Pe(2,15),new Pe(64,16))),new Ht(37,Int32Array.from([6,28,54,80,106,132,158]),new nt(30,new Pe(17,122),new Pe(4,123)),new nt(28,new Pe(29,46),new Pe(14,47)),new nt(30,new Pe(49,24),new Pe(10,25)),new nt(30,new Pe(24,15),new Pe(46,16))),new Ht(38,Int32Array.from([6,32,58,84,110,136,162]),new nt(30,new Pe(4,122),new Pe(18,123)),new nt(28,new Pe(13,46),new Pe(32,47)),new nt(30,new Pe(48,24),new Pe(14,25)),new nt(30,new Pe(42,15),new Pe(32,16))),new Ht(39,Int32Array.from([6,26,54,82,110,138,166]),new nt(30,new Pe(20,117),new Pe(4,118)),new nt(28,new Pe(40,47),new Pe(7,48)),new nt(30,new Pe(43,24),new Pe(22,25)),new nt(30,new Pe(10,15),new Pe(67,16))),new Ht(40,Int32Array.from([6,30,58,86,114,142,170]),new nt(30,new Pe(19,118),new Pe(6,119)),new nt(28,new Pe(18,47),new Pe(31,48)),new nt(30,new Pe(34,24),new Pe(34,25)),new nt(30,new Pe(20,15),new Pe(61,16)))];var ri;(function(je){je[je.DATA_MASK_000=0]="DATA_MASK_000",je[je.DATA_MASK_001=1]="DATA_MASK_001",je[je.DATA_MASK_010=2]="DATA_MASK_010",je[je.DATA_MASK_011=3]="DATA_MASK_011",je[je.DATA_MASK_100=4]="DATA_MASK_100",je[je.DATA_MASK_101=5]="DATA_MASK_101",je[je.DATA_MASK_110=6]="DATA_MASK_110",je[je.DATA_MASK_111=7]="DATA_MASK_111"})(ri||(ri={}));class la{constructor(h,g){this.value=h,this.isMasked=g}unmaskBitMatrix(h,g){for(let b=0;b<g;b++)for(let S=0;S<g;S++)this.isMasked(b,S)&&h.flip(S,b)}}la.values=new Map([[ri.DATA_MASK_000,new la(ri.DATA_MASK_000,(je,h)=>(je+h&1)===0)],[ri.DATA_MASK_001,new la(ri.DATA_MASK_001,(je,h)=>(je&1)===0)],[ri.DATA_MASK_010,new la(ri.DATA_MASK_010,(je,h)=>h%3===0)],[ri.DATA_MASK_011,new la(ri.DATA_MASK_011,(je,h)=>(je+h)%3===0)],[ri.DATA_MASK_100,new la(ri.DATA_MASK_100,(je,h)=>(Math.floor(je/2)+Math.floor(h/3)&1)===0)],[ri.DATA_MASK_101,new la(ri.DATA_MASK_101,(je,h)=>je*h%6===0)],[ri.DATA_MASK_110,new la(ri.DATA_MASK_110,(je,h)=>je*h%6<3)],[ri.DATA_MASK_111,new la(ri.DATA_MASK_111,(je,h)=>(je+h+je*h%3&1)===0)]]);class Ps{constructor(h){const g=h.getHeight();if(g<21||(g&3)!==1)throw new W;this.bitMatrix=h}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let h=0;for(let A=0;A<6;A++)h=this.copyBit(A,8,h);h=this.copyBit(7,8,h),h=this.copyBit(8,8,h),h=this.copyBit(8,7,h);for(let A=5;A>=0;A--)h=this.copyBit(8,A,h);const g=this.bitMatrix.getHeight();let b=0;const S=g-7;for(let A=g-1;A>=S;A--)b=this.copyBit(8,A,b);for(let A=g-8;A<g;A++)b=this.copyBit(A,8,b);if(this.parsedFormatInfo=Xi.decodeFormatInformation(h,b),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const h=this.bitMatrix.getHeight(),g=Math.floor((h-17)/4);if(g<=6)return Ht.getVersionForNumber(g);let b=0;const S=h-11;for(let I=5;I>=0;I--)for(let R=h-9;R>=S;R--)b=this.copyBit(R,I,b);let A=Ht.decodeVersionInformation(b);if(A!==null&&A.getDimensionForVersion()===h)return this.parsedVersion=A,A;b=0;for(let I=5;I>=0;I--)for(let R=h-9;R>=S;R--)b=this.copyBit(I,R,b);if(A=Ht.decodeVersionInformation(b),A!==null&&A.getDimensionForVersion()===h)return this.parsedVersion=A,A;throw new W}copyBit(h,g,b){return(this.isMirror?this.bitMatrix.get(g,h):this.bitMatrix.get(h,g))?b<<1|1:b<<1}readCodewords(){const h=this.readFormatInformation(),g=this.readVersion(),b=la.values.get(h.getDataMask()),S=this.bitMatrix.getHeight();b.unmaskBitMatrix(this.bitMatrix,S);const A=g.buildFunctionPattern();let I=!0;const R=new Uint8Array(g.getTotalCodewords());let V=0,te=0,ue=0;for(let ve=S-1;ve>0;ve-=2){ve===6&&ve--;for(let Ne=0;Ne<S;Ne++){const Me=I?S-1-Ne:Ne;for(let qe=0;qe<2;qe++)A.get(ve-qe,Me)||(ue++,te<<=1,this.bitMatrix.get(ve-qe,Me)&&(te|=1),ue===8&&(R[V++]=te,ue=0,te=0))}I=!I}if(V!==g.getTotalCodewords())throw new W;return R}remask(){if(this.parsedFormatInfo===null)return;const h=la.values[this.parsedFormatInfo.getDataMask()],g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g)}setMirror(h){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=h}mirror(){const h=this.bitMatrix;for(let g=0,b=h.getWidth();g<b;g++)for(let S=g+1,A=h.getHeight();S<A;S++)h.get(g,S)!==h.get(S,g)&&(h.flip(S,g),h.flip(g,S))}}class Ko{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g,b){if(h.length!==g.getTotalCodewords())throw new p;const S=g.getECBlocksForLevel(b);let A=0;const I=S.getECBlocks();for(const qe of I)A+=qe.getCount();const R=new Array(A);let V=0;for(const qe of I)for(let $e=0;$e<qe.getCount();$e++){const Xe=qe.getDataCodewords(),ct=S.getECCodewordsPerBlock()+Xe;R[V++]=new Ko(Xe,new Uint8Array(ct))}const te=R[0].codewords.length;let ue=R.length-1;for(;ue>=0&&R[ue].codewords.length!==te;)ue--;ue++;const ve=te-S.getECCodewordsPerBlock();let Ne=0;for(let qe=0;qe<ve;qe++)for(let $e=0;$e<V;$e++)R[$e].codewords[qe]=h[Ne++];for(let qe=ue;qe<V;qe++)R[qe].codewords[ve]=h[Ne++];const Me=R[0].codewords.length;for(let qe=ve;qe<Me;qe++)for(let $e=0;$e<V;$e++){const Xe=$e<ue?qe:qe+1;R[$e].codewords[Xe]=h[Ne++]}return R}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ga;(function(je){je[je.TERMINATOR=0]="TERMINATOR",je[je.NUMERIC=1]="NUMERIC",je[je.ALPHANUMERIC=2]="ALPHANUMERIC",je[je.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",je[je.BYTE=4]="BYTE",je[je.ECI=5]="ECI",je[je.KANJI=6]="KANJI",je[je.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",je[je.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",je[je.HANZI=9]="HANZI"})(ga||(ga={}));class Cr{constructor(h,g,b,S){this.value=h,this.stringValue=g,this.characterCountBitsForVersions=b,this.bits=S,Cr.FOR_BITS.set(S,this),Cr.FOR_VALUE.set(h,this)}static forBits(h){const g=Cr.FOR_BITS.get(h);if(g===void 0)throw new p;return g}getCharacterCountBits(h){const g=h.getVersionNumber();let b;return g<=9?b=0:g<=26?b=1:b=2,this.characterCountBitsForVersions[b]}getValue(){return this.value}getBits(){return this.bits}equals(h){if(!(h instanceof Cr))return!1;const g=h;return this.value===g.value}toString(){return this.stringValue}}Cr.FOR_BITS=new Map,Cr.FOR_VALUE=new Map,Cr.TERMINATOR=new Cr(ga.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Cr.NUMERIC=new Cr(ga.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Cr.ALPHANUMERIC=new Cr(ga.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Cr.STRUCTURED_APPEND=new Cr(ga.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Cr.BYTE=new Cr(ga.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Cr.ECI=new Cr(ga.ECI,"ECI",Int32Array.from([0,0,0]),7),Cr.KANJI=new Cr(ga.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Cr.FNC1_FIRST_POSITION=new Cr(ga.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Cr.FNC1_SECOND_POSITION=new Cr(ga.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Cr.HANZI=new Cr(ga.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Jn{static decode(h,g,b,S){const A=new hs(h);let I=new ie;const R=new Array;let V=-1,te=-1;try{let ue=null,ve=!1,Ne;do{if(A.available()<4)Ne=Cr.TERMINATOR;else{const Me=A.readBits(4);Ne=Cr.forBits(Me)}switch(Ne){case Cr.TERMINATOR:break;case Cr.FNC1_FIRST_POSITION:case Cr.FNC1_SECOND_POSITION:ve=!0;break;case Cr.STRUCTURED_APPEND:if(A.available()<16)throw new W;V=A.readBits(8),te=A.readBits(8);break;case Cr.ECI:const Me=Jn.parseECIValue(A);if(ue=z.getCharacterSetECIByValue(Me),ue===null)throw new W;break;case Cr.HANZI:const qe=A.readBits(4),$e=A.readBits(Ne.getCharacterCountBits(g));qe===Jn.GB2312_SUBSET&&Jn.decodeHanziSegment(A,I,$e);break;default:const Xe=A.readBits(Ne.getCharacterCountBits(g));switch(Ne){case Cr.NUMERIC:Jn.decodeNumericSegment(A,I,Xe);break;case Cr.ALPHANUMERIC:Jn.decodeAlphanumericSegment(A,I,Xe,ve);break;case Cr.BYTE:Jn.decodeByteSegment(A,I,Xe,ue,R,S);break;case Cr.KANJI:Jn.decodeKanjiSegment(A,I,Xe);break;default:throw new W}break}}while(Ne!==Cr.TERMINATOR)}catch{throw new W}return new ke(h,I.toString(),R.length===0?null:R,b===null?null:b.toString(),V,te)}static decodeHanziSegment(h,g,b){if(b*13>h.available())throw new W;const S=new Uint8Array(2*b);let A=0;for(;b>0;){const I=h.readBits(13);let R=I/96<<8&4294967295|I%96;R<959?R+=41377:R+=42657,S[A]=R>>8&255,S[A+1]=R&255,A+=2,b--}try{g.append(ne.decode(S,Z.GB2312))}catch(I){throw new W(I)}}static decodeKanjiSegment(h,g,b){if(b*13>h.available())throw new W;const S=new Uint8Array(2*b);let A=0;for(;b>0;){const I=h.readBits(13);let R=I/192<<8&4294967295|I%192;R<7936?R+=33088:R+=49472,S[A]=R>>8,S[A+1]=R,A+=2,b--}try{g.append(ne.decode(S,Z.SHIFT_JIS))}catch(I){throw new W(I)}}static decodeByteSegment(h,g,b,S,A,I){if(8*b>h.available())throw new W;const R=new Uint8Array(b);for(let te=0;te<b;te++)R[te]=h.readBits(8);let V;S===null?V=Z.guessEncoding(R,I):V=S.getName();try{g.append(ne.decode(R,V))}catch(te){throw new W(te)}A.push(R)}static toAlphaNumericChar(h){if(h>=Jn.ALPHANUMERIC_CHARS.length)throw new W;return Jn.ALPHANUMERIC_CHARS[h]}static decodeAlphanumericSegment(h,g,b,S){const A=g.length();for(;b>1;){if(h.available()<11)throw new W;const I=h.readBits(11);g.append(Jn.toAlphaNumericChar(Math.floor(I/45))),g.append(Jn.toAlphaNumericChar(I%45)),b-=2}if(b===1){if(h.available()<6)throw new W;g.append(Jn.toAlphaNumericChar(h.readBits(6)))}if(S)for(let I=A;I<g.length();I++)g.charAt(I)==="%"&&(I<g.length()-1&&g.charAt(I+1)==="%"?g.deleteCharAt(I+1):g.setCharAt(I,""))}static decodeNumericSegment(h,g,b){for(;b>=3;){if(h.available()<10)throw new W;const S=h.readBits(10);if(S>=1e3)throw new W;g.append(Jn.toAlphaNumericChar(Math.floor(S/100))),g.append(Jn.toAlphaNumericChar(Math.floor(S/10)%10)),g.append(Jn.toAlphaNumericChar(S%10)),b-=3}if(b===2){if(h.available()<7)throw new W;const S=h.readBits(7);if(S>=100)throw new W;g.append(Jn.toAlphaNumericChar(Math.floor(S/10))),g.append(Jn.toAlphaNumericChar(S%10))}else if(b===1){if(h.available()<4)throw new W;const S=h.readBits(4);if(S>=10)throw new W;g.append(Jn.toAlphaNumericChar(S))}}static parseECIValue(h){const g=h.readBits(8);if((g&128)===0)return g&127;if((g&192)===128){const b=h.readBits(8);return(g&63)<<8&4294967295|b}if((g&224)===192){const b=h.readBits(16);return(g&31)<<16&4294967295|b}throw new W}}Jn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Jn.GB2312_SUBSET=1;class Dl{constructor(h){this.mirrored=h}isMirrored(){return this.mirrored}applyMirroredCorrection(h){if(!this.mirrored||h===null||h.length<3)return;const g=h[0];h[0]=h[2],h[2]=g}}class Uc{constructor(){this.rsDecoder=new at(vt.QR_CODE_FIELD_256)}decodeBooleanArray(h,g){return this.decodeBitMatrix(me.parseFromBooleanArray(h),g)}decodeBitMatrix(h,g){const b=new Ps(h);let S=null;try{return this.decodeBitMatrixParser(b,g)}catch(A){S=A}try{b.remask(),b.setMirror(!0),b.readVersion(),b.readFormatInformation(),b.mirror();const A=this.decodeBitMatrixParser(b,g);return A.setOther(new Dl(!0)),A}catch(A){throw S!==null?S:A}}decodeBitMatrixParser(h,g){const b=h.readVersion(),S=h.readFormatInformation().getErrorCorrectionLevel(),A=h.readCodewords(),I=Ko.getDataBlocks(A,b,S);let R=0;for(const ue of I)R+=ue.getNumDataCodewords();const V=new Uint8Array(R);let te=0;for(const ue of I){const ve=ue.getCodewords(),Ne=ue.getNumDataCodewords();this.correctErrors(ve,Ne);for(let Me=0;Me<Ne;Me++)V[te++]=ve[Me]}return Jn.decode(V,b,S,g)}correctErrors(h,g){const b=new Int32Array(h);try{this.rsDecoder.decode(b,h.length-g)}catch{throw new v}for(let S=0;S<g;S++)h[S]=b[S]}}class Oa extends St{constructor(h,g,b){super(h,g),this.estimatedModuleSize=b}aboutEquals(h,g,b){if(Math.abs(g-this.getY())<=h&&Math.abs(b-this.getX())<=h){const S=Math.abs(h-this.estimatedModuleSize);return S<=1||S<=this.estimatedModuleSize}return!1}combineEstimate(h,g,b){const S=(this.getX()+g)/2,A=(this.getY()+h)/2,I=(this.estimatedModuleSize+b)/2;return new Oa(S,A,I)}}class Za{constructor(h,g,b,S,A,I,R){this.image=h,this.startX=g,this.startY=b,this.width=S,this.height=A,this.moduleSize=I,this.resultPointCallback=R,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const h=this.startX,g=this.height,b=this.width,S=h+b,A=this.startY+g/2,I=new Int32Array(3),R=this.image;for(let V=0;V<g;V++){const te=A+((V&1)===0?Math.floor((V+1)/2):-Math.floor((V+1)/2));I[0]=0,I[1]=0,I[2]=0;let ue=h;for(;ue<S&&!R.get(ue,te);)ue++;let ve=0;for(;ue<S;){if(R.get(ue,te))if(ve===1)I[1]++;else if(ve===2){if(this.foundPatternCross(I)){const Ne=this.handlePossibleCenter(I,te,ue);if(Ne!==null)return Ne}I[0]=I[2],I[1]=1,I[2]=0,ve=1}else I[++ve]++;else ve===1&&ve++,I[ve]++;ue++}if(this.foundPatternCross(I)){const Ne=this.handlePossibleCenter(I,te,S);if(Ne!==null)return Ne}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ce}static centerFromEnd(h,g){return g-h[2]-h[1]/2}foundPatternCross(h){const g=this.moduleSize,b=g/2;for(let S=0;S<3;S++)if(Math.abs(g-h[S])>=b)return!1;return!0}crossCheckVertical(h,g,b,S){const A=this.image,I=A.getHeight(),R=this.crossCheckStateCount;R[0]=0,R[1]=0,R[2]=0;let V=h;for(;V>=0&&A.get(g,V)&&R[1]<=b;)R[1]++,V--;if(V<0||R[1]>b)return NaN;for(;V>=0&&!A.get(g,V)&&R[0]<=b;)R[0]++,V--;if(R[0]>b)return NaN;for(V=h+1;V<I&&A.get(g,V)&&R[1]<=b;)R[1]++,V++;if(V===I||R[1]>b)return NaN;for(;V<I&&!A.get(g,V)&&R[2]<=b;)R[2]++,V++;if(R[2]>b)return NaN;const te=R[0]+R[1]+R[2];return 5*Math.abs(te-S)>=2*S?NaN:this.foundPatternCross(R)?Za.centerFromEnd(R,V):NaN}handlePossibleCenter(h,g,b){const S=h[0]+h[1]+h[2],A=Za.centerFromEnd(h,b),I=this.crossCheckVertical(g,A,2*h[1],S);if(!isNaN(I)){const R=(h[0]+h[1]+h[2])/3;for(const te of this.possibleCenters)if(te.aboutEquals(R,I,A))return te.combineEstimate(I,A,R);const V=new Oa(A,I,R);this.possibleCenters.push(V),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(V)}return null}}class Eo extends St{constructor(h,g,b,S){super(h,g),this.estimatedModuleSize=b,this.count=S,S===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(h,g,b){if(Math.abs(g-this.getY())<=h&&Math.abs(b-this.getX())<=h){const S=Math.abs(h-this.estimatedModuleSize);return S<=1||S<=this.estimatedModuleSize}return!1}combineEstimate(h,g,b){const S=this.count+1,A=(this.count*this.getX()+g)/S,I=(this.count*this.getY()+h)/S,R=(this.count*this.estimatedModuleSize+b)/S;return new Eo(A,I,R,S)}}class Pl{constructor(h){this.bottomLeft=h[0],this.topLeft=h[1],this.topRight=h[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class bi{constructor(h,g){this.image=h,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=g}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(h){const g=h!=null&&h.get(q.TRY_HARDER)!==void 0,b=h!=null&&h.get(q.PURE_BARCODE)!==void 0,S=this.image,A=S.getHeight(),I=S.getWidth();let R=Math.floor(3*A/(4*bi.MAX_MODULES));(R<bi.MIN_SKIP||g)&&(R=bi.MIN_SKIP);let V=!1;const te=new Int32Array(5);for(let ve=R-1;ve<A&&!V;ve+=R){te[0]=0,te[1]=0,te[2]=0,te[3]=0,te[4]=0;let Ne=0;for(let Me=0;Me<I;Me++)if(S.get(Me,ve))(Ne&1)===1&&Ne++,te[Ne]++;else if((Ne&1)===0)if(Ne===4)if(bi.foundPatternCross(te)){if(this.handlePossibleCenter(te,ve,Me,b)===!0)if(R=2,this.hasSkipped===!0)V=this.haveMultiplyConfirmedCenters();else{const $e=this.findRowSkip();$e>te[2]&&(ve+=$e-te[2]-R,Me=I-1)}else{te[0]=te[2],te[1]=te[3],te[2]=te[4],te[3]=1,te[4]=0,Ne=3;continue}Ne=0,te[0]=0,te[1]=0,te[2]=0,te[3]=0,te[4]=0}else te[0]=te[2],te[1]=te[3],te[2]=te[4],te[3]=1,te[4]=0,Ne=3;else te[++Ne]++;else te[Ne]++;bi.foundPatternCross(te)&&this.handlePossibleCenter(te,ve,I,b)===!0&&(R=te[0],this.hasSkipped&&(V=this.haveMultiplyConfirmedCenters()))}const ue=this.selectBestPatterns();return St.orderBestPatterns(ue),new Pl(ue)}static centerFromEnd(h,g){return g-h[4]-h[3]-h[2]/2}static foundPatternCross(h){let g=0;for(let A=0;A<5;A++){const I=h[A];if(I===0)return!1;g+=I}if(g<7)return!1;const b=g/7,S=b/2;return Math.abs(b-h[0])<S&&Math.abs(b-h[1])<S&&Math.abs(3*b-h[2])<3*S&&Math.abs(b-h[3])<S&&Math.abs(b-h[4])<S}getCrossCheckStateCount(){const h=this.crossCheckStateCount;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h}crossCheckDiagonal(h,g,b,S){const A=this.getCrossCheckStateCount();let I=0;const R=this.image;for(;h>=I&&g>=I&&R.get(g-I,h-I);)A[2]++,I++;if(h<I||g<I)return!1;for(;h>=I&&g>=I&&!R.get(g-I,h-I)&&A[1]<=b;)A[1]++,I++;if(h<I||g<I||A[1]>b)return!1;for(;h>=I&&g>=I&&R.get(g-I,h-I)&&A[0]<=b;)A[0]++,I++;if(A[0]>b)return!1;const V=R.getHeight(),te=R.getWidth();for(I=1;h+I<V&&g+I<te&&R.get(g+I,h+I);)A[2]++,I++;if(h+I>=V||g+I>=te)return!1;for(;h+I<V&&g+I<te&&!R.get(g+I,h+I)&&A[3]<b;)A[3]++,I++;if(h+I>=V||g+I>=te||A[3]>=b)return!1;for(;h+I<V&&g+I<te&&R.get(g+I,h+I)&&A[4]<b;)A[4]++,I++;if(A[4]>=b)return!1;const ue=A[0]+A[1]+A[2]+A[3]+A[4];return Math.abs(ue-S)<2*S&&bi.foundPatternCross(A)}crossCheckVertical(h,g,b,S){const A=this.image,I=A.getHeight(),R=this.getCrossCheckStateCount();let V=h;for(;V>=0&&A.get(g,V);)R[2]++,V--;if(V<0)return NaN;for(;V>=0&&!A.get(g,V)&&R[1]<=b;)R[1]++,V--;if(V<0||R[1]>b)return NaN;for(;V>=0&&A.get(g,V)&&R[0]<=b;)R[0]++,V--;if(R[0]>b)return NaN;for(V=h+1;V<I&&A.get(g,V);)R[2]++,V++;if(V===I)return NaN;for(;V<I&&!A.get(g,V)&&R[3]<b;)R[3]++,V++;if(V===I||R[3]>=b)return NaN;for(;V<I&&A.get(g,V)&&R[4]<b;)R[4]++,V++;if(R[4]>=b)return NaN;const te=R[0]+R[1]+R[2]+R[3]+R[4];return 5*Math.abs(te-S)>=2*S?NaN:bi.foundPatternCross(R)?bi.centerFromEnd(R,V):NaN}crossCheckHorizontal(h,g,b,S){const A=this.image,I=A.getWidth(),R=this.getCrossCheckStateCount();let V=h;for(;V>=0&&A.get(V,g);)R[2]++,V--;if(V<0)return NaN;for(;V>=0&&!A.get(V,g)&&R[1]<=b;)R[1]++,V--;if(V<0||R[1]>b)return NaN;for(;V>=0&&A.get(V,g)&&R[0]<=b;)R[0]++,V--;if(R[0]>b)return NaN;for(V=h+1;V<I&&A.get(V,g);)R[2]++,V++;if(V===I)return NaN;for(;V<I&&!A.get(V,g)&&R[3]<b;)R[3]++,V++;if(V===I||R[3]>=b)return NaN;for(;V<I&&A.get(V,g)&&R[4]<b;)R[4]++,V++;if(R[4]>=b)return NaN;const te=R[0]+R[1]+R[2]+R[3]+R[4];return 5*Math.abs(te-S)>=S?NaN:bi.foundPatternCross(R)?bi.centerFromEnd(R,V):NaN}handlePossibleCenter(h,g,b,S){const A=h[0]+h[1]+h[2]+h[3]+h[4];let I=bi.centerFromEnd(h,b),R=this.crossCheckVertical(g,Math.floor(I),h[2],A);if(!isNaN(R)&&(I=this.crossCheckHorizontal(Math.floor(I),Math.floor(R),h[2],A),!isNaN(I)&&(!S||this.crossCheckDiagonal(Math.floor(R),Math.floor(I),h[2],A)))){const V=A/7;let te=!1;const ue=this.possibleCenters;for(let ve=0,Ne=ue.length;ve<Ne;ve++){const Me=ue[ve];if(Me.aboutEquals(V,R,I)){ue[ve]=Me.combineEstimate(R,I,V),te=!0;break}}if(!te){const ve=new Eo(I,R,V);ue.push(ve),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ve)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let g=null;for(const b of this.possibleCenters)if(b.getCount()>=bi.CENTER_QUORUM)if(g==null)g=b;else return this.hasSkipped=!0,Math.floor((Math.abs(g.getX()-b.getX())-Math.abs(g.getY()-b.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let h=0,g=0;const b=this.possibleCenters.length;for(const I of this.possibleCenters)I.getCount()>=bi.CENTER_QUORUM&&(h++,g+=I.getEstimatedModuleSize());if(h<3)return!1;const S=g/b;let A=0;for(const I of this.possibleCenters)A+=Math.abs(I.getEstimatedModuleSize()-S);return A<=.05*g}selectBestPatterns(){const h=this.possibleCenters.length;if(h<3)throw new ce;const g=this.possibleCenters;let b;if(h>3){let S=0,A=0;for(const V of this.possibleCenters){const te=V.getEstimatedModuleSize();S+=te,A+=te*te}b=S/h;let I=Math.sqrt(A/h-b*b);g.sort((V,te)=>{const ue=Math.abs(te.getEstimatedModuleSize()-b),ve=Math.abs(V.getEstimatedModuleSize()-b);return ue<ve?-1:ue>ve?1:0});const R=Math.max(.2*b,I);for(let V=0;V<g.length&&g.length>3;V++){const te=g[V];Math.abs(te.getEstimatedModuleSize()-b)>R&&(g.splice(V,1),V--)}}if(g.length>3){let S=0;for(const A of g)S+=A.getEstimatedModuleSize();b=S/g.length,g.sort((A,I)=>{if(I.getCount()===A.getCount()){const R=Math.abs(I.getEstimatedModuleSize()-b),V=Math.abs(A.getEstimatedModuleSize()-b);return R<V?1:R>V?-1:0}else return I.getCount()-A.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]}}bi.CENTER_QUORUM=2,bi.MIN_SKIP=3,bi.MAX_MODULES=57;class Ft{constructor(h){this.image=h}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(h){this.resultPointCallback=h==null?null:h.get(q.NEED_RESULT_POINT_CALLBACK);const b=new bi(this.image,this.resultPointCallback).find(h);return this.processFinderPatternInfo(b)}processFinderPatternInfo(h){const g=h.getTopLeft(),b=h.getTopRight(),S=h.getBottomLeft(),A=this.calculateModuleSize(g,b,S);if(A<1)throw new ce("No pattern found in proccess finder.");const I=Ft.computeDimension(g,b,S,A),R=Ht.getProvisionalVersionForDimension(I),V=R.getDimensionForVersion()-7;let te=null;if(R.getAlignmentPatternCenters().length>0){const Me=b.getX()-g.getX()+S.getX(),qe=b.getY()-g.getY()+S.getY(),$e=1-3/V,Xe=Math.floor(g.getX()+$e*(Me-g.getX())),ct=Math.floor(g.getY()+$e*(qe-g.getY()));for(let Tt=4;Tt<=16;Tt<<=1)try{te=this.findAlignmentInRegion(A,Xe,ct,Tt);break}catch(_t){if(!(_t instanceof ce))throw _t}}const ue=Ft.createTransform(g,b,S,te,I),ve=Ft.sampleGrid(this.image,ue,I);let Ne;return te===null?Ne=[S,g,b]:Ne=[S,g,b,te],new xr(ve,Ne)}static createTransform(h,g,b,S,A){const I=A-3.5;let R,V,te,ue;return S!==null?(R=S.getX(),V=S.getY(),te=I-3,ue=te):(R=g.getX()-h.getX()+b.getX(),V=g.getY()-h.getY()+b.getY(),te=I,ue=I),Ir.quadrilateralToQuadrilateral(3.5,3.5,I,3.5,te,ue,3.5,I,h.getX(),h.getY(),g.getX(),g.getY(),R,V,b.getX(),b.getY())}static sampleGrid(h,g,b){return Yr.getInstance().sampleGridWithTransform(h,b,b,g)}static computeDimension(h,g,b,S){const A=yt.round(St.distance(h,g)/S),I=yt.round(St.distance(h,b)/S);let R=Math.floor((A+I)/2)+7;switch(R&3){case 0:R++;break;case 2:R--;break;case 3:throw new ce("Dimensions could be not found.")}return R}calculateModuleSize(h,g,b){return(this.calculateModuleSizeOneWay(h,g)+this.calculateModuleSizeOneWay(h,b))/2}calculateModuleSizeOneWay(h,g){const b=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(g.getX()),Math.floor(g.getY())),S=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(h.getX()),Math.floor(h.getY()));return isNaN(b)?S/7:isNaN(S)?b/7:(b+S)/14}sizeOfBlackWhiteBlackRunBothWays(h,g,b,S){let A=this.sizeOfBlackWhiteBlackRun(h,g,b,S),I=1,R=h-(b-h);R<0?(I=h/(h-R),R=0):R>=this.image.getWidth()&&(I=(this.image.getWidth()-1-h)/(R-h),R=this.image.getWidth()-1);let V=Math.floor(g-(S-g)*I);return I=1,V<0?(I=g/(g-V),V=0):V>=this.image.getHeight()&&(I=(this.image.getHeight()-1-g)/(V-g),V=this.image.getHeight()-1),R=Math.floor(h+(R-h)*I),A+=this.sizeOfBlackWhiteBlackRun(h,g,R,V),A-1}sizeOfBlackWhiteBlackRun(h,g,b,S){const A=Math.abs(S-g)>Math.abs(b-h);if(A){let Me=h;h=g,g=Me,Me=b,b=S,S=Me}const I=Math.abs(b-h),R=Math.abs(S-g);let V=-I/2;const te=h<b?1:-1,ue=g<S?1:-1;let ve=0;const Ne=b+te;for(let Me=h,qe=g;Me!==Ne;Me+=te){const $e=A?qe:Me,Xe=A?Me:qe;if(ve===1===this.image.get($e,Xe)){if(ve===2)return yt.distance(Me,qe,h,g);ve++}if(V+=R,V>0){if(qe===S)break;qe+=ue,V-=I}}return ve===2?yt.distance(b+te,S,h,g):NaN}findAlignmentInRegion(h,g,b,S){const A=Math.floor(S*h),I=Math.max(0,g-A),R=Math.min(this.image.getWidth()-1,g+A);if(R-I<h*3)throw new ce("Alignment top exceeds estimated module size.");const V=Math.max(0,b-A),te=Math.min(this.image.getHeight()-1,b+A);if(te-V<h*3)throw new ce("Alignment bottom exceeds estimated module size.");return new Za(this.image,I,V,R-I,te-V,h,this.resultPointCallback).find()}}class ca{constructor(){this.decoder=new Uc}getDecoder(){return this.decoder}decode(h,g){let b,S;if(g!=null&&g.get(q.PURE_BARCODE)!==void 0){const V=ca.extractPureBits(h.getBlackMatrix());b=this.decoder.decodeBitMatrix(V,g),S=ca.NO_POINTS}else{const V=new Ft(h.getBlackMatrix()).detect(g);b=this.decoder.decodeBitMatrix(V.getBits(),g),S=V.getPoints()}b.getOther()instanceof Dl&&b.getOther().applyMirroredCorrection(S);const A=new H(b.getText(),b.getRawBytes(),void 0,S,ge.QR_CODE,void 0),I=b.getByteSegments();I!==null&&A.putMetadata(Le.BYTE_SEGMENTS,I);const R=b.getECLevel();return R!==null&&A.putMetadata(Le.ERROR_CORRECTION_LEVEL,R),b.hasStructuredAppend()&&(A.putMetadata(Le.STRUCTURED_APPEND_SEQUENCE,b.getStructuredAppendSequenceNumber()),A.putMetadata(Le.STRUCTURED_APPEND_PARITY,b.getStructuredAppendParity())),A}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),b=h.getBottomRightOnBit();if(g===null||b===null)throw new ce;const S=this.moduleSize(g,h);let A=g[1],I=b[1],R=g[0],V=b[0];if(R>=V||A>=I)throw new ce;if(I-A!==V-R&&(V=R+(I-A),V>=h.getWidth()))throw new ce;const te=Math.round((V-R+1)/S),ue=Math.round((I-A+1)/S);if(te<=0||ue<=0)throw new ce;if(ue!==te)throw new ce;const ve=Math.floor(S/2);A+=ve,R+=ve;const Ne=R+Math.floor((te-1)*S)-V;if(Ne>0){if(Ne>ve)throw new ce;R-=Ne}const Me=A+Math.floor((ue-1)*S)-I;if(Me>0){if(Me>ve)throw new ce;A-=Me}const qe=new me(te,ue);for(let $e=0;$e<ue;$e++){const Xe=A+Math.floor($e*S);for(let ct=0;ct<te;ct++)h.get(R+Math.floor(ct*S),Xe)&&qe.set(ct,$e)}return qe}static moduleSize(h,g){const b=g.getHeight(),S=g.getWidth();let A=h[0],I=h[1],R=!0,V=0;for(;A<S&&I<b;){if(R!==g.get(A,I)){if(++V===5)break;R=!R}A++,I++}if(A===S||I===b)throw new ce;return(A-h[0])/7}}ca.NO_POINTS=new Array;class Zt{PDF417Common(){}static getBitCountSum(h){return yt.sum(h)}static toIntArray(h){if(h==null||!h.length)return Zt.EMPTY_INT_ARRAY;const g=new Int32Array(h.length);let b=0;for(const S of h)g[b++]=S;return g}static getCodeword(h){const g=O.binarySearch(Zt.SYMBOL_TABLE,h&262143);return g<0?-1:(Zt.CODEWORD_TABLE[g]-1)%Zt.NUMBER_OF_CODEWORDS}}Zt.NUMBER_OF_CODEWORDS=929,Zt.MAX_CODEWORDS_IN_BARCODE=Zt.NUMBER_OF_CODEWORDS-1,Zt.MIN_ROWS_IN_BARCODE=3,Zt.MAX_ROWS_IN_BARCODE=90,Zt.MODULES_IN_CODEWORD=17,Zt.MODULES_IN_STOP_PATTERN=18,Zt.BARS_IN_MODULE=8,Zt.EMPTY_INT_ARRAY=new Int32Array([]),Zt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Zt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class hd{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class Lr{static detectMultiple(h,g,b){let S=h.getBlackMatrix(),A=Lr.detect(b,S);return A.length||(S=S.clone(),S.rotate180(),A=Lr.detect(b,S)),new hd(S,A)}static detect(h,g){const b=new Array;let S=0,A=0,I=!1;for(;S<g.getHeight();){const R=Lr.findVertices(g,S,A);if(R[0]==null&&R[3]==null){if(!I)break;I=!1,A=0;for(const V of b)V[1]!=null&&(S=Math.trunc(Math.max(S,V[1].getY()))),V[3]!=null&&(S=Math.max(S,Math.trunc(V[3].getY())));S+=Lr.ROW_STEP;continue}if(I=!0,b.push(R),!h)break;R[2]!=null?(A=Math.trunc(R[2].getX()),S=Math.trunc(R[2].getY())):(A=Math.trunc(R[4].getX()),S=Math.trunc(R[4].getY()))}return b}static findVertices(h,g,b){const S=h.getHeight(),A=h.getWidth(),I=new Array(8);return Lr.copyToResult(I,Lr.findRowsWithPattern(h,S,A,g,b,Lr.START_PATTERN),Lr.INDEXES_START_PATTERN),I[4]!=null&&(b=Math.trunc(I[4].getX()),g=Math.trunc(I[4].getY())),Lr.copyToResult(I,Lr.findRowsWithPattern(h,S,A,g,b,Lr.STOP_PATTERN),Lr.INDEXES_STOP_PATTERN),I}static copyToResult(h,g,b){for(let S=0;S<b.length;S++)h[b[S]]=g[S]}static findRowsWithPattern(h,g,b,S,A,I){const R=new Array(4);let V=!1;const te=new Int32Array(I.length);for(;S<g;S+=Lr.ROW_STEP){let ve=Lr.findGuardPattern(h,A,S,b,!1,I,te);if(ve!=null){for(;S>0;){const Ne=Lr.findGuardPattern(h,A,--S,b,!1,I,te);if(Ne!=null)ve=Ne;else{S++;break}}R[0]=new St(ve[0],S),R[1]=new St(ve[1],S),V=!0;break}}let ue=S+1;if(V){let ve=0,Ne=Int32Array.from([Math.trunc(R[0].getX()),Math.trunc(R[1].getX())]);for(;ue<g;ue++){const Me=Lr.findGuardPattern(h,Ne[0],ue,b,!1,I,te);if(Me!=null&&Math.abs(Ne[0]-Me[0])<Lr.MAX_PATTERN_DRIFT&&Math.abs(Ne[1]-Me[1])<Lr.MAX_PATTERN_DRIFT)Ne=Me,ve=0;else{if(ve>Lr.SKIPPED_ROW_COUNT_MAX)break;ve++}}ue-=ve+1,R[2]=new St(Ne[0],ue),R[3]=new St(Ne[1],ue)}return ue-S<Lr.BARCODE_MIN_HEIGHT&&O.fill(R,null),R}static findGuardPattern(h,g,b,S,A,I,R){O.fillWithin(R,0,R.length,0);let V=g,te=0;for(;h.get(V,b)&&V>0&&te++<Lr.MAX_PIXEL_DRIFT;)V--;let ue=V,ve=0,Ne=I.length;for(let Me=A;ue<S;ue++)if(h.get(ue,b)!==Me)R[ve]++;else{if(ve===Ne-1){if(Lr.patternMatchVariance(R,I,Lr.MAX_INDIVIDUAL_VARIANCE)<Lr.MAX_AVG_VARIANCE)return new Int32Array([V,ue]);V+=R[0]+R[1],C.arraycopy(R,2,R,0,ve-1),R[ve-1]=0,R[ve]=0,ve--}else ve++;R[ve]=1,Me=!Me}return ve===Ne-1&&Lr.patternMatchVariance(R,I,Lr.MAX_INDIVIDUAL_VARIANCE)<Lr.MAX_AVG_VARIANCE?new Int32Array([V,ue-1]):null}static patternMatchVariance(h,g,b){let S=h.length,A=0,I=0;for(let te=0;te<S;te++)A+=h[te],I+=g[te];if(A<I)return 1/0;let R=A/I;b*=R;let V=0;for(let te=0;te<S;te++){let ue=h[te],ve=g[te]*R,Ne=ue>ve?ue-ve:ve-ue;if(Ne>b)return 1/0;V+=Ne}return V/A}}Lr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Lr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Lr.MAX_AVG_VARIANCE=.42,Lr.MAX_INDIVIDUAL_VARIANCE=.8,Lr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Lr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Lr.MAX_PIXEL_DRIFT=3,Lr.MAX_PATTERN_DRIFT=5,Lr.SKIPPED_ROW_COUNT_MAX=25,Lr.ROW_STEP=5,Lr.BARCODE_MIN_HEIGHT=10;class Tn{constructor(h,g){if(g.length===0)throw new p;this.field=h;let b=g.length;if(b>1&&g[0]===0){let S=1;for(;S<b&&g[S]===0;)S++;S===b?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(b-S),C.arraycopy(g,S,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);if(h===1){let S=0;for(let A of this.coefficients)S=this.field.add(S,A);return S}let g=this.coefficients[0],b=this.coefficients.length;for(let S=1;S<b;S++)g=this.field.add(this.field.multiply(h,g),this.coefficients[S]);return g}add(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,b=h.coefficients;if(g.length>b.length){let I=g;g=b,b=I}let S=new Int32Array(b.length),A=b.length-g.length;C.arraycopy(b,0,S,0,A);for(let I=A;I<b.length;I++)S[I]=this.field.add(g[I-A],b[I]);return new Tn(this.field,S)}subtract(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");return h.isZero()?this:this.add(h.negative())}multiply(h){return h instanceof Tn?this.multiplyOther(h):this.multiplyScalar(h)}multiplyOther(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero()||h.isZero())return new Tn(this.field,new Int32Array([0]));let g=this.coefficients,b=g.length,S=h.coefficients,A=S.length,I=new Int32Array(b+A-1);for(let R=0;R<b;R++){let V=g[R];for(let te=0;te<A;te++)I[R+te]=this.field.add(I[R+te],this.field.multiply(V,S[te]))}return new Tn(this.field,I)}negative(){let h=this.coefficients.length,g=new Int32Array(h);for(let b=0;b<h;b++)g[b]=this.field.subtract(0,this.coefficients[b]);return new Tn(this.field,g)}multiplyScalar(h){if(h===0)return new Tn(this.field,new Int32Array([0]));if(h===1)return this;let g=this.coefficients.length,b=new Int32Array(g);for(let S=0;S<g;S++)b[S]=this.field.multiply(this.coefficients[S],h);return new Tn(this.field,b)}multiplyByMonomial(h,g){if(h<0)throw new p;if(g===0)return new Tn(this.field,new Int32Array([0]));let b=this.coefficients.length,S=new Int32Array(b+h);for(let A=0;A<b;A++)S[A]=this.field.multiply(this.coefficients[A],g);return new Tn(this.field,S)}toString(){let h=new ie;for(let g=this.getDegree();g>=0;g--){let b=this.getCoefficient(g);b!==0&&(b<0?(h.append(" - "),b=-b):h.length()>0&&h.append(" + "),(g===0||b!==1)&&h.append(b),g!==0&&(g===1?h.append("x"):(h.append("x^"),h.append(g))))}return h.toString()}}class gc{add(h,g){return(h+g)%this.modulus}subtract(h,g){return(this.modulus+h-g)%this.modulus}exp(h){return this.expTable[h]}log(h){if(h===0)throw new p;return this.logTable[h]}inverse(h){if(h===0)throw new Qe;return this.expTable[this.modulus-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.modulus-1)]}getSize(){return this.modulus}equals(h){return h===this}}class Rs extends gc{constructor(h,g){super(),this.modulus=h,this.expTable=new Int32Array(h),this.logTable=new Int32Array(h);let b=1;for(let S=0;S<h;S++)this.expTable[S]=b,b=b*g%h;for(let S=0;S<h-1;S++)this.logTable[this.expTable[S]]=S;this.zero=new Tn(this,new Int32Array([0])),this.one=new Tn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new p;if(g===0)return this.zero;let b=new Int32Array(h+1);return b[0]=g,new Tn(this,b)}}Rs.PDF417_GF=new Rs(Zt.NUMBER_OF_CODEWORDS,3);class fs{constructor(){this.field=Rs.PDF417_GF}decode(h,g,b){let S=new Tn(this.field,h),A=new Int32Array(g),I=!1;for(let qe=g;qe>0;qe--){let $e=S.evaluateAt(this.field.exp(qe));A[g-qe]=$e,$e!==0&&(I=!0)}if(!I)return 0;let R=this.field.getOne();if(b!=null)for(const qe of b){let $e=this.field.exp(h.length-1-qe),Xe=new Tn(this.field,new Int32Array([this.field.subtract(0,$e),1]));R=R.multiply(Xe)}let V=new Tn(this.field,A),te=this.runEuclideanAlgorithm(this.field.buildMonomial(g,1),V,g),ue=te[0],ve=te[1],Ne=this.findErrorLocations(ue),Me=this.findErrorMagnitudes(ve,ue,Ne);for(let qe=0;qe<Ne.length;qe++){let $e=h.length-1-this.field.log(Ne[qe]);if($e<0)throw v.getChecksumInstance();h[$e]=this.field.subtract(h[$e],Me[qe])}return Ne.length}runEuclideanAlgorithm(h,g,b){if(h.getDegree()<g.getDegree()){let Ne=h;h=g,g=Ne}let S=h,A=g,I=this.field.getZero(),R=this.field.getOne();for(;A.getDegree()>=Math.round(b/2);){let Ne=S,Me=I;if(S=A,I=R,S.isZero())throw v.getChecksumInstance();A=Ne;let qe=this.field.getZero(),$e=S.getCoefficient(S.getDegree()),Xe=this.field.inverse($e);for(;A.getDegree()>=S.getDegree()&&!A.isZero();){let ct=A.getDegree()-S.getDegree(),Tt=this.field.multiply(A.getCoefficient(A.getDegree()),Xe);qe=qe.add(this.field.buildMonomial(ct,Tt)),A=A.subtract(S.multiplyByMonomial(ct,Tt))}R=qe.multiply(I).subtract(Me).negative()}let V=R.getCoefficient(0);if(V===0)throw v.getChecksumInstance();let te=this.field.inverse(V),ue=R.multiply(te),ve=A.multiply(te);return[ue,ve]}findErrorLocations(h){let g=h.getDegree(),b=new Int32Array(g),S=0;for(let A=1;A<this.field.getSize()&&S<g;A++)h.evaluateAt(A)===0&&(b[S]=this.field.inverse(A),S++);if(S!==g)throw v.getChecksumInstance();return b}findErrorMagnitudes(h,g,b){let S=g.getDegree(),A=new Int32Array(S);for(let te=1;te<=S;te++)A[S-te]=this.field.multiply(te,g.getCoefficient(te));let I=new Tn(this.field,A),R=b.length,V=new Int32Array(R);for(let te=0;te<R;te++){let ue=this.field.inverse(b[te]),ve=this.field.subtract(0,h.evaluateAt(ue)),Ne=this.field.inverse(I.evaluateAt(ue));V[te]=this.field.multiply(ve,Ne)}return V}}class Xa{constructor(h,g,b,S,A){h instanceof Xa?this.constructor_2(h):this.constructor_1(h,g,b,S,A)}constructor_1(h,g,b,S,A){const I=g==null||b==null,R=S==null||A==null;if(I&&R)throw new ce;I?(g=new St(0,S.getY()),b=new St(0,A.getY())):R&&(S=new St(h.getWidth()-1,g.getY()),A=new St(h.getWidth()-1,b.getY())),this.image=h,this.topLeft=g,this.bottomLeft=b,this.topRight=S,this.bottomRight=A,this.minX=Math.trunc(Math.min(g.getX(),b.getX())),this.maxX=Math.trunc(Math.max(S.getX(),A.getX())),this.minY=Math.trunc(Math.min(g.getY(),S.getY())),this.maxY=Math.trunc(Math.max(b.getY(),A.getY()))}constructor_2(h){this.image=h.image,this.topLeft=h.getTopLeft(),this.bottomLeft=h.getBottomLeft(),this.topRight=h.getTopRight(),this.bottomRight=h.getBottomRight(),this.minX=h.getMinX(),this.maxX=h.getMaxX(),this.minY=h.getMinY(),this.maxY=h.getMaxY()}static merge(h,g){return h==null?g:g==null?h:new Xa(h.image,h.topLeft,h.bottomLeft,g.topRight,g.bottomRight)}addMissingRows(h,g,b){let S=this.topLeft,A=this.bottomLeft,I=this.topRight,R=this.bottomRight;if(h>0){let V=b?this.topLeft:this.topRight,te=Math.trunc(V.getY()-h);te<0&&(te=0);let ue=new St(V.getX(),te);b?S=ue:I=ue}if(g>0){let V=b?this.bottomLeft:this.bottomRight,te=Math.trunc(V.getY()+g);te>=this.image.getHeight()&&(te=this.image.getHeight()-1);let ue=new St(V.getX(),te);b?A=ue:R=ue}return new Xa(this.image,S,A,I,R)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class mi{constructor(h,g,b,S){this.columnCount=h,this.errorCorrectionLevel=S,this.rowCountUpperPart=g,this.rowCountLowerPart=b,this.rowCount=g+b}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ks{constructor(){this.buffer=""}static form(h,g){let b=-1;function S(I,R,V,te,ue,ve){if(I==="%%")return"%";if(g[++b]===void 0)return;I=te?parseInt(te.substr(1)):void 0;let Ne=ue?parseInt(ue.substr(1)):void 0,Me;switch(ve){case"s":Me=g[b];break;case"c":Me=g[b][0];break;case"f":Me=parseFloat(g[b]).toFixed(I);break;case"p":Me=parseFloat(g[b]).toPrecision(I);break;case"e":Me=parseFloat(g[b]).toExponential(I);break;case"x":Me=parseInt(g[b]).toString(Ne||16);break;case"d":Me=parseFloat(parseInt(g[b],Ne||10).toPrecision(I)).toFixed(0);break}Me=typeof Me=="object"?JSON.stringify(Me):(+Me).toString(Ne);let qe=parseInt(V),$e=V&&V[0]+""=="0"?"0":" ";for(;Me.length<qe;)Me=R!==void 0?Me+$e:$e+Me;return Me}let A=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(A,S)}format(h,...g){this.buffer+=Ks.form(h,g)}toString(){return this.buffer}}class Ja{constructor(h){this.boundingBox=new Xa(h),this.codewords=new Array(h.getMaxY()-h.getMinY()+1)}getCodewordNearby(h){let g=this.getCodeword(h);if(g!=null)return g;for(let b=1;b<Ja.MAX_NEARBY_DISTANCE;b++){let S=this.imageRowToCodewordIndex(h)-b;if(S>=0&&(g=this.codewords[S],g!=null)||(S=this.imageRowToCodewordIndex(h)+b,S<this.codewords.length&&(g=this.codewords[S],g!=null)))return g}return null}imageRowToCodewordIndex(h){return h-this.boundingBox.getMinY()}setCodeword(h,g){this.codewords[this.imageRowToCodewordIndex(h)]=g}getCodeword(h){return this.codewords[this.imageRowToCodewordIndex(h)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const h=new Ks;let g=0;for(const b of this.codewords){if(b==null){h.format("%3d:    |   %n",g++);continue}h.format("%3d: %3d|%3d%n",g++,b.getRowNumber(),b.getValue())}return h.toString()}}Ja.MAX_NEARBY_DISTANCE=5;class Qo{constructor(){this.values=new Map}setValue(h){h=Math.trunc(h);let g=this.values.get(h);g==null&&(g=0),g++,this.values.set(h,g)}getValue(){let h=-1,g=new Array;for(const[b,S]of this.values.entries()){const A={getKey:()=>b,getValue:()=>S};A.getValue()>h?(h=A.getValue(),g=[],g.push(A.getKey())):A.getValue()===h&&g.push(A.getKey())}return Zt.toIntArray(g)}getConfidence(h){return this.values.get(h)}}class yc extends Ja{constructor(h,g){super(h),this._isLeft=g}setRowNumbers(){for(let h of this.getCodewords())h?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(h){let g=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(g,h);let b=this.getBoundingBox(),S=this._isLeft?b.getTopLeft():b.getTopRight(),A=this._isLeft?b.getBottomLeft():b.getBottomRight(),I=this.imageRowToCodewordIndex(Math.trunc(S.getY())),R=this.imageRowToCodewordIndex(Math.trunc(A.getY())),V=-1,te=1,ue=0;for(let ve=I;ve<R;ve++){if(g[ve]==null)continue;let Ne=g[ve],Me=Ne.getRowNumber()-V;if(Me===0)ue++;else if(Me===1)te=Math.max(te,ue),ue=1,V=Ne.getRowNumber();else if(Me<0||Ne.getRowNumber()>=h.getRowCount()||Me>ve)g[ve]=null;else{let qe;te>2?qe=(te-2)*Me:qe=Me;let $e=qe>=ve;for(let Xe=1;Xe<=qe&&!$e;Xe++)$e=g[ve-Xe]!=null;$e?g[ve]=null:(V=Ne.getRowNumber(),ue=1)}}}getRowHeights(){let h=this.getBarcodeMetadata();if(h==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);let g=new Int32Array(h.getRowCount());for(let b of this.getCodewords())if(b!=null){let S=b.getRowNumber();if(S>=g.length)continue;g[S]++}return g}adjustIncompleteIndicatorColumnRowNumbers(h){let g=this.getBoundingBox(),b=this._isLeft?g.getTopLeft():g.getTopRight(),S=this._isLeft?g.getBottomLeft():g.getBottomRight(),A=this.imageRowToCodewordIndex(Math.trunc(b.getY())),I=this.imageRowToCodewordIndex(Math.trunc(S.getY())),R=this.getCodewords(),V=-1;for(let te=A;te<I;te++){if(R[te]==null)continue;let ue=R[te];ue.setRowNumberAsRowIndicatorColumn();let ve=ue.getRowNumber()-V;ve===0||(ve===1?V=ue.getRowNumber():ue.getRowNumber()>=h.getRowCount()?R[te]=null:V=ue.getRowNumber())}}getBarcodeMetadata(){let h=this.getCodewords(),g=new Qo,b=new Qo,S=new Qo,A=new Qo;for(let R of h){if(R==null)continue;R.setRowNumberAsRowIndicatorColumn();let V=R.getValue()%30,te=R.getRowNumber();switch(this._isLeft||(te+=2),te%3){case 0:b.setValue(V*3+1);break;case 1:A.setValue(V/3),S.setValue(V%3);break;case 2:g.setValue(V+1);break}}if(g.getValue().length===0||b.getValue().length===0||S.getValue().length===0||A.getValue().length===0||g.getValue()[0]<1||b.getValue()[0]+S.getValue()[0]<Zt.MIN_ROWS_IN_BARCODE||b.getValue()[0]+S.getValue()[0]>Zt.MAX_ROWS_IN_BARCODE)return null;let I=new mi(g.getValue()[0],b.getValue()[0],S.getValue()[0],A.getValue()[0]);return this.removeIncorrectCodewords(h,I),I}removeIncorrectCodewords(h,g){for(let b=0;b<h.length;b++){let S=h[b];if(h[b]==null)continue;let A=S.getValue()%30,I=S.getRowNumber();if(I>g.getRowCount()){h[b]=null;continue}switch(this._isLeft||(I+=2),I%3){case 0:A*3+1!==g.getRowCountUpperPart()&&(h[b]=null);break;case 1:(Math.trunc(A/3)!==g.getErrorCorrectionLevel()||A%3!==g.getRowCountLowerPart())&&(h[b]=null);break;case 2:A+1!==g.getColumnCount()&&(h[b]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ki{constructor(h,g){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=h,this.barcodeColumnCount=h.getColumnCount(),this.boundingBox=g,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let h=Zt.MAX_CODEWORDS_IN_BARCODE,g;do g=h,h=this.adjustRowNumbersAndGetCount();while(h>0&&h<g);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(h){h?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let h=this.adjustRowNumbersByRow();if(h===0)return 0;for(let g=1;g<this.barcodeColumnCount+1;g++){let b=this.detectionResultColumns[g].getCodewords();for(let S=0;S<b.length;S++)b[S]!=null&&(b[S].hasValidRowNumber()||this.adjustRowNumbers(g,S,b))}return h}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let h=this.detectionResultColumns[0].getCodewords(),g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let b=0;b<h.length;b++)if(h[b]!=null&&g[b]!=null&&h[b].getRowNumber()===g[b].getRowNumber())for(let S=1;S<=this.barcodeColumnCount;S++){let A=this.detectionResultColumns[S].getCodewords()[b];A!=null&&(A.setRowNumber(h[b].getRowNumber()),A.hasValidRowNumber()||(this.detectionResultColumns[S].getCodewords()[b]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let h=0,g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let b=0;b<g.length;b++){if(g[b]==null)continue;let S=g[b].getRowNumber(),A=0;for(let I=this.barcodeColumnCount+1;I>0&&A<this.ADJUST_ROW_NUMBER_SKIP;I--){let R=this.detectionResultColumns[I].getCodewords()[b];R!=null&&(A=ki.adjustRowNumberIfValid(S,A,R),R.hasValidRowNumber()||h++)}}return h}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let h=0,g=this.detectionResultColumns[0].getCodewords();for(let b=0;b<g.length;b++){if(g[b]==null)continue;let S=g[b].getRowNumber(),A=0;for(let I=1;I<this.barcodeColumnCount+1&&A<this.ADJUST_ROW_NUMBER_SKIP;I++){let R=this.detectionResultColumns[I].getCodewords()[b];R!=null&&(A=ki.adjustRowNumberIfValid(S,A,R),R.hasValidRowNumber()||h++)}}return h}static adjustRowNumberIfValid(h,g,b){return b==null||b.hasValidRowNumber()||(b.isValidRowNumber(h)?(b.setRowNumber(h),g=0):++g),g}adjustRowNumbers(h,g,b){if(!this.detectionResultColumns[h-1])return;let S=b[g],A=this.detectionResultColumns[h-1].getCodewords(),I=A;this.detectionResultColumns[h+1]!=null&&(I=this.detectionResultColumns[h+1].getCodewords());let R=new Array(14);R[2]=A[g],R[3]=I[g],g>0&&(R[0]=b[g-1],R[4]=A[g-1],R[5]=I[g-1]),g>1&&(R[8]=b[g-2],R[10]=A[g-2],R[11]=I[g-2]),g<b.length-1&&(R[1]=b[g+1],R[6]=A[g+1],R[7]=I[g+1]),g<b.length-2&&(R[9]=b[g+2],R[12]=A[g+2],R[13]=I[g+2]);for(let V of R)if(ki.adjustRowNumber(S,V))return}static adjustRowNumber(h,g){return g==null?!1:g.hasValidRowNumber()&&g.getBucket()===h.getBucket()?(h.setRowNumber(g.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(h){this.boundingBox=h}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(h,g){this.detectionResultColumns[h]=g}getDetectionResultColumn(h){return this.detectionResultColumns[h]}toString(){let h=this.detectionResultColumns[0];h==null&&(h=this.detectionResultColumns[this.barcodeColumnCount+1]);let g=new Ks;for(let b=0;b<h.getCodewords().length;b++){g.format("CW %3d:",b);for(let S=0;S<this.barcodeColumnCount+2;S++){if(this.detectionResultColumns[S]==null){g.format("    |   ");continue}let A=this.detectionResultColumns[S].getCodewords()[b];if(A==null){g.format("    |   ");continue}g.format(" %3d|%3d",A.getRowNumber(),A.getValue())}g.format("%n")}return g.toString()}}class ms{constructor(h,g,b,S){this.rowNumber=ms.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(h),this.endX=Math.trunc(g),this.bucket=Math.trunc(b),this.value=Math.trunc(S)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(h){return h!==ms.BARCODE_ROW_UNKNOWN&&this.bucket===h%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(h){this.rowNumber=h}toString(){return this.rowNumber+"|"+this.value}}ms.BARCODE_ROW_UNKNOWN=-1;class ji{static initialize(){for(let h=0;h<Zt.SYMBOL_TABLE.length;h++){let g=Zt.SYMBOL_TABLE[h],b=g&1;for(let S=0;S<Zt.BARS_IN_MODULE;S++){let A=0;for(;(g&1)===b;)A+=1,g>>=1;b=g&1,ji.RATIOS_TABLE[h]||(ji.RATIOS_TABLE[h]=new Array(Zt.BARS_IN_MODULE)),ji.RATIOS_TABLE[h][Zt.BARS_IN_MODULE-S-1]=Math.fround(A/Zt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(h){let g=ji.getDecodedCodewordValue(ji.sampleBitCounts(h));return g!==-1?g:ji.getClosestDecodedValue(h)}static sampleBitCounts(h){let g=yt.sum(h),b=new Int32Array(Zt.BARS_IN_MODULE),S=0,A=0;for(let I=0;I<Zt.MODULES_IN_CODEWORD;I++){let R=g/(2*Zt.MODULES_IN_CODEWORD)+I*g/Zt.MODULES_IN_CODEWORD;A+h[S]<=R&&(A+=h[S],S++),b[S]++}return b}static getDecodedCodewordValue(h){let g=ji.getBitValue(h);return Zt.getCodeword(g)===-1?-1:g}static getBitValue(h){let g=0;for(let b=0;b<h.length;b++)for(let S=0;S<h[b];S++)g=g<<1|(b%2===0?1:0);return Math.trunc(g)}static getClosestDecodedValue(h){let g=yt.sum(h),b=new Array(Zt.BARS_IN_MODULE);if(g>1)for(let I=0;I<b.length;I++)b[I]=Math.fround(h[I]/g);let S=rr.MAX_VALUE,A=-1;this.bSymbolTableReady||ji.initialize();for(let I=0;I<ji.RATIOS_TABLE.length;I++){let R=0,V=ji.RATIOS_TABLE[I];for(let te=0;te<Zt.BARS_IN_MODULE;te++){let ue=Math.fround(V[te]-b[te]);if(R+=Math.fround(ue*ue),R>=S)break}R<S&&(S=R,A=Zt.SYMBOL_TABLE[I])}return A}}ji.bSymbolTableReady=!1,ji.RATIOS_TABLE=new Array(Zt.SYMBOL_TABLE.length).map(je=>new Array(Zt.BARS_IN_MODULE));class Yo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(h){this.segmentIndex=h}getFileId(){return this.fileId}setFileId(h){this.fileId=h}getOptionalData(){return this.optionalData}setOptionalData(h){this.optionalData=h}isLastSegment(){return this.lastSegment}setLastSegment(h){this.lastSegment=h}getSegmentCount(){return this.segmentCount}setSegmentCount(h){this.segmentCount=h}getSender(){return this.sender||null}setSender(h){this.sender=h}getAddressee(){return this.addressee||null}setAddressee(h){this.addressee=h}getFileName(){return this.fileName}setFileName(h){this.fileName=h}getFileSize(){return this.fileSize}setFileSize(h){this.fileSize=h}getChecksum(){return this.checksum}setChecksum(h){this.checksum=h}getTimestamp(){return this.timestamp}setTimestamp(h){this.timestamp=h}}class mn{static parseLong(h,g=void 0){return parseInt(h,g)}}class $l extends d{}$l.kind="NullPointerException";class ya{writeBytes(h){this.writeBytesOffset(h,0,h.length)}writeBytesOffset(h,g,b){if(h==null)throw new $l;if(g<0||g>h.length||b<0||g+b>h.length||g+b<0)throw new N;if(b===0)return;for(let S=0;S<b;S++)this.write(h[g+S])}flush(){}close(){}}class ao extends d{}class Gl extends ya{constructor(h=32){if(super(),this.count=0,h<0)throw new p("Negative initial size: "+h);this.buf=new Uint8Array(h)}ensureCapacity(h){h-this.buf.length>0&&this.grow(h)}grow(h){let b=this.buf.length<<1;if(b-h<0&&(b=h),b<0){if(h<0)throw new ao;b=D.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,b)}write(h){this.ensureCapacity(this.count+1),this.buf[this.count]=h,this.count+=1}writeBytesOffset(h,g,b){if(g<0||g>h.length||b<0||g+b-h.length>0)throw new N;this.ensureCapacity(this.count+b),C.arraycopy(h,g,this.buf,this.count,b),this.count+=b}writeTo(h){h.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(h){return h?typeof h=="string"?this.toString_string(h):this.toString_number(h):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(h){return new String(this.buf).toString()}toString_number(h){return new String(this.buf).toString()}close(){}}var Fn;(function(je){je[je.ALPHA=0]="ALPHA",je[je.LOWER=1]="LOWER",je[je.MIXED=2]="MIXED",je[je.PUNCT=3]="PUNCT",je[je.ALPHA_SHIFT=4]="ALPHA_SHIFT",je[je.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Fn||(Fn={}));function _o(){if(typeof window<"u")return window.BigInt||null;if(typeof Rx<"u")return Rx.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let To;function Io(je){if(typeof To>"u"&&(To=_o()),To===null)throw new Error("BigInt is not supported!");return To(je)}function Rl(){let je=[];je[0]=Io(1);let h=Io(900);je[1]=h;for(let g=2;g<16;g++)je[g]=je[g-1]*h;return je}class pt{static decode(h,g){let b=new ie(""),S=z.ISO8859_1;b.enableDecoding(S);let A=1,I=h[A++],R=new Yo;for(;A<h[0];){switch(I){case pt.TEXT_COMPACTION_MODE_LATCH:A=pt.textCompaction(h,A,b);break;case pt.BYTE_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:A=pt.byteCompaction(I,h,S,A,b);break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[A++]);break;case pt.NUMERIC_COMPACTION_MODE_LATCH:A=pt.numericCompaction(h,A,b);break;case pt.ECI_CHARSET:z.getCharacterSetECIByValue(h[A++]);break;case pt.ECI_GENERAL_PURPOSE:A+=2;break;case pt.ECI_USER_DEFINED:A++;break;case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:A=pt.decodeMacroBlock(h,A,R);break;case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:throw new W;default:A--,A=pt.textCompaction(h,A,b);break}if(A<h.length)I=h[A++];else throw W.getFormatInstance()}if(b.length()===0)throw W.getFormatInstance();let V=new ke(null,b.toString(),null,g);return V.setOther(R),V}static decodeMacroBlock(h,g,b){if(g+pt.NUMBER_OF_SEQUENCE_CODEWORDS>h[0])throw W.getFormatInstance();let S=new Int32Array(pt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let R=0;R<pt.NUMBER_OF_SEQUENCE_CODEWORDS;R++,g++)S[R]=h[g];b.setSegmentIndex(D.parseInt(pt.decodeBase900toBase10(S,pt.NUMBER_OF_SEQUENCE_CODEWORDS)));let A=new ie;g=pt.textCompaction(h,g,A),b.setFileId(A.toString());let I=-1;for(h[g]===pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(I=g+1);g<h[0];)switch(h[g]){case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(g++,h[g]){case pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let R=new ie;g=pt.textCompaction(h,g+1,R),b.setFileName(R.toString());break;case pt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let V=new ie;g=pt.textCompaction(h,g+1,V),b.setSender(V.toString());break;case pt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let te=new ie;g=pt.textCompaction(h,g+1,te),b.setAddressee(te.toString());break;case pt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let ue=new ie;g=pt.numericCompaction(h,g+1,ue),b.setSegmentCount(D.parseInt(ue.toString()));break;case pt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ve=new ie;g=pt.numericCompaction(h,g+1,ve),b.setTimestamp(mn.parseLong(ve.toString()));break;case pt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Ne=new ie;g=pt.numericCompaction(h,g+1,Ne),b.setChecksum(D.parseInt(Ne.toString()));break;case pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Me=new ie;g=pt.numericCompaction(h,g+1,Me),b.setFileSize(mn.parseLong(Me.toString()));break;default:throw W.getFormatInstance()}break;case pt.MACRO_PDF417_TERMINATOR:g++,b.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(I!==-1){let R=g-I;b.isLastSegment()&&R--,b.setOptionalData(O.copyOfRange(h,I,I+R))}return g}static textCompaction(h,g,b){let S=new Int32Array((h[0]-g)*2),A=new Int32Array((h[0]-g)*2),I=0,R=!1;for(;g<h[0]&&!R;){let V=h[g++];if(V<pt.TEXT_COMPACTION_MODE_LATCH)S[I]=V/30,S[I+1]=V%30,I+=2;else switch(V){case pt.TEXT_COMPACTION_MODE_LATCH:S[I++]=pt.TEXT_COMPACTION_MODE_LATCH;break;case pt.BYTE_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.NUMERIC_COMPACTION_MODE_LATCH:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:g--,R=!0;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S[I]=pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,V=h[g++],A[I]=V,I++;break}}return pt.decodeTextCompaction(S,A,I,b),g}static decodeTextCompaction(h,g,b,S){let A=Fn.ALPHA,I=Fn.ALPHA,R=0;for(;R<b;){let V=h[R],te="";switch(A){case Fn.ALPHA:if(V<26)te=String.fromCharCode(65+V);else switch(V){case 26:te=" ";break;case pt.LL:A=Fn.LOWER;break;case pt.ML:A=Fn.MIXED;break;case pt.PS:I=A,A=Fn.PUNCT_SHIFT;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(g[R]);break;case pt.TEXT_COMPACTION_MODE_LATCH:A=Fn.ALPHA;break}break;case Fn.LOWER:if(V<26)te=String.fromCharCode(97+V);else switch(V){case 26:te=" ";break;case pt.AS:I=A,A=Fn.ALPHA_SHIFT;break;case pt.ML:A=Fn.MIXED;break;case pt.PS:I=A,A=Fn.PUNCT_SHIFT;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(g[R]);break;case pt.TEXT_COMPACTION_MODE_LATCH:A=Fn.ALPHA;break}break;case Fn.MIXED:if(V<pt.PL)te=pt.MIXED_CHARS[V];else switch(V){case pt.PL:A=Fn.PUNCT;break;case 26:te=" ";break;case pt.LL:A=Fn.LOWER;break;case pt.AL:A=Fn.ALPHA;break;case pt.PS:I=A,A=Fn.PUNCT_SHIFT;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(g[R]);break;case pt.TEXT_COMPACTION_MODE_LATCH:A=Fn.ALPHA;break}break;case Fn.PUNCT:if(V<pt.PAL)te=pt.PUNCT_CHARS[V];else switch(V){case pt.PAL:A=Fn.ALPHA;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(g[R]);break;case pt.TEXT_COMPACTION_MODE_LATCH:A=Fn.ALPHA;break}break;case Fn.ALPHA_SHIFT:if(A=I,V<26)te=String.fromCharCode(65+V);else switch(V){case 26:te=" ";break;case pt.TEXT_COMPACTION_MODE_LATCH:A=Fn.ALPHA;break}break;case Fn.PUNCT_SHIFT:if(A=I,V<pt.PAL)te=pt.PUNCT_CHARS[V];else switch(V){case pt.PAL:A=Fn.ALPHA;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(g[R]);break;case pt.TEXT_COMPACTION_MODE_LATCH:A=Fn.ALPHA;break}break}te!==""&&S.append(te),R++}}static byteCompaction(h,g,b,S,A){let I=new Gl,R=0,V=0,te=!1;switch(h){case pt.BYTE_COMPACTION_MODE_LATCH:let ue=new Int32Array(6),ve=g[S++];for(;S<g[0]&&!te;)switch(ue[R++]=ve,V=900*V+ve,ve=g[S++],ve){case pt.TEXT_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH:case pt.NUMERIC_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:S--,te=!0;break;default:if(R%5===0&&R>0){for(let Ne=0;Ne<6;++Ne)I.write(Number(Io(V)>>Io(8*(5-Ne))));V=0,R=0}break}S===g[0]&&ve<pt.TEXT_COMPACTION_MODE_LATCH&&(ue[R++]=ve);for(let Ne=0;Ne<R;Ne++)I.write(ue[Ne]);break;case pt.BYTE_COMPACTION_MODE_LATCH_6:for(;S<g[0]&&!te;){let Ne=g[S++];if(Ne<pt.TEXT_COMPACTION_MODE_LATCH)R++,V=900*V+Ne;else switch(Ne){case pt.TEXT_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH:case pt.NUMERIC_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:S--,te=!0;break}if(R%5===0&&R>0){for(let Me=0;Me<6;++Me)I.write(Number(Io(V)>>Io(8*(5-Me))));V=0,R=0}}break}return A.append(ne.decode(I.toByteArray(),b)),S}static numericCompaction(h,g,b){let S=0,A=!1,I=new Int32Array(pt.MAX_NUMERIC_CODEWORDS);for(;g<h[0]&&!A;){let R=h[g++];if(g===h[0]&&(A=!0),R<pt.TEXT_COMPACTION_MODE_LATCH)I[S]=R,S++;else switch(R){case pt.TEXT_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:g--,A=!0;break}(S%pt.MAX_NUMERIC_CODEWORDS===0||R===pt.NUMERIC_COMPACTION_MODE_LATCH||A)&&S>0&&(b.append(pt.decodeBase900toBase10(I,S)),S=0)}return g}static decodeBase900toBase10(h,g){let b=Io(0);for(let A=0;A<g;A++)b+=pt.EXP900[g-A-1]*Io(h[A]);let S=b.toString();if(S.charAt(0)!=="1")throw new W;return S.substring(1)}}pt.TEXT_COMPACTION_MODE_LATCH=900,pt.BYTE_COMPACTION_MODE_LATCH=901,pt.NUMERIC_COMPACTION_MODE_LATCH=902,pt.BYTE_COMPACTION_MODE_LATCH_6=924,pt.ECI_USER_DEFINED=925,pt.ECI_GENERAL_PURPOSE=926,pt.ECI_CHARSET=927,pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pt.MACRO_PDF417_TERMINATOR=922,pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pt.MAX_NUMERIC_CODEWORDS=15,pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pt.PL=25,pt.LL=27,pt.AS=27,pt.ML=28,pt.AL=28,pt.PS=29,pt.PAL=29,pt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pt.EXP900=_o()?Rl():[],pt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ee{constructor(){}static decode(h,g,b,S,A,I,R){let V=new Xa(h,g,b,S,A),te=null,ue=null,ve;for(let qe=!0;;qe=!1){if(g!=null&&(te=ee.getRowIndicatorColumn(h,V,g,!0,I,R)),S!=null&&(ue=ee.getRowIndicatorColumn(h,V,S,!1,I,R)),ve=ee.merge(te,ue),ve==null)throw ce.getNotFoundInstance();let $e=ve.getBoundingBox();if(qe&&$e!=null&&($e.getMinY()<V.getMinY()||$e.getMaxY()>V.getMaxY()))V=$e;else break}ve.setBoundingBox(V);let Ne=ve.getBarcodeColumnCount()+1;ve.setDetectionResultColumn(0,te),ve.setDetectionResultColumn(Ne,ue);let Me=te!=null;for(let qe=1;qe<=Ne;qe++){let $e=Me?qe:Ne-qe;if(ve.getDetectionResultColumn($e)!==void 0)continue;let Xe;$e===0||$e===Ne?Xe=new yc(V,$e===0):Xe=new Ja(V),ve.setDetectionResultColumn($e,Xe);let ct=-1,Tt=ct;for(let _t=V.getMinY();_t<=V.getMaxY();_t++){if(ct=ee.getStartColumn(ve,$e,_t,Me),ct<0||ct>V.getMaxX()){if(Tt===-1)continue;ct=Tt}let At=ee.detectCodeword(h,V.getMinX(),V.getMaxX(),Me,ct,_t,I,R);At!=null&&(Xe.setCodeword(_t,At),Tt=ct,I=Math.min(I,At.getWidth()),R=Math.max(R,At.getWidth()))}}return ee.createDecoderResult(ve)}static merge(h,g){if(h==null&&g==null)return null;let b=ee.getBarcodeMetadata(h,g);if(b==null)return null;let S=Xa.merge(ee.adjustBoundingBox(h),ee.adjustBoundingBox(g));return new ki(b,S)}static adjustBoundingBox(h){if(h==null)return null;let g=h.getRowHeights();if(g==null)return null;let b=ee.getMax(g),S=0;for(let R of g)if(S+=b-R,R>0)break;let A=h.getCodewords();for(let R=0;S>0&&A[R]==null;R++)S--;let I=0;for(let R=g.length-1;R>=0&&(I+=b-g[R],!(g[R]>0));R--);for(let R=A.length-1;I>0&&A[R]==null;R--)I--;return h.getBoundingBox().addMissingRows(S,I,h.isLeft())}static getMax(h){let g=-1;for(let b of h)g=Math.max(g,b);return g}static getBarcodeMetadata(h,g){let b;if(h==null||(b=h.getBarcodeMetadata())==null)return g==null?null:g.getBarcodeMetadata();let S;return g==null||(S=g.getBarcodeMetadata())==null?b:b.getColumnCount()!==S.getColumnCount()&&b.getErrorCorrectionLevel()!==S.getErrorCorrectionLevel()&&b.getRowCount()!==S.getRowCount()?null:b}static getRowIndicatorColumn(h,g,b,S,A,I){let R=new yc(g,S);for(let V=0;V<2;V++){let te=V===0?1:-1,ue=Math.trunc(Math.trunc(b.getX()));for(let ve=Math.trunc(Math.trunc(b.getY()));ve<=g.getMaxY()&&ve>=g.getMinY();ve+=te){let Ne=ee.detectCodeword(h,0,h.getWidth(),S,ue,ve,A,I);Ne!=null&&(R.setCodeword(ve,Ne),S?ue=Ne.getStartX():ue=Ne.getEndX())}}return R}static adjustCodewordCount(h,g){let b=g[0][1],S=b.getValue(),A=h.getBarcodeColumnCount()*h.getBarcodeRowCount()-ee.getNumberOfECCodeWords(h.getBarcodeECLevel());if(S.length===0){if(A<1||A>Zt.MAX_CODEWORDS_IN_BARCODE)throw ce.getNotFoundInstance();b.setValue(A)}else S[0]!==A&&b.setValue(A)}static createDecoderResult(h){let g=ee.createBarcodeMatrix(h);ee.adjustCodewordCount(h,g);let b=new Array,S=new Int32Array(h.getBarcodeRowCount()*h.getBarcodeColumnCount()),A=[],I=new Array;for(let V=0;V<h.getBarcodeRowCount();V++)for(let te=0;te<h.getBarcodeColumnCount();te++){let ue=g[V][te+1].getValue(),ve=V*h.getBarcodeColumnCount()+te;ue.length===0?b.push(ve):ue.length===1?S[ve]=ue[0]:(I.push(ve),A.push(ue))}let R=new Array(A.length);for(let V=0;V<R.length;V++)R[V]=A[V];return ee.createDecoderResultFromAmbiguousValues(h.getBarcodeECLevel(),S,Zt.toIntArray(b),Zt.toIntArray(I),R)}static createDecoderResultFromAmbiguousValues(h,g,b,S,A){let I=new Int32Array(S.length),R=100;for(;R-- >0;){for(let V=0;V<I.length;V++)g[S[V]]=A[V][I[V]];try{return ee.decodeCodewords(g,h,b)}catch(V){if(!(V instanceof v))throw V}if(I.length===0)throw v.getChecksumInstance();for(let V=0;V<I.length;V++)if(I[V]<A[V].length-1){I[V]++;break}else if(I[V]=0,V===I.length-1)throw v.getChecksumInstance()}throw v.getChecksumInstance()}static createBarcodeMatrix(h){let g=Array.from({length:h.getBarcodeRowCount()},()=>new Array(h.getBarcodeColumnCount()+2));for(let S=0;S<g.length;S++)for(let A=0;A<g[S].length;A++)g[S][A]=new Qo;let b=0;for(let S of h.getDetectionResultColumns()){if(S!=null){for(let A of S.getCodewords())if(A!=null){let I=A.getRowNumber();if(I>=0){if(I>=g.length)continue;g[I][b].setValue(A.getValue())}}}b++}return g}static isValidBarcodeColumn(h,g){return g>=0&&g<=h.getBarcodeColumnCount()+1}static getStartColumn(h,g,b,S){let A=S?1:-1,I=null;if(ee.isValidBarcodeColumn(h,g-A)&&(I=h.getDetectionResultColumn(g-A).getCodeword(b)),I!=null)return S?I.getEndX():I.getStartX();if(I=h.getDetectionResultColumn(g).getCodewordNearby(b),I!=null)return S?I.getStartX():I.getEndX();if(ee.isValidBarcodeColumn(h,g-A)&&(I=h.getDetectionResultColumn(g-A).getCodewordNearby(b)),I!=null)return S?I.getEndX():I.getStartX();let R=0;for(;ee.isValidBarcodeColumn(h,g-A);){g-=A;for(let V of h.getDetectionResultColumn(g).getCodewords())if(V!=null)return(S?V.getEndX():V.getStartX())+A*R*(V.getEndX()-V.getStartX());R++}return S?h.getBoundingBox().getMinX():h.getBoundingBox().getMaxX()}static detectCodeword(h,g,b,S,A,I,R,V){A=ee.adjustCodewordStartColumn(h,g,b,S,A,I);let te=ee.getModuleBitCount(h,g,b,S,A,I);if(te==null)return null;let ue,ve=yt.sum(te);if(S)ue=A+ve;else{for(let qe=0;qe<te.length/2;qe++){let $e=te[qe];te[qe]=te[te.length-1-qe],te[te.length-1-qe]=$e}ue=A,A=ue-ve}if(!ee.checkCodewordSkew(ve,R,V))return null;let Ne=ji.getDecodedValue(te),Me=Zt.getCodeword(Ne);return Me===-1?null:new ms(A,ue,ee.getCodewordBucketNumber(Ne),Me)}static getModuleBitCount(h,g,b,S,A,I){let R=A,V=new Int32Array(8),te=0,ue=S?1:-1,ve=S;for(;(S?R<b:R>=g)&&te<V.length;)h.get(R,I)===ve?(V[te]++,R+=ue):(te++,ve=!ve);return te===V.length||R===(S?b:g)&&te===V.length-1?V:null}static getNumberOfECCodeWords(h){return 2<<h}static adjustCodewordStartColumn(h,g,b,S,A,I){let R=A,V=S?-1:1;for(let te=0;te<2;te++){for(;(S?R>=g:R<b)&&S===h.get(R,I);){if(Math.abs(A-R)>ee.CODEWORD_SKEW_SIZE)return A;R+=V}V=-V,S=!S}return R}static checkCodewordSkew(h,g,b){return g-ee.CODEWORD_SKEW_SIZE<=h&&h<=b+ee.CODEWORD_SKEW_SIZE}static decodeCodewords(h,g,b){if(h.length===0)throw W.getFormatInstance();let S=1<<g+1,A=ee.correctErrors(h,b,S);ee.verifyCodewordCount(h,S);let I=pt.decode(h,""+g);return I.setErrorsCorrected(A),I.setErasures(b.length),I}static correctErrors(h,g,b){if(g!=null&&g.length>b/2+ee.MAX_ERRORS||b<0||b>ee.MAX_EC_CODEWORDS)throw v.getChecksumInstance();return ee.errorCorrection.decode(h,b,g)}static verifyCodewordCount(h,g){if(h.length<4)throw W.getFormatInstance();let b=h[0];if(b>h.length)throw W.getFormatInstance();if(b===0)if(g<h.length)h[0]=h.length-g;else throw W.getFormatInstance()}static getBitCountForCodeword(h){let g=new Int32Array(8),b=0,S=g.length-1;for(;!((h&1)!==b&&(b=h&1,S--,S<0));)g[S]++,h>>=1;return g}static getCodewordBucketNumber(h){return h instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(h):this.getCodewordBucketNumber_number(h)}static getCodewordBucketNumber_number(h){return ee.getCodewordBucketNumber(ee.getBitCountForCodeword(h))}static getCodewordBucketNumber_Int32Array(h){return(h[0]-h[2]+h[4]-h[6]+9)%9}static toString(h){let g=new Ks;for(let b=0;b<h.length;b++){g.format("Row %2d: ",b);for(let S=0;S<h[b].length;S++){let A=h[b][S];A.getValue().length===0?g.format("        ",null):g.format("%4d(%2d)",A.getValue()[0],A.getConfidence(A.getValue()[0]))}g.format("%n")}return g.toString()}}ee.CODEWORD_SKEW_SIZE=2,ee.MAX_ERRORS=3,ee.MAX_EC_CODEWORDS=512,ee.errorCorrection=new fs;class we{decode(h,g=null){let b=we.decode(h,g,!1);if(b==null||b.length===0||b[0]==null)throw ce.getNotFoundInstance();return b[0]}decodeMultiple(h,g=null){try{return we.decode(h,g,!0)}catch(b){throw b instanceof W||b instanceof v?ce.getNotFoundInstance():b}}static decode(h,g,b){const S=new Array,A=Lr.detectMultiple(h,g,b);for(const I of A.getPoints()){const R=ee.decode(A.getBits(),I[4],I[5],I[6],I[7],we.getMinCodewordWidth(I),we.getMaxCodewordWidth(I)),V=new H(R.getText(),R.getRawBytes(),void 0,I,ge.PDF_417);V.putMetadata(Le.ERROR_CORRECTION_LEVEL,R.getECLevel());const te=R.getOther();te!=null&&V.putMetadata(Le.PDF417_EXTRA_METADATA,te),S.push(V)}return S.map(I=>I)}static getMaxWidth(h,g){return h==null||g==null?0:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMinWidth(h,g){return h==null||g==null?D.MAX_VALUE:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMaxCodewordWidth(h){return Math.floor(Math.max(Math.max(we.getMaxWidth(h[0],h[4]),we.getMaxWidth(h[6],h[2])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN),Math.max(we.getMaxWidth(h[1],h[5]),we.getMaxWidth(h[7],h[3])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(h){return Math.floor(Math.min(Math.min(we.getMinWidth(h[0],h[4]),we.getMinWidth(h[6],h[2])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN),Math.min(we.getMinWidth(h[1],h[5]),we.getMinWidth(h[7],h[3])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Re extends d{}Re.kind="ReaderException";class We{constructor(h,g){this.verbose=h===!0,g&&this.setHints(g)}decode(h,g){return g&&this.setHints(g),this.decodeInternal(h)}decodeWithState(h){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(h)}setHints(h){this.hints=h;const g=!i(h)&&h.get(q.TRY_HARDER)===!0,b=i(h)?null:h.get(q.POSSIBLE_FORMATS),S=new Array;if(!i(b)){const A=b.some(I=>I===ge.UPC_A||I===ge.UPC_E||I===ge.EAN_13||I===ge.EAN_8||I===ge.CODABAR||I===ge.CODE_39||I===ge.CODE_93||I===ge.CODE_128||I===ge.ITF||I===ge.RSS_14||I===ge.RSS_EXPANDED);A&&!g&&S.push(new us(h,this.verbose)),b.includes(ge.QR_CODE)&&S.push(new ca),b.includes(ge.DATA_MATRIX)&&S.push(new Bn),b.includes(ge.AZTEC)&&S.push(new fr),b.includes(ge.PDF_417)&&S.push(new we),A&&g&&S.push(new us(h,this.verbose))}S.length===0&&(g||S.push(new us(h,this.verbose)),S.push(new ca),S.push(new Bn),S.push(new fr),S.push(new we),g&&S.push(new us(h,this.verbose))),this.readers=S}reset(){if(this.readers!==null)for(const h of this.readers)h.reset()}decodeInternal(h){if(this.readers===null)throw new Re("No readers where selected, nothing can be read.");for(const g of this.readers)try{return g.decode(h,this.hints)}catch(b){if(b instanceof Re)continue}throw new ce("No MultiFormat Readers were able to detect the code.")}}class et extends se{constructor(h=null,g=500){const b=new We;b.setHints(h),super(b,g)}decodeBitmap(h){return this.reader.decodeWithState(h)}}class Ct extends se{constructor(h=500){super(new we,h)}}class Lt extends se{constructor(h=500){super(new ca,h)}}var ar;(function(je){je[je.ERROR_CORRECTION=0]="ERROR_CORRECTION",je[je.CHARACTER_SET=1]="CHARACTER_SET",je[je.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",je[je.MIN_SIZE=3]="MIN_SIZE",je[je.MAX_SIZE=4]="MAX_SIZE",je[je.MARGIN=5]="MARGIN",je[je.PDF417_COMPACT=6]="PDF417_COMPACT",je[je.PDF417_COMPACTION=7]="PDF417_COMPACTION",je[je.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",je[je.AZTEC_LAYERS=9]="AZTEC_LAYERS",je[je.QR_VERSION=10]="QR_VERSION"})(ar||(ar={}));var Gt=ar;class Ur{constructor(h){this.field=h,this.cachedGenerators=[],this.cachedGenerators.push(new Je(h,Int32Array.from([1])))}buildGenerator(h){const g=this.cachedGenerators;if(h>=g.length){let b=g[g.length-1];const S=this.field;for(let A=g.length;A<=h;A++){const I=b.multiply(new Je(S,Int32Array.from([1,S.exp(A-1+S.getGeneratorBase())])));g.push(I),b=I}}return g[h]}encode(h,g){if(g===0)throw new p("No error correction bytes");const b=h.length-g;if(b<=0)throw new p("No data bytes provided");const S=this.buildGenerator(g),A=new Int32Array(b);C.arraycopy(h,0,A,0,b);let I=new Je(this.field,A);I=I.multiplyByMonomial(g,1);const V=I.divide(S)[1].getCoefficients(),te=g-V.length;for(let ue=0;ue<te;ue++)h[b+ue]=0;C.arraycopy(V,0,h,b+te,V.length)}}class lr{constructor(){}static applyMaskPenaltyRule1(h){return lr.applyMaskPenaltyRule1Internal(h,!0)+lr.applyMaskPenaltyRule1Internal(h,!1)}static applyMaskPenaltyRule2(h){let g=0;const b=h.getArray(),S=h.getWidth(),A=h.getHeight();for(let I=0;I<A-1;I++){const R=b[I];for(let V=0;V<S-1;V++){const te=R[V];te===R[V+1]&&te===b[I+1][V]&&te===b[I+1][V+1]&&g++}}return lr.N2*g}static applyMaskPenaltyRule3(h){let g=0;const b=h.getArray(),S=h.getWidth(),A=h.getHeight();for(let I=0;I<A;I++)for(let R=0;R<S;R++){const V=b[I];R+6<S&&V[R]===1&&V[R+1]===0&&V[R+2]===1&&V[R+3]===1&&V[R+4]===1&&V[R+5]===0&&V[R+6]===1&&(lr.isWhiteHorizontal(V,R-4,R)||lr.isWhiteHorizontal(V,R+7,R+11))&&g++,I+6<A&&b[I][R]===1&&b[I+1][R]===0&&b[I+2][R]===1&&b[I+3][R]===1&&b[I+4][R]===1&&b[I+5][R]===0&&b[I+6][R]===1&&(lr.isWhiteVertical(b,R,I-4,I)||lr.isWhiteVertical(b,R,I+7,I+11))&&g++}return g*lr.N3}static isWhiteHorizontal(h,g,b){g=Math.max(g,0),b=Math.min(b,h.length);for(let S=g;S<b;S++)if(h[S]===1)return!1;return!0}static isWhiteVertical(h,g,b,S){b=Math.max(b,0),S=Math.min(S,h.length);for(let A=b;A<S;A++)if(h[A][g]===1)return!1;return!0}static applyMaskPenaltyRule4(h){let g=0;const b=h.getArray(),S=h.getWidth(),A=h.getHeight();for(let V=0;V<A;V++){const te=b[V];for(let ue=0;ue<S;ue++)te[ue]===1&&g++}const I=h.getHeight()*h.getWidth();return Math.floor(Math.abs(g*2-I)*10/I)*lr.N4}static getDataMaskBit(h,g,b){let S,A;switch(h){case 0:S=b+g&1;break;case 1:S=b&1;break;case 2:S=g%3;break;case 3:S=(b+g)%3;break;case 4:S=Math.floor(b/2)+Math.floor(g/3)&1;break;case 5:A=b*g,S=(A&1)+A%3;break;case 6:A=b*g,S=(A&1)+A%3&1;break;case 7:A=b*g,S=A%3+(b+g&1)&1;break;default:throw new p("Invalid mask pattern: "+h)}return S===0}static applyMaskPenaltyRule1Internal(h,g){let b=0;const S=g?h.getHeight():h.getWidth(),A=g?h.getWidth():h.getHeight(),I=h.getArray();for(let R=0;R<S;R++){let V=0,te=-1;for(let ue=0;ue<A;ue++){const ve=g?I[R][ue]:I[ue][R];ve===te?V++:(V>=5&&(b+=lr.N1+(V-5)),V=1,te=ve)}V>=5&&(b+=lr.N1+(V-5))}return b}}lr.N1=3,lr.N2=3,lr.N3=40,lr.N4=10;class Sn{constructor(h,g){this.width=h,this.height=g;const b=new Array(g);for(let S=0;S!==g;S++)b[S]=new Uint8Array(h);this.bytes=b}getHeight(){return this.height}getWidth(){return this.width}get(h,g){return this.bytes[g][h]}getArray(){return this.bytes}setNumber(h,g,b){this.bytes[g][h]=b}setBoolean(h,g,b){this.bytes[g][h]=b?1:0}clear(h){for(const g of this.bytes)O.fill(g,h)}equals(h){if(!(h instanceof Sn))return!1;const g=h;if(this.width!==g.width||this.height!==g.height)return!1;for(let b=0,S=this.height;b<S;++b){const A=this.bytes[b],I=g.bytes[b];for(let R=0,V=this.width;R<V;++R)if(A[R]!==I[R])return!1}return!0}toString(){const h=new ie;for(let g=0,b=this.height;g<b;++g){const S=this.bytes[g];for(let A=0,I=this.width;A<I;++A)switch(S[A]){case 0:h.append(" 0");break;case 1:h.append(" 1");break;default:h.append("  ");break}h.append(`
`)}return h.toString()}}class ei{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const h=new ie;return h.append(`<<
`),h.append(" mode: "),h.append(this.mode?this.mode.toString():"null"),h.append(`
 ecLevel: `),h.append(this.ecLevel?this.ecLevel.toString():"null"),h.append(`
 version: `),h.append(this.version?this.version.toString():"null"),h.append(`
 maskPattern: `),h.append(this.maskPattern.toString()),this.matrix?(h.append(`
 matrix:
`),h.append(this.matrix.toString())):h.append(`
 matrix: null
`),h.append(`>>
`),h.toString()}setMode(h){this.mode=h}setECLevel(h){this.ecLevel=h}setVersion(h){this.version=h}setMaskPattern(h){this.maskPattern=h}setMatrix(h){this.matrix=h}static isValidMaskPattern(h){return h>=0&&h<ei.NUM_MASK_PATTERNS}}ei.NUM_MASK_PATTERNS=8;class Zr extends d{}Zr.kind="WriterException";class Xt{constructor(){}static clearMatrix(h){h.clear(255)}static buildMatrix(h,g,b,S,A){Xt.clearMatrix(A),Xt.embedBasicPatterns(b,A),Xt.embedTypeInfo(g,S,A),Xt.maybeEmbedVersionInfo(b,A),Xt.embedDataBits(h,S,A)}static embedBasicPatterns(h,g){Xt.embedPositionDetectionPatternsAndSeparators(g),Xt.embedDarkDotAtLeftBottomCorner(g),Xt.maybeEmbedPositionAdjustmentPatterns(h,g),Xt.embedTimingPatterns(g)}static embedTypeInfo(h,g,b){const S=new M;Xt.makeTypeInfoBits(h,g,S);for(let A=0,I=S.getSize();A<I;++A){const R=S.get(S.getSize()-1-A),V=Xt.TYPE_INFO_COORDINATES[A],te=V[0],ue=V[1];if(b.setBoolean(te,ue,R),A<8){const ve=b.getWidth()-A-1;b.setBoolean(ve,8,R)}else{const Ne=b.getHeight()-7+(A-8);b.setBoolean(8,Ne,R)}}}static maybeEmbedVersionInfo(h,g){if(h.getVersionNumber()<7)return;const b=new M;Xt.makeVersionInfoBits(h,b);let S=17;for(let A=0;A<6;++A)for(let I=0;I<3;++I){const R=b.get(S);S--,g.setBoolean(A,g.getHeight()-11+I,R),g.setBoolean(g.getHeight()-11+I,A,R)}}static embedDataBits(h,g,b){let S=0,A=-1,I=b.getWidth()-1,R=b.getHeight()-1;for(;I>0;){for(I===6&&(I-=1);R>=0&&R<b.getHeight();){for(let V=0;V<2;++V){const te=I-V;if(!Xt.isEmpty(b.get(te,R)))continue;let ue;S<h.getSize()?(ue=h.get(S),++S):ue=!1,g!==255&&lr.getDataMaskBit(g,te,R)&&(ue=!ue),b.setBoolean(te,R,ue)}R+=A}A=-A,R+=A,I-=2}if(S!==h.getSize())throw new Zr("Not all bits consumed: "+S+"/"+h.getSize())}static findMSBSet(h){return 32-D.numberOfLeadingZeros(h)}static calculateBCHCode(h,g){if(g===0)throw new p("0 polynomial");const b=Xt.findMSBSet(g);for(h<<=b-1;Xt.findMSBSet(h)>=b;)h^=g<<Xt.findMSBSet(h)-b;return h}static makeTypeInfoBits(h,g,b){if(!ei.isValidMaskPattern(g))throw new Zr("Invalid mask pattern");const S=h.getBits()<<3|g;b.appendBits(S,5);const A=Xt.calculateBCHCode(S,Xt.TYPE_INFO_POLY);b.appendBits(A,10);const I=new M;if(I.appendBits(Xt.TYPE_INFO_MASK_PATTERN,15),b.xor(I),b.getSize()!==15)throw new Zr("should not happen but we got: "+b.getSize())}static makeVersionInfoBits(h,g){g.appendBits(h.getVersionNumber(),6);const b=Xt.calculateBCHCode(h.getVersionNumber(),Xt.VERSION_INFO_POLY);if(g.appendBits(b,12),g.getSize()!==18)throw new Zr("should not happen but we got: "+g.getSize())}static isEmpty(h){return h===255}static embedTimingPatterns(h){for(let g=8;g<h.getWidth()-8;++g){const b=(g+1)%2;Xt.isEmpty(h.get(g,6))&&h.setNumber(g,6,b),Xt.isEmpty(h.get(6,g))&&h.setNumber(6,g,b)}}static embedDarkDotAtLeftBottomCorner(h){if(h.get(8,h.getHeight()-8)===0)throw new Zr;h.setNumber(8,h.getHeight()-8,1)}static embedHorizontalSeparationPattern(h,g,b){for(let S=0;S<8;++S){if(!Xt.isEmpty(b.get(h+S,g)))throw new Zr;b.setNumber(h+S,g,0)}}static embedVerticalSeparationPattern(h,g,b){for(let S=0;S<7;++S){if(!Xt.isEmpty(b.get(h,g+S)))throw new Zr;b.setNumber(h,g+S,0)}}static embedPositionAdjustmentPattern(h,g,b){for(let S=0;S<5;++S){const A=Xt.POSITION_ADJUSTMENT_PATTERN[S];for(let I=0;I<5;++I)b.setNumber(h+I,g+S,A[I])}}static embedPositionDetectionPattern(h,g,b){for(let S=0;S<7;++S){const A=Xt.POSITION_DETECTION_PATTERN[S];for(let I=0;I<7;++I)b.setNumber(h+I,g+S,A[I])}}static embedPositionDetectionPatternsAndSeparators(h){const g=Xt.POSITION_DETECTION_PATTERN[0].length;Xt.embedPositionDetectionPattern(0,0,h),Xt.embedPositionDetectionPattern(h.getWidth()-g,0,h),Xt.embedPositionDetectionPattern(0,h.getWidth()-g,h);const b=8;Xt.embedHorizontalSeparationPattern(0,b-1,h),Xt.embedHorizontalSeparationPattern(h.getWidth()-b,b-1,h),Xt.embedHorizontalSeparationPattern(0,h.getWidth()-b,h);const S=7;Xt.embedVerticalSeparationPattern(S,0,h),Xt.embedVerticalSeparationPattern(h.getHeight()-S-1,0,h),Xt.embedVerticalSeparationPattern(S,h.getHeight()-S,h)}static maybeEmbedPositionAdjustmentPatterns(h,g){if(h.getVersionNumber()<2)return;const b=h.getVersionNumber()-1,S=Xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[b];for(let A=0,I=S.length;A!==I;A++){const R=S[A];if(R>=0)for(let V=0;V!==I;V++){const te=S[V];te>=0&&Xt.isEmpty(g.get(te,R))&&Xt.embedPositionAdjustmentPattern(te-2,R-2,g)}}}}Xt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Xt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Xt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Xt.VERSION_INFO_POLY=7973,Xt.TYPE_INFO_POLY=1335,Xt.TYPE_INFO_MASK_PATTERN=21522;class xa{constructor(h,g){this.dataBytes=h,this.errorCorrectionBytes=g}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class rn{constructor(){}static calculateMaskPenalty(h){return lr.applyMaskPenaltyRule1(h)+lr.applyMaskPenaltyRule2(h)+lr.applyMaskPenaltyRule3(h)+lr.applyMaskPenaltyRule4(h)}static encode(h,g,b=null){let S=rn.DEFAULT_BYTE_MODE_ENCODING;const A=b!==null&&b.get(Gt.CHARACTER_SET)!==void 0;A&&(S=b.get(Gt.CHARACTER_SET).toString());const I=this.chooseMode(h,S),R=new M;if(I===Cr.BYTE&&(A||rn.DEFAULT_BYTE_MODE_ENCODING!==S)){const _t=z.getCharacterSetECIByName(S);_t!==void 0&&this.appendECI(_t,R)}this.appendModeInfo(I,R);const V=new M;this.appendBytes(h,I,V,S);let te;if(b!==null&&b.get(Gt.QR_VERSION)!==void 0){const _t=Number.parseInt(b.get(Gt.QR_VERSION).toString(),10);te=Ht.getVersionForNumber(_t);const At=this.calculateBitsNeeded(I,R,V,te);if(!this.willFit(At,te,g))throw new Zr("Data too big for requested version")}else te=this.recommendVersion(g,I,R,V);const ue=new M;ue.appendBitArray(R);const ve=I===Cr.BYTE?V.getSizeInBytes():h.length;this.appendLengthInfo(ve,te,I,ue),ue.appendBitArray(V);const Ne=te.getECBlocksForLevel(g),Me=te.getTotalCodewords()-Ne.getTotalECCodewords();this.terminateBits(Me,ue);const qe=this.interleaveWithECBytes(ue,te.getTotalCodewords(),Me,Ne.getNumBlocks()),$e=new ei;$e.setECLevel(g),$e.setMode(I),$e.setVersion(te);const Xe=te.getDimensionForVersion(),ct=new Sn(Xe,Xe),Tt=this.chooseMaskPattern(qe,g,te,ct);return $e.setMaskPattern(Tt),Xt.buildMatrix(qe,g,te,Tt,ct),$e.setMatrix(ct),$e}static recommendVersion(h,g,b,S){const A=this.calculateBitsNeeded(g,b,S,Ht.getVersionForNumber(1)),I=this.chooseVersion(A,h),R=this.calculateBitsNeeded(g,b,S,I);return this.chooseVersion(R,h)}static calculateBitsNeeded(h,g,b,S){return g.getSize()+h.getCharacterCountBits(S)+b.getSize()}static getAlphanumericCode(h){return h<rn.ALPHANUMERIC_TABLE.length?rn.ALPHANUMERIC_TABLE[h]:-1}static chooseMode(h,g=null){if(z.SJIS.getName()===g&&this.isOnlyDoubleByteKanji(h))return Cr.KANJI;let b=!1,S=!1;for(let A=0,I=h.length;A<I;++A){const R=h.charAt(A);if(rn.isDigit(R))b=!0;else if(this.getAlphanumericCode(R.charCodeAt(0))!==-1)S=!0;else return Cr.BYTE}return S?Cr.ALPHANUMERIC:b?Cr.NUMERIC:Cr.BYTE}static isOnlyDoubleByteKanji(h){let g;try{g=ne.encode(h,z.SJIS)}catch{return!1}const b=g.length;if(b%2!==0)return!1;for(let S=0;S<b;S+=2){const A=g[S]&255;if((A<129||A>159)&&(A<224||A>235))return!1}return!0}static chooseMaskPattern(h,g,b,S){let A=Number.MAX_SAFE_INTEGER,I=-1;for(let R=0;R<ei.NUM_MASK_PATTERNS;R++){Xt.buildMatrix(h,g,b,R,S);let V=this.calculateMaskPenalty(S);V<A&&(A=V,I=R)}return I}static chooseVersion(h,g){for(let b=1;b<=40;b++){const S=Ht.getVersionForNumber(b);if(rn.willFit(h,S,g))return S}throw new Zr("Data too big")}static willFit(h,g,b){const S=g.getTotalCodewords(),I=g.getECBlocksForLevel(b).getTotalECCodewords(),R=S-I,V=(h+7)/8;return R>=V}static terminateBits(h,g){const b=h*8;if(g.getSize()>b)throw new Zr("data bits cannot fit in the QR Code"+g.getSize()+" > "+b);for(let I=0;I<4&&g.getSize()<b;++I)g.appendBit(!1);const S=g.getSize()&7;if(S>0)for(let I=S;I<8;I++)g.appendBit(!1);const A=h-g.getSizeInBytes();for(let I=0;I<A;++I)g.appendBits((I&1)===0?236:17,8);if(g.getSize()!==b)throw new Zr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(h,g,b,S,A,I){if(S>=b)throw new Zr("Block ID too large");const R=h%b,V=b-R,te=Math.floor(h/b),ue=te+1,ve=Math.floor(g/b),Ne=ve+1,Me=te-ve,qe=ue-Ne;if(Me!==qe)throw new Zr("EC bytes mismatch");if(b!==V+R)throw new Zr("RS blocks mismatch");if(h!==(ve+Me)*V+(Ne+qe)*R)throw new Zr("Total bytes mismatch");S<V?(A[0]=ve,I[0]=Me):(A[0]=Ne,I[0]=qe)}static interleaveWithECBytes(h,g,b,S){if(h.getSizeInBytes()!==b)throw new Zr("Number of bits and data bytes does not match");let A=0,I=0,R=0;const V=new Array;for(let ue=0;ue<S;++ue){const ve=new Int32Array(1),Ne=new Int32Array(1);rn.getNumDataBytesAndNumECBytesForBlockID(g,b,S,ue,ve,Ne);const Me=ve[0],qe=new Uint8Array(Me);h.toBytes(8*A,qe,0,Me);const $e=rn.generateECBytes(qe,Ne[0]);V.push(new xa(qe,$e)),I=Math.max(I,Me),R=Math.max(R,$e.length),A+=ve[0]}if(b!==A)throw new Zr("Data bytes does not match offset");const te=new M;for(let ue=0;ue<I;++ue)for(const ve of V){const Ne=ve.getDataBytes();ue<Ne.length&&te.appendBits(Ne[ue],8)}for(let ue=0;ue<R;++ue)for(const ve of V){const Ne=ve.getErrorCorrectionBytes();ue<Ne.length&&te.appendBits(Ne[ue],8)}if(g!==te.getSizeInBytes())throw new Zr("Interleaving error: "+g+" and "+te.getSizeInBytes()+" differ.");return te}static generateECBytes(h,g){const b=h.length,S=new Int32Array(b+g);for(let I=0;I<b;I++)S[I]=h[I]&255;new Ur(vt.QR_CODE_FIELD_256).encode(S,g);const A=new Uint8Array(g);for(let I=0;I<g;I++)A[I]=S[b+I];return A}static appendModeInfo(h,g){g.appendBits(h.getBits(),4)}static appendLengthInfo(h,g,b,S){const A=b.getCharacterCountBits(g);if(h>=1<<A)throw new Zr(h+" is bigger than "+((1<<A)-1));S.appendBits(h,A)}static appendBytes(h,g,b,S){switch(g){case Cr.NUMERIC:rn.appendNumericBytes(h,b);break;case Cr.ALPHANUMERIC:rn.appendAlphanumericBytes(h,b);break;case Cr.BYTE:rn.append8BitBytes(h,b,S);break;case Cr.KANJI:rn.appendKanjiBytes(h,b);break;default:throw new Zr("Invalid mode: "+g)}}static getDigit(h){return h.charCodeAt(0)-48}static isDigit(h){const g=rn.getDigit(h);return g>=0&&g<=9}static appendNumericBytes(h,g){const b=h.length;let S=0;for(;S<b;){const A=rn.getDigit(h.charAt(S));if(S+2<b){const I=rn.getDigit(h.charAt(S+1)),R=rn.getDigit(h.charAt(S+2));g.appendBits(A*100+I*10+R,10),S+=3}else if(S+1<b){const I=rn.getDigit(h.charAt(S+1));g.appendBits(A*10+I,7),S+=2}else g.appendBits(A,4),S++}}static appendAlphanumericBytes(h,g){const b=h.length;let S=0;for(;S<b;){const A=rn.getAlphanumericCode(h.charCodeAt(S));if(A===-1)throw new Zr;if(S+1<b){const I=rn.getAlphanumericCode(h.charCodeAt(S+1));if(I===-1)throw new Zr;g.appendBits(A*45+I,11),S+=2}else g.appendBits(A,6),S++}}static append8BitBytes(h,g,b){let S;try{S=ne.encode(h,b)}catch(A){throw new Zr(A)}for(let A=0,I=S.length;A!==I;A++){const R=S[A];g.appendBits(R,8)}}static appendKanjiBytes(h,g){let b;try{b=ne.encode(h,z.SJIS)}catch(A){throw new Zr(A)}const S=b.length;for(let A=0;A<S;A+=2){const I=b[A]&255,R=b[A+1]&255,V=I<<8&4294967295|R;let te=-1;if(V>=33088&&V<=40956?te=V-33088:V>=57408&&V<=60351&&(te=V-49472),te===-1)throw new Zr("Invalid byte sequence");const ue=(te>>8)*192+(te&255);g.appendBits(ue,13)}}static appendECI(h,g){g.appendBits(Cr.ECI.getBits(),4),g.appendBits(h.getValue(),8)}}rn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),rn.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class Ei{write(h,g,b,S=null){if(h.length===0)throw new p("Found empty contents");if(g<0||b<0)throw new p("Requested dimensions are too small: "+g+"x"+b);let A=Or.L,I=Ei.QUIET_ZONE_SIZE;S!==null&&(S.get(Gt.ERROR_CORRECTION)!==void 0&&(A=Or.fromString(S.get(Gt.ERROR_CORRECTION).toString())),S.get(Gt.MARGIN)!==void 0&&(I=Number.parseInt(S.get(Gt.MARGIN).toString(),10)));const R=rn.encode(h,A,S);return this.renderResult(R,g,b,I)}writeToDom(h,g,b,S,A=null){typeof h=="string"&&(h=document.querySelector(h));const I=this.write(g,b,S,A);h&&h.appendChild(I)}renderResult(h,g,b,S){const A=h.getMatrix();if(A===null)throw new Oe;const I=A.getWidth(),R=A.getHeight(),V=I+S*2,te=R+S*2,ue=Math.max(g,V),ve=Math.max(b,te),Ne=Math.min(Math.floor(ue/V),Math.floor(ve/te)),Me=Math.floor((ue-I*Ne)/2),qe=Math.floor((ve-R*Ne)/2),$e=this.createSVGElement(ue,ve);for(let Xe=0,ct=qe;Xe<R;Xe++,ct+=Ne)for(let Tt=0,_t=Me;Tt<I;Tt++,_t+=Ne)if(A.get(Tt,Xe)===1){const At=this.createSvgRectElement(_t,ct,Ne,Ne);$e.appendChild(At)}return $e}createSVGElement(h,g){const b=document.createElementNS(Ei.SVG_NS,"svg");return b.setAttributeNS(null,"height",h.toString()),b.setAttributeNS(null,"width",g.toString()),b}createSvgRectElement(h,g,b,S){const A=document.createElementNS(Ei.SVG_NS,"rect");return A.setAttributeNS(null,"x",h.toString()),A.setAttributeNS(null,"y",g.toString()),A.setAttributeNS(null,"height",b.toString()),A.setAttributeNS(null,"width",S.toString()),A.setAttributeNS(null,"fill","#000000"),A}}Ei.QUIET_ZONE_SIZE=4,Ei.SVG_NS="http://www.w3.org/2000/svg";class es{encode(h,g,b,S,A){if(h.length===0)throw new p("Found empty contents");if(g!==ge.QR_CODE)throw new p("Can only encode QR_CODE, but got "+g);if(b<0||S<0)throw new p(`Requested dimensions are too small: ${b}x${S}`);let I=Or.L,R=es.QUIET_ZONE_SIZE;A!==null&&(A.get(Gt.ERROR_CORRECTION)!==void 0&&(I=Or.fromString(A.get(Gt.ERROR_CORRECTION).toString())),A.get(Gt.MARGIN)!==void 0&&(R=Number.parseInt(A.get(Gt.MARGIN).toString(),10)));const V=rn.encode(h,I,A);return es.renderResult(V,b,S,R)}static renderResult(h,g,b,S){const A=h.getMatrix();if(A===null)throw new Oe;const I=A.getWidth(),R=A.getHeight(),V=I+S*2,te=R+S*2,ue=Math.max(g,V),ve=Math.max(b,te),Ne=Math.min(Math.floor(ue/V),Math.floor(ve/te)),Me=Math.floor((ue-I*Ne)/2),qe=Math.floor((ve-R*Ne)/2),$e=new me(ue,ve);for(let Xe=0,ct=qe;Xe<R;Xe++,ct+=Ne)for(let Tt=0,_t=Me;Tt<I;Tt++,_t+=Ne)A.get(Tt,Xe)===1&&$e.setRegion(_t,ct,Ne,Ne);return $e}}es.QUIET_ZONE_SIZE=4;class ts{encode(h,g,b,S,A){let I;if(g===ge.QR_CODE)I=new es;else throw new p("No encoder available for format "+g);return I.encode(h,g,b,S,A)}}class ka extends le{constructor(h,g,b,S,A,I,R,V){if(super(I,R),this.yuvData=h,this.dataWidth=g,this.dataHeight=b,this.left=S,this.top=A,S+I>g||A+R>b)throw new p("Crop rectangle does not fit within image data.");V&&this.reverseHorizontal(I,R)}getRow(h,g){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth();(g==null||g.length<b)&&(g=new Uint8ClampedArray(b));const S=(h+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,S,g,0,b),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.yuvData;const b=h*g,S=new Uint8ClampedArray(b);let A=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return C.arraycopy(this.yuvData,A,S,0,b),S;for(let I=0;I<g;I++){const R=I*h;C.arraycopy(this.yuvData,A,S,R,h),A+=this.dataWidth}return S}isCropSupported(){return!0}crop(h,g,b,S){return new ka(this.yuvData,this.dataWidth,this.dataHeight,this.left+h,this.top+g,b,S,!1)}renderThumbnail(){const h=this.getWidth()/ka.THUMBNAIL_SCALE_FACTOR,g=this.getHeight()/ka.THUMBNAIL_SCALE_FACTOR,b=new Int32Array(h*g),S=this.yuvData;let A=this.top*this.dataWidth+this.left;for(let I=0;I<g;I++){const R=I*h;for(let V=0;V<h;V++){const te=S[A+V*ka.THUMBNAIL_SCALE_FACTOR]&255;b[R+V]=4278190080|te*65793}A+=this.dataWidth*ka.THUMBNAIL_SCALE_FACTOR}return b}getThumbnailWidth(){return this.getWidth()/ka.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ka.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(h,g){const b=this.yuvData;for(let S=0,A=this.top*this.dataWidth+this.left;S<g;S++,A+=this.dataWidth){const I=A+h/2;for(let R=A,V=A+h-1;R<I;R++,V--){const te=b[R];b[R]=b[V],b[V]=te}}}invert(){return new ye(this)}}ka.THUMBNAIL_SCALE_FACTOR=2;class Zo extends le{constructor(h,g,b,S,A,I,R){if(super(g,b),this.dataWidth=S,this.dataHeight=A,this.left=I,this.top=R,h.BYTES_PER_ELEMENT===4){const V=g*b,te=new Uint8ClampedArray(V);for(let ue=0;ue<V;ue++){const ve=h[ue],Ne=ve>>16&255,Me=ve>>7&510,qe=ve&255;te[ue]=(Ne+Me+qe)/4&255}this.luminances=te}else this.luminances=h;if(S===void 0&&(this.dataWidth=g),A===void 0&&(this.dataHeight=b),I===void 0&&(this.left=0),R===void 0&&(this.top=0),this.left+g>this.dataWidth||this.top+b>this.dataHeight)throw new p("Crop rectangle does not fit within image data.")}getRow(h,g){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth();(g==null||g.length<b)&&(g=new Uint8ClampedArray(b));const S=(h+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,S,g,0,b),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.luminances;const b=h*g,S=new Uint8ClampedArray(b);let A=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return C.arraycopy(this.luminances,A,S,0,b),S;for(let I=0;I<g;I++){const R=I*h;C.arraycopy(this.luminances,A,S,R,h),A+=this.dataWidth}return S}isCropSupported(){return!0}crop(h,g,b,S){return new Zo(this.luminances,b,S,this.dataWidth,this.dataHeight,this.left+h,this.top+g)}invert(){return new ye(this)}}class Da extends z{static forName(h){return this.getCharacterSetECIByName(h)}}class so{}so.ISO_8859_1=z.ISO8859_1;class oo{isCompact(){return this.compact}setCompact(h){this.compact=h}getSize(){return this.size}setSize(h){this.size=h}getLayers(){return this.layers}setLayers(h){this.layers=h}getCodeWords(){return this.codeWords}setCodeWords(h){this.codeWords=h}getMatrix(){return this.matrix}setMatrix(h){this.matrix=h}}class Kl{static singletonList(h){return[h]}static min(h,g){return h.sort(g)[0]}}class Xo{constructor(h){this.previous=h}getPrevious(){return this.previous}}class wi extends Xo{constructor(h,g,b){super(h),this.value=g,this.bitCount=b}appendTo(h,g){h.appendBits(this.value,this.bitCount)}add(h,g){return new wi(this,h,g)}addBinaryShift(h,g){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new wi(this,h,g)}toString(){let h=this.value&(1<<this.bitCount)-1;return h|=1<<this.bitCount,"<"+D.toBinaryString(h|1<<this.bitCount).substring(1)+">"}}class pl extends wi{constructor(h,g,b){super(h,0,0),this.binaryShiftStart=g,this.binaryShiftByteCount=b}appendTo(h,g){for(let b=0;b<this.binaryShiftByteCount;b++)(b===0||b===31&&this.binaryShiftByteCount<=62)&&(h.appendBits(31,5),this.binaryShiftByteCount>62?h.appendBits(this.binaryShiftByteCount-31,16):b===0?h.appendBits(Math.min(this.binaryShiftByteCount,31),5):h.appendBits(this.binaryShiftByteCount-31,5)),h.appendBits(g[this.binaryShiftStart+b],8)}addBinaryShift(h,g){return new pl(this,h,g)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ql(je,h,g){return new pl(je,h,g)}function Jo(je,h,g){return new wi(je,h,g)}const gl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qn=0,rs=1,ns=2,Qs=3,Fi=4,ps=new wi(null,0,0),el=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ml(je){for(let h of je)O.fill(h,-1);return je[qn][Fi]=0,je[rs][Fi]=0,je[rs][qn]=28,je[Qs][Fi]=0,je[ns][Fi]=0,je[ns][qn]=15,je}const lo=Ml(O.createInt32Array(6,6));class da{constructor(h,g,b,S){this.token=h,this.mode=g,this.binaryShiftByteCount=b,this.bitCount=S}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(h,g){let b=this.bitCount,S=this.token;if(h!==this.mode){let I=el[this.mode][h];S=Jo(S,I&65535,I>>16),b+=I>>16}let A=h===ns?4:5;return S=Jo(S,g,A),new da(S,h,0,b+A)}shiftAndAppend(h,g){let b=this.token,S=this.mode===ns?4:5;return b=Jo(b,lo[this.mode][h],S),b=Jo(b,g,5),new da(b,this.mode,0,this.bitCount+S+5)}addBinaryShiftChar(h){let g=this.token,b=this.mode,S=this.bitCount;if(this.mode===Fi||this.mode===ns){let R=el[b][qn];g=Jo(g,R&65535,R>>16),S+=R>>16,b=qn}let A=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,I=new da(g,b,this.binaryShiftByteCount+1,S+A);return I.binaryShiftByteCount===2078&&(I=I.endBinaryShift(h+1)),I}endBinaryShift(h){if(this.binaryShiftByteCount===0)return this;let g=this.token;return g=Ql(g,h-this.binaryShiftByteCount,this.binaryShiftByteCount),new da(g,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(h){let g=this.bitCount+(el[this.mode][h.mode]>>16);return this.binaryShiftByteCount<h.binaryShiftByteCount?g+=da.calculateBinaryShiftCost(h)-da.calculateBinaryShiftCost(this):this.binaryShiftByteCount>h.binaryShiftByteCount&&h.binaryShiftByteCount>0&&(g+=10),g<=h.bitCount}toBitArray(h){let g=[];for(let S=this.endBinaryShift(h.length).token;S!==null;S=S.getPrevious())g.unshift(S);let b=new M;for(const S of g)S.appendTo(b,h);return b}toString(){return Z.format("%s bits=%d bytes=%d",gl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(h){return h.binaryShiftByteCount>62?21:h.binaryShiftByteCount>31?20:h.binaryShiftByteCount>0?10:0}}da.INITIAL_STATE=new da(ps,qn,0,0);function Ys(je){const h=Z.getCharCode(" "),g=Z.getCharCode("."),b=Z.getCharCode(",");je[qn][h]=1;const S=Z.getCharCode("Z"),A=Z.getCharCode("A");for(let Ne=A;Ne<=S;Ne++)je[qn][Ne]=Ne-A+2;je[rs][h]=1;const I=Z.getCharCode("z"),R=Z.getCharCode("a");for(let Ne=R;Ne<=I;Ne++)je[rs][Ne]=Ne-R+2;je[ns][h]=1;const V=Z.getCharCode("9"),te=Z.getCharCode("0");for(let Ne=te;Ne<=V;Ne++)je[ns][Ne]=Ne-te+2;je[ns][b]=12,je[ns][g]=13;const ue=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Ne=0;Ne<ue.length;Ne++)je[Qs][Z.getCharCode(ue[Ne])]=Ne;const ve=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Ne=0;Ne<ve.length;Ne++)Z.getCharCode(ve[Ne])>0&&(je[Fi][Z.getCharCode(ve[Ne])]=Ne);return je}const _i=Ys(O.createInt32Array(5,256));class is{constructor(h){this.text=h}encode(){const h=Z.getCharCode(" "),g=Z.getCharCode(`
`);let b=Kl.singletonList(da.INITIAL_STATE);for(let A=0;A<this.text.length;A++){let I,R=A+1<this.text.length?this.text[A+1]:0;switch(this.text[A]){case Z.getCharCode("\r"):I=R===g?2:0;break;case Z.getCharCode("."):I=R===h?3:0;break;case Z.getCharCode(","):I=R===h?4:0;break;case Z.getCharCode(":"):I=R===h?5:0;break;default:I=0}I>0?(b=is.updateStateListForPair(b,A,I),A++):b=this.updateStateListForChar(b,A)}return Kl.min(b,(A,I)=>A.getBitCount()-I.getBitCount()).toBitArray(this.text)}updateStateListForChar(h,g){const b=[];for(let S of h)this.updateStateForChar(S,g,b);return is.simplifyStates(b)}updateStateForChar(h,g,b){let S=this.text[g]&255,A=_i[h.getMode()][S]>0,I=null;for(let R=0;R<=Fi;R++){let V=_i[R][S];if(V>0){if(I==null&&(I=h.endBinaryShift(g)),!A||R===h.getMode()||R===ns){const te=I.latchAndAppend(R,V);b.push(te)}if(!A&&lo[h.getMode()][R]>=0){const te=I.shiftAndAppend(R,V);b.push(te)}}}if(h.getBinaryShiftByteCount()>0||_i[h.getMode()][S]===0){let R=h.addBinaryShiftChar(g);b.push(R)}}static updateStateListForPair(h,g,b){const S=[];for(let A of h)this.updateStateForPair(A,g,b,S);return this.simplifyStates(S)}static updateStateForPair(h,g,b,S){let A=h.endBinaryShift(g);if(S.push(A.latchAndAppend(Fi,b)),h.getMode()!==Fi&&S.push(A.shiftAndAppend(Fi,b)),b===3||b===4){let I=A.latchAndAppend(ns,16-b).latchAndAppend(ns,1);S.push(I)}if(h.getBinaryShiftByteCount()>0){let I=h.addBinaryShiftChar(g).addBinaryShiftChar(g+1);S.push(I)}}static simplifyStates(h){let g=[];for(const b of h){let S=!0;for(const A of g){if(A.isBetterThanOrEqualTo(b)){S=!1;break}b.isBetterThanOrEqualTo(A)&&(g=g.filter(I=>I!==A))}S&&g.push(b)}return g}}class ln{constructor(){}static encodeBytes(h){return ln.encode(h,ln.DEFAULT_EC_PERCENT,ln.DEFAULT_AZTEC_LAYERS)}static encode(h,g,b){let S=new is(h).encode(),A=D.truncDivision(S.getSize()*g,100)+11,I=S.getSize()+A,R,V,te,ue,ve;if(b!==ln.DEFAULT_AZTEC_LAYERS){if(R=b<0,V=Math.abs(b),V>(R?ln.MAX_NB_BITS_COMPACT:ln.MAX_NB_BITS))throw new p(Z.format("Illegal value %s for layers",b));te=ln.totalBitsInLayer(V,R),ue=ln.WORD_SIZE[V];let At=te-te%ue;if(ve=ln.stuffBits(S,ue),ve.getSize()+A>At)throw new p("Data to large for user specified layer");if(R&&ve.getSize()>ue*64)throw new p("Data to large for user specified layer")}else{ue=0,ve=null;for(let At=0;;At++){if(At>ln.MAX_NB_BITS)throw new p("Data too large for an Aztec code");if(R=At<=3,V=R?At+1:At,te=ln.totalBitsInLayer(V,R),I>te)continue;(ve==null||ue!==ln.WORD_SIZE[V])&&(ue=ln.WORD_SIZE[V],ve=ln.stuffBits(S,ue));let Tr=te-te%ue;if(!(R&&ve.getSize()>ue*64)&&ve.getSize()+A<=Tr)break}}let Ne=ln.generateCheckWords(ve,te,ue),Me=ve.getSize()/ue,qe=ln.generateModeMessage(R,V,Me),$e=(R?11:14)+V*4,Xe=new Int32Array($e),ct;if(R){ct=$e;for(let At=0;At<Xe.length;At++)Xe[At]=At}else{ct=$e+1+2*D.truncDivision(D.truncDivision($e,2)-1,15);let At=D.truncDivision($e,2),Tr=D.truncDivision(ct,2);for(let qr=0;qr<At;qr++){let Mn=qr+D.truncDivision(qr,15);Xe[At-qr-1]=Tr-Mn-1,Xe[At+qr]=Tr+Mn+1}}let Tt=new me(ct);for(let At=0,Tr=0;At<V;At++){let qr=(V-At)*4+(R?9:12);for(let Mn=0;Mn<qr;Mn++){let ua=Mn*2;for(let Pa=0;Pa<2;Pa++)Ne.get(Tr+ua+Pa)&&Tt.set(Xe[At*2+Pa],Xe[At*2+Mn]),Ne.get(Tr+qr*2+ua+Pa)&&Tt.set(Xe[At*2+Mn],Xe[$e-1-At*2-Pa]),Ne.get(Tr+qr*4+ua+Pa)&&Tt.set(Xe[$e-1-At*2-Pa],Xe[$e-1-At*2-Mn]),Ne.get(Tr+qr*6+ua+Pa)&&Tt.set(Xe[$e-1-At*2-Mn],Xe[At*2+Pa])}Tr+=qr*8}if(ln.drawModeMessage(Tt,R,ct,qe),R)ln.drawBullsEye(Tt,D.truncDivision(ct,2),5);else{ln.drawBullsEye(Tt,D.truncDivision(ct,2),7);for(let At=0,Tr=0;At<D.truncDivision($e,2)-1;At+=15,Tr+=16)for(let qr=D.truncDivision(ct,2)&1;qr<ct;qr+=2)Tt.set(D.truncDivision(ct,2)-Tr,qr),Tt.set(D.truncDivision(ct,2)+Tr,qr),Tt.set(qr,D.truncDivision(ct,2)-Tr),Tt.set(qr,D.truncDivision(ct,2)+Tr)}let _t=new oo;return _t.setCompact(R),_t.setSize(ct),_t.setLayers(V),_t.setCodeWords(Me),_t.setMatrix(Tt),_t}static drawBullsEye(h,g,b){for(let S=0;S<b;S+=2)for(let A=g-S;A<=g+S;A++)h.set(A,g-S),h.set(A,g+S),h.set(g-S,A),h.set(g+S,A);h.set(g-b,g-b),h.set(g-b+1,g-b),h.set(g-b,g-b+1),h.set(g+b,g-b),h.set(g+b,g-b+1),h.set(g+b,g+b-1)}static generateModeMessage(h,g,b){let S=new M;return h?(S.appendBits(g-1,2),S.appendBits(b-1,6),S=ln.generateCheckWords(S,28,4)):(S.appendBits(g-1,5),S.appendBits(b-1,11),S=ln.generateCheckWords(S,40,4)),S}static drawModeMessage(h,g,b,S){let A=D.truncDivision(b,2);if(g)for(let I=0;I<7;I++){let R=A-3+I;S.get(I)&&h.set(R,A-5),S.get(I+7)&&h.set(A+5,R),S.get(20-I)&&h.set(R,A+5),S.get(27-I)&&h.set(A-5,R)}else for(let I=0;I<10;I++){let R=A-5+I+D.truncDivision(I,5);S.get(I)&&h.set(R,A-7),S.get(I+10)&&h.set(A+7,R),S.get(29-I)&&h.set(R,A+7),S.get(39-I)&&h.set(A-7,R)}}static generateCheckWords(h,g,b){let S=h.getSize()/b,A=new Ur(ln.getGF(b)),I=D.truncDivision(g,b),R=ln.bitsToWords(h,b,I);A.encode(R,I-S);let V=g%b,te=new M;te.appendBits(0,V);for(const ue of Array.from(R))te.appendBits(ue,b);return te}static bitsToWords(h,g,b){let S=new Int32Array(b),A,I;for(A=0,I=h.getSize()/g;A<I;A++){let R=0;for(let V=0;V<g;V++)R|=h.get(A*g+V)?1<<g-V-1:0;S[A]=R}return S}static getGF(h){switch(h){case 4:return vt.AZTEC_PARAM;case 6:return vt.AZTEC_DATA_6;case 8:return vt.AZTEC_DATA_8;case 10:return vt.AZTEC_DATA_10;case 12:return vt.AZTEC_DATA_12;default:throw new p("Unsupported word size "+h)}}static stuffBits(h,g){let b=new M,S=h.getSize(),A=(1<<g)-2;for(let I=0;I<S;I+=g){let R=0;for(let V=0;V<g;V++)(I+V>=S||h.get(I+V))&&(R|=1<<g-1-V);(R&A)===A?(b.appendBits(R&A,g),I--):(R&A)===0?(b.appendBits(R|1,g),I--):b.appendBits(R,g)}return b}static totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}ln.DEFAULT_EC_PERCENT=33,ln.DEFAULT_AZTEC_LAYERS=0,ln.MAX_NB_BITS=32,ln.MAX_NB_BITS_COMPACT=4,ln.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Zs{encode(h,g,b,S){return this.encodeWithHints(h,g,b,S,null)}encodeWithHints(h,g,b,S,A){let I=so.ISO_8859_1,R=ln.DEFAULT_EC_PERCENT,V=ln.DEFAULT_AZTEC_LAYERS;return A!=null&&(A.has(Gt.CHARACTER_SET)&&(I=Da.forName(A.get(Gt.CHARACTER_SET).toString())),A.has(Gt.ERROR_CORRECTION)&&(R=D.parseInt(A.get(Gt.ERROR_CORRECTION).toString())),A.has(Gt.AZTEC_LAYERS)&&(V=D.parseInt(A.get(Gt.AZTEC_LAYERS).toString()))),Zs.encodeLayers(h,g,b,S,I,R,V)}static encodeLayers(h,g,b,S,A,I,R){if(g!==ge.AZTEC)throw new p("Can only encode AZTEC, but got "+g);let V=ln.encode(Z.getBytes(h,A),I,R);return Zs.renderResult(V,b,S)}static renderResult(h,g,b){let S=h.getMatrix();if(S==null)throw new Oe;let A=S.getWidth(),I=S.getHeight(),R=Math.max(g,A),V=Math.max(b,I),te=Math.min(R/A,V/I),ue=(R-A*te)/2,ve=(V-I*te)/2,Ne=new me(R,V);for(let Me=0,qe=ve;Me<I;Me++,qe+=te)for(let $e=0,Xe=ue;$e<A;$e++,Xe+=te)S.get($e,Me)&&Ne.setRegion(Xe,qe,te,te);return Ne}}n.AbstractExpandedDecoder=Yn,n.ArgumentException=f,n.ArithmeticException=Qe,n.AztecCode=oo,n.AztecCodeReader=fr,n.AztecCodeWriter=Zs,n.AztecDecoder=Bt,n.AztecDetector=tn,n.AztecDetectorResult=hr,n.AztecEncoder=ln,n.AztecHighLevelEncoder=is,n.AztecPoint=tr,n.BarcodeFormat=ge,n.Binarizer=w,n.BinaryBitmap=x,n.BitArray=M,n.BitMatrix=me,n.BitSource=hs,n.BrowserAztecCodeReader=Ki,n.BrowserBarcodeReader=kl,n.BrowserCodeReader=se,n.BrowserDatamatrixCodeReader=Ya,n.BrowserMultiFormatReader=et,n.BrowserPDF417Reader=Ct,n.BrowserQRCodeReader=Lt,n.BrowserQRCodeSvgWriter=Ei,n.CharacterSetECI=z,n.ChecksumException=v,n.Code128Reader=wt,n.Code39Reader=sr,n.DataMatrixDecodedBitStreamParser=Qa,n.DataMatrixReader=Bn,n.DecodeHintType=q,n.DecoderResult=ke,n.DefaultGridSampler=xn,n.DetectorResult=xr,n.EAN13Reader=Kr,n.EncodeHintType=Gt,n.Exception=d,n.FormatException=W,n.GenericGF=vt,n.GenericGFPoly=Je,n.GlobalHistogramBinarizer=Q,n.GridSampler=yn,n.GridSamplerInstance=Yr,n.HTMLCanvasElementLuminanceSource=Se,n.HybridBinarizer=de,n.ITFReader=ur,n.IllegalArgumentException=p,n.IllegalStateException=Oe,n.InvertedLuminanceSource=ye,n.LuminanceSource=le,n.MathUtils=yt,n.MultiFormatOneDReader=us,n.MultiFormatReader=We,n.MultiFormatWriter=ts,n.NotFoundException=ce,n.OneDReader=Er,n.PDF417DecodedBitStreamParser=pt,n.PDF417DecoderErrorCorrection=fs,n.PDF417Reader=we,n.PDF417ResultMetadata=Yo,n.PerspectiveTransform=Ir,n.PlanarYUVLuminanceSource=ka,n.QRCodeByteMatrix=Sn,n.QRCodeDataMask=la,n.QRCodeDecodedBitStreamParser=Jn,n.QRCodeDecoderErrorCorrectionLevel=Or,n.QRCodeDecoderFormatInformation=Xi,n.QRCodeEncoder=rn,n.QRCodeEncoderQRCode=ei,n.QRCodeMaskUtil=lr,n.QRCodeMatrixUtil=Xt,n.QRCodeMode=Cr,n.QRCodeReader=ca,n.QRCodeVersion=Ht,n.QRCodeWriter=es,n.RGBLuminanceSource=Zo,n.RSS14Reader=zn,n.RSSExpandedReader=Rt,n.ReaderException=Re,n.ReedSolomonDecoder=at,n.ReedSolomonEncoder=Ur,n.ReedSolomonException=Pt,n.Result=H,n.ResultMetadataType=Le,n.ResultPoint=St,n.StringUtils=Z,n.UnsupportedOperationException=G,n.VideoInputDevice=$,n.WhiteRectangleDetector=zr,n.WriterException=Zr,n.ZXingArrays=O,n.ZXingCharset=Da,n.ZXingInteger=D,n.ZXingStandardCharsets=so,n.ZXingStringBuilder=ie,n.ZXingStringEncoding=ne,n.ZXingSystem=C,n.createAbstractExpandedDecoder=Go,Object.defineProperty(n,"__esModule",{value:!0})}))})(Sg,Sg.exports)),Sg.exports}var Ca=_Ae();const TAe=hc(Ca),IAe=KM({__proto__:null,default:TAe},[Ca]);var IM=(function(){function t(r,n,i){if(this.formatMap=new Map([[mr.QR_CODE,Ca.BarcodeFormat.QR_CODE],[mr.AZTEC,Ca.BarcodeFormat.AZTEC],[mr.CODABAR,Ca.BarcodeFormat.CODABAR],[mr.CODE_39,Ca.BarcodeFormat.CODE_39],[mr.CODE_93,Ca.BarcodeFormat.CODE_93],[mr.CODE_128,Ca.BarcodeFormat.CODE_128],[mr.DATA_MATRIX,Ca.BarcodeFormat.DATA_MATRIX],[mr.MAXICODE,Ca.BarcodeFormat.MAXICODE],[mr.ITF,Ca.BarcodeFormat.ITF],[mr.EAN_13,Ca.BarcodeFormat.EAN_13],[mr.EAN_8,Ca.BarcodeFormat.EAN_8],[mr.PDF_417,Ca.BarcodeFormat.PDF_417],[mr.RSS_14,Ca.BarcodeFormat.RSS_14],[mr.RSS_EXPANDED,Ca.BarcodeFormat.RSS_EXPANDED],[mr.UPC_A,Ca.BarcodeFormat.UPC_A],[mr.UPC_E,Ca.BarcodeFormat.UPC_E],[mr.UPC_EAN_EXTENSION,Ca.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!IAe)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(r),s=new Map;s.set(Ca.DecodeHintType.POSSIBLE_FORMATS,a),s.set(Ca.DecodeHintType.TRY_HARDER,!1),this.hints=s}return t.prototype.decodeAsync=function(r){var n=this;return new Promise(function(i,a){try{i(n.decode(r))}catch(s){a(s)}})},t.prototype.decode=function(r){var n=new Ca.MultiFormatReader(this.verbose,this.hints),i=new Ca.HTMLCanvasElementLuminanceSource(r),a=new Ca.BinaryBitmap(new Ca.HybridBinarizer(i)),s=n.decode(a);return{text:s.text,format:cH.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(n,i,a){r.set(n,i)}),r},t.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},t.prototype.createZXingFormats=function(r){for(var n=[],i=0,a=r;i<a.length;i++){var s=a[i];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),OAe=function(t,r,n,i){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{d(i.next(f))}catch(p){o(p)}}function u(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):a(f.value).then(l,u)}d((i=i.apply(t,r||[])).next())})},kAe=function(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(f){return u([d,f])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=r.call(t,n)}catch(f){d=[6,f],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},OM=(function(){function t(r,n,i){if(this.formatMap=new Map([[mr.QR_CODE,"qr_code"],[mr.AZTEC,"aztec"],[mr.CODABAR,"codabar"],[mr.CODE_39,"code_39"],[mr.CODE_93,"code_93"],[mr.CODE_128,"code_128"],[mr.DATA_MATRIX,"data_matrix"],[mr.ITF,"itf"],[mr.EAN_13,"ean_13"],[mr.EAN_8,"ean_8"],[mr.PDF_417,"pdf417"],[mr.UPC_A,"upc_a"],[mr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},t.prototype.decodeAsync=function(r){return OAe(this,void 0,void 0,function(){var n,i;return kAe(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(r)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:cH.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(r){for(var n=null,i=0,a=0,s=r;a<s.length;a++){var o=s[a],l=o.boundingBox.width*o.boundingBox.height;l>i&&(i=l,n=o)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(r){for(var n=[],i=0,a=r;i<a.length;i++){var s=a[i];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},t.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(n,i,a){r.set(n,i)}),r},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),kM=function(t,r,n,i){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{d(i.next(f))}catch(p){o(p)}}function u(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):a(f.value).then(l,u)}d((i=i.apply(t,r||[])).next())})},DM=function(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(f){return u([d,f])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=r.call(t,n)}catch(f){d=[6,f],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},DAe=(function(){function t(r,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&OM.isSupported()?(this.primaryDecoder=new OM(r,i,a),this.secondaryDecoder=new IM(r,i,a)):this.primaryDecoder=new IM(r,i,a)}return t.prototype.decodeAsync=function(r){return kM(this,void 0,void 0,function(){var n;return DM(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(r){return kM(this,void 0,void 0,function(){var n,i;return DM(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(r){if(this.verbose){var n=performance.now()-r;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];r+=a}var s=r/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),r3=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},t(r,n)};return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),Vb=function(t,r,n,i){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{d(i.next(f))}catch(p){o(p)}}function u(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):a(f.value).then(l,u)}d((i=i.apply(t,r||[])).next())})},$b=function(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(f){return u([d,f])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=r.call(t,n)}catch(f){d=[6,f],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},uH=(function(){function t(r,n){this.name=r,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var n=r[this.name];return n}return null},t})(),PAe=(function(t){r3(r,t);function r(n,i){return t.call(this,n,i)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(uH),RAe=(function(t){r3(r,t);function r(n){return t.call(this,"zoom",n)||this}return r})(PAe),MAe=(function(t){r3(r,t);function r(n){return t.call(this,"torch",n)||this}return r})(uH),LAe=(function(){function t(r){this.track=r}return t.prototype.zoomFeature=function(){return new RAe(this.track)},t.prototype.torchFeature=function(){return new MAe(this.track)},t})(),zAe=(function(){function t(r,n,i){this.isClosed=!1,this.parentElement=r,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return t.prototype.createVideoElement=function(r){var n=document.createElement("video");return n.style.width="".concat(r,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=r.surface.clientWidth,a=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(i,a),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(r,n,i,a){return Vb(this,void 0,void 0,function(){var s,o;return $b(this,function(l){switch(l.label){case 0:return s=new t(r,n,a),i.aspectRatio?(o={aspectRatio:i.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(r){this.failIfClosed();var n=this,i=function(){setTimeout(r,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(r){return Vb(this,void 0,void 0,function(){return $b(this,function(n){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(n,i){var a=r.mediaStream.getVideoTracks(),s=a.length,o=0;r.mediaStream.getVideoTracks().forEach(function(l){r.mediaStream.removeTrack(l),l.stop(),++o,o>=s&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),n())})})},t.prototype.getCapabilities=function(){return new LAe(this.getFirstTrackOrFail())},t})(),BAe=(function(){function t(r){this.mediaStream=r}return t.prototype.render=function(r,n,i){return Vb(this,void 0,void 0,function(){return $b(this,function(a){return[2,zAe.create(r,this.mediaStream,n,i)]})})},t.create=function(r){return Vb(this,void 0,void 0,function(){var n,i;return $b(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new t(i)]}})})},t})(),PM=function(t,r,n,i){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{d(i.next(f))}catch(p){o(p)}}function u(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):a(f.value).then(l,u)}d((i=i.apply(t,r||[])).next())})},RM=function(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(f){return u([d,f])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=r.call(t,n)}catch(f){d=[6,f],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},FAe=(function(){function t(){}return t.failIfNotSupported=function(){return PM(this,void 0,void 0,function(){return RM(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(r){return PM(this,void 0,void 0,function(){return RM(this,function(n){return[2,BAe.create(r)]})})},t})(),qAe=function(t,r,n,i){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{d(i.next(f))}catch(p){o(p)}}function u(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):a(f.value).then(l,u)}d((i=i.apply(t,r||[])).next())})},UAe=function(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(f){return u([d,f])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=r.call(t,n)}catch(f){d=[6,f],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},WAe=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var r=Cp.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(r=Cp.insecureContextCameraQueryError()),Promise.reject(r)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},t.getCamerasFromMediaDevices=function(){return qAe(this,void 0,void 0,function(){var r,n,i,a,s,o,l;return UAe(this,function(u){switch(u.label){case 0:return r=function(d){for(var f=d.getVideoTracks(),p=0,x=f;p<x.length;p++){var v=x[p];v.enabled=!1,v.stop(),d.removeTrack(v)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=u.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=u.sent(),a=[],s=0,o=i;s<o.length;s++)l=o[s],l.kind==="videoinput"&&a.push({id:l.deviceId,label:l.label});return r(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,n){var i=function(s){for(var o=[],l=0,u=s;l<u.length;l++){var d=u[l];d.kind==="video"&&o.push({id:d.id,label:d.label})}r(o)},a=MediaStreamTrack;a.getSources(i)})},t})(),Ns;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Ns||(Ns={}));var HAe=(function(){function t(){this.state=Ns.NOT_STARTED,this.onGoingTransactionNewState=Ns.UNKNOWN}return t.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},t.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Ns.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ns.UNKNOWN,this.directTransition(r)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ns.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ns.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ns.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(r){switch(this.state){case Ns.UNKNOWN:throw"Transition from unknown is not allowed";case Ns.NOT_STARTED:this.failIfNewStateIs(r,[Ns.PAUSED]);break;case Ns.SCANNING:break;case Ns.PAUSED:break}},t.prototype.failIfNewStateIs=function(r,n){for(var i=0,a=n;i<a.length;i++){var s=a[i];if(r===s)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},t})(),VAe=(function(){function t(r){this.stateManager=r}return t.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},t.prototype.directTransition=function(r){this.stateManager.directTransition(r)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Ns.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Ns.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ns.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Ns.PAUSED},t})(),$Ae=(function(){function t(){}return t.create=function(){return new VAe(new HAe)},t})(),GAe=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},t(r,n)};return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),_c=(function(t){GAe(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(CAe),KAe=(function(){function t(r,n){this.logger=n,this.fps=_c.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=_c.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?dH.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Uu(this.qrbox)},t.create=function(r,n){return new t(r,n)},t})(),QAe=(function(){function t(r,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new AAe(this.verbose),this.qrcode=new DAe(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=$Ae.create()}return t.prototype.start=function(r,n,i,a){var s=this;if(!r)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;a?o=a:o=this.verbose?this.logger.log:function(){};var l=KAe.create(n,this.logger);this.clearElement();var u=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?u=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=u,f=document.getElementById(this.elementId);f.clientWidth?f.clientWidth:_c.DEFAULT_WIDTH,f.style.position="relative",this.shouldScan=!0,this.element=f;var p=this,x=this.stateManagerProxy.startTransition(Ns.SCANNING);return new Promise(function(v,w){var C=d?l.videoConstraints:p.createVideoConstraints(r);if(!C){x.cancel(),w("videoConstraints should be defined");return}var N={};(!d||l.aspectRatio)&&(N.aspectRatio=l.aspectRatio);var T={onRenderSurfaceReady:function(O,D){p.setupUi(O,D,l),p.isScanning=!0,p.foreverScan(l,i,o)}};FAe.failIfNotSupported().then(function(O){O.create(C).then(function(D){return D.render(s.element,N,T).then(function(M){p.renderedCamera=M,x.execute(),v(null)}).catch(function(M){x.cancel(),w(M)})}).catch(function(D){x.cancel(),w(Cp.errorGettingUserMedia(D))})}).catch(function(O){x.cancel(),w(Cp.cameraStreamingNotSupported())})})},t.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ns.PAUSED),this.showPausedState(),(Uu(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,n=function(){r.stateManagerProxy.directTransition(Ns.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ns.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(r.element){var s=document.getElementById(_c.SHADED_REGION_ELEMENT_ID);s&&r.element.removeChild(s)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(r,n){return this.scanFileV2(r,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(r,n){var i=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Uu(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,s){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(r);var o=new Image;o.onload=function(){var l=o.width,u=o.height,d=document.getElementById(i.elementId),f=d.clientWidth?d.clientWidth:_c.DEFAULT_WIDTH,p=Math.max(d.clientHeight?d.clientHeight:u,_c.FILE_SCAN_MIN_HEIGHT),x=i.computeCanvasDrawConfig(l,u,f,p);if(n){var v=i.createCanvasElement(f,p,"qr-canvas-visible");v.style.display="inline-block",d.appendChild(v);var w=v.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=f,w.canvas.height=p,w.drawImage(o,0,0,l,u,x.x,x.y,x.width,x.height)}var C=_c.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(o.width,x.width),T=Math.max(o.height,x.height),O=N+2*C,D=T+2*C,M=i.createCanvasElement(O,D);d.appendChild(M);var Y=M.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=O,Y.canvas.height=D,Y.drawImage(o,0,0,l,u,C,C,N,T);try{i.qrcode.decodeRobustlyAsync(M).then(function(q){a(_M.createFromQrcodeResult(q))}).catch(s)}catch(q){s("QR code parse error, error = ".concat(q))}},o.onerror=s,o.onabort=s,o.onstalled=s,o.onsuspend=s,o.src=URL.createObjectURL(r)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return WAe.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(r){if(r){if(!dH.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(r){var n=[mr.QR_CODE,mr.AZTEC,mr.CODABAR,mr.CODE_39,mr.CODE_93,mr.CODE_128,mr.DATA_MATRIX,mr.MAXICODE,mr.ITF,mr.EAN_13,mr.EAN_8,mr.PDF_417,mr.RSS_14,mr.RSS_EXPANDED,mr.UPC_A,mr.UPC_E,mr.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return n;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,s=r.formatsToSupport;a<s.length;a++){var o=s[a];SAe(o)?i.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(r){if(Uu(r))return!0;if(!Uu(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(Uu(r.experimentalFeatures))return!0;var n=r.experimentalFeatures;return Uu(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(r,n,i){var a=this,s=i.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(r,n,s),l=function(d){if(d<_c.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(_c.MIN_QR_BOX_SIZE,"px.")},u=function(d){return d>r&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=r),d};l(o.width),l(o.height),o.width=u(o.width)},t.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(r,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(r,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(r,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(r,n,i);var a=Uu(i.qrbox)?{width:r,height:n}:i.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(r,n,a);s.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=i.isShadedBoxEnabled()&&s.height<=n,l={x:0,y:0,width:r,height:n},u=o?this.getShadedRegionBounds(r,n,s):l,d=this.createCanvasElement(u.width,u.height),f={willReadFrequently:!0},p=d.getContext("2d",f);p.canvas.width=u.width,p.canvas.height=u.height,this.element.append(d),o&&this.possiblyInsertShadingElement(this.element,r,n,s),this.createScannerPausedUiElement(this.element),this.qrRegion=u,this.context=p,this.canvasElement=d},t.prototype.createScannerPausedUiElement=function(r){var n=document.createElement("div");n.innerText=Cp.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",r.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(r,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return r(a.text,_M.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var s=Cp.codeParseError(a);return n(s,NAe.createFrom(s)),!1})},t.prototype.foreverScan=function(r,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),o=s.videoWidth/s.clientWidth,l=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var u=this.qrRegion.width*o,d=this.qrRegion.height*l,f=this.qrRegion.x*o,p=this.qrRegion.y*l;this.context.drawImage(s,f,p,u,d,0,0,this.qrRegion.width,this.qrRegion.height);var x=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(r,n,i)},a.getTimeoutFps(r.fps))};this.scanContext(n,i).then(function(v){!v&&r.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){x()})):x()}).catch(function(v){a.logger.logError("Error happend while scanning context",v),x()})}},t.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},s="exact",o=function(w){if(w in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(w,"'")},l=Object.keys(r);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var u=Object.keys(r)[0];if(u!==n&&u!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(u===n){var d=r.facingMode;if(typeof d=="string"){if(o(d))return{facingMode:d}}else if(typeof d=="object")if(s in d){if(o(d["".concat(s)]))return{facingMode:{exact:d["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var f=typeof d;throw"Invalid type of 'facingMode' = ".concat(f)}}else{var p=r.deviceId;if(typeof p=="string")return{deviceId:p};if(typeof p=="object"){if(s in p)return{deviceId:{exact:p["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var x=typeof p;throw"Invalid type of 'deviceId' = ".concat(x)}}}var v=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(v)},t.prototype.computeCanvasDrawConfig=function(r,n,i,a){if(r<=i&&n<=a){var s=(i-r)/2,o=(a-n)/2;return{x:s,y:o,width:r,height:n}}else{var l=r,u=n;return r>i&&(n=i/r*n,r=i),n>a&&(r=a/n*r,n=a),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(u)+" to ".concat(r,"X").concat(n,".")),this.computeCanvasDrawConfig(r,n,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},t.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=r?_c.BORDER_SHADER_MATCH_COLOR:_c.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(r,n,i){var a=r,s=n,o=document.createElement("canvas");return o.style.width="".concat(a,"px"),o.style.height="".concat(s,"px"),o.style.display="none",o.id=Uu(i)?"qr-canvas":i,o},t.prototype.getShadedRegionBounds=function(r,n,i){if(i.width>r||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(r,n,i,a){if(!(n-a.width<1||i-a.height<1)){var s=document.createElement("div");s.style.position="absolute";var o=(n-a.width)/2,l=(i-a.height)/2;if(s.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(_c.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var u=5,d=40;this.insertShaderBorders(s,d,u,-u,null,0,!0),this.insertShaderBorders(s,d,u,-u,null,0,!1),this.insertShaderBorders(s,d,u,null,-u,0,!0),this.insertShaderBorders(s,d,u,null,-u,0,!1),this.insertShaderBorders(s,u,d+u,-u,null,-u,!0),this.insertShaderBorders(s,u,d+u,null,-u,-u,!0),this.insertShaderBorders(s,u,d+u,-u,null,-u,!1),this.insertShaderBorders(s,u,d+u,null,-u,-u,!1),this.hasBorderShaders=!0}r.append(s)}},t.prototype.insertShaderBorders=function(r,n,i,a,s,o,l){var u=document.createElement("div");u.style.position="absolute",u.style.backgroundColor=_c.BORDER_SHADER_DEFAULT_COLOR,u.style.width="".concat(n,"px"),u.style.height="".concat(i,"px"),a!==null&&(u.style.top="".concat(a,"px")),s!==null&&(u.style.bottom="".concat(s,"px")),l?u.style.left="".concat(o,"px"):u.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(u),r.appendChild(u)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(r){return 1e3/r},t})(),MM;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(MM||(MM={}));function YAe({onScan:t,onClose:r,placeholder:n="Scan barcode or enter manually..."}){const[i,a]=k.useState("manual"),[s,o]=k.useState(""),[l,u]=k.useState(null),[d,f]=k.useState(!1),p=k.useRef(null),x=k.useRef(null),v=k.useRef(null),w=k.useCallback(async()=>{if(p.current&&d){try{await p.current.stop(),p.current.clear()}catch(O){console.error("Error stopping scanner:",O)}f(!1)}},[d]),C=k.useCallback(async()=>{if(x.current)try{u(null);const O=new QAe("barcode-scanner-container");p.current=O,await O.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},(D,M)=>{t(D,M.result.format?.formatName),w(),r&&r()},()=>{}),f(!0)}catch(O){console.error("Scanner error:",O),u(O?.message||"Failed to start camera. Please check permissions."),a("manual")}},[t,r,w]);k.useEffect(()=>(i==="camera"?C():w(),()=>{w()}),[i]),k.useEffect(()=>{i==="manual"&&v.current&&v.current.focus()},[i]);const N=O=>{O.preventDefault(),s.trim()&&(t(s.trim(),"MANUAL"),o(""),r&&r())},T=O=>{O.key==="Enter"&&s.trim()&&(t(s.trim(),"MANUAL"),o(""),r&&r())};return e.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",border:"1px solid var(--border)",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>a("manual"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"6px",border:"none",background:i==="manual"?"var(--primary)":"transparent",color:i==="manual"?"white":"var(--text-secondary)",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[e.jsx(mZ,{size:16}),"Manual"]}),e.jsxs("button",{onClick:()=>a("camera"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"6px",border:"none",background:i==="camera"?"var(--primary)":"transparent",color:i==="camera"?"white":"var(--text-secondary)",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[e.jsx(Dv,{size:16}),"Camera"]})]}),r&&e.jsx("button",{onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"6px",border:"none",background:"transparent",color:"var(--text-secondary)",cursor:"pointer"},children:e.jsx(kr,{size:18})})]}),e.jsxs("div",{style:{padding:"16px"},children:[l&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",marginBottom:"16px",color:"var(--error)",fontSize:"13px"},children:[e.jsx(sn,{size:16}),l]}),i==="camera"?e.jsxs("div",{children:[e.jsx("div",{id:"barcode-scanner-container",ref:x,style:{width:"100%",minHeight:"200px",borderRadius:"8px",overflow:"hidden",background:"var(--bg-tertiary)"}}),e.jsx("p",{style:{marginTop:"12px",textAlign:"center",color:"var(--text-muted)",fontSize:"13px"},children:"Point your camera at a barcode or QR code"})]}):e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(dz,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{ref:v,type:"text",value:s,onChange:O=>o(O.target.value),onKeyPress:T,placeholder:n,autoFocus:!0,style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"14px"}})]}),e.jsx("p",{style:{marginTop:"8px",color:"var(--text-muted)",fontSize:"12px"},children:"Type or scan with USB scanner, then press Enter"})]})]})]})}function ZAe({isOpen:t,onClose:r,onScan:n,title:i="Scan Barcode"}){return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:r,children:e.jsx("div",{style:{width:"100%",maxWidth:"400px"},onClick:a=>a.stopPropagation(),children:e.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600},children:i}),e.jsx("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:e.jsx(kr,{size:20})})]}),e.jsx(YAe,{onScan:n,onClose:r})]})})}):null}const iv=[{value:"RAW_MATERIAL",label:"Raw Material"},{value:"CONSUMABLE",label:"Consumable"},{value:"REAGENT",label:"Reagent"},{value:"PACKAGING",label:"Packaging"},{value:"RADIOISOTOPE",label:"Radioisotope"},{value:"TARGET_MATERIAL",label:"Target Material"},{value:"SOLVENT",label:"Solvent"},{value:"BUFFER",label:"Buffer"},{value:"FILTER",label:"Filter"},{value:"CONTAINER",label:"Container"},{value:"EXCIPIENT",label:"Excipient"},{value:"REFERENCE_STANDARD",label:"Reference Standard"}],av=[{value:"ACTIVE",label:"Active",color:"var(--success)"},{value:"INACTIVE",label:"Inactive",color:"var(--text-muted)"},{value:"DISCONTINUED",label:"Discontinued",color:"var(--error)"},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"var(--warning)"}],yC=t=>({RAW_MATERIAL:{bg:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},CONSUMABLE:{bg:"rgba(34, 197, 94, 0.1)",color:"#22c55e"},REAGENT:{bg:"rgba(168, 85, 247, 0.1)",color:"#a855f7"},PACKAGING:{bg:"rgba(249, 115, 22, 0.1)",color:"#f97316"},RADIOISOTOPE:{bg:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},TARGET_MATERIAL:{bg:"rgba(236, 72, 153, 0.1)",color:"#ec4899"},SOLVENT:{bg:"rgba(20, 184, 166, 0.1)",color:"#14b8a6"},BUFFER:{bg:"rgba(6, 182, 212, 0.1)",color:"#06b6d4"},FILTER:{bg:"rgba(132, 204, 22, 0.1)",color:"#84cc16"},CONTAINER:{bg:"rgba(234, 179, 8, 0.1)",color:"#eab308"},EXCIPIENT:{bg:"rgba(99, 102, 241, 0.1)",color:"#6366f1"},REFERENCE_STANDARD:{bg:"rgba(244, 63, 94, 0.1)",color:"#f43f5e"}})[t]||{bg:"rgba(107, 114, 128, 0.1)",color:"#6b7280"};function XAe(){const[t,r]=k.useState(!1),[n,i]=k.useState(null),[a,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(""),[x,v]=k.useState(!1),[w,C]=k.useState(!1),N=pr(),T=gn(),O=ie=>{v(!1),p(ie),T.info("Barcode Scanned",`Searching for: ${ie}`)},{data:D,isLoading:M}=Ve({queryKey:["materials",o,u,f],queryFn:async()=>{const ie=new URLSearchParams;o&&ie.append("category",o),u&&ie.append("status",u),f&&ie.append("search",f);const{data:me}=await xe.get(`/materials?${ie.toString()}`);return me}}),{data:Y}=Ve({queryKey:["suppliers"],queryFn:async()=>{const{data:ie}=await xe.get("/suppliers");return ie}}),q=ot({mutationFn:async ie=>n?xe.put(`/materials/${n.id}`,ie):xe.post("/materials",ie),onSuccess:()=>{N.invalidateQueries({queryKey:["materials"]}),r(!1),i(null),T.success(n?"Material Updated":"Material Created",n?"Material details have been updated":"New material has been added")},onError:ie=>{const me=an(ie);T.error("Error",me?.userMessage||"Failed to save material")}}),W=ot({mutationFn:async ie=>xe.delete(`/materials/${ie}`),onSuccess:()=>{N.invalidateQueries({queryKey:["materials"]}),T.success("Material Deleted","Material has been removed"),a?.id===n?.id&&s(null)},onError:ie=>{const me=an(ie);T.error("Error",me?.userMessage||"Failed to delete material")}}),J=ie=>{ie.preventDefault();const me=new FormData(ie.currentTarget);q.mutate({code:me.get("code"),name:me.get("name"),nameAr:me.get("nameAr")||null,category:me.get("category"),description:me.get("description")||null,unit:me.get("unit"),reorderPoint:parseFloat(me.get("reorderPoint"))||0,reorderQty:parseFloat(me.get("reorderQty"))||0,leadTimeDays:parseInt(me.get("leadTimeDays"))||0,supplierId:me.get("supplierId")||null,status:me.get("status"),storageConditions:me.get("storageConditions")||null,shelfLifeDays:parseInt(me.get("shelfLifeDays"))||null,hazardClass:me.get("hazardClass")||null,isRadioactive:me.get("isRadioactive")==="true"})},z=D?.filter(ie=>ie.status==="ACTIVE").length||0,G=D?.filter(ie=>ie._count?.stock>0&&ie.reorderPoint>0&&ie._count?.stock<=ie.reorderPoint).length||0,ne=D?.filter(ie=>ie.isRadioactive).length||0,Z=D||[];return M?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Materials"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Manage raw materials, consumables, and reagents"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{i(null),r(!0)},children:[e.jsx(cn,{size:16})," Add Material"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Materials",value:D?.length||0,icon:e.jsx(Rr,{size:24}),color:"primary"}),e.jsx(st,{title:"Active",value:z,icon:e.jsx(dc,{size:24}),color:"success"}),e.jsx(st,{title:"Low Stock",value:G,icon:e.jsx($r,{size:24}),color:"warning"}),e.jsx(st,{title:"Radioactive",value:ne,icon:e.jsx(ou,{size:24}),color:"danger"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search by name, code, or supplier...",value:f,onChange:ie=>p(ie.target.value),style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:o,onChange:ie=>l(ie.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),iv.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"130px"},value:u,onChange:ie=>d(ie.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),av.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>v(!0),title:"Scan barcode to search",children:[e.jsx(dz,{size:16})," Scan"]}),(o||u||f)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{l(""),d(""),p("")},children:[e.jsx(kr,{size:14})," Clear"]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:a?"1fr 380px":"1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:Z.map(ie=>{const me=yC(ie.category),ce=a?.id===ie.id,Q=av.find(de=>de.value===ie.status);return e.jsxs("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:ce?"2px solid var(--primary)":"1px solid var(--border)",transition:"all 0.2s"},onClick:()=>s(ie),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:me.bg,color:me.color,fontWeight:600},children:iv.find(de=>de.value===ie.category)?.label||ie.category}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:de=>{de.stopPropagation(),i(ie),r(!0)},children:e.jsx(Ha,{size:14})})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"1rem"},children:ie.name}),e.jsxs("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontFamily:"monospace"},children:ie.code}),ie.supplier?.name&&`  ${ie.supplier.name}`]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8125rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(rh,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["Unit: ",ie.unit]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(MA,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["Reorder: ",ie.reorderPoint]})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{className:"badge",style:{fontSize:"0.6875rem",background:Q?.color==="var(--success)"?"rgba(34, 197, 94, 0.1)":Q?.color==="var(--warning)"?"rgba(234, 179, 8, 0.1)":Q?.color==="var(--error)"?"rgba(239, 68, 68, 0.1)":"var(--bg-secondary)",color:Q?.color||"var(--text-muted)"},children:Q?.label||ie.status}),ie.isRadioactive&&e.jsxs("span",{className:"badge",style:{fontSize:"0.6875rem",background:"rgba(239, 68, 68, 0.1)",color:"var(--error)"},children:[e.jsx(ou,{size:10,style:{marginRight:"0.25rem"}})," Radioactive"]}),ie._count?.recipeComponents>0&&e.jsxs("span",{style:{opacity:.7},children:["Used in ",ie._count.recipeComponents," recipe",ie._count.recipeComponents>1?"s":""]})]})]},ie.id)})}),Z.length===0&&e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{title:"No materials found",message:f||o||u?"Try adjusting your filters":"Add your first material to get started",icon:"package"})})]}),a&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:yC(a.category).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:yC(a.category).color,color:"white",marginBottom:"0.5rem"},children:iv.find(ie=>ie.value===a.category)?.label||a.category}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:"0.5rem 0 0.25rem"},children:a.name}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0},children:a.code})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>s(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Material Properties"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(rh,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Unit"})]}),e.jsx("div",{style:{fontWeight:600},children:a.unit})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(Rr,{size:14,style:{color:"var(--warning)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Status"})]}),e.jsx("div",{style:{fontWeight:600},children:av.find(ie=>ie.value===a.status)?.label||a.status})]}),a.shelfLifeDays&&e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(sa,{size:14,style:{color:"var(--success)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Shelf Life"})]}),e.jsxs("div",{style:{fontWeight:600},children:[a.shelfLifeDays," days"]})]}),a.leadTimeDays>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(Ts,{size:14,style:{color:"var(--info)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Lead Time"})]}),e.jsxs("div",{style:{fontWeight:600},children:[a.leadTimeDays," days"]})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Inventory Details"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"Reorder Point"}),e.jsxs("span",{style:{fontWeight:600},children:[a.reorderPoint," ",a.unit]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{fontSize:"0.8125rem"},children:"Reorder Qty"}),e.jsxs("span",{style:{fontWeight:600},children:[a.reorderQty," ",a.unit]})]})]})]}),a.supplier&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Preferred Supplier"}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ts,{size:16,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontWeight:500},children:a.supplier.name})]})]}),a.storageConditions&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Storage Conditions"}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",margin:0},children:a.storageConditions})]}),a.isRadioactive&&e.jsx("div",{style:{marginBottom:"1.25rem"},children:e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--error)"},children:[e.jsx(ou,{size:16}),e.jsx("span",{style:{fontWeight:500},children:"Radioactive Material"}),a.hazardClass&&e.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.75rem"},children:["Class: ",a.hazardClass]})]})}),a._count?.recipeComponents>0&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Used In Recipes"}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(99, 102, 241, 0.1)",borderRadius:"var(--radius)",color:"var(--primary)",fontWeight:500},children:[a._count.recipeComponents," recipe",a._count.recipeComponents>1?"s":""]})]}),e.jsx("div",{style:{marginBottom:"1.25rem"},children:e.jsx(mc,{entityType:"Material",entityId:a.id,title:"Material Documents"})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsxs("button",{className:"btn btn-primary",style:{flex:1},onClick:()=>{i(a),r(!0)},children:[e.jsx(Ha,{size:16})," Edit Material"]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>C(!0),title:"Print Label",children:e.jsx(wm,{size:16})}),a._count?.recipeComponents===0&&e.jsx("button",{className:"btn btn-secondary",style:{color:"var(--error)"},onClick:()=>{confirm("Are you sure you want to delete this material?")&&(W.mutate(a.id),s(null))},children:e.jsx(ra,{size:16})})]})]})]})]}),t&&e.jsx("div",{className:"modal-overlay",onClick:()=>{r(!1),i(null)},children:e.jsxs("div",{className:"modal",style:{maxWidth:"40rem"},onClick:ie=>ie.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:n?"Edit Material":"Add Material"}),e.jsx("button",{onClick:()=>{r(!1),i(null)},style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:J,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{name:"code",className:"form-input",defaultValue:n?.code||"",required:!0,disabled:!!n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsx("select",{name:"category",className:"form-select",defaultValue:n?.category||"RAW_MATERIAL",required:!0,children:iv.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (English)"}),e.jsx("input",{name:"name",className:"form-input",defaultValue:n?.name||"",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic)"}),e.jsx("input",{name:"nameAr",className:"form-input",defaultValue:n?.nameAr||"",dir:"rtl"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-input",defaultValue:n?.description||"",rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Unit"}),e.jsxs("select",{name:"unit",className:"form-select",defaultValue:n?.unit||"EA",required:!0,children:[e.jsx("option",{value:"EA",children:"Each (EA)"}),e.jsx("option",{value:"KG",children:"Kilogram (KG)"}),e.jsx("option",{value:"G",children:"Gram (G)"}),e.jsx("option",{value:"MG",children:"Milligram (MG)"}),e.jsx("option",{value:"L",children:"Liter (L)"}),e.jsx("option",{value:"ML",children:"Milliliter (ML)"}),e.jsx("option",{value:"M",children:"Meter (M)"}),e.jsx("option",{value:"CM",children:"Centimeter (CM)"}),e.jsx("option",{value:"PC",children:"Piece (PC)"}),e.jsx("option",{value:"BOX",children:"Box"}),e.jsx("option",{value:"VIAL",children:"Vial"}),e.jsx("option",{value:"AMPOULE",children:"Ampoule"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("select",{name:"status",className:"form-select",defaultValue:n?.status||"ACTIVE",children:av.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Preferred Supplier"}),e.jsxs("select",{name:"supplierId",className:"form-select",defaultValue:n?.supplierId||"",children:[e.jsx("option",{value:"",children:"Select Supplier"}),Y?.map(ie=>e.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reorder Point"}),e.jsx("input",{name:"reorderPoint",className:"form-input",type:"number",step:"0.01",defaultValue:n?.reorderPoint||0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reorder Qty"}),e.jsx("input",{name:"reorderQty",className:"form-input",type:"number",step:"0.01",defaultValue:n?.reorderQty||0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lead Time (days)"}),e.jsx("input",{name:"leadTimeDays",className:"form-input",type:"number",defaultValue:n?.leadTimeDays||0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Storage Conditions"}),e.jsx("input",{name:"storageConditions",className:"form-input",defaultValue:n?.storageConditions||"",placeholder:"e.g., 2-8C"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Shelf Life (days)"}),e.jsx("input",{name:"shelfLifeDays",className:"form-input",type:"number",defaultValue:n?.shelfLifeDays||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Hazard Class"}),e.jsx("input",{name:"hazardClass",className:"form-input",defaultValue:n?.hazardClass||"",placeholder:"e.g., Class 7"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Radioactive"}),e.jsxs("select",{name:"isRadioactive",className:"form-select",defaultValue:n?.isRadioactive?"true":"false",children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{r(!1),i(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:q.isPending,children:q.isPending?"Saving...":"Save Material"})]})]})]})}),e.jsx(ZAe,{isOpen:x,onClose:()=>v(!1),onScan:O,title:"Scan Material Barcode"}),w&&a&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"450px"},onClick:ie=>ie.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Print Material Label"}),e.jsx("button",{onClick:()=>C(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsx("div",{className:"modal-body",style:{display:"flex",justifyContent:"center"},children:e.jsx(q5e,{material:a})})]})})]})}const LM={RAW_MATERIAL:"Raw Material",CONSUMABLE:"Consumable",REAGENT:"Reagent",PACKAGING:"Packaging",RADIOISOTOPE:"Radioisotope",TARGET_MATERIAL:"Target Material",SOLVENT:"Solvent",BUFFER:"Buffer",FILTER:"Filter",CONTAINER:"Container",EXCIPIENT:"Excipient",REFERENCE_STANDARD:"Reference Standard"};function xC(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}function JAe(){const{id:t}=hl(),r=Qr(),[n,i]=k.useState("overview"),{data:a,isLoading:s}=Ve({queryKey:["material",t],queryFn:async()=>{const{data:N}=await xe.get(`/materials/${t}`);return N},enabled:!!t}),{data:o}=Ve({queryKey:["material-stock",t],queryFn:async()=>{const{data:N}=await xe.get(`/inventory/stock?materialId=${t}`);return N},enabled:!!t}),{data:l}=Ve({queryKey:["material-audit",t],queryFn:async()=>{const{data:N}=await xe.get(`/audit?entityType=Material&entityId=${t}`);return N.logs||[]},enabled:!!t});if(s)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!a)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx(fn,{icon:"search",title:"Material Not Found",message:"The material you're looking for doesn't exist or has been deleted.",ctaLabel:"Back to Materials",onCta:()=>r("/materials")})});const u=o?.reduce((N,T)=>N+(T.availableQty||0),0)||0,d=o?.filter(N=>N.status==="QUARANTINE").reduce((N,T)=>N+T.quantity,0)||0,f=o?.filter(N=>N.status==="EXPIRED").reduce((N,T)=>N+T.quantity,0)||0,p=o?.filter(N=>{if(!N.expiryDate)return!1;const T=Math.ceil((new Date(N.expiryDate).getTime()-Date.now())/(1e3*60*60*24));return T>0&&T<=30}).length||0,x=[{title:"On-Hand Qty",value:`${u} ${a.unit}`,icon:e.jsx(Rr,{size:24}),color:"primary"},{title:"Quarantine",value:`${d} ${a.unit}`,icon:e.jsx($r,{size:24}),color:"warning"},{title:"Expired",value:`${f} ${a.unit}`,icon:e.jsx(ci,{size:24}),color:"danger"},{title:"Near Expiry",value:p,icon:e.jsx(Qt,{size:24}),color:"info"}],v=[];a.supplier&&v.push({type:"supplier",label:a.supplier.name,link:"/suppliers",count:1}),a.recipeComponents?.length>0&&v.push({type:"recipe",label:"Used in recipes",link:"/recipes",count:a.recipeComponents.length});const w=(l||[]).map(N=>({id:N.id,title:N.action.replace(/_/g," "),description:N.details||"",timestamp:N.createdAt,actor:N.user?.firstName?`${N.user.firstName} ${N.user.lastName}`:"System",type:N.action.includes("CREATED")?"success":N.action.includes("DELETED")?"error":"info"})),C=[{key:"overview",label:"Overview",icon:e.jsx(Pr,{size:16}),content:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Basic Information"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Code"}),e.jsx("td",{style:{padding:"0.5rem 0",fontWeight:500},children:a.code})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Name"}),e.jsx("td",{style:{padding:"0.5rem 0",fontWeight:500},children:a.name})]}),a.nameAr&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Arabic Name"}),e.jsx("td",{style:{padding:"0.5rem 0",fontWeight:500},children:a.nameAr})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Category"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:LM[a.category]||a.category})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Unit"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.unit})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Status"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:e.jsx("span",{className:`badge badge-${a.status==="ACTIVE"?"success":"default"}`,children:a.status})})]}),a.description&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Description"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.description})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Inventory Settings"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Min Stock Level"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[a.minStockLevel," ",a.unit]})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Reorder Point"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[a.reorderPoint," ",a.unit]})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Reorder Qty"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[a.reorderQuantity," ",a.unit]})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Lead Time"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[a.leadTimeDays," days"]})]}),a.shelfLifeDays&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Shelf Life"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[a.shelfLifeDays," days"]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Supplier & Cost"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Preferred Supplier"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.supplier?.name||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Unit Cost"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.unitCost?`${a.unitCost.toFixed(2)} ${a.currency}`:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Requires QC"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.requiresQC?e.jsx(Ut,{size:16,color:"var(--success)"}):e.jsx(ci,{size:16,color:"var(--text-muted)"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Radioactive"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.isRadioactive?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--warning)"},children:[e.jsx(ou,{size:16})," Yes ",a.halfLifeMinutes&&`(t: ${a.halfLifeMinutes} min)`]}):"No"})]})]})})]}),(a.storageConditions||a.handlingInstructions||a.hazardClass)&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Storage & Handling"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[a.storageConditions&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Storage"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.storageConditions})]}),a.handlingInstructions&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Handling"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.handlingInstructions})]}),a.hazardClass&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Hazard Class"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.hazardClass})]}),a.casNumber&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"CAS Number"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.casNumber})]})]})})]})]})},{key:"stock",label:"Stock / Lots",icon:e.jsx(zg,{size:16}),badge:o?.length||0,content:o?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Lot #"}),e.jsx("th",{children:"Warehouse"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Qty"}),e.jsx("th",{children:"Available"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Expiry"})]})}),e.jsx("tbody",{children:o.map(N=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace"},children:N.lotNumber||"-"}),e.jsx("td",{children:N.warehouse?.name||"-"}),e.jsx("td",{children:N.location?.code||"-"}),e.jsxs("td",{children:[N.quantity," ",N.unit]}),e.jsxs("td",{children:[N.availableQty," ",N.unit]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${N.status==="AVAILABLE"?"success":N.status==="QUARANTINE"?"warning":N.status==="EXPIRED"?"danger":"default"}`,children:N.status})}),e.jsx("td",{children:xC(N.expiryDate,"dd MMM yyyy")})]},N.id))})]})}):e.jsx(fn,{icon:"package",title:"No Stock",message:"This material has no inventory records yet."})},{key:"recipes",label:"Used In",icon:e.jsx(dc,{size:16}),badge:a.recipeComponents?.length||0,content:a.recipeComponents?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Recipe"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Version"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:a.recipeComponents.map(N=>e.jsxs("tr",{children:[e.jsxs("td",{children:[N.recipe?.code," - ",N.recipe?.name]}),e.jsx("td",{children:N.recipe?.product?.name||"-"}),e.jsxs("td",{children:["v",N.recipe?.version]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${N.recipe?.status==="ACTIVE"?"success":"default"}`,children:N.recipe?.status})})]},N.id))})]})}):e.jsx(fn,{icon:"package",title:"Not Used in Recipes",message:"This material is not currently used in any recipes."})},{key:"documents",label:"Documents",icon:e.jsx(Pr,{size:16}),content:e.jsx(mc,{entityType:"Material",entityId:t})},{key:"timeline",label:"Timeline",icon:e.jsx(jm,{size:16}),badge:w.length,content:w.length>0?e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:w.map(N=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:N.type==="success"?"var(--success)":N.type==="error"?"var(--danger)":"var(--primary)",marginTop:"0.5rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:N.title}),N.description&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:N.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[N.actor,"  ",xC(N.timestamp,"dd MMM yyyy HH:mm")]})]})]},N.id))}):e.jsx(fn,{icon:"search",title:"No Activity",message:"No activity recorded for this material yet."})}];return e.jsx(gy,{title:a.name,code:a.code,subtitle:LM[a.category]||a.category,status:{value:a.status,label:a.status,variant:a.status==="ACTIVE"?"success":"default"},metadata:[{label:"Unit",value:a.unit},{label:"Created",value:xC(a.createdAt,"dd MMM yyyy")},...a.isRadioactive?[{label:"Radioactive",value:e.jsx(ou,{size:14,style:{color:"var(--warning)"}})}]:[]],kpis:x,tabs:C,defaultTab:"overview",actions:[{label:"Edit",icon:e.jsx(e0,{size:16}),onClick:()=>r("/materials"),variant:"secondary"}],linkedRecords:v,timeline:w,showTimeline:!1,backUrl:"/materials",backLabel:"Materials"})}function hH({isOpen:t,onClose:r,onSuccess:n,scope:i,entityType:a,entityId:s,title:o="Electronic Signature Required",description:l,metadata:u}){const[d,f]=k.useState(""),[p,x]=k.useState(""),[v,w]=k.useState(""),[C,N]=k.useState(""),{data:T}=Ve({queryKey:["esignature-meanings",i],queryFn:async()=>{const{data:q}=await xe.get(`/esignatures/meanings/${i}`);return q},enabled:t}),O=ot({mutationFn:async()=>{const{data:q}=await xe.post("/esignatures/sign",{password:d,scope:i,entityType:a,entityId:s,meaning:p,comment:v||void 0,metadata:u});return q},onSuccess:q=>{$i.success("Signed successfully"),f(""),x(""),w(""),N(""),n(q.signature),r()},onError:q=>{N(q.response?.data?.error||"Signature failed")}}),D=q=>{if(q.preventDefault(),N(""),!d){N("Password is required for authentication");return}if(!p){N("Please select the meaning of your signature");return}O.mutate()},M=()=>{f(""),x(""),w(""),N(""),r()};if(!t)return null;const Y={BATCH_RELEASE:"Batch Release",QC_APPROVAL:"QC Approval",DEVIATION_APPROVAL:"Deviation Approval",MASTERDATA_CHANGE:"Master Data Change",RECIPE_ACTIVATION:"Recipe Activation",PO_APPROVAL:"Purchase Order Approval",FINANCIAL_APPROVAL:"Financial Approval",DISPENSING_APPROVAL:"Dispensing Approval"};return e.jsx("div",{className:"modal-overlay",onClick:M,children:e.jsxs("div",{className:"modal",style:{maxWidth:"480px"},onClick:q=>q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--primary) 0%, #1e40af 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(qg,{size:20,style:{color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:o}),e.jsx("span",{className:"badge badge-primary",style:{fontSize:"0.6875rem",marginTop:"0.25rem"},children:Y[i]||i})]})]}),e.jsx("button",{onClick:M,style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"modal-body",children:[l&&e.jsx("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1.25rem",fontSize:"0.875rem",color:"var(--text-muted)"},children:l}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius)",marginBottom:"1.25rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(zC,{size:18,style:{color:"var(--primary)",flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{fontSize:"0.8125rem"},children:[e.jsx("strong",{children:"GMP Compliance Notice"}),e.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:"This action requires your electronic signature. Your password will be verified and the signature will be permanently recorded with timestamp."})]})]}),C&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)",fontSize:"0.875rem"},children:[e.jsx(sn,{size:16}),C]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Meaning of Signature *"}),e.jsxs("select",{className:"form-select",value:p,onChange:q=>x(q.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select the meaning of your signature"}),T?.map((q,W)=>e.jsx("option",{value:q,children:q},W))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Comment / Reason (Optional)"}),e.jsx("textarea",{className:"form-textarea",value:v,onChange:q=>w(q.target.value),placeholder:"Add any additional comments or reasons...",rows:2,style:{resize:"none"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(zC,{size:14,style:{marginRight:"0.375rem"}}),"Enter Your Password to Sign *"]}),e.jsx("input",{type:"password",className:"form-input",value:d,onChange:q=>f(q.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password"})]}),e.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ut,{size:14,style:{color:"var(--success)"}}),"Signature will be timestamped: ",new Date().toLocaleString()]})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid var(--border)",padding:"1rem 1.5rem"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:M,disabled:O.isPending,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:O.isPending||!d||!p,style:{minWidth:"140px"},children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Eg,{size:16,className:"animate-spin"}),"Signing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qg,{size:16}),"Sign & Confirm"]})})]})]})]})})}const zM={BATCH_RELEASE:{bg:"rgba(34, 197, 94, 0.1)",color:"var(--success)"},QC_APPROVAL:{bg:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},DEVIATION_APPROVAL:{bg:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"},MASTERDATA_CHANGE:{bg:"rgba(168, 85, 247, 0.1)",color:"#a855f7"},RECIPE_ACTIVATION:{bg:"rgba(16, 185, 129, 0.1)",color:"#10b981"},PO_APPROVAL:{bg:"rgba(20, 184, 166, 0.1)",color:"#14b8a6"},FINANCIAL_APPROVAL:{bg:"rgba(99, 102, 241, 0.1)",color:"#6366f1"},DISPENSING_APPROVAL:{bg:"rgba(249, 115, 22, 0.1)",color:"#f97316"}},BM={BATCH_RELEASE:"Batch Release",QC_APPROVAL:"QC Approval",DEVIATION_APPROVAL:"Deviation Approval",MASTERDATA_CHANGE:"Master Data Change",RECIPE_ACTIVATION:"Recipe Activation",PO_APPROVAL:"PO Approval",FINANCIAL_APPROVAL:"Financial Approval",DISPENSING_APPROVAL:"Dispensing"};function eEe({entityType:t,entityId:r,scope:n,title:i="Electronic Signatures",compact:a=!1}){const{data:s,isLoading:o}=Ve({queryKey:["esignatures",t,r,n],queryFn:async()=>{const l=n?`?scope=${n}`:"",{data:u}=await xe.get(`/esignatures/entity/${t}/${r}${l}`);return u},enabled:!!r});return o?e.jsx("div",{style:{padding:a?"0.75rem":"1rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.875rem"},children:"Loading signatures..."}):!s||s.length===0?a?e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",fontStyle:"italic"},children:"No signatures recorded"}):e.jsxs("div",{style:{padding:"1.5rem",textAlign:"center",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(qg,{size:24,style:{opacity:.3,marginBottom:"0.5rem"}}),e.jsx("div",{style:{fontSize:"0.875rem"},children:"No electronic signatures recorded"})]}):a?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:s.map(l=>{const u=zM[l.scope]||{bg:"var(--bg-secondary)",color:"var(--text)"};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:u.bg,borderRadius:"var(--radius)",fontSize:"0.75rem"},children:[e.jsx(Ut,{size:14,style:{color:u.color,flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("span",{style:{fontWeight:500},children:l.signedBy.name}),e.jsx("span",{style:{color:"var(--text-muted)",marginLeft:"0.375rem"},children:Ze(new Date(l.signedAt),"MMM d, HH:mm")})]}),e.jsx("span",{className:"badge",style:{background:u.bg,color:u.color,fontSize:"0.625rem"},children:BM[l.scope]||l.scope})]},l.id)})}):e.jsxs("div",{className:"card",style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)"},children:[e.jsx(qg,{size:18,style:{color:"var(--primary)"}}),e.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:i}),e.jsxs("span",{className:"badge badge-default",style:{marginLeft:"auto"},children:[s.length," signature",s.length!==1?"s":""]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(l=>{const u=zM[l.scope]||{bg:"var(--bg-secondary)",color:"var(--text)"};return e.jsxs("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",borderLeft:`3px solid ${u.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:u.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Uo,{size:14,style:{color:u.color}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:l.signedBy.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:l.signedBy.email})]})]}),e.jsx("span",{className:"badge",style:{background:u.bg,color:u.color,fontSize:"0.6875rem"},children:BM[l.scope]||l.scope})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"0.8125rem",marginBottom:"0.375rem"},children:[e.jsx(Pr,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:l.meaning})]}),l.comment&&e.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",fontStyle:"italic",marginBottom:"0.375rem",paddingLeft:"1.25rem"},children:['"',l.comment,'"']}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx(Qt,{size:12}),Ze(new Date(l.signedAt),"MMMM d, yyyy 'at' HH:mm:ss")]})]},l.id)})})]})}const tEe=[{value:"DRAFT",label:"Draft",color:"var(--text-muted)",icon:Pr},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"var(--warning)",icon:Qt},{value:"ACTIVE",label:"Active",color:"var(--success)",icon:Ut},{value:"SUPERSEDED",label:"Superseded",color:"var(--text-muted)",icon:MA},{value:"OBSOLETE",label:"Obsolete",color:"var(--error)",icon:sn}],rEe={DRAFT:{label:"Draft",description:"Recipe is being developed. Can be edited and components added.",nextAction:"Submit for approval when ready"},PENDING_APPROVAL:{label:"Pending Approval",description:"Recipe submitted and awaiting QA approval with e-signature.",nextAction:"QA approves and activates with signature"},ACTIVE:{label:"Active",description:"Recipe is approved and can be used in production.",nextAction:"Create new version for changes"},SUPERSEDED:{label:"Superseded",description:"Recipe replaced by a newer version.",nextAction:"Reference only - use active version"},OBSOLETE:{label:"Obsolete",description:"Recipe no longer valid for production.",nextAction:"Historical reference only"}};function nEe(){const[t,r]=k.useState(!1),[n,i]=k.useState(null),[a,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(""),[x,v]=k.useState(!1),[w,C]=k.useState(null),[N,T]=k.useState({}),[O,D]=k.useState(!1),M=pr(),Y=gn(),{data:q,isLoading:W}=Ve({queryKey:["recipes",o,u,f],queryFn:async()=>{const $=new URLSearchParams;o&&$.append("status",o),u&&$.append("productId",u),f&&$.append("search",f);const{data:X}=await xe.get(`/recipes?${$.toString()}`);return X}}),{data:J}=Ve({queryKey:["products"],queryFn:async()=>{const{data:$}=await xe.get("/products");return $}}),{data:z}=Ve({queryKey:["materials"],queryFn:async()=>{const{data:$}=await xe.get("/materials?status=ACTIVE");return $}}),{data:G}=Ve({queryKey:["recipe",a?.id],queryFn:async()=>{if(!a?.id)return null;const{data:$}=await xe.get(`/recipes/${a.id}`);return $},enabled:!!a?.id}),ne=ot({mutationFn:async $=>n?xe.put(`/recipes/${n.id}`,$):xe.post("/recipes",$),onSuccess:()=>{M.invalidateQueries({queryKey:["recipes"]}),r(!1),i(null),Y.success(n?"Recipe Updated":"Recipe Created",n?"Recipe details have been updated":"New recipe has been created")},onError:$=>{const X=an($);Y.error("Error",X?.userMessage||"Failed to save recipe")}}),Z=ot({mutationFn:async $=>xe.post(`/recipes/${$}/submit-for-approval`),onSuccess:()=>{M.invalidateQueries({queryKey:["recipes"]}),Y.success("Submitted","Recipe has been submitted for approval")},onError:$=>{const X=an($);Y.error("Error",X?.userMessage||"Failed to submit recipe")}}),ie=ot({mutationFn:async({id:$,signatureId:X})=>xe.post(`/recipes/${$}/activate`,{signatureId:X}),onSuccess:()=>{M.invalidateQueries({queryKey:["recipes"]}),C(null),Y.success("Recipe Activated","Recipe is now active and can be used in production")},onError:$=>{const X=an($);Y.error("Error",X?.userMessage||"Failed to activate recipe")}}),me=ot({mutationFn:async $=>xe.post(`/recipes/${$}/create-new-version`),onSuccess:$=>{M.invalidateQueries({queryKey:["recipes"]}),Y.success("New Version Created",`Version ${$.data.version} has been created as a draft`)},onError:$=>{const X=an($);Y.error("Error",X?.userMessage||"Failed to create new version")}}),ce=ot({mutationFn:async $=>xe.delete(`/recipes/${$}`),onSuccess:()=>{M.invalidateQueries({queryKey:["recipes"]}),Y.success("Recipe Deleted","Recipe has been removed")},onError:$=>{const X=an($);Y.error("Error",X?.userMessage||"Failed to delete recipe")}}),Q=$=>{$.preventDefault();const X=new FormData($.currentTarget),se=X.get("componentsJson"),H=X.get("stepsJson");ne.mutate({code:X.get("code"),name:X.get("name"),productId:X.get("productId"),description:X.get("description")||null,yieldQuantity:parseFloat(X.get("yieldQuantity")),yieldUnit:X.get("yieldUnit"),yieldTolerance:parseFloat(X.get("yieldTolerance"))||5,synthesisTimeMinutes:parseInt(X.get("synthesisTimeMinutes"))||null,totalTimeMinutes:parseInt(X.get("totalTimeMinutes"))||null,specialInstructions:X.get("specialInstructions")||null,safetyPrecautions:X.get("safetyPrecautions")||null,equipmentRequirements:X.get("equipmentRequirements")||null,qualityNotes:X.get("qualityNotes")||null,components:se?JSON.parse(se):[],steps:H?JSON.parse(H):[]})},de=$=>({DRAFT:"default",PENDING_APPROVAL:"warning",ACTIVE:"success",SUPERSEDED:"default",OBSOLETE:"danger"})[$]||"default",le=$=>{T(X=>({...X,[$]:!X[$]}))},ye=q?.recipes||q||[],Se={total:ye.length,active:ye.filter($=>$.status==="ACTIVE").length,draft:ye.filter($=>$.status==="DRAFT").length,pending:ye.filter($=>$.status==="PENDING_APPROVAL").length,superseded:ye.filter($=>$.status==="SUPERSEDED").length};return W?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Recipes & BOM"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:"Manage product recipes and bills of materials"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>D(!O),children:[e.jsx(am,{size:16}),"Workflow Guide",O?e.jsx(nh,{size:14}):e.jsx(bo,{size:14})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>r(!0),children:[e.jsx(cn,{size:16})," Create Recipe"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Recipes",value:Se.total,icon:e.jsx(Pr,{size:20}),color:"primary",onClick:()=>l(""),selected:!o}),e.jsx(st,{title:"Active",value:Se.active,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>l("ACTIVE"),selected:o==="ACTIVE"}),e.jsx(st,{title:"Drafts",value:Se.draft,icon:e.jsx(Ha,{size:20}),color:"default",onClick:()=>l("DRAFT"),selected:o==="DRAFT"}),e.jsx(st,{title:"Pending Approval",value:Se.pending,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>l("PENDING_APPROVAL"),selected:o==="PENDING_APPROVAL"}),e.jsx(st,{title:"Superseded",value:Se.superseded,icon:e.jsx(MA,{size:20}),color:"default",onClick:()=>l("SUPERSEDED"),selected:o==="SUPERSEDED"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search recipes...",value:f,onChange:$=>p($.target.value),style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:u,onChange:$=>d($.target.value),children:[e.jsx("option",{value:"",children:"All Products"}),J?.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:o,onChange:$=>l($.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),tEe.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))]}),(f||u||o)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{p(""),d(""),l("")},children:[e.jsx(kr,{size:14})," Clear"]})]})}),O&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(am,{size:18,style:{color:"var(--primary)"}}),"Recipe Versioning Workflow"]}),e.jsx("div",{style:{marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Recipes follow a controlled versioning workflow with e-signature approval:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:["DRAFT","PENDING_APPROVAL","ACTIVE","SUPERSEDED"].map(($,X,se)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pn,{status:$,size:"sm"}),X<se.length-1&&e.jsx(oc,{size:14,style:{color:"var(--text-muted)"}})]},$))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem"},children:Object.entries(rEe).map(([$,X])=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"var(--radius-sm)",borderLeft:`3px solid var(--${de($)==="default"?"secondary":de($)})`},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:e.jsx(Pn,{status:$,size:"sm"})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:X.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx("strong",{children:"Next:"})," ",X.nextAction]})]},$))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr 420px":"1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Recipe List (",ye.length,")"]})}),ye.length===0?e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{icon:"package",title:"No Recipes Found",message:f||o||u?"No recipes match your search criteria":"Get started by creating your first recipe",ctaLabel:!f&&!o&&!u?"Create Recipe":void 0,onCta:!f&&!o&&!u?()=>r(!0):void 0})}):e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Recipe"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Version"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Components"}),e.jsx("th",{style:{width:"180px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:ye.map($=>e.jsxs("tr",{onClick:()=>s($),style:{cursor:"pointer",background:a?.id===$.id?"var(--bg-hover)":void 0},children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:$.code}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:$.name})]}),e.jsx("td",{children:e.jsx("span",{style:{background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8125rem"},children:$.product?.name})}),e.jsx("td",{children:e.jsxs("span",{style:{fontWeight:600},children:["v",$.version]})}),e.jsx("td",{children:e.jsx(Pn,{status:$.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx(Rr,{size:14,style:{color:"var(--text-muted)"}}),$._count?.components||0,e.jsx("span",{style:{color:"var(--text-muted)"},children:"|"}),e.jsx(bZ,{size:14,style:{color:"var(--text-muted)"}}),$._count?.steps||0]})}),e.jsx("td",{onClick:X=>X.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[$.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>{i($),r(!0)},title:"Edit",children:e.jsx(Ha,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>Z.mutate($.id),title:"Submit for Approval",disabled:Z.isPending,children:e.jsx(Gi,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>{confirm("Delete this draft recipe?")&&ce.mutate($.id)},title:"Delete",style:{color:"var(--error)"},children:e.jsx(ra,{size:14})})]}),$.status==="PENDING_APPROVAL"&&e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{C($),v(!0)},title:"Activate with E-Signature",children:[e.jsx(qg,{size:14})," Activate"]}),($.status==="ACTIVE"||$.status==="SUPERSEDED")&&e.jsxs("button",{className:"btn btn-sm btn-outline",onClick:()=>me.mutate($.id),title:"Create New Version",disabled:me.isPending,children:[e.jsx(PA,{size:14})," New Version"]})]})})]},$.id))})]})]}),a&&G&&e.jsxs("div",{className:"card",style:{padding:0,position:"sticky",top:"1rem",maxHeight:"calc(100vh - 150px)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"monospace",fontWeight:600,fontSize:"1rem"},children:G.code}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:G.name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:600,fontSize:"0.875rem"},children:["v",G.version]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>s(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})]}),e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsx(Pn,{status:G.status,size:"md"})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.25rem"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Product"}),e.jsx("span",{style:{background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)",padding:"0.375rem 0.75rem",borderRadius:"4px",fontWeight:500},children:G.product?.name})]}),G.description&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Description"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:G.description})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Yield Information"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Expected Yield"}),e.jsxs("div",{style:{fontWeight:600,fontSize:"1rem"},children:[G.yieldQuantity," ",G.yieldUnit]})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Tolerance"}),e.jsxs("div",{style:{fontWeight:600,fontSize:"1rem"},children:["",G.yieldTolerance,"%"]})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",marginBottom:"0.5rem"},onClick:()=>le(G.id),children:[N[G.id]?e.jsx(bo,{size:16}):e.jsx(jo,{size:16}),e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Bill of Materials (",G.components?.length||0,")"]})]}),N[G.id]&&e.jsx("div",{style:{marginLeft:"1.5rem"},children:G.components?.length===0?e.jsx("div",{style:{color:"var(--text-muted)",fontStyle:"italic",fontSize:"0.875rem"},children:"No components defined"}):G.components?.map($=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid var(--border)",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:$.material?.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[$.material?.code,$.isCritical&&e.jsx("span",{style:{color:"var(--error)",marginLeft:"0.5rem"},children:"Critical"})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:500},children:[$.quantity," ",$.unit]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["",$.tolerancePercent,"%"]})]})]},$.id))})]}),G.steps?.length>0&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:["Process Steps (",G.steps.length,")"]}),G.steps.map($=>e.jsxs("div",{style:{padding:"0.5rem 0.75rem",marginBottom:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{background:"var(--primary)",color:"white",width:"22px",height:"22px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6875rem",fontWeight:600},children:$.stepNumber}),e.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:$.title}),$.qualityCheckpoint&&e.jsx("span",{title:"QC Checkpoint",children:e.jsx(Ut,{size:14,style:{color:"var(--success)"}})})]}),$.description&&e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginLeft:"30px",marginTop:"0.25rem"},children:$.description})]},$.id))]}),G.activatedAt&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Activation Details"}),e.jsxs("div",{style:{fontSize:"0.875rem",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Activated By:"})," ",G.activatedBy?.firstName," ",G.activatedBy?.lastName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(G.activatedAt).toLocaleString()]})]}),G.activationSignatureId&&e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsx(eEe,{entityType:"Recipe",entityId:G.id,compact:!0})})]})]})]})]}),t&&e.jsx(iEe,{recipe:n,products:J||[],materials:z||[],onClose:()=>{r(!1),i(null)},onSubmit:Q,isPending:ne.isPending}),x&&w&&e.jsx(hH,{isOpen:x,onClose:()=>{v(!1),C(null)},onSuccess:$=>{ie.mutate({id:w.id,signatureId:$.id}),v(!1)},scope:"RECIPE_ACTIVATION",entityType:"Recipe",entityId:w.id,title:"Activate Recipe",description:`You are about to activate recipe ${w.code} v${w.version}. This will make it the active recipe for production and supersede any previous active version.`})]})}function iEe({recipe:t,products:r,materials:n,onClose:i,onSubmit:a,isPending:s}){const[o,l]=k.useState(t?.components||[]),[u,d]=k.useState(t?.steps||[]),f=()=>{l([...o,{materialId:"",quantity:0,unit:"",tolerancePercent:5,isOptional:!1,isCritical:!1}])},p=(N,T,O)=>{const D=[...o];if(D[N]={...D[N],[T]:O},T==="materialId"){const M=n.find(Y=>Y.id===O);M&&(D[N].unit=M.unit)}l(D)},x=N=>{l(o.filter((T,O)=>O!==N))},v=()=>{d([...u,{stepNumber:u.length+1,title:"",description:"",durationMinutes:null,qualityCheckpoint:!1}])},w=(N,T,O)=>{const D=[...u];D[N]={...D[N],[T]:O},d(D)},C=N=>{const T=u.filter((O,D)=>D!==N).map((O,D)=>({...O,stepNumber:D+1}));d(T)};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:t?"Edit Recipe":"Create Recipe"}),e.jsx("button",{className:"btn btn-ghost",onClick:i,children:""})]}),e.jsxs("form",{onSubmit:N=>{N.preventDefault();const T=N.currentTarget,O=document.createElement("input");O.type="hidden",O.name="componentsJson",O.value=JSON.stringify(o),T.appendChild(O);const D=document.createElement("input");D.type="hidden",D.name="stepsJson",D.value=JSON.stringify(u),T.appendChild(D),a(N)},children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Recipe Code *"}),e.jsx("input",{type:"text",name:"code",className:"form-input",defaultValue:t?.code||"",required:!0,placeholder:"e.g., RCP-FDG-001",disabled:!!t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",name:"name",className:"form-input",defaultValue:t?.name||"",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Product *"}),e.jsxs("select",{name:"productId",className:"form-select",defaultValue:t?.productId||"",required:!0,disabled:!!t,children:[e.jsx("option",{value:"",children:"Select Product"}),r.map(N=>e.jsxs("option",{value:N.id,children:[N.code," - ",N.name]},N.id))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-input",rows:2,defaultValue:t?.description||""})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Yield Quantity *"}),e.jsx("input",{type:"number",name:"yieldQuantity",className:"form-input",defaultValue:t?.yieldQuantity||"",required:!0,step:"0.01"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Yield Unit *"}),e.jsx("input",{type:"text",name:"yieldUnit",className:"form-input",defaultValue:t?.yieldUnit||"mCi",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tolerance (%)"}),e.jsx("input",{type:"number",name:"yieldTolerance",className:"form-input",defaultValue:t?.yieldTolerance||5,step:"0.1"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Synthesis Time (min)"}),e.jsx("input",{type:"number",name:"synthesisTimeMinutes",className:"form-input",defaultValue:t?.synthesisTimeMinutes||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Total Time (min)"}),e.jsx("input",{type:"number",name:"totalTimeMinutes",className:"form-input",defaultValue:t?.totalTimeMinutes||""})]})]}),e.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("h4",{style:{margin:0},children:["Bill of Materials (",o.length,")"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:f,children:[e.jsx(cn,{size:14})," Add Component"]})]}),o.map((N,T)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr auto auto",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsxs("select",{className:"form-select",value:N.materialId,onChange:O=>p(T,"materialId",O.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Material"}),n.map(O=>e.jsxs("option",{value:O.id,children:[O.code," - ",O.name]},O.id))]}),e.jsx("input",{type:"number",className:"form-input",placeholder:"Qty",value:N.quantity,onChange:O=>p(T,"quantity",parseFloat(O.target.value)),step:"0.01"}),e.jsx("input",{type:"text",className:"form-input",value:N.unit,onChange:O=>p(T,"unit",O.target.value),placeholder:"Unit"}),e.jsx("input",{type:"number",className:"form-input",placeholder:"%",value:N.tolerancePercent,onChange:O=>p(T,"tolerancePercent",parseFloat(O.target.value))}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},children:[e.jsx("input",{type:"checkbox",checked:N.isCritical,onChange:O=>p(T,"isCritical",O.target.checked)}),"Critical"]}),e.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:()=>x(T),style:{color:"var(--error)"},children:e.jsx(kr,{size:14})})]},T))]}),e.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("h4",{style:{margin:0},children:["Process Steps (",u.length,")"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:v,children:[e.jsx(cn,{size:14})," Add Step"]})]}),u.map((N,T)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 2fr 2fr auto auto",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{background:"var(--primary)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600},children:N.stepNumber}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Step Title",value:N.title,onChange:O=>w(T,"title",O.target.value),required:!0}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Description",value:N.description,onChange:O=>w(T,"description",O.target.value)}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},children:[e.jsx("input",{type:"checkbox",checked:N.qualityCheckpoint,onChange:O=>w(T,"qualityCheckpoint",O.target.checked)}),"QC"]}),e.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:()=>C(T),style:{color:"var(--error)"},children:e.jsx(kr,{size:14})})]},T))]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Saving...":t?"Update Recipe":"Create Recipe"})]})]})]})})}const sv=[{value:"ACTIVE",label:"Active",color:"var(--success)"},{value:"ON_HOLD",label:"On Hold",color:"var(--warning)"},{value:"BLOCKED",label:"Blocked",color:"var(--error)"},{value:"PENDING",label:"Pending",color:"var(--text-muted)"}],vC=t=>{switch(t){case"ACTIVE":return{bg:"rgba(34, 197, 94, 0.1)",color:"var(--success)"};case"ON_HOLD":return{bg:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"};case"BLOCKED":return{bg:"rgba(239, 68, 68, 0.1)",color:"var(--error)"};case"PENDING":return{bg:"rgba(107, 114, 128, 0.1)",color:"var(--text-muted)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"var(--text-muted)"}}};function aEe(){const t=pr(),r=gn(),[n,i]=k.useState(""),[a,s]=k.useState(""),[o,l]=k.useState(!1),[u,d]=k.useState(null),[f,p]=k.useState(null),[x,v]=k.useState({code:"",name:"",nameAr:"",email:"",phone:"",mobile:"",website:"",taxNumber:"",vatNumber:"",crNumber:"",bankName:"",bankBranch:"",bankAccountName:"",bankAccountNumber:"",bankIban:"",bankSwift:"",fullAddress:"",shortAddress:"",buildingNo:"",street:"",secondaryNo:"",district:"",postalCode:"",city:"",region:"",country:"Saudi Arabia",paymentTermsDays:30,status:"ACTIVE"}),{data:w}=Ve({queryKey:["supplier-stats"],queryFn:async()=>{const{data:J}=await xe.get("/suppliers/stats");return J}}),{data:C=[],isLoading:N}=Ve({queryKey:["suppliers",n,a],queryFn:async()=>{const J=new URLSearchParams;n&&J.append("search",n),a&&J.append("status",a);const{data:z}=await xe.get(`/suppliers?${J}`);return z}}),{data:T}=Ve({queryKey:["supplier",f?.id],queryFn:async()=>{const{data:J}=await xe.get(`/suppliers/${f?.id}`);return J},enabled:!!f?.id}),O=ot({mutationFn:async J=>(await xe.post("/suppliers",J)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["suppliers"]}),t.invalidateQueries({queryKey:["supplier-stats"]}),r.success("Supplier created successfully"),M()},onError:J=>{r.error(J.message)}}),D=ot({mutationFn:async J=>(await xe.put(`/suppliers/${u?.id}`,J)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["suppliers"]}),t.invalidateQueries({queryKey:["supplier-stats"]}),t.invalidateQueries({queryKey:["supplier",f?.id]}),r.success("Supplier updated successfully"),M()},onError:J=>{r.error(J.message)}}),M=()=>{l(!1),d(null),v({code:"",name:"",nameAr:"",email:"",phone:"",mobile:"",website:"",taxNumber:"",vatNumber:"",crNumber:"",bankName:"",bankBranch:"",bankAccountName:"",bankAccountNumber:"",bankIban:"",bankSwift:"",fullAddress:"",shortAddress:"",buildingNo:"",street:"",secondaryNo:"",district:"",postalCode:"",city:"",region:"",country:"Saudi Arabia",paymentTermsDays:30,status:"ACTIVE"})},Y=J=>{d(J),v({code:J.code,name:J.name,nameAr:J.nameAr||"",email:J.email||"",phone:J.phone||"",mobile:J.mobile||"",website:J.website||"",taxNumber:J.taxNumber||"",vatNumber:J.vatNumber||"",crNumber:J.crNumber||"",bankName:J.bankName||"",bankBranch:"",bankAccountName:"",bankAccountNumber:"",bankIban:J.bankIban||"",bankSwift:"",fullAddress:J.fullAddress||"",shortAddress:J.shortAddress||"",buildingNo:J.buildingNo||"",street:J.street||"",secondaryNo:J.secondaryNo||"",district:J.district||"",postalCode:J.postalCode||"",city:J.city||"",region:J.region||"",country:J.country||"Saudi Arabia",paymentTermsDays:J.paymentTermsDays||30,status:J.status}),l(!0)},q=J=>{J.preventDefault(),u?D.mutate(x):O.mutate(x)};if(N)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const W=T||f;return e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Suppliers"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Manage vendor and supplier information"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>l(!0),children:[e.jsx(cn,{size:16})," Add Supplier"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Suppliers",value:w?.total||0,icon:e.jsx(Ts,{size:24}),color:"primary"}),e.jsx(st,{title:"Active",value:w?.active||0,icon:e.jsx(Ai,{size:24}),color:"success"}),e.jsx(st,{title:"On Hold",value:w?.onHold||0,icon:e.jsx(sn,{size:24}),color:"warning"}),e.jsx(st,{title:"Blocked",value:w?.blocked||0,icon:e.jsx(QL,{size:24}),color:"danger"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search by name, code, or city...",value:n,onChange:J=>i(J.target.value),style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"130px"},value:a,onChange:J=>s(J.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),sv.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))]}),(a||n)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{s(""),i("")},children:[e.jsx(kr,{size:14})," Clear"]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:f?"1fr 400px":"1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:C.map(J=>{const z=vC(J.status),G=f?.id===J.id;return e.jsxs("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:G?"2px solid var(--primary)":"1px solid var(--border)",transition:"all 0.2s"},onClick:()=>p(J),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:z.bg,color:z.color,fontWeight:600},children:sv.find(ne=>ne.value===J.status)?.label||J.status}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:ne=>{ne.stopPropagation(),Y(J)},children:e.jsx(Ha,{size:14})})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"1rem"},children:J.name}),J.nameAr&&e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"0.25rem",direction:"rtl"},children:J.nameAr}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"1rem"},children:e.jsx("span",{style:{fontFamily:"monospace"},children:J.code})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.8125rem"},children:[J.email&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(uc,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:J.email})]}),J.phone&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(vo,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:J.phone})]}),J.city&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ea,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:[J.city,J.country].filter(Boolean).join(", ")})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ul,{size:12})," ",J.paymentTermsDays," days"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(qo,{size:12})," ",J._count?.purchaseOrders||0," POs"]})]})]},J.id)})}),C.length===0&&e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{title:"No suppliers found",message:n||a?"Try adjusting your filters":"Add your first supplier to get started",icon:"package"})})]}),f&&W&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:vC(W.status).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:vC(W.status).color,color:"white",marginBottom:"0.5rem"},children:sv.find(J=>J.value===W.status)?.label||W.status}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:"0.5rem 0 0.25rem"},children:W.name}),W.nameAr&&e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0,direction:"rtl"},children:W.nameAr}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:"0.25rem 0 0"},children:W.code})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>p(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Contact Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[W.email&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(uc,{size:16,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:W.email})]}),W.phone&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(vo,{size:16,style:{color:"var(--success)"}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:W.phone})]}),W.mobile&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(vo,{size:16,style:{color:"var(--info)"}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:W.mobile})]}),W.website&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(sm,{size:16,style:{color:"var(--warning)"}}),e.jsx("a",{href:W.website,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.875rem",color:"var(--primary)"},children:W.website})]})]})]}),(W.fullAddress||W.shortAddress||W.city)&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Saudi National Address"}),e.jsx("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[e.jsx(Ea,{size:16,style:{color:"var(--primary)",marginTop:"0.125rem"}}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[W.shortAddress&&e.jsx("div",{style:{fontWeight:600,color:"var(--primary)",marginBottom:"0.25rem"},children:W.shortAddress}),W.buildingNo&&e.jsxs("div",{children:["Building ",W.buildingNo,", ",W.street]}),W.secondaryNo&&e.jsxs("div",{children:["Secondary No. ",W.secondaryNo]}),W.district&&e.jsx("div",{children:W.district}),e.jsx("div",{children:[W.city,W.region,W.country].filter(Boolean).join(", ")}),W.postalCode&&e.jsxs("div",{children:["Postal Code: ",W.postalCode]})]})]})})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Financial Details"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Payment Terms"}),e.jsxs("div",{style:{fontWeight:600},children:[W.paymentTermsDays," days"]})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Purchase Orders"}),e.jsx("div",{style:{fontWeight:600},children:W._count?.purchaseOrders||0})]})]})]}),(W.taxNumber||W.vatNumber||W.crNumber)&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Tax & Registration"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.8125rem"},children:[W.taxNumber&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Tax Number"}),e.jsx("span",{style:{fontWeight:500},children:W.taxNumber})]}),W.vatNumber&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"VAT Number"}),e.jsx("span",{style:{fontWeight:500},children:W.vatNumber})]}),W.crNumber&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"CR Number"}),e.jsx("span",{style:{fontWeight:500},children:W.crNumber})]})]})]}),(W.bankName||W.bankIban)&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Bank Information"}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[W.bankName&&e.jsx("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:W.bankName}),W.bankIban&&e.jsx("div",{style:{fontSize:"0.8125rem",fontFamily:"monospace",color:"var(--text-muted)"},children:W.bankIban})]})]}),W.contacts&&W.contacts.length>0&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:["Contacts (",W.contacts.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:W.contacts.map(J=>e.jsxs("div",{style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:500},children:J.name}),J.isPrimary&&e.jsx("span",{className:"badge",style:{fontSize:"0.625rem",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:"Primary"})]}),J.title&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:J.title}),J.email&&e.jsx("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:J.email}),J.phone&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:J.phone})]},J.id))})]}),e.jsx("div",{style:{marginBottom:"1.25rem"},children:e.jsx(mc,{entityType:"Supplier",entityId:W.id,title:"Supplier Documents"})}),e.jsxs("button",{className:"btn btn-primary",style:{width:"100%"},onClick:()=>Y(W),children:[e.jsx(Ha,{size:16})," Edit Supplier"]})]})]})]}),o&&e.jsx("div",{className:"modal-overlay",onClick:M,children:e.jsxs("div",{className:"modal",style:{maxWidth:"40rem"},onClick:J=>J.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:u?"Edit Supplier":"Add Supplier"}),e.jsx("button",{type:"button",onClick:M,style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("form",{onSubmit:q,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{className:"form-input",type:"text",value:x.code,onChange:J=>v({...x,code:J.target.value}),required:!0,disabled:!!u,placeholder:"e.g., SUP-001"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("select",{className:"form-select",value:x.status,onChange:J=>v({...x,status:J.target.value}),children:sv.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (English)"}),e.jsx("input",{className:"form-input",type:"text",value:x.name,onChange:J=>v({...x,name:J.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic)"}),e.jsx("input",{className:"form-input",type:"text",value:x.nameAr,onChange:J=>v({...x,nameAr:J.target.value}),dir:"rtl"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{className:"form-input",type:"email",value:x.email,onChange:J=>v({...x,email:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("input",{className:"form-input",type:"text",value:x.phone,onChange:J=>v({...x,phone:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mobile"}),e.jsx("input",{className:"form-input",type:"text",value:x.mobile,onChange:J=>v({...x,mobile:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Website"}),e.jsx("input",{className:"form-input",type:"url",value:x.website,onChange:J=>v({...x,website:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tax Number"}),e.jsx("input",{className:"form-input",type:"text",value:x.taxNumber,onChange:J=>v({...x,taxNumber:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"VAT Number"}),e.jsx("input",{className:"form-input",type:"text",value:x.vatNumber,onChange:J=>v({...x,vatNumber:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"CR Number"}),e.jsx("input",{className:"form-input",type:"text",value:x.crNumber,onChange:J=>v({...x,crNumber:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Bank Name"}),e.jsx("input",{className:"form-input",type:"text",value:x.bankName,onChange:J=>v({...x,bankName:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"IBAN"}),e.jsx("input",{className:"form-input",type:"text",value:x.bankIban,onChange:J=>v({...x,bankIban:J.target.value}),placeholder:"SA..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Payment Terms (Days)"}),e.jsx("input",{className:"form-input",type:"number",value:x.paymentTermsDays,onChange:J=>v({...x,paymentTermsDays:parseInt(J.target.value)||30}),min:0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{className:"form-label",children:"Full Address"}),e.jsx("input",{className:"form-input",type:"text",value:x.fullAddress,onChange:J=>v({...x,fullAddress:J.target.value}),placeholder:"Complete address with landmarks"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Short Address"}),e.jsx("input",{className:"form-input",type:"text",value:x.shortAddress,onChange:J=>v({...x,shortAddress:J.target.value.toUpperCase()}),placeholder:"ABCD1234",maxLength:8})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Building No."}),e.jsx("input",{className:"form-input",type:"text",value:x.buildingNo,onChange:J=>v({...x,buildingNo:J.target.value}),placeholder:"e.g., 4240"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Street"}),e.jsx("input",{className:"form-input",type:"text",value:x.street,onChange:J=>v({...x,street:J.target.value}),placeholder:"Street name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Secondary No."}),e.jsx("input",{className:"form-input",type:"text",value:x.secondaryNo,onChange:J=>v({...x,secondaryNo:J.target.value}),placeholder:"e.g., 9014"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"District"}),e.jsx("input",{className:"form-input",type:"text",value:x.district,onChange:J=>v({...x,district:J.target.value}),placeholder:"e.g., Ar Rawdah"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Postal Code"}),e.jsx("input",{className:"form-input",type:"text",value:x.postalCode,onChange:J=>v({...x,postalCode:J.target.value}),placeholder:"12345",maxLength:5})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{className:"form-input",type:"text",value:x.city,onChange:J=>v({...x,city:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Region"}),e.jsx("input",{className:"form-input",type:"text",value:x.region,onChange:J=>v({...x,region:J.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Country"}),e.jsx("input",{className:"form-input",type:"text",value:x.country,onChange:J=>v({...x,country:J.target.value})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:M,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:O.isPending||D.isPending,children:O.isPending||D.isPending?"Saving...":"Save Supplier"})]})]})]})})]})}function ov(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}function sEe(){const{id:t}=hl(),r=Qr(),{data:n,isLoading:i}=Ve({queryKey:["supplier",t],queryFn:async()=>{const{data:N}=await xe.get(`/suppliers/${t}`);return N},enabled:!!t}),{data:a}=Ve({queryKey:["supplier-pos",t],queryFn:async()=>{const{data:N}=await xe.get(`/purchase-orders?supplierId=${t}`);return N},enabled:!!t}),{data:s}=Ve({queryKey:["supplier-grns",t],queryFn:async()=>{const{data:N}=await xe.get(`/grn?supplierId=${t}`);return N},enabled:!!t}),{data:o}=Ve({queryKey:["supplier-audit",t],queryFn:async()=>{const{data:N}=await xe.get(`/audit?entityType=Supplier&entityId=${t}`);return N.logs||[]},enabled:!!t});if(i)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!n)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx(fn,{icon:"search",title:"Supplier Not Found",message:"The supplier you're looking for doesn't exist or has been deleted.",ctaLabel:"Back to Suppliers",onCta:()=>r("/suppliers")})});const l=a?.filter(N=>["DRAFT","PENDING_APPROVAL","APPROVED","SENT","ACKNOWLEDGED","PARTIALLY_RECEIVED"].includes(N.status)).length||0,u=a?.reduce((N,T)=>T.status==="RECEIVED"||T.status==="CLOSED"?N+(Number(T.totalAmount)||0):N,0)||0,d=s?.filter(N=>N.status==="APPROVED").length||0,f=s?.length||0,p=f>0?Math.round(d/f*100):0,x=[{title:"Open POs",value:l,icon:e.jsx(qo,{size:24}),color:"primary"},{title:"Total Spend",value:`${u.toLocaleString()} ${n.currency||"SAR"}`,icon:e.jsx(sf,{size:24}),color:"success"},{title:"GRNs Received",value:d,icon:e.jsx(dn,{size:24}),color:"info"},{title:"On-Time Rate",value:`${p}%`,icon:e.jsx(Qt,{size:24}),color:p>=90?"success":p>=70?"warning":"danger"}],v=[];a?.length>0&&v.push({type:"purchaseOrder",label:"Purchase Orders",link:`/purchase-orders?supplierId=${t}`,count:a.length}),s?.length>0&&v.push({type:"grn",label:"Goods Receipts",link:`/grn?supplierId=${t}`,count:s.length});const w=(o||[]).map(N=>({id:N.id,title:N.action.replace(/_/g," "),description:N.details||"",timestamp:N.createdAt,actor:N.user?.firstName?`${N.user.firstName} ${N.user.lastName}`:"System",type:N.action.includes("CREATED")?"success":N.action.includes("BLOCKED")?"error":"info"})),C=[{key:"overview",label:"Overview",icon:e.jsx(Pr,{size:16}),content:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Contact Information"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:[e.jsx(uc,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Email"]}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.email||"-"})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:[e.jsx(vo,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Phone"]}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.phone||"-"})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:[e.jsx(vo,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Mobile"]}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.mobile||"-"})]}),n.website&&e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:[e.jsx(sm,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Website"]}),e.jsx("td",{style:{padding:"0.5rem 0"},children:e.jsx("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",children:n.website})})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Address"}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[n.buildingNumber&&e.jsx("div",{children:n.buildingNumber}),n.street&&e.jsx("div",{children:n.street}),n.district&&e.jsx("div",{children:n.district}),n.city&&e.jsxs("div",{children:[n.city,n.postalCode&&`, ${n.postalCode}`]}),n.country&&e.jsx("div",{children:n.country}),!n.buildingNumber&&!n.street&&!n.city&&e.jsx("span",{children:"-"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Business Details"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[n.taxNumber&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Tax Number"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.taxNumber})]}),n.vatNumber&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"VAT Number"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.vatNumber})]}),n.crNumber&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"CR Number"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.crNumber})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Payment Terms"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.paymentTerms||"Net 30"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Currency"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.currency||"SAR"})]})]})})]}),(n.bankName||n.bankIban)&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Banking Information"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[n.bankName&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Bank Name"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.bankName})]}),n.bankIban&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"IBAN"}),e.jsx("td",{style:{padding:"0.5rem 0",fontFamily:"monospace"},children:n.bankIban})]}),n.bankSwift&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"SWIFT"}),e.jsx("td",{style:{padding:"0.5rem 0",fontFamily:"monospace"},children:n.bankSwift})]})]})})]}),n.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Notes"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:n.notes})]})]})},{key:"purchase-orders",label:"Purchase Orders",icon:e.jsx(qo,{size:16}),badge:a?.length||0,content:a?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"PO Number"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a.map(N=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace"},children:N.poNumber}),e.jsx("td",{children:ov(N.orderDate,"dd MMM yyyy")}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${N.status==="RECEIVED"||N.status==="CLOSED"?"success":N.status==="CANCELLED"?"danger":N.status==="PENDING_APPROVAL"?"warning":"info"}`,children:N.status.replace(/_/g," ")})}),e.jsxs("td",{children:[Number(N.totalAmount||0).toLocaleString()," ",N.currency||"SAR"]}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>r("/purchase-orders"),children:"View"})})]},N.id))})]})}):e.jsx(fn,{icon:"package",title:"No Purchase Orders",message:"No purchase orders found for this supplier."})},{key:"receiving",label:"Receiving",icon:e.jsx(dn,{size:16}),badge:s?.length||0,content:s?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"GRN Number"}),e.jsx("th",{children:"PO"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Items"})]})}),e.jsx("tbody",{children:s.map(N=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace"},children:N.grnNumber}),e.jsx("td",{children:N.purchaseOrder?.poNumber||"-"}),e.jsx("td",{children:ov(N.receivedDate,"dd MMM yyyy")}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${N.status==="APPROVED"?"success":N.status==="REJECTED"?"danger":N.status==="PENDING_QC"?"warning":"default"}`,children:N.status.replace(/_/g," ")})}),e.jsx("td",{children:N._count?.items||0})]},N.id))})]})}):e.jsx(fn,{icon:"truck",title:"No Receipts",message:"No goods receiving notes found for this supplier."})},{key:"documents",label:"Documents",icon:e.jsx(Pr,{size:16}),content:e.jsx(mc,{entityType:"Supplier",entityId:t})},{key:"timeline",label:"Timeline",icon:e.jsx(jm,{size:16}),badge:w.length,content:w.length>0?e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:w.map(N=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:N.type==="success"?"var(--success)":N.type==="error"?"var(--danger)":"var(--primary)",marginTop:"0.5rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:N.title}),N.description&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:N.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[N.actor,"  ",ov(N.timestamp,"dd MMM yyyy HH:mm")]})]})]},N.id))}):e.jsx(fn,{icon:"search",title:"No Activity",message:"No activity recorded for this supplier yet."})}];return e.jsx(gy,{title:n.name,code:n.code,subtitle:n.nameAr||void 0,status:{value:n.status,label:n.status,variant:n.status==="ACTIVE"?"success":n.status==="ON_HOLD"?"warning":n.status==="BLOCKED"?"danger":"default"},metadata:[{label:"Created",value:ov(n.createdAt,"dd MMM yyyy")},...n.email?[{label:"Email",value:n.email}]:[]],kpis:x,tabs:C,defaultTab:"overview",actions:[{label:"Edit",icon:e.jsx(e0,{size:16}),onClick:()=>r("/suppliers"),variant:"secondary"}],linkedRecords:v,timeline:w,showTimeline:!1,backUrl:"/suppliers",backLabel:"Suppliers"})}const bC=[{value:"DRAFT",label:"Draft",color:"var(--text-muted)"},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"var(--warning)"},{value:"APPROVED",label:"Approved",color:"var(--info)"},{value:"SENT",label:"Sent",color:"var(--primary)"},{value:"ACKNOWLEDGED",label:"Acknowledged",color:"var(--primary)"},{value:"PARTIALLY_RECEIVED",label:"Partially Received",color:"var(--warning)"},{value:"RECEIVED",label:"Received",color:"var(--success)"},{value:"CLOSED",label:"Closed",color:"var(--text-muted)"},{value:"CANCELLED",label:"Cancelled",color:"var(--error)"}];function oEe(){const t=pr(),r=gn();Qr();const[n,i]=k.useState({}),[a,s]=k.useState(!1),[o,l]=k.useState(!1),[u,d]=k.useState(!1),[f,p]=k.useState(null),[x,v]=k.useState(null),[w,C]=k.useState(null),[N,T]=k.useState({poNumber:"",supplierId:"",expectedDate:"",paymentTermsDays:30,deliveryTerms:"",shippingAddress:"",notes:""}),[O,D]=k.useState([{lineNumber:1,itemCode:"",itemName:"",orderedQty:1,unit:"EA",unitPrice:0}]),{data:M}=Ve({queryKey:["po-stats"],queryFn:async()=>{const{data:oe}=await xe.get("/purchase-orders/stats");return oe}}),{data:Y=[],isLoading:q}=Ve({queryKey:["purchase-orders",n],queryFn:async()=>{const oe=new URLSearchParams;n.search&&oe.append("search",n.search),n.status&&oe.append("status",n.status),n.supplierId&&oe.append("supplierId",n.supplierId);const{data:ge}=await xe.get(`/purchase-orders?${oe}`);return ge}}),{data:W=[]}=Ve({queryKey:["suppliers-list"],queryFn:async()=>{const{data:oe}=await xe.get("/suppliers?status=ACTIVE");return oe}}),{data:J}=Ve({queryKey:["purchase-order",x?.id],queryFn:async()=>{const{data:oe}=await xe.get(`/purchase-orders/${x?.id}`);return oe},enabled:!!x?.id}),{data:z}=Ve({queryKey:["po-next-number"],queryFn:async()=>{const{data:oe}=await xe.get("/purchase-orders/next-number");return oe},enabled:a&&!f}),G=ot({mutationFn:async oe=>(await xe.post("/purchase-orders",oe)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["purchase-orders"]}),t.invalidateQueries({queryKey:["po-stats"]}),t.invalidateQueries({queryKey:["po-next-number"]}),r.success("Purchase order created successfully"),me()},onError:oe=>{r.error(oe.message)}}),ne=ot({mutationFn:async oe=>(await xe.put(`/purchase-orders/${f?.id}`,oe)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["purchase-orders"]}),t.invalidateQueries({queryKey:["po-stats"]}),r.success("Purchase order updated successfully"),me()},onError:oe=>{r.error(oe.message)}}),Z=ot({mutationFn:async({id:oe,action:ge,data:be})=>(await xe.post(`/purchase-orders/${oe}/${ge}`,be||{})).data,onSuccess:(oe,ge)=>{t.invalidateQueries({queryKey:["purchase-orders"]}),t.invalidateQueries({queryKey:["po-stats"]}),t.invalidateQueries({queryKey:["purchase-order",ge.id]}),r.success(`Purchase order ${ge.action} successfully`)},onError:oe=>{r.error(oe.message)}}),ie=ot({mutationFn:async oe=>(await xe.delete(`/purchase-orders/${oe}`)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["purchase-orders"]}),t.invalidateQueries({queryKey:["po-stats"]}),r.success("Purchase order deleted successfully")},onError:oe=>{r.error(oe.message)}}),me=()=>{s(!1),p(null),T({poNumber:"",supplierId:"",expectedDate:"",paymentTermsDays:30,deliveryTerms:"",shippingAddress:"",notes:""}),D([{lineNumber:1,itemCode:"",itemName:"",orderedQty:1,unit:"EA",unitPrice:0}])},ce=oe=>{p(oe),T({poNumber:oe.poNumber,supplierId:oe.supplierId,expectedDate:oe.expectedDate?oe.expectedDate.split("T")[0]:"",paymentTermsDays:oe.paymentTermsDays,deliveryTerms:oe.deliveryTerms||"",shippingAddress:oe.shippingAddress||"",notes:oe.notes||""}),D(oe.items.map((ge,be)=>({...ge,lineNumber:be+1}))),s(!0)},Q=oe=>{oe.preventDefault();const ge=O.filter(Le=>Le.itemCode&&Le.itemName&&Le.orderedQty>0);if(ge.length===0){r.error("Please add at least one valid item");return}const be={...N,poNumber:N.poNumber||z?.poNumber,items:ge};f?ne.mutate(be):G.mutate(be)},de=()=>{D([...O,{lineNumber:O.length+1,itemCode:"",itemName:"",orderedQty:1,unit:"EA",unitPrice:0}])},le=oe=>{O.length>1&&D(O.filter((ge,be)=>be!==oe).map((ge,be)=>({...ge,lineNumber:be+1})))},ye=(oe,ge,be)=>{const Le=[...O];Le[oe][ge]=be,D(Le)},Se=oe=>bC.find(be=>be.value===oe)?.color||"var(--text-muted)",$=(oe,ge="SAR")=>new Intl.NumberFormat("en-SA",{style:"currency",currency:ge}).format(oe),X=()=>{const oe=O.reduce((be,Le)=>be+Le.orderedQty*Le.unitPrice,0),ge=oe*.15;return{subtotal:oe,tax:ge,total:oe+ge}},se=async oe=>{x&&(await Z.mutateAsync({id:x.id,action:"approve",data:{signatureId:oe.id}}),d(!1))},H=[{key:"search",label:"Search",type:"search",placeholder:"Search PO number, supplier..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},...bC.map(oe=>({value:oe.value,label:oe.label}))]},{key:"supplierId",label:"Supplier",type:"select",options:[{value:"",label:"All Suppliers"},...W.map(oe=>({value:oe.id,label:oe.name}))]}];return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Purchase Orders"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage procurement and supplier orders"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>s(!0),children:[e.jsx(cn,{size:16})," Create PO"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total",value:M?.total||0,icon:e.jsx(Pr,{size:20}),color:"primary",onClick:()=>i({}),selected:!n.status}),e.jsx(st,{title:"Draft",value:M?.draft||0,icon:e.jsx(Pr,{size:20}),onClick:()=>i({status:"DRAFT"}),selected:n.status==="DRAFT"}),e.jsx(st,{title:"Pending Approval",value:M?.pendingApproval||0,icon:e.jsx(Pv,{size:20}),color:"warning",onClick:()=>i({status:"PENDING_APPROVAL"}),selected:n.status==="PENDING_APPROVAL"}),e.jsx(st,{title:"Sent",value:M?.sent||0,icon:e.jsx(Gi,{size:20}),color:"info",onClick:()=>i({status:"SENT"}),selected:n.status==="SENT"}),e.jsx(st,{title:"Received",value:M?.received||0,icon:e.jsx(Ai,{size:20}),color:"success",onClick:()=>i({status:"RECEIVED"}),selected:n.status==="RECEIVED"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:H,values:n,onChange:(oe,ge)=>i(be=>({...be,[oe]:ge})),onReset:()=>i({})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Purchase Order List (",Y?.length||0,")"]})}),q?e.jsx("div",{className:"loading-spinner",style:{padding:"3rem",textAlign:"center"},children:"Loading..."}):Y.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[e.jsx(Pr,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem"}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No purchase orders found"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Create your first purchase order"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>s(!0),children:[e.jsx(cn,{size:16})," Create PO"]})]}):e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"PO Number"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Order Date"}),e.jsx("th",{children:"Expected"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"120px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:Y.map(oe=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(nr,{to:`/purchase-orders/${oe.id}`,style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem",color:"var(--primary)"},children:oe.poNumber})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:oe.supplier?.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:oe.supplier?.code})]}),e.jsx("td",{children:new Date(oe.orderDate).toLocaleDateString()}),e.jsx("td",{children:oe.expectedDate?new Date(oe.expectedDate).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsxs("span",{className:"badge badge-default",children:[oe._count?.items||0," items"]})}),e.jsx("td",{style:{fontWeight:500},children:$(Number(oe.totalAmount),oe.currencyCode)}),e.jsx("td",{children:e.jsx(Pn,{status:oe.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx(nr,{to:`/purchase-orders/${oe.id}`,className:"btn btn-sm btn-outline",title:"View Details",children:e.jsx(os,{size:14})}),["DRAFT","PENDING_APPROVAL"].includes(oe.status)&&e.jsx("button",{className:"btn btn-sm btn-outline",onClick:ge=>{ge.stopPropagation(),ce(oe)},title:"Edit",children:e.jsx(Ha,{size:14})}),oe.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:ge=>{ge.stopPropagation(),Z.mutate({id:oe.id,action:"submit"})},title:"Submit for Approval",children:e.jsx(Gi,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:ge=>{ge.stopPropagation(),confirm("Delete this purchase order?")&&ie.mutate(oe.id)},title:"Delete",children:e.jsx(ra,{size:14})})]}),oe.status==="PENDING_APPROVAL"&&e.jsx("button",{className:"btn btn-sm btn-outline",onClick:ge=>{ge.stopPropagation(),v(oe),d(!0)},title:"Approve",style:{color:"var(--success)"},children:e.jsx(Ai,{size:16})}),oe.status==="APPROVED"&&e.jsx("button",{className:"btn btn-sm btn-outline",onClick:ge=>{ge.stopPropagation(),Z.mutate({id:oe.id,action:"send"})},title:"Send to Supplier",children:e.jsx(dn,{size:14})})]})})]},oe.id))})]})]}),a&&e.jsx("div",{className:"modal-overlay",onClick:me,children:e.jsx("div",{className:"modal",style:{maxWidth:"60rem"},onClick:oe=>oe.stopPropagation(),children:e.jsxs("form",{onSubmit:Q,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:f?"Edit Purchase Order":"Create Purchase Order"}),e.jsx("button",{type:"button",onClick:me,style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PO Number"}),e.jsx("input",{type:"text",value:N.poNumber||z?.poNumber||"",onChange:oe=>T({...N,poNumber:oe.target.value}),disabled:!!f,placeholder:"Auto-generated"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier *"}),e.jsxs("select",{value:N.supplierId,onChange:oe=>T({...N,supplierId:oe.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Supplier"}),W.map(oe=>e.jsxs("option",{value:oe.id,children:[oe.name," (",oe.code,")"]},oe.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Expected Delivery"}),e.jsx("input",{type:"date",value:N.expectedDate,onChange:oe=>T({...N,expectedDate:oe.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payment Terms (Days)"}),e.jsx("input",{type:"number",value:N.paymentTermsDays,onChange:oe=>T({...N,paymentTermsDays:parseInt(oe.target.value)||30}),min:0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Delivery Terms"}),e.jsx("input",{type:"text",value:N.deliveryTerms,onChange:oe=>T({...N,deliveryTerms:oe.target.value}),placeholder:"e.g., FOB, CIF"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Shipping Address"}),e.jsx("input",{type:"text",value:N.shippingAddress,onChange:oe=>T({...N,shippingAddress:oe.target.value})})]})]}),e.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Line Items"}),e.jsx("div",{className:"table-container",style:{marginBottom:"1rem"},children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"40px"},children:"#"}),e.jsx("th",{children:"Item Code *"}),e.jsx("th",{children:"Item Name *"}),e.jsx("th",{style:{width:"80px"},children:"Qty *"}),e.jsx("th",{style:{width:"80px"},children:"Unit"}),e.jsx("th",{style:{width:"120px"},children:"Unit Price *"}),e.jsx("th",{style:{width:"120px"},children:"Total"}),e.jsx("th",{style:{width:"40px"}})]})}),e.jsx("tbody",{children:O.map((oe,ge)=>e.jsxs("tr",{children:[e.jsx("td",{children:oe.lineNumber}),e.jsx("td",{children:e.jsx("input",{type:"text",value:oe.itemCode,onChange:be=>ye(ge,"itemCode",be.target.value),style:{width:"100%"}})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:oe.itemName,onChange:be=>ye(ge,"itemName",be.target.value),style:{width:"100%"}})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:oe.orderedQty,onChange:be=>ye(ge,"orderedQty",parseFloat(be.target.value)||0),min:0,step:"0.01",style:{width:"100%"}})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:oe.unit,onChange:be=>ye(ge,"unit",be.target.value),style:{width:"100%"}})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:oe.unitPrice,onChange:be=>ye(ge,"unitPrice",parseFloat(be.target.value)||0),min:0,step:"0.01",style:{width:"100%"}})}),e.jsx("td",{style:{textAlign:"right"},children:$(oe.orderedQty*oe.unitPrice)}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"icon-button",onClick:()=>le(ge),disabled:O.length===1,children:e.jsx(kr,{size:16})})})]},ge))}),e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,style:{textAlign:"right"},children:e.jsx("strong",{children:"Subtotal:"})}),e.jsx("td",{style:{textAlign:"right"},children:$(X().subtotal)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,style:{textAlign:"right"},children:e.jsx("strong",{children:"VAT (15%):"})}),e.jsx("td",{style:{textAlign:"right"},children:$(X().tax)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,style:{textAlign:"right"},children:e.jsx("strong",{children:"Total:"})}),e.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:$(X().total)}),e.jsx("td",{})]})]})]})}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:de,children:[e.jsx(cn,{size:16})," Add Item"]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:N.notes,onChange:oe=>T({...N,notes:oe.target.value}),rows:3})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:me,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:G.isPending||ne.isPending,children:G.isPending||ne.isPending?"Saving...":f?"Update":"Create"})]})]})})}),o&&J&&e.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:e.jsxs("div",{className:"modal",style:{maxWidth:"60rem"},onClick:oe=>oe.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{fontWeight:600,margin:0},children:"Purchase Order Details"}),e.jsx("button",{type:"button",onClick:()=>l(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"PO Information"}),e.jsxs("div",{children:[e.jsx("strong",{children:"PO Number:"})," ",J.poNumber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Order Date:"})," ",new Date(J.orderDate).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Expected:"})," ",J.expectedDate?new Date(J.expectedDate).toLocaleDateString():"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:"status-badge",style:{backgroundColor:Se(J.status)+"20",color:Se(J.status)},children:bC.find(oe=>oe.value===J.status)?.label})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Supplier"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",J.supplier?.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Code:"})," ",J.supplier?.code]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Totals"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Subtotal:"})," ",$(Number(J.subtotal))]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tax:"})," ",$(Number(J.taxAmount))]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total:"})," ",$(Number(J.totalAmount))]})]})]}),e.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Line Items"}),e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Item Code"}),e.jsx("th",{children:"Item Name"}),e.jsx("th",{children:"Ordered"}),e.jsx("th",{children:"Received"}),e.jsx("th",{children:"Unit"}),e.jsx("th",{children:"Unit Price"}),e.jsx("th",{children:"Total"})]})}),e.jsx("tbody",{children:J.items?.map(oe=>e.jsxs("tr",{children:[e.jsx("td",{children:oe.lineNumber}),e.jsx("td",{children:oe.itemCode}),e.jsx("td",{children:oe.itemName}),e.jsx("td",{children:oe.orderedQty}),e.jsx("td",{children:oe.receivedQty||0}),e.jsx("td",{children:oe.unit}),e.jsx("td",{children:$(Number(oe.unitPrice))}),e.jsx("td",{children:$(Number(oe.totalPrice))})]},oe.id))})]}),J.notes&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("h4",{children:"Notes"}),e.jsx("p",{style:{whiteSpace:"pre-wrap"},children:J.notes})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Close"}),["DRAFT","PENDING_APPROVAL"].includes(J.status)&&e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{l(!1),ce(J)},children:[e.jsx(Ha,{size:16})," Edit"]})]})]})}),u&&x&&e.jsx(hH,{isOpen:u,onClose:()=>d(!1),scope:"PO_APPROVAL",entityType:"PURCHASE_ORDER",entityId:x.id,title:`Approve Purchase Order ${x.poNumber}`,description:`I approve this purchase order for ${$(Number(x.totalAmount))}`,onSuccess:se})]})}function mp(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}const lEe={DRAFT:"default",PENDING_APPROVAL:"warning",APPROVED:"info",SENT:"info",ACKNOWLEDGED:"info",PARTIALLY_RECEIVED:"warning",RECEIVED:"success",CLOSED:"success",CANCELLED:"danger"};function cEe(){const{id:t}=hl(),r=Qr(),n=pr(),i=gn(),{data:a,isLoading:s}=Ve({queryKey:["purchase-order",t],queryFn:async()=>{const{data:M}=await xe.get(`/purchase-orders/${t}`);return M},enabled:!!t}),{data:o}=Ve({queryKey:["po-audit",t],queryFn:async()=>{const{data:M}=await xe.get(`/audit?entityType=PurchaseOrder&entityId=${t}`);return M.logs||[]},enabled:!!t}),l=ot({mutationFn:async()=>{const{data:M}=await xe.post(`/purchase-orders/${t}/submit`);return M},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-order",t]}),i.success("Purchase order submitted for approval")},onError:M=>{i.error(M.response?.data?.error||"Failed to submit PO")}}),u=ot({mutationFn:async()=>{const{data:M}=await xe.post(`/purchase-orders/${t}/approve`);return M},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-order",t]}),i.success("Purchase order approved")},onError:M=>{i.error(M.response?.data?.error||"Failed to approve PO")}}),d=ot({mutationFn:async()=>{const{data:M}=await xe.post(`/purchase-orders/${t}/send`);return M},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-order",t]}),i.success("Purchase order sent to supplier")},onError:M=>{i.error(M.response?.data?.error||"Failed to send PO")}});if(s)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!a)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx(fn,{icon:"search",title:"Purchase Order Not Found",message:"The purchase order you're looking for doesn't exist or has been deleted.",ctaLabel:"Back to Purchase Orders",onCta:()=>r("/purchase-orders")})});const f=a.items?.length||0,p=a.items?.reduce((M,Y)=>M+Number(Y.quantity)*Number(Y.unitPrice),0)||0,x=a.grns?.reduce((M,Y)=>M+Y.items?.reduce((q,W)=>q+Number(W.receivedQuantity||0),0),0)||0,v=a.items?.reduce((M,Y)=>M+Number(Y.quantity),0)||0,w=v>0?Math.round(x/v*100):0,C=[{title:"Line Items",value:f,icon:e.jsx(Rr,{size:24}),color:"primary"},{title:"Total Value",value:`${p.toLocaleString()} ${a.currency||"SAR"}`,icon:e.jsx(sf,{size:24}),color:"success"},{title:"Receipt Rate",value:`${w}%`,icon:e.jsx(dn,{size:24}),color:w>=100?"success":w>0?"warning":"default"},{title:"GRNs",value:a.grns?.length||0,icon:e.jsx(Pr,{size:24}),color:"info"}],N=[];a.supplier&&N.push({type:"supplier",label:a.supplier.name,link:`/suppliers/${a.supplier.id}`}),a.grns?.length>0&&N.push({type:"grn",label:"Goods Receipts",link:`/grn?purchaseOrderId=${t}`,count:a.grns.length});const T=(o||[]).map(M=>({id:M.id,title:M.action.replace(/_/g," "),description:M.details||"",timestamp:M.createdAt,actor:M.user?.firstName?`${M.user.firstName} ${M.user.lastName}`:"System",type:M.action.includes("APPROVED")?"success":M.action.includes("REJECTED")||M.action.includes("CANCELLED")?"error":"info"})),O=()=>{const M=[];return a.status==="DRAFT"&&M.push({label:"Submit for Approval",icon:e.jsx(Gi,{size:16}),onClick:()=>l.mutate(),variant:"primary",loading:l.isPending}),a.status==="PENDING_APPROVAL"&&M.push({label:"Approve",icon:e.jsx(Ai,{size:16}),onClick:()=>u.mutate(),variant:"primary",loading:u.isPending}),a.status==="APPROVED"&&M.push({label:"Send to Supplier",icon:e.jsx(Gi,{size:16}),onClick:()=>d.mutate(),variant:"primary",loading:d.isPending}),(a.status==="DRAFT"||a.status==="PENDING_APPROVAL")&&M.push({label:"Edit",icon:e.jsx(e0,{size:16}),onClick:()=>r("/purchase-orders"),variant:"secondary"}),M},D=[{key:"overview",label:"Overview",icon:e.jsx(Pr,{size:16}),content:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Order Details"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Order Date"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:mp(a.orderDate,"dd MMM yyyy")})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Expected Delivery"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:mp(a.expectedDeliveryDate,"dd MMM yyyy")})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Currency"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.currency||"SAR"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Payment Terms"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.paymentTerms||"-"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Supplier"}),a.supplier?e.jsxs("div",{style:{fontSize:"0.875rem"},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.5rem"},children:a.supplier.name}),a.supplier.email&&e.jsx("div",{style:{color:"var(--text-secondary)"},children:a.supplier.email}),a.supplier.phone&&e.jsx("div",{style:{color:"var(--text-secondary)"},children:a.supplier.phone}),e.jsx("button",{className:"btn btn-secondary btn-sm",style:{marginTop:"0.5rem"},onClick:()=>r(`/suppliers/${a.supplier.id}`),children:"View Supplier"})]}):e.jsx("span",{style:{color:"var(--text-muted)"},children:"No supplier assigned"})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Financial Summary"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Subtotal"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[Number(a.subtotal||0).toLocaleString()," ",a.currency||"SAR"]})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:["VAT (",a.vatRate||15,"%)"]}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[Number(a.vatAmount||0).toLocaleString()," ",a.currency||"SAR"]})]}),e.jsxs("tr",{style:{fontWeight:600},children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Total"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[Number(a.totalAmount||0).toLocaleString()," ",a.currency||"SAR"]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Workflow"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Created By"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.createdBy?.firstName?`${a.createdBy.firstName} ${a.createdBy.lastName}`:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Approved By"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.approvedBy?.firstName?`${a.approvedBy.firstName} ${a.approvedBy.lastName}`:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Approved At"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:mp(a.approvedAt,"dd MMM yyyy HH:mm")})]})]})})]}),a.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Notes"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:a.notes})]})]})},{key:"items",label:"Line Items",icon:e.jsx(Rr,{size:16}),badge:f,content:a.items?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Unit"}),e.jsx("th",{style:{textAlign:"right"},children:"Qty"}),e.jsx("th",{style:{textAlign:"right"},children:"Unit Price"}),e.jsx("th",{style:{textAlign:"right"},children:"Total"})]})}),e.jsx("tbody",{children:a.items.map(M=>e.jsxs("tr",{children:[e.jsx("td",{children:M.lineNumber}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:M.description}),M.materialCode&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:M.materialCode})]}),e.jsx("td",{children:M.unit||"EA"}),e.jsx("td",{style:{textAlign:"right"},children:Number(M.quantity).toLocaleString()}),e.jsx("td",{style:{textAlign:"right"},children:Number(M.unitPrice).toLocaleString()}),e.jsx("td",{style:{textAlign:"right"},children:(Number(M.quantity)*Number(M.unitPrice)).toLocaleString()})]},M.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{fontWeight:600},children:[e.jsx("td",{colSpan:5,style:{textAlign:"right"},children:"Total:"}),e.jsxs("td",{style:{textAlign:"right"},children:[p.toLocaleString()," ",a.currency||"SAR"]})]})})]})}):e.jsx(fn,{icon:"package",title:"No Line Items",message:"No items have been added to this purchase order."})},{key:"receiving",label:"Receiving",icon:e.jsx(dn,{size:16}),badge:a.grns?.length||0,content:a.grns?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"GRN Number"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Received By"})]})}),e.jsx("tbody",{children:a.grns.map(M=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace"},children:M.grnNumber}),e.jsx("td",{children:mp(M.receivedDate,"dd MMM yyyy")}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${M.status==="APPROVED"?"success":M.status==="REJECTED"?"danger":M.status==="PENDING_QC"?"warning":"default"}`,children:M.status?.replace(/_/g," ")})}),e.jsx("td",{children:M.items?.length||0}),e.jsx("td",{children:M.receivedBy?.name||"-"})]},M.id))})]})}):e.jsx(fn,{icon:"truck",title:"No Receipts",message:"No goods have been received against this purchase order yet."})},{key:"documents",label:"Documents",icon:e.jsx(Pr,{size:16}),content:e.jsx(mc,{entityType:"PurchaseOrder",entityId:t})},{key:"timeline",label:"Timeline",icon:e.jsx(jm,{size:16}),badge:T.length,content:T.length>0?e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:T.map(M=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:M.type==="success"?"var(--success)":M.type==="error"?"var(--danger)":"var(--primary)",marginTop:"0.5rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:M.title}),M.description&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:M.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[M.actor,"  ",mp(M.timestamp,"dd MMM yyyy HH:mm")]})]})]},M.id))}):e.jsx(fn,{icon:"search",title:"No Activity",message:"No activity recorded for this purchase order yet."})}];return e.jsx(gy,{title:`Purchase Order ${a.poNumber}`,code:a.poNumber,status:{value:a.status,label:a.status?.replace(/_/g," "),variant:lEe[a.status]||"default"},metadata:[{label:"Order Date",value:mp(a.orderDate,"dd MMM yyyy")},{label:"Supplier",value:a.supplier?.name||"-"}],kpis:C,tabs:D,defaultTab:"overview",actions:O(),linkedRecords:N,timeline:T,showTimeline:!1,backUrl:"/purchase-orders",backLabel:"Purchase Orders"})}const Cg=[{value:"RAW_MATERIALS",label:"Raw Materials",color:"#3b82f6"},{value:"QUARANTINE",label:"Quarantine",color:"#f59e0b"},{value:"PRODUCTION",label:"Production",color:"#8b5cf6"},{value:"FINISHED_GOODS",label:"Finished Goods",color:"#22c55e"},{value:"COLD_STORAGE",label:"Cold Storage",color:"#06b6d4"},{value:"RADIOACTIVE",label:"Radioactive",color:"#ef4444"},{value:"WASTE",label:"Waste",color:"#6b7280"}],Ng=[{value:"ACTIVE",label:"Active",color:"#22c55e"},{value:"INACTIVE",label:"Inactive",color:"#94a3b8"},{value:"MAINTENANCE",label:"Maintenance",color:"#f59e0b"}],jC=t=>{const r=Cg.find(n=>n.value===t);return{bg:`${r?.color}15`,color:r?.color||"#6b7280"}},FM=t=>{const r=Ng.find(n=>n.value===t);return{bg:`${r?.color}20`,color:r?.color||"#6b7280"}};function dEe(){const t=pr(),r=gn(),[n,i]=k.useState(""),[a,s]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState(!1),[f,p]=k.useState(null),[x,v]=k.useState(null),[w,C]=k.useState(!1),[N,T]=k.useState(null),[O,D]=k.useState({code:"",name:"",nameAr:"",type:"RAW_MATERIALS",status:"ACTIVE",description:"",address:"",temperatureMin:"",temperatureMax:"",humidityMin:"",humidityMax:"",isRadioactive:!1,requiresQC:!0}),[M,Y]=k.useState({code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",bin:"",capacity:"",capacityUnit:"",isActive:!0}),{data:q}=Ve({queryKey:["warehouse-stats"],queryFn:async()=>{const{data:$}=await xe.get("/warehouses/stats");return $}}),{data:W=[],isLoading:J}=Ve({queryKey:["warehouses",n,a,o],queryFn:async()=>{const $=new URLSearchParams;a&&$.append("status",a),o&&$.append("type",o),n&&$.append("search",n);const{data:X}=await xe.get(`/warehouses?${$}`);return X}}),{data:z}=Ve({queryKey:["warehouse",x?.id],queryFn:async()=>{const{data:$}=await xe.get(`/warehouses/${x?.id}`);return $},enabled:!!x?.id}),G=ot({mutationFn:async $=>f?xe.put(`/warehouses/${f.id}`,$):xe.post("/warehouses",$),onSuccess:()=>{t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),r.success(f?"Warehouse updated":"Warehouse created"),me()},onError:$=>{r.error($.response?.data?.error||"Failed to save warehouse")}}),ne=ot({mutationFn:async $=>xe.delete(`/warehouses/${$}`),onSuccess:()=>{t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),r.success("Warehouse deleted"),x&&v(null)},onError:$=>{r.error($.response?.data?.error||"Failed to delete warehouse")}}),Z=ot({mutationFn:async $=>N?xe.put(`/warehouses/${x?.id}/locations/${N.id}`,$):xe.post(`/warehouses/${x?.id}/locations`,$),onSuccess:()=>{t.invalidateQueries({queryKey:["warehouse",x?.id]}),t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),r.success(N?"Location updated":"Location added"),C(!1)},onError:$=>{r.error($.response?.data?.error||"Failed to save location")}}),ie=ot({mutationFn:async $=>xe.delete(`/warehouses/${x?.id}/locations/${$}`),onSuccess:()=>{t.invalidateQueries({queryKey:["warehouse",x?.id]}),t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),r.success("Location deleted")},onError:$=>{r.error($.response?.data?.error||"Failed to delete location")}}),me=()=>{d(!1),p(null),D({code:"",name:"",nameAr:"",type:"RAW_MATERIALS",status:"ACTIVE",description:"",address:"",temperatureMin:"",temperatureMax:"",humidityMin:"",humidityMax:"",isRadioactive:!1,requiresQC:!0})},ce=$=>{p($),D({code:$.code,name:$.name,nameAr:$.nameAr||"",type:$.type,status:$.status,description:$.description||"",address:$.address||"",temperatureMin:$.temperatureMin?.toString()||"",temperatureMax:$.temperatureMax?.toString()||"",humidityMin:$.humidityMin?.toString()||"",humidityMax:$.humidityMax?.toString()||"",isRadioactive:$.isRadioactive,requiresQC:$.requiresQC}),d(!0)},Q=$=>{$.preventDefault(),G.mutate(O)},de=()=>{T(null),Y({code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",bin:"",capacity:"",capacityUnit:"",isActive:!0}),C(!0)},le=$=>{T($),Y({code:$.code,name:$.name,zone:$.zone||"",aisle:$.aisle||"",rack:$.rack||"",shelf:$.shelf||"",bin:$.bin||"",capacity:$.capacity?.toString()||"",capacityUnit:$.capacityUnit||"",isActive:$.isActive}),C(!0)},ye=$=>{$.preventDefault(),Z.mutate(M)},Se=z||x;return J?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Warehouses"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Manage warehouse locations and storage areas"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{me(),d(!0)},children:[e.jsx(cn,{size:16})," Add Warehouse"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Warehouses",value:q?.total||0,icon:e.jsx(lm,{size:24}),color:"primary"}),e.jsx(st,{title:"Active",value:q?.active||0,icon:e.jsx(Ut,{size:24}),color:"success"}),e.jsx(st,{title:"Maintenance",value:q?.maintenance||0,icon:e.jsx(fz,{size:24}),color:"warning"}),e.jsx(st,{title:"Locations",value:q?.totalLocations||0,icon:e.jsx(mv,{size:24}),color:"info"}),e.jsx(st,{title:"Stock Items",value:q?.totalStockItems||0,icon:e.jsx(Rr,{size:24}),color:"default"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search by name or code...",value:n,onChange:$=>i($.target.value),style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"140px"},value:o,onChange:$=>l($.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),Cg.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"130px"},value:a,onChange:$=>s($.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),Ng.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))]}),(a||o||n)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{s(""),l(""),i("")},children:[e.jsx(kr,{size:14})," Clear"]})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:x?"1fr 420px":"1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:W.map($=>{const X=jC($.type),se=FM($.status),H=x?.id===$.id;return e.jsxs("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:H?"2px solid var(--primary)":"1px solid var(--border)",transition:"all 0.2s"},onClick:()=>v($),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:X.bg,color:X.color,fontWeight:600},children:Cg.find(oe=>oe.value===$.type)?.label||$.type}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:oe=>{oe.stopPropagation(),ce($)},children:e.jsx(Ha,{size:14})})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"1rem"},children:$.name}),$.nameAr&&e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"0.25rem",direction:"rtl"},children:$.nameAr}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"1rem"},children:e.jsx("span",{style:{fontFamily:"monospace"},children:$.code})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8125rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(mv,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:[$._count.locations," locations"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(Rr,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:[$._count.stockItems," items"]})]}),$.temperatureMin!==null&&$.temperatureMax!==null&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",gridColumn:"span 2"},children:[e.jsx(qC,{size:14,style:{color:"var(--info)"}}),e.jsxs("span",{children:[$.temperatureMin,"C - ",$.temperatureMax,"C"]})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",fontSize:"0.75rem",display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{className:"badge",style:{fontSize:"0.6875rem",background:se.bg,color:se.color},children:Ng.find(oe=>oe.value===$.status)?.label||$.status}),$.isRadioactive&&e.jsxs("span",{className:"badge",style:{fontSize:"0.6875rem",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},children:[e.jsx(ou,{size:10,style:{marginRight:"0.25rem"}})," Radioactive"]}),$.requiresQC&&e.jsxs("span",{className:"badge",style:{fontSize:"0.6875rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:[e.jsx(sa,{size:10,style:{marginRight:"0.25rem"}})," QC Required"]})]})]},$.id)})}),W.length===0&&e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{title:"No warehouses found",message:n||a||o?"Try adjusting your filters":"Add your first warehouse to get started",icon:"package"})})]}),x&&Se&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:jC(Se.type).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:jC(Se.type).color,color:"white",marginBottom:"0.5rem"},children:Cg.find($=>$.value===Se.type)?.label||Se.type}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:"0.5rem 0 0.25rem"},children:Se.name}),Se.nameAr&&e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0,direction:"rtl"},children:Se.nameAr}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:"0.25rem 0 0"},children:Se.code})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>v(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsxs("div",{style:{padding:"1.25rem",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Status & Attributes"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("span",{className:"badge",style:{...FM(Se.status)},children:Ng.find($=>$.value===Se.status)?.label}),Se.isRadioactive&&e.jsxs("span",{className:"badge",style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},children:[e.jsx(ou,{size:12})," Radioactive"]}),Se.requiresQC&&e.jsxs("span",{className:"badge",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:[e.jsx(sa,{size:12})," QC Required"]})]})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Capacity Overview"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(mv,{size:14,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Locations"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"1.25rem"},children:Se._count.locations})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[e.jsx(Rr,{size:14,style:{color:"var(--success)"}}),e.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Stock Items"})]}),e.jsx("div",{style:{fontWeight:600,fontSize:"1.25rem"},children:Se._count.stockItems})]})]})]}),(Se.temperatureMin!==null||Se.humidityMin!==null)&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Environmental Conditions"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[Se.temperatureMin!==null&&Se.temperatureMax!==null&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(qC,{size:16,style:{color:"var(--info)"}}),e.jsxs("span",{style:{fontSize:"0.875rem"},children:["Temperature: ",Se.temperatureMin,"C - ",Se.temperatureMax,"C"]})]}),Se.humidityMin!==null&&Se.humidityMax!==null&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(OY,{size:16,style:{color:"var(--primary)"}}),e.jsxs("span",{style:{fontSize:"0.875rem"},children:["Humidity: ",Se.humidityMin,"% - ",Se.humidityMax,"%"]})]})]})]}),Se.address&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Address"}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(Ea,{size:16,style:{color:"var(--primary)",marginTop:"0.125rem"}}),e.jsx("span",{style:{fontSize:"0.875rem"},children:Se.address})]})]}),Se.description&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Description"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",margin:0},children:Se.description})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Locations (",Se.locations?.length||0,")"]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:de,children:[e.jsx(cn,{size:14})," Add"]})]}),Se.locations&&Se.locations.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Se.locations.map($=>e.jsxs("div",{style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500},children:$.name}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginLeft:"0.5rem"},children:["(",$.code,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>le($),children:e.jsx(Ha,{size:12})}),e.jsx("button",{className:"btn btn-ghost btn-sm",style:{color:"var(--error)"},onClick:()=>{confirm("Delete this location?")&&ie.mutate($.id)},children:e.jsx(ra,{size:12})})]})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[$.zone,$.aisle,$.rack,$.shelf].filter(Boolean).join(" / ")||"No hierarchy defined"}),e.jsx("span",{className:"badge",style:{fontSize:"0.625rem",marginTop:"0.375rem",background:$.isActive?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:$.isActive?"#22c55e":"#ef4444"},children:$.isActive?"Active":"Inactive"})]},$.id))}):e.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-muted)",fontSize:"0.875rem"},children:"No locations defined"})]}),e.jsx("div",{style:{marginBottom:"1.25rem"},children:e.jsx(mc,{entityType:"Warehouse",entityId:Se.id,title:"Warehouse Documents"})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-primary",style:{flex:1},onClick:()=>ce(Se),children:[e.jsx(Ha,{size:16})," Edit Warehouse"]}),Se._count.stockItems===0&&Se._count.locations===0&&e.jsx("button",{className:"btn btn-secondary",style:{color:"var(--error)"},onClick:()=>{confirm("Are you sure you want to delete this warehouse?")&&ne.mutate(Se.id)},children:e.jsx(ra,{size:16})})]})]})]})]}),u&&e.jsx("div",{className:"modal-overlay",onClick:me,children:e.jsxs("div",{className:"modal",onClick:$=>$.stopPropagation(),style:{maxWidth:"600px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:f?"Edit Warehouse":"Add Warehouse"}),e.jsx("button",{className:"btn btn-ghost",onClick:me,children:""})]}),e.jsxs("form",{onSubmit:Q,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:O.code,onChange:$=>D({...O,code:$.target.value}),required:!0,disabled:!!f})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsx("select",{className:"form-select",value:O.status,onChange:$=>D({...O,status:$.target.value}),children:Ng.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:O.name,onChange:$=>D({...O,name:$.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name (Arabic)"}),e.jsx("input",{type:"text",className:"form-input",value:O.nameAr,onChange:$=>D({...O,nameAr:$.target.value}),dir:"rtl"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Type"}),e.jsx("select",{className:"form-select",value:O.type,onChange:$=>D({...O,type:$.target.value}),children:Cg.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:"form-input",value:O.description,onChange:$=>D({...O,description:$.target.value}),rows:2})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Address"}),e.jsx("input",{type:"text",className:"form-input",value:O.address,onChange:$=>D({...O,address:$.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Temperature Min (C)"}),e.jsx("input",{type:"number",className:"form-input",value:O.temperatureMin,onChange:$=>D({...O,temperatureMin:$.target.value}),step:"0.1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Temperature Max (C)"}),e.jsx("input",{type:"number",className:"form-input",value:O.temperatureMax,onChange:$=>D({...O,temperatureMax:$.target.value}),step:"0.1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Humidity Min (%)"}),e.jsx("input",{type:"number",className:"form-input",value:O.humidityMin,onChange:$=>D({...O,humidityMin:$.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Humidity Max (%)"}),e.jsx("input",{type:"number",className:"form-input",value:O.humidityMax,onChange:$=>D({...O,humidityMax:$.target.value})})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:O.isRadioactive,onChange:$=>D({...O,isRadioactive:$.target.checked})}),"Radioactive Storage"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:O.requiresQC,onChange:$=>D({...O,requiresQC:$.target.checked})}),"Requires QC"]})})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:me,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:G.isPending,children:G.isPending?"Saving...":f?"Update":"Create"})]})]})]})}),w&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal",onClick:$=>$.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:N?"Edit Location":"Add Location"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>C(!1),children:""})]}),e.jsxs("form",{onSubmit:ye,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Code *"}),e.jsx("input",{type:"text",className:"form-input",value:M.code,onChange:$=>Y({...M,code:$.target.value}),required:!0,disabled:!!N})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",className:"form-input",value:M.name,onChange:$=>Y({...M,name:$.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Zone"}),e.jsx("input",{type:"text",className:"form-input",value:M.zone,onChange:$=>Y({...M,zone:$.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Aisle"}),e.jsx("input",{type:"text",className:"form-input",value:M.aisle,onChange:$=>Y({...M,aisle:$.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rack"}),e.jsx("input",{type:"text",className:"form-input",value:M.rack,onChange:$=>Y({...M,rack:$.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Shelf"}),e.jsx("input",{type:"text",className:"form-input",value:M.shelf,onChange:$=>Y({...M,shelf:$.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bin"}),e.jsx("input",{type:"text",className:"form-input",value:M.bin,onChange:$=>Y({...M,bin:$.target.value})})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("input",{type:"checkbox",checked:M.isActive,onChange:$=>Y({...M,isActive:$.target.checked})}),"Active"]})})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>C(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Z.isPending,children:Z.isPending?"Saving...":N?"Update":"Create"})]})]})]})})]})}function qM(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}const UM={RAW_MATERIALS:"Raw Materials",QUARANTINE:"Quarantine",PRODUCTION:"Production",FINISHED_GOODS:"Finished Goods",COLD_STORAGE:"Cold Storage",RADIOACTIVE:"Radioactive",WASTE:"Waste"};function uEe(){const{id:t}=hl(),r=Qr(),{data:n,isLoading:i}=Ve({queryKey:["warehouse",t],queryFn:async()=>{const{data:w}=await xe.get(`/warehouses/${t}`);return w},enabled:!!t}),{data:a}=Ve({queryKey:["warehouse-stock",t],queryFn:async()=>{const{data:w}=await xe.get(`/stock?warehouseId=${t}`);return w},enabled:!!t}),{data:s}=Ve({queryKey:["warehouse-movements",t],queryFn:async()=>{const{data:w}=await xe.get(`/stock/movements?warehouseId=${t}&limit=50`);return w},enabled:!!t}),{data:o}=Ve({queryKey:["warehouse-audit",t],queryFn:async()=>{const{data:w}=await xe.get(`/audit?entityType=Warehouse&entityId=${t}`);return w.logs||[]},enabled:!!t});if(i)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!n)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx(fn,{icon:"search",title:"Warehouse Not Found",message:"The warehouse you're looking for doesn't exist or has been deleted.",ctaLabel:"Back to Warehouses",onCta:()=>r("/warehouses")})});const l=n.locations?.length||0,u=a?.length||0,d=a?.filter(w=>w.quantity<=(w.material?.reorderPoint||0)).length||0,f=[{title:"Locations",value:l,icon:e.jsx(Ea,{size:24}),color:"primary"},{title:"Stock Items",value:u,icon:e.jsx(Rr,{size:24}),color:"success"},{title:"Low Stock",value:d,icon:e.jsx(sn,{size:24}),color:d>0?"danger":"success"},{title:"Movements",value:s?.length||0,icon:e.jsx(zg,{size:24}),color:"info"}],p=[];a?.length>0&&p.push({type:"material",label:"Stock Items",link:`/inventory?warehouseId=${t}`,count:u});const x=(o||[]).map(w=>({id:w.id,title:w.action.replace(/_/g," "),description:w.details||"",timestamp:w.createdAt,actor:w.user?.firstName?`${w.user.firstName} ${w.user.lastName}`:"System",type:w.action.includes("CREATED")?"success":"info"})),v=[{key:"overview",label:"Overview",icon:e.jsx(Pr,{size:16}),content:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Warehouse Details"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Type"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:UM[n.type]||n.type})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Status"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:e.jsx("span",{className:`badge badge-${n.isActive?"success":"default"}`,children:n.isActive?"Active":"Inactive"})})]}),n.address&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Address"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:n.address})]})]})})]}),(n.temperatureMin!==null||n.humidityMin!==null)&&e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Environmental Controls"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[n.temperatureMin!==null&&e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:[e.jsx(qC,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Temperature Range"]}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[n.temperatureMin,"C - ",n.temperatureMax,"C"]})]}),n.humidityMin!==null&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Humidity Range"}),e.jsxs("td",{style:{padding:"0.5rem 0"},children:[n.humidityMin,"% - ",n.humidityMax,"%"]})]})]})})]}),n.description&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Description"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:n.description})]})]})},{key:"locations",label:"Locations",icon:e.jsx(Ea,{size:16}),badge:l,content:n.locations?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Zone"}),e.jsx("th",{children:"Aisle"}),e.jsx("th",{children:"Rack"}),e.jsx("th",{children:"Shelf"}),e.jsx("th",{children:"Bin"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:n.locations.map(w=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"monospace"},children:w.code}),e.jsx("td",{children:w.zone||"-"}),e.jsx("td",{children:w.aisle||"-"}),e.jsx("td",{children:w.rack||"-"}),e.jsx("td",{children:w.shelf||"-"}),e.jsx("td",{children:w.bin||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${w.isActive?"success":"default"}`,children:w.isActive?"Active":"Inactive"})})]},w.id))})]})}):e.jsx(fn,{icon:"box",title:"No Locations",message:"No storage locations have been defined for this warehouse."})},{key:"stock",label:"Stock",icon:e.jsx(Rr,{size:16}),badge:u,content:a?.length>0?e.jsxs("div",{children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Material"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Lot/Batch"}),e.jsx("th",{style:{textAlign:"right"},children:"Quantity"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:a.slice(0,50).map(w=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:w.material?.name||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:w.material?.code})]}),e.jsx("td",{style:{fontFamily:"monospace"},children:w.location?.code||"-"}),e.jsx("td",{children:w.lotNumber||w.batchNumber||"-"}),e.jsxs("td",{style:{textAlign:"right"},children:[Number(w.quantity).toLocaleString()," ",w.unit||"EA"]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${w.status==="AVAILABLE"?"success":w.status==="QUARANTINE"?"warning":w.status==="RESERVED"?"info":w.status==="EXPIRED"||w.status==="REJECTED"?"danger":"default"}`,children:w.status?.replace(/_/g," ")})})]},w.id))})]}),a.length>50&&e.jsxs("p",{style:{textAlign:"center",marginTop:"1rem",color:"var(--text-muted)"},children:["Showing 50 of ",a.length," items. ",e.jsx("a",{href:`/inventory?warehouseId=${t}`,children:"View all"})]})]}):e.jsx(fn,{icon:"package",title:"No Stock",message:"No stock is currently stored in this warehouse."})},{key:"movements",label:"Movements",icon:e.jsx(zg,{size:16}),badge:s?.length||0,content:s?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Material"}),e.jsx("th",{style:{textAlign:"right"},children:"Quantity"}),e.jsx("th",{children:"Reference"})]})}),e.jsx("tbody",{children:s.map(w=>e.jsxs("tr",{children:[e.jsx("td",{children:qM(w.createdAt,"dd MMM yyyy HH:mm")}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${w.type?.includes("RECEIPT")||w.type?.includes("IN")?"success":w.type?.includes("ISSUE")||w.type?.includes("OUT")?"warning":"default"}`,children:w.type?.replace(/_/g," ")})}),e.jsx("td",{children:w.material?.name||"-"}),e.jsx("td",{style:{textAlign:"right"},children:Number(w.quantity).toLocaleString()}),e.jsx("td",{style:{fontFamily:"monospace"},children:w.reference||"-"})]},w.id))})]})}):e.jsx(fn,{icon:"clock",title:"No Movements",message:"No stock movements recorded for this warehouse."})},{key:"documents",label:"Documents",icon:e.jsx(Pr,{size:16}),content:e.jsx(mc,{entityType:"Warehouse",entityId:t})},{key:"timeline",label:"Timeline",icon:e.jsx(jm,{size:16}),badge:x.length,content:x.length>0?e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:x.map(w=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:w.type==="success"?"var(--success)":"var(--primary)",marginTop:"0.5rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:w.title}),w.description&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:w.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[w.actor,"  ",qM(w.timestamp,"dd MMM yyyy HH:mm")]})]})]},w.id))}):e.jsx(fn,{icon:"search",title:"No Activity",message:"No activity recorded for this warehouse yet."})}];return e.jsx(gy,{title:n.name,code:n.code,status:{value:n.isActive?"ACTIVE":"INACTIVE",label:n.isActive?"Active":"Inactive",variant:n.isActive?"success":"default"},metadata:[{label:"Type",value:UM[n.type]||n.type},{label:"Locations",value:`${l}`}],kpis:f,tabs:v,defaultTab:"overview",actions:[{label:"Edit",icon:e.jsx(e0,{size:16}),onClick:()=>r("/warehouses"),variant:"secondary"}],linkedRecords:p,timeline:x,showTimeline:!1,backUrl:"/warehouses",backLabel:"Warehouses"})}const wC=[{value:"DRAFT",label:"Draft",color:"#94a3b8"},{value:"PENDING_QC",label:"Pending QC",color:"#f59e0b"},{value:"APPROVED",label:"Approved",color:"#22c55e"},{value:"PARTIALLY_APPROVED",label:"Partial",color:"#3b82f6"},{value:"REJECTED",label:"Rejected",color:"#ef4444"}];function hEe(){Qr();const[t,r]=k.useState([]),[n,i]=k.useState(null),[a,s]=k.useState([]),[o,l]=k.useState([]),[u,d]=k.useState(!0),[f,p]=k.useState({}),[x,v]=k.useState(!1),[w,C]=k.useState(!1),[N,T]=k.useState(!1),[O,D]=k.useState(null),[M,Y]=k.useState(null),[q,W]=k.useState(null),[J,z]=k.useState({poId:"",deliveryNoteNumber:"",notes:"",items:[]}),[G,ne]=k.useState({acceptedQty:0,rejectedQty:0,rejectionReason:"",warehouseId:"",binLocation:""});k.useEffect(()=>{Z(),ie()},[f]);const Z=async()=>{try{d(!0);const H=new URLSearchParams;f.status&&H.append("status",f.status),f.search&&H.append("search",f.search);const[oe,ge,be]=await Promise.all([xe.get(`/grn?${H}`),xe.get("/grn/stats"),xe.get("/grn/pending-pos")]);r(oe.data),i(ge.data),s(be.data)}catch(H){console.error("Error fetching GRNs:",H)}finally{d(!1)}},ie=async()=>{try{const H=await xe.get("/warehouses?status=ACTIVE");l(H.data)}catch(H){console.error("Error fetching warehouses:",H)}},me=H=>{Y(H),z({poId:H.id,deliveryNoteNumber:"",notes:"",items:H.items.map(oe=>({poItemId:oe.id,itemCode:oe.itemCode,itemName:oe.itemName,orderedQty:oe.orderedQty,alreadyReceived:oe.receivedQty,receivedQty:oe.orderedQty-oe.receivedQty,unit:oe.unit,lotNumber:"",batchNumber:"",expiryDate:"",manufacturingDate:"",warehouseId:"",binLocation:"",notes:""}))})},ce=async H=>{H.preventDefault();try{const oe={poId:J.poId,deliveryNoteNumber:J.deliveryNoteNumber,notes:J.notes,items:J.items.filter(ge=>ge.receivedQty>0).map(ge=>({poItemId:ge.poItemId,receivedQty:ge.receivedQty,unit:ge.unit,lotNumber:ge.lotNumber,batchNumber:ge.batchNumber,expiryDate:ge.expiryDate||null,manufacturingDate:ge.manufacturingDate||null,warehouseId:ge.warehouseId||null,binLocation:ge.binLocation,notes:ge.notes}))};await xe.post("/grn",oe),v(!1),Y(null),Z()}catch(oe){alert(oe.response?.data?.error||"Failed to create GRN")}},Q=async H=>{try{if(await xe.post(`/grn/${H.id}/submit`),Z(),w){const oe=await xe.get(`/grn/${H.id}`);D(oe.data)}}catch(oe){alert(oe.response?.data?.error||"Failed to submit GRN")}},de=H=>{W(H),ne({acceptedQty:H.receivedQty,rejectedQty:0,rejectionReason:"",warehouseId:H.warehouseId||"",binLocation:H.binLocation||""}),T(!0)},le=async H=>{if(H.preventDefault(),!(!O||!q))try{await xe.post(`/grn/${O.id}/approve-item/${q.id}`,G),T(!1);const oe=await xe.get(`/grn/${O.id}`);D(oe.data),Z()}catch(oe){alert(oe.response?.data?.error||"Failed to complete QC")}},ye=async()=>{if(O)try{await xe.post(`/grn/${O.id}/complete`);const H=await xe.get(`/grn/${O.id}`);D(H.data),Z()}catch(H){alert(H.response?.data?.error||"Failed to complete GRN")}},Se=async()=>{if(O)try{await xe.post(`/grn/${O.id}/post-to-stock`),alert("GRN posted to stock successfully"),Z()}catch(H){alert(H.response?.data?.error||"Failed to post to stock")}},$=H=>{const oe=wC.find(ge=>ge.value===H);return{backgroundColor:`${oe?.color}20`,color:oe?.color}},X=H=>({QUARANTINE:{bg:"#fef3c7",color:"#92400e"},RELEASED:{bg:"#dcfce7",color:"#166534"},REJECTED:{bg:"#fee2e2",color:"#991b1b"}})[H]||{bg:"#f1f5f9",color:"#475569"},se=[{key:"search",label:"Search",type:"search",placeholder:"Search GRN or PO number..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},...wC.map(H=>({value:H.value,label:H.label}))]}];return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Goods Receiving"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Receive goods from purchase orders and manage QC"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>v(!0),children:[e.jsx(cn,{size:16})," Receive Goods"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total",value:n?.total||0,icon:e.jsx(Rr,{size:20}),color:"primary",onClick:()=>p({}),selected:!f.status}),e.jsx(st,{title:"Draft",value:n?.draft||0,icon:e.jsx(Pr,{size:20}),onClick:()=>p({status:"DRAFT"}),selected:f.status==="DRAFT"}),e.jsx(st,{title:"Pending QC",value:n?.pendingQC||0,icon:e.jsx(Qt,{size:20}),color:"warning",onClick:()=>p({status:"PENDING_QC"}),selected:f.status==="PENDING_QC"}),e.jsx(st,{title:"Approved",value:n?.approved||0,icon:e.jsx(Ai,{size:20}),color:"success",onClick:()=>p({status:"APPROVED"}),selected:f.status==="APPROVED"}),e.jsx(st,{title:"Today",value:n?.receivedToday||0,icon:e.jsx($n,{size:20}),color:"info"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:se,values:f,onChange:(H,oe)=>p(ge=>({...ge,[H]:oe})),onReset:()=>p({})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["GRN List (",t?.length||0,")"]})}),u?e.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading..."}):t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[e.jsx(Rr,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No goods receiving notes found"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Create your first GRN"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>v(!0),children:[e.jsx(cn,{size:16})," Receive Goods"]})]}):e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"GRN #"}),e.jsx("th",{children:"PO #"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Received Date"}),e.jsx("th",{children:"Delivery Note"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"120px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:t.map(H=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(nr,{to:`/grn/${H.id}`,style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem",color:"var(--primary)"},children:H.grnNumber})}),e.jsx("td",{children:H.purchaseOrder?.poNumber?e.jsx(nr,{to:`/purchase-orders/${H.poId}`,style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:H.purchaseOrder.poNumber}):"-"}),e.jsx("td",{children:e.jsx("div",{style:{fontWeight:500},children:H.supplier?.name||"-"})}),e.jsx("td",{children:new Date(H.receivedDate).toLocaleDateString()}),e.jsx("td",{children:H.deliveryNoteNumber||"-"}),e.jsx("td",{children:e.jsxs("span",{className:"badge badge-default",children:[H._count?.items||0," items"]})}),e.jsx("td",{children:e.jsx(Pn,{status:H.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx(nr,{to:`/grn/${H.id}`,className:"btn btn-sm btn-outline",title:"View Details",children:e.jsx(os,{size:14})}),H.status==="DRAFT"&&e.jsx("button",{className:"btn btn-sm btn-outline",onClick:oe=>{oe.stopPropagation(),Q(H)},title:"Submit for QC",children:e.jsx(Gi,{size:14})})]})})]},H.id))})]})]}),x&&e.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:e.jsxs("div",{className:"modal",onClick:H=>H.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Receive Goods"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>v(!1),children:""})]}),M?e.jsxs("form",{onSubmit:ce,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsxs("strong",{children:["PO: ",M.poNumber]})," - ",M.supplier.name,e.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",style:{marginLeft:"1rem"},onClick:()=>Y(null),children:"Change"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Delivery Note Number"}),e.jsx("input",{type:"text",className:"form-input",value:J.deliveryNoteNumber,onChange:H=>z({...J,deliveryNoteNumber:H.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{type:"text",className:"form-input",value:J.notes,onChange:H=>z({...J,notes:H.target.value})})]})]}),e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Items to Receive"}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"data-table",style:{fontSize:"0.875rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item"}),e.jsx("th",{children:"Ordered"}),e.jsx("th",{children:"Already Recv"}),e.jsx("th",{children:"Receiving Qty"}),e.jsx("th",{children:"Lot #"}),e.jsx("th",{children:"Batch #"}),e.jsx("th",{children:"Expiry"}),e.jsx("th",{children:"Warehouse"})]})}),e.jsx("tbody",{children:J.items.map((H,oe)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{children:e.jsx("strong",{children:H.itemCode})}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.itemName})]}),e.jsxs("td",{children:[H.orderedQty," ",H.unit]}),e.jsx("td",{children:H.alreadyReceived}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-input",style:{width:"80px"},value:H.receivedQty,onChange:ge=>{const be=[...J.items];be[oe].receivedQty=parseFloat(ge.target.value)||0,z({...J,items:be})},min:0,max:H.orderedQty-H.alreadyReceived})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",style:{width:"100px"},value:H.lotNumber,onChange:ge=>{const be=[...J.items];be[oe].lotNumber=ge.target.value,z({...J,items:be})}})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",style:{width:"100px"},value:H.batchNumber,onChange:ge=>{const be=[...J.items];be[oe].batchNumber=ge.target.value,z({...J,items:be})}})}),e.jsx("td",{children:e.jsx("input",{type:"date",className:"form-input",style:{width:"130px"},value:H.expiryDate,onChange:ge=>{const be=[...J.items];be[oe].expiryDate=ge.target.value,z({...J,items:be})}})}),e.jsx("td",{children:e.jsxs("select",{className:"form-select",style:{width:"150px"},value:H.warehouseId,onChange:ge=>{const be=[...J.items];be[oe].warehouseId=ge.target.value,z({...J,items:be})},children:[e.jsx("option",{value:"",children:"Select..."}),o.map(ge=>e.jsxs("option",{value:ge.id,children:[ge.code," - ",ge.name]},ge.id))]})})]},H.poItemId))})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>v(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create GRN"})]})]}):e.jsxs("div",{className:"modal-body",children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Select Purchase Order"}),a.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No pending purchase orders available for receiving"}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"PO #"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:a.map(H=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:H.poNumber})}),e.jsx("td",{children:H.supplier.name}),e.jsx("td",{children:H.status}),e.jsx("td",{children:H.items.length}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>me(H),children:"Select"})})]},H.id))})]})]})]})}),w&&O&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal",onClick:H=>H.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:["GRN Details - ",O.grnNumber]}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>C(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"PO Number"}),e.jsx("div",{children:O.purchaseOrder?.poNumber})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Supplier"}),e.jsx("div",{children:O.supplier?.name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Status"}),e.jsx("span",{className:"badge",style:$(O.status),children:wC.find(H=>H.value===O.status)?.label})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Received Date"}),e.jsx("div",{children:new Date(O.receivedDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Note"}),e.jsx("div",{children:O.deliveryNoteNumber||"-"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h3",{children:["Items (",O.items.length,")"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[O.status==="DRAFT"&&e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>Q(O),children:[e.jsx(Gi,{size:14})," Submit for QC"]}),O.status==="PENDING_QC"&&O.items.every(H=>H.status!=="QUARANTINE")&&e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:ye,children:[e.jsx(af,{size:14})," Complete GRN"]}),["APPROVED","PARTIALLY_APPROVED"].includes(O.status)&&e.jsxs("button",{className:"btn btn-success btn-sm",onClick:Se,children:[e.jsx(Rr,{size:14})," Post to Stock"]})]})]}),e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item"}),e.jsx("th",{children:"Received"}),e.jsx("th",{children:"Accepted"}),e.jsx("th",{children:"Rejected"}),e.jsx("th",{children:"Lot/Batch"}),e.jsx("th",{children:"Expiry"}),e.jsx("th",{children:"Status"}),O.status==="PENDING_QC"&&e.jsx("th",{children:"QC"})]})}),e.jsx("tbody",{children:O.items.map(H=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{children:e.jsx("strong",{children:H.poItem?.itemCode})}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.poItem?.itemName})]}),e.jsxs("td",{children:[H.receivedQty," ",H.unit]}),e.jsx("td",{style:{color:"#22c55e"},children:H.acceptedQty}),e.jsx("td",{style:{color:"#ef4444"},children:H.rejectedQty}),e.jsxs("td",{children:[e.jsx("div",{children:H.lotNumber||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.batchNumber})]}),e.jsx("td",{children:H.expiryDate?new Date(H.expiryDate).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsx("span",{className:"badge",style:X(H.status),children:H.status})}),O.status==="PENDING_QC"&&e.jsx("td",{children:H.status==="QUARANTINE"&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>de(H),children:"QC"})})]},H.id))})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn",onClick:()=>C(!1),children:"Close"})})]})}),N&&q&&e.jsx("div",{className:"modal-overlay",onClick:()=>T(!1),children:e.jsxs("div",{className:"modal",onClick:H=>H.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"QC Review"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>T(!1),children:""})]}),e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsx("strong",{children:q.poItem?.itemCode})," - ",q.poItem?.itemName,e.jsxs("div",{style:{marginTop:"0.5rem",color:"var(--text-muted)"},children:["Received Qty: ",q.receivedQty," ",q.unit]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accepted Qty"}),e.jsx("input",{type:"number",className:"form-input",value:G.acceptedQty,onChange:H=>{const oe=parseFloat(H.target.value)||0;ne({...G,acceptedQty:oe,rejectedQty:q.receivedQty-oe})},min:0,max:q.receivedQty})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rejected Qty"}),e.jsx("input",{type:"number",className:"form-input",value:G.rejectedQty,onChange:H=>{const oe=parseFloat(H.target.value)||0;ne({...G,rejectedQty:oe,acceptedQty:q.receivedQty-oe})},min:0,max:q.receivedQty})]})]}),G.rejectedQty>0&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rejection Reason *"}),e.jsx("textarea",{className:"form-input",value:G.rejectionReason,onChange:H=>ne({...G,rejectionReason:H.target.value}),required:G.rejectedQty>0,rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Warehouse"}),e.jsxs("select",{className:"form-select",value:G.warehouseId,onChange:H=>ne({...G,warehouseId:H.target.value}),children:[e.jsx("option",{value:"",children:"Select warehouse..."}),o.map(H=>e.jsxs("option",{value:H.id,children:[H.code," - ",H.name]},H.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bin Location"}),e.jsx("input",{type:"text",className:"form-input",value:G.binLocation,onChange:H=>ne({...G,binLocation:H.target.value})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>T(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Complete QC"})]})]})]})})]})}function SC(t,r){try{if(!t)return"-";const n=new Date(t);return isNaN(n.getTime())?"-":Ze(n,r)}catch{return"-"}}const fEe={DRAFT:"default",PENDING_QC:"warning",APPROVED:"success",PARTIALLY_APPROVED:"info",REJECTED:"danger"};function mEe(){const{id:t}=hl(),r=Qr(),n=pr(),i=gn(),{data:a,isLoading:s}=Ve({queryKey:["grn",t],queryFn:async()=>{const{data:D}=await xe.get(`/grn/${t}`);return D},enabled:!!t}),{data:o}=Ve({queryKey:["grn-audit",t],queryFn:async()=>{const{data:D}=await xe.get(`/audit?entityType=GoodsReceivingNote&entityId=${t}`);return D.logs||[]},enabled:!!t}),l=ot({mutationFn:async()=>{const{data:D}=await xe.post(`/grn/${t}/submit`);return D},onSuccess:()=>{n.invalidateQueries({queryKey:["grn",t]}),i.success("GRN submitted for QC")},onError:D=>{i.error(D.response?.data?.error||"Failed to submit GRN")}}),u=ot({mutationFn:async()=>{const{data:D}=await xe.post(`/grn/${t}/approve`);return D},onSuccess:()=>{n.invalidateQueries({queryKey:["grn",t]}),i.success("GRN approved")},onError:D=>{i.error(D.response?.data?.error||"Failed to approve GRN")}});if(s)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});if(!a)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx(fn,{icon:"search",title:"GRN Not Found",message:"The goods receiving note you're looking for doesn't exist or has been deleted.",ctaLabel:"Back to Goods Receiving",onCta:()=>r("/grn")})});const d=a.items?.length||0,f=a.items?.reduce((D,M)=>D+Number(M.receivedQuantity||0),0)||0,p=a.items?.reduce((D,M)=>D+Number(M.orderedQuantity||0),0)||0,x=p>0?Math.round(f/p*100):0,v=a.items?.filter(D=>D.qcStatus==="PASSED").length||0,w=[{title:"Line Items",value:d,icon:e.jsx(Rr,{size:24}),color:"primary"},{title:"Qty Received",value:f.toLocaleString(),icon:e.jsx(dn,{size:24}),color:"success"},{title:"Receipt Rate",value:`${x}%`,icon:e.jsx(Pv,{size:24}),color:x>=100?"success":x>=80?"warning":"danger"},{title:"QC Passed",value:`${v}/${d}`,icon:e.jsx(Ai,{size:24}),color:v===d?"success":v>0?"warning":"default"}],C=[];a.purchaseOrder&&C.push({type:"purchaseOrder",label:a.purchaseOrder.poNumber,link:`/purchase-orders/${a.purchaseOrder.id}`}),a.supplier&&C.push({type:"supplier",label:a.supplier.name,link:`/suppliers/${a.supplier.id}`}),a.warehouse&&C.push({type:"warehouse",label:a.warehouse.name,link:`/warehouses/${a.warehouse.id}`});const N=(o||[]).map(D=>({id:D.id,title:D.action.replace(/_/g," "),description:D.details||"",timestamp:D.createdAt,actor:D.user?.firstName?`${D.user.firstName} ${D.user.lastName}`:"System",type:D.action.includes("APPROVED")?"success":D.action.includes("REJECTED")?"error":"info"})),T=()=>{const D=[];return a.status==="DRAFT"&&D.push({label:"Submit for QC",icon:e.jsx(Pv,{size:16}),onClick:()=>l.mutate(),variant:"primary",loading:l.isPending}),a.status==="PENDING_QC"&&D.push({label:"Approve",icon:e.jsx(Ai,{size:16}),onClick:()=>u.mutate(),variant:"primary",loading:u.isPending}),a.status==="DRAFT"&&D.push({label:"Edit",icon:e.jsx(e0,{size:16}),onClick:()=>r("/grn"),variant:"secondary"}),D},O=[{key:"overview",label:"Overview",icon:e.jsx(Pr,{size:16}),content:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Receipt Details"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:[e.jsx($n,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Received Date"]}),e.jsx("td",{style:{padding:"0.5rem 0"},children:SC(a.receivedDate,"dd MMM yyyy")})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:[e.jsx(Uo,{size:14,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Received By"]}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.receivedBy?.name||"-"})]}),a.deliveryNote&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Delivery Note"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.deliveryNote})]}),a.vehicleNumber&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Vehicle Number"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.vehicleNumber})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Source"}),e.jsx("table",{style:{width:"100%",fontSize:"0.875rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)",width:"40%"},children:"Purchase Order"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.purchaseOrder?e.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),r(`/purchase-orders/${a.purchaseOrder.id}`)},style:{color:"var(--primary)"},children:a.purchaseOrder.poNumber}):"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Supplier"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.supplier?e.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),r(`/suppliers/${a.supplier.id}`)},style:{color:"var(--primary)"},children:a.supplier.name}):"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem 0",color:"var(--text-muted)"},children:"Warehouse"}),e.jsx("td",{style:{padding:"0.5rem 0"},children:a.warehouse?e.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),r(`/warehouses/${a.warehouse.id}`)},style:{color:"var(--primary)"},children:a.warehouse.name}):"-"})]})]})})]}),a.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("h4",{style:{marginBottom:"1rem",fontWeight:600},children:"Notes"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:a.notes})]})]})},{key:"items",label:"Line Items",icon:e.jsx(Rr,{size:16}),badge:d,content:a.items?.length>0?e.jsx("div",{children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Material"}),e.jsx("th",{style:{textAlign:"right"},children:"Ordered"}),e.jsx("th",{style:{textAlign:"right"},children:"Received"}),e.jsx("th",{children:"Lot/Batch"}),e.jsx("th",{children:"QC Status"})]})}),e.jsx("tbody",{children:a.items.map((D,M)=>e.jsxs("tr",{children:[e.jsx("td",{children:M+1}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:D.material?.name||D.description||"-"}),D.material?.code&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:D.material.code})]}),e.jsx("td",{style:{textAlign:"right"},children:Number(D.orderedQuantity||0).toLocaleString()}),e.jsx("td",{style:{textAlign:"right"},children:Number(D.receivedQuantity||0).toLocaleString()}),e.jsx("td",{style:{fontFamily:"monospace"},children:D.lotNumber||D.batchNumber||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${D.qcStatus==="PASSED"?"success":D.qcStatus==="FAILED"?"danger":D.qcStatus==="PENDING"?"warning":"default"}`,children:D.qcStatus||"Pending"})})]},D.id))})]})}):e.jsx(fn,{icon:"package",title:"No Line Items",message:"No items have been added to this GRN."})},{key:"documents",label:"Documents",icon:e.jsx(Pr,{size:16}),content:e.jsx(mc,{entityType:"GoodsReceivingNote",entityId:t})},{key:"timeline",label:"Timeline",icon:e.jsx(jm,{size:16}),badge:N.length,content:N.length>0?e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:N.map(D=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--border)",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:D.type==="success"?"var(--success)":D.type==="error"?"var(--danger)":"var(--primary)",marginTop:"0.5rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:D.title}),D.description&&e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:D.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[D.actor,"  ",SC(D.timestamp,"dd MMM yyyy HH:mm")]})]})]},D.id))}):e.jsx(fn,{icon:"search",title:"No Activity",message:"No activity recorded for this GRN yet."})}];return e.jsx(gy,{title:`GRN ${a.grnNumber}`,code:a.grnNumber,status:{value:a.status,label:a.status?.replace(/_/g," "),variant:fEe[a.status]||"default"},metadata:[{label:"Received",value:SC(a.receivedDate,"dd MMM yyyy")},{label:"Supplier",value:a.supplier?.name||"-"}],kpis:w,tabs:O,defaultTab:"overview",actions:T(),linkedRecords:C,timeline:N,showTimeline:!1,backUrl:"/grn",backLabel:"Goods Receiving"})}const _v=[{value:"AVAILABLE",label:"Available",color:"#22c55e"},{value:"QUARANTINE",label:"Quarantine",color:"#f59e0b"},{value:"RESERVED",label:"Reserved",color:"#3b82f6"},{value:"ON_HOLD",label:"On Hold",color:"#94a3b8"},{value:"EXPIRED",label:"Expired",color:"#ef4444"},{value:"REJECTED",label:"Rejected",color:"#dc2626"}],pA=[{value:"RECEIPT",label:"Receipt",color:"#22c55e"},{value:"ISSUE",label:"Issue",color:"#ef4444"},{value:"TRANSFER_IN",label:"Transfer In",color:"#3b82f6"},{value:"TRANSFER_OUT",label:"Transfer Out",color:"#f59e0b"},{value:"ADJUSTMENT_IN",label:"Adjustment +",color:"#22c55e"},{value:"ADJUSTMENT_OUT",label:"Adjustment -",color:"#ef4444"},{value:"RETURN",label:"Return",color:"#8b5cf6"},{value:"SCRAP",label:"Scrap",color:"#dc2626"}],CC=t=>{const r=_v.find(n=>n.value===t);return{bg:`${r?.color}20`,color:r?.color||"#6b7280"}},WM=t=>{const r=pA.find(n=>n.value===t);return{backgroundColor:`${r?.color}20`,color:r?.color}};function pEe(){const t=pr(),r=gn(),[n,i]=k.useState("stock"),[a,s]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState(!1),[x,v]=k.useState(null),[w,C]=k.useState(!1),[N,T]=k.useState(!1),[O,D]=k.useState(null),[M,Y]=k.useState({adjustmentQty:0,reason:"",notes:""}),[q,W]=k.useState({toWarehouseId:"",toLocationId:"",quantity:0,reason:"",notes:""}),{data:J}=Ve({queryKey:["stock-stats"],queryFn:async()=>{const{data:se}=await xe.get("/stock/stats");return se}}),{data:z=[],isLoading:G}=Ve({queryKey:["stock",a,o,u,f],queryFn:async()=>{const se=new URLSearchParams;o&&se.append("warehouseId",o),u&&se.append("status",u),a&&se.append("search",a),f&&se.append("lowStock","true");const{data:H}=await xe.get(`/stock?${se}`);return H},enabled:n==="stock"}),{data:ne=[]}=Ve({queryKey:["stock-movements",o],queryFn:async()=>{const se=new URLSearchParams;o&&se.append("warehouseId",o);const{data:H}=await xe.get(`/stock/movements?${se}`);return H},enabled:n==="movements"}),{data:Z=[]}=Ve({queryKey:["warehouses-active"],queryFn:async()=>{const{data:se}=await xe.get("/warehouses?status=ACTIVE");return se}}),{data:ie}=Ve({queryKey:["stock-item",x?.id],queryFn:async()=>{const{data:se}=await xe.get(`/stock/${x?.id}`);return se},enabled:!!x?.id}),me=ot({mutationFn:async se=>xe.post("/stock/adjust",se),onSuccess:()=>{t.invalidateQueries({queryKey:["stock"]}),t.invalidateQueries({queryKey:["stock-stats"]}),t.invalidateQueries({queryKey:["stock-item",x?.id]}),r.success("Stock adjusted successfully"),C(!1)},onError:se=>{r.error(se.response?.data?.error||"Failed to adjust stock")}}),ce=ot({mutationFn:async se=>xe.post("/stock/transfer",se),onSuccess:()=>{t.invalidateQueries({queryKey:["stock"]}),t.invalidateQueries({queryKey:["stock-stats"]}),t.invalidateQueries({queryKey:["stock-item",x?.id]}),r.success("Stock transferred successfully"),T(!1)},onError:se=>{r.error(se.response?.data?.error||"Failed to transfer stock")}}),Q=se=>se.material.minStockLevel>0&&se.availableQty<se.material.minStockLevel,de=se=>{if(!se.expiryDate)return!1;const H=new Date(se.expiryDate),oe=new Date;return oe.setDate(oe.getDate()+30),H<=oe&&H>new Date},le=se=>{D(se),Y({adjustmentQty:0,reason:"",notes:""}),C(!0)},ye=se=>{D(se),W({toWarehouseId:"",toLocationId:"",quantity:se.availableQty,reason:"",notes:""}),T(!0)},Se=se=>{se.preventDefault(),O&&me.mutate({stockItemId:O.id,...M})},$=se=>{se.preventDefault(),O&&ce.mutate({stockItemId:O.id,...q})},X=ie||x;return G&&n==="stock"?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Inventory"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Track stock levels and movements"})]})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Items",value:J?.totalItems||0,icon:e.jsx(Rr,{size:24}),color:"primary"}),e.jsx(st,{title:"Available",value:J?.available||0,icon:e.jsx(Ut,{size:24}),color:"success"}),e.jsx(st,{title:"Quarantine",value:J?.quarantine||0,icon:e.jsx(lz,{size:24}),color:"warning"}),e.jsx(st,{title:"Low Stock",value:J?.lowStockCount||0,icon:e.jsx($r,{size:24}),color:"danger"}),e.jsx(st,{title:"Expiring Soon",value:J?.expiringSoon||0,icon:e.jsx(Qt,{size:24}),color:"info"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsxs("button",{className:`btn ${n==="stock"?"btn-primary":"btn-secondary"}`,onClick:()=>i("stock"),children:[e.jsx(Rr,{size:16})," Stock Items"]}),e.jsxs("button",{className:`btn ${n==="movements"?"btn-primary":"btn-secondary"}`,onClick:()=>i("movements"),children:[e.jsx(d8,{size:16})," Movements"]})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search material, lot, batch...",value:a,onChange:se=>s(se.target.value),style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"160px"},value:o,onChange:se=>l(se.target.value),children:[e.jsx("option",{value:"",children:"All Warehouses"}),Z.map(se=>e.jsxs("option",{value:se.id,children:[se.code," - ",se.name]},se.id))]}),n==="stock"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"130px"},value:u,onChange:se=>d(se.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),_v.map(se=>e.jsx("option",{value:se.value,children:se.label},se.value))]}),e.jsxs("button",{className:`btn btn-sm ${f?"btn-warning":"btn-secondary"}`,onClick:()=>p(!f),children:[e.jsx($r,{size:14})," Low Stock"]})]}),(a||o||u||f)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{s(""),l(""),d(""),p(!1)},children:[e.jsx(kr,{size:14})," Clear"]})]})}),n==="stock"&&e.jsxs("div",{className:"grid",style:{gridTemplateColumns:x?"1fr 420px":"1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:z.map(se=>{const H=CC(se.status),oe=x?.id===se.id,ge=Q(se),be=de(se);return e.jsxs("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:oe?"2px solid var(--primary)":ge?"2px solid var(--error)":"1px solid var(--border)",transition:"all 0.2s",background:ge?"rgba(239, 68, 68, 0.03)":void 0},onClick:()=>v(se),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsx("span",{className:"badge",style:{background:H.bg,color:H.color,fontWeight:600},children:_v.find(Le=>Le.value===se.status)?.label||se.status}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[ge&&e.jsxs("span",{className:"badge",style:{fontSize:"0.625rem",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},children:[e.jsx($r,{size:10})," Low"]}),be&&e.jsxs("span",{className:"badge",style:{fontSize:"0.625rem",background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:[e.jsx(Qt,{size:10})," Expiring"]})]})]}),e.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"1rem"},children:se.material.name}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:e.jsx("span",{style:{fontFamily:"monospace"},children:se.material.code})}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Total"}),e.jsx("div",{style:{fontWeight:600},children:se.quantity})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.5rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Reserved"}),e.jsx("div",{style:{fontWeight:600,color:"#3b82f6"},children:se.reservedQty})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.5rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius)"},children:[e.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Available"}),e.jsx("div",{style:{fontWeight:600,color:"#22c55e"},children:se.availableQty})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.8125rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(lm,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{children:se.warehouse.code}),se.location&&e.jsxs("span",{style:{color:"var(--text-muted)"},children:["/ ",se.location.code]})]}),se.lotNumber&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[e.jsx(RA,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{children:["Lot: ",se.lotNumber]})]})]}),se.expiryDate&&e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.375rem",color:be?"#f59e0b":"var(--text-muted)"},children:[e.jsx($n,{size:12}),"Expires: ",new Date(se.expiryDate).toLocaleDateString()]})]},se.id)})}),z.length===0&&e.jsx("div",{className:"card",style:{padding:"2rem"},children:e.jsx(fn,{title:"No stock items found",message:a||o||u?"Try adjusting your filters":"No stock items available",icon:"package"})})]}),x&&X&&e.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[e.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:CC(X.status).bg},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:CC(X.status).color,color:"white",marginBottom:"0.5rem"},children:_v.find(se=>se.value===X.status)?.label||X.status}),e.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:"0.5rem 0 0.25rem"},children:X.material.name}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0},children:X.material.code})]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>v(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:e.jsx(kr,{size:14})})]})}),e.jsxs("div",{style:{padding:"1.25rem",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Quantity Summary"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Total"}),e.jsx("div",{style:{fontWeight:700,fontSize:"1.25rem"},children:X.quantity}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:X.unit})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Reserved"}),e.jsx("div",{style:{fontWeight:700,fontSize:"1.25rem",color:"#3b82f6"},children:X.reservedQty}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:X.unit})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Available"}),e.jsx("div",{style:{fontWeight:700,fontSize:"1.25rem",color:"#22c55e"},children:X.availableQty}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:X.unit})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Location Details"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(lm,{size:16,style:{color:"var(--primary)"}}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500},children:[X.warehouse.code," - ",X.warehouse.name]}),X.location&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Location: ",X.location.code]})]})]})})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Batch Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Lot Number"}),e.jsx("span",{style:{fontWeight:500},children:X.lotNumber||"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Batch Number"}),e.jsx("span",{style:{fontWeight:500},children:X.batchNumber||"-"})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Dates"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Manufacturing Date"}),e.jsx("span",{style:{fontWeight:500},children:X.manufacturingDate?new Date(X.manufacturingDate).toLocaleDateString():"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Received Date"}),e.jsx("span",{style:{fontWeight:500},children:X.receivedDate?new Date(X.receivedDate).toLocaleDateString():"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",background:de(X)?"rgba(245, 158, 11, 0.1)":void 0},children:[e.jsx("span",{style:{color:de(X)?"#f59e0b":"var(--text-muted)"},children:"Expiry Date"}),e.jsx("span",{style:{fontWeight:500,color:de(X)?"#f59e0b":void 0},children:X.expiryDate?new Date(X.expiryDate).toLocaleDateString():"-"})]})]})]}),X.unitCost&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Cost Information"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[e.jsx(DA,{size:16,style:{color:"var(--success)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Unit Cost"}),e.jsx("div",{style:{fontWeight:600},children:li(X.unitCost)})]})]})]}),X.movements&&X.movements.length>0&&e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Recent Movements"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:X.movements.slice(0,5).map(se=>e.jsxs("div",{style:{padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",fontSize:"0.8125rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{className:"badge",style:WM(se.type),children:pA.find(H=>H.value===se.type)?.label}),e.jsxs("span",{style:{fontWeight:500},children:[se.quantity," ",se.unit]})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:new Date(se.performedAt).toLocaleString()})]},se.id))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",style:{flex:1},onClick:()=>le(X),children:[e.jsx(t0,{size:16})," Adjust"]}),X.availableQty>0&&e.jsxs("button",{className:"btn btn-primary",style:{flex:1},onClick:()=>ye(X),children:[e.jsx(d8,{size:16})," Transfer"]})]})]})]})]}),n==="movements"&&e.jsx("div",{className:"card",style:{padding:"1rem"},children:ne.length===0?e.jsx(fn,{title:"No movements found",message:"Stock movements will appear here",icon:"package"}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Movement #"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Material"}),e.jsx("th",{children:"Warehouse"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Reference"}),e.jsx("th",{children:"Reason"})]})}),e.jsx("tbody",{children:ne.map(se=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:se.movementNumber})}),e.jsx("td",{children:new Date(se.performedAt).toLocaleString()}),e.jsx("td",{children:e.jsx("span",{className:"badge",style:WM(se.type),children:pA.find(H=>H.value===se.type)?.label})}),e.jsxs("td",{children:[e.jsx("div",{children:se.stockItem.material.code}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:se.stockItem.material.name})]}),e.jsx("td",{children:se.warehouse.code}),e.jsxs("td",{style:{fontWeight:600,color:se.type.includes("IN")||se.type==="RECEIPT"||se.type==="ADJUSTMENT_IN"||se.type==="RETURN"?"#22c55e":"#ef4444"},children:[se.type.includes("IN")||se.type==="RECEIPT"||se.type==="ADJUSTMENT_IN"||se.type==="RETURN"?"+":"-",se.quantity," ",se.unit]}),e.jsx("td",{children:se.referenceType&&se.referenceNumber?e.jsxs("span",{children:[se.referenceType,": ",se.referenceNumber]}):"-"}),e.jsx("td",{children:se.reason||"-"})]},se.id))})]})})}),w&&O&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal",onClick:se=>se.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Adjust Stock"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>C(!1),children:""})]}),e.jsxs("form",{onSubmit:Se,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsx("strong",{children:O.material.code})," - ",O.material.name,e.jsxs("div",{style:{marginTop:"0.5rem",color:"var(--text-muted)"},children:["Current: ",O.quantity," ",O.unit," (Available: ",O.availableQty,")"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Adjustment Quantity"}),e.jsx("input",{type:"number",className:"form-input",value:M.adjustmentQty,onChange:se=>Y({...M,adjustmentQty:parseFloat(se.target.value)||0}),step:"0.01"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Positive for increase, negative for decrease"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reason *"}),e.jsxs("select",{className:"form-select",value:M.reason,onChange:se=>Y({...M,reason:se.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select reason..."}),e.jsx("option",{value:"Physical count correction",children:"Physical count correction"}),e.jsx("option",{value:"Damage/Scrap",children:"Damage/Scrap"}),e.jsx("option",{value:"Expired",children:"Expired"}),e.jsx("option",{value:"System error correction",children:"System error correction"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{className:"form-input",value:M.notes,onChange:se=>Y({...M,notes:se.target.value}),rows:2})]}),e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:M.adjustmentQty>=0?"#dcfce7":"#fee2e2",borderRadius:"8px"},children:[e.jsx("strong",{children:"New Quantity: "}),O.quantity+M.adjustmentQty," ",O.unit]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>C(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:M.adjustmentQty===0||me.isPending,children:me.isPending?"Adjusting...":"Adjust Stock"})]})]})]})}),N&&O&&e.jsx("div",{className:"modal-overlay",onClick:()=>T(!1),children:e.jsxs("div",{className:"modal",onClick:se=>se.stopPropagation(),style:{maxWidth:"450px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Transfer Stock"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>T(!1),children:""})]}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsx("strong",{children:O.material.code})," - ",O.material.name,e.jsxs("div",{style:{marginTop:"0.5rem",color:"var(--text-muted)"},children:["From: ",O.warehouse.code," - ",O.warehouse.name]}),e.jsxs("div",{style:{color:"var(--text-muted)"},children:["Available: ",O.availableQty," ",O.unit]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To Warehouse *"}),e.jsxs("select",{className:"form-select",value:q.toWarehouseId,onChange:se=>W({...q,toWarehouseId:se.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select warehouse..."}),Z.filter(se=>se.id!==O.warehouseId).map(se=>e.jsxs("option",{value:se.id,children:[se.code," - ",se.name]},se.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quantity *"}),e.jsx("input",{type:"number",className:"form-input",value:q.quantity,onChange:se=>W({...q,quantity:parseFloat(se.target.value)||0}),min:.01,max:O.availableQty,step:"0.01",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reason"}),e.jsx("input",{type:"text",className:"form-input",value:q.reason,onChange:se=>W({...q,reason:se.target.value}),placeholder:"e.g., Production requirement"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{className:"form-input",value:q.notes,onChange:se=>W({...q,notes:se.target.value}),rows:2})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>T(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!q.toWarehouseId||q.quantity<=0||ce.isPending,children:ce.isPending?"Transferring...":"Transfer"})]})]})]})})]})}const gEe=[{value:"DRAFT",label:"Draft",color:"#94a3b8"},{value:"IN_PROGRESS",label:"In Progress",color:"#3b82f6"},{value:"PENDING_REVIEW",label:"Pending Review",color:"#f59e0b"},{value:"APPROVED",label:"Approved",color:"#22c55e"},{value:"REJECTED",label:"Rejected",color:"#ef4444"},{value:"CANCELLED",label:"Cancelled",color:"#6b7280"}],HM=[{value:"PENDING",label:"Pending",color:"#94a3b8"},{value:"IN_PROGRESS",label:"In Progress",color:"#3b82f6"},{value:"COMPLETED",label:"Completed",color:"#22c55e"},{value:"SKIPPED",label:"Skipped",color:"#6b7280"},{value:"FAILED",label:"Failed",color:"#ef4444"},{value:"ON_HOLD",label:"On Hold",color:"#f59e0b"}],yEe={DRAFT:{label:"Draft",description:"Batch record created but production not yet started.",nextAction:"Start production to begin recording steps"},IN_PROGRESS:{label:"In Progress",description:"Production is actively running. Steps are being executed.",nextAction:"Complete all steps to finish production"},PENDING_REVIEW:{label:"Pending Review",description:"Production complete. Awaiting QA review and approval.",nextAction:"Review and approve the batch record"},APPROVED:{label:"Approved",description:"Batch record approved. Ready for release.",nextAction:"Batch can proceed to QC/release"},REJECTED:{label:"Rejected",description:"Batch record was rejected during review.",nextAction:"Investigate and document deviation"}};function xEe(){const t=pr(),r=gn(),[n,i]=k.useState(""),[a,s]=k.useState(""),[o,l]=k.useState(1),[u,d]=k.useState(!1),[f,p]=k.useState(!1),[x,v]=k.useState(null),[w,C]=k.useState(!1),[N,T]=k.useState({batchId:"",recipeId:"",notes:""}),{data:O,isLoading:D}=Ve({queryKey:["batch-records",n,a,o],queryFn:async()=>{const X={page:o,limit:15};n&&(X.search=n),a&&(X.status=a);const{data:se}=await xe.get("/batch-records",{params:X});return se}}),{data:M}=Ve({queryKey:["batch-records-stats"],queryFn:async()=>{const{data:X}=await xe.get("/batch-records",{params:{limit:1e3}}),se=X.records;return{total:se.length,draft:se.filter(H=>H.status==="DRAFT").length,inProgress:se.filter(H=>H.status==="IN_PROGRESS").length,pendingReview:se.filter(H=>H.status==="PENDING_REVIEW").length,approved:se.filter(H=>H.status==="APPROVED").length,rejected:se.filter(H=>H.status==="REJECTED").length}}}),{data:Y}=Ve({queryKey:["batch-record",x],queryFn:async()=>{const[X,se]=await Promise.all([xe.get(`/batch-records/${x}`),xe.get(`/batch-records/${x}/kpis`)]);return{record:X.data,kpis:se.data}},enabled:!!x}),{data:q}=Ve({queryKey:["batch-record-form-data"],queryFn:async()=>{const[X,se]=await Promise.all([xe.get("/batches",{params:{limit:100}}),xe.get("/recipes",{params:{status:"ACTIVE",limit:100}})]);return{batches:X.data.batches||[],recipes:se.data.recipes||[]}},enabled:w}),W=ot({mutationFn:async X=>xe.post("/batch-records",X),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-records"]}),t.invalidateQueries({queryKey:["batch-records-stats"]}),r.success("Batch record created"),C(!1),T({batchId:"",recipeId:"",notes:""})},onError:X=>{r.error(X.response?.data?.error||"Failed to create batch record")}}),J=ot({mutationFn:async X=>xe.post(`/batch-records/${X}/start`),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-records"]}),t.invalidateQueries({queryKey:["batch-records-stats"]}),t.invalidateQueries({queryKey:["batch-record",x]}),r.success("Production started")},onError:X=>{r.error(X.response?.data?.error||"Failed to start production")}}),z=ot({mutationFn:async({recordId:X,stepId:se})=>xe.post(`/batch-records/${X}/steps/${se}/start`),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-record",x]}),r.success("Step started")},onError:X=>{r.error(X.response?.data?.error||"Failed to start step")}}),G=ot({mutationFn:async({recordId:X,stepId:se})=>xe.post(`/batch-records/${X}/steps/${se}/complete`,{}),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-record",x]}),r.success("Step completed")},onError:X=>{r.error(X.response?.data?.error||"Failed to complete step")}}),ne=ot({mutationFn:async X=>xe.post(`/batch-records/${X}/complete`,{}),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-records"]}),t.invalidateQueries({queryKey:["batch-records-stats"]}),t.invalidateQueries({queryKey:["batch-record",x]}),r.success("Production completed")},onError:X=>{r.error(X.response?.data?.error||"Failed to complete production")}}),Z=ot({mutationFn:async X=>xe.post(`/batch-records/${X}/review`,{meaning:"Reviewed and verified"}),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-records"]}),t.invalidateQueries({queryKey:["batch-records-stats"]}),t.invalidateQueries({queryKey:["batch-record",x]}),r.success("Record reviewed")},onError:X=>{r.error(X.response?.data?.error||"Failed to review record")}}),ie=ot({mutationFn:async X=>xe.post(`/batch-records/${X}/approve`,{meaning:"Approved for release"}),onSuccess:()=>{t.invalidateQueries({queryKey:["batch-records"]}),t.invalidateQueries({queryKey:["batch-records-stats"]}),t.invalidateQueries({queryKey:["batch-record",x]}),r.success("Record approved")},onError:X=>{r.error(X.response?.data?.error||"Failed to approve record")}}),me=X=>{v(X),p(!0)},ce=X=>({DRAFT:"default",IN_PROGRESS:"info",PENDING_REVIEW:"warning",APPROVED:"success",REJECTED:"danger",CANCELLED:"default"})[X]||"default",Q=X=>{const se=HM.find(H=>H.value===X);return{backgroundColor:`${se?.color}20`,color:se?.color}},de=O?.records||[],le=O?.totalPages||1,ye=Y?.record,Se=Y?.kpis,$=ye?.steps||[];return D?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[e.jsx(lu,{size:28,style:{color:"var(--primary)"}}),e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Manufacturing Execution"})]}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:"Electronic Batch Records (eBR) for production control"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:()=>d(!u),children:[e.jsx(am,{size:16}),"Workflow Guide",u?e.jsx(nh,{size:14}):e.jsx(bo,{size:14})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>C(!0),children:[e.jsx(cn,{size:16})," New Batch Record"]})]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Total Records",value:M?.total||0,icon:e.jsx(lu,{size:20}),color:"primary",onClick:()=>s(""),selected:!a}),e.jsx(st,{title:"Draft",value:M?.draft||0,icon:e.jsx(Qt,{size:20}),color:"default",onClick:()=>s("DRAFT"),selected:a==="DRAFT"}),e.jsx(st,{title:"In Progress",value:M?.inProgress||0,icon:e.jsx(Mc,{size:20}),color:"info",onClick:()=>s("IN_PROGRESS"),selected:a==="IN_PROGRESS"}),e.jsx(st,{title:"Pending Review",value:M?.pendingReview||0,icon:e.jsx(os,{size:20}),color:"warning",onClick:()=>s("PENDING_REVIEW"),selected:a==="PENDING_REVIEW"}),e.jsx(st,{title:"Approved",value:M?.approved||0,icon:e.jsx(Ut,{size:20}),color:"success",onClick:()=>s("APPROVED"),selected:a==="APPROVED"}),e.jsx(st,{title:"Rejected",value:M?.rejected||0,icon:e.jsx($r,{size:20}),color:"danger",onClick:()=>s("REJECTED"),selected:a==="REJECTED"})]}),e.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(fl,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[e.jsx(Gs,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Search record # or batch...",value:n,onChange:X=>{i(X.target.value),l(1)},style:{paddingLeft:"2.25rem"}})]}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:a,onChange:X=>{s(X.target.value),l(1)},children:[e.jsx("option",{value:"",children:"All Statuses"}),gEe.map(X=>e.jsx("option",{value:X.value,children:X.label},X.value))]}),(n||a)&&e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{i(""),s(""),l(1)},children:[e.jsx(kr,{size:14})," Clear"]})]})}),u&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(am,{size:18,style:{color:"var(--primary)"}}),"Batch Record Workflow Guide"]}),e.jsx("div",{style:{marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Batch records flow through these stages from creation to approval:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:["DRAFT","IN_PROGRESS","PENDING_REVIEW","APPROVED"].map((X,se,H)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pn,{status:X,size:"sm"}),se<H.length-1&&e.jsx(oc,{size:14,style:{color:"var(--text-muted)"}})]},X))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem"},children:Object.entries(yEe).map(([X,se])=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"var(--radius-sm)",borderLeft:`3px solid var(--${ce(X)==="default"?"secondary":ce(X)})`},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:e.jsx(Pn,{status:X,size:"sm"})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:se.description}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx("strong",{children:"Next:"})," ",se.nextAction]})]},X))})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Batch Records (",de.length,")"]})}),de.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Record #"}),e.jsx("th",{children:"Batch"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Recipe"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Progress"}),e.jsx("th",{children:"Created"}),e.jsx("th",{style:{width:"100px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:de.map(X=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem",color:"var(--primary)"},children:X.recordNumber}),e.jsx("td",{children:X.batch?.batchNumber}),e.jsx("td",{children:X.batch?.product?.name}),e.jsx("td",{children:e.jsxs("span",{style:{fontSize:"0.875rem"},children:[X.recipe?.code," v",X.recipeVersion]})}),e.jsx("td",{children:e.jsx(Pn,{status:X.status,size:"sm"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mc,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("span",{style:{fontSize:"0.875rem"},children:[X._count?.steps||0," steps"]}),(X._count?.deviations||0)>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--error)",fontSize:"0.75rem"},children:[e.jsx($r,{size:12}),X._count?.deviations]})]})}),e.jsx("td",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:new Date(X.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>me(X.id),title:"View Details",children:e.jsx(os,{size:14})})})})]},X.id))})]}),le>1&&e.jsxs("div",{style:{padding:"1rem",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>l(X=>Math.max(1,X-1)),disabled:o===1,children:"Previous"}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Page ",o," of ",le]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>l(X=>Math.min(le,X+1)),disabled:o===le,children:"Next"})]})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No batch records found",message:"Create a new batch record to get started",icon:"package"})})]}),w&&e.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal",onClick:X=>X.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Create Batch Record"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>C(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Batch *"}),e.jsxs("select",{className:"form-select",value:N.batchId,onChange:X=>T({...N,batchId:X.target.value}),children:[e.jsx("option",{value:"",children:"Select batch..."}),q?.batches.map(X=>e.jsxs("option",{value:X.id,children:[X.batchNumber," - ",X.product?.name]},X.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Recipe *"}),e.jsxs("select",{className:"form-select",value:N.recipeId,onChange:X=>T({...N,recipeId:X.target.value}),children:[e.jsx("option",{value:"",children:"Select recipe..."}),q?.recipes.map(X=>e.jsxs("option",{value:X.id,children:[X.code," - ",X.name," (v",X.version,")"]},X.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{className:"form-input",value:N.notes,onChange:X=>T({...N,notes:X.target.value}),rows:3})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:()=>C(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>W.mutate(N),disabled:W.isPending||!N.batchId||!N.recipeId,children:W.isPending?"Creating...":"Create Record"})]})]})}),f&&ye&&e.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:e.jsxs("div",{className:"modal",onClick:X=>X.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{background:"var(--bg-secondary)"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"0.25rem"},children:ye.recordNumber}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0},children:[ye.batch?.batchNumber," - ",ye.batch?.product?.name]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(Pn,{status:ye.status,size:"md"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>p(!1),children:""})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[Se&&e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--info)",marginBottom:"0.5rem"},children:[e.jsx(Mc,{size:16}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500},children:"Progress"})]}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--info)"},children:[Se.progress?.percentage||0,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[Se.progress?.completed,"/",Se.progress?.total," steps"]})]}),e.jsxs("div",{style:{padding:"1rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#8b5cf6",marginBottom:"0.5rem"},children:[e.jsx(Qt,{size:16}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500},children:"Duration"})]}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#8b5cf6"},children:[Se.timing?.actualMinutes||0," min"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Expected: ",Se.timing?.expectedMinutes||0," min"]})]}),e.jsxs("div",{style:{padding:"1rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--success)",marginBottom:"0.5rem"},children:[e.jsx(Rr,{size:16}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500},children:"Materials"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--success)"},children:Se.materials?.itemsConsumed||0}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Items consumed"})]}),e.jsxs("div",{style:{padding:"1rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--warning)",marginBottom:"0.5rem"},children:[e.jsx(fz,{size:16}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500},children:"Equipment"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--warning)"},children:Se.equipment?.itemsUsed||0}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Items used"})]}),e.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--error)",marginBottom:"0.5rem"},children:[e.jsx(fv,{size:16}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500},children:"Deviations"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--error)"},children:Se.deviations?.total||0}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[Se.deviations?.open||0," open"]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsx("h4",{style:{fontWeight:600,margin:0},children:"Production Steps"})}),e.jsx("div",{children:$.map(X=>e.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"0.875rem"},children:X.stepNumber}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:500},children:["Step ",X.stepNumber,": ",X.title]}),X.isQualityCheckpoint&&e.jsx("span",{className:"badge",style:{fontSize:"0.625rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:"QC"})]}),e.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:X.description})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[X.plannedDuration&&e.jsxs("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:["~",X.plannedDuration," min"]}),e.jsx("span",{className:"badge",style:Q(X.status),children:HM.find(se=>se.value===X.status)?.label}),ye.status==="IN_PROGRESS"&&X.status==="PENDING"&&e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>z.mutate({recordId:ye.id,stepId:X.id}),disabled:z.isPending,children:e.jsx(yo,{size:14})}),ye.status==="IN_PROGRESS"&&X.status==="IN_PROGRESS"&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>G.mutate({recordId:ye.id,stepId:X.id}),disabled:G.isPending,children:e.jsx(Ut,{size:14})})]})]},X.id))})]}),(ye.startedBy||ye.approvedBy)&&e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",display:"flex",gap:"2rem"},children:[ye.startedBy&&e.jsxs("span",{children:["Started by: ",ye.startedBy.firstName," ",ye.startedBy.lastName]}),ye.approvedBy&&e.jsxs("span",{children:["Approved by: ",ye.approvedBy.firstName," ",ye.approvedBy.lastName]})]})]}),e.jsxs("div",{className:"modal-footer",style:{background:"var(--bg-secondary)"},children:[e.jsx("button",{className:"btn",onClick:()=>p(!1),children:"Close"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[ye.status==="DRAFT"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>J.mutate(ye.id),disabled:J.isPending,children:[e.jsx(yo,{size:16})," Start Production"]}),ye.status==="IN_PROGRESS"&&Se?.progress?.percentage===100&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>ne.mutate(ye.id),disabled:ne.isPending,children:[e.jsx(Ut,{size:16})," Complete Production"]}),ye.status==="PENDING_REVIEW"&&!ye.reviewedAt&&e.jsxs("button",{className:"btn btn-warning",onClick:()=>Z.mutate(ye.id),disabled:Z.isPending,children:[e.jsx(os,{size:16})," Review Record"]}),ye.status==="PENDING_REVIEW"&&ye.reviewedAt&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>ie.mutate(ye.id),disabled:ie.isPending,children:[e.jsx(Ut,{size:16})," Approve Record"]})]})]})]})})]})}const vEe=[{value:"OPEN",label:"Open"},{value:"PHASE_1_LAB_INVESTIGATION",label:"Phase 1 Investigation"},{value:"PHASE_1_COMPLETE",label:"Phase 1 Complete"},{value:"PHASE_2_FULL_INVESTIGATION",label:"Phase 2 Investigation"},{value:"PHASE_2_COMPLETE",label:"Phase 2 Complete"},{value:"CAPA_PROPOSED",label:"CAPA Proposed"},{value:"CAPA_APPROVED",label:"CAPA Approved"},{value:"CAPA_IMPLEMENTING",label:"CAPA Implementing"},{value:"CLOSED_CONFIRMED",label:"Closed (Confirmed)"},{value:"CLOSED_INVALIDATED",label:"Closed (Invalidated)"},{value:"CLOSED_INCONCLUSIVE",label:"Closed (Inconclusive)"}],VM=[{value:"OOS",label:"Out of Specification"},{value:"OOT",label:"Out of Trend"},{value:"OOE",label:"Out of Expectation"}],$M=[{value:"LOW",label:"Low"},{value:"MEDIUM",label:"Medium"},{value:"HIGH",label:"High"},{value:"CRITICAL",label:"Critical"}];function bEe(){const[t,r]=k.useState({}),[n,i]=k.useState(1),[a,s]=k.useState(!1),[o,l]=k.useState(!1),[u,d]=k.useState(null),[f,p]=k.useState(null),x=k.useRef(null),v=pr(),w=gn(),[C,N]=k.useState({batchId:"",caseType:"OOS",priority:"MEDIUM",testName:"",testMethod:"",specMin:"",specMax:"",actualValue:"",unit:"",deviationPercent:"",initialDescription:"",dueDate:""});k.useEffect(()=>{const H=oe=>{x.current&&!x.current.contains(oe.target)&&p(null)};return f&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[f]);const{data:T,isLoading:O}=Ve({queryKey:["oos-cases",t,n],queryFn:async()=>{const H=new URLSearchParams;H.append("page",n.toString()),H.append("limit","20"),t.status&&H.append("status",t.status),t.caseType&&H.append("caseType",t.caseType),t.priority&&H.append("priority",t.priority);const{data:oe}=await xe.get(`/oos-investigations?${H}`);return oe}}),D=T?.cases||[],M=T?.totalPages||1,Y=t.search?D.filter(H=>H.caseNumber.toLowerCase().includes(t.search.toLowerCase())||H.testName.toLowerCase().includes(t.search.toLowerCase())||H.batch?.batchNumber?.toLowerCase().includes(t.search.toLowerCase())||H.batch?.product?.name?.toLowerCase().includes(t.search.toLowerCase())):D,{data:q}=Ve({queryKey:["oos-stats"],queryFn:async()=>{const{data:H}=await xe.get("/oos-investigations/stats");return H}}),{data:W}=Ve({queryKey:["batches-for-oos"],queryFn:async()=>{const{data:H}=await xe.get("/batches");return H.slice(0,100)}}),J=ot({mutationFn:async H=>xe.post("/oos-investigations",H),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),s(!1),de(),w.success("Case Opened","New OOS/OOT investigation case has been opened")},onError:H=>{const oe=an(H);w.error("Creation Failed",oe?.userMessage||"Failed to create case")}}),z=ot({mutationFn:async H=>xe.post(`/oos-investigations/${H}/start-phase1`,{}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("Phase 1 Started","Lab investigation has begun")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to start Phase 1")}}),G=ot({mutationFn:async({id:H,proceedToPhase2:oe})=>xe.post(`/oos-investigations/${H}/complete-phase1`,{conclusion:"Phase 1 investigation completed",proceedToPhase2:oe}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("Phase 1 Completed","Lab investigation phase completed")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to complete Phase 1")}}),ne=ot({mutationFn:async H=>xe.post(`/oos-investigations/${H}/start-phase2`,{}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("Phase 2 Started","Full investigation has begun")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to start Phase 2")}}),Z=ot({mutationFn:async H=>xe.post(`/oos-investigations/${H}/complete-phase2`,{conclusion:"Phase 2 investigation completed",rootCause:"Root cause identified during investigation"}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("Phase 2 Completed","Full investigation phase completed")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to complete Phase 2")}}),ie=ot({mutationFn:async H=>xe.post(`/oos-investigations/${H}/propose-capa`,{rootCause:"Root cause identified",correctiveAction:"Corrective actions to be taken",preventiveAction:"Preventive measures to implement"}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("CAPA Proposed","Corrective and preventive actions submitted")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to propose CAPA")}}),me=ot({mutationFn:async H=>xe.post(`/oos-investigations/${H}/approve-capa`,{signatureMeaning:"I approve this CAPA for implementation"}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("CAPA Approved","CAPA has been approved for implementation")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to approve CAPA")}}),ce=ot({mutationFn:async H=>xe.post(`/oos-investigations/${H}/start-implementation`,{}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("Implementation Started","CAPA implementation has begun")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to start implementation")}}),Q=ot({mutationFn:async({id:H,closureType:oe})=>xe.post(`/oos-investigations/${H}/close`,{closureType:oe,finalConclusion:`Case closed as ${oe}`,signatureMeaning:`I confirm the closure of this OOS case as ${oe}`}),onSuccess:()=>{v.invalidateQueries({queryKey:["oos-cases"]}),v.invalidateQueries({queryKey:["oos-stats"]}),u&&le(u.id),w.success("Case Closed","Investigation has been closed")},onError:H=>{const oe=an(H);w.error("Failed",oe?.userMessage||"Failed to close case")}}),de=()=>{N({batchId:"",caseType:"OOS",priority:"MEDIUM",testName:"",testMethod:"",specMin:"",specMax:"",actualValue:"",unit:"",deviationPercent:"",initialDescription:"",dueDate:""})},le=async H=>{try{const{data:oe}=await xe.get(`/oos-investigations/${H}`);d(oe),l(!0)}catch(oe){console.error("Failed to fetch case details:",oe)}},ye=()=>{J.mutate(C)},Se=[{key:"search",label:"Search",type:"search",placeholder:"Search cases..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},...vEe.map(H=>({value:H.value,label:H.label}))]},{key:"caseType",label:"Type",type:"select",options:[{value:"",label:"All Types"},...VM.map(H=>({value:H.value,label:H.label}))]},{key:"priority",label:"Priority",type:"select",options:[{value:"",label:"All Priorities"},...$M.map(H=>({value:H.value,label:H.label}))]}],$={open:q?.openCases||0,overdue:q?.overdue||0,closed:q?.recentClosures||0,oos:q?.byType?.find(H=>H.caseType==="OOS")?._count?.id||0,oot:q?.byType?.find(H=>H.caseType==="OOT")?._count?.id||0,ooe:q?.byType?.find(H=>H.caseType==="OOE")?._count?.id||0},X=H=>({LOW:"default",MEDIUM:"info",HIGH:"warning",CRITICAL:"danger"})[H]||"default",se=H=>({OOS:"danger",OOT:"warning",OOE:"info"})[H]||"default";return O?e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"OOS/OOT Investigations"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage out-of-specification and out-of-trend investigations"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>s(!0),children:[e.jsx(cn,{size:16}),"Open New Case"]})]}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(st,{title:"Open Cases",value:$.open,icon:e.jsx(Mc,{size:20}),color:"primary",onClick:()=>r({status:"OPEN"}),selected:t.status==="OPEN"}),e.jsx(st,{title:"Overdue",value:$.overdue,icon:e.jsx(lz,{size:20}),color:"danger"}),e.jsx(st,{title:"Closed (30d)",value:$.closed,icon:e.jsx(Ut,{size:20}),color:"success"}),e.jsx(st,{title:"OOS Cases",value:$.oos,icon:e.jsx($r,{size:20}),color:"danger",onClick:()=>r({caseType:"OOS"}),selected:t.caseType==="OOS"}),e.jsx(st,{title:"OOT Cases",value:$.oot,icon:e.jsx(fv,{size:20}),color:"warning",onClick:()=>r({caseType:"OOT"}),selected:t.caseType==="OOT"}),e.jsx(st,{title:"OOE Cases",value:$.ooe,icon:e.jsx(Qt,{size:20}),color:"info",onClick:()=>r({caseType:"OOE"}),selected:t.caseType==="OOE"})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:e.jsx(dd,{widgets:Se,values:t,onChange:(H,oe)=>r(ge=>({...ge,[H]:oe})),onReset:()=>r({})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Investigation Cases (",Y?.length||0,")"]})}),Y?.length>0?e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Case #"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Batch"}),e.jsx("th",{children:"Test"}),e.jsx("th",{children:"Priority"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Opened"}),e.jsx("th",{style:{width:"120px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:Y.map(H=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem",color:"var(--danger)"},children:H.caseNumber})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${se(H.caseType)}`,style:{fontSize:"0.6875rem"},children:H.caseType})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500},children:H.batch?.batchNumber}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.batch?.product?.name})]}),e.jsxs("td",{children:[e.jsx("div",{children:H.testName}),H.actualValue&&H.specMin&&H.specMax&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[H.actualValue," ",H.unit," (Spec: ",H.specMin,"-",H.specMax,")"]})]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${X(H.priority)}`,style:{fontSize:"0.6875rem"},children:H.priority})}),e.jsx("td",{children:e.jsx(Pn,{status:H.status,size:"sm"})}),e.jsxs("td",{children:[e.jsx("div",{children:Ze(new Date(H.openedAt),"MMM dd, yyyy")}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[H.openedBy?.firstName," ",H.openedBy?.lastName]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",position:"relative"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>le(H.id),title:"View Details",children:e.jsx(os,{size:14})}),e.jsxs("div",{style:{position:"relative"},ref:f===H.id?x:null,children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:oe=>{oe.stopPropagation(),p(f===H.id?null:H.id)},children:e.jsx(ez,{size:14})}),f===H.id&&e.jsxs("div",{className:"dropdown-menu",onClick:oe=>oe.stopPropagation(),children:[H.status==="OPEN"&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{z.mutate(H.id),p(null)},children:[e.jsx(yo,{size:14}),"Start Phase 1"]}),H.status==="PHASE_1_LAB_INVESTIGATION"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"dropdown-item",onClick:()=>{G.mutate({id:H.id,proceedToPhase2:!1}),p(null)},children:[e.jsx(Ut,{size:14}),"Complete Phase 1"]}),e.jsxs("button",{className:"dropdown-item",onClick:()=>{G.mutate({id:H.id,proceedToPhase2:!0}),p(null)},children:[e.jsx(oc,{size:14}),"Proceed to Phase 2"]})]}),H.status==="PHASE_1_COMPLETE"&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{ne.mutate(H.id),p(null)},children:[e.jsx(yo,{size:14}),"Start Phase 2"]}),H.status==="PHASE_2_FULL_INVESTIGATION"&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{Z.mutate(H.id),p(null)},children:[e.jsx(Ut,{size:14}),"Complete Phase 2"]}),H.status==="PHASE_2_COMPLETE"&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{ie.mutate(H.id),p(null)},children:[e.jsx(fv,{size:14}),"Propose CAPA"]}),H.status==="CAPA_PROPOSED"&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{me.mutate(H.id),p(null)},children:[e.jsx(Ut,{size:14}),"Approve CAPA"]}),H.status==="CAPA_APPROVED"&&e.jsxs("button",{className:"dropdown-item",onClick:()=>{ce.mutate(H.id),p(null)},children:[e.jsx(yo,{size:14}),"Start Implementation"]}),H.status==="CAPA_IMPLEMENTING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"dropdown-item",onClick:()=>{Q.mutate({id:H.id,closureType:"CONFIRMED"}),p(null)},children:[e.jsx(Ut,{size:14}),"Close (Confirmed)"]}),e.jsxs("button",{className:"dropdown-item",onClick:()=>{Q.mutate({id:H.id,closureType:"INVALIDATED"}),p(null)},children:[e.jsx(ci,{size:14}),"Close (Invalidated)"]})]})]})]})]})})]},H.id))})]}):e.jsx("div",{style:{padding:"2rem"},children:e.jsx(fn,{title:"No investigations found",message:"Open a new case to start an investigation",icon:"alert"})}),M>1&&e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>i(H=>Math.max(1,H-1)),disabled:n===1,children:"Previous"}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Page ",n," of ",M]}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>i(H=>Math.min(M,H+1)),disabled:n===M,children:"Next"})]})]}),f&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:999},onClick:()=>p(null)}),a&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"700px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Open New OOS/OOT Investigation"}),e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>s(!1),children:e.jsx(kr,{size:18})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Batch *"}),e.jsxs("select",{className:"form-select",value:C.batchId,onChange:H=>N({...C,batchId:H.target.value}),children:[e.jsx("option",{value:"",children:"Select Batch"}),W?.map(H=>e.jsxs("option",{value:H.id,children:[H.batchNumber," - ",H.product?.name]},H.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Case Type *"}),e.jsx("select",{className:"form-select",value:C.caseType,onChange:H=>N({...C,caseType:H.target.value}),children:VM.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Priority *"}),e.jsx("select",{className:"form-select",value:C.priority,onChange:H=>N({...C,priority:H.target.value}),children:$M.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Due Date"}),e.jsx("input",{type:"date",className:"form-input",value:C.dueDate,onChange:H=>N({...C,dueDate:H.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Test Name *"}),e.jsx("input",{type:"text",className:"form-input",value:C.testName,onChange:H=>N({...C,testName:H.target.value}),placeholder:"e.g., Assay, pH, Endotoxin"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Test Method"}),e.jsx("input",{type:"text",className:"form-input",value:C.testMethod,onChange:H=>N({...C,testMethod:H.target.value}),placeholder:"e.g., HPLC, USP Method"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Spec Min"}),e.jsx("input",{type:"number",className:"form-input",value:C.specMin,onChange:H=>N({...C,specMin:H.target.value}),placeholder:"Minimum specification"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Spec Max"}),e.jsx("input",{type:"number",className:"form-input",value:C.specMax,onChange:H=>N({...C,specMax:H.target.value}),placeholder:"Maximum specification"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Actual Value"}),e.jsx("input",{type:"number",className:"form-input",value:C.actualValue,onChange:H=>N({...C,actualValue:H.target.value}),placeholder:"Observed value"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Unit"}),e.jsx("input",{type:"text",className:"form-input",value:C.unit,onChange:H=>N({...C,unit:H.target.value}),placeholder:"e.g., %, mg/mL"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Initial Description *"}),e.jsx("textarea",{className:"form-textarea",rows:3,value:C.initialDescription,onChange:H=>N({...C,initialDescription:H.target.value}),placeholder:"Describe the deviation or issue observed..."})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:ye,disabled:!C.batchId||!C.testName||!C.initialDescription||J.isPending,children:J.isPending?"Creating...":"Open Case"})]})]})}),o&&u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"0.25rem"},children:u.caseNumber}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("span",{className:`badge badge-${se(u.caseType)}`,children:u.caseType}),e.jsx("span",{className:`badge badge-${X(u.priority)}`,children:u.priority}),e.jsx(Pn,{status:u.status,size:"sm"})]})]}),e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>l(!1),children:e.jsx(kr,{size:18})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)"},children:"Batch Information"}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Batch:"})," ",e.jsx("span",{style:{fontWeight:500},children:u.batch?.batchNumber})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Product:"})," ",e.jsx("span",{children:u.batch?.product?.name})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)"},children:"Test Details"}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Test:"})," ",e.jsx("span",{style:{fontWeight:500},children:u.testName})]}),u.testMethod&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Method:"})," ",e.jsx("span",{children:u.testMethod})]}),u.actualValue&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Result:"})," ",e.jsxs("span",{style:{color:"var(--danger)",fontWeight:500},children:[u.actualValue," ",u.unit]}),u.specMin&&u.specMax&&e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" (Spec: ",u.specMin,"-",u.specMax,")"]})]})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"1rem",marginTop:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)"},children:"Initial Description"}),e.jsx("p",{style:{fontSize:"0.875rem",margin:0},children:u.initialDescription})]}),(u.rootCause||u.correctiveAction||u.preventiveAction)&&e.jsxs("div",{className:"card",style:{padding:"1rem",marginTop:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)"},children:"CAPA Details"}),u.rootCause&&e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.8125rem",marginBottom:"0.25rem"},children:"Root Cause"}),e.jsx("p",{style:{fontSize:"0.875rem",margin:0},children:u.rootCause})]}),u.correctiveAction&&e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.8125rem",marginBottom:"0.25rem"},children:"Corrective Action"}),e.jsx("p",{style:{fontSize:"0.875rem",margin:0},children:u.correctiveAction})]}),u.preventiveAction&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,fontSize:"0.8125rem",marginBottom:"0.25rem"},children:"Preventive Action"}),e.jsx("p",{style:{fontSize:"0.875rem",margin:0},children:u.preventiveAction})]})]}),u.timeline&&u.timeline.length>0&&e.jsxs("div",{className:"card",style:{padding:"1rem",marginTop:"1rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)"},children:"Timeline"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.timeline.map(H=>e.jsxs("div",{style:{display:"flex",gap:"0.75rem",fontSize:"0.875rem"},children:[e.jsx("div",{style:{color:"var(--text-muted)",minWidth:"120px"},children:Ze(new Date(H.createdAt),"MMM dd, HH:mm")}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:H.action}),H.description&&e.jsx("div",{style:{color:"var(--text-muted)"},children:H.description})]})]},H.id))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Close"}),u.status==="OPEN"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>z.mutate(u.id),children:[e.jsx(yo,{size:16}),"Start Phase 1"]}),u.status==="PHASE_1_LAB_INVESTIGATION"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>G.mutate({id:u.id,proceedToPhase2:!0}),children:[e.jsx(oc,{size:16}),"Complete & Proceed to Phase 2"]}),u.status==="PHASE_1_COMPLETE"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>ne.mutate(u.id),children:[e.jsx(yo,{size:16}),"Start Phase 2"]}),u.status==="PHASE_2_FULL_INVESTIGATION"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>Z.mutate(u.id),children:[e.jsx(Ut,{size:16}),"Complete Phase 2"]}),u.status==="PHASE_2_COMPLETE"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>ie.mutate(u.id),children:[e.jsx(fv,{size:16}),"Propose CAPA"]}),u.status==="CAPA_PROPOSED"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>me.mutate(u.id),children:[e.jsx(Ut,{size:16}),"Approve CAPA"]}),u.status==="CAPA_APPROVED"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>ce.mutate(u.id),children:[e.jsx(yo,{size:16}),"Start Implementation"]}),u.status==="CAPA_IMPLEMENTING"&&e.jsxs("button",{className:"btn btn-success",onClick:()=>Q.mutate({id:u.id,closureType:"CONFIRMED"}),children:[e.jsx(Ut,{size:16}),"Close Case"]})]})]})})]})}const vg=[{value:"email",label:"Email Only"},{value:"sms",label:"SMS Only"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email,sms",label:"Email + SMS"},{value:"email,whatsapp",label:"Email + WhatsApp"},{value:"email,sms,whatsapp",label:"All Channels"}],jEe=[{id:"channels",label:"Channel Status",icon:Lp},{id:"email",label:"Email Settings",icon:uc},{id:"events",label:"Event Routing",icon:xo}];function wEe(){const t=pr(),r=gn(),[n,i]=k.useState("channels"),[a,s]=k.useState({}),[o,l]=k.useState(""),[u,d]=k.useState(null),{data:f,isLoading:p}=Ve({queryKey:["notification-settings"],queryFn:async()=>{const{data:q}=await xe.get("/notification-settings");return q}}),{data:x}=Ve({queryKey:["notification-status"],queryFn:async()=>{const{data:q}=await xe.get("/notification-settings/status");return q}});k.useEffect(()=>{if(f){const q={};Object.entries(f).forEach(([W,J])=>{q[J.key]=J.value}),s(q)}},[f]);const v=ot({mutationFn:async q=>{await xe.put("/notification-settings",q)},onSuccess:()=>{r.success("Settings Saved","Notification settings updated successfully"),t.invalidateQueries({queryKey:["notification-settings"]})},onError:()=>{r.error("Save Failed","Failed to save notification settings")}}),w=()=>{v.mutate(a)},C=async()=>{d("email");try{const{data:q}=await xe.get("/notification-settings/test/email");r.success("Email Sent",q.message||"Test email sent successfully")}catch(q){r.error("Email Failed",q.response?.data?.error||"Email test failed")}d(null)},N=async()=>{if(!o){r.error("Phone Required","Please enter a phone number");return}d("sms");try{const{data:q}=await xe.get(`/notification-settings/test/sms?to=${encodeURIComponent(o)}`);r.success("SMS Sent",q.message||"Test SMS sent successfully")}catch(q){r.error("SMS Failed",q.response?.data?.error||"SMS test failed")}d(null)},T=async()=>{if(!o){r.error("Phone Required","Please enter a phone number");return}d("whatsapp");try{const{data:q}=await xe.get(`/notification-settings/test/whatsapp?to=${encodeURIComponent(o)}`);r.success("WhatsApp Sent",q.message||"Test WhatsApp sent successfully")}catch(q){r.error("WhatsApp Failed",q.response?.data?.error||"WhatsApp test failed")}d(null)};if(p)return e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"spinner"})});const O=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(uc,{size:20,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontWeight:600},children:"Email"})]}),x?.email.connected?e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Connected"]}):e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ci,{size:12})," Disconnected"]})]}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:["Provider: ",x?.email.provider||"Resend"]}),e.jsxs("button",{className:"btn btn-sm btn-outline",onClick:C,disabled:u==="email",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u==="email"?e.jsx("div",{className:"spinner",style:{width:"14px",height:"14px"}}):e.jsx(Gi,{size:14}),"Send Test"]})]}),e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(vo,{size:20,style:{color:"var(--success)"}}),e.jsx("span",{style:{fontWeight:600},children:"SMS"})]}),x?.sms.connected?e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Connected"]}):e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ci,{size:12})," Disconnected"]})]}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:["Provider: ",x?.sms.provider||"Twilio"]}),x?.sms.phoneNumber&&e.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:["From: ",x.sms.phoneNumber]}),e.jsxs("button",{className:"btn btn-sm btn-outline",onClick:N,disabled:u==="sms"||!x?.sms.connected,style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u==="sms"?e.jsx("div",{className:"spinner",style:{width:"14px",height:"14px"}}):e.jsx(Gi,{size:14}),"Send Test"]})]}),e.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Jp,{size:20,style:{color:"#25D366"}}),e.jsx("span",{style:{fontWeight:600},children:"WhatsApp"})]}),x?.whatsapp.connected?e.jsxs("span",{className:"badge badge-success",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ut,{size:12})," Connected"]}):e.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ci,{size:12})," Disconnected"]})]}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:["Provider: ",x?.whatsapp.provider||"Twilio"]}),x?.whatsapp.phoneNumber&&e.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:["From: ",x.whatsapp.phoneNumber]}),e.jsxs("button",{className:"btn btn-sm btn-outline",onClick:T,disabled:u==="whatsapp"||!x?.whatsapp.connected,style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u==="whatsapp"?e.jsx("div",{className:"spinner",style:{width:"14px",height:"14px"}}):e.jsx(Gi,{size:14}),"Send Test"]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Test Phone Number"})}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:"Enter a phone number to test SMS and WhatsApp (include country code, e.g., +1234567890)"}),e.jsx("input",{type:"tel",className:"form-input",value:o,onChange:q=>l(q.target.value),placeholder:"+1234567890",style:{maxWidth:"300px"}})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Channel Enable/Disable"})}),e.jsx("div",{style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a.notification_email_enabled===!0||a.notification_email_enabled==="true",onChange:q=>s({...a,notification_email_enabled:q.target.checked}),style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable Email Notifications"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a.notification_sms_enabled===!0||a.notification_sms_enabled==="true",onChange:q=>s({...a,notification_sms_enabled:q.target.checked}),style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable SMS Notifications"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a.notification_whatsapp_enabled===!0||a.notification_whatsapp_enabled==="true",onChange:q=>s({...a,notification_whatsapp_enabled:q.target.checked}),style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{fontWeight:500},children:"Enable WhatsApp Notifications"})]})]})})]})]}),D=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Email Configuration"})}),e.jsx("div",{style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sender Email Address"}),e.jsx("input",{type:"email",className:"form-input",value:a.notification_email_from_address||"",onChange:q=>s({...a,notification_email_from_address:q.target.value}),placeholder:"noreply@radiopharma.com"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:'The email address that will appear in the "From" field'})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sender Display Name"}),e.jsx("input",{type:"text",className:"form-input",value:a.notification_email_from_name||"",onChange:q=>s({...a,notification_email_from_name:q.target.value}),placeholder:"RadioPharma OMS"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"The display name shown to email recipients"})]})]})})]}),M=()=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Event Channel Configuration"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:"0.25rem 0 0"},children:"Configure which channels to use for different notification types"})]}),e.jsx("div",{style:{padding:"1.25rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Order Notifications"}),e.jsx("select",{className:"form-select",value:a.notification_order_events||"email",onChange:q=>s({...a,notification_order_events:q.target.value}),children:vg.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Order status updates, confirmations"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Batch/Production Notifications"}),e.jsx("select",{className:"form-select",value:a.notification_batch_events||"email",onChange:q=>s({...a,notification_batch_events:q.target.value}),children:vg.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Production status, QC results, batch releases"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Delivery Notifications"}),e.jsx("select",{className:"form-select",value:a.notification_delivery_events||"email,sms",onChange:q=>s({...a,notification_delivery_events:q.target.value}),children:vg.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Shipment dispatched, delivery updates, ETA changes"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Approval Notifications"}),e.jsx("select",{className:"form-select",value:a.notification_approval_events||"email",onChange:q=>s({...a,notification_approval_events:q.target.value}),children:vg.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Pending approvals, approval/rejection outcomes"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Invoice Notifications"}),e.jsx("select",{className:"form-select",value:a.notification_invoice_events||"email",onChange:q=>s({...a,notification_invoice_events:q.target.value}),children:vg.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Invoice generated, payment reminders, receipts"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Default Channel"}),e.jsxs("select",{className:"form-select",value:a.notification_default_channel||"email",onChange:q=>s({...a,notification_default_channel:q.target.value}),children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"all",children:"All Channels"})]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Fallback channel for uncategorized notifications"})]})]})})]}),Y=()=>{switch(n){case"channels":return O();case"email":return D();case"events":return M();default:return null}};return e.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[e.jsxs("div",{style:{width:"240px",flexShrink:0},children:[e.jsxs(nr,{to:"/settings",className:"btn btn-secondary",style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%"},children:[e.jsx(aa,{size:16}),"Back to Settings"]}),e.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(lf,{size:18,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Notification Settings"})]})}),e.jsx("div",{style:{padding:"0.5rem"},children:jEe.map(q=>{const W=q.icon,J=n===q.id;return e.jsxs("button",{onClick:()=>i(q.id),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem 1rem",border:"none",borderRadius:"var(--radius-sm)",background:J?"var(--primary)":"transparent",color:J?"white":"var(--text-secondary)",cursor:"pointer",fontSize:"0.875rem",fontWeight:J?500:400,textAlign:"left",transition:"all 0.15s ease"},children:[e.jsx(W,{size:18}),q.label]},q.id)})})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Notification Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Configure email, SMS, and WhatsApp notification channels"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:w,disabled:v.isPending,children:[v.isPending?e.jsx("div",{className:"spinner",style:{width:"16px",height:"16px"}}):e.jsx(lc,{size:16}),"Save Changes"]})]}),Y()]})]})}const GM=[{value:"PASS_FAIL",label:"Pass/Fail"},{value:"NUMERIC",label:"Numeric"},{value:"TEXT",label:"Text"},{value:"OPTION_LIST",label:"Option List"}],SEe=["Appearance","Identity","Purity","Potency","Sterility","Endotoxin","pH","Radioactivity","Particle Size","Other"];function CEe(){const t=gn(),r=pr(),[n,i]=k.useState(!1),[a,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState(""),[f,p]=k.useState({code:"",nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",resultType:"PASS_FAIL",unit:"",optionList:"",category:"",method:"",isActive:!0}),{data:x=[],isLoading:v}=Ve({queryKey:["qc-test-definitions"],queryFn:async()=>{const{data:W}=await xe.get("/qc/test-definitions");return W}}),w=ot({mutationFn:async W=>{const{data:J}=await xe.post("/qc/test-definitions",W);return J},onSuccess:()=>{r.invalidateQueries({queryKey:["qc-test-definitions"]}),t.success("Test Created","QC test definition has been added successfully"),O()},onError:W=>{t.error("Error",W.response?.data?.error||"Failed to create test definition")}}),C=ot({mutationFn:async({id:W,data:J})=>{const{data:z}=await xe.put(`/qc/test-definitions/${W}`,J);return z},onSuccess:()=>{r.invalidateQueries({queryKey:["qc-test-definitions"]}),t.success("Test Updated","QC test definition has been updated successfully"),O()},onError:W=>{t.error("Error",W.response?.data?.error||"Failed to update test definition")}}),N=ot({mutationFn:async W=>{await xe.delete(`/qc/test-definitions/${W}`)},onSuccess:()=>{r.invalidateQueries({queryKey:["qc-test-definitions"]}),t.success("Test Deleted","QC test definition has been removed")},onError:W=>{t.error("Error",W.response?.data?.error||"Failed to delete test definition")}}),T=W=>{W?(s(W),p({code:W.code,nameEn:W.nameEn,nameAr:W.nameAr||"",descriptionEn:W.descriptionEn||"",descriptionAr:W.descriptionAr||"",resultType:W.resultType,unit:W.unit||"",optionList:W.optionList||"",category:W.category||"",method:W.method||"",isActive:W.isActive})):(s(null),p({code:"",nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",resultType:"PASS_FAIL",unit:"",optionList:"",category:"",method:"",isActive:!0})),i(!0)},O=()=>{i(!1),s(null)},D=W=>{W.preventDefault(),a?C.mutate({id:a.id,data:f}):w.mutate(f)},M=W=>{confirm(`Are you sure you want to delete "${W.nameEn}"?`)&&N.mutate(W.id)},Y=x.filter(W=>{const J=W.code.toLowerCase().includes(o.toLowerCase())||W.nameEn.toLowerCase().includes(o.toLowerCase()),z=!u||W.category===u;return J&&z}),q=[...new Set(x.map(W=>W.category).filter(Boolean))];return e.jsxs("div",{className:"p-6",children:[e.jsx(zc,{title:"QC Test Definitions",subtitle:"Manage catalog of quality control tests",icon:e.jsx(sa,{size:24}),actions:e.jsxs("button",{onClick:()=>T(),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(cn,{size:16}),"Add Test"]})}),e.jsxs("div",{className:"card mt-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(Gs,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted"}),e.jsx("input",{type:"text",placeholder:"Search by code or name...",value:o,onChange:W=>l(W.target.value),className:"input pl-10 w-full"})]}),e.jsxs("select",{value:u,onChange:W=>d(W.target.value),className:"input min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Categories"}),q.map(W=>e.jsx("option",{value:W||"",children:W},W))]})]}),v?e.jsx("div",{className:"text-center py-8 text-muted",children:"Loading..."}):Y.length===0?e.jsx("div",{className:"text-center py-8 text-muted",children:"No test definitions found. Add your first QC test to get started."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-default",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Result Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Unit"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-medium text-muted",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-muted",children:"Actions"})]})}),e.jsx("tbody",{children:Y.map(W=>e.jsxs("tr",{className:"border-b border-default hover:bg-hover",children:[e.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:W.code}),e.jsx("td",{className:"py-3 px-4",children:W.nameEn}),e.jsx("td",{className:"py-3 px-4 text-muted",children:W.category||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-primary/10 text-primary",children:GM.find(J=>J.value===W.resultType)?.label})}),e.jsx("td",{className:"py-3 px-4 text-muted",children:W.unit||"-"}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${W.isActive?"bg-green-500/10 text-green-500":"bg-gray-500/10 text-gray-500"}`,children:W.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>T(W),className:"p-2 hover:bg-hover rounded-lg transition-colors",title:"Edit",children:e.jsx(Ha,{size:16})}),e.jsx("button",{onClick:()=>M(W),className:"p-2 hover:bg-hover rounded-lg transition-colors text-red-500",title:"Delete",children:e.jsx(ra,{size:16})})]})})]},W.id))})]})})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:O,children:e.jsxs("div",{className:"modal-content max-w-2xl",onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Edit Test Definition":"Add Test Definition"}),e.jsx("button",{onClick:O,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(kr,{size:20})})]}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Code *"}),e.jsx("input",{type:"text",value:f.code,onChange:W=>p({...f,code:W.target.value.toUpperCase()}),className:"input w-full",placeholder:"e.g., STERILITY",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Category"}),e.jsxs("select",{value:f.category,onChange:W=>p({...f,category:W.target.value}),className:"input w-full",children:[e.jsx("option",{value:"",children:"Select Category"}),SEe.map(W=>e.jsx("option",{value:W,children:W},W))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Name (English) *"}),e.jsx("input",{type:"text",value:f.nameEn,onChange:W=>p({...f,nameEn:W.target.value}),className:"input w-full",placeholder:"Sterility Test",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Name (Arabic)"}),e.jsx("input",{type:"text",value:f.nameAr,onChange:W=>p({...f,nameAr:W.target.value}),className:"input w-full",dir:"rtl",placeholder:" "})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"label",children:"Description (English)"}),e.jsx("textarea",{value:f.descriptionEn,onChange:W=>p({...f,descriptionEn:W.target.value}),className:"input w-full",rows:2,placeholder:"Detailed test description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Result Type *"}),e.jsx("select",{value:f.resultType,onChange:W=>p({...f,resultType:W.target.value}),className:"input w-full",required:!0,children:GM.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Unit"}),e.jsx("input",{type:"text",value:f.unit,onChange:W=>p({...f,unit:W.target.value}),className:"input w-full",placeholder:"e.g., mCi, pH, %"})]}),f.resultType==="OPTION_LIST"&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"label",children:"Options (comma-separated)"}),e.jsx("input",{type:"text",value:f.optionList,onChange:W=>p({...f,optionList:W.target.value}),className:"input w-full",placeholder:"Clear, Slightly Hazy, Hazy"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"label",children:"Test Method"}),e.jsx("input",{type:"text",value:f.method,onChange:W=>p({...f,method:W.target.value}),className:"input w-full",placeholder:"USP <71> Sterility Testing"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.isActive,onChange:W=>p({...f,isActive:W.target.checked}),className:"form-checkbox"}),e.jsx("span",{children:"Active"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:O,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w.isPending||C.isPending,children:w.isPending||C.isPending?"Saving...":a?"Update Test":"Create Test"})]})]})]})})]})}const NEe=[{value:"PASS_FAIL_ONLY",label:"Pass/Fail Only"},{value:"MIN",label:"Minimum"},{value:"MAX",label:"Maximum"},{value:"RANGE",label:"Range"},{value:"EQUAL",label:"Equal To"},{value:"CUSTOM_TEXT",label:"Custom Text"}];function AEe(){const{productId:t}=hl(),r=Qr(),n=gn(),i=pr(),[a,s]=k.useState(null),[o,l]=k.useState(!1),[u,d]=k.useState([]),[f,p]=k.useState(null),{data:x}=Ve({queryKey:["product",t],queryFn:async()=>{const{data:z}=await xe.get(`/products/${t}`);return z},enabled:!!t}),{data:v=[],isLoading:w}=Ve({queryKey:["product-qc-templates",t],queryFn:async()=>{const{data:z}=await xe.get(`/products/${t}/qc-templates`);return z},enabled:!!t}),{data:C=[]}=Ve({queryKey:["qc-test-definitions-active"],queryFn:async()=>{const{data:z}=await xe.get("/qc/test-definitions");return z.filter(G=>G.isActive)}});k.useEffect(()=>{a&&d(a.templateLines||[])},[a]);const N=ot({mutationFn:async()=>{const{data:z}=await xe.post(`/products/${t}/qc-templates`,{notes:"",lines:[]});return z},onSuccess:z=>{i.invalidateQueries({queryKey:["product-qc-templates",t]}),s(z),d([]),n.success("Template Created","New draft template created")},onError:z=>{n.error("Error",z.response?.data?.error||"Failed to create template")}}),T=ot({mutationFn:async()=>{if(!a)return;const{data:z}=await xe.put(`/products/${t}/qc-templates/${a.id}`,{lines:u.map((G,ne)=>({testDefinitionId:G.testDefinitionId,displayOrder:ne,isRequired:G.isRequired,specRule:G.specRule,criteriaTextOverrideEn:G.criteriaTextOverrideEn,allowManualPassFail:G.allowManualPassFail,attachmentRequired:G.attachmentRequired}))});return z},onSuccess:z=>{i.invalidateQueries({queryKey:["product-qc-templates",t]}),s(z),n.success("Template Saved","Template has been saved")},onError:z=>{n.error("Error",z.response?.data?.error||"Failed to save template")}}),O=ot({mutationFn:async()=>{if(!a)return;const{data:z}=await xe.post(`/products/${t}/qc-templates/${a.id}/activate`);return z},onSuccess:()=>{i.invalidateQueries({queryKey:["product-qc-templates",t]}),n.success("Template Activated","Template is now active and will be used for new batches")},onError:z=>{n.error("Error",z.response?.data?.error||"Failed to activate template")}}),D=ot({mutationFn:async()=>{if(!a)return;const{data:z}=await xe.post(`/products/${t}/qc-templates/${a.id}/retire`);return z},onSuccess:()=>{i.invalidateQueries({queryKey:["product-qc-templates",t]}),n.success("Template Retired","Template has been retired")},onError:z=>{n.error("Error",z.response?.data?.error||"Failed to retire template")}}),M=z=>{if(u.some(Z=>Z.testDefinitionId===z.id)){n.error("Duplicate Test",`"${z.nameEn}" is already added to this template`);return}const ne={testDefinitionId:z.id,testDefinition:z,displayOrder:u.length,isRequired:!0,specRule:{ruleType:"PASS_FAIL_ONLY"},allowManualPassFail:!1,attachmentRequired:!1};d([...u,ne]),l(!1),p(u.length)},Y=z=>{d(u.filter((G,ne)=>ne!==z)),f===z&&p(null)},q=(z,G)=>{d(u.map((ne,Z)=>Z===z?{...ne,...G}:ne))},W=(z,G)=>{if(G==="up"&&z===0||G==="down"&&z===u.length-1)return;const ne=[...u],Z=G==="up"?z-1:z+1;[ne[z],ne[Z]]=[ne[Z],ne[z]],d(ne)},J=z=>{const G=z.specRule;if(!G)return"-";const ne=z.testDefinition?.unit||"";switch(G.ruleType){case"MIN":return`${G.minValue}${ne}`;case"MAX":return`${G.maxValue}${ne}`;case"RANGE":return`${G.minValue}${G.maxValue}${ne}`;case"EQUAL":return`=${G.targetValue}${ne}`;case"PASS_FAIL_ONLY":return"Pass/Fail";case"CUSTOM_TEXT":return G.textCriteriaEn||"-";default:return"-"}};return v.find(z=>z.status==="ACTIVE"),v.filter(z=>z.status==="DRAFT"),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>r("/products"),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(aa,{size:20})}),e.jsx(zc,{title:`QC Template: ${x?.name||"Loading..."}`,subtitle:"Configure quality control tests for this product",icon:e.jsx(sa,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Template Versions"}),e.jsxs("button",{onClick:()=>N.mutate(),className:"btn btn-sm btn-primary flex items-center gap-1",disabled:N.isPending,children:[e.jsx(cn,{size:14}),"New"]})]}),w?e.jsx("div",{className:"text-muted text-center py-4",children:"Loading..."}):v.length===0?e.jsx("div",{className:"text-muted text-center py-4",children:"No templates yet"}):e.jsx("div",{className:"space-y-2",children:v.map(z=>e.jsxs("button",{onClick:()=>s(z),className:`w-full text-left p-3 rounded-lg border transition-colors ${a?.id===z.id?"border-primary bg-primary/10":"border-default hover:bg-hover"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:["Version ",z.version]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${z.status==="ACTIVE"?"bg-green-500/10 text-green-500":z.status==="DRAFT"?"bg-yellow-500/10 text-yellow-500":"bg-gray-500/10 text-gray-500"}`,children:z.status})]}),e.jsxs("div",{className:"text-xs text-muted mt-1",children:[z.templateLines?.length||0," tests",z._count?.batchQcSessions?` | ${z._count.batchQcSessions} batches`:""]})]},z.id))})]})}),e.jsx("div",{className:"col-span-9",children:a?e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Version ",a.version,e.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${a.status==="ACTIVE"?"bg-green-500/10 text-green-500":a.status==="DRAFT"?"bg-yellow-500/10 text-yellow-500":"bg-gray-500/10 text-gray-500"}`,children:a.status})]}),a.effectiveFrom&&e.jsxs("p",{className:"text-sm text-muted",children:["Effective from:"," ",new Date(a.effectiveFrom).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[a.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T.mutate(),className:"btn btn-secondary",disabled:T.isPending,children:"Save Changes"}),e.jsxs("button",{onClick:()=>O.mutate(),className:"btn btn-primary flex items-center gap-1",disabled:u.length===0||O.isPending,children:[e.jsx(yo,{size:14}),"Activate"]})]}),a.status==="ACTIVE"&&e.jsxs("button",{onClick:()=>D.mutate(),className:"btn btn-secondary flex items-center gap-1",disabled:D.isPending,children:[e.jsx(zg,{size:14}),"Retire"]})]})]}),a.status!=="DRAFT"&&e.jsxs("div",{className:"bg-yellow-500/10 text-yellow-700 p-3 rounded-lg mb-4 text-sm",children:["This template is ",a.status.toLowerCase(),". Create a new version to make changes."]}),e.jsx("div",{className:"border border-default rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-hover",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted w-10"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Test"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Result Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Criteria"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-medium text-muted",children:"Required"}),e.jsx("th",{className:"w-20"})]})}),e.jsxs("tbody",{children:[u.map((z,G)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-t border-default",children:[e.jsx("td",{className:"py-3 px-4",children:a.status==="DRAFT"&&e.jsx(iZ,{size:16,className:"text-muted cursor-move"})}),e.jsx("td",{className:"py-3 px-4 font-medium",children:z.testDefinition?.nameEn||z.testDefinitionId}),e.jsx("td",{className:"py-3 px-4 text-muted",children:z.testDefinition?.category||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary",children:z.testDefinition?.resultType})}),e.jsx("td",{className:"py-3 px-4",children:J(z)}),e.jsx("td",{className:"py-3 px-4 text-center",children:z.isRequired?e.jsx(Ai,{size:16,className:"text-green-500 mx-auto"}):e.jsx(kr,{size:16,className:"text-muted mx-auto"})}),e.jsx("td",{className:"py-3 px-4",children:a.status==="DRAFT"&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>W(G,"up"),disabled:G===0,className:"p-1 hover:bg-hover rounded disabled:opacity-30",children:e.jsx(nh,{size:16})}),e.jsx("button",{onClick:()=>W(G,"down"),disabled:G===u.length-1,className:"p-1 hover:bg-hover rounded disabled:opacity-30",children:e.jsx(bo,{size:16})}),e.jsx("button",{onClick:()=>p(f===G?null:G),className:`p-1 hover:bg-hover rounded ${f===G?"bg-primary/10":""}`,children:e.jsx(bo,{size:16,className:f===G?"rotate-180":""})}),e.jsx("button",{onClick:()=>Y(G),className:"p-1 hover:bg-hover rounded text-red-500",children:e.jsx(ra,{size:16})})]})})]},z.testDefinitionId+G),f===G&&a.status==="DRAFT"&&e.jsx("tr",{className:"bg-hover/50",children:e.jsx("td",{colSpan:7,className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Rule Type"}),e.jsx("select",{value:z.specRule?.ruleType||"PASS_FAIL_ONLY",onChange:ne=>q(G,{specRule:{...z.specRule,ruleType:ne.target.value}}),className:"input w-full",children:NEe.map(ne=>e.jsx("option",{value:ne.value,children:ne.label},ne.value))})]}),["MIN","RANGE"].includes(z.specRule?.ruleType||"")&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Min Value"}),e.jsx("input",{type:"number",value:z.specRule?.minValue||"",onChange:ne=>q(G,{specRule:{...z.specRule,ruleType:z.specRule?.ruleType||"MIN",minValue:parseFloat(ne.target.value)}}),className:"input w-full",placeholder:"0"})]}),["MAX","RANGE"].includes(z.specRule?.ruleType||"")&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Max Value"}),e.jsx("input",{type:"number",value:z.specRule?.maxValue||"",onChange:ne=>q(G,{specRule:{...z.specRule,ruleType:z.specRule?.ruleType||"MAX",maxValue:parseFloat(ne.target.value)}}),className:"input w-full",placeholder:"100"})]}),z.specRule?.ruleType==="EQUAL"&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Target Value"}),e.jsx("input",{type:"number",value:z.specRule?.targetValue||"",onChange:ne=>q(G,{specRule:{...z.specRule,ruleType:"EQUAL",targetValue:parseFloat(ne.target.value)}}),className:"input w-full",placeholder:"7.0"})]}),z.specRule?.ruleType==="CUSTOM_TEXT"&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"label",children:"Custom Criteria Text"}),e.jsx("input",{type:"text",value:z.specRule?.textCriteriaEn||"",onChange:ne=>q(G,{specRule:{...z.specRule,ruleType:"CUSTOM_TEXT",textCriteriaEn:ne.target.value}}),className:"input w-full",placeholder:"Clear to slightly opalescent"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.isRequired,onChange:ne=>q(G,{isRequired:ne.target.checked}),className:"form-checkbox"}),"Required"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.attachmentRequired,onChange:ne=>q(G,{attachmentRequired:ne.target.checked}),className:"form-checkbox"}),"Attachment Required"]})]})]})})})]})),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 text-center text-muted",children:'No tests added yet. Click "Add Test" to add QC tests to this template.'})})]})]})}),a.status==="DRAFT"&&e.jsx("div",{className:"mt-4",children:o?e.jsxs("div",{className:"border border-default rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium",children:"Select a Test to Add"}),e.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-hover rounded",children:e.jsx(kr,{size:16})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:C.filter(z=>!u.some(G=>G.testDefinitionId===z.id)).map(z=>e.jsxs("button",{onClick:()=>M(z),className:"text-left p-2 rounded border border-default hover:bg-hover transition-colors",children:[e.jsx("div",{className:"font-medium text-sm",children:z.nameEn}),e.jsxs("div",{className:"text-xs text-muted",children:[z.code," | ",z.resultType]})]},z.id))})]}):e.jsxs("button",{onClick:()=>l(!0),className:"btn btn-secondary flex items-center gap-2",children:[e.jsx(cn,{size:16}),"Add Test"]})})]}):e.jsx("div",{className:"card text-center py-12 text-muted",children:"Select a template version to edit, or create a new one"})})]})]})}const EEe={NOT_STARTED:{color:"gray",icon:Qt,label:"Not Started"},IN_PROGRESS:{color:"yellow",icon:yo,label:"In Progress"},WAITING_REVIEW:{color:"blue",icon:Gi,label:"Awaiting Review"},QC_PASSED:{color:"green",icon:Ut,label:"QC Passed"},QC_FAILED:{color:"red",icon:ci,label:"QC Failed"}};function _Ee(){const{batchId:t}=hl(),r=Qr(),n=gn(),i=pr(),[a,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState(!1),{data:f}=Ve({queryKey:["batch",t],queryFn:async()=>{const{data:G}=await xe.get(`/batches/${t}`);return G},enabled:!!t}),{data:p,isLoading:x,error:v}=Ve({queryKey:["batch-qc-session",t],queryFn:async()=>{const{data:G}=await xe.get(`/batches/${t}/qc-session`);return G},enabled:!!t,retry:!1}),w=ot({mutationFn:async()=>{const{data:G}=await xe.post(`/batches/${t}/qc-session/generate`);return G},onSuccess:()=>{i.invalidateQueries({queryKey:["batch-qc-session",t]}),n.success("Session Generated","QC session created from product template")},onError:G=>{n.error("Error",G.response?.data?.error||"Failed to generate QC session")}}),C=ot({mutationFn:async({resultId:G,data:ne})=>{const{data:Z}=await xe.put(`/batches/${t}/qc-session/results/${G}`,ne);return Z},onSuccess:()=>{i.invalidateQueries({queryKey:["batch-qc-session",t]}),s(null)},onError:G=>{n.error("Error",G.response?.data?.error||"Failed to save result")}}),N=ot({mutationFn:async()=>{const{data:G}=await xe.post(`/batches/${t}/qc-session/submit`);return G},onSuccess:()=>{i.invalidateQueries({queryKey:["batch-qc-session",t]}),n.success("Submitted","QC session submitted for review")},onError:G=>{n.error("Error",G.response?.data?.error||"Failed to submit session")}}),T=ot({mutationFn:async G=>{const{data:ne}=await xe.post(`/batches/${t}/qc-session/review`,{decision:G,notes:o});return ne},onSuccess:()=>{i.invalidateQueries({queryKey:["batch-qc-session",t]}),i.invalidateQueries({queryKey:["batch",t]}),d(!1),n.success("Reviewed","QC session review completed")},onError:G=>{n.error("Error",G.response?.data?.error||"Failed to complete review")}}),O=G=>{const ne=a===G.id,Z=["QC_PASSED","QC_FAILED"].includes(p?.status||"");return!ne||Z?e.jsxs("div",{onClick:()=>!Z&&s(G.id),className:`cursor-pointer p-2 rounded hover:bg-hover min-w-[100px] ${Z?"":"border border-dashed border-default"}`,children:[G.resultType==="PASS_FAIL"&&G.passFailValue&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${G.passFailValue==="PASS"?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:G.passFailValue}),G.resultType==="NUMERIC"&&G.numericValue!==null&&e.jsxs("span",{children:[G.numericValue,G.unit&&e.jsx("span",{className:"text-muted ml-1",children:G.unit})]}),G.resultType==="TEXT"&&G.textValue&&e.jsx("span",{className:"text-sm",children:G.textValue}),!G.numericValue&&!G.passFailValue&&!G.textValue&&e.jsx("span",{className:"text-muted text-sm",children:"Click to enter"})]}):G.resultType==="PASS_FAIL"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C.mutate({resultId:G.id,data:{passFailValue:"PASS"}}),className:"btn btn-sm bg-green-500/10 text-green-500 hover:bg-green-500/20",children:"PASS"}),e.jsx("button",{onClick:()=>C.mutate({resultId:G.id,data:{passFailValue:"FAIL"}}),className:"btn btn-sm bg-red-500/10 text-red-500 hover:bg-red-500/20",children:"FAIL"}),e.jsx("button",{onClick:()=>s(null),className:"btn btn-sm btn-secondary",children:"Cancel"})]}):G.resultType==="NUMERIC"?e.jsxs("form",{onSubmit:ie=>{ie.preventDefault();const ce=ie.target.elements.namedItem("value");C.mutate({resultId:G.id,data:{numericValue:parseFloat(ce.value)}})},className:"flex gap-2",children:[e.jsx("input",{name:"value",type:"number",step:"any",defaultValue:G.numericValue||"",className:"input w-24",autoFocus:!0}),G.unit&&e.jsx("span",{className:"self-center text-muted",children:G.unit}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>s(null),className:"btn btn-sm btn-secondary",children:"Cancel"})]}):G.resultType==="TEXT"?e.jsxs("form",{onSubmit:ie=>{ie.preventDefault();const ce=ie.target.elements.namedItem("value");C.mutate({resultId:G.id,data:{textValue:ce.value}})},className:"flex gap-2",children:[e.jsx("input",{name:"value",type:"text",defaultValue:G.textValue||"",className:"input w-48",autoFocus:!0}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>s(null),className:"btn btn-sm btn-secondary",children:"Cancel"})]}):null},D=G=>{switch(G){case"PASS":return e.jsx(Ai,{size:16,className:"text-green-500"});case"FAIL":return e.jsx(kr,{size:16,className:"text-red-500"});default:return e.jsx(Qt,{size:16,className:"text-muted"})}},M=p?EEe[p.status]:null,Y=M?.icon,q=!p&&!x&&v,W=p?.status==="IN_PROGRESS"&&p.summary.completedTests===p.summary.totalTests,J=p?.status==="WAITING_REVIEW",z=["QC_PASSED","QC_FAILED"].includes(p?.status||"");return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>r(`/batches/${t}`),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(aa,{size:20})}),e.jsx(zc,{title:`QC Testing: ${f?.batchNumber||"Loading..."}`,subtitle:f?.product?.name||"",icon:e.jsx(sa,{size:24})})]}),q?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(sa,{size:48,className:"mx-auto mb-4 text-muted"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No QC Session"}),e.jsx("p",{className:"text-muted mb-6",children:"Generate a QC session from the product's active template to start testing."}),e.jsx("button",{onClick:()=>w.mutate(),className:"btn btn-primary",disabled:w.isPending,children:w.isPending?"Generating...":"Generate QC Session"})]}):x?e.jsx("div",{className:"card text-center py-12 text-muted",children:"Loading QC session..."}):p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-muted mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[Y&&e.jsx(Y,{size:20,className:`text-${M?.color}-500`}),e.jsx("span",{className:`px-2 py-1 text-sm rounded-full bg-${M?.color}-500/10 text-${M?.color}-500`,children:M?.label})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-muted mb-1",children:"Progress"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-hover rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${p.summary.progress}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[p.summary.progress,"%"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-muted mb-1",children:"Tests"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ai,{size:14,className:"text-green-500"}),e.jsx("span",{className:"text-green-500 font-medium",children:p.summary.passedTests})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(kr,{size:14,className:"text-red-500"}),e.jsx("span",{className:"text-red-500 font-medium",children:p.summary.failedTests})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{size:14,className:"text-muted"}),e.jsx("span",{className:"text-muted font-medium",children:p.summary.totalTests-p.summary.completedTests})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-muted mb-1",children:"Actions"}),e.jsxs("div",{className:"flex gap-2",children:[W&&e.jsxs("button",{onClick:()=>N.mutate(),className:"btn btn-primary btn-sm flex items-center gap-1",disabled:N.isPending,children:[e.jsx(Gi,{size:14}),"Submit for Review"]}),J&&e.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary btn-sm flex items-center gap-1",children:[e.jsx(Ut,{size:14}),"Review"]}),z&&p.reviewedByUser&&e.jsxs("span",{className:"text-sm text-muted",children:["Reviewed by ",p.reviewedByUser.firstName," ",p.reviewedByUser.lastName]})]})]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-hover",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted w-12",children:"#"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Test"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Criteria"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Result"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-medium text-muted",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-muted",children:"Notes"})]})}),e.jsx("tbody",{children:p.results.map((G,ne)=>e.jsxs("tr",{className:`border-t border-default ${G.status==="FAIL"?"bg-red-500/5":""}`,children:[e.jsx("td",{className:"py-3 px-4 text-muted",children:ne+1}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("div",{className:"font-medium",children:G.testDefinition?.nameEn}),e.jsxs("div",{className:"text-xs text-muted",children:[G.testDefinition?.code,G.isRequired&&e.jsx("span",{className:"ml-2 text-red-500",children:"*Required"})]})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm bg-hover px-2 py-1 rounded",children:G.criteriaDisplayEn||"-"})}),e.jsx("td",{className:"py-3 px-4",children:O(G)}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[D(G.status),e.jsx("span",{className:`text-xs ${G.status==="PASS"?"text-green-500":G.status==="FAIL"?"text-red-500":"text-muted"}`,children:G.status})]})}),e.jsxs("td",{className:"py-3 px-4",children:[G.failReason&&e.jsxs("div",{className:"flex items-start gap-1 text-red-500 text-sm",children:[e.jsx(sn,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:G.failReason})]}),G.enteredByUser&&e.jsxs("div",{className:"text-xs text-muted mt-1",children:["By ",G.enteredByUser.firstName," ",G.enteredByUser.lastName]}),G.attachments.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary mt-1",children:[e.jsx(ah,{size:12}),G.attachments.length," file(s)"]})]})]},G.id))})]})})})]}):null,u&&e.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:e.jsxs("div",{className:"modal-content max-w-lg",onClick:G=>G.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Review QC Session"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Passed Tests:"}),e.jsx("span",{className:"text-green-500 font-medium",children:p?.summary.passedTests})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Failed Tests:"}),e.jsx("span",{className:"text-red-500 font-medium",children:p?.summary.failedTests})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"label",children:"Review Notes"}),e.jsx("textarea",{value:o,onChange:G=>l(G.target.value),className:"input w-full",rows:3,placeholder:"Add any notes about this review..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>T.mutate("REJECT"),className:"btn flex-1 bg-red-500/10 text-red-500 hover:bg-red-500/20",disabled:T.isPending,children:[e.jsx(kr,{size:16,className:"mr-1"}),"Reject"]}),e.jsxs("button",{onClick:()=>T.mutate("APPROVE"),className:"btn btn-primary flex-1",disabled:T.isPending||(p?.summary.failedTests||0)>0,children:[e.jsx(Ai,{size:16,className:"mr-1"}),"Approve"]})]}),(p?.summary.failedTests||0)>0&&e.jsxs("p",{className:"text-red-500 text-sm mt-3 text-center",children:["Cannot approve: ",p?.summary.failedTests," test(s) failed"]})]})})]})}function TEe({children:t}){const{user:r,isAuthenticated:n,isLoading:i}=Il();return i?e.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:e.jsx("div",{className:"spinner"})}):n?r?.role!=="Customer"?e.jsx(Kf,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Kf,{to:"/login",replace:!0})}function IEe({children:t}){const{user:r,isAuthenticated:n,isLoading:i}=Il();return i?e.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:e.jsx("div",{className:"spinner"})}):n?r?.role!=="Driver"?e.jsx(Kf,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Kf,{to:"/login",replace:!0})}function OEe({children:t}){const{user:r,isAuthenticated:n,isLoading:i}=Il();return i?e.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:e.jsx("div",{className:"spinner"})}):n?r?.role==="Customer"?e.jsx(Kf,{to:"/portal",replace:!0}):r?.role==="Driver"?e.jsx(Kf,{to:"/driver",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Kf,{to:"/login",replace:!0})}function kEe(){const{checkAuth:t,isLoading:r}=Il();return k.useEffect(()=>{t()},[t]),r?e.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:e.jsx("div",{className:"spinner"})}):e.jsx(FX,{children:e.jsxs(Mx,{children:[e.jsx(Vt,{path:"/login",element:e.jsx(xne,{})}),e.jsx(Vt,{path:"/portal/*",element:e.jsx(TEe,{children:e.jsx(gne,{children:e.jsxs(Mx,{children:[e.jsx(Vt,{path:"/",element:e.jsx(aNe,{})}),e.jsx(Vt,{path:"/orders",element:e.jsx(sNe,{})}),e.jsx(Vt,{path:"/orders/new",element:e.jsx(oNe,{})}),e.jsx(Vt,{path:"/orders/:id/journey",element:e.jsx(cNe,{})}),e.jsx(Vt,{path:"/book-capacity",element:e.jsx(gNe,{})}),e.jsx(Vt,{path:"/invoices",element:e.jsx(lNe,{})}),e.jsx(Vt,{path:"/helpdesk",element:e.jsx(vNe,{})}),e.jsx(Vt,{path:"/helpdesk/new",element:e.jsx(wNe,{})}),e.jsx(Vt,{path:"/helpdesk/:id",element:e.jsx(CNe,{})}),e.jsx(Vt,{path:"/notifications",element:e.jsx(ENe,{})}),e.jsx(Vt,{path:"/profile",element:e.jsx(pNe,{})})]})})})}),e.jsx(Vt,{path:"/driver/*",element:e.jsx(IEe,{children:e.jsx(yne,{children:e.jsxs(Mx,{children:[e.jsx(Vt,{path:"/",element:e.jsx(bAe,{})}),e.jsx(Vt,{path:"/shipments",element:e.jsx(jAe,{})}),e.jsx(Vt,{path:"/shipments/:id",element:e.jsx(wAe,{})})]})})})}),e.jsx(Vt,{path:"/*",element:e.jsx(OEe,{children:e.jsx(pne,{children:e.jsxs(Mx,{children:[e.jsx(Vt,{path:"/",element:e.jsx(T2e,{})}),e.jsx(Vt,{path:"/dashboard/qc",element:e.jsx(TNe,{})}),e.jsx(Vt,{path:"/dashboard/qp",element:e.jsx(INe,{})}),e.jsx(Vt,{path:"/dashboard/dispensing",element:e.jsx(ONe,{})}),e.jsx(Vt,{path:"/dashboard/logistics",element:e.jsx(kNe,{})}),e.jsx(Vt,{path:"/customers",element:e.jsx(M2e,{})}),e.jsx(Vt,{path:"/customers/new",element:e.jsx(aP,{})}),e.jsx(Vt,{path:"/customers/:id/edit",element:e.jsx(aP,{})}),e.jsx(Vt,{path:"/products",element:e.jsx(jje,{})}),e.jsx(Vt,{path:"/materials",element:e.jsx(XAe,{})}),e.jsx(Vt,{path:"/materials/:id",element:e.jsx(JAe,{})}),e.jsx(Vt,{path:"/recipes",element:e.jsx(nEe,{})}),e.jsx(Vt,{path:"/suppliers",element:e.jsx(aEe,{})}),e.jsx(Vt,{path:"/suppliers/:id",element:e.jsx(sEe,{})}),e.jsx(Vt,{path:"/purchase-orders",element:e.jsx(oEe,{})}),e.jsx(Vt,{path:"/purchase-orders/:id",element:e.jsx(cEe,{})}),e.jsx(Vt,{path:"/warehouses",element:e.jsx(dEe,{})}),e.jsx(Vt,{path:"/warehouses/:id",element:e.jsx(uEe,{})}),e.jsx(Vt,{path:"/grn",element:e.jsx(hEe,{})}),e.jsx(Vt,{path:"/grn/:id",element:e.jsx(mEe,{})}),e.jsx(Vt,{path:"/inventory",element:e.jsx(pEe,{})}),e.jsx(Vt,{path:"/manufacturing",element:e.jsx(xEe,{})}),e.jsx(Vt,{path:"/oos-investigations",element:e.jsx(bEe,{})}),e.jsx(Vt,{path:"/orders",element:e.jsx(wje,{})}),e.jsx(Vt,{path:"/orders/new",element:e.jsx(lP,{})}),e.jsx(Vt,{path:"/orders/:id",element:e.jsx(lP,{})}),e.jsx(Vt,{path:"/orders/:id/journey",element:e.jsx(eNe,{})}),e.jsx(Vt,{path:"/order-journey-diagram",element:e.jsx(iNe,{})}),e.jsx(Vt,{path:"/planner",element:e.jsx(Cje,{})}),e.jsx(Vt,{path:"/production-schedule",element:e.jsx(_je,{})}),e.jsx(Vt,{path:"/batches",element:e.jsx(U5e,{})}),e.jsx(Vt,{path:"/batches/:id/journey",element:e.jsx(nNe,{})}),e.jsx(Vt,{path:"/qc",element:e.jsx(W5e,{})}),e.jsx(Vt,{path:"/release",element:e.jsx(G5e,{})}),e.jsx(Vt,{path:"/shipments",element:e.jsx(K5e,{})}),e.jsx(Vt,{path:"/shipments/:id",element:e.jsx(mAe,{})}),e.jsx(Vt,{path:"/drivers",element:e.jsx(hAe,{})}),e.jsx(Vt,{path:"/users",element:e.jsx(Q5e,{})}),e.jsx(Vt,{path:"/reports",element:e.jsx(Y5e,{})}),e.jsx(Vt,{path:"/enterprise-reports",element:e.jsx(X5e,{})}),e.jsx(Vt,{path:"/audit",element:e.jsx(J5e,{})}),e.jsx(Vt,{path:"/approvals",element:e.jsx(ewe,{})}),e.jsx(Vt,{path:"/dispensing",element:e.jsx(twe,{})}),e.jsx(Vt,{path:"/availability",element:e.jsx(rwe,{})}),e.jsx(Vt,{path:"/reservations",element:e.jsx(iwe,{})}),e.jsx(Vt,{path:"/contracts",element:e.jsx(swe,{})}),e.jsx(Vt,{path:"/invoices",element:e.jsx(XCe,{})}),e.jsx(Vt,{path:"/payments",element:e.jsx(DNe,{})}),e.jsx(Vt,{path:"/profile",element:e.jsx(vAe,{})}),e.jsx(Vt,{path:"/settings",element:e.jsx(_Ne,{})}),e.jsx(Vt,{path:"/settings/attachments",element:e.jsx(PNe,{})}),e.jsx(Vt,{path:"/settings/notifications",element:e.jsx(wEe,{})}),e.jsx(Vt,{path:"/admin/demo",element:e.jsx(tAe,{})}),e.jsx(Vt,{path:"/admin/languages",element:e.jsx(RNe,{})}),e.jsx(Vt,{path:"/admin/exchange-rates",element:e.jsx(MNe,{})}),e.jsx(Vt,{path:"/admin/localization",element:e.jsx(FNe,{})}),e.jsx(Vt,{path:"/admin/translations",element:e.jsx(qNe,{})}),e.jsx(Vt,{path:"/admin/zatca",element:e.jsx(UNe,{})}),e.jsx(Vt,{path:"/admin/zatca/config",element:e.jsx(WNe,{})}),e.jsx(Vt,{path:"/admin/zatca/onboarding",element:e.jsx(HNe,{})}),e.jsx(Vt,{path:"/admin/notification-channels",element:e.jsx(QNe,{})}),e.jsx(Vt,{path:"/admin/notification-delivery-logs",element:e.jsx(ZNe,{})}),e.jsx(Vt,{path:"/admin/announcements",element:e.jsx(eAe,{})}),e.jsx(Vt,{path:"/admin/announcements/new",element:e.jsx(gM,{})}),e.jsx(Vt,{path:"/admin/announcements/:id/edit",element:e.jsx(gM,{})}),e.jsx(Vt,{path:"/admin/helpdesk",element:e.jsx(aAe,{})}),e.jsx(Vt,{path:"/admin/helpdesk/tasks",element:e.jsx(lAe,{})}),e.jsx(Vt,{path:"/admin/helpdesk/tickets/:id",element:e.jsx(uAe,{})}),e.jsx(Vt,{path:"/admin/qc/test-definitions",element:e.jsx(CEe,{})}),e.jsx(Vt,{path:"/products/:productId/qc-template",element:e.jsx(AEe,{})}),e.jsx(Vt,{path:"/batches/:batchId/qc",element:e.jsx(_Ee,{})}),e.jsx(Vt,{path:"/notifications",element:e.jsx(yAe,{})}),e.jsx(Vt,{path:"/me/notification-preferences",element:e.jsx(JNe,{})}),e.jsx(Vt,{path:"/roles",element:e.jsx(xAe,{})})]})})})})]})})}Zee();const DEe=()=>{const t=localStorage.getItem("theme-storage");if(t)try{const{state:r}=JSON.parse(t),n=r?.theme||"light";if(n==="system"){const i=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.documentElement.setAttribute("data-theme",i)}else document.documentElement.setAttribute("data-theme",n)}catch{document.documentElement.setAttribute("data-theme","light")}};DEe();const PEe=new TG({defaultOptions:{queries:{staleTime:300*1e3,retry:1}}});IV.createRoot(document.getElementById("root")).render(e.jsx(qf.StrictMode,{children:e.jsx(IG,{client:PEe,children:e.jsx(Y$,{children:e.jsx(kEe,{})})})}));export{zi as _,Rx as c,hc as g};
