function Gz(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var wge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mb={exports:{}},jp={};var vA;function Qz(){if(vA)return jp;vA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:e,type:i,key:l,ref:a!==void 0?a:null,props:s}}return jp.Fragment=t,jp.jsx=n,jp.jsxs=n,jp}var xA;function Yz(){return xA||(xA=1,mb.exports=Qz()),mb.exports}var r=Yz(),pb={exports:{}},hr={};var bA;function Zz(){if(bA)return hr;bA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),j=Symbol.iterator;function v(Q){return Q===null||typeof Q!="object"?null:(Q=j&&Q[j]||Q["@@iterator"],typeof Q=="function"?Q:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function _(Q,V,ne){this.props=Q,this.context=V,this.refs=S,this.updater=ne||b}_.prototype.isReactComponent={},_.prototype.setState=function(Q,V){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,V,"setState")},_.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function E(){}E.prototype=_.prototype;function D(Q,V,ne){this.props=Q,this.context=V,this.refs=S,this.updater=ne||b}var W=D.prototype=new E;W.constructor=D,w(W,_.prototype),W.isPureReactComponent=!0;var K=Array.isArray;function B(){}var F={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function I(Q,V,ne){var $=ne.ref;return{$$typeof:e,type:Q,key:V,ref:$!==void 0?$:null,props:ne}}function R(Q,V){return I(Q.type,V,Q.props)}function Y(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function G(Q){var V={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ne){return V[ne]})}var ae=/\/+/g;function se(Q,V){return typeof Q=="object"&&Q!==null&&Q.key!=null?G(""+Q.key):V.toString(36)}function Ne(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(B,B):(Q.status="pending",Q.then(function(V){Q.status==="pending"&&(Q.status="fulfilled",Q.value=V)},function(V){Q.status==="pending"&&(Q.status="rejected",Q.reason=V)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function z(Q,V,ne,$,de){var Z=typeof Q;(Z==="undefined"||Z==="boolean")&&(Q=null);var ge=!1;if(Q===null)ge=!0;else switch(Z){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(Q.$$typeof){case e:case t:ge=!0;break;case p:return ge=Q._init,z(ge(Q._payload),V,ne,$,de)}}if(ge)return de=de(Q),ge=$===""?"."+se(Q,0):$,K(de)?(ne="",ge!=null&&(ne=ge.replace(ae,"$&/")+"/"),z(de,V,ne,"",function(_e){return _e})):de!=null&&(Y(de)&&(de=R(de,ne+(de.key==null||Q&&Q.key===de.key?"":(""+de.key).replace(ae,"$&/")+"/")+ge)),V.push(de)),1;ge=0;var oe=$===""?".":$+":";if(K(Q))for(var X=0;X<Q.length;X++)$=Q[X],Z=oe+se($,X),ge+=z($,V,ne,Z,de);else if(X=v(Q),typeof X=="function")for(Q=X.call(Q),X=0;!($=Q.next()).done;)$=$.value,Z=oe+se($,X++),ge+=z($,V,ne,Z,de);else if(Z==="object"){if(typeof Q.then=="function")return z(Ne(Q),V,ne,$,de);throw V=String(Q),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ge}function ie(Q,V,ne){if(Q==null)return Q;var $=[],de=0;return z(Q,$,"","",function(Z){return V.call(ne,Z,de++)}),$}function q(Q){if(Q._status===-1){var V=Q._result;V=V(),V.then(function(ne){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ne)},function(ne){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ne)}),Q._status===-1&&(Q._status=0,Q._result=V)}if(Q._status===1)return Q._result.default;throw Q._result}var re=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},ue={map:ie,forEach:function(Q,V,ne){ie(Q,function(){V.apply(this,arguments)},ne)},count:function(Q){var V=0;return ie(Q,function(){V++}),V},toArray:function(Q){return ie(Q,function(V){return V})||[]},only:function(Q){if(!Y(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return hr.Activity=g,hr.Children=ue,hr.Component=_,hr.Fragment=n,hr.Profiler=a,hr.PureComponent=D,hr.StrictMode=i,hr.Suspense=h,hr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,hr.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return F.H.useMemoCache(Q)}},hr.cache=function(Q){return function(){return Q.apply(null,arguments)}},hr.cacheSignal=function(){return null},hr.cloneElement=function(Q,V,ne){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var $=w({},Q.props),de=Q.key;if(V!=null)for(Z in V.key!==void 0&&(de=""+V.key),V)!H.call(V,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&V.ref===void 0||($[Z]=V[Z]);var Z=arguments.length-2;if(Z===1)$.children=ne;else if(1<Z){for(var ge=Array(Z),oe=0;oe<Z;oe++)ge[oe]=arguments[oe+2];$.children=ge}return I(Q.type,de,$)},hr.createContext=function(Q){return Q={$$typeof:l,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:s,_context:Q},Q},hr.createElement=function(Q,V,ne){var $,de={},Z=null;if(V!=null)for($ in V.key!==void 0&&(Z=""+V.key),V)H.call(V,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(de[$]=V[$]);var ge=arguments.length-2;if(ge===1)de.children=ne;else if(1<ge){for(var oe=Array(ge),X=0;X<ge;X++)oe[X]=arguments[X+2];de.children=oe}if(Q&&Q.defaultProps)for($ in ge=Q.defaultProps,ge)de[$]===void 0&&(de[$]=ge[$]);return I(Q,Z,de)},hr.createRef=function(){return{current:null}},hr.forwardRef=function(Q){return{$$typeof:d,render:Q}},hr.isValidElement=Y,hr.lazy=function(Q){return{$$typeof:p,_payload:{_status:-1,_result:Q},_init:q}},hr.memo=function(Q,V){return{$$typeof:f,type:Q,compare:V===void 0?null:V}},hr.startTransition=function(Q){var V=F.T,ne={};F.T=ne;try{var $=Q(),de=F.S;de!==null&&de(ne,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(B,re)}catch(Z){re(Z)}finally{V!==null&&ne.types!==null&&(V.types=ne.types),F.T=V}},hr.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},hr.use=function(Q){return F.H.use(Q)},hr.useActionState=function(Q,V,ne){return F.H.useActionState(Q,V,ne)},hr.useCallback=function(Q,V){return F.H.useCallback(Q,V)},hr.useContext=function(Q){return F.H.useContext(Q)},hr.useDebugValue=function(){},hr.useDeferredValue=function(Q,V){return F.H.useDeferredValue(Q,V)},hr.useEffect=function(Q,V){return F.H.useEffect(Q,V)},hr.useEffectEvent=function(Q){return F.H.useEffectEvent(Q)},hr.useId=function(){return F.H.useId()},hr.useImperativeHandle=function(Q,V,ne){return F.H.useImperativeHandle(Q,V,ne)},hr.useInsertionEffect=function(Q,V){return F.H.useInsertionEffect(Q,V)},hr.useLayoutEffect=function(Q,V){return F.H.useLayoutEffect(Q,V)},hr.useMemo=function(Q,V){return F.H.useMemo(Q,V)},hr.useOptimistic=function(Q,V){return F.H.useOptimistic(Q,V)},hr.useReducer=function(Q,V,ne){return F.H.useReducer(Q,V,ne)},hr.useRef=function(Q){return F.H.useRef(Q)},hr.useState=function(Q){return F.H.useState(Q)},hr.useSyncExternalStore=function(Q,V,ne){return F.H.useSyncExternalStore(Q,V,ne)},hr.useTransition=function(){return F.H.useTransition()},hr.version="19.2.3",hr}var jA;function Am(){return jA||(jA=1,pb.exports=Zz()),pb.exports}var P=Am();const rm=Zl(P),Xz=Gz({__proto__:null,default:rm},[P]);var gb={exports:{}},wp={},yb={exports:{}},vb={};var wA;function Jz(){return wA||(wA=1,(function(e){function t(z,ie){var q=z.length;z.push(ie);e:for(;0<q;){var re=q-1>>>1,ue=z[re];if(0<a(ue,ie))z[re]=ie,z[q]=ue,q=re;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ie=z[0],q=z.pop();if(q!==ie){z[0]=q;e:for(var re=0,ue=z.length,Q=ue>>>1;re<Q;){var V=2*(re+1)-1,ne=z[V],$=V+1,de=z[$];if(0>a(ne,q))$<ue&&0>a(de,ne)?(z[re]=de,z[$]=q,re=$):(z[re]=ne,z[V]=q,re=V);else if($<ue&&0>a(de,q))z[re]=de,z[$]=q,re=$;else break e}}return ie}function a(z,ie){var q=z.sortIndex-ie.sortIndex;return q!==0?q:z.id-ie.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var h=[],f=[],p=1,g=null,j=3,v=!1,b=!1,w=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function W(z){for(var ie=n(f);ie!==null;){if(ie.callback===null)i(f);else if(ie.startTime<=z)i(f),ie.sortIndex=ie.expirationTime,t(h,ie);else break;ie=n(f)}}function K(z){if(w=!1,W(z),!b)if(n(h)!==null)b=!0,B||(B=!0,G());else{var ie=n(f);ie!==null&&Ne(K,ie.startTime-z)}}var B=!1,F=-1,H=5,I=-1;function R(){return S?!0:!(e.unstable_now()-I<H)}function Y(){if(S=!1,B){var z=e.unstable_now();I=z;var ie=!0;try{e:{b=!1,w&&(w=!1,E(F),F=-1),v=!0;var q=j;try{t:{for(W(z),g=n(h);g!==null&&!(g.expirationTime>z&&R());){var re=g.callback;if(typeof re=="function"){g.callback=null,j=g.priorityLevel;var ue=re(g.expirationTime<=z);if(z=e.unstable_now(),typeof ue=="function"){g.callback=ue,W(z),ie=!0;break t}g===n(h)&&i(h),W(z)}else i(h);g=n(h)}if(g!==null)ie=!0;else{var Q=n(f);Q!==null&&Ne(K,Q.startTime-z),ie=!1}}break e}finally{g=null,j=q,v=!1}ie=void 0}}finally{ie?G():B=!1}}}var G;if(typeof D=="function")G=function(){D(Y)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,se=ae.port2;ae.port1.onmessage=Y,G=function(){se.postMessage(null)}}else G=function(){_(Y,0)};function Ne(z,ie){F=_(function(){z(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function(z){switch(j){case 1:case 2:case 3:var ie=3;break;default:ie=j}var q=j;j=ie;try{return z()}finally{j=q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(z,ie){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=j;j=z;try{return ie()}finally{j=q}},e.unstable_scheduleCallback=function(z,ie,q){var re=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,z={id:p++,callback:ie,priorityLevel:z,startTime:q,expirationTime:ue,sortIndex:-1},q>re?(z.sortIndex=q,t(f,z),n(h)===null&&z===n(f)&&(w?(E(F),F=-1):w=!0,Ne(K,q-re))):(z.sortIndex=ue,t(h,z),b||v||(b=!0,B||(B=!0,G()))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var ie=j;return function(){var q=j;j=ie;try{return z.apply(this,arguments)}finally{j=q}}}})(vb)),vb}var SA;function eB(){return SA||(SA=1,yb.exports=Jz()),yb.exports}var xb={exports:{}},ks={};var NA;function tB(){if(NA)return ks;NA=1;var e=Am();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(h,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:h,containerInfo:f,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ks.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ks.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(h,f,null,p)},ks.flushSync=function(h){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=p,i.d.f()}},ks.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},ks.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},ks.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,g=d(p,f.crossOrigin),j=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:j,fetchPriority:v}):p==="script"&&i.d.X(h,{crossOrigin:g,integrity:j,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ks.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},ks.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=d(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ks.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=d(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},ks.requestFormReset=function(h){i.d.r(h)},ks.unstable_batchedUpdates=function(h,f){return h(f)},ks.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},ks.useFormStatus=function(){return l.H.useHostTransitionStatus()},ks.version="19.2.3",ks}var _A;function jD(){if(_A)return xb.exports;_A=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xb.exports=tB(),xb.exports}var CA;function rB(){if(CA)return wp;CA=1;var e=eB(),t=Am(),n=jD();function i(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function h(o){if(s(o)!==o)throw Error(i(188))}function f(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(i(188));return c!==o?null:o}for(var m=o,x=c;;){var A=m.return;if(A===null)break;var k=A.alternate;if(k===null){if(x=A.return,x!==null){m=x;continue}break}if(A.child===k.child){for(k=A.child;k;){if(k===m)return h(A),o;if(k===x)return h(A),c;k=k.sibling}throw Error(i(188))}if(m.return!==x.return)m=A,x=k;else{for(var te=!1,pe=A.child;pe;){if(pe===m){te=!0,m=A,x=k;break}if(pe===x){te=!0,x=A,m=k;break}pe=pe.sibling}if(!te){for(pe=k.child;pe;){if(pe===m){te=!0,m=k,x=A;break}if(pe===x){te=!0,x=k,m=A;break}pe=pe.sibling}if(!te)throw Error(i(189))}}if(m.alternate!==x)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:c}function p(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=p(o),c!==null)return c;o=o.sibling}return null}var g=Object.assign,j=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),D=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function G(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var ae=Symbol.for("react.client.reference");function se(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ae?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case K:return"Suspense";case B:return"SuspenseList";case I:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case D:return o.displayName||"Context";case E:return(o._context.displayName||"Context")+".Consumer";case W:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return c=o.displayName||null,c!==null?c:se(o.type)||"Memo";case H:c=o._payload,o=o._init;try{return se(o(c))}catch{}}return null}var Ne=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},re=[],ue=-1;function Q(o){return{current:o}}function V(o){0>ue||(o.current=re[ue],re[ue]=null,ue--)}function ne(o,c){ue++,re[ue]=o.current,o.current=c}var $=Q(null),de=Q(null),Z=Q(null),ge=Q(null);function oe(o,c){switch(ne(Z,c),ne(de,o),ne($,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?qC(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=qC(c),o=UC(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}V($),ne($,o)}function X(){V($),V(de),V(Z)}function _e(o){o.memoizedState!==null&&ne(ge,o);var c=$.current,m=UC(c,o.type);c!==m&&(ne(de,o),ne($,m))}function Ie(o){de.current===o&&(V($),V(de)),ge.current===o&&(V(ge),yp._currentValue=q)}var De,ut;function ht(o){if(De===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);De=c&&c[1]||"",ut=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+De+o+ut}var be=!1;function ct(o,c){if(!o||be)return"";be=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Ve){var We=Ve}Reflect.construct(o,[],nt)}else{try{nt.call()}catch(Ve){We=Ve}o.call(nt.prototype)}}else{try{throw Error()}catch(Ve){We=Ve}(nt=o())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Ve){if(Ve&&We&&typeof Ve.stack=="string")return[Ve.stack,We.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=x.DetermineComponentFrameRoot(),te=k[0],pe=k[1];if(te&&pe){var Ae=te.split(`
`),qe=pe.split(`
`);for(A=x=0;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;for(;A<qe.length&&!qe[A].includes("DetermineComponentFrameRoot");)A++;if(x===Ae.length||A===qe.length)for(x=Ae.length-1,A=qe.length-1;1<=x&&0<=A&&Ae[x]!==qe[A];)A--;for(;1<=x&&0<=A;x--,A--)if(Ae[x]!==qe[A]){if(x!==1||A!==1)do if(x--,A--,0>A||Ae[x]!==qe[A]){var Xe=`
`+Ae[x].replace(" at new "," at ");return o.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",o.displayName)),Xe}while(1<=x&&0<=A);break}}}finally{be=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?ht(m):""}function Gt(o,c){switch(o.tag){case 26:case 27:case 5:return ht(o.type);case 16:return ht("Lazy");case 13:return o.child!==c&&c!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return ct(o.type,!1);case 11:return ct(o.type.render,!1);case 1:return ct(o.type,!0);case 31:return ht("Activity");default:return""}}function Pt(o){try{var c="",m=null;do c+=Gt(o,m),m=o,o=o.return;while(o);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var st=Object.prototype.hasOwnProperty,qt=e.unstable_scheduleCallback,vt=e.unstable_cancelCallback,Ht=e.unstable_shouldYield,Bt=e.unstable_requestPaint,lr=e.unstable_now,Nr=e.unstable_getCurrentPriorityLevel,rr=e.unstable_ImmediatePriority,jr=e.unstable_UserBlockingPriority,dr=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,nr=e.unstable_IdlePriority,kt=e.log,$n=e.unstable_setDisableYieldValue,xr=null,Wt=null;function Xt(o){if(typeof kt=="function"&&$n(o),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(xr,o)}catch{}}var _r=Math.clz32?Math.clz32:Qt,Ot=Math.log,mn=Math.LN2;function Qt(o){return o>>>=0,o===0?32:31-(Ot(o)/mn|0)|0}var Jt=256,en=262144,cr=4194304;function It(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Rr(o,c,m){var x=o.pendingLanes;if(x===0)return 0;var A=0,k=o.suspendedLanes,te=o.pingedLanes;o=o.warmLanes;var pe=x&134217727;return pe!==0?(x=pe&~k,x!==0?A=It(x):(te&=pe,te!==0?A=It(te):m||(m=pe&~o,m!==0&&(A=It(m))))):(pe=x&~k,pe!==0?A=It(pe):te!==0?A=It(te):m||(m=x&~o,m!==0&&(A=It(m)))),A===0?0:c!==0&&c!==A&&(c&k)===0&&(k=A&-A,m=c&-c,k>=m||k===32&&(m&4194048)!==0)?c:A}function Ws(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function ia(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fo(){var o=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),o}function vs(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function zt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function $o(o,c,m,x,A,k){var te=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var pe=o.entanglements,Ae=o.expirationTimes,qe=o.hiddenUpdates;for(m=te&~m;0<m;){var Xe=31-_r(m),nt=1<<Xe;pe[Xe]=0,Ae[Xe]=-1;var We=qe[Xe];if(We!==null)for(qe[Xe]=null,Xe=0;Xe<We.length;Xe++){var Ve=We[Xe];Ve!==null&&(Ve.lane&=-536870913)}m&=~nt}x!==0&&mo(o,x,0),k!==0&&A===0&&o.tag!==0&&(o.suspendedLanes|=k&~(te&~c))}function mo(o,c,m){o.pendingLanes|=c,o.suspendedLanes&=~c;var x=31-_r(c);o.entangledLanes|=c,o.entanglements[x]=o.entanglements[x]|1073741824|m&261930}function Ya(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var x=31-_r(m),A=1<<x;A&c|o[x]&c&&(o[x]|=c),m&=~A}}function Za(o,c){var m=c&-c;return m=(m&42)!==0?1:Ir(m),(m&(o.suspendedLanes|c))!==0?0:m}function Ir(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function gt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function bi(){var o=ie.p;return o!==0?o:(o=window.event,o===void 0?32:uA(o.type))}function Vo(o,c){var m=ie.p;try{return ie.p=o,c()}finally{ie.p=m}}var aa=Math.random().toString(36).slice(2),tn="__reactFiber$"+aa,yn="__reactProps$"+aa,$i="__reactContainer$"+aa,Pi="__reactEvents$"+aa,Xa="__reactListeners$"+aa,Jl="__reactHandles$"+aa,$s="__reactResources$"+aa,Vs="__reactMarker$"+aa;function jl(o){delete o[tn],delete o[yn],delete o[Pi],delete o[Xa],delete o[Jl]}function xs(o){var c=o[tn];if(c)return c;for(var m=o.parentNode;m;){if(c=m[$i]||m[tn]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=QC(o);o!==null;){if(m=o[tn])return m;o=QC(o)}return c}o=m,m=o.parentNode}return null}function Ks(o){if(o=o[tn]||o[$i]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function po(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(i(33))}function go(o){var c=o[$s];return c||(c=o[$s]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Vn(o){o[Vs]=!0}var jd=new Set,Ja={};function Gs(o,c){Qs(o,c),Qs(o+"Capture",c)}function Qs(o,c){for(Ja[o]=c,o=0;o<c.length;o++)jd.add(c[o])}var Ko=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mc={},Lc={};function wl(o){return st.call(Lc,o)?!0:st.call(Mc,o)?!1:Ko.test(o)?Lc[o]=!0:(Mc[o]=!0,!1)}function ir(o,c,m){if(wl(c))if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+m)}}function Hr(o,c,m){if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+m)}}function La(o,c,m,x){if(x===null)o.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(c,m,""+x)}}function Cr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function yo(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function bs(o,c,m){var x=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,k=x.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return A.call(this)},set:function(te){m=""+te,k.call(this,te)}}),Object.defineProperty(o,c,{enumerable:x.enumerable}),{getValue:function(){return m},setValue:function(te){m=""+te},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function er(o){if(!o._valueTracker){var c=yo(o)?"checked":"value";o._valueTracker=bs(o,c,""+o[c])}}function vn(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return o&&(x=yo(o)?o.checked?"true":"false":o.value),o=x,o!==m?(c.setValue(o),!0):!1}function Vi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bn=/[\n"\\]/g;function Wr(o){return o.replace(Bn,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Rc(o,c,m,x,A,k,te,pe){o.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?o.type=te:o.removeAttribute("type"),c!=null?te==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Cr(c)):o.value!==""+Cr(c)&&(o.value=""+Cr(c)):te!=="submit"&&te!=="reset"||o.removeAttribute("value"),c!=null?Ys(o,te,Cr(c)):m!=null?Ys(o,te,Cr(m)):x!=null&&o.removeAttribute("value"),A==null&&k!=null&&(o.defaultChecked=!!k),A!=null&&(o.checked=A&&typeof A!="function"&&typeof A!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?o.name=""+Cr(pe):o.removeAttribute("name")}function ec(o,c,m,x,A,k,te,pe){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(o.type=k),c!=null||m!=null){if(!(k!=="submit"&&k!=="reset"||c!=null)){er(o);return}m=m!=null?""+Cr(m):"",c=c!=null?""+Cr(c):m,pe||c===o.value||(o.value=c),o.defaultValue=c}x=x??A,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=pe?o.checked:!!x,o.defaultChecked=!!x,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(o.name=te),er(o)}function Ys(o,c,m){c==="number"&&Vi(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function kr(o,c,m,x){if(o=o.options,c){c={};for(var A=0;A<m.length;A++)c["$"+m[A]]=!0;for(m=0;m<o.length;m++)A=c.hasOwnProperty("$"+o[m].value),o[m].selected!==A&&(o[m].selected=A),A&&x&&(o[m].defaultSelected=!0)}else{for(m=""+Cr(m),c=null,A=0;A<o.length;A++){if(o[A].value===m){o[A].selected=!0,x&&(o[A].defaultSelected=!0);return}c!==null||o[A].disabled||(c=o[A])}c!==null&&(c.selected=!0)}}function Zs(o,c,m){if(c!=null&&(c=""+Cr(c),c!==o.value&&(o.value=c),m==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=m!=null?""+Cr(m):""}function Go(o,c,m,x){if(c==null){if(x!=null){if(m!=null)throw Error(i(92));if(Ne(x)){if(1<x.length)throw Error(i(93));x=x[0]}m=x}m==null&&(m=""),c=m}m=Cr(c),o.defaultValue=m,x=o.textContent,x===m&&x!==""&&x!==null&&(o.value=x),er(o)}function ga(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var Qo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(o,c,m){var x=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":x?o.setProperty(c,m):typeof m!="number"||m===0||Qo.has(c)?c==="float"?o.cssFloat=m:o[c]=(""+m).trim():o[c]=m+"px"}function Ic(o,c,m){if(c!=null&&typeof c!="object")throw Error(i(62));if(o=o.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var A in c)x=c[A],c.hasOwnProperty(A)&&m[A]!==x&&Sl(o,A,x)}else for(var k in c)c.hasOwnProperty(k)&&Sl(o,k,c[k])}function tc(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(o){return zc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Ra(){}var vo=null;function Yo(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var _l=null,dt=null;function es(o){var c=Ks(o);if(c&&(o=c.stateNode)){var m=o[yn]||null;e:switch(o=c.stateNode,c.type){case"input":if(Rc(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Wr(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==o&&x.form===o.form){var A=x[yn]||null;if(!A)throw Error(i(90));Rc(x,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<m.length;c++)x=m[c],x.form===o.form&&vn(x)}break e;case"textarea":Zs(o,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&kr(o,!!m.multiple,c,!1)}}}var Kr=!1;function wd(o,c,m){if(Kr)return o(c,m);Kr=!0;try{var x=o(c);return x}finally{if(Kr=!1,(_l!==null||dt!==null)&&(yy(),_l&&(c=_l,o=dt,dt=_l=null,es(c),o)))for(c=0;c<o.length;c++)es(o[c])}}function ya(o,c){var m=o.stateNode;if(m===null)return null;var x=m[yn]||null;if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,c,typeof m));return m}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(ji)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){rc=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{rc=!1}var va=null,Xs=null,pn=null;function xo(){if(pn)return pn;var o,c=Xs,m=c.length,x,A="value"in va?va.value:va.textContent,k=A.length;for(o=0;o<m&&c[o]===A[o];o++);var te=m-o;for(x=1;x<=te&&c[m-x]===A[k-x];x++);return pn=A.slice(o,1<x?1-x:void 0)}function rs(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function nc(){return!0}function Bc(){return!1}function wi(o){function c(m,x,A,k,te){this._reactName=m,this._targetInst=A,this.type=x,this.nativeEvent=k,this.target=te,this.currentTarget=null;for(var pe in o)o.hasOwnProperty(pe)&&(m=o[pe],this[pe]=m?m(k):k[pe]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?nc:Bc,this.isPropagationStopped=Bc,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),c}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ws=wi(js),bo=g({},js,{view:0,detail:0}),mr=wi(bo),ic,Si,ns,Cl=g({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ns&&(ns&&o.type==="mousemove"?(ic=o.screenX-ns.screenX,Si=o.screenY-ns.screenY):Si=ic=0,ns=o),ic)},movementY:function(o){return"movementY"in o?o.movementY:Si}}),Sd=wi(Cl),Js=g({},Cl,{dataTransfer:0}),Zo=wi(Js),Nd=g({},bo,{relatedTarget:0}),Xo=wi(Nd),bu=g({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),M=wi(bu),le=g({},js,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),je=wi(le),Ee=g({},js,{data:0}),Oe=wi(Ee),Ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},at={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=jt[o])?!!c[o]:!1}function Yt(){return Nt}var ar=g({},bo,{key:function(o){if(o.key){var c=Ge[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=rs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?at[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yt,charCode:function(o){return o.type==="keypress"?rs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?rs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Dr=wi(ar),On=g({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kn=wi(On),rn=g({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yt}),Ni=wi(rn),Gn=g({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),ki=wi(Gn),Ss=g({},Cl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ki=wi(Ss),Jo=g({},js,{newState:0,oldState:0}),el=wi(Jo),Gi=[9,13,27,32],eo=ji&&"CompositionEvent"in window,Ns=null;ji&&"documentMode"in document&&(Ns=document.documentMode);var ac=ji&&"TextEvent"in window&&!Ns,to=ji&&(!eo||Ns&&8<Ns&&11>=Ns),ai=" ",Al=!1;function El(o,c){switch(o){case"keyup":return Gi.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jo=!1;function xn(o,c){switch(o){case"compositionend":return sc(c);case"keypress":return c.which!==32?null:(Al=!0,ai);case"textInput":return o=c.data,o===ai&&Al?null:o;default:return null}}function Ia(o,c){if(jo)return o==="compositionend"||!eo&&El(o,c)?(o=xo(),pn=Xs=va=null,jo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return to&&c.locale!=="ko"?null:c.data;default:return null}}var Fc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function is(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Fc[o.type]:c==="textarea"}function as(o,c,m,x){_l?dt?dt.push(x):dt=[x]:_l=x,c=Ny(c,"onChange"),0<c.length&&(m=new ws("onChange","change",null,m,x),o.push({event:m,listeners:c}))}var oa=null,tl=null;function rl(o){LC(o,0)}function _s(o){var c=po(o);if(vn(c))return o}function ro(o,c){if(o==="change")return c}var za=!1;if(ji){var Fn;if(ji){var ss="oninput"in document;if(!ss){var wo=document.createElement("div");wo.setAttribute("oninput","return;"),ss=typeof wo.oninput=="function"}Fn=ss}else Fn=!1;za=Fn&&(!document.documentMode||9<document.documentMode)}function no(){oa&&(oa.detachEvent("onpropertychange",qc),tl=oa=null)}function qc(o){if(o.propertyName==="value"&&_s(tl)){var c=[];as(c,tl,o,Yo(o)),wd(rl,c)}}function Ba(o,c,m){o==="focusin"?(no(),oa=c,tl=m,oa.attachEvent("onpropertychange",qc)):o==="focusout"&&no()}function Qn(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return _s(tl)}function nl(o,c){if(o==="click")return _s(c)}function So(o,c){if(o==="input"||o==="change")return _s(c)}function Di(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var si=typeof Object.is=="function"?Object.is:Di;function No(o,c){if(si(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var A=m[x];if(!st.call(c,A)||!si(o[A],c[A]))return!1}return!0}function Tl(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function il(o,c){var m=Tl(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=c&&x>=c)return{node:m,offset:c-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Tl(m)}}function io(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?io(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Cs(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Vi(o.document);c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=Vi(o.document)}return c}function xa(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var _o=ji&&"documentMode"in document&&11>=document.documentMode,ba=null,Co=null,la=null,ja=!1;function $r(o,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ja||ba==null||ba!==Vi(x)||(x=ba,"selectionStart"in x&&xa(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),la&&No(la,x)||(la=x,x=Ny(Co,"onSelect"),0<x.length&&(c=new ws("onSelect","select",null,c,m),o.push({event:c,listeners:x}),c.target=ba)))}function Or(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var gn={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},qn={},Ao={};ji&&(Ao=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function oi(o){if(qn[o])return qn[o];if(!gn[o])return o;var c=gn[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in Ao)return qn[o]=c[m];return o}var Eo=oi("animationend"),_d=oi("animationiteration"),Uc=oi("animationstart"),yf=oi("transitionrun"),lh=oi("transitionstart"),vf=oi("transitioncancel"),oc=oi("transitionend"),ch=new Map,As="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");As.push("scrollEnd");function os(o,c){ch.set(o,c),Gs(c,[o])}var Hc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ls=[],wa=0,Cd=0;function Wc(){for(var o=wa,c=Cd=wa=0;c<o;){var m=ls[c];ls[c++]=null;var x=ls[c];ls[c++]=null;var A=ls[c];ls[c++]=null;var k=ls[c];if(ls[c++]=null,x!==null&&A!==null){var te=x.pending;te===null?A.next=A:(A.next=te.next,te.next=A),x.pending=A}k!==0&&sl(m,A,k)}}function al(o,c,m,x){ls[wa++]=o,ls[wa++]=c,ls[wa++]=m,ls[wa++]=x,Cd|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function ju(o,c,m,x){return al(o,c,m,x),Qi(o)}function Es(o,c){return al(o,null,null,c),Qi(o)}function sl(o,c,m){o.lanes|=m;var x=o.alternate;x!==null&&(x.lanes|=m);for(var A=!1,k=o.return;k!==null;)k.childLanes|=m,x=k.alternate,x!==null&&(x.childLanes|=m),k.tag===22&&(o=k.stateNode,o===null||o._visibility&1||(A=!0)),o=k,k=k.return;return o.tag===3?(k=o.stateNode,A&&c!==null&&(A=31-_r(m),o=k.hiddenUpdates,x=o[A],x===null?o[A]=[c]:x.push(c),c.lane=m|536870912),k):null}function Qi(o){if(50<dp)throw dp=0,z1=null,Error(i(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Oi={};function wu(o,c,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(o,c,m,x){return new wu(o,c,m,x)}function Ad(o){return o=o.prototype,!(!o||!o.isReactComponent)}function cs(o,c){var m=o.alternate;return m===null?(m=Yi(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function $c(o,c){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,c=m.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function lc(o,c,m,x,A,k){var te=0;if(x=o,typeof o=="function")Ad(o)&&(te=1);else if(typeof o=="string")te=Rz(o,m,$.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case I:return o=Yi(31,m,c,A),o.elementType=I,o.lanes=k,o;case w:return Pl(m.children,A,k,c);case S:te=8,A|=24;break;case _:return o=Yi(12,m,c,A|2),o.elementType=_,o.lanes=k,o;case K:return o=Yi(13,m,c,A),o.elementType=K,o.lanes=k,o;case B:return o=Yi(19,m,c,A),o.elementType=B,o.lanes=k,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:te=10;break e;case E:te=9;break e;case W:te=11;break e;case F:te=14;break e;case H:te=16,x=null;break e}te=29,m=Error(i(130,o===null?"null":typeof o,"")),x=null}return c=Yi(te,m,c,A),c.elementType=o,c.type=x,c.lanes=k,c}function Pl(o,c,m,x){return o=Yi(7,o,x,c),o.lanes=m,o}function Vc(o,c,m){return o=Yi(6,o,null,c),o.lanes=m,o}function Ed(o){var c=Yi(18,null,null,0);return c.stateNode=o,c}function Kc(o,c,m){return c=Yi(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var u=new WeakMap;function y(o,c){if(typeof o=="object"&&o!==null){var m=u.get(o);return m!==void 0?m:(c={value:o,source:c,stack:Pt(c)},u.set(o,c),c)}return{value:o,source:c,stack:Pt(c)}}var C=[],O=0,ee=null,fe=0,Ce=[],Me=0,Ue=null,tt=1,mt="";function _t(o,c){C[O++]=fe,C[O++]=ee,ee=o,fe=c}function pr(o,c,m){Ce[Me++]=tt,Ce[Me++]=mt,Ce[Me++]=Ue,Ue=o;var x=tt;o=mt;var A=32-_r(x)-1;x&=~(1<<A),m+=1;var k=32-_r(c)+A;if(30<k){var te=A-A%5;k=(x&(1<<te)-1).toString(32),x>>=te,A-=te,tt=1<<32-_r(c)+A|m<<A|x,mt=k+o}else tt=1<<k|m<<A|x,mt=o}function Zi(o){o.return!==null&&(_t(o,1),pr(o,1,0))}function Yn(o){for(;o===ee;)ee=C[--O],C[O]=null,fe=C[--O],C[O]=null;for(;o===Ue;)Ue=Ce[--Me],Ce[Me]=null,mt=Ce[--Me],Ce[Me]=null,tt=Ce[--Me],Ce[Me]=null}function ds(o,c){Ce[Me++]=tt,Ce[Me++]=mt,Ce[Me++]=Ue,tt=c.id,mt=c.overflow,Ue=o}var Gr=null,Qr=null,Pr=!1,Sa=null,Un=!1,Ts=Error(i(519));function kl(o){var c=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gc(y(c,o)),Ts}function Su(o){var c=o.stateNode,m=o.type,x=o.memoizedProps;switch(c[tn]=o,c[yn]=x,m){case"dialog":Br("cancel",c),Br("close",c);break;case"iframe":case"object":case"embed":Br("load",c);break;case"video":case"audio":for(m=0;m<hp.length;m++)Br(hp[m],c);break;case"source":Br("error",c);break;case"img":case"image":case"link":Br("error",c),Br("load",c);break;case"details":Br("toggle",c);break;case"input":Br("invalid",c),ec(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":Br("invalid",c);break;case"textarea":Br("invalid",c),Go(c,x.value,x.defaultValue,x.children)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||x.suppressHydrationWarning===!0||BC(c.textContent,m)?(x.popover!=null&&(Br("beforetoggle",c),Br("toggle",c)),x.onScroll!=null&&Br("scroll",c),x.onScrollEnd!=null&&Br("scrollend",c),x.onClick!=null&&(c.onclick=Ra),c=!0):c=!1,c||kl(o,!0)}function nn(o){for(Gr=o.return;Gr;)switch(Gr.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Gr=Gr.return}}function li(o){if(o!==Gr)return!1;if(!Pr)return nn(o),Pr=!0,!1;var c=o.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||J1(o.type,o.memoizedProps)),m=!m),m&&Qr&&kl(o),nn(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Qr=GC(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Qr=GC(o)}else c===27?(c=Qr,Iu(o.type)?(o=ib,ib=null,Qr=o):Qr=c):Qr=Gr?Ml(o.stateNode.nextSibling):null;return!0}function cc(){Qr=Gr=null,Pr=!1}function dh(){var o=Sa;return o!==null&&(Lo===null?Lo=o:Lo.push.apply(Lo,o),Sa=null),o}function Gc(o){Sa===null?Sa=[o]:Sa.push(o)}var Qc=Q(null),ol=null,To=null;function Yc(o,c,m){ne(Qc,c._currentValue),c._currentValue=m}function Po(o){o._currentValue=Qc.current,V(Qc)}function Nu(o,c,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===m)break;o=o.return}}function Td(o,c,m,x){var A=o.child;for(A!==null&&(A.return=o);A!==null;){var k=A.dependencies;if(k!==null){var te=A.child;k=k.firstContext;e:for(;k!==null;){var pe=k;k=A;for(var Ae=0;Ae<c.length;Ae++)if(pe.context===c[Ae]){k.lanes|=m,pe=k.alternate,pe!==null&&(pe.lanes|=m),Nu(k.return,m,o),x||(te=null);break e}k=pe.next}}else if(A.tag===18){if(te=A.return,te===null)throw Error(i(341));te.lanes|=m,k=te.alternate,k!==null&&(k.lanes|=m),Nu(te,m,o),te=null}else te=A.child;if(te!==null)te.return=A;else for(te=A;te!==null;){if(te===o){te=null;break}if(A=te.sibling,A!==null){A.return=te.return,te=A;break}te=te.return}A=te}}function Zc(o,c,m,x){o=null;for(var A=c,k=!1;A!==null;){if(!k){if((A.flags&524288)!==0)k=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var te=A.alternate;if(te===null)throw Error(i(387));if(te=te.memoizedProps,te!==null){var pe=A.type;si(A.pendingProps.value,te.value)||(o!==null?o.push(pe):o=[pe])}}else if(A===ge.current){if(te=A.alternate,te===null)throw Error(i(387));te.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(o!==null?o.push(yp):o=[yp])}A=A.return}o!==null&&Td(c,o,m,x),c.flags|=262144}function xf(o){for(o=o.firstContext;o!==null;){if(!si(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Xc(o){ol=o,To=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Na(o){return Xg(ol,o)}function bf(o,c){return ol===null&&Xc(o),Xg(o,c)}function Xg(o,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},To===null){if(o===null)throw Error(i(308));To=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else To=To.next=c;return m}var n1=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(m,x){o.push(x)}};this.abort=function(){c.aborted=!0,o.forEach(function(m){return m()})}},i1=e.unstable_scheduleCallback,a1=e.unstable_NormalPriority,_i={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _u(){return{controller:new n1,data:new Map,refCount:0}}function uh(o){o.refCount--,o.refCount===0&&i1(a1,function(){o.controller.abort()})}var hh=null,jf=0,N=0,T=null;function U(o,c){if(hh===null){var m=hh=[];jf=0,N=W1(),T={status:"pending",value:void 0,then:function(x){m.push(x)}}}return jf++,c.then(J,J),c}function J(){if(--jf===0&&hh!==null){T!==null&&(T.status="fulfilled");var o=hh;hh=null,N=0,T=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function ce(o,c){var m=[],x={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return o.then(function(){x.status="fulfilled",x.value=c;for(var A=0;A<m.length;A++)(0,m[A])(c)},function(A){for(x.status="rejected",x.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),x}var he=z.S;z.S=function(o,c){cC=lr(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&U(o,c),he!==null&&he(o,c)};var me=Q(null);function ye(){var o=me.current;return o!==null?o:Ln.pooledCache}function ve(o,c){c===null?ne(me,me.current):ne(me,c.pool)}function Se(){var o=ye();return o===null?null:{parent:_i._currentValue,pool:o}}var Te=Error(i(460)),Be=Error(i(474)),we=Error(i(542)),ke={then:function(){}};function Re(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ze(o,c,m){switch(m=o[m],m===void 0?o.push(c):m!==c&&(c.then(Ra,Ra),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ot(o),o;default:if(typeof c.status=="string")c.then(Ra,Ra);else{if(o=Ln,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=c,o.status="pending",o.then(function(x){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=x}},function(x){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ot(o),o}throw Qe=c,Te}}function ze(o){try{var c=o._init;return c(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Qe=m,Te):m}}var Qe=null;function Je(){if(Qe===null)throw Error(i(459));var o=Qe;return Qe=null,o}function ot(o){if(o===Te||o===we)throw Error(i(483))}var it=null,At=0;function xt(o){var c=At;return At+=1,it===null&&(it=[]),Ze(it,o,c)}function sr(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function wt(o,c){throw c.$$typeof===j?Error(i(525)):(o=Object.prototype.toString.call(c),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Mr(o){function c(Le,Pe){if(o){var Fe=Le.deletions;Fe===null?(Le.deletions=[Pe],Le.flags|=16):Fe.push(Pe)}}function m(Le,Pe){if(!o)return null;for(;Pe!==null;)c(Le,Pe),Pe=Pe.sibling;return null}function x(Le){for(var Pe=new Map;Le!==null;)Le.key!==null?Pe.set(Le.key,Le):Pe.set(Le.index,Le),Le=Le.sibling;return Pe}function A(Le,Pe){return Le=cs(Le,Pe),Le.index=0,Le.sibling=null,Le}function k(Le,Pe,Fe){return Le.index=Fe,o?(Fe=Le.alternate,Fe!==null?(Fe=Fe.index,Fe<Pe?(Le.flags|=67108866,Pe):Fe):(Le.flags|=67108866,Pe)):(Le.flags|=1048576,Pe)}function te(Le){return o&&Le.alternate===null&&(Le.flags|=67108866),Le}function pe(Le,Pe,Fe,rt){return Pe===null||Pe.tag!==6?(Pe=Vc(Fe,Le.mode,rt),Pe.return=Le,Pe):(Pe=A(Pe,Fe),Pe.return=Le,Pe)}function Ae(Le,Pe,Fe,rt){var Kt=Fe.type;return Kt===w?Xe(Le,Pe,Fe.props.children,rt,Fe.key):Pe!==null&&(Pe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===H&&ze(Kt)===Pe.type)?(Pe=A(Pe,Fe.props),sr(Pe,Fe),Pe.return=Le,Pe):(Pe=lc(Fe.type,Fe.key,Fe.props,null,Le.mode,rt),sr(Pe,Fe),Pe.return=Le,Pe)}function qe(Le,Pe,Fe,rt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Fe.containerInfo||Pe.stateNode.implementation!==Fe.implementation?(Pe=Kc(Fe,Le.mode,rt),Pe.return=Le,Pe):(Pe=A(Pe,Fe.children||[]),Pe.return=Le,Pe)}function Xe(Le,Pe,Fe,rt,Kt){return Pe===null||Pe.tag!==7?(Pe=Pl(Fe,Le.mode,rt,Kt),Pe.return=Le,Pe):(Pe=A(Pe,Fe),Pe.return=Le,Pe)}function nt(Le,Pe,Fe){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Vc(""+Pe,Le.mode,Fe),Pe.return=Le,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case v:return Fe=lc(Pe.type,Pe.key,Pe.props,null,Le.mode,Fe),sr(Fe,Pe),Fe.return=Le,Fe;case b:return Pe=Kc(Pe,Le.mode,Fe),Pe.return=Le,Pe;case H:return Pe=ze(Pe),nt(Le,Pe,Fe)}if(Ne(Pe)||G(Pe))return Pe=Pl(Pe,Le.mode,Fe,null),Pe.return=Le,Pe;if(typeof Pe.then=="function")return nt(Le,xt(Pe),Fe);if(Pe.$$typeof===D)return nt(Le,bf(Le,Pe),Fe);wt(Le,Pe)}return null}function We(Le,Pe,Fe,rt){var Kt=Pe!==null?Pe.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Kt!==null?null:pe(Le,Pe,""+Fe,rt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case v:return Fe.key===Kt?Ae(Le,Pe,Fe,rt):null;case b:return Fe.key===Kt?qe(Le,Pe,Fe,rt):null;case H:return Fe=ze(Fe),We(Le,Pe,Fe,rt)}if(Ne(Fe)||G(Fe))return Kt!==null?null:Xe(Le,Pe,Fe,rt,null);if(typeof Fe.then=="function")return We(Le,Pe,xt(Fe),rt);if(Fe.$$typeof===D)return We(Le,Pe,bf(Le,Fe),rt);wt(Le,Fe)}return null}function Ve(Le,Pe,Fe,rt,Kt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Le=Le.get(Fe)||null,pe(Pe,Le,""+rt,Kt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case v:return Le=Le.get(rt.key===null?Fe:rt.key)||null,Ae(Pe,Le,rt,Kt);case b:return Le=Le.get(rt.key===null?Fe:rt.key)||null,qe(Pe,Le,rt,Kt);case H:return rt=ze(rt),Ve(Le,Pe,Fe,rt,Kt)}if(Ne(rt)||G(rt))return Le=Le.get(Fe)||null,Xe(Pe,Le,rt,Kt,null);if(typeof rt.then=="function")return Ve(Le,Pe,Fe,xt(rt),Kt);if(rt.$$typeof===D)return Ve(Le,Pe,Fe,bf(Pe,rt),Kt);wt(Pe,rt)}return null}function Ct(Le,Pe,Fe,rt){for(var Kt=null,an=null,Mt=Pe,wr=Pe=0,qr=null;Mt!==null&&wr<Fe.length;wr++){Mt.index>wr?(qr=Mt,Mt=null):qr=Mt.sibling;var sn=We(Le,Mt,Fe[wr],rt);if(sn===null){Mt===null&&(Mt=qr);break}o&&Mt&&sn.alternate===null&&c(Le,Mt),Pe=k(sn,Pe,wr),an===null?Kt=sn:an.sibling=sn,an=sn,Mt=qr}if(wr===Fe.length)return m(Le,Mt),Pr&&_t(Le,wr),Kt;if(Mt===null){for(;wr<Fe.length;wr++)Mt=nt(Le,Fe[wr],rt),Mt!==null&&(Pe=k(Mt,Pe,wr),an===null?Kt=Mt:an.sibling=Mt,an=Mt);return Pr&&_t(Le,wr),Kt}for(Mt=x(Mt);wr<Fe.length;wr++)qr=Ve(Mt,Le,wr,Fe[wr],rt),qr!==null&&(o&&qr.alternate!==null&&Mt.delete(qr.key===null?wr:qr.key),Pe=k(qr,Pe,wr),an===null?Kt=qr:an.sibling=qr,an=qr);return o&&Mt.forEach(function(Uu){return c(Le,Uu)}),Pr&&_t(Le,wr),Kt}function tr(Le,Pe,Fe,rt){if(Fe==null)throw Error(i(151));for(var Kt=null,an=null,Mt=Pe,wr=Pe=0,qr=null,sn=Fe.next();Mt!==null&&!sn.done;wr++,sn=Fe.next()){Mt.index>wr?(qr=Mt,Mt=null):qr=Mt.sibling;var Uu=We(Le,Mt,sn.value,rt);if(Uu===null){Mt===null&&(Mt=qr);break}o&&Mt&&Uu.alternate===null&&c(Le,Mt),Pe=k(Uu,Pe,wr),an===null?Kt=Uu:an.sibling=Uu,an=Uu,Mt=qr}if(sn.done)return m(Le,Mt),Pr&&_t(Le,wr),Kt;if(Mt===null){for(;!sn.done;wr++,sn=Fe.next())sn=nt(Le,sn.value,rt),sn!==null&&(Pe=k(sn,Pe,wr),an===null?Kt=sn:an.sibling=sn,an=sn);return Pr&&_t(Le,wr),Kt}for(Mt=x(Mt);!sn.done;wr++,sn=Fe.next())sn=Ve(Mt,Le,wr,sn.value,rt),sn!==null&&(o&&sn.alternate!==null&&Mt.delete(sn.key===null?wr:sn.key),Pe=k(sn,Pe,wr),an===null?Kt=sn:an.sibling=sn,an=sn);return o&&Mt.forEach(function(Kz){return c(Le,Kz)}),Pr&&_t(Le,wr),Kt}function Pn(Le,Pe,Fe,rt){if(typeof Fe=="object"&&Fe!==null&&Fe.type===w&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case v:e:{for(var Kt=Fe.key;Pe!==null;){if(Pe.key===Kt){if(Kt=Fe.type,Kt===w){if(Pe.tag===7){m(Le,Pe.sibling),rt=A(Pe,Fe.props.children),rt.return=Le,Le=rt;break e}}else if(Pe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===H&&ze(Kt)===Pe.type){m(Le,Pe.sibling),rt=A(Pe,Fe.props),sr(rt,Fe),rt.return=Le,Le=rt;break e}m(Le,Pe);break}else c(Le,Pe);Pe=Pe.sibling}Fe.type===w?(rt=Pl(Fe.props.children,Le.mode,rt,Fe.key),rt.return=Le,Le=rt):(rt=lc(Fe.type,Fe.key,Fe.props,null,Le.mode,rt),sr(rt,Fe),rt.return=Le,Le=rt)}return te(Le);case b:e:{for(Kt=Fe.key;Pe!==null;){if(Pe.key===Kt)if(Pe.tag===4&&Pe.stateNode.containerInfo===Fe.containerInfo&&Pe.stateNode.implementation===Fe.implementation){m(Le,Pe.sibling),rt=A(Pe,Fe.children||[]),rt.return=Le,Le=rt;break e}else{m(Le,Pe);break}else c(Le,Pe);Pe=Pe.sibling}rt=Kc(Fe,Le.mode,rt),rt.return=Le,Le=rt}return te(Le);case H:return Fe=ze(Fe),Pn(Le,Pe,Fe,rt)}if(Ne(Fe))return Ct(Le,Pe,Fe,rt);if(G(Fe)){if(Kt=G(Fe),typeof Kt!="function")throw Error(i(150));return Fe=Kt.call(Fe),tr(Le,Pe,Fe,rt)}if(typeof Fe.then=="function")return Pn(Le,Pe,xt(Fe),rt);if(Fe.$$typeof===D)return Pn(Le,Pe,bf(Le,Fe),rt);wt(Le,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,Pe!==null&&Pe.tag===6?(m(Le,Pe.sibling),rt=A(Pe,Fe),rt.return=Le,Le=rt):(m(Le,Pe),rt=Vc(Fe,Le.mode,rt),rt.return=Le,Le=rt),te(Le)):m(Le,Pe)}return function(Le,Pe,Fe,rt){try{At=0;var Kt=Pn(Le,Pe,Fe,rt);return it=null,Kt}catch(Mt){if(Mt===Te||Mt===we)throw Mt;var an=Yi(29,Mt,null,Le.mode);return an.lanes=rt,an.return=Le,an}}}var Mn=Mr(!0),ur=Mr(!1),bt=!1;function pt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zn(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Zt(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function gr(o,c,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(un&2)!==0){var A=x.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),x.pending=c,c=Qi(o),sl(o,null,m),c}return al(o,x,c,m),Qi(o)}function cn(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,Ya(o,m)}}function Xi(o,c){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var A=null,k=null;if(m=m.firstBaseUpdate,m!==null){do{var te={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};k===null?A=k=te:k=k.next=te,m=m.next}while(m!==null);k===null?A=k=c:k=k.next=c}else A=k=c;m={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:k,shared:x.shared,callbacks:x.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}var _a=!1;function An(){if(_a){var o=T;if(o!==null)throw o}}function Mi(o,c,m,x){_a=!1;var A=o.updateQueue;bt=!1;var k=A.firstBaseUpdate,te=A.lastBaseUpdate,pe=A.shared.pending;if(pe!==null){A.shared.pending=null;var Ae=pe,qe=Ae.next;Ae.next=null,te===null?k=qe:te.next=qe,te=Ae;var Xe=o.alternate;Xe!==null&&(Xe=Xe.updateQueue,pe=Xe.lastBaseUpdate,pe!==te&&(pe===null?Xe.firstBaseUpdate=qe:pe.next=qe,Xe.lastBaseUpdate=Ae))}if(k!==null){var nt=A.baseState;te=0,Xe=qe=Ae=null,pe=k;do{var We=pe.lane&-536870913,Ve=We!==pe.lane;if(Ve?(Fr&We)===We:(x&We)===We){We!==0&&We===N&&(_a=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Ct=o,tr=pe;We=c;var Pn=m;switch(tr.tag){case 1:if(Ct=tr.payload,typeof Ct=="function"){nt=Ct.call(Pn,nt,We);break e}nt=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=tr.payload,We=typeof Ct=="function"?Ct.call(Pn,nt,We):Ct,We==null)break e;nt=g({},nt,We);break e;case 2:bt=!0}}We=pe.callback,We!==null&&(o.flags|=64,Ve&&(o.flags|=8192),Ve=A.callbacks,Ve===null?A.callbacks=[We]:Ve.push(We))}else Ve={lane:We,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Xe===null?(qe=Xe=Ve,Ae=nt):Xe=Xe.next=Ve,te|=We;if(pe=pe.next,pe===null){if(pe=A.shared.pending,pe===null)break;Ve=pe,pe=Ve.next,Ve.next=null,A.lastBaseUpdate=Ve,A.shared.pending=null}}while(!0);Xe===null&&(Ae=nt),A.baseState=Ae,A.firstBaseUpdate=qe,A.lastBaseUpdate=Xe,k===null&&(A.shared.lanes=0),Du|=te,o.lanes=te,o.memoizedState=nt}}function Fa(o,c){if(typeof o!="function")throw Error(i(191,o));o.call(c)}function Li(o,c){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Fa(m[o],c)}var Ar=Q(null),Yr=Q(0);function Xn(o,c){o=Bd,ne(Yr,o),ne(Ar,c),Bd=o|c.baseLanes}function Jr(){ne(Yr,Bd),ne(Ar,Ar.current)}function Ji(){Bd=Yr.current,V(Ar),V(Yr)}var Jn=Q(null),Zr=null;function Ci(o){var c=o.alternate;ne(Vr,Vr.current&1),ne(Jn,o),Zr===null&&(c===null||Ar.current!==null||c.memoizedState!==null)&&(Zr=o)}function dn(o){ne(Vr,Vr.current),ne(Jn,o),Zr===null&&(Zr=o)}function Ri(o){o.tag===22?(ne(Vr,Vr.current),ne(Jn,o),Zr===null&&(Zr=o)):Ii()}function Ii(){ne(Vr,Vr.current),ne(Jn,Jn.current)}function bn(o){V(Jn),Zr===o&&(Zr=null),V(Vr)}var Vr=Q(0);function qa(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||rb(m)||nb(m)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ci=0,$t=null,Vt=null,Xr=null,Ps=!1,ko=!1,us=!1,zi=0,Jc=0,ed=null,wf=0;function En(){throw Error(i(321))}function Vm(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!si(o[m],c[m]))return!1;return!0}function Km(o,c,m,x,A,k){return ci=k,$t=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,z.H=o===null||o.memoizedState===null?b_:f1,us=!1,k=m(x,A),us=!1,ko&&(k=dc(c,m,x,A)),Sf(o),k}function Sf(o){z.H=tp;var c=Vt!==null&&Vt.next!==null;if(ci=0,Xr=Vt=$t=null,Ps=!1,Jc=0,ed=null,c)throw Error(i(300));o===null||da||(o=o.dependencies,o!==null&&xf(o)&&(da=!0))}function dc(o,c,m,x){$t=o;var A=0;do{if(ko&&(ed=null),Jc=0,ko=!1,25<=A)throw Error(i(301));if(A+=1,Xr=Vt=null,o.updateQueue!=null){var k=o.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}z.H=j_,k=c(m,x)}while(ko);return k}function s1(){var o=z.H,c=o.useState()[0];return c=typeof c.then=="function"?td(c):c,o=o.useState()[0],(Vt!==null?Vt.memoizedState:null)!==o&&($t.flags|=1024),c}function Gm(){var o=zi!==0;return zi=0,o}function Qm(o,c,m){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m}function Nf(o){if(Ps){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ps=!1}ci=0,Xr=Vt=$t=null,ko=!1,Jc=zi=0,ed=null}function ca(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?$t.memoizedState=Xr=o:Xr=Xr.next=o,Xr}function di(){if(Vt===null){var o=$t.alternate;o=o!==null?o.memoizedState:null}else o=Vt.next;var c=Xr===null?$t.memoizedState:Xr.next;if(c!==null)Xr=c,Vt=o;else{if(o===null)throw $t.alternate===null?Error(i(467)):Error(i(310));Vt=o,o={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Xr===null?$t.memoizedState=Xr=o:Xr=Xr.next=o}return Xr}function fh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function td(o){var c=Jc;return Jc+=1,ed===null&&(ed=[]),o=Ze(ed,o,c),c=$t,(Xr===null?c.memoizedState:Xr.next)===null&&(c=c.alternate,z.H=c===null||c.memoizedState===null?b_:f1),o}function Cu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return td(o);if(o.$$typeof===D)return Na(o)}throw Error(i(438,String(o)))}function Pd(o){var c=null,m=$t.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var x=$t.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=fh(),$t.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(o),x=0;x<o;x++)m[x]=R;return c.index++,m}function Dl(o,c){return typeof c=="function"?c(o):c}function _f(o){var c=di();return Au(c,Vt,o)}function Au(o,c,m){var x=o.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=m;var A=o.baseQueue,k=x.pending;if(k!==null){if(A!==null){var te=A.next;A.next=k.next,k.next=te}c.baseQueue=A=k,x.pending=null}if(k=o.baseState,A===null)o.memoizedState=k;else{c=A.next;var pe=te=null,Ae=null,qe=c,Xe=!1;do{var nt=qe.lane&-536870913;if(nt!==qe.lane?(Fr&nt)===nt:(ci&nt)===nt){var We=qe.revertLane;if(We===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),nt===N&&(Xe=!0);else if((ci&We)===We){qe=qe.next,We===N&&(Xe=!0);continue}else nt={lane:0,revertLane:qe.revertLane,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Ae===null?(pe=Ae=nt,te=k):Ae=Ae.next=nt,$t.lanes|=We,Du|=We;nt=qe.action,us&&m(k,nt),k=qe.hasEagerState?qe.eagerState:m(k,nt)}else We={lane:nt,revertLane:qe.revertLane,gesture:qe.gesture,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Ae===null?(pe=Ae=We,te=k):Ae=Ae.next=We,$t.lanes|=nt,Du|=nt;qe=qe.next}while(qe!==null&&qe!==c);if(Ae===null?te=k:Ae.next=pe,!si(k,o.memoizedState)&&(da=!0,Xe&&(m=T,m!==null)))throw m;o.memoizedState=k,o.baseState=te,o.baseQueue=Ae,x.lastRenderedState=k}return A===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function Cf(o){var c=di(),m=c.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var x=m.dispatch,A=m.pending,k=c.memoizedState;if(A!==null){m.pending=null;var te=A=A.next;do k=o(k,te.action),te=te.next;while(te!==A);si(k,c.memoizedState)||(da=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),m.lastRenderedState=k}return[k,x]}function Af(o,c,m){var x=$t,A=di(),k=Pr;if(k){if(m===void 0)throw Error(i(407));m=m()}else m=c();var te=!si((Vt||A).memoizedState,m);if(te&&(A.memoizedState=m,da=!0),A=A.queue,o1(Zm.bind(null,x,A,o),[o]),A.getSnapshot!==c||te||Xr!==null&&Xr.memoizedState.tag&1){if(x.flags|=2048,Dd(9,{destroy:void 0},Ym.bind(null,x,A,m,c),null),Ln===null)throw Error(i(349));k||(ci&127)!==0||uc(x,c,m)}return m}function uc(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=$t.updateQueue,c===null?(c=fh(),$t.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function Ym(o,c,m,x){c.value=m,c.getSnapshot=x,Jg(c)&&Xm(o)}function Zm(o,c,m){return m(function(){Jg(c)&&Xm(o)})}function Jg(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!si(o,m)}catch{return!0}}function Xm(o){var c=Es(o,2);c!==null&&Ro(c,o,2)}function rd(o){var c=ca();if(typeof o=="function"){var m=o;if(o=m(),us){Xt(!0);try{m()}finally{Xt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:o},c}function ey(o,c,m,x){return o.baseState=m,Au(o,Vt,typeof x=="function"?x:Dl)}function ty(o,c,m,x,A){if(ay(o))throw Error(i(485));if(o=c.action,o!==null){var k={payload:A,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){k.listeners.push(te)}};z.T!==null?m(!0):k.isTransition=!1,x(k),m=c.pending,m===null?(k.next=c.pending=k,ry(c,k)):(k.next=m.next,c.pending=m.next=k)}}function ry(o,c){var m=c.action,x=c.payload,A=o.state;if(c.isTransition){var k=z.T,te={};z.T=te;try{var pe=m(A,x),Ae=z.S;Ae!==null&&Ae(te,pe),Jm(o,c,pe)}catch(qe){kd(o,c,qe)}finally{k!==null&&te.types!==null&&(k.types=te.types),z.T=k}}else try{k=m(A,x),Jm(o,c,k)}catch(qe){kd(o,c,qe)}}function Jm(o,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){ny(o,c,x)},function(x){return kd(o,c,x)}):ny(o,c,m)}function ny(o,c,m){c.status="fulfilled",c.value=m,Ef(c),o.state=m,c=o.pending,c!==null&&(m=c.next,m===c?o.pending=null:(m=m.next,c.next=m,ry(o,m)))}function kd(o,c,m){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=m,Ef(c),c=c.next;while(c!==x)}o.action=null}function Ef(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function mh(o,c){return c}function Ol(o,c){if(Pr){var m=Ln.formState;if(m!==null){e:{var x=$t;if(Pr){if(Qr){t:{for(var A=Qr,k=Un;A.nodeType!==8;){if(!k){A=null;break t}if(A=Ml(A.nextSibling),A===null){A=null;break t}}k=A.data,A=k==="F!"||k==="F"?A:null}if(A){Qr=Ml(A.nextSibling),x=A.data==="F!";break e}}kl(x)}x=!1}x&&(c=m[0])}}return m=ca(),m.memoizedState=m.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:c},m.queue=x,m=y_.bind(null,$t,x),x.dispatch=m,x=rd(!1),k=h1.bind(null,$t,!1,x.queue),x=ca(),A={state:c,dispatch:null,action:o,pending:null},x.queue=A,m=ty.bind(null,$t,A,k,m),A.dispatch=m,x.memoizedState=o,[c,m,!1]}function hc(o){var c=di();return fc(c,Vt,o)}function fc(o,c,m){if(c=Au(o,c,mh)[0],o=_f(Dl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=td(c)}catch(te){throw te===Te?we:te}else x=c;c=di();var A=c.queue,k=A.dispatch;return m!==c.memoizedState&&($t.flags|=2048,Dd(9,{destroy:void 0},Tf.bind(null,A,m),null)),[x,k,o]}function Tf(o,c){o.action=c}function Pf(o){var c=di(),m=Vt;if(m!==null)return fc(c,m,o);di(),c=c.memoizedState,m=di();var x=m.queue.dispatch;return m.memoizedState=o,[c,x,!1]}function Dd(o,c,m,x){return o={tag:o,create:m,deps:x,inst:c,next:null},c=$t.updateQueue,c===null&&(c=fh(),$t.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,c.lastEffect=o),o}function iy(){return di().memoizedState}function Eu(o,c,m,x){var A=ca();$t.flags|=o,A.memoizedState=Dd(1|c,{destroy:void 0},m,x===void 0?null:x)}function Tu(o,c,m,x){var A=di();x=x===void 0?null:x;var k=A.memoizedState.inst;Vt!==null&&x!==null&&Vm(x,Vt.memoizedState.deps)?A.memoizedState=Dd(c,k,m,x):($t.flags|=o,A.memoizedState=Dd(1|c,k,m,x))}function n_(o,c){Eu(8390656,8,o,c)}function o1(o,c){Tu(2048,8,o,c)}function q7(o){$t.flags|=4;var c=$t.updateQueue;if(c===null)c=fh(),$t.updateQueue=c,c.events=[o];else{var m=c.events;m===null?c.events=[o]:m.push(o)}}function i_(o){var c=di().memoizedState;return q7({ref:c,nextImpl:o}),function(){if((un&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}function a_(o,c){return Tu(4,2,o,c)}function s_(o,c){return Tu(4,4,o,c)}function o_(o,c){if(typeof c=="function"){o=o();var m=c(o);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function l_(o,c,m){m=m!=null?m.concat([o]):null,Tu(4,4,o_.bind(null,c,o),m)}function l1(){}function c_(o,c){var m=di();c=c===void 0?null:c;var x=m.memoizedState;return c!==null&&Vm(c,x[1])?x[0]:(m.memoizedState=[o,c],o)}function d_(o,c){var m=di();c=c===void 0?null:c;var x=m.memoizedState;if(c!==null&&Vm(c,x[1]))return x[0];if(x=o(),us){Xt(!0);try{o()}finally{Xt(!1)}}return m.memoizedState=[x,c],x}function c1(o,c,m){return m===void 0||(ci&1073741824)!==0&&(Fr&261930)===0?o.memoizedState=c:(o.memoizedState=m,o=uC(),$t.lanes|=o,Du|=o,m)}function u_(o,c,m,x){return si(m,c)?m:Ar.current!==null?(o=c1(o,m,x),si(o,c)||(da=!0),o):(ci&42)===0||(ci&1073741824)!==0&&(Fr&261930)===0?(da=!0,o.memoizedState=m):(o=uC(),$t.lanes|=o,Du|=o,c)}function h_(o,c,m,x,A){var k=ie.p;ie.p=k!==0&&8>k?k:8;var te=z.T,pe={};z.T=pe,h1(o,!1,c,m);try{var Ae=A(),qe=z.S;if(qe!==null&&qe(pe,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Xe=ce(Ae,x);ep(o,c,Xe,dl(o))}else ep(o,c,x,dl(o))}catch(nt){ep(o,c,{then:function(){},status:"rejected",reason:nt},dl())}finally{ie.p=k,te!==null&&pe.types!==null&&(te.types=pe.types),z.T=te}}function U7(){}function d1(o,c,m,x){if(o.tag!==5)throw Error(i(476));var A=f_(o).queue;h_(o,A,c,q,m===null?U7:function(){return m_(o),m(x)})}function f_(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:q},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:m},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function m_(o){var c=f_(o);c.next===null&&(c=o.alternate.memoizedState),ep(o,c.next.queue,{},dl())}function u1(){return Na(yp)}function p_(){return di().memoizedState}function g_(){return di().memoizedState}function H7(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var m=dl();o=Zt(m);var x=gr(c,o,m);x!==null&&(Ro(x,c,m),cn(x,c,m)),c={cache:_u()},o.payload=c;return}c=c.return}}function W7(o,c,m){var x=dl();m={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ay(o)?v_(c,m):(m=ju(o,c,m,x),m!==null&&(Ro(m,o,x),x_(m,c,x)))}function y_(o,c,m){var x=dl();ep(o,c,m,x)}function ep(o,c,m,x){var A={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(ay(o))v_(c,A);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var te=c.lastRenderedState,pe=k(te,m);if(A.hasEagerState=!0,A.eagerState=pe,si(pe,te))return al(o,c,A,0),Ln===null&&Wc(),!1}catch{}if(m=ju(o,c,A,x),m!==null)return Ro(m,o,x),x_(m,c,x),!0}return!1}function h1(o,c,m,x){if(x={lane:2,revertLane:W1(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},ay(o)){if(c)throw Error(i(479))}else c=ju(o,m,x,2),c!==null&&Ro(c,o,2)}function ay(o){var c=o.alternate;return o===$t||c!==null&&c===$t}function v_(o,c){ko=Ps=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function x_(o,c,m){if((m&4194048)!==0){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,Ya(o,m)}}var tp={readContext:Na,use:Cu,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};tp.useEffectEvent=En;var b_={readContext:Na,use:Cu,useCallback:function(o,c){return ca().memoizedState=[o,c===void 0?null:c],o},useContext:Na,useEffect:n_,useImperativeHandle:function(o,c,m){m=m!=null?m.concat([o]):null,Eu(4194308,4,o_.bind(null,c,o),m)},useLayoutEffect:function(o,c){return Eu(4194308,4,o,c)},useInsertionEffect:function(o,c){Eu(4,2,o,c)},useMemo:function(o,c){var m=ca();c=c===void 0?null:c;var x=o();if(us){Xt(!0);try{o()}finally{Xt(!1)}}return m.memoizedState=[x,c],x},useReducer:function(o,c,m){var x=ca();if(m!==void 0){var A=m(c);if(us){Xt(!0);try{m(c)}finally{Xt(!1)}}}else A=c;return x.memoizedState=x.baseState=A,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:A},x.queue=o,o=o.dispatch=W7.bind(null,$t,o),[x.memoizedState,o]},useRef:function(o){var c=ca();return o={current:o},c.memoizedState=o},useState:function(o){o=rd(o);var c=o.queue,m=y_.bind(null,$t,c);return c.dispatch=m,[o.memoizedState,m]},useDebugValue:l1,useDeferredValue:function(o,c){var m=ca();return c1(m,o,c)},useTransition:function(){var o=rd(!1);return o=h_.bind(null,$t,o.queue,!0,!1),ca().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,m){var x=$t,A=ca();if(Pr){if(m===void 0)throw Error(i(407));m=m()}else{if(m=c(),Ln===null)throw Error(i(349));(Fr&127)!==0||uc(x,c,m)}A.memoizedState=m;var k={value:m,getSnapshot:c};return A.queue=k,n_(Zm.bind(null,x,k,o),[o]),x.flags|=2048,Dd(9,{destroy:void 0},Ym.bind(null,x,k,m,c),null),m},useId:function(){var o=ca(),c=Ln.identifierPrefix;if(Pr){var m=mt,x=tt;m=(x&~(1<<32-_r(x)-1)).toString(32)+m,c="_"+c+"R_"+m,m=zi++,0<m&&(c+="H"+m.toString(32)),c+="_"}else m=wf++,c="_"+c+"r_"+m.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:u1,useFormState:Ol,useActionState:Ol,useOptimistic:function(o){var c=ca();c.memoizedState=c.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=h1.bind(null,$t,!0,m),m.dispatch=c,[o,c]},useMemoCache:Pd,useCacheRefresh:function(){return ca().memoizedState=H7.bind(null,$t)},useEffectEvent:function(o){var c=ca(),m={impl:o};return c.memoizedState=m,function(){if((un&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}},f1={readContext:Na,use:Cu,useCallback:c_,useContext:Na,useEffect:o1,useImperativeHandle:l_,useInsertionEffect:a_,useLayoutEffect:s_,useMemo:d_,useReducer:_f,useRef:iy,useState:function(){return _f(Dl)},useDebugValue:l1,useDeferredValue:function(o,c){var m=di();return u_(m,Vt.memoizedState,o,c)},useTransition:function(){var o=_f(Dl)[0],c=di().memoizedState;return[typeof o=="boolean"?o:td(o),c]},useSyncExternalStore:Af,useId:p_,useHostTransitionStatus:u1,useFormState:hc,useActionState:hc,useOptimistic:function(o,c){var m=di();return ey(m,Vt,o,c)},useMemoCache:Pd,useCacheRefresh:g_};f1.useEffectEvent=i_;var j_={readContext:Na,use:Cu,useCallback:c_,useContext:Na,useEffect:o1,useImperativeHandle:l_,useInsertionEffect:a_,useLayoutEffect:s_,useMemo:d_,useReducer:Cf,useRef:iy,useState:function(){return Cf(Dl)},useDebugValue:l1,useDeferredValue:function(o,c){var m=di();return Vt===null?c1(m,o,c):u_(m,Vt.memoizedState,o,c)},useTransition:function(){var o=Cf(Dl)[0],c=di().memoizedState;return[typeof o=="boolean"?o:td(o),c]},useSyncExternalStore:Af,useId:p_,useHostTransitionStatus:u1,useFormState:Pf,useActionState:Pf,useOptimistic:function(o,c){var m=di();return Vt!==null?ey(m,Vt,o,c):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:Pd,useCacheRefresh:g_};j_.useEffectEvent=i_;function m1(o,c,m,x){c=o.memoizedState,m=m(x,c),m=m==null?c:g({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var p1={enqueueSetState:function(o,c,m){o=o._reactInternals;var x=dl(),A=Zt(x);A.payload=c,m!=null&&(A.callback=m),c=gr(o,A,x),c!==null&&(Ro(c,o,x),cn(c,o,x))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var x=dl(),A=Zt(x);A.tag=1,A.payload=c,m!=null&&(A.callback=m),c=gr(o,A,x),c!==null&&(Ro(c,o,x),cn(c,o,x))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=dl(),x=Zt(m);x.tag=2,c!=null&&(x.callback=c),c=gr(o,x,m),c!==null&&(Ro(c,o,m),cn(c,o,m))}};function w_(o,c,m,x,A,k,te){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,k,te):c.prototype&&c.prototype.isPureReactComponent?!No(m,x)||!No(A,k):!0}function S_(o,c,m,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==o&&p1.enqueueReplaceState(c,c.state,null)}function ph(o,c){var m=c;if("ref"in c){m={};for(var x in c)x!=="ref"&&(m[x]=c[x])}if(o=o.defaultProps){m===c&&(m=g({},m));for(var A in o)m[A]===void 0&&(m[A]=o[A])}return m}function N_(o){Hc(o)}function __(o){console.error(o)}function C_(o){Hc(o)}function sy(o,c){try{var m=o.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function A_(o,c,m){try{var x=o.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function g1(o,c,m){return m=Zt(m),m.tag=3,m.payload={element:null},m.callback=function(){sy(o,c)},m}function E_(o){return o=Zt(o),o.tag=3,o}function T_(o,c,m,x){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var k=x.value;o.payload=function(){return A(k)},o.callback=function(){A_(c,m,x)}}var te=m.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(o.callback=function(){A_(c,m,x),typeof A!="function"&&(Ou===null?Ou=new Set([this]):Ou.add(this));var pe=x.stack;this.componentDidCatch(x.value,{componentStack:pe!==null?pe:""})})}function $7(o,c,m,x,A){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=m.alternate,c!==null&&Zc(c,m,A,!0),m=Jn.current,m!==null){switch(m.tag){case 31:case 13:return Zr===null?vy():m.alternate===null&&Bi===0&&(Bi=3),m.flags&=-257,m.flags|=65536,m.lanes=A,x===ke?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([x]):c.add(x),q1(o,x,A)),!1;case 22:return m.flags|=65536,x===ke?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([x]):m.add(x)),q1(o,x,A)),!1}throw Error(i(435,m.tag))}return q1(o,x,A),vy(),!1}if(Pr)return c=Jn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,x!==Ts&&(o=Error(i(422),{cause:x}),Gc(y(o,m)))):(x!==Ts&&(c=Error(i(423),{cause:x}),Gc(y(c,m))),o=o.current.alternate,o.flags|=65536,A&=-A,o.lanes|=A,x=y(x,m),A=g1(o.stateNode,x,A),Xi(o,A),Bi!==4&&(Bi=2)),!1;var k=Error(i(520),{cause:x});if(k=y(k,m),cp===null?cp=[k]:cp.push(k),Bi!==4&&(Bi=2),c===null)return!0;x=y(x,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,o=A&-A,m.lanes|=o,o=g1(m.stateNode,x,o),Xi(m,o),!1;case 1:if(c=m.type,k=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ou===null||!Ou.has(k))))return m.flags|=65536,A&=-A,m.lanes|=A,A=E_(A),T_(A,o,m,x),Xi(m,A),!1}m=m.return}while(m!==null);return!1}var y1=Error(i(461)),da=!1;function hs(o,c,m,x){c.child=o===null?ur(c,null,m,x):Mn(c,o.child,m,x)}function P_(o,c,m,x,A){m=m.render;var k=c.ref;if("ref"in x){var te={};for(var pe in x)pe!=="ref"&&(te[pe]=x[pe])}else te=x;return Xc(c),x=Km(o,c,m,te,k,A),pe=Gm(),o!==null&&!da?(Qm(o,c,A),Od(o,c,A)):(Pr&&pe&&Zi(c),c.flags|=1,hs(o,c,x,A),c.child)}function k_(o,c,m,x,A){if(o===null){var k=m.type;return typeof k=="function"&&!Ad(k)&&k.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=k,D_(o,c,k,x,A)):(o=lc(m.type,null,x,c,c.mode,A),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,!_1(o,A)){var te=k.memoizedProps;if(m=m.compare,m=m!==null?m:No,m(te,x)&&o.ref===c.ref)return Od(o,c,A)}return c.flags|=1,o=cs(k,x),o.ref=c.ref,o.return=c,c.child=o}function D_(o,c,m,x,A){if(o!==null){var k=o.memoizedProps;if(No(k,x)&&o.ref===c.ref)if(da=!1,c.pendingProps=x=k,_1(o,A))(o.flags&131072)!==0&&(da=!0);else return c.lanes=o.lanes,Od(o,c,A)}return v1(o,c,m,x,A)}function O_(o,c,m,x){var A=x.children,k=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((c.flags&128)!==0){if(k=k!==null?k.baseLanes|m:m,o!==null){for(x=c.child=o.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;x=A&~k}else x=0,c.child=null;return M_(o,c,k,m,x)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&ve(c,k!==null?k.cachePool:null),k!==null?Xn(c,k):Jr(),Ri(c);else return x=c.lanes=536870912,M_(o,c,k!==null?k.baseLanes|m:m,m,x)}else k!==null?(ve(c,k.cachePool),Xn(c,k),Ii(),c.memoizedState=null):(o!==null&&ve(c,null),Jr(),Ii());return hs(o,c,A,m),c.child}function rp(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function M_(o,c,m,x,A){var k=ye();return k=k===null?null:{parent:_i._currentValue,pool:k},c.memoizedState={baseLanes:m,cachePool:k},o!==null&&ve(c,null),Jr(),Ri(c),o!==null&&Zc(o,c,x,!0),c.childLanes=A,null}function oy(o,c){return c=cy({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function L_(o,c,m){return Mn(c,o.child,null,m),o=oy(c,c.pendingProps),o.flags|=2,bn(c),c.memoizedState=null,o}function V7(o,c,m){var x=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(Pr){if(x.mode==="hidden")return o=oy(c,x),c.lanes=536870912,rp(null,o);if(dn(c),(o=Qr)?(o=KC(o,Un),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Ue!==null?{id:tt,overflow:mt}:null,retryLane:536870912,hydrationErrors:null},m=Ed(o),m.return=c,c.child=m,Gr=c,Qr=null)):o=null,o===null)throw kl(c);return c.lanes=536870912,null}return oy(c,x)}var k=o.memoizedState;if(k!==null){var te=k.dehydrated;if(dn(c),A)if(c.flags&256)c.flags&=-257,c=L_(o,c,m);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(i(558));else if(da||Zc(o,c,m,!1),A=(m&o.childLanes)!==0,da||A){if(x=Ln,x!==null&&(te=Za(x,m),te!==0&&te!==k.retryLane))throw k.retryLane=te,Es(o,te),Ro(x,o,te),y1;vy(),c=L_(o,c,m)}else o=k.treeContext,Qr=Ml(te.nextSibling),Gr=c,Pr=!0,Sa=null,Un=!1,o!==null&&ds(c,o),c=oy(c,x),c.flags|=4096;return c}return o=cs(o.child,{mode:x.mode,children:x.children}),o.ref=c.ref,c.child=o,o.return=c,o}function ly(o,c){var m=c.ref;if(m===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(c.flags|=4194816)}}function v1(o,c,m,x,A){return Xc(c),m=Km(o,c,m,x,void 0,A),x=Gm(),o!==null&&!da?(Qm(o,c,A),Od(o,c,A)):(Pr&&x&&Zi(c),c.flags|=1,hs(o,c,m,A),c.child)}function R_(o,c,m,x,A,k){return Xc(c),c.updateQueue=null,m=dc(c,x,m,A),Sf(o),x=Gm(),o!==null&&!da?(Qm(o,c,k),Od(o,c,k)):(Pr&&x&&Zi(c),c.flags|=1,hs(o,c,m,k),c.child)}function I_(o,c,m,x,A){if(Xc(c),c.stateNode===null){var k=Oi,te=m.contextType;typeof te=="object"&&te!==null&&(k=Na(te)),k=new m(x,k),c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=p1,c.stateNode=k,k._reactInternals=c,k=c.stateNode,k.props=x,k.state=c.memoizedState,k.refs={},pt(c),te=m.contextType,k.context=typeof te=="object"&&te!==null?Na(te):Oi,k.state=c.memoizedState,te=m.getDerivedStateFromProps,typeof te=="function"&&(m1(c,m,te,x),k.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(te=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),te!==k.state&&p1.enqueueReplaceState(k,k.state,null),Mi(c,x,k,A),An(),k.state=c.memoizedState),typeof k.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(o===null){k=c.stateNode;var pe=c.memoizedProps,Ae=ph(m,pe);k.props=Ae;var qe=k.context,Xe=m.contextType;te=Oi,typeof Xe=="object"&&Xe!==null&&(te=Na(Xe));var nt=m.getDerivedStateFromProps;Xe=typeof nt=="function"||typeof k.getSnapshotBeforeUpdate=="function",pe=c.pendingProps!==pe,Xe||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(pe||qe!==te)&&S_(c,k,x,te),bt=!1;var We=c.memoizedState;k.state=We,Mi(c,x,k,A),An(),qe=c.memoizedState,pe||We!==qe||bt?(typeof nt=="function"&&(m1(c,m,nt,x),qe=c.memoizedState),(Ae=bt||w_(c,m,Ae,x,We,qe,te))?(Xe||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4194308)):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=qe),k.props=x,k.state=qe,k.context=te,x=Ae):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{k=c.stateNode,Zn(o,c),te=c.memoizedProps,Xe=ph(m,te),k.props=Xe,nt=c.pendingProps,We=k.context,qe=m.contextType,Ae=Oi,typeof qe=="object"&&qe!==null&&(Ae=Na(qe)),pe=m.getDerivedStateFromProps,(qe=typeof pe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(te!==nt||We!==Ae)&&S_(c,k,x,Ae),bt=!1,We=c.memoizedState,k.state=We,Mi(c,x,k,A),An();var Ve=c.memoizedState;te!==nt||We!==Ve||bt||o!==null&&o.dependencies!==null&&xf(o.dependencies)?(typeof pe=="function"&&(m1(c,m,pe,x),Ve=c.memoizedState),(Xe=bt||w_(c,m,Xe,x,We,Ve,Ae)||o!==null&&o.dependencies!==null&&xf(o.dependencies))?(qe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(x,Ve,Ae),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(x,Ve,Ae)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof k.componentDidUpdate!="function"||te===o.memoizedProps&&We===o.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||te===o.memoizedProps&&We===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ve),k.props=x,k.state=Ve,k.context=Ae,x=Xe):(typeof k.componentDidUpdate!="function"||te===o.memoizedProps&&We===o.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||te===o.memoizedProps&&We===o.memoizedState||(c.flags|=1024),x=!1)}return k=x,ly(o,c),x=(c.flags&128)!==0,k||x?(k=c.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:k.render(),c.flags|=1,o!==null&&x?(c.child=Mn(c,o.child,null,A),c.child=Mn(c,null,m,A)):hs(o,c,m,A),c.memoizedState=k.state,o=c.child):o=Od(o,c,A),o}function z_(o,c,m,x){return cc(),c.flags|=256,hs(o,c,m,x),c.child}var x1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b1(o){return{baseLanes:o,cachePool:Se()}}function j1(o,c,m){return o=o!==null?o.childLanes&~m:0,c&&(o|=cl),o}function B_(o,c,m){var x=c.pendingProps,A=!1,k=(c.flags&128)!==0,te;if((te=k)||(te=o!==null&&o.memoizedState===null?!1:(Vr.current&2)!==0),te&&(A=!0,c.flags&=-129),te=(c.flags&32)!==0,c.flags&=-33,o===null){if(Pr){if(A?Ci(c):Ii(),(o=Qr)?(o=KC(o,Un),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Ue!==null?{id:tt,overflow:mt}:null,retryLane:536870912,hydrationErrors:null},m=Ed(o),m.return=c,c.child=m,Gr=c,Qr=null)):o=null,o===null)throw kl(c);return nb(o)?c.lanes=32:c.lanes=536870912,null}var pe=x.children;return x=x.fallback,A?(Ii(),A=c.mode,pe=cy({mode:"hidden",children:pe},A),x=Pl(x,A,m,null),pe.return=c,x.return=c,pe.sibling=x,c.child=pe,x=c.child,x.memoizedState=b1(m),x.childLanes=j1(o,te,m),c.memoizedState=x1,rp(null,x)):(Ci(c),w1(c,pe))}var Ae=o.memoizedState;if(Ae!==null&&(pe=Ae.dehydrated,pe!==null)){if(k)c.flags&256?(Ci(c),c.flags&=-257,c=S1(o,c,m)):c.memoizedState!==null?(Ii(),c.child=o.child,c.flags|=128,c=null):(Ii(),pe=x.fallback,A=c.mode,x=cy({mode:"visible",children:x.children},A),pe=Pl(pe,A,m,null),pe.flags|=2,x.return=c,pe.return=c,x.sibling=pe,c.child=x,Mn(c,o.child,null,m),x=c.child,x.memoizedState=b1(m),x.childLanes=j1(o,te,m),c.memoizedState=x1,c=rp(null,x));else if(Ci(c),nb(pe)){if(te=pe.nextSibling&&pe.nextSibling.dataset,te)var qe=te.dgst;te=qe,x=Error(i(419)),x.stack="",x.digest=te,Gc({value:x,source:null,stack:null}),c=S1(o,c,m)}else if(da||Zc(o,c,m,!1),te=(m&o.childLanes)!==0,da||te){if(te=Ln,te!==null&&(x=Za(te,m),x!==0&&x!==Ae.retryLane))throw Ae.retryLane=x,Es(o,x),Ro(te,o,x),y1;rb(pe)||vy(),c=S1(o,c,m)}else rb(pe)?(c.flags|=192,c.child=o.child,c=null):(o=Ae.treeContext,Qr=Ml(pe.nextSibling),Gr=c,Pr=!0,Sa=null,Un=!1,o!==null&&ds(c,o),c=w1(c,x.children),c.flags|=4096);return c}return A?(Ii(),pe=x.fallback,A=c.mode,Ae=o.child,qe=Ae.sibling,x=cs(Ae,{mode:"hidden",children:x.children}),x.subtreeFlags=Ae.subtreeFlags&65011712,qe!==null?pe=cs(qe,pe):(pe=Pl(pe,A,m,null),pe.flags|=2),pe.return=c,x.return=c,x.sibling=pe,c.child=x,rp(null,x),x=c.child,pe=o.child.memoizedState,pe===null?pe=b1(m):(A=pe.cachePool,A!==null?(Ae=_i._currentValue,A=A.parent!==Ae?{parent:Ae,pool:Ae}:A):A=Se(),pe={baseLanes:pe.baseLanes|m,cachePool:A}),x.memoizedState=pe,x.childLanes=j1(o,te,m),c.memoizedState=x1,rp(o.child,x)):(Ci(c),m=o.child,o=m.sibling,m=cs(m,{mode:"visible",children:x.children}),m.return=c,m.sibling=null,o!==null&&(te=c.deletions,te===null?(c.deletions=[o],c.flags|=16):te.push(o)),c.child=m,c.memoizedState=null,m)}function w1(o,c){return c=cy({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function cy(o,c){return o=Yi(22,o,null,c),o.lanes=0,o}function S1(o,c,m){return Mn(c,o.child,null,m),o=w1(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function F_(o,c,m){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),Nu(o.return,c,m)}function N1(o,c,m,x,A,k){var te=o.memoizedState;te===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:A,treeForkCount:k}:(te.isBackwards=c,te.rendering=null,te.renderingStartTime=0,te.last=x,te.tail=m,te.tailMode=A,te.treeForkCount=k)}function q_(o,c,m){var x=c.pendingProps,A=x.revealOrder,k=x.tail;x=x.children;var te=Vr.current,pe=(te&2)!==0;if(pe?(te=te&1|2,c.flags|=128):te&=1,ne(Vr,te),hs(o,c,x,m),x=Pr?fe:0,!pe&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&F_(o,m,c);else if(o.tag===19)F_(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(A){case"forwards":for(m=c.child,A=null;m!==null;)o=m.alternate,o!==null&&qa(o)===null&&(A=m),m=m.sibling;m=A,m===null?(A=c.child,c.child=null):(A=m.sibling,m.sibling=null),N1(c,!1,A,m,k,x);break;case"backwards":case"unstable_legacy-backwards":for(m=null,A=c.child,c.child=null;A!==null;){if(o=A.alternate,o!==null&&qa(o)===null){c.child=A;break}o=A.sibling,A.sibling=m,m=A,A=o}N1(c,!0,m,null,k,x);break;case"together":N1(c,!1,null,null,void 0,x);break;default:c.memoizedState=null}return c.child}function Od(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),Du|=c.lanes,(m&c.childLanes)===0)if(o!==null){if(Zc(o,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(i(153));if(c.child!==null){for(o=c.child,m=cs(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=cs(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function _1(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&xf(o)))}function K7(o,c,m){switch(c.tag){case 3:oe(c,c.stateNode.containerInfo),Yc(c,_i,o.memoizedState.cache),cc();break;case 27:case 5:_e(c);break;case 4:oe(c,c.stateNode.containerInfo);break;case 10:Yc(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,dn(c),null;break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(Ci(c),c.flags|=128,null):(m&c.child.childLanes)!==0?B_(o,c,m):(Ci(c),o=Od(o,c,m),o!==null?o.sibling:null);Ci(c);break;case 19:var A=(o.flags&128)!==0;if(x=(m&c.childLanes)!==0,x||(Zc(o,c,m,!1),x=(m&c.childLanes)!==0),A){if(x)return q_(o,c,m);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ne(Vr,Vr.current),x)break;return null;case 22:return c.lanes=0,O_(o,c,m,c.pendingProps);case 24:Yc(c,_i,o.memoizedState.cache)}return Od(o,c,m)}function U_(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps)da=!0;else{if(!_1(o,m)&&(c.flags&128)===0)return da=!1,K7(o,c,m);da=(o.flags&131072)!==0}else da=!1,Pr&&(c.flags&1048576)!==0&&pr(c,fe,c.index);switch(c.lanes=0,c.tag){case 16:e:{var x=c.pendingProps;if(o=ze(c.elementType),c.type=o,typeof o=="function")Ad(o)?(x=ph(o,x),c.tag=1,c=I_(null,c,o,x,m)):(c.tag=0,c=v1(null,c,o,x,m));else{if(o!=null){var A=o.$$typeof;if(A===W){c.tag=11,c=P_(null,c,o,x,m);break e}else if(A===F){c.tag=14,c=k_(null,c,o,x,m);break e}}throw c=se(o)||o,Error(i(306,c,""))}}return c;case 0:return v1(o,c,c.type,c.pendingProps,m);case 1:return x=c.type,A=ph(x,c.pendingProps),I_(o,c,x,A,m);case 3:e:{if(oe(c,c.stateNode.containerInfo),o===null)throw Error(i(387));x=c.pendingProps;var k=c.memoizedState;A=k.element,Zn(o,c),Mi(c,x,null,m);var te=c.memoizedState;if(x=te.cache,Yc(c,_i,x),x!==k.cache&&Td(c,[_i],m,!0),An(),x=te.element,k.isDehydrated)if(k={element:x,isDehydrated:!1,cache:te.cache},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){c=z_(o,c,x,m);break e}else if(x!==A){A=y(Error(i(424)),c),Gc(A),c=z_(o,c,x,m);break e}else for(o=c.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,Qr=Ml(o.firstChild),Gr=c,Pr=!0,Sa=null,Un=!0,m=ur(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(cc(),x===A){c=Od(o,c,m);break e}hs(o,c,x,m)}c=c.child}return c;case 26:return ly(o,c),o===null?(m=JC(c.type,null,c.pendingProps,null))?c.memoizedState=m:Pr||(m=c.type,o=c.pendingProps,x=_y(Z.current).createElement(m),x[tn]=c,x[yn]=o,fs(x,m,o),Vn(x),c.stateNode=x):c.memoizedState=JC(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return _e(c),o===null&&Pr&&(x=c.stateNode=YC(c.type,c.pendingProps,Z.current),Gr=c,Un=!0,A=Qr,Iu(c.type)?(ib=A,Qr=Ml(x.firstChild)):Qr=A),hs(o,c,c.pendingProps.children,m),ly(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Pr&&((A=x=Qr)&&(x=Sz(x,c.type,c.pendingProps,Un),x!==null?(c.stateNode=x,Gr=c,Qr=Ml(x.firstChild),Un=!1,A=!0):A=!1),A||kl(c)),_e(c),A=c.type,k=c.pendingProps,te=o!==null?o.memoizedProps:null,x=k.children,J1(A,k)?x=null:te!==null&&J1(A,te)&&(c.flags|=32),c.memoizedState!==null&&(A=Km(o,c,s1,null,null,m),yp._currentValue=A),ly(o,c),hs(o,c,x,m),c.child;case 6:return o===null&&Pr&&((o=m=Qr)&&(m=Nz(m,c.pendingProps,Un),m!==null?(c.stateNode=m,Gr=c,Qr=null,o=!0):o=!1),o||kl(c)),null;case 13:return B_(o,c,m);case 4:return oe(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=Mn(c,null,x,m):hs(o,c,x,m),c.child;case 11:return P_(o,c,c.type,c.pendingProps,m);case 7:return hs(o,c,c.pendingProps,m),c.child;case 8:return hs(o,c,c.pendingProps.children,m),c.child;case 12:return hs(o,c,c.pendingProps.children,m),c.child;case 10:return x=c.pendingProps,Yc(c,c.type,x.value),hs(o,c,x.children,m),c.child;case 9:return A=c.type._context,x=c.pendingProps.children,Xc(c),A=Na(A),x=x(A),c.flags|=1,hs(o,c,x,m),c.child;case 14:return k_(o,c,c.type,c.pendingProps,m);case 15:return D_(o,c,c.type,c.pendingProps,m);case 19:return q_(o,c,m);case 31:return V7(o,c,m);case 22:return O_(o,c,m,c.pendingProps);case 24:return Xc(c),x=Na(_i),o===null?(A=ye(),A===null&&(A=Ln,k=_u(),A.pooledCache=k,k.refCount++,k!==null&&(A.pooledCacheLanes|=m),A=k),c.memoizedState={parent:x,cache:A},pt(c),Yc(c,_i,A)):((o.lanes&m)!==0&&(Zn(o,c),Mi(c,null,null,m),An()),A=o.memoizedState,k=c.memoizedState,A.parent!==x?(A={parent:x,cache:x},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Yc(c,_i,x)):(x=k.cache,Yc(c,_i,x),x!==A.cache&&Td(c,[_i],m,!0))),hs(o,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Md(o){o.flags|=4}function C1(o,c,m,x,A){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(A&335544128)===A)if(o.stateNode.complete)o.flags|=8192;else if(pC())o.flags|=8192;else throw Qe=ke,Be}else o.flags&=-16777217}function H_(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!iA(c))if(pC())o.flags|=8192;else throw Qe=ke,Be}function dy(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?fo():536870912,o.lanes|=c,Mf|=c)}function np(o,c){if(!Pr)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function ei(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(c)for(var A=o.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags&65011712,x|=A.flags&65011712,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=x,o.childLanes=m,c}function G7(o,c,m){var x=c.pendingProps;switch(Yn(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(c),null;case 1:return ei(c),null;case 3:return m=c.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Po(_i),X(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(li(c)?Md(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,dh())),ei(c),null;case 26:var A=c.type,k=c.memoizedState;return o===null?(Md(c),k!==null?(ei(c),H_(c,k)):(ei(c),C1(c,A,null,x,m))):k?k!==o.memoizedState?(Md(c),ei(c),H_(c,k)):(ei(c),c.flags&=-16777217):(o=o.memoizedProps,o!==x&&Md(c),ei(c),C1(c,A,o,x,m)),null;case 27:if(Ie(c),m=Z.current,A=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==x&&Md(c);else{if(!x){if(c.stateNode===null)throw Error(i(166));return ei(c),null}o=$.current,li(c)?Su(c):(o=YC(A,x,m),c.stateNode=o,Md(c))}return ei(c),null;case 5:if(Ie(c),A=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==x&&Md(c);else{if(!x){if(c.stateNode===null)throw Error(i(166));return ei(c),null}if(k=$.current,li(c))Su(c);else{var te=_y(Z.current);switch(k){case 1:k=te.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:k=te.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":k=te.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":k=te.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":k=te.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof x.is=="string"?te.createElement("select",{is:x.is}):te.createElement("select"),x.multiple?k.multiple=!0:x.size&&(k.size=x.size);break;default:k=typeof x.is=="string"?te.createElement(A,{is:x.is}):te.createElement(A)}}k[tn]=c,k[yn]=x;e:for(te=c.child;te!==null;){if(te.tag===5||te.tag===6)k.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===c)break e;for(;te.sibling===null;){if(te.return===null||te.return===c)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}c.stateNode=k;e:switch(fs(k,A,x),A){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Md(c)}}return ei(c),C1(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,m),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==x&&Md(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(i(166));if(o=Z.current,li(c)){if(o=c.stateNode,m=c.memoizedProps,x=null,A=Gr,A!==null)switch(A.tag){case 27:case 5:x=A.memoizedProps}o[tn]=c,o=!!(o.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||BC(o.nodeValue,m)),o||kl(c,!0)}else o=_y(o).createTextNode(x),o[tn]=c,c.stateNode=o}return ei(c),null;case 31:if(m=c.memoizedState,o===null||o.memoizedState!==null){if(x=li(c),m!==null){if(o===null){if(!x)throw Error(i(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[tn]=c}else cc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ei(c),o=!1}else m=dh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return c.flags&256?(bn(c),c):(bn(c),null);if((c.flags&128)!==0)throw Error(i(558))}return ei(c),null;case 13:if(x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(A=li(c),x!==null&&x.dehydrated!==null){if(o===null){if(!A)throw Error(i(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[tn]=c}else cc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ei(c),A=!1}else A=dh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(bn(c),c):(bn(c),null)}return bn(c),(c.flags&128)!==0?(c.lanes=m,c):(m=x!==null,o=o!==null&&o.memoizedState!==null,m&&(x=c.child,A=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(A=x.alternate.memoizedState.cachePool.pool),k=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(k=x.memoizedState.cachePool.pool),k!==A&&(x.flags|=2048)),m!==o&&m&&(c.child.flags|=8192),dy(c,c.updateQueue),ei(c),null);case 4:return X(),o===null&&G1(c.stateNode.containerInfo),ei(c),null;case 10:return Po(c.type),ei(c),null;case 19:if(V(Vr),x=c.memoizedState,x===null)return ei(c),null;if(A=(c.flags&128)!==0,k=x.rendering,k===null)if(A)np(x,!1);else{if(Bi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(k=qa(o),k!==null){for(c.flags|=128,np(x,!1),o=k.updateQueue,c.updateQueue=o,dy(c,o),c.subtreeFlags=0,o=m,m=c.child;m!==null;)$c(m,o),m=m.sibling;return ne(Vr,Vr.current&1|2),Pr&&_t(c,x.treeForkCount),c.child}o=o.sibling}x.tail!==null&&lr()>py&&(c.flags|=128,A=!0,np(x,!1),c.lanes=4194304)}else{if(!A)if(o=qa(k),o!==null){if(c.flags|=128,A=!0,o=o.updateQueue,c.updateQueue=o,dy(c,o),np(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!Pr)return ei(c),null}else 2*lr()-x.renderingStartTime>py&&m!==536870912&&(c.flags|=128,A=!0,np(x,!1),c.lanes=4194304);x.isBackwards?(k.sibling=c.child,c.child=k):(o=x.last,o!==null?o.sibling=k:c.child=k,x.last=k)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=lr(),o.sibling=null,m=Vr.current,ne(Vr,A?m&1|2:m&1),Pr&&_t(c,x.treeForkCount),o):(ei(c),null);case 22:case 23:return bn(c),Ji(),x=c.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(m&536870912)!==0&&(c.flags&128)===0&&(ei(c),c.subtreeFlags&6&&(c.flags|=8192)):ei(c),m=c.updateQueue,m!==null&&dy(c,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==m&&(c.flags|=2048),o!==null&&V(me),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Po(_i),ei(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function Q7(o,c){switch(Yn(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Po(_i),X(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ie(c),null;case 31:if(c.memoizedState!==null){if(bn(c),c.alternate===null)throw Error(i(340));cc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(bn(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(i(340));cc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return V(Vr),null;case 4:return X(),null;case 10:return Po(c.type),null;case 22:case 23:return bn(c),Ji(),o!==null&&V(me),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Po(_i),null;case 25:return null;default:return null}}function W_(o,c){switch(Yn(c),c.tag){case 3:Po(_i),X();break;case 26:case 27:case 5:Ie(c);break;case 4:X();break;case 31:c.memoizedState!==null&&bn(c);break;case 13:bn(c);break;case 19:V(Vr);break;case 10:Po(c.type);break;case 22:case 23:bn(c),Ji(),o!==null&&V(me);break;case 24:Po(_i)}}function ip(o,c){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var A=x.next;m=A;do{if((m.tag&o)===o){x=void 0;var k=m.create,te=m.inst;x=k(),te.destroy=x}m=m.next}while(m!==A)}}catch(pe){wn(c,c.return,pe)}}function Pu(o,c,m){try{var x=c.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var k=A.next;x=k;do{if((x.tag&o)===o){var te=x.inst,pe=te.destroy;if(pe!==void 0){te.destroy=void 0,A=c;var Ae=m,qe=pe;try{qe()}catch(Xe){wn(A,Ae,Xe)}}}x=x.next}while(x!==k)}}catch(Xe){wn(c,c.return,Xe)}}function $_(o){var c=o.updateQueue;if(c!==null){var m=o.stateNode;try{Li(c,m)}catch(x){wn(o,o.return,x)}}}function V_(o,c,m){m.props=ph(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(x){wn(o,c,x)}}function ap(o,c){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof m=="function"?o.refCleanup=m(x):m.current=x}}catch(A){wn(o,c,A)}}function nd(o,c){var m=o.ref,x=o.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(A){wn(o,c,A)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){wn(o,c,A)}else m.current=null}function K_(o){var c=o.type,m=o.memoizedProps,x=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(A){wn(o,o.return,A)}}function A1(o,c,m){try{var x=o.stateNode;yz(x,o.type,m,c),x[yn]=c}catch(A){wn(o,o.return,A)}}function G_(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Iu(o.type)||o.tag===4}function E1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||G_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Iu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function T1(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(o),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Ra));else if(x!==4&&(x===27&&Iu(o.type)&&(m=o.stateNode,c=null),o=o.child,o!==null))for(T1(o,c,m),o=o.sibling;o!==null;)T1(o,c,m),o=o.sibling}function uy(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(x!==4&&(x===27&&Iu(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(uy(o,c,m),o=o.sibling;o!==null;)uy(o,c,m),o=o.sibling}function Q_(o){var c=o.stateNode,m=o.memoizedProps;try{for(var x=o.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);fs(c,x,m),c[tn]=o,c[yn]=m}catch(k){wn(o,o.return,k)}}var Ld=!1,ua=!1,P1=!1,Y_=typeof WeakSet=="function"?WeakSet:Set,Ua=null;function Y7(o,c){if(o=o.containerInfo,Z1=Dy,o=Cs(o),xa(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var A=x.anchorOffset,k=x.focusNode;x=x.focusOffset;try{m.nodeType,k.nodeType}catch{m=null;break e}var te=0,pe=-1,Ae=-1,qe=0,Xe=0,nt=o,We=null;t:for(;;){for(var Ve;nt!==m||A!==0&&nt.nodeType!==3||(pe=te+A),nt!==k||x!==0&&nt.nodeType!==3||(Ae=te+x),nt.nodeType===3&&(te+=nt.nodeValue.length),(Ve=nt.firstChild)!==null;)We=nt,nt=Ve;for(;;){if(nt===o)break t;if(We===m&&++qe===A&&(pe=te),We===k&&++Xe===x&&(Ae=te),(Ve=nt.nextSibling)!==null)break;nt=We,We=nt.parentNode}nt=Ve}m=pe===-1||Ae===-1?null:{start:pe,end:Ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(X1={focusedElem:o,selectionRange:m},Dy=!1,Ua=c;Ua!==null;)if(c=Ua,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ua=o;else for(;Ua!==null;){switch(c=Ua,k=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)A=o[m],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&k!==null){o=void 0,m=c,A=k.memoizedProps,k=k.memoizedState,x=m.stateNode;try{var Ct=ph(m.type,A);o=x.getSnapshotBeforeUpdate(Ct,k),x.__reactInternalSnapshotBeforeUpdate=o}catch(tr){wn(m,m.return,tr)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,m=o.nodeType,m===9)tb(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":tb(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=c.sibling,o!==null){o.return=c.return,Ua=o;break}Ua=c.return}}function Z_(o,c,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:Id(o,m),x&4&&ip(5,m);break;case 1:if(Id(o,m),x&4)if(o=m.stateNode,c===null)try{o.componentDidMount()}catch(te){wn(m,m.return,te)}else{var A=ph(m.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(A,c,o.__reactInternalSnapshotBeforeUpdate)}catch(te){wn(m,m.return,te)}}x&64&&$_(m),x&512&&ap(m,m.return);break;case 3:if(Id(o,m),x&64&&(o=m.updateQueue,o!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{Li(o,c)}catch(te){wn(m,m.return,te)}}break;case 27:c===null&&x&4&&Q_(m);case 26:case 5:Id(o,m),c===null&&x&4&&K_(m),x&512&&ap(m,m.return);break;case 12:Id(o,m);break;case 31:Id(o,m),x&4&&eC(o,m);break;case 13:Id(o,m),x&4&&tC(o,m),x&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=az.bind(null,m),_z(o,m))));break;case 22:if(x=m.memoizedState!==null||Ld,!x){c=c!==null&&c.memoizedState!==null||ua,A=Ld;var k=ua;Ld=x,(ua=c)&&!k?zd(o,m,(m.subtreeFlags&8772)!==0):Id(o,m),Ld=A,ua=k}break;case 30:break;default:Id(o,m)}}function X_(o){var c=o.alternate;c!==null&&(o.alternate=null,X_(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&jl(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ui=null,Do=!1;function Rd(o,c,m){for(m=m.child;m!==null;)J_(o,c,m),m=m.sibling}function J_(o,c,m){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(xr,m)}catch{}switch(m.tag){case 26:ua||nd(m,c),Rd(o,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ua||nd(m,c);var x=ui,A=Do;Iu(m.type)&&(ui=m.stateNode,Do=!1),Rd(o,c,m),mp(m.stateNode),ui=x,Do=A;break;case 5:ua||nd(m,c);case 6:if(x=ui,A=Do,ui=null,Rd(o,c,m),ui=x,Do=A,ui!==null)if(Do)try{(ui.nodeType===9?ui.body:ui.nodeName==="HTML"?ui.ownerDocument.body:ui).removeChild(m.stateNode)}catch(k){wn(m,c,k)}else try{ui.removeChild(m.stateNode)}catch(k){wn(m,c,k)}break;case 18:ui!==null&&(Do?(o=ui,$C(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),Uf(o)):$C(ui,m.stateNode));break;case 4:x=ui,A=Do,ui=m.stateNode.containerInfo,Do=!0,Rd(o,c,m),ui=x,Do=A;break;case 0:case 11:case 14:case 15:Pu(2,m,c),ua||Pu(4,m,c),Rd(o,c,m);break;case 1:ua||(nd(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"&&V_(m,c,x)),Rd(o,c,m);break;case 21:Rd(o,c,m);break;case 22:ua=(x=ua)||m.memoizedState!==null,Rd(o,c,m),ua=x;break;default:Rd(o,c,m)}}function eC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Uf(o)}catch(m){wn(c,c.return,m)}}}function tC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Uf(o)}catch(m){wn(c,c.return,m)}}function Z7(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new Y_),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new Y_),c;default:throw Error(i(435,o.tag))}}function hy(o,c){var m=Z7(o);c.forEach(function(x){if(!m.has(x)){m.add(x);var A=sz.bind(null,o,x);x.then(A,A)}})}function Oo(o,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var A=m[x],k=o,te=c,pe=te;e:for(;pe!==null;){switch(pe.tag){case 27:if(Iu(pe.type)){ui=pe.stateNode,Do=!1;break e}break;case 5:ui=pe.stateNode,Do=!1;break e;case 3:case 4:ui=pe.stateNode.containerInfo,Do=!0;break e}pe=pe.return}if(ui===null)throw Error(i(160));J_(k,te,A),ui=null,Do=!1,k=A.alternate,k!==null&&(k.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)rC(c,o),c=c.sibling}var mc=null;function rC(o,c){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Oo(c,o),Mo(o),x&4&&(Pu(3,o,o.return),ip(3,o),Pu(5,o,o.return));break;case 1:Oo(c,o),Mo(o),x&512&&(ua||m===null||nd(m,m.return)),x&64&&Ld&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var A=mc;if(Oo(c,o),Mo(o),x&512&&(ua||m===null||nd(m,m.return)),x&4){var k=m!==null?m.memoizedState:null;if(x=o.memoizedState,m===null)if(x===null)if(o.stateNode===null){e:{x=o.type,m=o.memoizedProps,A=A.ownerDocument||A;t:switch(x){case"title":k=A.getElementsByTagName("title")[0],(!k||k[Vs]||k[tn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=A.createElement(x),A.head.insertBefore(k,A.querySelector("head > title"))),fs(k,x,m),k[tn]=o,Vn(k),x=k;break e;case"link":var te=rA("link","href",A).get(x+(m.href||""));if(te){for(var pe=0;pe<te.length;pe++)if(k=te[pe],k.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&k.getAttribute("rel")===(m.rel==null?null:m.rel)&&k.getAttribute("title")===(m.title==null?null:m.title)&&k.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){te.splice(pe,1);break t}}k=A.createElement(x),fs(k,x,m),A.head.appendChild(k);break;case"meta":if(te=rA("meta","content",A).get(x+(m.content||""))){for(pe=0;pe<te.length;pe++)if(k=te[pe],k.getAttribute("content")===(m.content==null?null:""+m.content)&&k.getAttribute("name")===(m.name==null?null:m.name)&&k.getAttribute("property")===(m.property==null?null:m.property)&&k.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&k.getAttribute("charset")===(m.charSet==null?null:m.charSet)){te.splice(pe,1);break t}}k=A.createElement(x),fs(k,x,m),A.head.appendChild(k);break;default:throw Error(i(468,x))}k[tn]=o,Vn(k),x=k}o.stateNode=x}else nA(A,o.type,o.stateNode);else o.stateNode=tA(A,x,o.memoizedProps);else k!==x?(k===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):k.count--,x===null?nA(A,o.type,o.stateNode):tA(A,x,o.memoizedProps)):x===null&&o.stateNode!==null&&A1(o,o.memoizedProps,m.memoizedProps)}break;case 27:Oo(c,o),Mo(o),x&512&&(ua||m===null||nd(m,m.return)),m!==null&&x&4&&A1(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Oo(c,o),Mo(o),x&512&&(ua||m===null||nd(m,m.return)),o.flags&32){A=o.stateNode;try{ga(A,"")}catch(Ct){wn(o,o.return,Ct)}}x&4&&o.stateNode!=null&&(A=o.memoizedProps,A1(o,A,m!==null?m.memoizedProps:A)),x&1024&&(P1=!0);break;case 6:if(Oo(c,o),Mo(o),x&4){if(o.stateNode===null)throw Error(i(162));x=o.memoizedProps,m=o.stateNode;try{m.nodeValue=x}catch(Ct){wn(o,o.return,Ct)}}break;case 3:if(Ey=null,A=mc,mc=Cy(c.containerInfo),Oo(c,o),mc=A,Mo(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Uf(c.containerInfo)}catch(Ct){wn(o,o.return,Ct)}P1&&(P1=!1,nC(o));break;case 4:x=mc,mc=Cy(o.stateNode.containerInfo),Oo(c,o),Mo(o),mc=x;break;case 12:Oo(c,o),Mo(o);break;case 31:Oo(c,o),Mo(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,hy(o,x)));break;case 13:Oo(c,o),Mo(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(my=lr()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,hy(o,x)));break;case 22:A=o.memoizedState!==null;var Ae=m!==null&&m.memoizedState!==null,qe=Ld,Xe=ua;if(Ld=qe||A,ua=Xe||Ae,Oo(c,o),ua=Xe,Ld=qe,Mo(o),x&8192)e:for(c=o.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(m===null||Ae||Ld||ua||gh(o)),m=null,c=o;;){if(c.tag===5||c.tag===26){if(m===null){Ae=m=c;try{if(k=Ae.stateNode,A)te=k.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{pe=Ae.stateNode;var nt=Ae.memoizedProps.style,We=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;pe.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(Ct){wn(Ae,Ae.return,Ct)}}}else if(c.tag===6){if(m===null){Ae=c;try{Ae.stateNode.nodeValue=A?"":Ae.memoizedProps}catch(Ct){wn(Ae,Ae.return,Ct)}}}else if(c.tag===18){if(m===null){Ae=c;try{var Ve=Ae.stateNode;A?VC(Ve,!0):VC(Ae.stateNode,!1)}catch(Ct){wn(Ae,Ae.return,Ct)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=o.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,hy(o,m))));break;case 19:Oo(c,o),Mo(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,hy(o,x)));break;case 30:break;case 21:break;default:Oo(c,o),Mo(o)}}function Mo(o){var c=o.flags;if(c&2){try{for(var m,x=o.return;x!==null;){if(G_(x)){m=x;break}x=x.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var A=m.stateNode,k=E1(o);uy(o,k,A);break;case 5:var te=m.stateNode;m.flags&32&&(ga(te,""),m.flags&=-33);var pe=E1(o);uy(o,pe,te);break;case 3:case 4:var Ae=m.stateNode.containerInfo,qe=E1(o);T1(o,qe,Ae);break;default:throw Error(i(161))}}catch(Xe){wn(o,o.return,Xe)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function nC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;nC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Id(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Z_(o,c.alternate,c),c=c.sibling}function gh(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Pu(4,c,c.return),gh(c);break;case 1:nd(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&V_(c,c.return,m),gh(c);break;case 27:mp(c.stateNode);case 26:case 5:nd(c,c.return),gh(c);break;case 22:c.memoizedState===null&&gh(c);break;case 30:gh(c);break;default:gh(c)}o=o.sibling}}function zd(o,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,A=o,k=c,te=k.flags;switch(k.tag){case 0:case 11:case 15:zd(A,k,m),ip(4,k);break;case 1:if(zd(A,k,m),x=k,A=x.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(qe){wn(x,x.return,qe)}if(x=k,A=x.updateQueue,A!==null){var pe=x.stateNode;try{var Ae=A.shared.hiddenCallbacks;if(Ae!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Ae.length;A++)Fa(Ae[A],pe)}catch(qe){wn(x,x.return,qe)}}m&&te&64&&$_(k),ap(k,k.return);break;case 27:Q_(k);case 26:case 5:zd(A,k,m),m&&x===null&&te&4&&K_(k),ap(k,k.return);break;case 12:zd(A,k,m);break;case 31:zd(A,k,m),m&&te&4&&eC(A,k);break;case 13:zd(A,k,m),m&&te&4&&tC(A,k);break;case 22:k.memoizedState===null&&zd(A,k,m),ap(k,k.return);break;case 30:break;default:zd(A,k,m)}c=c.sibling}}function k1(o,c){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&uh(m))}function D1(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&uh(o))}function pc(o,c,m,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)iC(o,c,m,x),c=c.sibling}function iC(o,c,m,x){var A=c.flags;switch(c.tag){case 0:case 11:case 15:pc(o,c,m,x),A&2048&&ip(9,c);break;case 1:pc(o,c,m,x);break;case 3:pc(o,c,m,x),A&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&uh(o)));break;case 12:if(A&2048){pc(o,c,m,x),o=c.stateNode;try{var k=c.memoizedProps,te=k.id,pe=k.onPostCommit;typeof pe=="function"&&pe(te,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Ae){wn(c,c.return,Ae)}}else pc(o,c,m,x);break;case 31:pc(o,c,m,x);break;case 13:pc(o,c,m,x);break;case 23:break;case 22:k=c.stateNode,te=c.alternate,c.memoizedState!==null?k._visibility&2?pc(o,c,m,x):sp(o,c):k._visibility&2?pc(o,c,m,x):(k._visibility|=2,kf(o,c,m,x,(c.subtreeFlags&10256)!==0||!1)),A&2048&&k1(te,c);break;case 24:pc(o,c,m,x),A&2048&&D1(c.alternate,c);break;default:pc(o,c,m,x)}}function kf(o,c,m,x,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var k=o,te=c,pe=m,Ae=x,qe=te.flags;switch(te.tag){case 0:case 11:case 15:kf(k,te,pe,Ae,A),ip(8,te);break;case 23:break;case 22:var Xe=te.stateNode;te.memoizedState!==null?Xe._visibility&2?kf(k,te,pe,Ae,A):sp(k,te):(Xe._visibility|=2,kf(k,te,pe,Ae,A)),A&&qe&2048&&k1(te.alternate,te);break;case 24:kf(k,te,pe,Ae,A),A&&qe&2048&&D1(te.alternate,te);break;default:kf(k,te,pe,Ae,A)}c=c.sibling}}function sp(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=o,x=c,A=x.flags;switch(x.tag){case 22:sp(m,x),A&2048&&k1(x.alternate,x);break;case 24:sp(m,x),A&2048&&D1(x.alternate,x);break;default:sp(m,x)}c=c.sibling}}var op=8192;function Df(o,c,m){if(o.subtreeFlags&op)for(o=o.child;o!==null;)aC(o,c,m),o=o.sibling}function aC(o,c,m){switch(o.tag){case 26:Df(o,c,m),o.flags&op&&o.memoizedState!==null&&Iz(m,mc,o.memoizedState,o.memoizedProps);break;case 5:Df(o,c,m);break;case 3:case 4:var x=mc;mc=Cy(o.stateNode.containerInfo),Df(o,c,m),mc=x;break;case 22:o.memoizedState===null&&(x=o.alternate,x!==null&&x.memoizedState!==null?(x=op,op=16777216,Df(o,c,m),op=x):Df(o,c,m));break;default:Df(o,c,m)}}function sC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function lp(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];Ua=x,lC(x,o)}sC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)oC(o),o=o.sibling}function oC(o){switch(o.tag){case 0:case 11:case 15:lp(o),o.flags&2048&&Pu(9,o,o.return);break;case 3:lp(o);break;case 12:lp(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,fy(o)):lp(o);break;default:lp(o)}}function fy(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];Ua=x,lC(x,o)}sC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Pu(8,c,c.return),fy(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,fy(c));break;default:fy(c)}o=o.sibling}}function lC(o,c){for(;Ua!==null;){var m=Ua;switch(m.tag){case 0:case 11:case 15:Pu(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:uh(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,Ua=x;else e:for(m=o;Ua!==null;){x=Ua;var A=x.sibling,k=x.return;if(X_(x),x===m){Ua=null;break e}if(A!==null){A.return=k,Ua=A;break e}Ua=k}}}var X7={getCacheForType:function(o){var c=Na(_i),m=c.data.get(o);return m===void 0&&(m=o(),c.data.set(o,m)),m},cacheSignal:function(){return Na(_i).controller.signal}},J7=typeof WeakMap=="function"?WeakMap:Map,un=0,Ln=null,zr=null,Fr=0,jn=0,ll=null,ku=!1,Of=!1,O1=!1,Bd=0,Bi=0,Du=0,yh=0,M1=0,cl=0,Mf=0,cp=null,Lo=null,L1=!1,my=0,cC=0,py=1/0,gy=null,Ou=null,Ca=0,Mu=null,Lf=null,Fd=0,R1=0,I1=null,dC=null,dp=0,z1=null;function dl(){return(un&2)!==0&&Fr!==0?Fr&-Fr:z.T!==null?W1():bi()}function uC(){if(cl===0)if((Fr&536870912)===0||Pr){var o=en;en<<=1,(en&3932160)===0&&(en=262144),cl=o}else cl=536870912;return o=Jn.current,o!==null&&(o.flags|=32),cl}function Ro(o,c,m){(o===Ln&&(jn===2||jn===9)||o.cancelPendingCommit!==null)&&(Rf(o,0),Lu(o,Fr,cl,!1)),zt(o,m),((un&2)===0||o!==Ln)&&(o===Ln&&((un&2)===0&&(yh|=m),Bi===4&&Lu(o,Fr,cl,!1)),id(o))}function hC(o,c,m){if((un&6)!==0)throw Error(i(327));var x=!m&&(c&127)===0&&(c&o.expiredLanes)===0||Ws(o,c),A=x?rz(o,c):F1(o,c,!0),k=x;do{if(A===0){Of&&!x&&Lu(o,c,0,!1);break}else{if(m=o.current.alternate,k&&!ez(m)){A=F1(o,c,!1),k=!1;continue}if(A===2){if(k=c,o.errorRecoveryDisabledLanes&k)var te=0;else te=o.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){c=te;e:{var pe=o;A=cp;var Ae=pe.current.memoizedState.isDehydrated;if(Ae&&(Rf(pe,te).flags|=256),te=F1(pe,te,!1),te!==2){if(O1&&!Ae){pe.errorRecoveryDisabledLanes|=k,yh|=k,A=4;break e}k=Lo,Lo=A,k!==null&&(Lo===null?Lo=k:Lo.push.apply(Lo,k))}A=te}if(k=!1,A!==2)continue}}if(A===1){Rf(o,0),Lu(o,c,0,!0);break}e:{switch(x=o,k=A,k){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Lu(x,c,cl,!ku);break e;case 2:Lo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(A=my+300-lr(),10<A)){if(Lu(x,c,cl,!ku),Rr(x,0,!0)!==0)break e;Fd=c,x.timeoutHandle=HC(fC.bind(null,x,m,Lo,gy,L1,c,cl,yh,Mf,ku,k,"Throttled",-0,0),A);break e}fC(x,m,Lo,gy,L1,c,cl,yh,Mf,ku,k,null,-0,0)}}break}while(!0);id(o)}function fC(o,c,m,x,A,k,te,pe,Ae,qe,Xe,nt,We,Ve){if(o.timeoutHandle=-1,nt=c.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ra},aC(c,k,nt);var Ct=(k&62914560)===k?my-lr():(k&4194048)===k?cC-lr():0;if(Ct=zz(nt,Ct),Ct!==null){Fd=k,o.cancelPendingCommit=Ct(jC.bind(null,o,c,k,m,x,A,te,pe,Ae,Xe,nt,null,We,Ve)),Lu(o,k,te,!qe);return}}jC(o,c,k,m,x,A,te,pe,Ae)}function ez(o){for(var c=o;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var A=m[x],k=A.getSnapshot;A=A.value;try{if(!si(k(),A))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Lu(o,c,m,x){c&=~M1,c&=~yh,o.suspendedLanes|=c,o.pingedLanes&=~c,x&&(o.warmLanes|=c),x=o.expirationTimes;for(var A=c;0<A;){var k=31-_r(A),te=1<<k;x[k]=-1,A&=~te}m!==0&&mo(o,m,c)}function yy(){return(un&6)===0?(up(0),!1):!0}function B1(){if(zr!==null){if(jn===0)var o=zr.return;else o=zr,To=ol=null,Nf(o),it=null,At=0,o=zr;for(;o!==null;)W_(o.alternate,o),o=o.return;zr=null}}function Rf(o,c){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,bz(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Fd=0,B1(),Ln=o,zr=m=cs(o.current,null),Fr=c,jn=0,ll=null,ku=!1,Of=Ws(o,c),O1=!1,Mf=cl=M1=yh=Du=Bi=0,Lo=cp=null,L1=!1,(c&8)!==0&&(c|=c&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=c;0<x;){var A=31-_r(x),k=1<<A;c|=o[A],x&=~k}return Bd=c,Wc(),m}function mC(o,c){$t=null,z.H=tp,c===Te||c===we?(c=Je(),jn=3):c===Be?(c=Je(),jn=4):jn=c===y1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ll=c,zr===null&&(Bi=1,sy(o,y(c,o.current)))}function pC(){var o=Jn.current;return o===null?!0:(Fr&4194048)===Fr?Zr===null:(Fr&62914560)===Fr||(Fr&536870912)!==0?o===Zr:!1}function gC(){var o=z.H;return z.H=tp,o===null?tp:o}function yC(){var o=z.A;return z.A=X7,o}function vy(){Bi=4,ku||(Fr&4194048)!==Fr&&Jn.current!==null||(Of=!0),(Du&134217727)===0&&(yh&134217727)===0||Ln===null||Lu(Ln,Fr,cl,!1)}function F1(o,c,m){var x=un;un|=2;var A=gC(),k=yC();(Ln!==o||Fr!==c)&&(gy=null,Rf(o,c)),c=!1;var te=Bi;e:do try{if(jn!==0&&zr!==null){var pe=zr,Ae=ll;switch(jn){case 8:B1(),te=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(c=!0);var qe=jn;if(jn=0,ll=null,If(o,pe,Ae,qe),m&&Of){te=0;break e}break;default:qe=jn,jn=0,ll=null,If(o,pe,Ae,qe)}}tz(),te=Bi;break}catch(Xe){mC(o,Xe)}while(!0);return c&&o.shellSuspendCounter++,To=ol=null,un=x,z.H=A,z.A=k,zr===null&&(Ln=null,Fr=0,Wc()),te}function tz(){for(;zr!==null;)vC(zr)}function rz(o,c){var m=un;un|=2;var x=gC(),A=yC();Ln!==o||Fr!==c?(gy=null,py=lr()+500,Rf(o,c)):Of=Ws(o,c);e:do try{if(jn!==0&&zr!==null){c=zr;var k=ll;t:switch(jn){case 1:jn=0,ll=null,If(o,c,k,1);break;case 2:case 9:if(Re(k)){jn=0,ll=null,xC(c);break}c=function(){jn!==2&&jn!==9||Ln!==o||(jn=7),id(o)},k.then(c,c);break e;case 3:jn=7;break e;case 4:jn=5;break e;case 7:Re(k)?(jn=0,ll=null,xC(c)):(jn=0,ll=null,If(o,c,k,7));break;case 5:var te=null;switch(zr.tag){case 26:te=zr.memoizedState;case 5:case 27:var pe=zr;if(te?iA(te):pe.stateNode.complete){jn=0,ll=null;var Ae=pe.sibling;if(Ae!==null)zr=Ae;else{var qe=pe.return;qe!==null?(zr=qe,xy(qe)):zr=null}break t}}jn=0,ll=null,If(o,c,k,5);break;case 6:jn=0,ll=null,If(o,c,k,6);break;case 8:B1(),Bi=6;break e;default:throw Error(i(462))}}nz();break}catch(Xe){mC(o,Xe)}while(!0);return To=ol=null,z.H=x,z.A=A,un=m,zr!==null?0:(Ln=null,Fr=0,Wc(),Bi)}function nz(){for(;zr!==null&&!Ht();)vC(zr)}function vC(o){var c=U_(o.alternate,o,Bd);o.memoizedProps=o.pendingProps,c===null?xy(o):zr=c}function xC(o){var c=o,m=c.alternate;switch(c.tag){case 15:case 0:c=R_(m,c,c.pendingProps,c.type,void 0,Fr);break;case 11:c=R_(m,c,c.pendingProps,c.type.render,c.ref,Fr);break;case 5:Nf(c);default:W_(m,c),c=zr=$c(c,Bd),c=U_(m,c,Bd)}o.memoizedProps=o.pendingProps,c===null?xy(o):zr=c}function If(o,c,m,x){To=ol=null,Nf(c),it=null,At=0;var A=c.return;try{if($7(o,A,c,m,Fr)){Bi=1,sy(o,y(m,o.current)),zr=null;return}}catch(k){if(A!==null)throw zr=A,k;Bi=1,sy(o,y(m,o.current)),zr=null;return}c.flags&32768?(Pr||x===1?o=!0:Of||(Fr&536870912)!==0?o=!1:(ku=o=!0,(x===2||x===9||x===3||x===6)&&(x=Jn.current,x!==null&&x.tag===13&&(x.flags|=16384))),bC(c,o)):xy(c)}function xy(o){var c=o;do{if((c.flags&32768)!==0){bC(c,ku);return}o=c.return;var m=G7(c.alternate,c,Bd);if(m!==null){zr=m;return}if(c=c.sibling,c!==null){zr=c;return}zr=c=o}while(c!==null);Bi===0&&(Bi=5)}function bC(o,c){do{var m=Q7(o.alternate,o);if(m!==null){m.flags&=32767,zr=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(o=o.sibling,o!==null)){zr=o;return}zr=o=m}while(o!==null);Bi=6,zr=null}function jC(o,c,m,x,A,k,te,pe,Ae){o.cancelPendingCommit=null;do by();while(Ca!==0);if((un&6)!==0)throw Error(i(327));if(c!==null){if(c===o.current)throw Error(i(177));if(k=c.lanes|c.childLanes,k|=Cd,$o(o,m,k,te,pe,Ae),o===Ln&&(zr=Ln=null,Fr=0),Lf=c,Mu=o,Fd=m,R1=k,I1=A,dC=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,oz(dr,function(){return CC(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=z.T,z.T=null,A=ie.p,ie.p=2,te=un,un|=4;try{Y7(o,c,m)}finally{un=te,ie.p=A,z.T=x}}Ca=1,wC(),SC(),NC()}}function wC(){if(Ca===1){Ca=0;var o=Mu,c=Lf,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=z.T,z.T=null;var x=ie.p;ie.p=2;var A=un;un|=4;try{rC(c,o);var k=X1,te=Cs(o.containerInfo),pe=k.focusedElem,Ae=k.selectionRange;if(te!==pe&&pe&&pe.ownerDocument&&io(pe.ownerDocument.documentElement,pe)){if(Ae!==null&&xa(pe)){var qe=Ae.start,Xe=Ae.end;if(Xe===void 0&&(Xe=qe),"selectionStart"in pe)pe.selectionStart=qe,pe.selectionEnd=Math.min(Xe,pe.value.length);else{var nt=pe.ownerDocument||document,We=nt&&nt.defaultView||window;if(We.getSelection){var Ve=We.getSelection(),Ct=pe.textContent.length,tr=Math.min(Ae.start,Ct),Pn=Ae.end===void 0?tr:Math.min(Ae.end,Ct);!Ve.extend&&tr>Pn&&(te=Pn,Pn=tr,tr=te);var Le=il(pe,tr),Pe=il(pe,Pn);if(Le&&Pe&&(Ve.rangeCount!==1||Ve.anchorNode!==Le.node||Ve.anchorOffset!==Le.offset||Ve.focusNode!==Pe.node||Ve.focusOffset!==Pe.offset)){var Fe=nt.createRange();Fe.setStart(Le.node,Le.offset),Ve.removeAllRanges(),tr>Pn?(Ve.addRange(Fe),Ve.extend(Pe.node,Pe.offset)):(Fe.setEnd(Pe.node,Pe.offset),Ve.addRange(Fe))}}}}for(nt=[],Ve=pe;Ve=Ve.parentNode;)Ve.nodeType===1&&nt.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<nt.length;pe++){var rt=nt[pe];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}Dy=!!Z1,X1=Z1=null}finally{un=A,ie.p=x,z.T=m}}o.current=c,Ca=2}}function SC(){if(Ca===2){Ca=0;var o=Mu,c=Lf,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=z.T,z.T=null;var x=ie.p;ie.p=2;var A=un;un|=4;try{Z_(o,c.alternate,c)}finally{un=A,ie.p=x,z.T=m}}Ca=3}}function NC(){if(Ca===4||Ca===3){Ca=0,Bt();var o=Mu,c=Lf,m=Fd,x=dC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ca=5:(Ca=0,Lf=Mu=null,_C(o,o.pendingLanes));var A=o.pendingLanes;if(A===0&&(Ou=null),gt(m),c=c.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(xr,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=z.T,A=ie.p,ie.p=2,z.T=null;try{for(var k=o.onRecoverableError,te=0;te<x.length;te++){var pe=x[te];k(pe.value,{componentStack:pe.stack})}}finally{z.T=c,ie.p=A}}(Fd&3)!==0&&by(),id(o),A=o.pendingLanes,(m&261930)!==0&&(A&42)!==0?o===z1?dp++:(dp=0,z1=o):dp=0,up(0)}}function _C(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,uh(c)))}function by(){return wC(),SC(),NC(),CC()}function CC(){if(Ca!==5)return!1;var o=Mu,c=R1;R1=0;var m=gt(Fd),x=z.T,A=ie.p;try{ie.p=32>m?32:m,z.T=null,m=I1,I1=null;var k=Mu,te=Fd;if(Ca=0,Lf=Mu=null,Fd=0,(un&6)!==0)throw Error(i(331));var pe=un;if(un|=4,oC(k.current),iC(k,k.current,te,m),un=pe,up(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(xr,k)}catch{}return!0}finally{ie.p=A,z.T=x,_C(o,c)}}function AC(o,c,m){c=y(m,c),c=g1(o.stateNode,c,2),o=gr(o,c,2),o!==null&&(zt(o,2),id(o))}function wn(o,c,m){if(o.tag===3)AC(o,o,m);else for(;c!==null;){if(c.tag===3){AC(c,o,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ou===null||!Ou.has(x))){o=y(m,o),m=E_(2),x=gr(c,m,2),x!==null&&(T_(m,x,c,o),zt(x,2),id(x));break}}c=c.return}}function q1(o,c,m){var x=o.pingCache;if(x===null){x=o.pingCache=new J7;var A=new Set;x.set(c,A)}else A=x.get(c),A===void 0&&(A=new Set,x.set(c,A));A.has(m)||(O1=!0,A.add(m),o=iz.bind(null,o,c,m),c.then(o,o))}function iz(o,c,m){var x=o.pingCache;x!==null&&x.delete(c),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,Ln===o&&(Fr&m)===m&&(Bi===4||Bi===3&&(Fr&62914560)===Fr&&300>lr()-my?(un&2)===0&&Rf(o,0):M1|=m,Mf===Fr&&(Mf=0)),id(o)}function EC(o,c){c===0&&(c=fo()),o=Es(o,c),o!==null&&(zt(o,c),id(o))}function az(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),EC(o,m)}function sz(o,c){var m=0;switch(o.tag){case 31:case 13:var x=o.stateNode,A=o.memoizedState;A!==null&&(m=A.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(c),EC(o,m)}function oz(o,c){return qt(o,c)}var jy=null,zf=null,U1=!1,wy=!1,H1=!1,Ru=0;function id(o){o!==zf&&o.next===null&&(zf===null?jy=zf=o:zf=zf.next=o),wy=!0,U1||(U1=!0,cz())}function up(o,c){if(!H1&&wy){H1=!0;do for(var m=!1,x=jy;x!==null;){if(o!==0){var A=x.pendingLanes;if(A===0)var k=0;else{var te=x.suspendedLanes,pe=x.pingedLanes;k=(1<<31-_r(42|o)+1)-1,k&=A&~(te&~pe),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(m=!0,DC(x,k))}else k=Fr,k=Rr(x,x===Ln?k:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(k&3)===0||Ws(x,k)||(m=!0,DC(x,k));x=x.next}while(m);H1=!1}}function lz(){TC()}function TC(){wy=U1=!1;var o=0;Ru!==0&&xz()&&(o=Ru);for(var c=lr(),m=null,x=jy;x!==null;){var A=x.next,k=PC(x,c);k===0?(x.next=null,m===null?jy=A:m.next=A,A===null&&(zf=m)):(m=x,(o!==0||(k&3)!==0)&&(wy=!0)),x=A}Ca!==0&&Ca!==5||up(o),Ru!==0&&(Ru=0)}function PC(o,c){for(var m=o.suspendedLanes,x=o.pingedLanes,A=o.expirationTimes,k=o.pendingLanes&-62914561;0<k;){var te=31-_r(k),pe=1<<te,Ae=A[te];Ae===-1?((pe&m)===0||(pe&x)!==0)&&(A[te]=ia(pe,c)):Ae<=c&&(o.expiredLanes|=pe),k&=~pe}if(c=Ln,m=Fr,m=Rr(o,o===c?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,m===0||o===c&&(jn===2||jn===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&vt(x),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Ws(o,m)){if(c=m&-m,c===o.callbackPriority)return c;switch(x!==null&&vt(x),gt(m)){case 2:case 8:m=jr;break;case 32:m=dr;break;case 268435456:m=nr;break;default:m=dr}return x=kC.bind(null,o),m=qt(m,x),o.callbackPriority=c,o.callbackNode=m,c}return x!==null&&x!==null&&vt(x),o.callbackPriority=2,o.callbackNode=null,2}function kC(o,c){if(Ca!==0&&Ca!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(by()&&o.callbackNode!==m)return null;var x=Fr;return x=Rr(o,o===Ln?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(hC(o,x,c),PC(o,lr()),o.callbackNode!=null&&o.callbackNode===m?kC.bind(null,o):null)}function DC(o,c){if(by())return null;hC(o,c,!0)}function cz(){jz(function(){(un&6)!==0?qt(rr,lz):TC()})}function W1(){if(Ru===0){var o=N;o===0&&(o=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Ru=o}return Ru}function OC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:sa(""+o)}function MC(o,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,o.id&&m.setAttribute("form",o.id),c.parentNode.insertBefore(m,c),o=new FormData(o),m.parentNode.removeChild(m),o}function dz(o,c,m,x,A){if(c==="submit"&&m&&m.stateNode===A){var k=OC((A[yn]||null).action),te=x.submitter;te&&(c=(c=te[yn]||null)?OC(c.formAction):te.getAttribute("formAction"),c!==null&&(k=c,te=null));var pe=new ws("action","action",null,x,A);o.push({event:pe,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Ru!==0){var Ae=te?MC(A,te):new FormData(A);d1(m,{pending:!0,data:Ae,method:A.method,action:k},null,Ae)}}else typeof k=="function"&&(pe.preventDefault(),Ae=te?MC(A,te):new FormData(A),d1(m,{pending:!0,data:Ae,method:A.method,action:k},k,Ae))},currentTarget:A}]})}}for(var $1=0;$1<As.length;$1++){var V1=As[$1],uz=V1.toLowerCase(),hz=V1[0].toUpperCase()+V1.slice(1);os(uz,"on"+hz)}os(Eo,"onAnimationEnd"),os(_d,"onAnimationIteration"),os(Uc,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(yf,"onTransitionRun"),os(lh,"onTransitionStart"),os(vf,"onTransitionCancel"),os(oc,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hp));function LC(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],A=x.event;x=x.listeners;e:{var k=void 0;if(c)for(var te=x.length-1;0<=te;te--){var pe=x[te],Ae=pe.instance,qe=pe.currentTarget;if(pe=pe.listener,Ae!==k&&A.isPropagationStopped())break e;k=pe,A.currentTarget=qe;try{k(A)}catch(Xe){Hc(Xe)}A.currentTarget=null,k=Ae}else for(te=0;te<x.length;te++){if(pe=x[te],Ae=pe.instance,qe=pe.currentTarget,pe=pe.listener,Ae!==k&&A.isPropagationStopped())break e;k=pe,A.currentTarget=qe;try{k(A)}catch(Xe){Hc(Xe)}A.currentTarget=null,k=Ae}}}}function Br(o,c){var m=c[Pi];m===void 0&&(m=c[Pi]=new Set);var x=o+"__bubble";m.has(x)||(RC(c,o,2,!1),m.add(x))}function K1(o,c,m){var x=0;c&&(x|=4),RC(m,o,x,c)}var Sy="_reactListening"+Math.random().toString(36).slice(2);function G1(o){if(!o[Sy]){o[Sy]=!0,jd.forEach(function(m){m!=="selectionchange"&&(fz.has(m)||K1(m,!1,o),K1(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Sy]||(c[Sy]=!0,K1("selectionchange",!1,c))}}function RC(o,c,m,x){switch(uA(c)){case 2:var A=qz;break;case 8:A=Uz;break;default:A=cb}m=A.bind(null,c,m,o),A=void 0,!rc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),x?A!==void 0?o.addEventListener(c,m,{capture:!0,passive:A}):o.addEventListener(c,m,!0):A!==void 0?o.addEventListener(c,m,{passive:A}):o.addEventListener(c,m,!1)}function Q1(o,c,m,x,A){var k=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var te=x.tag;if(te===3||te===4){var pe=x.stateNode.containerInfo;if(pe===A)break;if(te===4)for(te=x.return;te!==null;){var Ae=te.tag;if((Ae===3||Ae===4)&&te.stateNode.containerInfo===A)return;te=te.return}for(;pe!==null;){if(te=xs(pe),te===null)return;if(Ae=te.tag,Ae===5||Ae===6||Ae===26||Ae===27){x=k=te;continue e}pe=pe.parentNode}}x=x.return}wd(function(){var qe=k,Xe=Yo(m),nt=[];e:{var We=ch.get(o);if(We!==void 0){var Ve=ws,Ct=o;switch(o){case"keypress":if(rs(m)===0)break e;case"keydown":case"keyup":Ve=Dr;break;case"focusin":Ct="focus",Ve=Xo;break;case"focusout":Ct="blur",Ve=Xo;break;case"beforeblur":case"afterblur":Ve=Xo;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Zo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Ni;break;case Eo:case _d:case Uc:Ve=M;break;case oc:Ve=ki;break;case"scroll":case"scrollend":Ve=mr;break;case"wheel":Ve=Ki;break;case"copy":case"cut":case"paste":Ve=je;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Kn;break;case"toggle":case"beforetoggle":Ve=el}var tr=(c&4)!==0,Pn=!tr&&(o==="scroll"||o==="scrollend"),Le=tr?We!==null?We+"Capture":null:We;tr=[];for(var Pe=qe,Fe;Pe!==null;){var rt=Pe;if(Fe=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||Fe===null||Le===null||(rt=ya(Pe,Le),rt!=null&&tr.push(fp(Pe,rt,Fe))),Pn)break;Pe=Pe.return}0<tr.length&&(We=new Ve(We,Ct,null,m,Xe),nt.push({event:We,listeners:tr}))}}if((c&7)===0){e:{if(We=o==="mouseover"||o==="pointerover",Ve=o==="mouseout"||o==="pointerout",We&&m!==vo&&(Ct=m.relatedTarget||m.fromElement)&&(xs(Ct)||Ct[$i]))break e;if((Ve||We)&&(We=Xe.window===Xe?Xe:(We=Xe.ownerDocument)?We.defaultView||We.parentWindow:window,Ve?(Ct=m.relatedTarget||m.toElement,Ve=qe,Ct=Ct?xs(Ct):null,Ct!==null&&(Pn=s(Ct),tr=Ct.tag,Ct!==Pn||tr!==5&&tr!==27&&tr!==6)&&(Ct=null)):(Ve=null,Ct=qe),Ve!==Ct)){if(tr=Sd,rt="onMouseLeave",Le="onMouseEnter",Pe="mouse",(o==="pointerout"||o==="pointerover")&&(tr=Kn,rt="onPointerLeave",Le="onPointerEnter",Pe="pointer"),Pn=Ve==null?We:po(Ve),Fe=Ct==null?We:po(Ct),We=new tr(rt,Pe+"leave",Ve,m,Xe),We.target=Pn,We.relatedTarget=Fe,rt=null,xs(Xe)===qe&&(tr=new tr(Le,Pe+"enter",Ct,m,Xe),tr.target=Fe,tr.relatedTarget=Pn,rt=tr),Pn=rt,Ve&&Ct)t:{for(tr=mz,Le=Ve,Pe=Ct,Fe=0,rt=Le;rt;rt=tr(rt))Fe++;rt=0;for(var Kt=Pe;Kt;Kt=tr(Kt))rt++;for(;0<Fe-rt;)Le=tr(Le),Fe--;for(;0<rt-Fe;)Pe=tr(Pe),rt--;for(;Fe--;){if(Le===Pe||Pe!==null&&Le===Pe.alternate){tr=Le;break t}Le=tr(Le),Pe=tr(Pe)}tr=null}else tr=null;Ve!==null&&IC(nt,We,Ve,tr,!1),Ct!==null&&Pn!==null&&IC(nt,Pn,Ct,tr,!0)}}e:{if(We=qe?po(qe):window,Ve=We.nodeName&&We.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&We.type==="file")var an=ro;else if(is(We))if(za)an=So;else{an=Qn;var Mt=Ba}else Ve=We.nodeName,!Ve||Ve.toLowerCase()!=="input"||We.type!=="checkbox"&&We.type!=="radio"?qe&&tc(qe.elementType)&&(an=ro):an=nl;if(an&&(an=an(o,qe))){as(nt,an,m,Xe);break e}Mt&&Mt(o,We,qe),o==="focusout"&&qe&&We.type==="number"&&qe.memoizedProps.value!=null&&Ys(We,"number",We.value)}switch(Mt=qe?po(qe):window,o){case"focusin":(is(Mt)||Mt.contentEditable==="true")&&(ba=Mt,Co=qe,la=null);break;case"focusout":la=Co=ba=null;break;case"mousedown":ja=!0;break;case"contextmenu":case"mouseup":case"dragend":ja=!1,$r(nt,m,Xe);break;case"selectionchange":if(_o)break;case"keydown":case"keyup":$r(nt,m,Xe)}var wr;if(eo)e:{switch(o){case"compositionstart":var qr="onCompositionStart";break e;case"compositionend":qr="onCompositionEnd";break e;case"compositionupdate":qr="onCompositionUpdate";break e}qr=void 0}else jo?El(o,m)&&(qr="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(qr="onCompositionStart");qr&&(to&&m.locale!=="ko"&&(jo||qr!=="onCompositionStart"?qr==="onCompositionEnd"&&jo&&(wr=xo()):(va=Xe,Xs="value"in va?va.value:va.textContent,jo=!0)),Mt=Ny(qe,qr),0<Mt.length&&(qr=new Oe(qr,o,null,m,Xe),nt.push({event:qr,listeners:Mt}),wr?qr.data=wr:(wr=sc(m),wr!==null&&(qr.data=wr)))),(wr=ac?xn(o,m):Ia(o,m))&&(qr=Ny(qe,"onBeforeInput"),0<qr.length&&(Mt=new Oe("onBeforeInput","beforeinput",null,m,Xe),nt.push({event:Mt,listeners:qr}),Mt.data=wr)),dz(nt,o,qe,m,Xe)}LC(nt,c)})}function fp(o,c,m){return{instance:o,listener:c,currentTarget:m}}function Ny(o,c){for(var m=c+"Capture",x=[];o!==null;){var A=o,k=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||k===null||(A=ya(o,m),A!=null&&x.unshift(fp(o,A,k)),A=ya(o,c),A!=null&&x.push(fp(o,A,k))),o.tag===3)return x;o=o.return}return[]}function mz(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function IC(o,c,m,x,A){for(var k=c._reactName,te=[];m!==null&&m!==x;){var pe=m,Ae=pe.alternate,qe=pe.stateNode;if(pe=pe.tag,Ae!==null&&Ae===x)break;pe!==5&&pe!==26&&pe!==27||qe===null||(Ae=qe,A?(qe=ya(m,k),qe!=null&&te.unshift(fp(m,qe,Ae))):A||(qe=ya(m,k),qe!=null&&te.push(fp(m,qe,Ae)))),m=m.return}te.length!==0&&o.push({event:c,listeners:te})}var pz=/\r\n?/g,gz=/\u0000|\uFFFD/g;function zC(o){return(typeof o=="string"?o:""+o).replace(pz,`
`).replace(gz,"")}function BC(o,c){return c=zC(c),zC(o)===c}function Tn(o,c,m,x,A,k){switch(m){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||ga(o,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&ga(o,""+x);break;case"className":Hr(o,"class",x);break;case"tabIndex":Hr(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Hr(o,m,x);break;case"style":Ic(o,x,k);break;case"data":if(c!=="object"){Hr(o,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||m!=="href")){o.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=sa(""+x),o.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(m==="formAction"?(c!=="input"&&Tn(o,c,"name",A.name,A,null),Tn(o,c,"formEncType",A.formEncType,A,null),Tn(o,c,"formMethod",A.formMethod,A,null),Tn(o,c,"formTarget",A.formTarget,A,null)):(Tn(o,c,"encType",A.encType,A,null),Tn(o,c,"method",A.method,A,null),Tn(o,c,"target",A.target,A,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=sa(""+x),o.setAttribute(m,x);break;case"onClick":x!=null&&(o.onclick=Ra);break;case"onScroll":x!=null&&Br("scroll",o);break;case"onScrollEnd":x!=null&&Br("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(m=x.__html,m!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}m=sa(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""+x):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":x===!0?o.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,x):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(m,x):o.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(m):o.setAttribute(m,x);break;case"popover":Br("beforetoggle",o),Br("toggle",o),ir(o,"popover",x);break;case"xlinkActuate":La(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":La(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":La(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":La(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":La(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":La(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":La(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":La(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":La(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ir(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Nl.get(m)||m,ir(o,m,x))}}function Y1(o,c,m,x,A,k){switch(m){case"style":Ic(o,x,k);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(m=x.__html,m!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof x=="string"?ga(o,x):(typeof x=="number"||typeof x=="bigint")&&ga(o,""+x);break;case"onScroll":x!=null&&Br("scroll",o);break;case"onScrollEnd":x!=null&&Br("scrollend",o);break;case"onClick":x!=null&&(o.onclick=Ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),c=m.slice(2,A?m.length-7:void 0),k=o[yn]||null,k=k!=null?k[m]:null,typeof k=="function"&&o.removeEventListener(c,k,A),typeof x=="function")){typeof k!="function"&&k!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(c,x,A);break e}m in o?o[m]=x:x===!0?o.setAttribute(m,""):ir(o,m,x)}}}function fs(o,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Br("error",o),Br("load",o);var x=!1,A=!1,k;for(k in m)if(m.hasOwnProperty(k)){var te=m[k];if(te!=null)switch(k){case"src":x=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Tn(o,c,k,te,m,null)}}A&&Tn(o,c,"srcSet",m.srcSet,m,null),x&&Tn(o,c,"src",m.src,m,null);return;case"input":Br("invalid",o);var pe=k=te=A=null,Ae=null,qe=null;for(x in m)if(m.hasOwnProperty(x)){var Xe=m[x];if(Xe!=null)switch(x){case"name":A=Xe;break;case"type":te=Xe;break;case"checked":Ae=Xe;break;case"defaultChecked":qe=Xe;break;case"value":k=Xe;break;case"defaultValue":pe=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(i(137,c));break;default:Tn(o,c,x,Xe,m,null)}}ec(o,k,pe,Ae,qe,te,A,!1);return;case"select":Br("invalid",o),x=te=k=null;for(A in m)if(m.hasOwnProperty(A)&&(pe=m[A],pe!=null))switch(A){case"value":k=pe;break;case"defaultValue":te=pe;break;case"multiple":x=pe;default:Tn(o,c,A,pe,m,null)}c=k,m=te,o.multiple=!!x,c!=null?kr(o,!!x,c,!1):m!=null&&kr(o,!!x,m,!0);return;case"textarea":Br("invalid",o),k=A=x=null;for(te in m)if(m.hasOwnProperty(te)&&(pe=m[te],pe!=null))switch(te){case"value":x=pe;break;case"defaultValue":A=pe;break;case"children":k=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(91));break;default:Tn(o,c,te,pe,m,null)}Go(o,x,A,k);return;case"option":for(Ae in m)m.hasOwnProperty(Ae)&&(x=m[Ae],x!=null)&&(Ae==="selected"?o.selected=x&&typeof x!="function"&&typeof x!="symbol":Tn(o,c,Ae,x,m,null));return;case"dialog":Br("beforetoggle",o),Br("toggle",o),Br("cancel",o),Br("close",o);break;case"iframe":case"object":Br("load",o);break;case"video":case"audio":for(x=0;x<hp.length;x++)Br(hp[x],o);break;case"image":Br("error",o),Br("load",o);break;case"details":Br("toggle",o);break;case"embed":case"source":case"link":Br("error",o),Br("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in m)if(m.hasOwnProperty(qe)&&(x=m[qe],x!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Tn(o,c,qe,x,m,null)}return;default:if(tc(c)){for(Xe in m)m.hasOwnProperty(Xe)&&(x=m[Xe],x!==void 0&&Y1(o,c,Xe,x,m,void 0));return}}for(pe in m)m.hasOwnProperty(pe)&&(x=m[pe],x!=null&&Tn(o,c,pe,x,m,null))}function yz(o,c,m,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,k=null,te=null,pe=null,Ae=null,qe=null,Xe=null;for(Ve in m){var nt=m[Ve];if(m.hasOwnProperty(Ve)&&nt!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":Ae=nt;default:x.hasOwnProperty(Ve)||Tn(o,c,Ve,null,x,nt)}}for(var We in x){var Ve=x[We];if(nt=m[We],x.hasOwnProperty(We)&&(Ve!=null||nt!=null))switch(We){case"type":k=Ve;break;case"name":A=Ve;break;case"checked":qe=Ve;break;case"defaultChecked":Xe=Ve;break;case"value":te=Ve;break;case"defaultValue":pe=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(137,c));break;default:Ve!==nt&&Tn(o,c,We,Ve,x,nt)}}Rc(o,te,pe,Ae,qe,Xe,k,A);return;case"select":Ve=te=pe=We=null;for(k in m)if(Ae=m[k],m.hasOwnProperty(k)&&Ae!=null)switch(k){case"value":break;case"multiple":Ve=Ae;default:x.hasOwnProperty(k)||Tn(o,c,k,null,x,Ae)}for(A in x)if(k=x[A],Ae=m[A],x.hasOwnProperty(A)&&(k!=null||Ae!=null))switch(A){case"value":We=k;break;case"defaultValue":pe=k;break;case"multiple":te=k;default:k!==Ae&&Tn(o,c,A,k,x,Ae)}c=pe,m=te,x=Ve,We!=null?kr(o,!!m,We,!1):!!x!=!!m&&(c!=null?kr(o,!!m,c,!0):kr(o,!!m,m?[]:"",!1));return;case"textarea":Ve=We=null;for(pe in m)if(A=m[pe],m.hasOwnProperty(pe)&&A!=null&&!x.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:Tn(o,c,pe,null,x,A)}for(te in x)if(A=x[te],k=m[te],x.hasOwnProperty(te)&&(A!=null||k!=null))switch(te){case"value":We=A;break;case"defaultValue":Ve=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==k&&Tn(o,c,te,A,x,k)}Zs(o,We,Ve);return;case"option":for(var Ct in m)We=m[Ct],m.hasOwnProperty(Ct)&&We!=null&&!x.hasOwnProperty(Ct)&&(Ct==="selected"?o.selected=!1:Tn(o,c,Ct,null,x,We));for(Ae in x)We=x[Ae],Ve=m[Ae],x.hasOwnProperty(Ae)&&We!==Ve&&(We!=null||Ve!=null)&&(Ae==="selected"?o.selected=We&&typeof We!="function"&&typeof We!="symbol":Tn(o,c,Ae,We,x,Ve));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tr in m)We=m[tr],m.hasOwnProperty(tr)&&We!=null&&!x.hasOwnProperty(tr)&&Tn(o,c,tr,null,x,We);for(qe in x)if(We=x[qe],Ve=m[qe],x.hasOwnProperty(qe)&&We!==Ve&&(We!=null||Ve!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(i(137,c));break;default:Tn(o,c,qe,We,x,Ve)}return;default:if(tc(c)){for(var Pn in m)We=m[Pn],m.hasOwnProperty(Pn)&&We!==void 0&&!x.hasOwnProperty(Pn)&&Y1(o,c,Pn,void 0,x,We);for(Xe in x)We=x[Xe],Ve=m[Xe],!x.hasOwnProperty(Xe)||We===Ve||We===void 0&&Ve===void 0||Y1(o,c,Xe,We,x,Ve);return}}for(var Le in m)We=m[Le],m.hasOwnProperty(Le)&&We!=null&&!x.hasOwnProperty(Le)&&Tn(o,c,Le,null,x,We);for(nt in x)We=x[nt],Ve=m[nt],!x.hasOwnProperty(nt)||We===Ve||We==null&&Ve==null||Tn(o,c,nt,We,x,Ve)}function FC(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vz(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,m=performance.getEntriesByType("resource"),x=0;x<m.length;x++){var A=m[x],k=A.transferSize,te=A.initiatorType,pe=A.duration;if(k&&pe&&FC(te)){for(te=0,pe=A.responseEnd,x+=1;x<m.length;x++){var Ae=m[x],qe=Ae.startTime;if(qe>pe)break;var Xe=Ae.transferSize,nt=Ae.initiatorType;Xe&&FC(nt)&&(Ae=Ae.responseEnd,te+=Xe*(Ae<pe?1:(pe-qe)/(Ae-qe)))}if(--x,c+=8*(k+te)/(A.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Z1=null,X1=null;function _y(o){return o.nodeType===9?o:o.ownerDocument}function qC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UC(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function J1(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var eb=null;function xz(){var o=window.event;return o&&o.type==="popstate"?o===eb?!1:(eb=o,!0):(eb=null,!1)}var HC=typeof setTimeout=="function"?setTimeout:void 0,bz=typeof clearTimeout=="function"?clearTimeout:void 0,WC=typeof Promise=="function"?Promise:void 0,jz=typeof queueMicrotask=="function"?queueMicrotask:typeof WC<"u"?function(o){return WC.resolve(null).then(o).catch(wz)}:HC;function wz(o){setTimeout(function(){throw o})}function Iu(o){return o==="head"}function $C(o,c){var m=c,x=0;do{var A=m.nextSibling;if(o.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"||m==="/&"){if(x===0){o.removeChild(A),Uf(c);return}x--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")x++;else if(m==="html")mp(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,mp(m);for(var k=m.firstChild;k;){var te=k.nextSibling,pe=k.nodeName;k[Vs]||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&k.rel.toLowerCase()==="stylesheet"||m.removeChild(k),k=te}}else m==="body"&&mp(o.ownerDocument.body);m=A}while(m);Uf(c)}function VC(o,c){var m=o;o=0;do{var x=m.nextSibling;if(m.nodeType===1?c?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(c?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),x&&x.nodeType===8)if(m=x.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=x}while(m)}function tb(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":tb(m),jl(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function Sz(o,c,m,x){for(;o.nodeType===1;){var A=m;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[Vs])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(k=o.getAttribute("rel"),k==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(k!==A.rel||o.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||o.getAttribute("title")!==(A.title==null?null:A.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(k=o.getAttribute("src"),(k!==(A.src==null?null:A.src)||o.getAttribute("type")!==(A.type==null?null:A.type)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&k&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var k=A.name==null?null:""+A.name;if(A.type==="hidden"&&o.getAttribute("name")===k)return o}else return o;if(o=Ml(o.nextSibling),o===null)break}return null}function Nz(o,c,m){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Ml(o.nextSibling),o===null))return null;return o}function KC(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Ml(o.nextSibling),o===null))return null;return o}function rb(o){return o.data==="$?"||o.data==="$~"}function nb(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function _z(o,c){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||m.readyState!=="loading")c();else{var x=function(){c(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function Ml(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var ib=null;function GC(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(c===0)return Ml(o.nextSibling);c--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||c++}o=o.nextSibling}return null}function QC(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(c===0)return o;c--}else m!=="/$"&&m!=="/&"||c++}o=o.previousSibling}return null}function YC(o,c,m){switch(c=_y(m),o){case"html":if(o=c.documentElement,!o)throw Error(i(452));return o;case"head":if(o=c.head,!o)throw Error(i(453));return o;case"body":if(o=c.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function mp(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);jl(o)}var Ll=new Map,ZC=new Set;function Cy(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var qd=ie.d;ie.d={f:Cz,r:Az,D:Ez,C:Tz,L:Pz,m:kz,X:Oz,S:Dz,M:Mz};function Cz(){var o=qd.f(),c=yy();return o||c}function Az(o){var c=Ks(o);c!==null&&c.tag===5&&c.type==="form"?m_(c):qd.r(o)}var Bf=typeof document>"u"?null:document;function XC(o,c,m){var x=Bf;if(x&&typeof c=="string"&&c){var A=Wr(c);A='link[rel="'+o+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),ZC.has(A)||(ZC.add(A),o={rel:o,crossOrigin:m,href:c},x.querySelector(A)===null&&(c=x.createElement("link"),fs(c,"link",o),Vn(c),x.head.appendChild(c)))}}function Ez(o){qd.D(o),XC("dns-prefetch",o,null)}function Tz(o,c){qd.C(o,c),XC("preconnect",o,c)}function Pz(o,c,m){qd.L(o,c,m);var x=Bf;if(x&&o&&c){var A='link[rel="preload"][as="'+Wr(c)+'"]';c==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+Wr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+Wr(m.imageSizes)+'"]')):A+='[href="'+Wr(o)+'"]';var k=A;switch(c){case"style":k=Ff(o);break;case"script":k=qf(o)}Ll.has(k)||(o=g({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:o,as:c},m),Ll.set(k,o),x.querySelector(A)!==null||c==="style"&&x.querySelector(pp(k))||c==="script"&&x.querySelector(gp(k))||(c=x.createElement("link"),fs(c,"link",o),Vn(c),x.head.appendChild(c)))}}function kz(o,c){qd.m(o,c);var m=Bf;if(m&&o){var x=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Wr(x)+'"][href="'+Wr(o)+'"]',k=A;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=qf(o)}if(!Ll.has(k)&&(o=g({rel:"modulepreload",href:o},c),Ll.set(k,o),m.querySelector(A)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(gp(k)))return}x=m.createElement("link"),fs(x,"link",o),Vn(x),m.head.appendChild(x)}}}function Dz(o,c,m){qd.S(o,c,m);var x=Bf;if(x&&o){var A=go(x).hoistableStyles,k=Ff(o);c=c||"default";var te=A.get(k);if(!te){var pe={loading:0,preload:null};if(te=x.querySelector(pp(k)))pe.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":c},m),(m=Ll.get(k))&&ab(o,m);var Ae=te=x.createElement("link");Vn(Ae),fs(Ae,"link",o),Ae._p=new Promise(function(qe,Xe){Ae.onload=qe,Ae.onerror=Xe}),Ae.addEventListener("load",function(){pe.loading|=1}),Ae.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,Ay(te,c,x)}te={type:"stylesheet",instance:te,count:1,state:pe},A.set(k,te)}}}function Oz(o,c){qd.X(o,c);var m=Bf;if(m&&o){var x=go(m).hoistableScripts,A=qf(o),k=x.get(A);k||(k=m.querySelector(gp(A)),k||(o=g({src:o,async:!0},c),(c=Ll.get(A))&&sb(o,c),k=m.createElement("script"),Vn(k),fs(k,"link",o),m.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},x.set(A,k))}}function Mz(o,c){qd.M(o,c);var m=Bf;if(m&&o){var x=go(m).hoistableScripts,A=qf(o),k=x.get(A);k||(k=m.querySelector(gp(A)),k||(o=g({src:o,async:!0,type:"module"},c),(c=Ll.get(A))&&sb(o,c),k=m.createElement("script"),Vn(k),fs(k,"link",o),m.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},x.set(A,k))}}function JC(o,c,m,x){var A=(A=Z.current)?Cy(A):null;if(!A)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=Ff(m.href),m=go(A).hoistableStyles,x=m.get(c),x||(x={type:"style",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Ff(m.href);var k=go(A).hoistableStyles,te=k.get(o);if(te||(A=A.ownerDocument||A,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(o,te),(k=A.querySelector(pp(o)))&&!k._p&&(te.instance=k,te.state.loading=5),Ll.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ll.set(o,m),k||Lz(A,o,m,te.state))),c&&x===null)throw Error(i(528,""));return te}if(c&&x!==null)throw Error(i(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=qf(m),m=go(A).hoistableScripts,x=m.get(c),x||(x={type:"script",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Ff(o){return'href="'+Wr(o)+'"'}function pp(o){return'link[rel="stylesheet"]['+o+"]"}function eA(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function Lz(o,c,m,x){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=o.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),fs(c,"link",m),Vn(c),o.head.appendChild(c))}function qf(o){return'[src="'+Wr(o)+'"]'}function gp(o){return"script[async]"+o}function tA(o,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var x=o.querySelector('style[data-href~="'+Wr(m.href)+'"]');if(x)return c.instance=x,Vn(x),x;var A=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),Vn(x),fs(x,"style",A),Ay(x,m.precedence,o),c.instance=x;case"stylesheet":A=Ff(m.href);var k=o.querySelector(pp(A));if(k)return c.state.loading|=4,c.instance=k,Vn(k),k;x=eA(m),(A=Ll.get(A))&&ab(x,A),k=(o.ownerDocument||o).createElement("link"),Vn(k);var te=k;return te._p=new Promise(function(pe,Ae){te.onload=pe,te.onerror=Ae}),fs(k,"link",x),c.state.loading|=4,Ay(k,m.precedence,o),c.instance=k;case"script":return k=qf(m.src),(A=o.querySelector(gp(k)))?(c.instance=A,Vn(A),A):(x=m,(A=Ll.get(k))&&(x=g({},m),sb(x,A)),o=o.ownerDocument||o,A=o.createElement("script"),Vn(A),fs(A,"link",x),o.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,Ay(x,m.precedence,o));return c.instance}function Ay(o,c,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=x.length?x[x.length-1]:null,k=A,te=0;te<x.length;te++){var pe=x[te];if(pe.dataset.precedence===c)k=pe;else if(k!==A)break}k?k.parentNode.insertBefore(o,k.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(o,c.firstChild))}function ab(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function sb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Ey=null;function rA(o,c,m){if(Ey===null){var x=new Map,A=Ey=new Map;A.set(m,x)}else A=Ey,x=A.get(m),x||(x=new Map,A.set(m,x));if(x.has(o))return x;for(x.set(o,null),m=m.getElementsByTagName(o),A=0;A<m.length;A++){var k=m[A];if(!(k[Vs]||k[tn]||o==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var te=k.getAttribute(c)||"";te=o+te;var pe=x.get(te);pe?pe.push(k):x.set(te,[k])}}return x}function nA(o,c,m){o=o.ownerDocument||o,o.head.insertBefore(m,c==="title"?o.querySelector("head > title"):null)}function Rz(o,c,m){if(m===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;return c.rel==="stylesheet"?(o=c.disabled,typeof c.precedence=="string"&&o==null):!0;case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function iA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function Iz(o,c,m,x){if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var A=Ff(x.href),k=c.querySelector(pp(A));if(k){c=k._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=Ty.bind(o),c.then(o,o)),m.state.loading|=4,m.instance=k,Vn(k);return}k=c.ownerDocument||c,x=eA(x),(A=Ll.get(A))&&ab(x,A),k=k.createElement("link"),Vn(k);var te=k;te._p=new Promise(function(pe,Ae){te.onload=pe,te.onerror=Ae}),fs(k,"link",x),m.instance=k}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,c),(c=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=Ty.bind(o),c.addEventListener("load",m),c.addEventListener("error",m))}}var ob=0;function zz(o,c){return o.stylesheets&&o.count===0&&ky(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var x=setTimeout(function(){if(o.stylesheets&&ky(o,o.stylesheets),o.unsuspend){var k=o.unsuspend;o.unsuspend=null,k()}},6e4+c);0<o.imgBytes&&ob===0&&(ob=62500*vz());var A=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&ky(o,o.stylesheets),o.unsuspend)){var k=o.unsuspend;o.unsuspend=null,k()}},(o.imgBytes>ob?50:800)+c);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(x),clearTimeout(A)}}:null}function Ty(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ky(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Py=null;function ky(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Py=new Map,c.forEach(Bz,o),Py=null,Ty.call(o))}function Bz(o,c){if(!(c.state.loading&4)){var m=Py.get(o);if(m)var x=m.get(null);else{m=new Map,Py.set(o,m);for(var A=o.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<A.length;k++){var te=A[k];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(m.set(te.dataset.precedence,te),x=te)}x&&m.set(null,x)}A=c.instance,te=A.getAttribute("data-precedence"),k=m.get(te)||x,k===x&&m.set(null,A),m.set(te,A),this.count++,x=Ty.bind(this),A.addEventListener("load",x),A.addEventListener("error",x),k?k.parentNode.insertBefore(A,k.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(A,o.firstChild)),c.state.loading|=4}}var yp={$$typeof:D,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Fz(o,c,m,x,A,k,te,pe,Ae){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.hiddenUpdates=vs(null),this.identifierPrefix=x,this.onUncaughtError=A,this.onCaughtError=k,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function aA(o,c,m,x,A,k,te,pe,Ae,qe,Xe,nt){return o=new Fz(o,c,m,te,Ae,qe,Xe,nt,pe),c=1,k===!0&&(c|=24),k=Yi(3,null,null,c),o.current=k,k.stateNode=o,c=_u(),c.refCount++,o.pooledCache=c,c.refCount++,k.memoizedState={element:x,isDehydrated:m,cache:c},pt(k),o}function sA(o){return o?(o=Oi,o):Oi}function oA(o,c,m,x,A,k){A=sA(A),x.context===null?x.context=A:x.pendingContext=A,x=Zt(c),x.payload={element:m},k=k===void 0?null:k,k!==null&&(x.callback=k),m=gr(o,x,c),m!==null&&(Ro(m,o,c),cn(m,o,c))}function lA(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function lb(o,c){lA(o,c),(o=o.alternate)&&lA(o,c)}function cA(o){if(o.tag===13||o.tag===31){var c=Es(o,67108864);c!==null&&Ro(c,o,67108864),lb(o,67108864)}}function dA(o){if(o.tag===13||o.tag===31){var c=dl();c=Ir(c);var m=Es(o,c);m!==null&&Ro(m,o,c),lb(o,c)}}var Dy=!0;function qz(o,c,m,x){var A=z.T;z.T=null;var k=ie.p;try{ie.p=2,cb(o,c,m,x)}finally{ie.p=k,z.T=A}}function Uz(o,c,m,x){var A=z.T;z.T=null;var k=ie.p;try{ie.p=8,cb(o,c,m,x)}finally{ie.p=k,z.T=A}}function cb(o,c,m,x){if(Dy){var A=db(x);if(A===null)Q1(o,c,x,Oy,m),hA(o,x);else if(Wz(A,o,c,m,x))x.stopPropagation();else if(hA(o,x),c&4&&-1<Hz.indexOf(o)){for(;A!==null;){var k=Ks(A);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var te=It(k.pendingLanes);if(te!==0){var pe=k;for(pe.pendingLanes|=2,pe.entangledLanes|=2;te;){var Ae=1<<31-_r(te);pe.entanglements[1]|=Ae,te&=~Ae}id(k),(un&6)===0&&(py=lr()+500,up(0))}}break;case 31:case 13:pe=Es(k,2),pe!==null&&Ro(pe,k,2),yy(),lb(k,2)}if(k=db(x),k===null&&Q1(o,c,x,Oy,m),k===A)break;A=k}A!==null&&x.stopPropagation()}else Q1(o,c,x,null,m)}}function db(o){return o=Yo(o),ub(o)}var Oy=null;function ub(o){if(Oy=null,o=xs(o),o!==null){var c=s(o);if(c===null)o=null;else{var m=c.tag;if(m===13){if(o=l(c),o!==null)return o;o=null}else if(m===31){if(o=d(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Oy=o,null}function uA(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nr()){case rr:return 2;case jr:return 8;case dr:case Tt:return 32;case nr:return 268435456;default:return 32}default:return 32}}var hb=!1,zu=null,Bu=null,Fu=null,vp=new Map,xp=new Map,qu=[],Hz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hA(o,c){switch(o){case"focusin":case"focusout":zu=null;break;case"dragenter":case"dragleave":Bu=null;break;case"mouseover":case"mouseout":Fu=null;break;case"pointerover":case"pointerout":vp.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":xp.delete(c.pointerId)}}function bp(o,c,m,x,A,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:k,targetContainers:[A]},c!==null&&(c=Ks(c),c!==null&&cA(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),o)}function Wz(o,c,m,x,A){switch(c){case"focusin":return zu=bp(zu,o,c,m,x,A),!0;case"dragenter":return Bu=bp(Bu,o,c,m,x,A),!0;case"mouseover":return Fu=bp(Fu,o,c,m,x,A),!0;case"pointerover":var k=A.pointerId;return vp.set(k,bp(vp.get(k)||null,o,c,m,x,A)),!0;case"gotpointercapture":return k=A.pointerId,xp.set(k,bp(xp.get(k)||null,o,c,m,x,A)),!0}return!1}function fA(o){var c=xs(o.target);if(c!==null){var m=s(c);if(m!==null){if(c=m.tag,c===13){if(c=l(m),c!==null){o.blockedOn=c,Vo(o.priority,function(){dA(m)});return}}else if(c===31){if(c=d(m),c!==null){o.blockedOn=c,Vo(o.priority,function(){dA(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function My(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=db(o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);vo=x,m.target.dispatchEvent(x),vo=null}else return c=Ks(m),c!==null&&cA(c),o.blockedOn=m,!1;c.shift()}return!0}function mA(o,c,m){My(o)&&m.delete(c)}function $z(){hb=!1,zu!==null&&My(zu)&&(zu=null),Bu!==null&&My(Bu)&&(Bu=null),Fu!==null&&My(Fu)&&(Fu=null),vp.forEach(mA),xp.forEach(mA)}function Ly(o,c){o.blockedOn===c&&(o.blockedOn=null,hb||(hb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$z)))}var Ry=null;function pA(o){Ry!==o&&(Ry=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ry===o&&(Ry=null);for(var c=0;c<o.length;c+=3){var m=o[c],x=o[c+1],A=o[c+2];if(typeof x!="function"){if(ub(x||m)===null)continue;break}var k=Ks(m);k!==null&&(o.splice(c,3),c-=3,d1(k,{pending:!0,data:A,method:m.method,action:x},x,A))}}))}function Uf(o){function c(Ae){return Ly(Ae,o)}zu!==null&&Ly(zu,o),Bu!==null&&Ly(Bu,o),Fu!==null&&Ly(Fu,o),vp.forEach(c),xp.forEach(c);for(var m=0;m<qu.length;m++){var x=qu[m];x.blockedOn===o&&(x.blockedOn=null)}for(;0<qu.length&&(m=qu[0],m.blockedOn===null);)fA(m),m.blockedOn===null&&qu.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var A=m[x],k=m[x+1],te=A[yn]||null;if(typeof k=="function")te||pA(m);else if(te){var pe=null;if(k&&k.hasAttribute("formAction")){if(A=k,te=k[yn]||null)pe=te.formAction;else if(ub(A)!==null)continue}else pe=te.action;typeof pe=="function"?m[x+1]=pe:(m.splice(x,3),x-=3),pA(m)}}}function gA(){function o(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(te){return A=te})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),x||setTimeout(m,20)}function m(){if(!x&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,A=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(m,100),function(){x=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function fb(o){this._internalRoot=o}Iy.prototype.render=fb.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(i(409));var m=c.current,x=dl();oA(m,x,o,c,null,null)},Iy.prototype.unmount=fb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;oA(o.current,2,null,o,null,null),yy(),c[$i]=null}};function Iy(o){this._internalRoot=o}Iy.prototype.unstable_scheduleHydration=function(o){if(o){var c=bi();o={blockedOn:null,target:o,priority:c};for(var m=0;m<qu.length&&c!==0&&c<qu[m].priority;m++);qu.splice(m,0,o),m===0&&fA(o)}};var yA=t.version;if(yA!=="19.2.3")throw Error(i(527,yA,"19.2.3"));ie.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(c),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var Vz={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zy.isDisabled&&zy.supportsFiber)try{xr=zy.inject(Vz),Wt=zy}catch{}}return wp.createRoot=function(o,c){if(!a(o))throw Error(i(299));var m=!1,x="",A=N_,k=__,te=C_;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(te=c.onRecoverableError)),c=aA(o,1,!1,null,null,m,x,null,A,k,te,gA),o[$i]=c.current,G1(o),new fb(c)},wp.hydrateRoot=function(o,c,m){if(!a(o))throw Error(i(299));var x=!1,A="",k=N_,te=__,pe=C_,Ae=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(k=m.onUncaughtError),m.onCaughtError!==void 0&&(te=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.formState!==void 0&&(Ae=m.formState)),c=aA(o,1,!0,c,m??null,x,A,Ae,k,te,pe,gA),c.context=sA(null),m=c.current,x=dl(),x=Ir(x),A=Zt(x),A.callback=null,gr(m,A,x),m=x,c.current.lanes=m,zt(c,m),id(c),o[$i]=c.current,G1(o),new Iy(c)},wp.version="19.2.3",wp}var AA;function nB(){if(AA)return gb.exports;AA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gb.exports=rB(),gb.exports}var iB=nB();const aB=Zl(iB);var EA="popstate";function sB(e={}){function t(i,a){let{pathname:s,search:l,hash:d}=i.location;return s5("",{pathname:s,search:l,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Gp(a)}return lB(t,n,null,e)}function yi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oB(){return Math.random().toString(36).substring(2,10)}function TA(e,t){return{usr:e.state,key:e.key,idx:t}}function s5(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Em(t):t,state:n,key:t&&t.key||i||oB()}}function Gp({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Em(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function lB(e,t,n,i={}){let{window:a=document.defaultView,v5Compat:s=!1}=i,l=a.history,d="POP",h=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function g(){d="POP";let S=p(),_=S==null?null:S-f;f=S,h&&h({action:d,location:w.location,delta:_})}function j(S,_){d="PUSH";let E=s5(w.location,S,_);f=p()+1;let D=TA(E,f),W=w.createHref(E);try{l.pushState(D,"",W)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;a.location.assign(W)}s&&h&&h({action:d,location:w.location,delta:1})}function v(S,_){d="REPLACE";let E=s5(w.location,S,_);f=p();let D=TA(E,f),W=w.createHref(E);l.replaceState(D,"",W),s&&h&&h({action:d,location:w.location,delta:0})}function b(S){return cB(S)}let w={get action(){return d},get location(){return e(a,l)},listen(S){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(EA,g),h=S,()=>{a.removeEventListener(EA,g),h=null}},createHref(S){return t(a,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:j,replace:v,go(S){return l.go(S)}};return w}function cB(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),yi(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Gp(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function wD(e,t,n="/"){return dB(e,t,n,!1)}function dB(e,t,n,i){let a=typeof t=="string"?Em(t):t,s=eu(a.pathname||"/",n);if(s==null)return null;let l=SD(e);uB(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let f=wB(s);d=bB(l[h],f,i)}return d}function SD(e,t=[],n=[],i="",a=!1){let s=(l,d,h=a,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&h)return;yi(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let g=Zd([i,p.relativePath]),j=n.concat(p);l.children&&l.children.length>0&&(yi(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),SD(l.children,t,j,g,h)),!(l.path==null&&!l.index)&&t.push({path:g,score:vB(g,l.index),routesMeta:j})};return e.forEach((l,d)=>{if(l.path===""||!l.path?.includes("?"))s(l,d);else for(let h of ND(l.path))s(l,d,!0,h)}),t}function ND(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let l=ND(i.join("/")),d=[];return d.push(...l.map(h=>h===""?s:[s,h].join("/"))),a&&d.push(...l),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function uB(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xB(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var hB=/^:[\w-]+$/,fB=3,mB=2,pB=1,gB=10,yB=-2,PA=e=>e==="*";function vB(e,t){let n=e.split("/"),i=n.length;return n.some(PA)&&(i+=yB),t&&(i+=mB),n.filter(a=>!PA(a)).reduce((a,s)=>a+(hB.test(s)?fB:s===""?pB:gB),i)}function xB(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function bB(e,t,n=!1){let{routesMeta:i}=e,a={},s="/",l=[];for(let d=0;d<i.length;++d){let h=i[d],f=d===i.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=Hv({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),j=h.route;if(!g&&f&&n&&!i[i.length-1].route.index&&(g=Hv({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:Zd([s,g.pathname]),pathnameBase:CB(Zd([s,g.pathnameBase])),route:j}),g.pathnameBase!=="/"&&(s=Zd([s,g.pathnameBase]))}return l}function Hv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=jB(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],l=s.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:g},j)=>{if(p==="*"){let b=d[j]||"";l=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const v=d[j];return g&&!v?f[p]=void 0:f[p]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:l,pattern:e}}function jB(e,t=!1,n=!0){Hl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function wB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hl(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function eu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}var _D=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SB=e=>_D.test(e);function NB(e,t="/"){let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?Em(e):e,s;if(n)if(SB(n))s=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Hl(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?s=kA(n.substring(1),"/"):s=kA(n,t)}else s=t;return{pathname:s,search:AB(i),hash:EB(a)}}function kA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function bb(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _B(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Lw(e){let t=_B(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Rw(e,t,n,i=!1){let a;typeof e=="string"?a=Em(e):(a={...e},yi(!a.pathname||!a.pathname.includes("?"),bb("?","pathname","search",a)),yi(!a.pathname||!a.pathname.includes("#"),bb("#","pathname","hash",a)),yi(!a.search||!a.search.includes("#"),bb("#","search","hash",a)));let s=e===""||a.pathname==="",l=s?"/":a.pathname,d;if(l==null)d=n;else{let g=t.length-1;if(!i&&l.startsWith("..")){let j=l.split("/");for(;j[0]==="..";)j.shift(),g-=1;a.pathname=j.join("/")}d=g>=0?t[g]:"/"}let h=NB(a,d),f=l&&l!=="/"&&l.endsWith("/"),p=(s||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var Zd=e=>e.join("/").replace(/\/\/+/g,"/"),CB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,TB=class{constructor(e,t,n,i=!1){this.status=e,this.statusText=t||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function PB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function kB(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var CD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function AD(e,t){let n=e;if(typeof n!="string"||!_D.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,a=!1;if(CD)try{let s=new URL(window.location.href),l=n.startsWith("//")?new URL(s.protocol+n):new URL(n),d=eu(l.pathname,t);l.origin===s.origin&&d!=null?n=d+l.search+l.hash:a=!0}catch{Hl(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ED=["POST","PUT","PATCH","DELETE"];new Set(ED);var DB=["GET",...ED];new Set(DB);var Tm=P.createContext(null);Tm.displayName="DataRouter";var Z0=P.createContext(null);Z0.displayName="DataRouterState";var OB=P.createContext(!1),TD=P.createContext({isTransitioning:!1});TD.displayName="ViewTransition";var MB=P.createContext(new Map);MB.displayName="Fetchers";var LB=P.createContext(null);LB.displayName="Await";var xl=P.createContext(null);xl.displayName="Navigation";var xg=P.createContext(null);xg.displayName="Location";var Ac=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ac.displayName="Route";var Iw=P.createContext(null);Iw.displayName="RouteError";var PD="REACT_ROUTER_ERROR",RB="REDIRECT",IB="ROUTE_ERROR_RESPONSE";function zB(e){if(e.startsWith(`${PD}:${RB}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function BB(e){if(e.startsWith(`${PD}:${IB}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new TB(t.status,t.statusText,t.data)}catch{}}function FB(e,{relative:t}={}){yi(Pm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=P.useContext(xl),{hash:a,pathname:s,search:l}=bg(e,{relative:t}),d=s;return n!=="/"&&(d=s==="/"?n:Zd([n,s])),i.createHref({pathname:d,search:l,hash:a})}function Pm(){return P.useContext(xg)!=null}function Ec(){return yi(Pm(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(xg).location}var kD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DD(e){P.useContext(xl).static||P.useLayoutEffect(e)}function Cn(){let{isDataRoute:e}=P.useContext(Ac);return e?JB():qB()}function qB(){yi(Pm(),"useNavigate() may be used only in the context of a <Router> component.");let e=P.useContext(Tm),{basename:t,navigator:n}=P.useContext(xl),{matches:i}=P.useContext(Ac),{pathname:a}=Ec(),s=JSON.stringify(Lw(i)),l=P.useRef(!1);return DD(()=>{l.current=!0}),P.useCallback((h,f={})=>{if(Hl(l.current,kD),!l.current)return;if(typeof h=="number"){n.go(h);return}let p=Rw(h,JSON.parse(s),a,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Zd([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,s,a,e])}P.createContext(null);function nf(){let{matches:e}=P.useContext(Ac),t=e[e.length-1];return t?t.params:{}}function bg(e,{relative:t}={}){let{matches:n}=P.useContext(Ac),{pathname:i}=Ec(),a=JSON.stringify(Lw(n));return P.useMemo(()=>Rw(e,JSON.parse(a),i,t==="path"),[e,a,i,t])}function UB(e,t){return OD(e,t)}function OD(e,t,n,i,a){yi(Pm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(xl),{matches:l}=P.useContext(Ac),d=l[l.length-1],h=d?d.params:{},f=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let E=g&&g.path||"";LD(f,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let j=Ec(),v;if(t){let E=typeof t=="string"?Em(t):t;yi(p==="/"||E.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=j;let b=v.pathname||"/",w=b;if(p!=="/"){let E=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=wD(e,{pathname:w});Hl(g||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Hl(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=KB(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},h,E.params),pathname:Zd([p,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:Zd([p,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,n,i,a);return t&&_?P.createElement(xg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function HB(){let e=XB(),t=PB(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:a},n):null,l)}var WB=P.createElement(HB,null),MD=class extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=BB(e.digest);n&&(e=n)}let t=e!==void 0?P.createElement(Ac.Provider,{value:this.props.routeContext},P.createElement(Iw.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?P.createElement($B,{error:e},t):t}};MD.contextType=OB;var jb=new WeakMap;function $B({children:e,error:t}){let{basename:n}=P.useContext(xl);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=zB(t.digest);if(i){let a=jb.get(t);if(a)throw a;let s=AD(i.location,n);if(CD&&!jb.get(t))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw jb.set(t,l),l}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function VB({routeContext:e,match:t,children:n}){let i=P.useContext(Tm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Ac.Provider,{value:e},n)}function KB(e,t=[],n=null,i=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,l=n?.errors;if(l!=null){let p=s.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);yi(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let d=!1,h=-1;if(n)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:j,errors:v}=n,b=g.route.loader&&!j.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){d=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}let f=n&&i?(p,g)=>{i(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:kB(n.matches),errorInfo:g})}:void 0;return s.reduceRight((p,g,j)=>{let v,b=!1,w=null,S=null;n&&(v=l&&g.route.id?l[g.route.id]:void 0,w=g.route.errorElement||WB,d&&(h<0&&j===0?(LD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):h===j&&(b=!0,S=g.route.hydrateFallbackElement||null)));let _=t.concat(s.slice(0,j+1)),E=()=>{let D;return v?D=w:b?D=S:g.route.Component?D=P.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=p,P.createElement(VB,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:D})};return n&&(g.route.ErrorBoundary||g.route.errorElement||j===0)?P.createElement(MD,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:f}):E()},null)}function zw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GB(e){let t=P.useContext(Tm);return yi(t,zw(e)),t}function QB(e){let t=P.useContext(Z0);return yi(t,zw(e)),t}function YB(e){let t=P.useContext(Ac);return yi(t,zw(e)),t}function Bw(e){let t=YB(e),n=t.matches[t.matches.length-1];return yi(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ZB(){return Bw("useRouteId")}function XB(){let e=P.useContext(Iw),t=QB("useRouteError"),n=Bw("useRouteError");return e!==void 0?e:t.errors?.[n]}function JB(){let{router:e}=GB("useNavigate"),t=Bw("useNavigate"),n=P.useRef(!1);return DD(()=>{n.current=!0}),P.useCallback(async(a,s={})=>{Hl(n.current,kD),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var DA={};function LD(e,t,n){!t&&!DA[e]&&(DA[e]=!0,Hl(!1,n))}P.memo(eF);function eF({routes:e,future:t,state:n,onError:i}){return OD(e,void 0,n,i,t)}function Mh({to:e,replace:t,state:n,relative:i}){yi(Pm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(xl);Hl(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(Ac),{pathname:l}=Ec(),d=Cn(),h=Rw(e,Lw(s),l,i==="path"),f=JSON.stringify(h);return P.useEffect(()=>{d(JSON.parse(f),{replace:t,state:n,relative:i})},[d,f,i,t,n]),null}function Lt(e){yi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tF({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:a,static:s=!1,unstable_useTransitions:l}){yi(!Pm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:d,navigator:a,static:s,unstable_useTransitions:l,future:{}}),[d,a,s,l]);typeof n=="string"&&(n=Em(n));let{pathname:f="/",search:p="",hash:g="",state:j=null,key:v="default"}=n,b=P.useMemo(()=>{let w=eu(f,d);return w==null?null:{location:{pathname:w,search:p,hash:g,state:j,key:v},navigationType:i}},[d,f,p,g,j,v,i]);return Hl(b!=null,`<Router basename="${d}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:P.createElement(xl.Provider,{value:h},P.createElement(xg.Provider,{children:t,value:b}))}function By({children:e,location:t}){return UB(o5(e),t)}function o5(e,t=[]){let n=[];return P.Children.forEach(e,(i,a)=>{if(!P.isValidElement(i))return;let s=[...t,a];if(i.type===P.Fragment){n.push.apply(n,o5(i.props.children,s));return}yi(i.type===Lt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yi(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=o5(i.props.children,s)),n.push(l)}),n}var Nv="get",_v="application/x-www-form-urlencoded";function X0(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function rF(e){return X0(e)&&e.tagName.toLowerCase()==="button"}function nF(e){return X0(e)&&e.tagName.toLowerCase()==="form"}function iF(e){return X0(e)&&e.tagName.toLowerCase()==="input"}function aF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sF(e,t){return e.button===0&&(!t||t==="_self")&&!aF(e)}var Fy=null;function oF(){if(Fy===null)try{new FormData(document.createElement("form"),0),Fy=!1}catch{Fy=!0}return Fy}var lF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wb(e){return e!=null&&!lF.has(e)?(Hl(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_v}"`),null):e}function cF(e,t){let n,i,a,s,l;if(nF(e)){let d=e.getAttribute("action");i=d?eu(d,t):null,n=e.getAttribute("method")||Nv,a=wb(e.getAttribute("enctype"))||_v,s=new FormData(e)}else if(rF(e)||iF(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||d.getAttribute("action");if(i=h?eu(h,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||Nv,a=wb(e.getAttribute("formenctype"))||wb(d.getAttribute("enctype"))||_v,s=new FormData(d,e),!oF()){let{name:f,type:p,value:g}=e;if(p==="image"){let j=f?`${f}.`:"";s.append(`${j}x`,"0"),s.append(`${j}y`,"0")}else f&&s.append(f,g)}}else{if(X0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nv,i=null,a=_v,l=e}return s&&a==="text/plain"&&(l=s,s=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dF(e,t,n,i){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:t&&eu(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function uF(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hF(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fF(e,t,n){let i=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let l=await uF(s,n);return l.links?l.links():[]}return[]}));return yF(i.flat(1).filter(hF).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function OA(e,t,n,i,a,s){let l=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>n[f].pathname!==h.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==h.params["*"];return s==="assets"?t.filter((h,f)=>l(h,f)||d(h,f)):s==="data"?t.filter((h,f)=>{let p=i.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function mF(e,t,{includeHydrateFallback:n}={}){return pF(e.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function pF(e){return[...new Set(e)]}function gF(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function yF(e,t){let n=new Set;return new Set(t),e.reduce((i,a)=>{let s=JSON.stringify(gF(a));return n.has(s)||(n.add(s),i.push({key:s,link:a})),i},[])}function RD(){let e=P.useContext(Tm);return Fw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vF(){let e=P.useContext(Z0);return Fw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qw=P.createContext(void 0);qw.displayName="FrameworkContext";function ID(){let e=P.useContext(qw);return Fw(e,"You must render this element inside a <HydratedRouter> element"),e}function xF(e,t){let n=P.useContext(qw),[i,a]=P.useState(!1),[s,l]=P.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=t,j=P.useRef(null);P.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=_=>{_.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return j.current&&S.observe(j.current),()=>{S.disconnect()}}},[e]),P.useEffect(()=>{if(i){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[i]);let v=()=>{a(!0)},b=()=>{a(!1),l(!1)};return n?e!=="intent"?[s,j,{}]:[s,j,{onFocus:Sp(d,v),onBlur:Sp(h,b),onMouseEnter:Sp(f,v),onMouseLeave:Sp(p,b),onTouchStart:Sp(g,v)}]:[!1,j,{}]}function Sp(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function bF({page:e,...t}){let{router:n}=RD(),i=P.useMemo(()=>wD(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?P.createElement(wF,{page:e,matches:i,...t}):null}function jF(e){let{manifest:t,routeModules:n}=ID(),[i,a]=P.useState([]);return P.useEffect(()=>{let s=!1;return fF(e,t,n).then(l=>{s||a(l)}),()=>{s=!0}},[e,t,n]),i}function wF({page:e,matches:t,...n}){let i=Ec(),{future:a,manifest:s,routeModules:l}=ID(),{basename:d}=RD(),{loaderData:h,matches:f}=vF(),p=P.useMemo(()=>OA(e,t,f,s,i,"data"),[e,t,f,s,i]),g=P.useMemo(()=>OA(e,t,f,s,i,"assets"),[e,t,f,s,i]),j=P.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let w=new Set,S=!1;if(t.forEach(E=>{let D=s.routes[E.route.id];!D||!D.hasLoader||(!p.some(W=>W.route.id===E.route.id)&&E.route.id in h&&l[E.route.id]?.shouldRevalidate||D.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let _=dF(e,d,a.unstable_trailingSlashAwareDataRequests,"data");return S&&w.size>0&&_.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[_.pathname+_.search]},[d,a.unstable_trailingSlashAwareDataRequests,h,i,s,p,t,e,l]),v=P.useMemo(()=>mF(g,s),[g,s]),b=jF(g);return P.createElement(P.Fragment,null,j.map(w=>P.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>P.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:S})=>P.createElement("link",{key:w,nonce:n.nonce,...S})))}function SF(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var NF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NF&&(window.__reactRouterVersion="7.12.0")}catch{}function _F({basename:e,children:t,unstable_useTransitions:n,window:i}){let a=P.useRef();a.current==null&&(a.current=sB({window:i,v5Compat:!0}));let s=a.current,[l,d]=P.useState({action:s.action,location:s.location}),h=P.useCallback(f=>{n===!1?d(f):P.startTransition(()=>d(f))},[n]);return P.useLayoutEffect(()=>s.listen(h),[s,h]),P.createElement(tF,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:n})}var zD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yr=P.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:a,reloadDocument:s,replace:l,state:d,target:h,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:j,...v},b){let{basename:w,unstable_useTransitions:S}=P.useContext(xl),_=typeof f=="string"&&zD.test(f),E=AD(f,w);f=E.to;let D=FB(f,{relative:a}),[W,K,B]=xF(i,v),F=TF(f,{replace:l,state:d,target:h,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:j,unstable_useTransitions:S});function H(R){t&&t(R),R.defaultPrevented||F(R)}let I=P.createElement("a",{...v,...B,href:E.absoluteURL||D,onClick:E.isExternal||s?t:H,ref:SF(b,K),target:h,"data-discover":!_&&n==="render"?"true":void 0});return W&&!_?P.createElement(P.Fragment,null,I,P.createElement(bF,{page:D})):I});yr.displayName="Link";var CF=P.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:a=!1,style:s,to:l,viewTransition:d,children:h,...f},p){let g=bg(l,{relative:f.relative}),j=Ec(),v=P.useContext(Z0),{navigator:b,basename:w}=P.useContext(xl),S=v!=null&&MF(g)&&d===!0,_=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,E=j.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(E=E.toLowerCase(),D=D?D.toLowerCase():null,_=_.toLowerCase()),D&&w&&(D=eu(D,w)||D);const W=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let K=E===_||!a&&E.startsWith(_)&&E.charAt(W)==="/",B=D!=null&&(D===_||!a&&D.startsWith(_)&&D.charAt(_.length)==="/"),F={isActive:K,isPending:B,isTransitioning:S},H=K?t:void 0,I;typeof i=="function"?I=i(F):I=[i,K?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(F):s;return P.createElement(yr,{...f,"aria-current":H,className:I,ref:p,style:R,to:l,viewTransition:d},typeof h=="function"?h(F):h)});CF.displayName="NavLink";var AF=P.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:a,state:s,method:l=Nv,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:j,...v},b)=>{let{unstable_useTransitions:w}=P.useContext(xl),S=DF(),_=OF(d,{relative:f}),E=l.toLowerCase()==="get"?"get":"post",D=typeof d=="string"&&zD.test(d),W=K=>{if(h&&h(K),K.defaultPrevented)return;K.preventDefault();let B=K.nativeEvent.submitter,F=B?.getAttribute("formmethod")||l,H=()=>S(B||K.currentTarget,{fetcherKey:t,method:F,navigate:n,replace:a,state:s,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:j});w&&n!==!1?P.startTransition(()=>H()):H()};return P.createElement("form",{ref:b,method:E,action:_,onSubmit:i?h:W,...v,"data-discover":!D&&e==="render"?"true":void 0})});AF.displayName="Form";function EF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BD(e){let t=P.useContext(Tm);return yi(t,EF(e)),t}function TF(e,{target:t,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:d,unstable_useTransitions:h}={}){let f=Cn(),p=Ec(),g=bg(e,{relative:s});return P.useCallback(j=>{if(sF(j,t)){j.preventDefault();let v=n!==void 0?n:Gp(p)===Gp(g),b=()=>f(e,{replace:v,state:i,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:d});h?P.startTransition(()=>b()):b()}},[p,f,g,n,i,t,e,a,s,l,d,h])}var PF=0,kF=()=>`__${String(++PF)}__`;function DF(){let{router:e}=BD("useSubmit"),{basename:t}=P.useContext(xl),n=ZB(),i=e.fetch,a=e.navigate;return P.useCallback(async(s,l={})=>{let{action:d,method:h,encType:f,formData:p,body:g}=cF(s,t);if(l.navigate===!1){let j=l.fetcherKey||kF();await i(j,n,l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||f,flushSync:l.flushSync})}else await a(l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,a,t,n])}function OF(e,{relative:t}={}){let{basename:n}=P.useContext(xl),i=P.useContext(Ac);yi(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={...bg(e||".",{relative:t})},l=Ec();if(e==null){s.search=l.search;let d=new URLSearchParams(s.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Zd([n,s.pathname])),Gp(s)}function MF(e,{relative:t}={}){let n=P.useContext(TD);yi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=BD("useViewTransitionState"),a=bg(e,{relative:t});if(!n.isTransitioning)return!1;let s=eu(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=eu(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Hv(a.pathname,l)!=null||Hv(a.pathname,s)!=null}var FD=jD(),km=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},LF={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},RF=class{#e=LF;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Eh=new RF;function IF(e){setTimeout(e,0)}var Uh=typeof window>"u"||"Deno"in globalThis;function ao(){}function zF(e,t){return typeof e=="function"?e(t):e}function l5(e){return typeof e=="number"&&e>=0&&e!==1/0}function qD(e,t){return Math.max(e+(t||0)-Date.now(),0)}function eh(e,t){return typeof e=="function"?e(t):e}function Bl(e,t){return typeof e=="function"?e(t):e}function MA(e,t){const{type:n="all",exact:i,fetchStatus:a,predicate:s,queryKey:l,stale:d}=e;if(l){if(i){if(t.queryHash!==Uw(l,t.options))return!1}else if(!Qp(t.queryKey,l))return!1}if(n!=="all"){const h=t.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||a&&a!==t.state.fetchStatus||s&&!s(t))}function LA(e,t){const{exact:n,status:i,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(Hh(t.options.mutationKey)!==Hh(s))return!1}else if(!Qp(t.options.mutationKey,s))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function Uw(e,t){return(t?.queryKeyHashFn||Hh)(e)}function Hh(e){return JSON.stringify(e,(t,n)=>c5(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function Qp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Qp(e[n],t[n])):!1}var BF=Object.prototype.hasOwnProperty;function UD(e,t,n=0){if(e===t)return e;if(n>500)return t;const i=RA(e)&&RA(t);if(!i&&!(c5(e)&&c5(t)))return t;const s=(i?e:Object.keys(e)).length,l=i?t:Object.keys(t),d=l.length,h=i?new Array(d):{};let f=0;for(let p=0;p<d;p++){const g=i?p:l[p],j=e[g],v=t[g];if(j===v){h[g]=j,(i?p<s:BF.call(e,g))&&f++;continue}if(j===null||v===null||typeof j!="object"||typeof v!="object"){h[g]=v;continue}const b=UD(j,v,n+1);h[g]=b,b===j&&f++}return s===d&&f===s?e:h}function Wv(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function RA(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function c5(e){if(!IA(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!IA(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function IA(e){return Object.prototype.toString.call(e)==="[object Object]"}function FF(e){return new Promise(t=>{Eh.setTimeout(t,e)})}function d5(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?UD(e,t):t}function qF(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function UF(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var Hw=Symbol();function HD(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Hw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ww(e,t){return typeof e=="function"?e(...t):!!e}function HF(e,t,n){let i=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??=t(),i||(i=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var WF=class extends km{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Uh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},$w=new WF;function u5(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),e(a)},n.reject=a=>{i({status:"rejected",reason:a}),t(a)},n}var $F=IF;function VF(){let e=[],t=0,n=d=>{d()},i=d=>{d()},a=$F;const s=d=>{t?e.push(d):a(()=>{n(d)})},l=()=>{const d=e;e=[],d.length&&a(()=>{i(()=>{d.forEach(h=>{n(h)})})})};return{batch:d=>{let h;t++;try{h=d()}finally{t--,t||l()}return h},batchCalls:d=>(...h)=>{s(()=>{d(...h)})},schedule:s,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{i=d},setScheduler:d=>{a=d}}}var Ta=VF(),KF=class extends km{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Uh&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},$v=new KF;function GF(e){return Math.min(1e3*2**e,3e4)}function WD(e){return(e??"online")==="online"?$v.isOnline():!0}var h5=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function $D(e){let t=!1,n=0,i;const a=u5(),s=()=>a.status!=="pending",l=w=>{if(!s()){const S=new h5(w);j(S),e.onCancel?.(S)}},d=()=>{t=!0},h=()=>{t=!1},f=()=>$w.isFocused()&&(e.networkMode==="always"||$v.isOnline())&&e.canRun(),p=()=>WD(e.networkMode)&&e.canRun(),g=w=>{s()||(i?.(),a.resolve(w))},j=w=>{s()||(i?.(),a.reject(w))},v=()=>new Promise(w=>{i=S=>{(s()||f())&&w(S)},e.onPause?.()}).then(()=>{i=void 0,s()||e.onContinue?.()}),b=()=>{if(s())return;let w;const S=n===0?e.initialPromise:void 0;try{w=S??e.fn()}catch(_){w=Promise.reject(_)}Promise.resolve(w).then(g).catch(_=>{if(s())return;const E=e.retry??(Uh?0:3),D=e.retryDelay??GF,W=typeof D=="function"?D(n,_):D,K=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,_);if(t||!K){j(_);return}n++,e.onFail?.(n,_),FF(W).then(()=>f()?void 0:v()).then(()=>{t?j(_):b()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(i?.(),a),cancelRetry:d,continueRetry:h,canStart:p,start:()=>(p()?b():v().then(b),a)}}var VD=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),l5(this.gcTime)&&(this.#e=Eh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Uh?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Eh.clearTimeout(this.#e),this.#e=void 0)}},QF=class extends VD{#e;#t;#r;#i;#n;#s;#o;constructor(e){super(),this.#o=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=BA(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=BA(this.options);t.data!==void 0&&(this.setState(zA(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=d5(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(ao).catch(ao):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Bl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>eh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!qD(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},a=()=>{const d=HD(this.options,t),f=(()=>{const p={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(p),p})();return this.#o=!1,this.options.persister?this.options.persister(d,f,this):d(f)},l=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:a};return i(d),d})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#n=$D({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:d=>{d instanceof h5&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(d,h)=>{this.#a({type:"failed",failureCount:d,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const d=await this.#n.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#r.config.onSuccess?.(d,this),this.#r.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof h5){if(d.silent)return this.#n.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#a({type:"error",error:d}),this.#r.config.onError?.(d,this),this.#r.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#a(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...KD(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...zA(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const a=e.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Ta.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function KD(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:WD(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function zA(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function BA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,i=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var YF=class extends km{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=u5(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#i=void 0;#n;#s;#o;#a;#p;#h;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),FA(this.#t,this.options)?this.#u():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return f5(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return f5(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#j(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Bl(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),t._defaulted&&!Wv(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&qA(this.#t,n,this.options,t)&&this.#u(),this.updateResult(),i&&(this.#t!==n||Bl(this.options.enabled,this.#t)!==Bl(t.enabled,this.#t)||eh(this.options.staleTime,this.#t)!==eh(t.staleTime,this.#t))&&this.#g();const a=this.#y();i&&(this.#t!==n||Bl(this.options.enabled,this.#t)!==Bl(t.enabled,this.#t)||a!==this.#l)&&this.#v(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return XF(this,n)&&(this.#i=n,this.#s=this.options,this.#n=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#u(e){this.#w();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(ao)),t}#g(){this.#b();const e=eh(this.options.staleTime,this.#t);if(Uh||this.#i.isStale||!l5(e))return;const n=qD(this.#i.dataUpdatedAt,e)+1;this.#c=Eh.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#j(),this.#l=e,!(Uh||Bl(this.options.enabled,this.#t)===!1||!l5(this.#l)||this.#l===0)&&(this.#d=Eh.setInterval(()=>{(this.options.refetchIntervalInBackground||$w.isFocused())&&this.#u()},this.#l))}#x(){this.#g(),this.#v(this.#y())}#b(){this.#c&&(Eh.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(Eh.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const n=this.#t,i=this.options,a=this.#i,s=this.#n,l=this.#s,h=e!==n?e.state:this.#r,{state:f}=e;let p={...f},g=!1,j;if(t._optimisticResults){const H=this.hasListeners(),I=!H&&FA(e,t),R=H&&qA(e,n,t,i);(I||R)&&(p={...p,...KD(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:w}=p;j=p.data;let S=!1;if(t.placeholderData!==void 0&&j===void 0&&w==="pending"){let H;a?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(H=a.data,S=!0):H=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,H!==void 0&&(w="success",j=d5(a?.data,H,t),g=!0)}if(t.select&&j!==void 0&&!S)if(a&&j===s?.data&&t.select===this.#p)j=this.#h;else try{this.#p=t.select,j=t.select(j),j=d5(a?.data,j,t),this.#h=j,this.#a=null}catch(H){this.#a=H}this.#a&&(v=this.#a,j=this.#h,b=Date.now(),w="error");const _=p.fetchStatus==="fetching",E=w==="pending",D=w==="error",W=E&&_,K=j!==void 0,F={status:w,fetchStatus:p.fetchStatus,isPending:E,isSuccess:w==="success",isError:D,isInitialLoading:W,isLoading:W,data:j,dataUpdatedAt:p.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:_,isRefetching:_&&!E,isLoadingError:D&&!K,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:D&&K,isStale:Vw(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Bl(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const H=F.data!==void 0,I=F.status==="error"&&!H,R=ae=>{I?ae.reject(F.error):H&&ae.resolve(F.data)},Y=()=>{const ae=this.#o=F.promise=u5();R(ae)},G=this.#o;switch(G.status){case"pending":e.queryHash===n.queryHash&&R(G);break;case"fulfilled":(I||F.data!==G.value)&&Y();break;case"rejected":(!I||F.error!==G.reason)&&Y();break}}return F}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#s=this.options,this.#n.data!==void 0&&(this.#f=this.#t),Wv(t,e))return;this.#i=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!this.#m.size)return!0;const s=new Set(a??this.#m);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(l=>{const d=l;return this.#i[d]!==e[d]&&s.has(d)})};this.#S({listeners:n()})}#w(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#S(e){Ta.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ZF(e,t){return Bl(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function FA(e,t){return ZF(e,t)||e.state.data!==void 0&&f5(e,t,t.refetchOnMount)}function f5(e,t,n){if(Bl(t.enabled,e)!==!1&&eh(t.staleTime,e)!=="static"){const i=typeof n=="function"?n(e):n;return i==="always"||i!==!1&&Vw(e,t)}return!1}function qA(e,t,n,i){return(e!==t||Bl(i.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Vw(e,n)}function Vw(e,t){return Bl(t.enabled,e)!==!1&&e.isStaleByTime(eh(t.staleTime,e))}function XF(e,t){return!Wv(e.getCurrentResult(),t)}function UA(e){return{onFetch:(t,n)=>{const i=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let d={pages:[],pageParams:[]},h=0;const f=async()=>{let p=!1;const g=b=>{HF(b,()=>t.signal,()=>p=!0)},j=HD(t.options,t.fetchOptions),v=async(b,w,S)=>{if(p)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const B={client:t.client,queryKey:t.queryKey,pageParam:w,direction:S?"backward":"forward",meta:t.options.meta};return g(B),B})(),D=await j(E),{maxPages:W}=t.options,K=S?UF:qF;return{pages:K(b.pages,D,W),pageParams:K(b.pageParams,w,W)}};if(a&&s.length){const b=a==="backward",w=b?JF:HA,S={pages:s,pageParams:l},_=w(i,S);d=await v(S,_,b)}else{const b=e??s.length;do{const w=h===0?l[0]??i.initialPageParam:HA(i,d);if(h>0&&w==null)break;d=await v(d,w),h++}while(h<b)}return d};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=f}}}function HA(e,{pages:t,pageParams:n}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}function JF(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var e9=class extends VD{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||GD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=$D({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,l)=>{this.#n({type:"failed",failureCount:s,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const i=this.state.status==="pending",a=!this.#i.canStart();try{if(i)t();else{this.#n({type:"pending",variables:e,isPaused:a}),await this.#r.config.onMutate?.(e,this,n);const l=await this.options.onMutate?.(e,n);l!==this.state.context&&this.#n({type:"pending",context:l,variables:e,isPaused:a})}const s=await this.#i.start();return await this.#r.config.onSuccess?.(s,e,this.state.context,this,n),await this.options.onSuccess?.(s,e,this.state.context,n),await this.#r.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,e,this.state.context,n),this.#n({type:"success",data:s}),s}catch(s){try{await this.#r.config.onError?.(s,e,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(s,e,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#r.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,s,e,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#n({type:"error",error:s}),s}finally{this.#r.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ta.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function GD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var t9=class extends km{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,n){const i=new e9({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#e.add(e);const t=qy(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=qy(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=qy(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=qy(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ta.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>LA(t,n))}findAll(e={}){return this.getAll().filter(t=>LA(e,t))}notify(e){Ta.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ta.batch(()=>Promise.all(e.map(t=>t.continue().catch(ao))))}};function qy(e){return e.options.scope?.id}var r9=class extends km{#e;#t=void 0;#r;#i;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),Wv(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&Hh(n.mutationKey)!==Hh(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#s(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#s()}mutate(t,n){return this.#i=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??GD();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#s(t){Ta.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#i.onSuccess?.(t.data,n,i,a)}catch(s){Promise.reject(s)}try{this.#i.onSettled?.(t.data,null,n,i,a)}catch(s){Promise.reject(s)}}else if(t?.type==="error"){try{this.#i.onError?.(t.error,n,i,a)}catch(s){Promise.reject(s)}try{this.#i.onSettled?.(void 0,t.error,n,i,a)}catch(s){Promise.reject(s)}}}this.listeners.forEach(n=>{n(this.#t)})})}},n9=class extends km{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const i=t.queryKey,a=t.queryHash??Uw(i,t);let s=this.get(a);return s||(s=new QF({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ta.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>MA(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>MA(e,n)):t}notify(e){Ta.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ta.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ta.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},i9=class{#e;#t;#r;#i;#n;#s;#o;#a;constructor(e={}){this.#e=e.queryCache||new n9,this.#t=e.mutationCache||new t9,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=$w.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=$v.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(eh(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),s=this.#e.get(i.queryHash)?.state.data,l=zF(t,s);if(l!==void 0)return this.#e.build(this,i).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Ta.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ta.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Ta.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=Ta.batch(()=>this.#e.findAll(e).map(a=>a.cancel(n)));return Promise.all(i).then(ao).catch(ao)}invalidateQueries(e,t={}){return Ta.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=Ta.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(ao)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(ao)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(eh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ao).catch(ao)}fetchInfiniteQuery(e){return e.behavior=UA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ao).catch(ao)}ensureInfiniteQueryData(e){return e.behavior=UA(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return $v.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#i.set(Hh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(i=>{Qp(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#n.set(Hh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],n={};return t.forEach(i=>{Qp(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Uw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Hw&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QD=P.createContext(void 0),Tr=e=>{const t=P.useContext(QD);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},a9=({client:e,children:t})=>(P.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(QD.Provider,{value:e,children:t})),YD=P.createContext(!1),s9=()=>P.useContext(YD);YD.Provider;function o9(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var l9=P.createContext(o9()),c9=()=>P.useContext(l9),d9=(e,t,n)=>{const i=n?.state.error&&typeof e.throwOnError=="function"?Ww(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||i)&&(t.isReset()||(e.retryOnMount=!1))},u9=e=>{P.useEffect(()=>{e.clearReset()},[e])},h9=({result:e,errorResetBoundary:t,throwOnError:n,query:i,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(a&&e.data===void 0||Ww(n,[e.error,i])),f9=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...a)=>n(i(...a)):n(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},m9=(e,t)=>e.isLoading&&e.isFetching&&!t,p9=(e,t)=>e?.suspense&&t.isPending,WA=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function g9(e,t,n){const i=s9(),a=c9(),s=Tr(),l=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const d=s.getQueryCache().get(l.queryHash);l._optimisticResults=i?"isRestoring":"optimistic",f9(l),d9(l,a,d),u9(a);const h=!s.getQueryCache().get(l.queryHash),[f]=P.useState(()=>new t(s,l)),p=f.getOptimisticResult(l),g=!i&&e.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(j=>{const v=g?f.subscribe(Ta.batchCalls(j)):ao;return f.updateResult(),v},[f,g]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),P.useEffect(()=>{f.setOptions(l)},[l,f]),p9(l,p))throw WA(l,f,a);if(h9({result:p,errorResetBoundary:a,throwOnError:l.throwOnError,query:d,suspense:l.suspense}))throw p.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(l,p),l.experimental_prefetchInRender&&!Uh&&m9(p,i)&&(h?WA(l,f,a):d?.promise)?.catch(ao).finally(()=>{f.updateResult()}),l.notifyOnChangeProps?p:f.trackResult(p)}function Ye(e,t){return g9(e,YF)}function ft(e,t){const n=Tr(),[i]=P.useState(()=>new r9(n,e));P.useEffect(()=>{i.setOptions(e)},[i,e]);const a=P.useSyncExternalStore(P.useCallback(l=>i.subscribe(Ta.batchCalls(l)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=P.useCallback((l,d)=>{i.mutate(l,d).catch(ao)},[i]);if(a.error&&Ww(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const $A=e=>{let t;const n=new Set,i=(f,p)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const j=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(v=>v(t,j))}},a=()=>t,d={setState:i,getState:a,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f))},h=t=e(i,a,d);return d},y9=(e=>e?$A(e):$A),v9=e=>e;function x9(e,t=v9){const n=rm.useSyncExternalStore(e.subscribe,rm.useCallback(()=>t(e.getState()),[e,t]),rm.useCallback(()=>t(e.getInitialState()),[e,t]));return rm.useDebugValue(n),n}const VA=e=>{const t=y9(e),n=i=>x9(t,i);return Object.assign(n,t),n},b9=(e=>e?VA(e):VA);function ZD(e,t){return function(){return e.apply(t,arguments)}}const{toString:j9}=Object.prototype,{getPrototypeOf:Kw}=Object,{iterator:J0,toStringTag:XD}=Symbol,ex=(e=>t=>{const n=j9.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tc=e=>(e=e.toLowerCase(),t=>ex(t)===e),tx=e=>t=>typeof t===e,{isArray:Dm}=Array,pm=tx("undefined");function jg(e){return e!==null&&!pm(e)&&e.constructor!==null&&!pm(e.constructor)&&zo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const JD=Tc("ArrayBuffer");function w9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&JD(e.buffer),t}const S9=tx("string"),zo=tx("function"),eO=tx("number"),wg=e=>e!==null&&typeof e=="object",N9=e=>e===!0||e===!1,Cv=e=>{if(ex(e)!=="object")return!1;const t=Kw(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(XD in e)&&!(J0 in e)},_9=e=>{if(!wg(e)||jg(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},C9=Tc("Date"),A9=Tc("File"),E9=Tc("Blob"),T9=Tc("FileList"),P9=e=>wg(e)&&zo(e.pipe),k9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zo(e.append)&&((t=ex(e))==="formdata"||t==="object"&&zo(e.toString)&&e.toString()==="[object FormData]"))},D9=Tc("URLSearchParams"),[O9,M9,L9,R9]=["ReadableStream","Request","Response","Headers"].map(Tc),I9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sg(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),Dm(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(jg(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;let d;for(i=0;i<l;i++)d=s[i],t.call(null,e[d],d,e)}}function tO(e,t){if(jg(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const Th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rO=e=>!pm(e)&&e!==Th;function m5(){const{caseless:e,skipUndefined:t}=rO(this)&&this||{},n={},i=(a,s)=>{const l=e&&tO(n,s)||s;Cv(n[l])&&Cv(a)?n[l]=m5(n[l],a):Cv(a)?n[l]=m5({},a):Dm(a)?n[l]=a.slice():(!t||!pm(a))&&(n[l]=a)};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&Sg(arguments[a],i);return n}const z9=(e,t,n,{allOwnKeys:i}={})=>(Sg(t,(a,s)=>{n&&zo(a)?e[s]=ZD(a,n):e[s]=a},{allOwnKeys:i}),e),B9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),F9=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},q9=(e,t,n,i)=>{let a,s,l;const d={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)l=a[s],(!i||i(l,e,t))&&!d[l]&&(t[l]=e[l],d[l]=!0);e=n!==!1&&Kw(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},U9=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},H9=e=>{if(!e)return null;if(Dm(e))return e;let t=e.length;if(!eO(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},W9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Kw(Uint8Array)),$9=(e,t)=>{const i=(e&&e[J0]).call(e);let a;for(;(a=i.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},V9=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},K9=Tc("HTMLFormElement"),G9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),KA=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Q9=Tc("RegExp"),nO=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Sg(n,(a,s)=>{let l;(l=t(a,s,e))!==!1&&(i[s]=l||a)}),Object.defineProperties(e,i)},Y9=e=>{nO(e,(t,n)=>{if(zo(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(zo(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Z9=(e,t)=>{const n={},i=a=>{a.forEach(s=>{n[s]=!0})};return Dm(e)?i(e):i(String(e).split(t)),n},X9=()=>{},J9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function eq(e){return!!(e&&zo(e.append)&&e[XD]==="FormData"&&e[J0])}const tq=e=>{const t=new Array(10),n=(i,a)=>{if(wg(i)){if(t.indexOf(i)>=0)return;if(jg(i))return i;if(!("toJSON"in i)){t[a]=i;const s=Dm(i)?[]:{};return Sg(i,(l,d)=>{const h=n(l,a+1);!pm(h)&&(s[d]=h)}),t[a]=void 0,s}}return i};return n(e,0)},rq=Tc("AsyncFunction"),nq=e=>e&&(wg(e)||zo(e))&&zo(e.then)&&zo(e.catch),iO=((e,t)=>e?setImmediate:t?((n,i)=>(Th.addEventListener("message",({source:a,data:s})=>{a===Th&&s===n&&i.length&&i.shift()()},!1),a=>{i.push(a),Th.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",zo(Th.postMessage)),iq=typeof queueMicrotask<"u"?queueMicrotask.bind(Th):typeof process<"u"&&process.nextTick||iO,aq=e=>e!=null&&zo(e[J0]),$e={isArray:Dm,isArrayBuffer:JD,isBuffer:jg,isFormData:k9,isArrayBufferView:w9,isString:S9,isNumber:eO,isBoolean:N9,isObject:wg,isPlainObject:Cv,isEmptyObject:_9,isReadableStream:O9,isRequest:M9,isResponse:L9,isHeaders:R9,isUndefined:pm,isDate:C9,isFile:A9,isBlob:E9,isRegExp:Q9,isFunction:zo,isStream:P9,isURLSearchParams:D9,isTypedArray:W9,isFileList:T9,forEach:Sg,merge:m5,extend:z9,trim:I9,stripBOM:B9,inherits:F9,toFlatObject:q9,kindOf:ex,kindOfTest:Tc,endsWith:U9,toArray:H9,forEachEntry:$9,matchAll:V9,isHTMLForm:K9,hasOwnProperty:KA,hasOwnProp:KA,reduceDescriptors:nO,freezeMethods:Y9,toObjectSet:Z9,toCamelCase:G9,noop:X9,toFiniteNumber:J9,findKey:tO,global:Th,isContextDefined:rO,isSpecCompliantForm:eq,toJSONObject:tq,isAsyncFn:rq,isThenable:nq,setImmediate:iO,asap:iq,isIterable:aq};function br(e,t,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}$e.inherits(br,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const aO=br.prototype,sO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sO[e]={value:e}});Object.defineProperties(br,sO);Object.defineProperty(aO,"isAxiosError",{value:!0});br.from=(e,t,n,i,a,s)=>{const l=Object.create(aO);$e.toFlatObject(e,l,function(p){return p!==Error.prototype},f=>f!=="isAxiosError");const d=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return br.call(l,d,h,n,i,a),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",s&&Object.assign(l,s),l};const sq=null;function p5(e){return $e.isPlainObject(e)||$e.isArray(e)}function oO(e){return $e.endsWith(e,"[]")?e.slice(0,-2):e}function GA(e,t,n){return e?e.concat(t).map(function(a,s){return a=oO(a),!n&&s?"["+a+"]":a}).join(n?".":""):t}function oq(e){return $e.isArray(e)&&!e.some(p5)}const lq=$e.toFlatObject($e,{},null,function(t){return/^is[A-Z]/.test(t)});function rx(e,t,n){if(!$e.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=$e.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!$e.isUndefined(S[w])});const i=n.metaTokens,a=n.visitor||p,s=n.dots,l=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(t);if(!$e.isFunction(a))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if($e.isDate(b))return b.toISOString();if($e.isBoolean(b))return b.toString();if(!h&&$e.isBlob(b))throw new br("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(b)||$e.isTypedArray(b)?h&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,w,S){let _=b;if(b&&!S&&typeof b=="object"){if($e.endsWith(w,"{}"))w=i?w:w.slice(0,-2),b=JSON.stringify(b);else if($e.isArray(b)&&oq(b)||($e.isFileList(b)||$e.endsWith(w,"[]"))&&(_=$e.toArray(b)))return w=oO(w),_.forEach(function(D,W){!($e.isUndefined(D)||D===null)&&t.append(l===!0?GA([w],W,s):l===null?w:w+"[]",f(D))}),!1}return p5(b)?!0:(t.append(GA(S,w,s),f(b)),!1)}const g=[],j=Object.assign(lq,{defaultVisitor:p,convertValue:f,isVisitable:p5});function v(b,w){if(!$e.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));g.push(b),$e.forEach(b,function(_,E){(!($e.isUndefined(_)||_===null)&&a.call(t,_,$e.isString(E)?E.trim():E,w,j))===!0&&v(_,w?w.concat(E):[E])}),g.pop()}}if(!$e.isObject(e))throw new TypeError("data must be an object");return v(e),t}function QA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Gw(e,t){this._pairs=[],e&&rx(e,this,t)}const lO=Gw.prototype;lO.append=function(t,n){this._pairs.push([t,n])};lO.toString=function(t){const n=t?function(i){return t.call(this,i,QA)}:QA;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function cq(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function cO(e,t,n){if(!t)return e;const i=n&&n.encode||cq;$e.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(a?s=a(t,n):s=$e.isURLSearchParams(t)?t.toString():new Gw(t,n).toString(i),s){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class YA{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$e.forEach(this.handlers,function(i){i!==null&&t(i)})}}const dO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dq=typeof URLSearchParams<"u"?URLSearchParams:Gw,uq=typeof FormData<"u"?FormData:null,hq=typeof Blob<"u"?Blob:null,fq={isBrowser:!0,classes:{URLSearchParams:dq,FormData:uq,Blob:hq},protocols:["http","https","file","blob","url","data"]},Qw=typeof window<"u"&&typeof document<"u",g5=typeof navigator=="object"&&navigator||void 0,mq=Qw&&(!g5||["ReactNative","NativeScript","NS"].indexOf(g5.product)<0),pq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gq=Qw&&window.location.href||"http://localhost",yq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qw,hasStandardBrowserEnv:mq,hasStandardBrowserWebWorkerEnv:pq,navigator:g5,origin:gq},Symbol.toStringTag,{value:"Module"})),zs={...yq,...fq};function vq(e,t){return rx(e,new zs.classes.URLSearchParams,{visitor:function(n,i,a,s){return zs.isNode&&$e.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function xq(e){return $e.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bq(e){const t={},n=Object.keys(e);let i;const a=n.length;let s;for(i=0;i<a;i++)s=n[i],t[s]=e[s];return t}function uO(e){function t(n,i,a,s){let l=n[s++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),h=s>=n.length;return l=!l&&$e.isArray(a)?a.length:l,h?($e.hasOwnProp(a,l)?a[l]=[a[l],i]:a[l]=i,!d):((!a[l]||!$e.isObject(a[l]))&&(a[l]=[]),t(n,i,a[l],s)&&$e.isArray(a[l])&&(a[l]=bq(a[l])),!d)}if($e.isFormData(e)&&$e.isFunction(e.entries)){const n={};return $e.forEachEntry(e,(i,a)=>{t(xq(i),a,n,0)}),n}return null}function jq(e,t,n){if($e.isString(e))try{return(t||JSON.parse)(e),$e.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Ng={transitional:dO,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,s=$e.isObject(t);if(s&&$e.isHTMLForm(t)&&(t=new FormData(t)),$e.isFormData(t))return a?JSON.stringify(uO(t)):t;if($e.isArrayBuffer(t)||$e.isBuffer(t)||$e.isStream(t)||$e.isFile(t)||$e.isBlob(t)||$e.isReadableStream(t))return t;if($e.isArrayBufferView(t))return t.buffer;if($e.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return vq(t,this.formSerializer).toString();if((d=$e.isFileList(t))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return rx(d?{"files[]":t}:t,h&&new h,this.formSerializer)}}return s||a?(n.setContentType("application/json",!1),jq(t)):t}],transformResponse:[function(t){const n=this.transitional||Ng.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if($e.isResponse(t)||$e.isReadableStream(t))return t;if(t&&$e.isString(t)&&(i&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?br.from(d,br.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zs.classes.FormData,Blob:zs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],e=>{Ng.headers[e]={}});const wq=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sq=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),n=l.substring(0,a).trim().toLowerCase(),i=l.substring(a+1).trim(),!(!n||t[n]&&wq[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},ZA=Symbol("internals");function Np(e){return e&&String(e).trim().toLowerCase()}function Av(e){return e===!1||e==null?e:$e.isArray(e)?e.map(Av):String(e)}function Nq(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const _q=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sb(e,t,n,i,a){if($e.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!$e.isString(t)){if($e.isString(i))return t.indexOf(i)!==-1;if($e.isRegExp(i))return i.test(t)}}function Cq(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Aq(e,t){const n=$e.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,s,l){return this[i].call(this,t,a,s,l)},configurable:!0})})}let Bo=class{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function s(d,h,f){const p=Np(h);if(!p)throw new Error("header name must be a non-empty string");const g=$e.findKey(a,p);(!g||a[g]===void 0||f===!0||f===void 0&&a[g]!==!1)&&(a[g||h]=Av(d))}const l=(d,h)=>$e.forEach(d,(f,p)=>s(f,p,h));if($e.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if($e.isString(t)&&(t=t.trim())&&!_q(t))l(Sq(t),n);else if($e.isObject(t)&&$e.isIterable(t)){let d={},h,f;for(const p of t){if(!$e.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[f=p[0]]=(h=d[f])?$e.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(d,n)}else t!=null&&s(n,t,i);return this}get(t,n){if(t=Np(t),t){const i=$e.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return Nq(a);if($e.isFunction(n))return n.call(this,a,i);if($e.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Np(t),t){const i=$e.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Sb(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function s(l){if(l=Np(l),l){const d=$e.findKey(i,l);d&&(!n||Sb(i,i[d],d,n))&&(delete i[d],a=!0)}}return $e.isArray(t)?t.forEach(s):s(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const s=n[i];(!t||Sb(this,this[s],s,t,!0))&&(delete this[s],a=!0)}return a}normalize(t){const n=this,i={};return $e.forEach(this,(a,s)=>{const l=$e.findKey(i,s);if(l){n[l]=Av(a),delete n[s];return}const d=t?Cq(s):String(s).trim();d!==s&&delete n[s],n[d]=Av(a),i[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return $e.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&$e.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[ZA]=this[ZA]={accessors:{}}).accessors,a=this.prototype;function s(l){const d=Np(l);i[d]||(Aq(a,l),i[d]=!0)}return $e.isArray(t)?t.forEach(s):s(t),this}};Bo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(Bo.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});$e.freezeMethods(Bo);function Nb(e,t){const n=this||Ng,i=t||n,a=Bo.from(i.headers);let s=i.data;return $e.forEach(e,function(d){s=d.call(n,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function hO(e){return!!(e&&e.__CANCEL__)}function Om(e,t,n){br.call(this,e??"canceled",br.ERR_CANCELED,t,n),this.name="CanceledError"}$e.inherits(Om,br,{__CANCEL__:!0});function fO(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new br("Request failed with status code "+n.status,[br.ERR_BAD_REQUEST,br.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Eq(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Tq(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,s=0,l;return t=t!==void 0?t:1e3,function(h){const f=Date.now(),p=i[s];l||(l=f),n[a]=h,i[a]=f;let g=s,j=0;for(;g!==a;)j+=n[g++],g=g%e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),f-l<t)return;const v=p&&f-p;return v?Math.round(j*1e3/v):void 0}}function Pq(e,t){let n=0,i=1e3/t,a,s;const l=(f,p=Date.now())=>{n=p,a=null,s&&(clearTimeout(s),s=null),e(...f)};return[(...f)=>{const p=Date.now(),g=p-n;g>=i?l(f,p):(a=f,s||(s=setTimeout(()=>{s=null,l(a)},i-g)))},()=>a&&l(a)]}const Vv=(e,t,n=3)=>{let i=0;const a=Tq(50,250);return Pq(s=>{const l=s.loaded,d=s.lengthComputable?s.total:void 0,h=l-i,f=a(h),p=l<=d;i=l;const g={loaded:l,total:d,progress:d?l/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&p?(d-l)/f:void 0,event:s,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(g)},n)},XA=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},JA=e=>(...t)=>$e.asap(()=>e(...t)),kq=zs.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zs.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zs.origin),zs.navigator&&/(msie|trident)/i.test(zs.navigator.userAgent)):()=>!0,Dq=zs.hasStandardBrowserEnv?{write(e,t,n,i,a,s,l){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(t)}`];$e.isNumber(n)&&d.push(`expires=${new Date(n).toUTCString()}`),$e.isString(i)&&d.push(`path=${i}`),$e.isString(a)&&d.push(`domain=${a}`),s===!0&&d.push("secure"),$e.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Oq(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Mq(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function mO(e,t,n){let i=!Oq(t);return e&&(i||n==!1)?Mq(e,t):t}const eE=e=>e instanceof Bo?{...e}:e;function Wh(e,t){t=t||{};const n={};function i(f,p,g,j){return $e.isPlainObject(f)&&$e.isPlainObject(p)?$e.merge.call({caseless:j},f,p):$e.isPlainObject(p)?$e.merge({},p):$e.isArray(p)?p.slice():p}function a(f,p,g,j){if($e.isUndefined(p)){if(!$e.isUndefined(f))return i(void 0,f,g,j)}else return i(f,p,g,j)}function s(f,p){if(!$e.isUndefined(p))return i(void 0,p)}function l(f,p){if($e.isUndefined(p)){if(!$e.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function d(f,p,g){if(g in t)return i(f,p);if(g in e)return i(void 0,f)}const h={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(f,p,g)=>a(eE(f),eE(p),g,!0)};return $e.forEach(Object.keys({...e,...t}),function(p){const g=h[p]||a,j=g(e[p],t[p],p);$e.isUndefined(j)&&g!==d||(n[p]=j)}),n}const pO=e=>{const t=Wh({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:l,auth:d}=t;if(t.headers=l=Bo.from(l),t.url=cO(mO(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),$e.isFormData(n)){if(zs.hasStandardBrowserEnv||zs.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if($e.isFunction(n.getHeaders)){const h=n.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([p,g])=>{f.includes(p.toLowerCase())&&l.set(p,g)})}}if(zs.hasStandardBrowserEnv&&(i&&$e.isFunction(i)&&(i=i(t)),i||i!==!1&&kq(t.url))){const h=a&&s&&Dq.read(s);h&&l.set(a,h)}return t},Lq=typeof XMLHttpRequest<"u",Rq=Lq&&function(e){return new Promise(function(n,i){const a=pO(e);let s=a.data;const l=Bo.from(a.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=a,p,g,j,v,b;function w(){v&&v(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(a.method.toUpperCase(),a.url,!0),S.timeout=a.timeout;function _(){if(!S)return;const D=Bo.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),K={data:!d||d==="text"||d==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:D,config:e,request:S};fO(function(F){n(F),w()},function(F){i(F),w()},K),S=null}"onloadend"in S?S.onloadend=_:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(_)},S.onabort=function(){S&&(i(new br("Request aborted",br.ECONNABORTED,e,S)),S=null)},S.onerror=function(W){const K=W&&W.message?W.message:"Network Error",B=new br(K,br.ERR_NETWORK,e,S);B.event=W||null,i(B),S=null},S.ontimeout=function(){let W=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const K=a.transitional||dO;a.timeoutErrorMessage&&(W=a.timeoutErrorMessage),i(new br(W,K.clarifyTimeoutError?br.ETIMEDOUT:br.ECONNABORTED,e,S)),S=null},s===void 0&&l.setContentType(null),"setRequestHeader"in S&&$e.forEach(l.toJSON(),function(W,K){S.setRequestHeader(K,W)}),$e.isUndefined(a.withCredentials)||(S.withCredentials=!!a.withCredentials),d&&d!=="json"&&(S.responseType=a.responseType),f&&([j,b]=Vv(f,!0),S.addEventListener("progress",j)),h&&S.upload&&([g,v]=Vv(h),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(p=D=>{S&&(i(!D||D.type?new Om(null,e,S):D),S.abort(),S=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const E=Eq(a.url);if(E&&zs.protocols.indexOf(E)===-1){i(new br("Unsupported protocol "+E+":",br.ERR_BAD_REQUEST,e));return}S.send(s||null)})},Iq=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,a;const s=function(f){if(!a){a=!0,d();const p=f instanceof Error?f:this.reason;i.abort(p instanceof br?p:new Om(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,s(new br(`timeout ${t} of ms exceeded`,br.ETIMEDOUT))},t);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),e=null)};e.forEach(f=>f.addEventListener("abort",s));const{signal:h}=i;return h.unsubscribe=()=>$e.asap(d),h}},zq=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,a;for(;i<n;)a=i+t,yield e.slice(i,a),i=a},Bq=async function*(e,t){for await(const n of Fq(e))yield*zq(n,t)},Fq=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},tE=(e,t,n,i)=>{const a=Bq(e,t);let s=0,l,d=h=>{l||(l=!0,i&&i(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await a.next();if(f){d(),h.close();return}let g=p.byteLength;if(n){let j=s+=g;n(j)}h.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(h){return d(h),a.return()}},{highWaterMark:2})},rE=64*1024,{isFunction:Uy}=$e,qq=(({Request:e,Response:t})=>({Request:e,Response:t}))($e.global),{ReadableStream:nE,TextEncoder:iE}=$e.global,aE=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Uq=e=>{e=$e.merge.call({skipUndefined:!0},qq,e);const{fetch:t,Request:n,Response:i}=e,a=t?Uy(t):typeof fetch=="function",s=Uy(n),l=Uy(i);if(!a)return!1;const d=a&&Uy(nE),h=a&&(typeof iE=="function"?(b=>w=>b.encode(w))(new iE):async b=>new Uint8Array(await new n(b).arrayBuffer())),f=s&&d&&aE(()=>{let b=!1;const w=new n(zs.origin,{body:new nE,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!w}),p=l&&d&&aE(()=>$e.isReadableStream(new i("").body)),g={stream:p&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!g[b]&&(g[b]=(w,S)=>{let _=w&&w[b];if(_)return _.call(w);throw new br(`Response type '${b}' is not supported`,br.ERR_NOT_SUPPORT,S)})});const j=async b=>{if(b==null)return 0;if($e.isBlob(b))return b.size;if($e.isSpecCompliantForm(b))return(await new n(zs.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if($e.isArrayBufferView(b)||$e.isArrayBuffer(b))return b.byteLength;if($e.isURLSearchParams(b)&&(b=b+""),$e.isString(b))return(await h(b)).byteLength},v=async(b,w)=>{const S=$e.toFiniteNumber(b.getContentLength());return S??j(w)};return async b=>{let{url:w,method:S,data:_,signal:E,cancelToken:D,timeout:W,onDownloadProgress:K,onUploadProgress:B,responseType:F,headers:H,withCredentials:I="same-origin",fetchOptions:R}=pO(b),Y=t||fetch;F=F?(F+"").toLowerCase():"text";let G=Iq([E,D&&D.toAbortSignal()],W),ae=null;const se=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let Ne;try{if(B&&f&&S!=="get"&&S!=="head"&&(Ne=await v(H,_))!==0){let Q=new n(w,{method:"POST",body:_,duplex:"half"}),V;if($e.isFormData(_)&&(V=Q.headers.get("content-type"))&&H.setContentType(V),Q.body){const[ne,$]=XA(Ne,Vv(JA(B)));_=tE(Q.body,rE,ne,$)}}$e.isString(I)||(I=I?"include":"omit");const z=s&&"credentials"in n.prototype,ie={...R,signal:G,method:S.toUpperCase(),headers:H.normalize().toJSON(),body:_,duplex:"half",credentials:z?I:void 0};ae=s&&new n(w,ie);let q=await(s?Y(ae,R):Y(w,ie));const re=p&&(F==="stream"||F==="response");if(p&&(K||re&&se)){const Q={};["status","statusText","headers"].forEach(de=>{Q[de]=q[de]});const V=$e.toFiniteNumber(q.headers.get("content-length")),[ne,$]=K&&XA(V,Vv(JA(K),!0))||[];q=new i(tE(q.body,rE,ne,()=>{$&&$(),se&&se()}),Q)}F=F||"text";let ue=await g[$e.findKey(g,F)||"text"](q,b);return!re&&se&&se(),await new Promise((Q,V)=>{fO(Q,V,{data:ue,headers:Bo.from(q.headers),status:q.status,statusText:q.statusText,config:b,request:ae})})}catch(z){throw se&&se(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new br("Network Error",br.ERR_NETWORK,b,ae),{cause:z.cause||z}):br.from(z,z&&z.code,b,ae)}}},Hq=new Map,gO=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:a}=t,s=[i,a,n];let l=s.length,d=l,h,f,p=Hq;for(;d--;)h=s[d],f=p.get(h),f===void 0&&p.set(h,f=d?new Map:Uq(t)),p=f;return f};gO();const Yw={http:sq,xhr:Rq,fetch:{get:gO}};$e.forEach(Yw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sE=e=>`- ${e}`,Wq=e=>$e.isFunction(e)||e===null||e===!1;function $q(e,t){e=$e.isArray(e)?e:[e];const{length:n}=e;let i,a;const s={};for(let l=0;l<n;l++){i=e[l];let d;if(a=i,!Wq(i)&&(a=Yw[(d=String(i)).toLowerCase()],a===void 0))throw new br(`Unknown adapter '${d}'`);if(a&&($e.isFunction(a)||(a=a.get(t))))break;s[d||"#"+l]=a}if(!a){const l=Object.entries(s).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let d=n?l.length>1?`since :
`+l.map(sE).join(`
`):" "+sE(l[0]):"as no adapter specified";throw new br("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a}const yO={getAdapter:$q,adapters:Yw};function _b(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Om(null,e)}function oE(e){return _b(e),e.headers=Bo.from(e.headers),e.data=Nb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yO.getAdapter(e.adapter||Ng.adapter,e)(e).then(function(i){return _b(e),i.data=Nb.call(e,e.transformResponse,i),i.headers=Bo.from(i.headers),i},function(i){return hO(i)||(_b(e),i&&i.response&&(i.response.data=Nb.call(e,e.transformResponse,i.response),i.response.headers=Bo.from(i.response.headers))),Promise.reject(i)})}const vO="1.13.2",nx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nx[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const lE={};nx.transitional=function(t,n,i){function a(s,l){return"[Axios v"+vO+"] Transitional option '"+s+"'"+l+(i?". "+i:"")}return(s,l,d)=>{if(t===!1)throw new br(a(l," has been removed"+(n?" in "+n:"")),br.ERR_DEPRECATED);return n&&!lE[l]&&(lE[l]=!0,console.warn(a(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,l,d):!0}};nx.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Vq(e,t,n){if(typeof e!="object")throw new br("options must be an object",br.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const s=i[a],l=t[s];if(l){const d=e[s],h=d===void 0||l(d,s,e);if(h!==!0)throw new br("option "+s+" must be "+h,br.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new br("Unknown option "+s,br.ERR_BAD_OPTION)}}const Ev={assertOptions:Vq,validators:nx},ad=Ev.validators;let Lh=class{constructor(t){this.defaults=t||{},this.interceptors={request:new YA,response:new YA}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Wh(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:s}=n;i!==void 0&&Ev.assertOptions(i,{silentJSONParsing:ad.transitional(ad.boolean),forcedJSONParsing:ad.transitional(ad.boolean),clarifyTimeoutError:ad.transitional(ad.boolean)},!1),a!=null&&($e.isFunction(a)?n.paramsSerializer={serialize:a}:Ev.assertOptions(a,{encode:ad.function,serialize:ad.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ev.assertOptions(n,{baseUrl:ad.spelling("baseURL"),withXsrfToken:ad.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=s&&$e.merge(s.common,s[n.method]);s&&$e.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),n.headers=Bo.concat(l,s);const d=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(h=h&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const f=[];this.interceptors.response.forEach(function(w){f.push(w.fulfilled,w.rejected)});let p,g=0,j;if(!h){const b=[oE.bind(this),void 0];for(b.unshift(...d),b.push(...f),j=b.length,p=Promise.resolve(n);g<j;)p=p.then(b[g++],b[g++]);return p}j=d.length;let v=n;for(;g<j;){const b=d[g++],w=d[g++];try{v=b(v)}catch(S){w.call(this,S);break}}try{p=oE.call(this,v)}catch(b){return Promise.reject(b)}for(g=0,j=f.length;g<j;)p=p.then(f[g++],f[g++]);return p}getUri(t){t=Wh(this.defaults,t);const n=mO(t.baseURL,t.url,t.allowAbsoluteUrls);return cO(n,t.params,t.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(t){Lh.prototype[t]=function(n,i){return this.request(Wh(i||{},{method:t,url:n,data:(i||{}).data}))}});$e.forEach(["post","put","patch"],function(t){function n(i){return function(s,l,d){return this.request(Wh(d||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}Lh.prototype[t]=n(),Lh.prototype[t+"Form"]=n(!0)});let Kq=class xO{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(a=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](a);i._listeners=null}),this.promise.then=a=>{let s;const l=new Promise(d=>{i.subscribe(d),s=d}).then(a);return l.cancel=function(){i.unsubscribe(s)},l},t(function(s,l,d){i.reason||(i.reason=new Om(s,l,d),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new xO(function(a){t=a}),cancel:t}}};function Gq(e){return function(n){return e.apply(null,n)}}function Qq(e){return $e.isObject(e)&&e.isAxiosError===!0}const y5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(y5).forEach(([e,t])=>{y5[t]=e});function bO(e){const t=new Lh(e),n=ZD(Lh.prototype.request,t);return $e.extend(n,Lh.prototype,t,{allOwnKeys:!0}),$e.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return bO(Wh(e,a))},n}const Hi=bO(Ng);Hi.Axios=Lh;Hi.CanceledError=Om;Hi.CancelToken=Kq;Hi.isCancel=hO;Hi.VERSION=vO;Hi.toFormData=rx;Hi.AxiosError=br;Hi.Cancel=Hi.CanceledError;Hi.all=function(t){return Promise.all(t)};Hi.spread=Gq;Hi.isAxiosError=Qq;Hi.mergeConfig=Wh;Hi.AxiosHeaders=Bo;Hi.formToJSON=e=>uO($e.isHTMLForm(e)?new FormData(e):e);Hi.getAdapter=yO.getAdapter;Hi.HttpStatusCode=y5;Hi.default=Hi;const{Axios:Cge,AxiosError:Age,CanceledError:Ege,isCancel:Tge,CancelToken:Pge,VERSION:kge,all:Dge,Cancel:Oge,isAxiosError:Mge,spread:Lge,toFormData:Rge,AxiosHeaders:Ige,HttpStatusCode:zge,formToJSON:Bge,getAdapter:Fge,mergeConfig:qge}=Hi,xe=Hi.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});xe.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});xe.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;const n=localStorage.getItem("refreshToken");if(n)try{const{data:i}=await Hi.post("/api/auth/refresh",{refreshToken:n});return localStorage.setItem("accessToken",i.accessToken),t.headers.Authorization=`Bearer ${i.accessToken}`,xe(t)}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login"}else window.location.href="/login"}return Promise.reject(e)});const bl=b9((e,t)=>({user:null,isAuthenticated:!1,isLoading:!0,login:async(n,i)=>{const{data:a}=await xe.post("/auth/login",{email:n,password:i});localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken);const s=await xe.get("/auth/me");e({user:s.data,isAuthenticated:!0})},logout:async()=>{const n=localStorage.getItem("refreshToken");try{await xe.post("/auth/logout",{refreshToken:n})}catch{}localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({user:null,isAuthenticated:!1})},checkAuth:async()=>{if(!localStorage.getItem("accessToken")){e({isLoading:!1,isAuthenticated:!1});return}try{const{data:i}=await xe.get("/auth/me");e({user:i,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({user:null,isAuthenticated:!1,isLoading:!1})}},hasPermission:n=>{const{user:i}=t();return i?i.role==="Admin"?!0:i.permissions.includes(n):!1}}));const Yq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zq=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),cE=e=>{const t=Zq(e);return t.charAt(0).toUpperCase()+t.slice(1)},jO=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),Xq=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Jq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const eU=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:l,...d},h)=>P.createElement("svg",{ref:h,...Jq,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:jO("lucide",a),...!s&&!Xq(d)&&{"aria-hidden":"true"},...d},[...l.map(([f,p])=>P.createElement(f,p)),...Array.isArray(s)?s:[s]]));const et=(e,t)=>{const n=P.forwardRef(({className:i,...a},s)=>P.createElement(eU,{ref:s,iconNode:t,className:jO(`lucide-${Yq(cE(e))}`,`lucide-${e}`,i),...a}));return n.displayName=cE(e),n};const tU=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Wl=et("activity",tU);const rU=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],nU=et("archive",rU);const iU=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Cb=et("arrow-left-right",iU);const aU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pd=et("arrow-left",aU);const sU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bc=et("arrow-right",sU);const oU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],sm=et("atom",oU);const lU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cU=et("award",lU);const dU=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],wc=et("beaker",dU);const uU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Rh=et("bell",uU);const hU=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],wO=et("box",hU);const fU=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],mU=et("boxes",fU);const pU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Fo=et("building-2",pU);const gU=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Zw=et("building",gU);const yU=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],vU=et("calculator",yU);const xU=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],bU=et("calendar-clock",xU);const jU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],wU=et("calendar-check",jU);const SU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],dE=et("calendar-days",SU);const NU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Wi=et("calendar",NU);const _U=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],v5=et("camera",_U);const CU=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],SO=et("car",CU);const AU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],EU=et("chart-column",AU);const TU=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],PU=et("check-check",TU);const kU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yl=et("check",kU);const DU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tu=et("chevron-down",DU);const OU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Yp=et("chevron-left",OU);const MU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uu=et("chevron-right",MU);const LU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gm=et("chevron-up",LU);const RU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],In=et("circle-alert",RU);const IU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yt=et("circle-check-big",IU);const zU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uE=et("circle-question-mark",zU);const BU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pi=et("circle-x",BU);const FU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ab=et("circle",FU);const qU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ix=et("clipboard-check",qU);const UU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],HU=et("clipboard-list",UU);const WU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],NO=et("clipboard",WU);const $U=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dt=et("clock",$U);const VU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_O=et("copy",VU);const KU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ul=et("credit-card",KU);const GU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],QU=et("crosshair",GU);const YU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ax=et("dollar-sign",YU);const ZU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xw=et("download",ZU);const XU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],JU=et("ellipsis-vertical",XU);const eH=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Zp=et("external-link",eH);const tH=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pa=et("eye",tH);const rH=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Jw=et("factory",rH);const nH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],af=et("file-check",nH);const iH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],aH=et("file-down",iH);const sH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qp=et("file-exclamation-point",sH);const oH=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],CO=et("file-pen-line",oH);const lH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],cH=et("file-question-mark",lH);const dH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ii=et("file-text",dH);const uH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],hH=et("file-type",uH);const fH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],mH=et("file",fH);const pH=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],lo=et("flask-conical",pH);const gH=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sf=et("funnel",gH);const yH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vH=et("globe",yH);const xH=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],bH=et("hash",xH);const jH=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],AO=et("history",jH);const wH=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],SH=et("house",wH);const NH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Kv=et("image",NH);const _H=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],CH=et("inbox",_H);const AH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],eS=et("info",AH);const EH=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],TH=et("key",EH);const PH=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],kH=et("layers",PH);const DH=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],EO=et("layout-dashboard",DH);const OH=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],MH=et("link-2",OH);const LH=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],RH=et("list-ordered",LH);const IH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ch=et("loader-circle",IH);const zH=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],x5=et("lock",zH);const BH=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tS=et("log-out",BH);const FH=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xp=et("mail",FH);const qH=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Fs=et("map-pin",qH);const UH=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],HH=et("map",UH);const WH=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],TO=et("menu",WH);const $H=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],VH=et("message-square",$H);const KH=[["path",{d:"M5 12h14",key:"1ays0h"}]],GH=et("minus",KH);const QH=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],YH=et("navigation",QH);const ZH=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],XH=et("octagon-alert",ZH);const JH=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],eW=et("package-check",JH);const tW=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Sr=et("package",tW);const rW=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ym=et("paperclip",rW);const nW=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],iW=et("pause",nW);const aW=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Jp=et("pen-tool",aW);const sW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$l=et("pen",sW);const oW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ku=et("pencil",oW);const lW=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],hE=et("percent",lW);const cW=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],hu=et("phone",cW);const dW=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Tv=et("pill",dW);const uW=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],fd=et("play",uW);const hW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lr=et("plus",hW);const fW=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],rS=et("printer",fW);const mW=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],$h=et("receipt",mW);const pW=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gv=et("refresh-cw",pW);const gW=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fE=et("rotate-ccw",gW);const yW=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],PO=et("route",yW);const vW=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],eg=et("save",vW);const xW=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ho=et("search",xW);const bW=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],qo=et("send",bW);const jW=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nS=et("settings",jW);const wW=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SW=et("shield-check",wW);const NW=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Us=et("shield",NW);const _W=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ru=et("shopping-cart",_W);const CW=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Pv=et("square-pen",CW);const AW=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],Xf=et("syringe",AW);const EW=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],kO=et("tag",EW);const TW=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Eb=et("test-tube",TW);const PW=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],kW=et("thermometer",PW);const DW=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Qv=et("timer",DW);const OW=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mi=et("trash-2",OW);const MW=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],LW=et("trending-down",MW);const RW=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],iS=et("trending-up",RW);const IW=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vr=et("triangle-alert",IW);const zW=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fn=et("truck",zW);const BW=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vm=et("upload",BW);const FW=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qW=et("user-check",FW);const UW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],om=et("user-plus",UW);const HW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],WW=et("user-x",HW);const $W=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vl=et("user",$W);const VW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ih=et("users",VW);const KW=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],DO=et("warehouse",KW);const GW=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],QW=et("wrench",GW);const YW=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hn=et("x",YW);const ZW=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],OO=et("zap",ZW),MO=P.createContext(null);function Ei(){const e=P.useContext(MO);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function XW({children:e}){const[t,n]=P.useState([]),i=P.useCallback(f=>{n(p=>p.filter(g=>g.id!==f))},[]),a=P.useCallback(f=>{const p=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,g={...f,id:p};n(v=>[...v,g]);const j=f.duration??(f.type==="error"?8e3:5e3);j>0&&setTimeout(()=>i(p),j)},[i]),s=P.useCallback((f,p)=>{a({type:"success",title:f,message:p})},[a]),l=P.useCallback((f,p)=>{a({type:"error",title:f,message:p,duration:8e3})},[a]),d=P.useCallback((f,p)=>{a({type:"warning",title:f,message:p})},[a]),h=P.useCallback((f,p)=>{a({type:"info",title:f,message:p})},[a]);return r.jsxs(MO.Provider,{value:{toasts:t,addToast:a,removeToast:i,success:s,error:l,warning:d,info:h},children:[e,r.jsx(JW,{toasts:t,removeToast:i})]})}function JW({toasts:e,removeToast:t}){return e.length===0?null:r.jsx("div",{style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",zIndex:9999,display:"flex",flexDirection:"column",gap:"0.75rem",maxWidth:"400px"},children:e.map(n=>r.jsx(e$,{toast:n,onClose:()=>t(n.id)},n.id))})}function e$({toast:e,onClose:t}){const[n,i]=P.useState(!1),a=()=>{i(!0),setTimeout(t,200)},s={success:r.jsx(yt,{size:20}),error:r.jsx(In,{size:20}),warning:r.jsx(vr,{size:20}),info:r.jsx(eS,{size:20})},d={success:{bg:"#dcfce7",border:"#22c55e",icon:"#16a34a",text:"#166534"},error:{bg:"#fee2e2",border:"#ef4444",icon:"#dc2626",text:"#991b1b"},warning:{bg:"#fef3c7",border:"#f59e0b",icon:"#d97706",text:"#92400e"},info:{bg:"#dbeafe",border:"#3b82f6",icon:"#2563eb",text:"#1e40af"}}[e.type];return r.jsxs("div",{style:{backgroundColor:d.bg,border:`1px solid ${d.border}`,borderRadius:"var(--radius)",padding:"1rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",display:"flex",gap:"0.75rem",alignItems:"flex-start",animation:n?"slideOut 0.2s ease-out":"slideIn 0.3s ease-out"},children:[r.jsx("div",{style:{color:d.icon,flexShrink:0,marginTop:"2px"},children:s[e.type]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:600,color:d.text,marginBottom:e.message?"0.25rem":0},children:e.title}),e.message&&r.jsx("div",{style:{fontSize:"0.875rem",color:d.text,opacity:.9},children:e.message}),e.action&&r.jsx("button",{onClick:e.action.onClick,style:{marginTop:"0.5rem",padding:"0.25rem 0.75rem",fontSize:"0.8125rem",fontWeight:500,background:d.icon,color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:e.action.label})]}),r.jsx("button",{onClick:a,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:d.text,opacity:.6,borderRadius:"4px"},children:r.jsx(hn,{size:16})})]})}const LO=6048e5,t$=864e5,Hy=43200,mE=1440,pE=Symbol.for("constructDateFrom");function gd(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&pE in e?e[pE](t):e instanceof Date?new e.constructor(t):new Date(t)}function pa(e,t){return gd(t||e,e)}function Fl(e,t,n){const i=pa(e,n?.in);return isNaN(t)?gd(e,NaN):(t&&i.setDate(i.getDate()+t),i)}let r$={};function _g(){return r$}function xm(e,t){const n=_g(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=pa(e,t?.in),s=a.getDay(),l=(s<i?7:0)+s-i;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Yv(e,t){return xm(e,{...t,weekStartsOn:1})}function RO(e,t){const n=pa(e,t?.in),i=n.getFullYear(),a=gd(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const s=Yv(a),l=gd(n,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const d=Yv(l);return n.getTime()>=s.getTime()?i+1:n.getTime()>=d.getTime()?i:i-1}function Zv(e){const t=pa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Cg(e,...t){const n=gd.bind(null,e||t.find(i=>typeof i=="object"));return t.map(n)}function Xv(e,t){const n=pa(e,t?.in);return n.setHours(0,0,0,0),n}function IO(e,t,n){const[i,a]=Cg(n?.in,e,t),s=Xv(i),l=Xv(a),d=+s-Zv(s),h=+l-Zv(l);return Math.round((d-h)/t$)}function n$(e,t){const n=RO(e,t),i=gd(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Yv(i)}function kv(e,t){const n=+pa(e)-+pa(t);return n<0?-1:n>0?1:n}function i$(e){return gd(e,Date.now())}function a$(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function s$(e){return!(!a$(e)&&typeof e!="number"||isNaN(+pa(e)))}function o$(e,t,n){const[i,a]=Cg(n?.in,e,t),s=i.getFullYear()-a.getFullYear(),l=i.getMonth()-a.getMonth();return s*12+l}function l$(e,t,n){const[i,a]=Cg(n?.in,e,t),s=gE(i,a),l=Math.abs(IO(i,a));i.setDate(i.getDate()-s*l);const d=+(gE(i,a)===-s),h=s*(l-d);return h===0?0:h}function gE(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function c$(e){return t=>{const i=(e?Math[e]:Math.trunc)(t);return i===0?0:i}}function d$(e,t){return+pa(e)-+pa(t)}function u$(e,t){const n=pa(e,t?.in);return n.setHours(23,59,59,999),n}function h$(e,t){const n=pa(e,t?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function f$(e,t){const n=pa(e,t?.in);return+u$(n,t)==+h$(n,t)}function m$(e,t,n){const[i,a,s]=Cg(n?.in,e,e,t),l=kv(a,s),d=Math.abs(o$(a,s));if(d<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-l*d);let h=kv(a,s)===-l;f$(i)&&d===1&&kv(i,s)===1&&(h=!1);const f=l*(d-+h);return f===0?0:f}function p$(e,t,n){const i=d$(e,t)/1e3;return c$(n?.roundingMethod)(i)}function g$(e,t){const n=pa(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function y$(e,t){const n=t?.weekStartsOn,i=pa(e,t?.in),a=i.getDay(),s=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const v$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},x$=(e,t,n)=>{let i;const a=v$[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Tb(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const b$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},j$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},w$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},S$={date:Tb({formats:b$,defaultWidth:"full"}),time:Tb({formats:j$,defaultWidth:"full"}),dateTime:Tb({formats:w$,defaultWidth:"full"})},N$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_$=(e,t,n,i)=>N$[e];function _p(e){return(t,n)=>{const i=n?.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,d=n?.width?String(n.width):l;a=e.formattingValues[d]||e.formattingValues[l]}else{const l=e.defaultWidth,d=n?.width?String(n.width):e.defaultWidth;a=e.values[d]||e.values[l]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const C$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},A$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},E$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},T$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},P$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},k$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},D$=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},O$={ordinalNumber:D$,era:_p({values:C$,defaultWidth:"wide"}),quarter:_p({values:A$,defaultWidth:"wide",argumentCallback:e=>e-1}),month:_p({values:E$,defaultWidth:"wide"}),day:_p({values:T$,defaultWidth:"wide"}),dayPeriod:_p({values:P$,defaultWidth:"wide",formattingValues:k$,defaultFormattingWidth:"wide"})};function Cp(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const l=s[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(d)?L$(d,g=>g.test(l)):M$(d,g=>g.test(l));let f;f=e.valueCallback?e.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function M$(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function L$(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function R$(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],s=t.match(e.parsePattern);if(!s)return null;let l=e.valueCallback?e.valueCallback(s[0]):s[0];l=n.valueCallback?n.valueCallback(l):l;const d=t.slice(a.length);return{value:l,rest:d}}}const I$=/^(\d+)(th|st|nd|rd)?/i,z$=/\d+/i,B$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},F$={any:[/^b/i,/^(a|c)/i]},q$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},U$={any:[/1/i,/2/i,/3/i,/4/i]},H$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},W$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},V$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},K$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},G$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Q$={ordinalNumber:R$({matchPattern:I$,parsePattern:z$,valueCallback:e=>parseInt(e,10)}),era:Cp({matchPatterns:B$,defaultMatchWidth:"wide",parsePatterns:F$,defaultParseWidth:"any"}),quarter:Cp({matchPatterns:q$,defaultMatchWidth:"wide",parsePatterns:U$,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Cp({matchPatterns:H$,defaultMatchWidth:"wide",parsePatterns:W$,defaultParseWidth:"any"}),day:Cp({matchPatterns:$$,defaultMatchWidth:"wide",parsePatterns:V$,defaultParseWidth:"any"}),dayPeriod:Cp({matchPatterns:K$,defaultMatchWidth:"any",parsePatterns:G$,defaultParseWidth:"any"})},zO={code:"en-US",formatDistance:x$,formatLong:S$,formatRelative:_$,localize:O$,match:Q$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Y$(e,t){const n=pa(e,t?.in);return IO(n,g$(n))+1}function Z$(e,t){const n=pa(e,t?.in),i=+Yv(n)-+n$(n);return Math.round(i/LO)+1}function BO(e,t){const n=pa(e,t?.in),i=n.getFullYear(),a=_g(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=gd(t?.in||e,0);l.setFullYear(i+1,0,s),l.setHours(0,0,0,0);const d=xm(l,t),h=gd(t?.in||e,0);h.setFullYear(i,0,s),h.setHours(0,0,0,0);const f=xm(h,t);return+n>=+d?i+1:+n>=+f?i:i-1}function X$(e,t){const n=_g(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=BO(e,t),s=gd(t?.in||e,0);return s.setFullYear(a,0,i),s.setHours(0,0,0,0),xm(s,t)}function J$(e,t){const n=pa(e,t?.in),i=+xm(n,t)-+X$(n,t);return Math.round(i/LO)+1}function Sn(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const Hu={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Sn(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Sn(n+1,2)},d(e,t){return Sn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Sn(e.getHours()%12||12,t.length)},H(e,t){return Sn(e.getHours(),t.length)},m(e,t){return Sn(e.getMinutes(),t.length)},s(e,t){return Sn(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Sn(a,t.length)}},Hf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yE={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Hu.y(e,t)},Y:function(e,t,n,i){const a=BO(e,i),s=a>0?a:1-a;if(t==="YY"){const l=s%100;return Sn(l,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Sn(s,t.length)},R:function(e,t){const n=RO(e);return Sn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Sn(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Sn(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Sn(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Hu.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Sn(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=J$(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Sn(a,t.length)},I:function(e,t,n){const i=Z$(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Sn(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Hu.d(e,t)},D:function(e,t,n){const i=Y$(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Sn(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Sn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Sn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return Sn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=Hf.noon:i===0?a=Hf.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=Hf.evening:i>=12?a=Hf.afternoon:i>=4?a=Hf.morning:a=Hf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Hu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Hu.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Sn(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Sn(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Hu.s(e,t)},S:function(e,t){return Hu.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return xE(i);case"XXXX":case"XX":return bh(i);default:return bh(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return xE(i);case"xxxx":case"xx":return bh(i);default:return bh(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vE(i,":");default:return"GMT"+bh(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vE(i,":");default:return"GMT"+bh(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Sn(i,t.length)},T:function(e,t,n){return Sn(+e,t.length)}};function vE(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),s=i%60;return s===0?n+String(a):n+String(a)+t+Sn(s,2)}function xE(e,t){return e%60===0?(e>0?"-":"+")+Sn(Math.abs(e)/60,2):bh(e,t)}function bh(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Sn(Math.trunc(i/60),2),s=Sn(i%60,2);return n+a+t+s}const bE=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},FO=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},eV=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return bE(e,t);let s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",bE(i,t)).replace("{{time}}",FO(a,t))},tV={p:FO,P:eV},rV=/^D+$/,nV=/^Y+$/,iV=["D","DD","YY","YYYY"];function aV(e){return rV.test(e)}function sV(e){return nV.test(e)}function oV(e,t,n){const i=lV(e,t,n);if(console.warn(i),iV.includes(e))throw new RangeError(i)}function lV(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uV=/^'([^]*?)'?$/,hV=/''/g,fV=/[a-zA-Z]/;function Ke(e,t,n){const i=_g(),a=i.locale??zO,s=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,d=pa(e,n?.in);if(!s$(d))throw new RangeError("Invalid time value");let h=t.match(dV).map(p=>{const g=p[0];if(g==="p"||g==="P"){const j=tV[g];return j(p,a.formatLong)}return p}).join("").match(cV).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:mV(p)};if(yE[g])return{isToken:!0,value:p};if(g.match(fV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(h=a.localize.preprocessor(d,h));const f={firstWeekContainsDate:s,weekStartsOn:l,locale:a};return h.map(p=>{if(!p.isToken)return p.value;const g=p.value;(sV(g)||aV(g))&&oV(g,t,String(e));const j=yE[g[0]];return j(d,g,a.localize,f)}).join("")}function mV(e){const t=e.match(uV);return t?t[1].replace(hV,"'"):e}function pV(e,t,n){const i=_g(),a=n?.locale??i.locale??zO,s=2520,l=kv(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const d=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l}),[h,f]=Cg(n?.in,...l>0?[t,e]:[e,t]),p=p$(f,h),g=(Zv(f)-Zv(h))/1e3,j=Math.round((p-g)/60);let v;if(j<2)return n?.includeSeconds?p<5?a.formatDistance("lessThanXSeconds",5,d):p<10?a.formatDistance("lessThanXSeconds",10,d):p<20?a.formatDistance("lessThanXSeconds",20,d):p<40?a.formatDistance("halfAMinute",0,d):p<60?a.formatDistance("lessThanXMinutes",1,d):a.formatDistance("xMinutes",1,d):j===0?a.formatDistance("lessThanXMinutes",1,d):a.formatDistance("xMinutes",j,d);if(j<45)return a.formatDistance("xMinutes",j,d);if(j<90)return a.formatDistance("aboutXHours",1,d);if(j<mE){const b=Math.round(j/60);return a.formatDistance("aboutXHours",b,d)}else{if(j<s)return a.formatDistance("xDays",1,d);if(j<Hy){const b=Math.round(j/mE);return a.formatDistance("xDays",b,d)}else if(j<Hy*2)return v=Math.round(j/Hy),a.formatDistance("aboutXMonths",v,d)}if(v=m$(f,h),v<12){const b=Math.round(j/Hy);return a.formatDistance("xMonths",b,d)}else{const b=v%12,w=Math.trunc(v/12);return b<3?a.formatDistance("aboutXYears",w,d):b<9?a.formatDistance("overXYears",w,d):a.formatDistance("almostXYears",w+1,d)}}function gV(e,t){return pV(e,i$(e),t)}function yV(e,t,n){return Fl(e,-7,n)}const jE=[{path:"/",label:"Dashboard",icon:EO},{path:"/approvals",label:"Approvals",icon:af},{path:"/customers",label:"Customers",icon:Fo},{path:"/products",label:"Products",icon:Sr},{path:"/materials",label:"Materials",icon:lo},{path:"/recipes",label:"Recipes/BOM",icon:ii},{path:"/suppliers",label:"Suppliers",icon:Fo},{path:"/purchase-orders",label:"Purchase Orders",icon:ru},{path:"/warehouses",label:"Warehouses",icon:DO},{path:"/grn",label:"Goods Receiving",icon:eW},{path:"/inventory",label:"Inventory",icon:mU},{path:"/manufacturing",label:"Manufacturing",icon:Jw},{path:"/orders",label:"Orders",icon:ru},{path:"/availability",label:"Availability",icon:bU},{path:"/reservations",label:"Reservations",icon:wU},{path:"/planner",label:"Planner",icon:Wi},{path:"/batches",label:"Batches",icon:lo},{path:"/qc",label:"QC Testing",icon:ix},{path:"/oos-investigations",label:"OOS/OOT Investigations",icon:vr},{path:"/release",label:"QP Release",icon:yt},{path:"/dispensing",label:"Dispensing",icon:Xf},{path:"/shipments",label:"Logistics",icon:fn},{path:"/contracts",label:"Contracts",icon:CO},{path:"/invoices",label:"Invoicing",icon:$h},{path:"/payments",label:"Payment Approvals",icon:Ul},{path:"/reports",label:"Reports",icon:EU},{path:"/users",label:"Users",icon:Ih},{path:"/roles",label:"Roles",icon:Us},{path:"/settings",label:"Settings",icon:nS},{path:"/audit",label:"Audit Log",icon:ii}];function vV({children:e}){const[t,n]=P.useState(!0),[i,a]=P.useState(!1),s=P.useRef(null),l=Ec(),d=Cn(),h=Tr(),{user:f,logout:p}=bl(),{data:g}=Ye({queryKey:["notifications"],queryFn:async()=>{const{data:_}=await xe.get("/notifications?limit=10");return _},refetchInterval:3e4}),j=ft({mutationFn:async _=>{await xe.patch(`/notifications/${_}/read`)},onSuccess:()=>{h.invalidateQueries({queryKey:["notifications"]})}}),v=ft({mutationFn:async()=>{await xe.patch("/notifications/read-all")},onSuccess:()=>{h.invalidateQueries({queryKey:["notifications"]})}});P.useEffect(()=>{const _=E=>{s.current&&!s.current.contains(E.target)&&a(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const b=async()=>{await p(),d("/login")},w=g?.unreadCount||0,S=g?.notifications||[];return r.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[r.jsxs("aside",{style:{width:t?"16rem":"4rem",background:"linear-gradient(180deg, #1e3a5f 0%, #0f172a 100%)",color:"white",transition:"width 0.2s ease",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:40},children:[r.jsxs("div",{style:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[t&&r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.125rem",fontWeight:700},children:"RadioPharma"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:"OMS"})]}),r.jsx("button",{onClick:()=>n(!t),style:{background:"none",border:"none",color:"white",padding:"0.5rem"},children:t?r.jsx(hn,{size:20}):r.jsx(TO,{size:20})})]}),r.jsx("nav",{style:{flex:1,padding:"0.5rem",overflowY:"auto"},children:jE.map(_=>{const E=_.icon,D=l.pathname===_.path;return r.jsxs(yr,{to:_.path,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",textDecoration:"none",color:D?"white":"rgba(255,255,255,0.7)",background:D?"rgba(255,255,255,0.1)":"transparent",marginBottom:"0.25rem",transition:"all 0.15s ease"},children:[r.jsx(E,{size:20}),t&&r.jsx("span",{style:{fontSize:"0.875rem"},children:_.label})]},_.path)})}),r.jsx("div",{style:{padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:r.jsxs("button",{onClick:b,style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:[r.jsx(tS,{size:20}),t&&r.jsx("span",{style:{fontSize:"0.875rem"},children:"Logout"})]})})]}),r.jsxs("div",{style:{flex:1,marginLeft:t?"16rem":"4rem",transition:"margin-left 0.2s ease"},children:[r.jsxs("header",{style:{background:"white",borderBottom:"1px solid var(--border)",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:30},children:[r.jsx("div",{children:r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:jE.find(_=>_.path===l.pathname)?.label||"RadioPharma OMS"})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("div",{ref:s,style:{position:"relative"},children:[r.jsxs("button",{onClick:()=>a(!i),style:{background:i?"var(--bg-secondary)":"none",border:"none",padding:"0.5rem",borderRadius:"8px",cursor:"pointer",position:"relative"},children:[r.jsx(Rh,{size:20}),w>0&&r.jsx("span",{style:{position:"absolute",top:"2px",right:"2px",width:"18px",height:"18px",borderRadius:"50%",background:"#ef4444",color:"white",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center"},children:w>9?"9+":w})]}),i&&r.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",width:"360px",maxHeight:"480px",background:"var(--bg-primary)",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid var(--border)",overflow:"hidden",zIndex:100},children:[r.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h4",{style:{margin:0,fontWeight:600},children:"Notifications"}),w>0&&r.jsxs("button",{onClick:()=>v.mutate(),style:{background:"none",border:"none",color:"var(--primary)",fontSize:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(yl,{size:12}),"Mark all read"]})]}),r.jsx("div",{style:{maxHeight:"360px",overflow:"auto"},children:S.length===0?r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[r.jsx(Rh,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),r.jsx("div",{children:"No notifications"})]}):S.slice(0,5).map(_=>r.jsx("div",{onClick:()=>{_.isRead||j.mutate(_.id)},style:{padding:"0.875rem 1rem",borderBottom:"1px solid var(--border)",background:_.isRead?"transparent":"rgba(59, 130, 246, 0.05)",cursor:_.isRead?"default":"pointer"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[!_.isRead&&r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--primary)",marginTop:"6px",flexShrink:0}}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:_.isRead?400:600,fontSize:"0.875rem",marginBottom:"0.25rem"},children:_.title}),r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",lineHeight:1.4,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:_.message}),r.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.375rem"},children:Ke(new Date(_.createdAt),"MMM dd, HH:mm")})]})]})},_.id))}),r.jsx("div",{style:{padding:"0.75rem 1rem",borderTop:"1px solid var(--border)",textAlign:"center"},children:r.jsx(yr,{to:"/notifications",onClick:()=>a(!1),style:{color:"var(--primary)",fontSize:"0.875rem",fontWeight:500,textDecoration:"none"},children:"View All Notifications"})})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)",borderRadius:"9999px"},children:[r.jsxs("div",{style:{width:"2rem",height:"2rem",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"0.875rem"},children:[f?.firstName?.[0],f?.lastName?.[0]]}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500},children:[f?.firstName," ",f?.lastName]}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:f?.role})]})]})]})]}),r.jsx("main",{style:{padding:"1.5rem"},children:e})]})]})}const wE=[{path:"/portal",label:"Dashboard",icon:EO},{path:"/portal/book-capacity",label:"Book Capacity",icon:Wi},{path:"/portal/orders",label:"My Orders",icon:ru},{path:"/portal/orders/new",label:"Place Order",icon:Lr},{path:"/portal/invoices",label:"Invoices",icon:$h},{path:"/portal/profile",label:"My Profile",icon:Fo}];function xV({children:e}){const[t,n]=P.useState(!0),i=Ec(),a=Cn(),{user:s,logout:l}=bl(),d=async()=>{await l(),a("/login")};return r.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[r.jsxs("aside",{style:{width:t?"16rem":"4rem",background:"linear-gradient(180deg, #0d9488 0%, #115e59 100%)",color:"white",transition:"width 0.2s ease",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:40},children:[r.jsxs("div",{style:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[t&&r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.125rem",fontWeight:700},children:"RadioPharma"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:"Client Portal"})]}),r.jsx("button",{onClick:()=>n(!t),style:{background:"none",border:"none",color:"white",padding:"0.5rem",cursor:"pointer"},children:t?r.jsx(hn,{size:20}):r.jsx(TO,{size:20})})]}),r.jsx("nav",{style:{flex:1,padding:"0.5rem",overflowY:"auto"},children:wE.map(h=>{const f=h.icon,p=i.pathname===h.path;return r.jsxs(yr,{to:h.path,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",textDecoration:"none",color:p?"white":"rgba(255,255,255,0.7)",background:p?"rgba(255,255,255,0.15)":"transparent",marginBottom:"0.25rem",transition:"all 0.15s ease"},children:[r.jsx(f,{size:20}),t&&r.jsx("span",{style:{fontSize:"0.875rem"},children:h.label})]},h.path)})}),r.jsx("div",{style:{padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:r.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:[r.jsx(tS,{size:20}),t&&r.jsx("span",{style:{fontSize:"0.875rem"},children:"Logout"})]})})]}),r.jsxs("div",{style:{flex:1,marginLeft:t?"16rem":"4rem",transition:"margin-left 0.2s ease"},children:[r.jsxs("header",{style:{background:"white",borderBottom:"1px solid var(--border)",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:30},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Fo,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:wE.find(h=>h.path===i.pathname)?.label||"Client Portal"}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:s?.customerName||"Customer Portal"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{style:{background:"none",border:"none",padding:"0.5rem",position:"relative",cursor:"pointer"},children:r.jsx(Rh,{size:20})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)",borderRadius:"9999px"},children:[r.jsxs("div",{style:{width:"2rem",height:"2rem",borderRadius:"50%",background:"#0d9488",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"0.875rem"},children:[s?.firstName?.[0],s?.lastName?.[0]]}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500},children:[s?.firstName," ",s?.lastName]}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Customer"})]})]})]})]}),r.jsx("main",{style:{padding:"1.5rem",background:"#f8fafc",minHeight:"calc(100vh - 73px)"},children:e})]})]})}function bV({children:e}){const t=Ec(),n=Cn(),{user:i,logout:a}=bl(),s=()=>{a(),n("/login")},l=[{path:"/driver",icon:SH,label:"Dashboard"},{path:"/driver/shipments",icon:fn,label:"Shipments"}];return r.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-secondary)"},children:[r.jsxs("header",{style:{backgroundColor:"var(--bg-primary)",borderBottom:"1px solid var(--border)",padding:"0.75rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:100},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"36px",height:"36px",backgroundColor:"var(--primary)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:r.jsx(fn,{size:20})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Driver Portal"}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"RadioPharma OMS"})]})]}),r.jsx("nav",{style:{display:"flex",gap:"0.5rem"},children:l.map(d=>{const h=d.icon,f=t.pathname===d.path||d.path!=="/driver"&&t.pathname.startsWith(d.path);return r.jsxs(yr,{to:d.path,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"var(--radius)",backgroundColor:f?"var(--primary-light)":"transparent",color:f?"var(--primary)":"var(--text-primary)",textDecoration:"none",fontWeight:f?600:400,fontSize:"0.875rem"},children:[r.jsx(h,{size:16}),d.label]},d.path)})})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)"},children:r.jsx(Vl,{size:16})}),r.jsxs("div",{style:{fontSize:"0.875rem"},children:[i?.firstName," ",i?.lastName]})]}),r.jsxs("button",{onClick:s,className:"btn btn-secondary btn-sm",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(tS,{size:14}),"Logout"]})]})]}),r.jsx("main",{style:{padding:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:e})]})}function jV(){const[e,t]=P.useState("admin@radiopharma.com"),[n,i]=P.useState("admin123"),[a,s]=P.useState(""),[l,d]=P.useState(!1),h=Cn(),{login:f}=bl(),p=async g=>{g.preventDefault(),s(""),d(!0);try{await f(e,n),h("/")}catch(j){s(j.response?.data?.error||"Login failed")}finally{d(!1)}};return r.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%)",padding:"1rem"},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"100%",maxWidth:"24rem",padding:"2rem"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:r.jsx(sm,{size:32,color:"white"})}),r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#0f172a"},children:"RadioPharma OMS"}),r.jsx("p",{style:{color:"#64748b",marginTop:"0.25rem"},children:"Order Management System"})]}),a&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.875rem"},children:[r.jsx(In,{size:18}),a]}),r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:e,onChange:g=>t(g.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Password"}),r.jsx("input",{type:"password",className:"form-input",value:n,onChange:g=>i(g.target.value),required:!0})]}),r.jsx("button",{type:"submit",disabled:l,className:"btn btn-primary",style:{width:"100%",marginTop:"1rem",padding:"0.75rem"},children:l?"Signing in...":"Sign In"})]}),r.jsx("p",{style:{textAlign:"center",marginTop:"1.5rem",fontSize:"0.75rem",color:"#94a3b8"},children:"Demo: admin@radiopharma.com / admin123"})]})})}const wV={default:{bg:"var(--bg-secondary)",text:"var(--text-primary)",accent:"var(--text-muted)"},primary:{bg:"#eff6ff",text:"#1d4ed8",accent:"#3b82f6"},success:{bg:"#f0fdf4",text:"#166534",accent:"#22c55e"},warning:{bg:"#fffbeb",text:"#92400e",accent:"#f59e0b"},danger:{bg:"#fef2f2",text:"#991b1b",accent:"#ef4444"},info:{bg:"#f0f9ff",text:"#0369a1",accent:"#0ea5e9"}};function lt({title:e,value:t,subtext:n,icon:i,trend:a,trendValue:s,color:l="default",onClick:d,loading:h=!1,active:f=!1,selected:p=!1,linkTo:g}){const j=Cn(),v=wV[l],b=d||g,w=f||p,S=()=>{d?d():g&&j(g)};return r.jsxs("div",{className:"card",style:{backgroundColor:v.bg,cursor:b?"pointer":"default",transition:"transform 0.2s, box-shadow 0.2s",minWidth:"180px",minHeight:"100px",padding:"1.25rem 1.5rem",border:w?`2px solid ${v.accent}`:"1px solid var(--border)",boxShadow:w?`0 0 0 3px ${v.accent}20`:"0 1px 3px rgba(0,0,0,0.05)",borderRadius:"12px"},onClick:S,onMouseEnter:_=>b&&(_.currentTarget.style.transform="translateY(-2px)"),onMouseLeave:_=>b&&(_.currentTarget.style.transform="translateY(0)"),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",height:"100%"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[r.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",fontWeight:500,marginBottom:"0.75rem"},children:e}),h?r.jsx("div",{className:"skeleton",style:{width:"60px",height:"2.5rem",borderRadius:"4px"}}):r.jsx("div",{style:{fontSize:"2.25rem",fontWeight:700,color:v.text,lineHeight:1.1},children:t}),n&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:n})]}),i&&r.jsx("div",{style:{padding:"0.625rem",borderRadius:"10px",backgroundColor:`${v.accent}15`,color:v.accent},children:i})]}),a&&s&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.5rem",fontSize:"0.75rem"},children:[a==="up"&&r.jsx(iS,{size:14,style:{color:"#22c55e"}}),a==="down"&&r.jsx(LW,{size:14,style:{color:"#ef4444"}}),a==="neutral"&&r.jsx(GH,{size:14,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{color:a==="up"?"#22c55e":a==="down"?"#ef4444":"var(--text-muted)"},children:s})]})]})}const SV={DRAFT:"default",SUBMITTED:"info",VALIDATED:"info",SCHEDULED:"secondary",IN_PRODUCTION:"info",QC_PENDING:"warning",QC_IN_PROGRESS:"warning",QC_PASSED:"qc-passed",QP_REVIEW:"qp-passed",RELEASED:"released",DISPATCHED:"info",DELIVERED:"success",CANCELLED:"danger",REJECTED:"danger",FAILED_QC:"danger",REWORK:"warning",PLANNED:"default",PRODUCTION_COMPLETE:"info",DISPENSING_IN_PROGRESS:"teal",DISPENSED:"teal",PACKED:"info",CLOSED:"closed",ON_HOLD:"warning",DEVIATION_OPEN:"warning",PENDING:"default",READY_TO_PACK:"info",PACKING:"warning",READY_TO_DISPATCH:"info",IN_TRANSIT:"purple",DELAYED:"danger",RETURNED:"danger",DAMAGED:"danger",CREATED:"default",ASSIGNED:"info",SHIPPED:"purple",ADMINISTERED:"success",WASTED:"danger",ACTIVE:"success",INACTIVE:"default",EXPIRED:"danger",APPROVED:"success",PENDING_APPROVAL:"warning"},NV={sm:{padding:"0.125rem 0.5rem",fontSize:"0.625rem"},md:{padding:"0.25rem 0.75rem",fontSize:"0.75rem"},lg:{padding:"0.375rem 1rem",fontSize:"0.875rem"}};function Wn({status:e,size:t="md",showDot:n=!1}){const i=SV[e]||"default",a=e.replace(/_/g," "),s=NV[t];return r.jsxs("span",{className:`badge badge-${i}`,style:{...s,display:"inline-flex",alignItems:"center",gap:"0.375rem"},children:[n&&r.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"currentColor"}}),a]})}function qO({steps:e,currentStep:t,completedSteps:n=[],skippedSteps:i=[],exceptionStep:a,orientation:s="horizontal",size:l="md"}){const d=e.findIndex(j=>j.key===t),h=(j,v)=>j.key===a?"exception":n.includes(j.key)?"completed":i.includes(j.key)?"skipped":j.key===t?"current":d>=0&&v<d?"completed":"pending",f={completed:{bg:"#22c55e",border:"#22c55e",text:"#fff",line:"#22c55e"},current:{bg:"#3b82f6",border:"#3b82f6",text:"#fff",line:"var(--border)"},pending:{bg:"var(--bg-primary)",border:"var(--border)",text:"var(--text-muted)",line:"var(--border)"},skipped:{bg:"var(--bg-tertiary)",border:"var(--border)",text:"var(--text-muted)",line:"var(--border)"},exception:{bg:"#ef4444",border:"#ef4444",text:"#fff",line:"#ef4444"}},g={sm:{iconSize:24,fontSize:"0.625rem",gap:"0.5rem"},md:{iconSize:32,fontSize:"0.75rem",gap:"0.75rem"},lg:{iconSize:40,fontSize:"0.875rem",gap:"1rem"}}[l];return s==="vertical"?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0"},children:e.map((j,v)=>{const b=h(j,v),w=f[b],S=j.icon,_=v===e.length-1;return r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsxs("div",{style:{width:g.iconSize,height:g.iconSize,borderRadius:"50%",backgroundColor:w.bg,border:`2px solid ${w.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:w.text,flexShrink:0},children:[b==="completed"&&r.jsx(yl,{size:g.iconSize*.5}),b==="exception"&&r.jsx(In,{size:g.iconSize*.5}),b==="current"&&(S?r.jsx(S,{size:g.iconSize*.5}):r.jsx(Ab,{size:g.iconSize*.4,fill:"currentColor"})),(b==="pending"||b==="skipped")&&(S?r.jsx(S,{size:g.iconSize*.5}):r.jsx(Ab,{size:g.iconSize*.3}))]}),!_&&r.jsx("div",{style:{width:"2px",flex:1,minHeight:"2rem",backgroundColor:b==="completed"?w.line:"var(--border)"}})]}),r.jsxs("div",{style:{paddingBottom:_?0:"1.5rem",paddingTop:"0.25rem"},children:[r.jsx("div",{style:{fontSize:g.fontSize,fontWeight:600,color:b==="pending"?"var(--text-muted)":"var(--text-primary)"},children:j.label}),j.description&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.125rem"},children:j.description}),j.timestamp&&r.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Dt,{size:10})," ",j.timestamp,j.actor&&r.jsxs("span",{children:[" by ",j.actor]})]})]})]},j.key)})}):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative"},children:[r.jsx("div",{style:{position:"absolute",top:g.iconSize/2,left:g.iconSize,right:g.iconSize,height:"2px",backgroundColor:"var(--border)",zIndex:0}}),e.map((j,v)=>{const b=h(j,v),w=f[b],S=j.icon;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,flex:1},children:[r.jsxs("div",{style:{width:g.iconSize,height:g.iconSize,borderRadius:"50%",backgroundColor:w.bg,border:`2px solid ${w.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:w.text},children:[b==="completed"&&r.jsx(yl,{size:g.iconSize*.5}),b==="exception"&&r.jsx(In,{size:g.iconSize*.5}),b==="current"&&(S?r.jsx(S,{size:g.iconSize*.5}):r.jsx(Ab,{size:g.iconSize*.4,fill:"currentColor"})),(b==="pending"||b==="skipped")&&(S?r.jsx(S,{size:g.iconSize*.5}):r.jsx("span",{style:{fontSize:g.fontSize},children:v+1}))]}),r.jsxs("div",{style:{marginTop:g.gap,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:g.fontSize,fontWeight:b==="current"?600:500,color:b==="pending"||b==="skipped"?"var(--text-muted)":"var(--text-primary)"},children:j.label}),j.timestamp&&r.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.125rem"},children:j.timestamp})]})]},j.key)})]})}const _V={info:r.jsx(Dt,{size:14}),success:r.jsx(yt,{size:14}),warning:r.jsx(vr,{size:14}),error:r.jsx(pi,{size:14})},CV={info:"#3b82f6",success:"#22c55e",warning:"#f59e0b",error:"#ef4444"};function AV({events:e,maxVisible:t=5,showMetadata:n=!1,emptyMessage:i="No events yet"}){const[a,s]=P.useState(!1),[l,d]=P.useState(new Set),h=a?e:e.slice(0,t),f=e.length>t,p=g=>{d(j=>{const v=new Set(j);return v.has(g)?v.delete(g):v.add(g),v})};return e.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:[r.jsx(Dt,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),r.jsx("p",{children:i})]}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0"},children:h.map((g,j)=>{const v=g.severity||"info",b=CV[v],w=j===h.length-1,S=g.metadata&&Object.keys(g.metadata).length>0,_=l.has(g.id);return r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:`${b}20`,border:`2px solid ${b}`,display:"flex",alignItems:"center",justifyContent:"center",color:b,flexShrink:0},children:_V[v]}),!w&&r.jsx("div",{style:{width:"2px",flex:1,minHeight:"1rem",backgroundColor:"var(--border)"}})]}),r.jsxs("div",{style:{flex:1,paddingBottom:w?0:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)"},children:g.title}),g.fromStatus&&g.toStatus&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.125rem"},children:[r.jsx("span",{className:"badge badge-sm",children:g.fromStatus.replace(/_/g," ")}),r.jsx(bc,{size:12}),r.jsx("span",{className:"badge badge-sm",children:g.toStatus.replace(/_/g," ")})]}),g.description&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:g.description}),g.note&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem",fontStyle:"italic",display:"flex",alignItems:"flex-start",gap:"0.25rem"},children:[r.jsx(ii,{size:12,style:{flexShrink:0,marginTop:"2px"}}),'"',g.note,'"']})]}),r.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[r.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)"},children:Ke(new Date(g.timestamp),"MMM dd, HH:mm")}),g.actor&&r.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.25rem",justifyContent:"flex-end",marginTop:"0.125rem"},children:[r.jsx(Vl,{size:10}),g.actor,g.actorRole&&r.jsxs("span",{children:["(",g.actorRole,")"]})]})]})]}),n&&S&&r.jsxs("div",{style:{marginTop:"0.5rem"},children:[r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>p(g.id),style:{fontSize:"0.625rem",padding:"0.125rem 0.5rem"},children:[_?r.jsx(gm,{size:12}):r.jsx(tu,{size:12}),"Metadata"]}),_&&r.jsx("pre",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",fontSize:"0.625rem",overflow:"auto",maxHeight:"150px"},children:JSON.stringify(g.metadata,null,2)})]})]})]},g.id)})}),f&&r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>s(!a),style:{marginTop:"1rem",width:"100%"},children:[a?r.jsx(gm,{size:14}):r.jsx(tu,{size:14}),a?"Show Less":`Show All (${e.length})`]})]})}function of({widgets:e,values:t,onChange:n,onReset:i,lastRefresh:a,onRefresh:s,quickFilters:l,activeQuickFilter:d,onQuickFilterClick:h}){const[f,p]=P.useState(null),g=Object.entries(t).filter(([j,v])=>Array.isArray(v)?v.length>0:typeof v=="boolean"?v:v&&v!=="").length;return r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",alignItems:"flex-end"},children:[e.map(j=>{if(j.type==="search")return r.jsxs("div",{style:{flex:"1 1 200px",maxWidth:"300px"},children:[r.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:j.label}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ho,{size:16,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",className:"form-input",placeholder:j.placeholder||`Search ${j.label.toLowerCase()}...`,value:t[j.key]||"",onChange:v=>n(j.key,v.target.value),style:{paddingLeft:"2.5rem",height:"40px"}}),t[j.key]&&r.jsx("button",{onClick:()=>n(j.key,""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:r.jsx(hn,{size:14})})]})]},j.key);if(j.type==="select")return r.jsxs("div",{style:{flex:"0 0 auto",minWidth:"160px"},children:[r.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:j.label}),r.jsxs("select",{className:"form-select",value:t[j.key]||"",onChange:v=>n(j.key,v.target.value),style:{height:"40px",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All"}),j.options?.map(v=>r.jsx("option",{value:v.value,children:v.label},v.value))]})]},j.key);if(j.type==="multiselect"){const v=t[j.key]||[];return r.jsxs("div",{style:{flex:"0 0 auto",minWidth:"160px",position:"relative"},children:[r.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:j.label}),r.jsxs("button",{className:"form-select",onClick:()=>p(f===j.key?null:j.key),style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",textAlign:"left",height:"40px",backgroundImage:"none"},children:[r.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:v.length===0?"All":`${v.length} selected`}),r.jsx(tu,{size:16,style:{color:"var(--text-muted)"}})]}),f===j.key&&r.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:100,maxHeight:"200px",overflow:"auto"},children:j.options?.map(b=>r.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"0.5rem 0.75rem",cursor:"pointer",gap:"0.5rem"},children:[r.jsx("input",{type:"checkbox",checked:v.includes(b.value),onChange:w=>{w.target.checked?n(j.key,[...v,b.value]):n(j.key,v.filter(S=>S!==b.value))}}),r.jsx("span",{style:{fontSize:"0.875rem"},children:b.label})]},b.value))})]},j.key)}return j.type==="daterange"?r.jsxs("div",{style:{flex:"0 0 auto",display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:"From"}),r.jsx("input",{type:"date",className:"form-input",value:t[`${j.key}From`]||"",onChange:v=>n(`${j.key}From`,v.target.value),style:{width:"150px",height:"40px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.375rem",display:"block",fontWeight:500},children:"To"}),r.jsx("input",{type:"date",className:"form-input",value:t[`${j.key}To`]||"",onChange:v=>n(`${j.key}To`,v.target.value),style:{width:"150px",height:"40px"}})]})]},j.key):j.type==="toggle"?r.jsx("div",{style:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"0.5rem",paddingBottom:"0.5rem"},children:r.jsxs("label",{className:"toggle-switch",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:t[j.key]||!1,onChange:v=>n(j.key,v.target.checked),style:{width:"16px",height:"16px"}}),r.jsx("span",{style:{fontSize:"0.875rem"},children:j.label})]})},j.key):null}),r.jsxs("div",{style:{flex:"0 0 auto",display:"flex",gap:"0.5rem",alignItems:"flex-end",paddingBottom:"0"},children:[i&&g>0&&r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:i,children:[r.jsx(fE,{size:14})," Reset"]}),s&&r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:s,children:r.jsx(fE,{size:14})})]})]}),l&&l.length>0&&r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:l.map(j=>r.jsx("button",{className:`btn btn-sm ${d===j.key?"btn-primary":"btn-secondary"}`,onClick:()=>h?.(j.key),style:{borderRadius:"999px"},children:j.label},j.key))}),a&&r.jsxs("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:["Last updated: ",Ke(a,"HH:mm:ss"),g>0&&`  ${g} filter${g>1?"s":""} applied`]})]})}const EV={search:ho,package:Sr,alert:In,success:yt,question:cH};function Bs({title:e,message:t,icon:n="question",ctaLabel:i,onCta:a,variant:s="default"}){const l=EV[n],d=s==="compact";return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:d?"2rem":"4rem 2rem",textAlign:"center"},children:[r.jsx("div",{style:{width:d?"48px":"64px",height:d?"48px":"64px",borderRadius:"50%",backgroundColor:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:r.jsx(l,{size:d?24:32,style:{color:"var(--text-muted)"}})}),r.jsx("h3",{style:{fontSize:d?"1rem":"1.25rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:e}),r.jsx("p",{style:{fontSize:d?"0.875rem":"1rem",color:"var(--text-muted)",maxWidth:"400px",marginBottom:i?"1.5rem":0},children:t}),i&&a&&r.jsxs("button",{className:"btn btn-primary",onClick:a,children:[r.jsx(Lr,{size:16})," ",i]})]})}function Mm({title:e,subtitle:t,lastRefreshed:n,onRefresh:i,isRefreshing:a,actions:s}){return r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.25rem",color:"var(--text-primary)"},children:e}),t&&r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:t})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[n&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[r.jsx(Dt,{size:14}),"Last updated: ",Ke(n,"HH:mm:ss")]}),i&&r.jsxs("button",{className:"btn btn-secondary",onClick:i,disabled:a,style:{minWidth:"100px"},children:[r.jsx(Gv,{size:16,className:a?"spin":""}),a?"Refreshing...":"Refresh"]}),s]})]})}const TV={default:{bg:"#f1f5f9",border:"#e2e8f0",text:"#64748b"},blue:{bg:"#eff6ff",border:"#bfdbfe",text:"#2563eb"},yellow:{bg:"#fefce8",border:"#fef08a",text:"#ca8a04"},green:{bg:"#f0fdf4",border:"#bbf7d0",text:"#16a34a"},teal:{bg:"#f0fdfa",border:"#99f6e4",text:"#0d9488"},purple:{bg:"#faf5ff",border:"#e9d5ff",text:"#9333ea"}};function UO({stages:e,title:t}){const n=Cn();return r.jsxs("div",{className:"card",style:{padding:"1.25rem 1.5rem",marginBottom:"1.5rem"},children:[t&&r.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-secondary)"},children:t}),r.jsx("div",{style:{display:"flex",alignItems:"stretch",gap:"0.25rem",overflowX:"auto",paddingBottom:"0.5rem"},children:e.map((i,a)=>{const s=TV[i.color||"default"],l=a===e.length-1;return r.jsxs("div",{style:{display:"flex",alignItems:"center",flex:"1 1 0"},children:[r.jsxs("div",{onClick:()=>n(i.linkTo),style:{flex:1,padding:"0.875rem 1rem",backgroundColor:s.bg,border:`1px solid ${s.border}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s",minWidth:"110px",position:"relative"},onMouseEnter:d=>{d.currentTarget.style.transform="translateY(-2px)",d.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateY(0)",d.currentTarget.style.boxShadow="none"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",fontWeight:500,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:i.label}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:s.text},children:i.count}),i.lateCount&&i.lateCount>0&&r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.375rem",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"999px",fontSize:"0.6875rem",fontWeight:600},children:[r.jsx(vr,{size:10}),i.lateCount]})]})]}),!l&&r.jsx(uu,{size:18,style:{color:"var(--text-muted)",flexShrink:0,margin:"0 0.125rem"}})]},i.id)})})]})}function dd({title:e,items:t,viewAllLink:n,maxItems:i=6,emptyMessage:a="No items in queue",icon:s,accentColor:l="var(--primary)"}){const d=Cn(),h=t.slice(0,i),f=t.length>i;return r.jsxs("div",{className:"card",style:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",borderLeft:`3px solid ${l}`,borderTopLeftRadius:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s,r.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:e}),r.jsx("span",{style:{backgroundColor:"var(--bg-tertiary)",padding:"0.125rem 0.5rem",borderRadius:"999px",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:t.length})]}),n&&t.length>0&&r.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>d(n),style:{fontSize:"0.75rem"},children:["View all ",r.jsx(uu,{size:14})]})]}),r.jsx("div",{style:{flex:1,overflow:"auto"},children:h.length>0?h.map((p,g)=>r.jsxs("div",{onClick:()=>d(p.linkTo),style:{padding:"0.875rem 1.25rem",borderBottom:g<h.length-1?"1px solid var(--border)":"none",cursor:"pointer",transition:"background 0.15s",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},onMouseEnter:j=>j.currentTarget.style.backgroundColor="var(--bg-secondary)",onMouseLeave:j=>j.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[r.jsx("span",{style:{fontWeight:600,fontSize:"0.8125rem",fontFamily:"monospace"},children:p.identifier}),p.isLate&&r.jsx(vr,{size:14,style:{color:"var(--danger)"}})]}),r.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:p.title}),p.subtitle&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:p.subtitle})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.25rem"},children:[r.jsx(Wn,{status:p.status,size:"sm"}),p.eta&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.6875rem",color:"var(--text-muted)"},children:[r.jsx(Dt,{size:10}),typeof p.eta=="string"?p.eta:Ke(p.eta,"HH:mm")]}),p.nextAction&&r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--primary)",fontWeight:500},children:p.nextAction})]})]},p.id)):r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:a})}),f&&n&&r.jsx("div",{style:{padding:"0.75rem",borderTop:"1px solid var(--border)",textAlign:"center"},children:r.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>d(n),style:{width:"100%"},children:["+",t.length-i," more"]})})]})}const PV={qc_failed:pi,on_hold:In,expired:Dt,capacity:Wi,delay:vr,alert:vr},kV={error:{bg:"#fef2f2",border:"#fecaca",text:"#dc2626",icon:"#dc2626"},warning:{bg:"#fffbeb",border:"#fde68a",text:"#d97706",icon:"#d97706"},info:{bg:"#eff6ff",border:"#bfdbfe",text:"#2563eb",icon:"#2563eb"}};function Ag({title:e="Exceptions & Alerts",items:t}){const n=Cn(),i=t.filter(a=>a.count>0);return i.length===0?r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-secondary)"},children:e}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem",backgroundColor:"#f0fdf4",borderRadius:"8px",color:"#16a34a",fontSize:"0.875rem",fontWeight:500},children:[r.jsx("span",{style:{marginRight:"0.5rem"},children:""}),"No active exceptions"]})]}):r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-secondary)"},children:e}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.map(a=>{const s=kV[a.type],l=PV[a.icon||"alert"];return r.jsxs("div",{onClick:()=>n(a.linkTo),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",backgroundColor:s.bg,border:`1px solid ${s.border}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:d=>{d.currentTarget.style.transform="translateX(4px)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateX(0)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(l,{size:18,style:{color:s.icon}}),r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:s.text},children:a.title})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{backgroundColor:s.icon,color:"white",padding:"0.125rem 0.5rem",borderRadius:"999px",fontSize:"0.75rem",fontWeight:600},children:a.count}),r.jsx(uu,{size:16,style:{color:s.icon}})]})]},a.id)})})]})}const SE={order_created:{icon:Sr,color:"#2563eb",bg:"#eff6ff"},order_validated:{icon:yt,color:"#16a34a",bg:"#f0fdf4"},order_scheduled:{icon:Dt,color:"#0891b2",bg:"#ecfeff"},batch_started:{icon:lo,color:"#d97706",bg:"#fffbeb"},batch_completed:{icon:lo,color:"#16a34a",bg:"#f0fdf4"},qc_passed:{icon:af,color:"#16a34a",bg:"#f0fdf4"},qc_failed:{icon:vr,color:"#dc2626",bg:"#fef2f2"},batch_released:{icon:Us,color:"#7c3aed",bg:"#f5f3ff"},shipment_dispatched:{icon:qo,color:"#0891b2",bg:"#ecfeff"},shipment_delivered:{icon:fn,color:"#16a34a",bg:"#f0fdf4"},default:{icon:Dt,color:"#64748b",bg:"#f1f5f9"}};function DV({events:e,title:t="Recent Activity",maxEvents:n=15}){const i=Cn(),a=e.slice(0,n);return r.jsxs("div",{className:"card",style:{height:"100%"},children:[r.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:t}),r.jsxs("span",{style:{backgroundColor:"var(--bg-tertiary)",padding:"0.125rem 0.5rem",borderRadius:"999px",fontSize:"0.75rem",color:"var(--text-muted)"},children:["Last ",a.length," events"]})]}),r.jsx("div",{style:{maxHeight:"400px",overflow:"auto"},children:a.length>0?r.jsx("div",{style:{padding:"0.5rem 0"},children:a.map((s,l)=>{const d=SE[s.type]||SE.default,h=d.icon,f=typeof s.timestamp=="string"?new Date(s.timestamp):s.timestamp;return r.jsxs("div",{onClick:()=>s.linkTo&&i(s.linkTo),style:{display:"flex",gap:"0.75rem",padding:"0.75rem 1.25rem",cursor:s.linkTo?"pointer":"default",transition:"background 0.15s"},onMouseEnter:p=>s.linkTo&&(p.currentTarget.style.backgroundColor="var(--bg-secondary)"),onMouseLeave:p=>p.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:d.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(h,{size:16,style:{color:d.color}})}),l<a.length-1&&r.jsx("div",{style:{width:"2px",flex:1,backgroundColor:"var(--border)",marginTop:"0.25rem",minHeight:"20px"}})]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"0.8125rem",fontWeight:500,color:"var(--text-primary)",marginBottom:"0.125rem"},children:s.title}),s.description&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:s.description}),r.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("span",{children:gV(f,{addSuffix:!0})}),s.user&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{children:s.user})]})]})]})]},s.id)})}):r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No recent activity"})})]})}function OV({days:e,title:t="Capacity Overview (7 Days)"}){const n=Cn();return r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx(Wi,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,margin:0,color:"var(--text-secondary)"},children:t})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem"},children:e.map((i,a)=>{const s=typeof i.date=="string"?new Date(i.date):i.date,l=i.totalCapacity>0?Math.round((i.reservedMinutes+i.committedMinutes)/i.totalCapacity*100):0,d=a===0;let h="#22c55e";return l>=90?h="#ef4444":l>=70&&(h="#f59e0b"),r.jsxs("div",{onClick:()=>n(`/planner?date=${Ke(s,"yyyy-MM-dd")}`),style:{padding:"0.75rem 0.5rem",backgroundColor:d?"#eff6ff":"var(--bg-secondary)",borderRadius:"8px",cursor:"pointer",textAlign:"center",transition:"all 0.15s",border:d?"2px solid var(--primary)":"1px solid var(--border)"},onMouseEnter:f=>{f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)"},onMouseLeave:f=>{f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="none"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:Ke(s,"EEE")}),r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:Ke(s,"d")}),r.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#e2e8f0",borderRadius:"2px",marginBottom:"0.375rem",overflow:"hidden"},children:r.jsx("div",{style:{width:`${Math.min(l,100)}%`,height:"100%",backgroundColor:h,borderRadius:"2px"}})}),r.jsxs("div",{style:{fontSize:"0.6875rem",fontWeight:500,color:l>=90?"#dc2626":"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[i.isFull&&r.jsx(vr,{size:10}),l,"%"]})]},a)})}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"1rem",fontSize:"0.6875rem",color:"var(--text-muted)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"#22c55e"}}),"Low"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"#f59e0b"}}),"Medium"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"#ef4444"}}),"High"]})]})]})}function MV(){Cn();const{data:e,isLoading:t,isError:n,error:i,refetch:a,isFetching:s}=Ye({queryKey:["dashboard-overview"],queryFn:async()=>{const{data:d}=await xe.get("/dashboard/overview");return d},refetchInterval:6e4});if(n)return r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(vr,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load dashboard"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:i instanceof Error?i.message:"An error occurred while loading the dashboard."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>a(),children:"Try Again"})]});if(t)return r.jsxs("div",{style:{padding:"2rem"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(d=>r.jsx("div",{className:"card skeleton",style:{height:"100px"}},d))}),r.jsx("div",{className:"card skeleton",style:{height:"120px",marginBottom:"1.5rem"}}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(d=>r.jsx("div",{className:"card skeleton",style:{height:"300px"}},d))})]});const l=(e?.journeyCounts||[]).map(d=>({...d,linkTo:LV(d.id)}));return r.jsxs("div",{children:[r.jsx(Mm,{title:"Operations Command Center",subtitle:"End-to-end visibility across orders, production, QC, and logistics",lastRefreshed:e?.lastRefreshed?new Date(e.lastRefreshed):void 0,onRefresh:()=>a(),isRefreshing:s}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Due Today",value:e?.kpis?.ordersDueToday||0,icon:r.jsx(Dt,{size:20}),trend:e?.kpis?.ordersDueToday>0?"up":void 0,linkTo:"/orders?due=today"}),r.jsx(lt,{title:"Orders Late",value:e?.kpis?.ordersLate||0,icon:r.jsx(vr,{size:20}),color:e?.kpis?.ordersLate>0?"danger":void 0,linkTo:"/orders?risk=high"}),r.jsx(lt,{title:"Awaiting QC",value:e?.kpis?.batchesAwaitingQC||0,icon:r.jsx(lo,{size:20}),color:"warning",linkTo:"/qc?status=QC_PENDING"}),r.jsx(lt,{title:"Awaiting QP",value:e?.kpis?.batchesAwaitingQP||0,icon:r.jsx(Us,{size:20}),color:"info",linkTo:"/release?status=QC_PASSED"}),r.jsx(lt,{title:"Ready to Dispense",value:e?.kpis?.readyToDispense||0,icon:r.jsx(Sr,{size:20}),color:"success",linkTo:"/dispensing?ready=true"}),r.jsx(lt,{title:"Ready to Dispatch",value:e?.kpis?.shipmentsReadyToDispatch||0,icon:r.jsx(fn,{size:20}),linkTo:"/shipments?status=ASSIGNED"}),r.jsx(lt,{title:"Delayed",value:e?.kpis?.shipmentsDelayed||0,icon:r.jsx(vr,{size:20}),color:e?.kpis?.shipmentsDelayed>0?"danger":void 0,linkTo:"/shipments?status=DELAYED"}),r.jsx(lt,{title:"Delivered Today",value:e?.kpis?.deliveredToday||0,icon:r.jsx(yt,{size:20}),color:"success",linkTo:"/shipments?delivered=today"})]}),r.jsx(UO,{title:"End-to-End Order Journey",stages:l}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(dd,{title:"Validation Queue",items:e?.queues?.validation||[],viewAllLink:"/orders?status=SUBMITTED",maxItems:6,icon:r.jsx(ix,{size:18,style:{color:"#2563eb"}}),accentColor:"#2563eb",emptyMessage:"No orders awaiting validation"}),r.jsx(dd,{title:"QC Queue",items:e?.queues?.qc||[],viewAllLink:"/qc?status=QC_PENDING",maxItems:6,icon:r.jsx(lo,{size:18,style:{color:"#d97706"}}),accentColor:"#d97706",emptyMessage:"No batches awaiting QC"}),r.jsx(dd,{title:"QP Release Queue",items:e?.queues?.qp||[],viewAllLink:"/release?status=QC_PASSED",maxItems:6,icon:r.jsx(Us,{size:18,style:{color:"#7c3aed"}}),accentColor:"#7c3aed",emptyMessage:"No batches awaiting QP release"}),r.jsx(dd,{title:"Logistics Queue",items:e?.queues?.logistics||[],viewAllLink:"/shipments?status=CREATED",maxItems:6,icon:r.jsx(fn,{size:18,style:{color:"#0891b2"}}),accentColor:"#0891b2",emptyMessage:"No shipments pending"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr 1fr",gap:"1rem"},children:[r.jsx(Ag,{title:"Exceptions & Alerts",items:e?.exceptions||[]}),r.jsx(OV,{title:"Capacity Overview (7 Days)",days:e?.capacity||RV()}),r.jsx(DV,{title:"Recent Activity",events:e?.recentActivity||[],maxEvents:8})]})]})}function LV(e){return{submitted:"/orders?status=SUBMITTED",validated:"/orders?status=VALIDATED",scheduled:"/orders?status=SCHEDULED",in_production:"/batches?status=IN_PRODUCTION",qc_pending:"/qc?status=QC_PENDING",released:"/batches?status=RELEASED",dispensing:"/dispensing",packed:"/batches?status=PACKED",dispatched:"/shipments?status=IN_TRANSIT",delivered:"/shipments?status=DELIVERED"}[e]||"/orders"}function RV(){const e=[],t=new Date;for(let n=0;n<7;n++){const i=new Date(t);i.setDate(i.getDate()+n),e.push({date:i,reservedMinutes:Math.floor(Math.random()*200)+100,committedMinutes:Math.floor(Math.random()*100)+50,totalCapacity:480,isFull:!1})}return e}function IV(){const e=Cn(),[t,n]=P.useState({}),[i,a]=P.useState(null),{data:s,isLoading:l}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:b}=await xe.get("/customers");return b}}),{data:d}=Ye({queryKey:["settings","categories"],queryFn:async()=>{const{data:b}=await xe.get("/settings/categories");return b}}),h=b=>b?new Date(b)<new Date:!1,f=b=>!b.documents||b.documents.length===0,p=[{key:"search",label:"Search",type:"search",placeholder:"Search name, code, mobile, email, CR, tax..."},{key:"category",label:"Category",type:"select",options:[{value:"",label:"All Categories"},...d?.map(b=>({value:b.id,label:b.name}))||[]]},{key:"licenseStatus",label:"License",type:"select",options:[{value:"",label:"All"},{value:"valid",label:"Valid"},{value:"expired",label:"Expired"}]},{key:"docsStatus",label:"Documents",type:"select",options:[{value:"",label:"All"},{value:"missing",label:"Missing Docs"},{value:"uploaded",label:"Has Docs"}]}],g=s?.filter(b=>{if(t.category&&b.categoryId!==t.category||t.licenseStatus==="valid"&&h(b.licenseExpiryDate)||t.licenseStatus==="expired"&&!h(b.licenseExpiryDate)||t.docsStatus==="missing"&&!f(b)||t.docsStatus==="uploaded"&&f(b)||i==="expired"&&!h(b.licenseExpiryDate)||i==="licensed"&&h(b.licenseExpiryDate)||i==="hospitals"&&!b.category?.name?.toLowerCase().includes("hospital")||i==="missingDocs"&&!f(b))return!1;if(t.search){const w=t.search.toLowerCase();if(![b.name,b.nameEn,b.nameAr,b.code,b.email,b.mobile,b.phone,b.crNumber,b.taxNumber].some(_=>_?.toLowerCase().includes(w)))return!1}return!0}),j={total:s?.length||0,licensed:s?.filter(b=>!h(b.licenseExpiryDate)).length||0,expired:s?.filter(b=>h(b.licenseExpiryDate)).length||0,hospitals:s?.filter(b=>b.category?.name?.toLowerCase().includes("hospital")).length||0,missingDocs:s?.filter(b=>f(b)).length||0},v=b=>{a(i===b?null:b)};return l?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Customer Management"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage healthcare facilities and their licensing information"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>e("/customers/new"),children:[r.jsx(Lr,{size:16}),"Add Customer"]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Customers",value:j.total,icon:r.jsx(Ih,{size:20}),color:"primary",onClick:()=>a(null),selected:i===null}),r.jsx(lt,{title:"Licensed",value:j.licensed,icon:r.jsx(SW,{size:20}),color:"success",onClick:()=>v("licensed"),selected:i==="licensed"}),r.jsx(lt,{title:"License Expired",value:j.expired,icon:r.jsx(vr,{size:20}),color:"danger",onClick:()=>v("expired"),selected:i==="expired"}),r.jsx(lt,{title:"Hospitals",value:j.hospitals,icon:r.jsx(Zw,{size:20}),color:"info",onClick:()=>v("hospitals"),selected:i==="hospitals"}),r.jsx(lt,{title:"Missing Docs",value:j.missingDocs,icon:r.jsx(ii,{size:20}),color:"warning",onClick:()=>v("missingDocs"),selected:i==="missingDocs"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsx(of,{widgets:p,values:t,onChange:(b,w)=>n(S=>({...S,[b]:w})),onReset:()=>{n({}),a(null)}})}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Customer List (",g?.length||0,")"]})}),g?.length>0?r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{className:"table",style:{marginBottom:0,minWidth:"1000px"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name (EN / AR)"}),r.jsx("th",{children:"City"}),r.jsx("th",{children:"Contact"}),r.jsx("th",{children:"CR Number"}),r.jsx("th",{children:"Tax Number"}),r.jsx("th",{children:"Docs"}),r.jsx("th",{children:"License Status"}),r.jsx("th",{style:{width:"80px",textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:g.map(b=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:b.code}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:b.nameEn||b.name}),b.nameAr&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",direction:"rtl"},children:b.nameAr})]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Fs,{size:14,style:{color:"var(--text-muted)"}}),r.jsx("span",{children:b.city?.name||b.district||"-"})]})}),r.jsx("td",{children:r.jsxs("div",{style:{fontSize:"0.8125rem"},children:[b.mobile&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(hu,{size:12,style:{color:"var(--text-muted)"}}),r.jsx("span",{children:b.mobile})]}),b.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--text-muted)",fontSize:"0.75rem"},children:[r.jsx(Xp,{size:12}),r.jsx("span",{children:b.email})]}),!b.mobile&&!b.email&&"-"]})}),r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:b.crNumber||"-"}),r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:b.taxNumber||"-"}),r.jsx("td",{children:b.documents?.length>0?r.jsxs("span",{className:"badge badge-success",style:{fontSize:"0.6875rem"},children:[b.documents.length," docs"]}):r.jsx("span",{className:"badge badge-warning",style:{fontSize:"0.6875rem"},children:"None"})}),r.jsx("td",{children:b.licenseNumber?r.jsxs("div",{children:[h(b.licenseExpiryDate)?r.jsx(Wn,{status:"EXPIRED",size:"sm"}):r.jsx(Wn,{status:"VALID",size:"sm"}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",marginTop:"0.125rem"},children:b.licenseExpiryDate?`Exp: ${Ke(new Date(b.licenseExpiryDate),"MMM dd, yyyy")}`:""})]}):r.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8125rem"},children:"-"})}),r.jsx("td",{children:r.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>e(`/customers/${b.id}/edit`),title:"Edit Customer",children:r.jsx($l,{size:14})})})})]},b.id))})]})}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No customers found",message:"Add your first customer to get started",icon:"package"})})]})]})}function Er(e){return e?e.response?.data?.error?e.response.data.error:e.response?.data?.message?{code:"UNKNOWN",message:e.response.data.message,userMessage:e.response.data.message}:e.message?{code:"NETWORK_ERROR",message:e.message,userMessage:"Unable to connect to the server. Please check your connection and try again."}:{code:"UNKNOWN",message:"An unknown error occurred",userMessage:"Something went wrong. Please try again."}:null}const NE={CR:"Commercial Registration",TAX_CERT:"Tax Certificate",LICENSE:"License",CONTRACT:"Contract",NDA:"Non-Disclosure Agreement",OTHER:"Other"},_E=5*1024*1024;function CE(){const{id:e}=nf(),t=Cn(),n=Tr(),i=Ei(),a=!!e,[s,l]=P.useState({code:"",nameEn:"",nameAr:"",email:"",mobile:"",phone:"",crNumber:"",taxNumber:"",fullAddress:"",shortAddress:"",buildingNo:"",street:"",secondaryNo:"",district:"",postalCode:"",countryId:"",regionId:"",cityId:"",categoryId:"",latitude:"",longitude:"",licenseNumber:"",licenseExpiryDate:"",travelTimeMinutes:60}),[d,h]=P.useState({}),[f,p]=P.useState(null),[g,j]=P.useState(!1),[v,b]=P.useState(!1),[w,S]=P.useState("CR"),_=P.useRef(null),E=P.useRef(null),{data:D,isLoading:W}=Ye({queryKey:["customer",e],queryFn:async()=>{const{data:Q}=await xe.get(`/customers/${e}`);return Q},enabled:a}),{data:K}=Ye({queryKey:["settings","countries"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/countries");return Q}}),{data:B}=Ye({queryKey:["settings","regions",s.countryId],queryFn:async()=>{const Q=s.countryId?{countryId:s.countryId}:{},{data:V}=await xe.get("/settings/regions",{params:Q});return V}}),{data:F}=Ye({queryKey:["settings","cities",s.regionId],queryFn:async()=>{const Q=s.regionId?{regionId:s.regionId}:{},{data:V}=await xe.get("/settings/cities",{params:Q});return V},enabled:!!s.regionId}),{data:H}=Ye({queryKey:["settings","categories"],queryFn:async()=>{const{data:Q}=await xe.get("/settings/categories");return Q}});P.useEffect(()=>{if(D)l({code:D.code||"",nameEn:D.nameEn||D.name||"",nameAr:D.nameAr||"",email:D.email||"",mobile:D.mobile||D.phone||"",phone:D.phone||"",crNumber:D.crNumber||"",taxNumber:D.taxNumber||"",fullAddress:D.fullAddress||D.address||"",shortAddress:D.shortAddress||"",buildingNo:D.buildingNo||"",street:D.street||"",secondaryNo:D.secondaryNo||"",district:D.district||"",postalCode:D.postalCode||"",countryId:D.countryId||"",regionId:D.regionId||"",cityId:D.cityId||"",categoryId:D.categoryId||"",latitude:D.latitude?.toString()||"",longitude:D.longitude?.toString()||"",licenseNumber:D.licenseNumber||"",licenseExpiryDate:D.licenseExpiryDate?.split("T")[0]||"",travelTimeMinutes:D.travelTimeMinutes||60}),D.logoUrl&&p(D.logoUrl);else if(!a&&K?.length>0){const Q=K.find(V=>V.code==="SA");Q&&l(V=>({...V,countryId:Q.id}))}},[D,K,a]);const I=()=>{const Q={};if(s.code.trim()||(Q.code="Customer code is required"),s.nameEn.trim()||(Q.nameEn="English name is required"),s.nameAr.trim()||(Q.nameAr="Arabic name is required"),!s.mobile.trim())Q.mobile="Mobile number is required";else{const V=/^(\+9665|05)\d{8}$/,ne=/^\+\d{10,15}$/;!V.test(s.mobile)&&!ne.test(s.mobile)&&(Q.mobile="Enter a valid Saudi mobile number (e.g., 05xxxxxxxx or +9665xxxxxxxx)")}if(s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&(Q.email="Enter a valid email address"),s.crNumber.trim()||(Q.crNumber="Commercial Registration number is required"),s.taxNumber.trim()||(Q.taxNumber="Tax number is required"),s.fullAddress.trim()||(Q.fullAddress="Full address is required"),s.cityId||(Q.cityId="City is required"),s.latitude){const V=parseFloat(s.latitude);(isNaN(V)||V<-90||V>90)&&(Q.latitude="Latitude must be between -90 and 90")}if(s.longitude){const V=parseFloat(s.longitude);(isNaN(V)||V<-180||V>180)&&(Q.longitude="Longitude must be between -180 and 180")}return h(Q),Object.keys(Q).length===0},R=ft({mutationFn:async Q=>a?xe.put(`/customers/${e}`,Q):xe.post("/customers",Q),onSuccess:()=>{n.invalidateQueries({queryKey:["customers"]}),i.success(a?"Customer Updated":"Customer Created",a?"Customer details have been updated":"New customer has been added"),t("/customers")},onError:Q=>{const V=Er(Q);i.error("Error",V?.userMessage||"Failed to save customer")}}),Y=(Q,V=!0)=>{if(Q.preventDefault(),!I()){i.error("Validation Error","Please fix the errors in the form");return}R.mutate(s)},G=async Q=>{if(!a){i.error("Error","Please save the customer first before uploading a logo");return}if(!["image/png","image/jpeg","image/jpg"].includes(Q.type)){i.error("Invalid File Type","Only PNG and JPG images are allowed");return}if(Q.size>_E){i.error("File Too Large","File exceeds 5 MB. Please upload a smaller file.");return}j(!0);const V=new FormData;V.append("logo",Q);try{const{data:ne}=await xe.post(`/customers/${e}/logo`,V,{headers:{"Content-Type":"multipart/form-data"}});p(ne.logoUrl),n.invalidateQueries({queryKey:["customer",e]}),i.success("Logo Uploaded","Customer logo has been updated")}catch(ne){const $=Er(ne);i.error("Upload Failed",$?.userMessage||"Failed to upload logo")}finally{j(!1)}},ae=async()=>{if(a)try{await xe.delete(`/customers/${e}/logo`),p(null),n.invalidateQueries({queryKey:["customer",e]}),i.success("Logo Removed","Customer logo has been removed")}catch{i.error("Error","Failed to remove logo")}},se=async Q=>{if(!a){i.error("Error","Please save the customer first before uploading documents");return}if(!["image/png","image/jpeg","image/jpg","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Q.type)){i.error("Invalid File Type","Allowed: PDF, PNG, JPG, DOCX");return}if(Q.size>_E){i.error("File Too Large","File exceeds 5 MB. Please upload a smaller document.");return}b(!0);const ne=new FormData;ne.append("document",Q),ne.append("docType",w);try{await xe.post(`/customers/${e}/documents`,ne,{headers:{"Content-Type":"multipart/form-data"}}),n.invalidateQueries({queryKey:["customer",e]}),i.success("Document Uploaded","Document has been added")}catch($){const de=Er($);i.error("Upload Failed",de?.userMessage||"Failed to upload document")}finally{b(!1)}},Ne=async Q=>{if(confirm("Are you sure you want to delete this document?"))try{await xe.delete(`/customers/${e}/documents/${Q}`),n.invalidateQueries({queryKey:["customer",e]}),i.success("Document Deleted","Document has been removed")}catch{i.error("Error","Failed to delete document")}},z=Q=>Q<1024?`${Q} B`:Q<1024*1024?`${(Q/1024).toFixed(1)} KB`:`${(Q/(1024*1024)).toFixed(1)} MB`,ie=(Q,V)=>{l(ne=>({...ne,[Q]:V})),d[Q]&&h(ne=>({...ne,[Q]:""}))},q=Q=>{l(V=>({...V,countryId:Q,regionId:"",cityId:""}))},re=Q=>{l(V=>({...V,regionId:Q,cityId:""}))};if(W&&a)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});const ue=Object.keys(d).filter(Q=>d[Q]).length;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>t("/customers"),children:r.jsx(pd,{size:16})}),r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:a?"Edit Customer":"Create New Customer"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:a?"Update customer information and documents":"Add a new customer to the system"})]})]}),ue>0&&r.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"var(--danger)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)"},children:[r.jsx(In,{size:18}),r.jsxs("span",{style:{fontWeight:500},children:["Please fix ",ue," error(s) before saving"]})]})}),r.jsxs("form",{onSubmit:Y,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx(Vl,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Basic Information"})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer Code *"}),r.jsx("input",{type:"text",className:`form-input ${d.code?"error":""}`,value:s.code,onChange:Q=>ie("code",Q.target.value),placeholder:"e.g., CUST001",disabled:a}),d.code&&r.jsx("span",{className:"form-error",children:d.code})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Category"}),r.jsxs("select",{className:"form-select",value:s.categoryId,onChange:Q=>ie("categoryId",Q.target.value),children:[r.jsx("option",{value:"",children:"Select Category"}),H?.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (English) *"}),r.jsx("input",{type:"text",className:`form-input ${d.nameEn?"error":""}`,value:s.nameEn,onChange:Q=>ie("nameEn",Q.target.value),placeholder:"Customer name in English"}),d.nameEn&&r.jsx("span",{className:"form-error",children:d.nameEn})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (Arabic) *  "}),r.jsx("input",{type:"text",className:`form-input ${d.nameAr?"error":""}`,value:s.nameAr,onChange:Q=>ie("nameAr",Q.target.value),placeholder:" ",dir:"rtl"}),d.nameAr&&r.jsx("span",{className:"form-error",children:d.nameAr})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Email"}),r.jsx("input",{type:"email",className:`form-input ${d.email?"error":""}`,value:s.email,onChange:Q=>ie("email",Q.target.value),placeholder:"customer@example.com"}),d.email&&r.jsx("span",{className:"form-error",children:d.email})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Mobile Number *"}),r.jsx("input",{type:"tel",className:`form-input ${d.mobile?"error":""}`,value:s.mobile,onChange:Q=>ie("mobile",Q.target.value),placeholder:"05xxxxxxxx or +9665xxxxxxxx"}),d.mobile&&r.jsx("span",{className:"form-error",children:d.mobile})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Phone (Landline)"}),r.jsx("input",{type:"tel",className:"form-input",value:s.phone,onChange:Q=>ie("phone",Q.target.value),placeholder:"Optional"})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx(Fs,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Address & Location"})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"form-label",children:"Full Address *"}),r.jsx("textarea",{className:`form-textarea ${d.fullAddress?"error":""}`,value:s.fullAddress,onChange:Q=>ie("fullAddress",Q.target.value),rows:3,placeholder:"Enter complete street address, building name, landmarks...",style:{width:"100%",resize:"vertical"}}),d.fullAddress&&r.jsx("span",{className:"form-error",children:d.fullAddress})]}),r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[r.jsx("h4",{style:{fontSize:"0.8125rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-muted)"},children:"Saudi National Address (Optional)"}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Short Address"}),r.jsx("input",{type:"text",className:"form-input",value:s.shortAddress,onChange:Q=>ie("shortAddress",Q.target.value),placeholder:"ABCD1234",maxLength:8})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Building No."}),r.jsx("input",{type:"text",className:"form-input",value:s.buildingNo,onChange:Q=>ie("buildingNo",Q.target.value)})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Street"}),r.jsx("input",{type:"text",className:"form-input",value:s.street,onChange:Q=>ie("street",Q.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Secondary No."}),r.jsx("input",{type:"text",className:"form-input",value:s.secondaryNo,onChange:Q=>ie("secondaryNo",Q.target.value)})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"District"}),r.jsx("input",{type:"text",className:"form-input",value:s.district,onChange:Q=>ie("district",Q.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Postal Code"}),r.jsx("input",{type:"text",className:"form-input",value:s.postalCode,onChange:Q=>ie("postalCode",Q.target.value)})]})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Country"}),r.jsxs("select",{className:"form-select",value:s.countryId,onChange:Q=>q(Q.target.value),children:[r.jsx("option",{value:"",children:"Select Country"}),K?.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Region"}),r.jsxs("select",{className:"form-select",value:s.regionId,onChange:Q=>re(Q.target.value),disabled:!s.countryId,children:[r.jsx("option",{value:"",children:"Select Region"}),B?.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"City *"}),r.jsxs("select",{className:`form-select ${d.cityId?"error":""}`,value:s.cityId,onChange:Q=>ie("cityId",Q.target.value),disabled:!s.regionId,children:[r.jsx("option",{value:"",children:"Select City"}),F?.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))]}),d.cityId&&r.jsx("span",{className:"form-error",children:d.cityId})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Latitude"}),r.jsx("input",{type:"number",step:"any",className:`form-input ${d.latitude?"error":""}`,value:s.latitude,onChange:Q=>ie("latitude",Q.target.value),placeholder:"-90 to 90"}),d.latitude&&r.jsx("span",{className:"form-error",children:d.latitude})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Longitude"}),r.jsx("input",{type:"number",step:"any",className:`form-input ${d.longitude?"error":""}`,value:s.longitude,onChange:Q=>ie("longitude",Q.target.value),placeholder:"-180 to 180"}),d.longitude&&r.jsx("span",{className:"form-error",children:d.longitude})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Travel Time (min)"}),r.jsx("input",{type:"number",className:"form-input",value:s.travelTimeMinutes,onChange:Q=>ie("travelTimeMinutes",parseInt(Q.target.value)||60),min:0})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx(Zw,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Business Identifiers"})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Commercial Registration (CR) *"}),r.jsx("input",{type:"text",className:`form-input ${d.crNumber?"error":""}`,value:s.crNumber,onChange:Q=>ie("crNumber",Q.target.value),placeholder:"e.g., 1010xxxxxx"}),d.crNumber&&r.jsx("span",{className:"form-error",children:d.crNumber})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Tax Number (VAT) *"}),r.jsx("input",{type:"text",className:`form-input ${d.taxNumber?"error":""}`,value:s.taxNumber,onChange:Q=>ie("taxNumber",Q.target.value),placeholder:"e.g., 3xxxxxxxxxxxxxxx"}),d.taxNumber&&r.jsx("span",{className:"form-error",children:d.taxNumber})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"License Number"}),r.jsx("input",{type:"text",className:"form-input",value:s.licenseNumber,onChange:Q=>ie("licenseNumber",Q.target.value),placeholder:"Operating license number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"License Expiry Date"}),r.jsx("input",{type:"date",className:"form-input",value:s.licenseExpiryDate,onChange:Q=>ie("licenseExpiryDate",Q.target.value)})]})]})]})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx(Kv,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Branding"})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"120px",height:"120px",border:"2px dashed var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-secondary)",overflow:"hidden"},children:f?r.jsx("img",{src:f,alt:"Customer Logo",style:{width:"100%",height:"100%",objectFit:"contain"}}):r.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:[r.jsx(Kv,{size:32}),r.jsx("p",{style:{fontSize:"0.75rem",margin:"0.5rem 0 0"},children:"No logo"})]})}),r.jsx("input",{ref:_,type:"file",accept:"image/png,image/jpeg,image/jpg",style:{display:"none"},onChange:Q=>Q.target.files?.[0]&&G(Q.target.files[0])}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{type:"button",className:"btn btn-outline btn-sm",onClick:()=>_.current?.click(),disabled:!a||g,children:g?"Uploading...":r.jsxs(r.Fragment,{children:[r.jsx(vm,{size:14})," Upload"]})}),f&&r.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:ae,children:r.jsx(mi,{size:14})})]}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center",margin:0},children:["PNG or JPG, max 5MB",!a&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),"Save customer first"]})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx(af,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Documents"})]}),a?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[r.jsx("select",{className:"form-select",value:w,onChange:Q=>S(Q.target.value),style:{flex:1},children:Object.entries(NE).map(([Q,V])=>r.jsx("option",{value:Q,children:V},Q))}),r.jsx("input",{ref:E,type:"file",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",style:{display:"none"},onChange:Q=>Q.target.files?.[0]&&se(Q.target.files[0])}),r.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>E.current?.click(),disabled:v,children:v?"Uploading...":r.jsxs(r.Fragment,{children:[r.jsx(vm,{size:14})," Add"]})})]}),D?.documents?.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:D.documents.map(Q=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx(ii,{size:20,style:{color:"var(--primary)",flexShrink:0}}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.8125rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Q.docName}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("span",{className:"badge badge-default",style:{fontSize:"0.625rem"},children:NE[Q.docType]||Q.docType}),r.jsx("span",{children:z(Q.fileSizeBytes)}),r.jsx("span",{children:Ke(new Date(Q.uploadedAt),"MMM dd, yyyy")})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("a",{href:Q.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline btn-sm",style:{padding:"0.25rem"},children:r.jsx(Xw,{size:14})}),r.jsx("button",{type:"button",className:"btn btn-danger btn-sm",style:{padding:"0.25rem"},onClick:()=>Ne(Q.id),children:r.jsx(hn,{size:14})})]})]},Q.id))}):r.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"var(--text-muted)"},children:[r.jsx(ii,{size:32,style:{opacity:.5}}),r.jsx("p",{style:{fontSize:"0.875rem",margin:"0.5rem 0 0"},children:"No documents uploaded"})]})]}):r.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"var(--text-muted)"},children:[r.jsx(ii,{size:32,style:{opacity:.5}}),r.jsx("p",{style:{fontSize:"0.875rem",margin:"0.5rem 0 0"},children:"Save customer first to upload documents"})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center",marginTop:"0.75rem"},children:"PDF, PNG, JPG, DOCX - Max 5MB each"})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem 1.5rem",marginTop:"1.5rem",display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>t("/customers"),children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:R.isPending,children:[r.jsx(eg,{size:16}),R.isPending?"Saving...":a?"Update Customer":"Create Customer"]})]})]})]})}let zV={data:""},BV=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||zV},FV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qV=/\/\*[^]*?\*\/|  +/g,AE=/\n+/g,Yu=(e,t)=>{let n="",i="",a="";for(let s in e){let l=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+l+";":i+=s[1]=="f"?Yu(l,s):s+"{"+Yu(l,s[1]=="k"?"":t)+"}":typeof l=="object"?i+=Yu(l,t?t.replace(/([^,])+/g,d=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):s):l!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Yu.p?Yu.p(s,l):s+":"+l+";")}return n+(t&&a?t+"{"+a+"}":a)+i},Ud={},HO=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+HO(e[n]);return t}return e},UV=(e,t,n,i,a)=>{let s=HO(e),l=Ud[s]||(Ud[s]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Ud[l]){let h=s!==e?e:(f=>{let p,g,j=[{}];for(;p=FV.exec(f.replace(qV,""));)p[4]?j.shift():p[3]?(g=p[3].replace(AE," ").trim(),j.unshift(j[0][g]=j[0][g]||{})):j[0][p[1]]=p[2].replace(AE," ").trim();return j[0]})(e);Ud[l]=Yu(a?{["@keyframes "+l]:h}:h,n?"":"."+l)}let d=n&&Ud.g?Ud.g:null;return n&&(Ud.g=Ud[l]),((h,f,p,g)=>{g?f.data=f.data.replace(g,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(Ud[l],t,i,d),l},HV=(e,t,n)=>e.reduce((i,a,s)=>{let l=t[s];if(l&&l.call){let d=l(n),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;l=h?"."+h:d&&typeof d=="object"?d.props?"":Yu(d,""):d===!1?"":d}return i+a+(l??"")},"");function sx(e){let t=this||{},n=e.call?e(t.p):e;return UV(n.unshift?n.raw?HV(n,[].slice.call(arguments,1),t.p):n.reduce((i,a)=>Object.assign(i,a&&a.call?a(t.p):a),{}):n,BV(t.target),t.g,t.o,t.k)}let WO,b5,j5;sx.bind({g:1});let nu=sx.bind({k:1});function WV(e,t,n,i){Yu.p=t,WO=e,b5=n,j5=i}function ah(e,t){let n=this||{};return function(){let i=arguments;function a(s,l){let d=Object.assign({},s),h=d.className||a.className;n.p=Object.assign({theme:b5&&b5()},d),n.o=/ *go\d+/.test(h),d.className=sx.apply(n,i)+(h?" "+h:"");let f=e;return e[0]&&(f=d.as||e,delete d.as),j5&&f[0]&&j5(d),WO(f,d)}return a}}var $V=e=>typeof e=="function",w5=(e,t)=>$V(e)?e(t):e,VV=(()=>{let e=0;return()=>(++e).toString()})(),KV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),GV=20,$O="default",VO=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:i}=t;return VO(e,{type:e.toasts.find(l=>l.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(l=>l.id===a||a===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+s}))}}},QV=[],YV={toasts:[],pausedAt:void 0,settings:{toastLimit:GV}},lm={},KO=(e,t=$O)=>{lm[t]=VO(lm[t]||YV,e),QV.forEach(([n,i])=>{n===t&&i(lm[t])})},GO=e=>Object.keys(lm).forEach(t=>KO(e,t)),ZV=e=>Object.keys(lm).find(t=>lm[t].toasts.some(n=>n.id===e)),aS=(e=$O)=>t=>{KO(t,e)},XV=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||VV()}),Eg=e=>(t,n)=>{let i=XV(t,e,n);return aS(i.toasterId||ZV(i.id))({type:2,toast:i}),i.id},gs=(e,t)=>Eg("blank")(e,t);gs.error=Eg("error");gs.success=Eg("success");gs.loading=Eg("loading");gs.custom=Eg("custom");gs.dismiss=(e,t)=>{let n={type:3,toastId:e};t?aS(t)(n):GO(n)};gs.dismissAll=e=>gs.dismiss(void 0,e);gs.remove=(e,t)=>{let n={type:4,toastId:e};t?aS(t)(n):GO(n)};gs.removeAll=e=>gs.remove(void 0,e);gs.promise=(e,t,n)=>{let i=gs.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let s=t.success?w5(t.success,a):void 0;return s?gs.success(s,{id:i,...n,...n?.success}):gs.dismiss(i),a}).catch(a=>{let s=t.error?w5(t.error,a):void 0;s?gs.error(s,{id:i,...n,...n?.error}):gs.dismiss(i)}),e};var JV=nu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,eK=nu`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tK=nu`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,rK=ah("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${JV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${eK} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${tK} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,nK=nu`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,iK=ah("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${nK} 1s linear infinite;
`,aK=nu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,sK=nu`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,oK=ah("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${sK} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,lK=ah("div")`
  position: absolute;
`,cK=ah("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,dK=nu`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uK=ah("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${dK} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,hK=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?P.createElement(uK,null,t):t:n==="blank"?null:P.createElement(cK,null,P.createElement(iK,{...i}),n!=="loading"&&P.createElement(lK,null,n==="error"?P.createElement(rK,{...i}):P.createElement(oK,{...i})))},fK=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mK=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,pK="0%{opacity:0;} 100%{opacity:1;}",gK="0%{opacity:1;} 100%{opacity:0;}",yK=ah("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,vK=ah("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xK=(e,t)=>{let n=e.includes("top")?1:-1,[i,a]=KV()?[pK,gK]:[fK(n),mK(n)];return{animation:t?`${nu(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nu(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};P.memo(({toast:e,position:t,style:n,children:i})=>{let a=e.height?xK(e.position||t||"top-center",e.visible):{opacity:0},s=P.createElement(hK,{toast:e}),l=P.createElement(vK,{...e.ariaProps},w5(e.message,e));return P.createElement(yK,{className:e.className,style:{...a,...n,...e.style}},typeof i=="function"?i({icon:s,message:l}):P.createElement(P.Fragment,null,s,l))});WV(P.createElement);sx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Ur=gs;function bK(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(2)} MB`}function jK(e){return e.startsWith("image/")?Kv:e.includes("pdf")?ii:mH}function Lm({entityType:e,entityId:t,title:n="Attachments",readOnly:i=!1}){const a=Tr(),s=P.useRef(null),[l,d]=P.useState(!1),[h,f]=P.useState(""),{data:p,isLoading:g}=Ye({queryKey:["attachments",e,t],queryFn:async()=>{const{data:S}=await xe.get(`/attachments/${e}/${t}`);return S},enabled:!!t}),{data:j}=Ye({queryKey:["attachment-allowed"],queryFn:async()=>{const{data:S}=await xe.get("/attachments/allowed-extensions");return S}}),v=ft({mutationFn:async S=>{await xe.delete(`/attachments/${S}`)},onSuccess:()=>{a.invalidateQueries({queryKey:["attachments",e,t]}),Ur.success("Attachment deleted")},onError:()=>{Ur.error("Failed to delete attachment")}}),b=async S=>{const _=S.target.files?.[0];if(!_)return;const E=(j?.maxSizeMB||5)*1024*1024;if(_.size>E){Ur.error(`File too large. Maximum size is ${j?.maxSizeMB||5} MB`);return}if(j?.extensions&&j.extensions.length>0){const D=_.name.split(".").pop()?.toLowerCase()||"";if(!j.extensions.includes(D)){Ur.error(`File type .${D} is not allowed`);return}}d(!0);try{const D=new FormData;D.append("file",_),h&&D.append("description",h),await xe.post(`/attachments/${e}/${t}`,D,{headers:{"Content-Type":"multipart/form-data"}}),a.invalidateQueries({queryKey:["attachments",e,t]}),Ur.success("File uploaded"),f("")}catch(D){Ur.error(D.response?.data?.error||"Upload failed")}finally{d(!1),s.current&&(s.current.value="")}},w=async S=>{try{const _=await xe.get(`/attachments/download/${S.id}`,{responseType:"blob"}),E=window.URL.createObjectURL(new Blob([_.data])),D=document.createElement("a");D.href=E,D.setAttribute("download",S.originalName),document.body.appendChild(D),D.click(),D.remove(),window.URL.revokeObjectURL(E)}catch{Ur.error("Failed to download file")}};return r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",border:"1px solid var(--border)",overflow:"hidden"},children:[r.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ym,{size:18}),r.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:600},children:n}),p&&p.length>0&&r.jsx("span",{style:{background:"var(--primary)",color:"white",padding:"0.125rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:p.length})]})}),r.jsxs("div",{style:{padding:"1rem"},children:[!i&&r.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",border:"2px dashed var(--border)",borderRadius:"8px",background:"var(--bg-secondary)"},children:[r.jsx("input",{ref:s,type:"file",onChange:b,disabled:l,style:{display:"none"},id:`file-upload-${e}-${t}`}),r.jsx("div",{style:{marginBottom:"0.75rem"},children:r.jsx("input",{type:"text",value:h,onChange:S=>f(S.target.value),placeholder:"Description (optional)",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}})}),r.jsxs("label",{htmlFor:`file-upload-${e}-${t}`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"var(--primary)",color:"white",borderRadius:"8px",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:[r.jsx(vm,{size:18}),l?"Uploading...":"Choose File to Upload"]}),j?.extensions&&j.extensions.length>0&&r.jsxs("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center"},children:["Allowed: ",j.extensions.map(S=>`.${S}`).join(", ")," (max ",j.maxSizeMB,"MB)"]}),(!j?.extensions||j.extensions.length===0)&&r.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center"},children:"Max file size: 5MB"})]}),g?r.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"Loading attachments..."}):p?.length===0?r.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem 1rem"},children:[r.jsx(ym,{size:32,style:{opacity:.3,marginBottom:"0.5rem"}}),r.jsx("p",{style:{margin:0},children:"No attachments yet"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:p?.map(S=>{const _=jK(S.mimeType);return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border)"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(_,{size:20})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:S.originalName}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsx("span",{children:bK(S.fileSize)}),r.jsxs("span",{children:[S.uploadedBy.firstName," ",S.uploadedBy.lastName]}),r.jsx("span",{children:Ke(new Date(S.createdAt),"MMM d, HH:mm")})]}),S.description&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:S.description})]}),r.jsxs("div",{style:{display:"flex",gap:"0.375rem"},children:[r.jsx("button",{onClick:()=>w(S),style:{padding:"0.375rem",background:"none",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer"},title:"Download",children:r.jsx(Xw,{size:16})}),!i&&r.jsx("button",{onClick:()=>{confirm("Delete this attachment?")&&v.mutate(S.id)},style:{padding:"0.375rem",background:"none",border:"1px solid #ef4444",borderRadius:"6px",cursor:"pointer",color:"#ef4444"},title:"Delete",children:r.jsx(mi,{size:16})})]})]},S.id)})})]})]})}function wK(){const[e,t]=P.useState(!1),[n,i]=P.useState(null),[a,s]=P.useState(null),[l,d]=P.useState(""),[h,f]=P.useState(""),[p,g]=P.useState(""),j=Tr(),v=Ei(),{data:b,isLoading:w}=Ye({queryKey:["products"],queryFn:async()=>{const{data:B}=await xe.get("/products");return B}}),S=ft({mutationFn:async B=>n?xe.put(`/products/${n.id}`,B):xe.post("/products",B),onSuccess:()=>{j.invalidateQueries({queryKey:["products"]}),t(!1),i(null),v.success(n?"Product Updated":"Product Created",n?"Product details have been updated":"New product has been added")},onError:B=>{const F=Er(B);v.error("Error",F?.userMessage||"Failed to save product")}}),_=B=>{B.preventDefault();const F=new FormData(B.currentTarget);S.mutate({name:F.get("name"),code:F.get("code"),productType:F.get("productType"),radionuclide:F.get("radionuclide"),halfLifeMinutes:parseFloat(F.get("halfLifeMinutes")),shelfLifeMinutes:parseFloat(F.get("shelfLifeMinutes")),standardDose:parseFloat(F.get("standardDose"))||null,doseUnit:F.get("doseUnit"),productionMethod:F.get("productionMethod"),synthesisTimeMinutes:parseInt(F.get("synthesisTimeMinutes")),qcTimeMinutes:parseInt(F.get("qcTimeMinutes")),packagingTimeMinutes:parseInt(F.get("packagingTimeMinutes")),overagePercent:parseFloat(F.get("overagePercent"))})},E=B=>{if(B>=60){const F=Math.floor(B/60),H=B%60;return H>0?`${F}h ${H}m`:`${F}h`}return`${B}m`},D=b?.filter(B=>{if(l&&B.productType!==l||h&&B.productionMethod!==h)return!1;if(p){const F=p.toLowerCase();return B.name.toLowerCase().includes(F)||B.code.toLowerCase().includes(F)||B.radionuclide.toLowerCase().includes(F)}return!0})||[],W={total:b?.length||0,pet:b?.filter(B=>B.productType==="PET").length||0,spect:b?.filter(B=>B.productType==="SPECT").length||0,therapy:b?.filter(B=>B.productType==="THERAPY").length||0},K=B=>{switch(B){case"PET":return{bg:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"};case"SPECT":return{bg:"rgba(34, 197, 94, 0.1)",color:"var(--success)"};case"THERAPY":return{bg:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"};default:return{bg:"rgba(100, 116, 139, 0.1)",color:"var(--text-muted)"}}};return w?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Product Catalog"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage radiopharmaceutical products with decay properties and production times"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>t(!0),children:[r.jsx(Lr,{size:16})," Add Product"]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Products",value:W.total,icon:r.jsx(Sr,{size:20}),color:"primary",onClick:()=>d(""),active:!l}),r.jsx(lt,{title:"PET Products",value:W.pet,icon:r.jsx(sm,{size:20}),color:"info",onClick:()=>d(l==="PET"?"":"PET"),active:l==="PET"}),r.jsx(lt,{title:"SPECT Products",value:W.spect,icon:r.jsx(Wl,{size:20}),color:"success",onClick:()=>d(l==="SPECT"?"":"SPECT"),active:l==="SPECT"}),r.jsx(lt,{title:"Therapy Products",value:W.therapy,icon:r.jsx(OO,{size:20}),color:"warning",onClick:()=>d(l==="THERAPY"?"":"THERAPY"),active:l==="THERAPY"})]}),r.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(sf,{size:18,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{fontWeight:500,color:"var(--text-muted)"},children:"Filters:"})]}),r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"300px"},children:[r.jsx(ho,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",className:"form-input",placeholder:"Search by name, code, or isotope...",value:p,onChange:B=>g(B.target.value),style:{paddingLeft:"2.25rem"}})]}),r.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"150px"},value:l,onChange:B=>d(B.target.value),children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"PET",children:"PET"}),r.jsx("option",{value:"SPECT",children:"SPECT"}),r.jsx("option",{value:"THERAPY",children:"Therapy"})]}),r.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"160px"},value:h,onChange:B=>f(B.target.value),children:[r.jsx("option",{value:"",children:"All Methods"}),r.jsx("option",{value:"CYCLOTRON",children:"Cyclotron"}),r.jsx("option",{value:"GENERATOR",children:"Generator"}),r.jsx("option",{value:"KIT",children:"Kit"})]}),(l||h||p)&&r.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{d(""),f(""),g("")},children:[r.jsx(hn,{size:14})," Clear"]})]})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:a?"1fr 380px":"1fr",gap:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:D.map(B=>{const F=K(B.productType),H=a?.id===B.id;return r.jsxs("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:H?"2px solid var(--primary)":"1px solid var(--border)",transition:"all 0.2s"},onClick:()=>s(B),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[r.jsx("span",{className:"badge",style:{background:F.bg,color:F.color,fontWeight:600},children:B.productType}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:I=>{I.stopPropagation(),i(B),t(!0)},children:r.jsx($l,{size:14})})]}),r.jsx("h3",{style:{fontWeight:600,marginBottom:"0.25rem",fontSize:"1rem"},children:B.name}),r.jsxs("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginBottom:"1rem"},children:[r.jsx("span",{style:{fontFamily:"monospace"},children:B.code}),"  ",B.radionuclide]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8125rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Dt,{size:14,style:{color:"var(--text-muted)"}}),r.jsxs("span",{children:["T: ",E(B.halfLifeMinutes)]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Qv,{size:14,style:{color:"var(--text-muted)"}}),r.jsxs("span",{children:["Shelf: ",E(B.shelfLifeMinutes)]})]})]}),r.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("span",{className:"badge badge-default",style:{fontSize:"0.6875rem"},children:B.productionMethod}),r.jsxs("span",{style:{opacity:.7},children:[B.synthesisTimeMinutes+B.qcTimeMinutes+B.packagingTimeMinutes,"m total production"]})]})]},B.id)})}),D.length===0&&r.jsx("div",{className:"card",style:{padding:"2rem"},children:r.jsx(Bs,{title:"No products found",message:p||l||h?"Try adjusting your filters":"Add your first product to get started",icon:"package"})})]}),a&&r.jsxs("div",{className:"card",style:{padding:0,height:"fit-content",position:"sticky",top:"1rem"},children:[r.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:K(a.productType).bg},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{children:[r.jsx("span",{className:"badge",style:{background:K(a.productType).color,color:"white",marginBottom:"0.5rem"},children:a.productType}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:"0.5rem 0 0.25rem"},children:a.name}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",margin:0},children:a.code})]}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>s(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:r.jsx(hn,{size:14})})]})}),r.jsxs("div",{style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{marginBottom:"1.25rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Isotope Properties"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[r.jsx(sm,{size:14,style:{color:"var(--primary)"}}),r.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Radionuclide"})]}),r.jsx("div",{style:{fontWeight:600},children:a.radionuclide})]}),r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[r.jsx(Dt,{size:14,style:{color:"var(--warning)"}}),r.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Half-Life"})]}),r.jsx("div",{style:{fontWeight:600},children:E(a.halfLifeMinutes)})]}),r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[r.jsx(Qv,{size:14,style:{color:"var(--success)"}}),r.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Shelf Life"})]}),r.jsx("div",{style:{fontWeight:600},children:E(a.shelfLifeMinutes)})]}),r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[r.jsx(wc,{size:14,style:{color:"var(--primary)"}}),r.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Std. Dose"})]}),r.jsxs("div",{style:{fontWeight:600},children:[a.standardDose||"-"," ",a.doseUnit]})]})]})]}),r.jsxs("div",{style:{marginBottom:"1.25rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Production Details"}),r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.25rem"},children:[r.jsx(lo,{size:14,style:{color:"var(--primary)"}}),r.jsx("span",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Production Method"})]}),r.jsx("div",{style:{fontWeight:600},children:a.productionMethod})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[r.jsx("span",{style:{fontSize:"0.8125rem"},children:"Synthesis Time"}),r.jsxs("span",{style:{fontWeight:600},children:[a.synthesisTimeMinutes," min"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[r.jsx("span",{style:{fontSize:"0.8125rem"},children:"QC Testing Time"}),r.jsxs("span",{style:{fontWeight:600},children:[a.qcTimeMinutes," min"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:[r.jsx("span",{style:{fontSize:"0.8125rem"},children:"Packaging Time"}),r.jsxs("span",{style:{fontWeight:600},children:[a.packagingTimeMinutes," min"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem",background:"var(--primary)",color:"white",borderRadius:"var(--radius)"},children:[r.jsx("span",{style:{fontSize:"0.8125rem"},children:"Total Production"}),r.jsxs("span",{style:{fontWeight:600},children:[a.synthesisTimeMinutes+a.qcTimeMinutes+a.packagingTimeMinutes," min"]})]})]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Overage Factor"}),r.jsxs("div",{style:{padding:"0.75rem",background:"rgba(234, 179, 8, 0.1)",borderRadius:"var(--radius)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.8125rem"},children:"Decay compensation"}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["+",a.overagePercent,"%"]})]})]}),a.qcTemplates?.length>0&&r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:["QC Tests (",a.qcTemplates.length,")"]}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.375rem"},children:a.qcTemplates.map(B=>r.jsx("span",{className:"badge badge-default",style:{fontSize:"0.6875rem"},children:B.testName},B.id))})]}),r.jsx("div",{style:{marginTop:"1.25rem",marginBottom:"1rem"},children:r.jsx(Lm,{entityType:"PRODUCT",entityId:a.id,title:"Product Documents"})}),r.jsxs("button",{className:"btn btn-primary",style:{width:"100%"},onClick:()=>{i(a),t(!0)},children:[r.jsx($l,{size:16})," Edit Product"]})]})]})]}),e&&r.jsx("div",{className:"modal-overlay",onClick:()=>t(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"40rem"},onClick:B=>B.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:n?"Edit Product":"Add Product"}),r.jsx("button",{onClick:()=>{t(!1),i(null)},style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("form",{onSubmit:_,children:[r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code"}),r.jsx("input",{name:"code",className:"form-input",defaultValue:n?.code,required:!0,disabled:!!n})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name"}),r.jsx("input",{name:"name",className:"form-input",defaultValue:n?.name,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Product Type"}),r.jsxs("select",{name:"productType",className:"form-select",defaultValue:n?.productType||"PET",required:!0,children:[r.jsx("option",{value:"PET",children:"PET"}),r.jsx("option",{value:"SPECT",children:"SPECT"}),r.jsx("option",{value:"THERAPY",children:"THERAPY"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Production Method"}),r.jsxs("select",{name:"productionMethod",className:"form-select",defaultValue:n?.productionMethod||"CYCLOTRON",required:!0,children:[r.jsx("option",{value:"CYCLOTRON",children:"Cyclotron"}),r.jsx("option",{value:"GENERATOR",children:"Generator"}),r.jsx("option",{value:"KIT",children:"Kit"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Radionuclide"}),r.jsx("input",{name:"radionuclide",className:"form-input",defaultValue:n?.radionuclide,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Half-Life (minutes)"}),r.jsx("input",{name:"halfLifeMinutes",type:"number",step:"0.1",className:"form-input",defaultValue:n?.halfLifeMinutes,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Shelf Life (minutes)"}),r.jsx("input",{name:"shelfLifeMinutes",type:"number",className:"form-input",defaultValue:n?.shelfLifeMinutes,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Standard Dose"}),r.jsx("input",{name:"standardDose",type:"number",step:"0.1",className:"form-input",defaultValue:n?.standardDose})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Dose Unit"}),r.jsxs("select",{name:"doseUnit",className:"form-select",defaultValue:n?.doseUnit||"mCi",children:[r.jsx("option",{value:"mCi",children:"mCi"}),r.jsx("option",{value:"GBq",children:"GBq"}),r.jsx("option",{value:"MBq",children:"MBq"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Overage %"}),r.jsx("input",{name:"overagePercent",type:"number",step:"0.1",className:"form-input",defaultValue:n?.overagePercent||10,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Synthesis Time (min)"}),r.jsx("input",{name:"synthesisTimeMinutes",type:"number",className:"form-input",defaultValue:n?.synthesisTimeMinutes||45,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"QC Time (min)"}),r.jsx("input",{name:"qcTimeMinutes",type:"number",className:"form-input",defaultValue:n?.qcTimeMinutes||30,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Packaging Time (min)"}),r.jsx("input",{name:"packagingTimeMinutes",type:"number",className:"form-input",defaultValue:n?.packagingTimeMinutes||15,required:!0})]})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t(!1),i(null)},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S.isPending,children:S.isPending?"Saving...":"Save Product"})]})]})]})})]})}const Pb={DRAFT:{label:"Draft",description:"Order created but not yet submitted for processing.",nextAction:"Submit order to begin processing"},SUBMITTED:{label:"Submitted",description:"Order submitted and awaiting validation by sales team.",nextAction:"Sales team validates order details"},VALIDATED:{label:"Validated",description:"Order validated and approved. Ready for production planning.",nextAction:"Production planner schedules batch"},SCHEDULED:{label:"Scheduled",description:"Order assigned to a production batch and scheduled for manufacturing.",nextAction:"Production team starts manufacturing"},IN_PRODUCTION:{label:"In Production",description:"Radiopharmaceutical is being manufactured.",nextAction:"Send to QC for quality testing"},QC_PENDING:{label:"QC Pending",description:"Quality control testing in progress.",nextAction:"QC analyst completes testing"},RELEASED:{label:"Released",description:"Batch passed QC and released by Qualified Person (QP). Ready for dispatch.",nextAction:"Logistics dispatches shipment"},DISPATCHED:{label:"Dispatched",description:"Order shipped and on the way to customer.",nextAction:"Confirm delivery to customer"},DELIVERED:{label:"Delivered",description:"Order successfully delivered to customer. Complete!",nextAction:"Order complete"},CANCELLED:{label:"Cancelled",description:"Order was cancelled and will not be fulfilled.",nextAction:"-"},REJECTED:{label:"Rejected",description:"Order was rejected during validation.",nextAction:"-"},FAILED_QC:{label:"Failed QC",description:"Batch did not pass quality control testing.",nextAction:"Rework or cancel order"},REWORK:{label:"Rework",description:"Order requires rework due to QC failure or other issues.",nextAction:"Create new batch"}};function SK(){const e=Ei(),[t,n]=P.useState({}),[i,a]=P.useState(!1),s=Tr(),{data:l,isLoading:d}=Ye({queryKey:["orders",t.status,t.date],queryFn:async()=>{const b={};t.status&&(b.status=t.status),t.date&&(b.fromDate=t.date,b.toDate=t.date);const{data:w}=await xe.get("/orders",{params:b});return w}}),h=ft({mutationFn:async({id:b,status:w})=>xe.patch(`/orders/${b}/status`,{status:w}),onSuccess:(b,w)=>{s.invalidateQueries({queryKey:["orders"]});const S=Pb[w.status];e.success("Status Updated",`Order moved to ${S?.label||w.status}`)},onError:b=>{const w=Er(b);e.error("Update Failed",w?.userMessage||"Failed to update order status")}}),f=b=>({DRAFT:"default",SUBMITTED:"info",VALIDATED:"info",SCHEDULED:"info",IN_PRODUCTION:"warning",QC_PENDING:"warning",RELEASED:"success",DISPATCHED:"info",DELIVERED:"success",CANCELLED:"danger",REJECTED:"danger",FAILED_QC:"danger"})[b]||"default",p=b=>({DRAFT:"SUBMITTED",SUBMITTED:"VALIDATED",VALIDATED:"SCHEDULED"})[b]||null,g=[{key:"search",label:"Search",type:"search",placeholder:"Search orders..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"DRAFT",label:"Draft"},{value:"SUBMITTED",label:"Submitted"},{value:"VALIDATED",label:"Validated"},{value:"SCHEDULED",label:"Scheduled"},{value:"IN_PRODUCTION",label:"In Production"},{value:"QC_PENDING",label:"QC Pending"},{value:"RELEASED",label:"Released"},{value:"DISPATCHED",label:"Dispatched"},{value:"DELIVERED",label:"Delivered"}]}],j=l?.filter(b=>{if(t.search){const w=t.search.toLowerCase();if(!b.orderNumber.toLowerCase().includes(w)&&!b.customer?.name?.toLowerCase().includes(w)&&!b.product?.name?.toLowerCase().includes(w))return!1}return!0}),v={total:l?.length||0,pending:l?.filter(b=>["DRAFT","SUBMITTED","VALIDATED"].includes(b.status)).length||0,inProgress:l?.filter(b=>["SCHEDULED","IN_PRODUCTION","QC_PENDING"].includes(b.status)).length||0,ready:l?.filter(b=>["RELEASED","DISPATCHED"].includes(b.status)).length||0,delivered:l?.filter(b=>b.status==="DELIVERED").length||0};return d?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Orders"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage radiopharmaceutical orders from creation to delivery"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{className:"btn btn-secondary",onClick:()=>a(!i),children:[r.jsx(uE,{size:16}),"Status Guide",i?r.jsx(gm,{size:14}):r.jsx(tu,{size:14})]}),r.jsxs(yr,{to:"/orders/new",className:"btn btn-primary",children:[r.jsx(Lr,{size:16}),"New Order"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Orders",value:v.total,icon:r.jsx(ru,{size:20}),color:"primary",onClick:()=>n({}),selected:!t.status}),r.jsx(lt,{title:"Pending",value:v.pending,icon:r.jsx(Dt,{size:20}),color:"warning",onClick:()=>n(b=>({...b,status:"SUBMITTED"})),selected:t.status==="SUBMITTED"}),r.jsx(lt,{title:"In Progress",value:v.inProgress,icon:r.jsx(Sr,{size:20}),color:"info",onClick:()=>n(b=>({...b,status:"IN_PRODUCTION"})),selected:t.status==="IN_PRODUCTION"}),r.jsx(lt,{title:"Ready/Dispatched",value:v.ready,icon:r.jsx(fn,{size:20}),color:"success",onClick:()=>n(b=>({...b,status:"RELEASED"})),selected:t.status==="RELEASED"}),r.jsx(lt,{title:"Delivered",value:v.delivered,icon:r.jsx(yt,{size:20}),color:"default",onClick:()=>n(b=>({...b,status:"DELIVERED"})),selected:t.status==="DELIVERED"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[r.jsx(of,{widgets:g,values:t,onChange:(b,w)=>n(S=>({...S,[b]:w})),onReset:()=>n({})}),r.jsxs("div",{className:"form-group",style:{margin:0},children:[r.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Delivery Date"}),r.jsx("input",{type:"date",className:"form-input",style:{width:"160px"},value:t.date||"",onChange:b=>n(w=>({...w,date:b.target.value}))})]})]})}),i&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem"},children:[r.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(uE,{size:18,style:{color:"var(--primary)"}}),"Order Workflow Guide"]}),r.jsx("div",{style:{marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Orders flow through these stages from creation to delivery:"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:["DRAFT","SUBMITTED","VALIDATED","SCHEDULED","IN_PRODUCTION","QC_PENDING","RELEASED","DISPATCHED","DELIVERED"].map((b,w,S)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Wn,{status:b,size:"sm"}),w<S.length-1&&r.jsx(bc,{size:14,style:{color:"var(--text-muted)"}})]},b))}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem"},children:Object.entries(Pb).slice(0,9).map(([b,w])=>r.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"var(--radius-sm)",borderLeft:`3px solid var(--${f(b)==="default"?"secondary":f(b)})`},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:r.jsx(Wn,{status:b,size:"sm"})}),r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:w.description}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[r.jsx("strong",{children:"Next:"})," ",w.nextAction]})]},b))})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Order List (",j?.length||0,")"]})}),j?.length>0?r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order #"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Delivery"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"150px",textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:j.map(b=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:b.orderNumber}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:b.customer?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:b.customer?.city})]}),r.jsxs("td",{children:[r.jsx("div",{children:b.product?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:b.product?.radionuclide})]}),r.jsxs("td",{children:[r.jsx("div",{children:Ke(new Date(b.deliveryDate),"MMM dd, yyyy")}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[Ke(new Date(b.deliveryTimeStart),"HH:mm")," - ",Ke(new Date(b.deliveryTimeEnd),"HH:mm")]})]}),r.jsxs("td",{children:[r.jsxs("div",{style:{fontWeight:500},children:[b.requestedActivity," ",b.activityUnit]}),b.calculatedProductionActivity&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Prod: ",b.calculatedProductionActivity.toFixed(1)," ",b.activityUnit]})]}),r.jsx("td",{children:r.jsx(Wn,{status:b.status,size:"sm"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx(yr,{to:`/orders/${b.id}/journey`,className:"btn btn-sm btn-outline",title:"View Journey",children:r.jsx(PO,{size:14})}),r.jsx(yr,{to:`/orders/${b.id}`,className:"btn btn-sm btn-outline",title:"Edit Order",children:r.jsx(Pa,{size:14})}),p(b.status)&&r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>h.mutate({id:b.id,status:p(b.status)}),disabled:h.isPending,title:`Move to ${Pb[p(b.status)]?.label}`,children:r.jsx(bc,{size:14})})]})})]},b.id))})]}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No orders found",message:"Create your first order to get started",icon:"package"})})]})]})}function EE({entityType:e,entityId:t,compact:n=!1}){const{data:i,isLoading:a}=Ye({queryKey:["approvalHistory",e,t],queryFn:async()=>{const{data:f}=await xe.get(`/approvals/history/${e}/${t}`);return f},enabled:!!t});if(a)return r.jsx("span",{style:{color:"#9ca3af",fontSize:"0.875rem"},children:"Loading..."});if(!i||i.length===0)return n?null:r.jsx("div",{style:{color:"#9ca3af",fontSize:"0.875rem",fontStyle:"italic"},children:"No approval workflow active"});const s=i[0],l=f=>{switch(f){case"PENDING":return r.jsx(Dt,{size:16,color:"#f59e0b"});case"APPROVED":return r.jsx(yt,{size:16,color:"#22c55e"});case"REJECTED":return r.jsx(pi,{size:16,color:"#ef4444"});default:return r.jsx(In,{size:16,color:"#6b7280"})}},d=f=>{switch(f){case"PENDING":return"Pending Approval";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";default:return f}};if(n)return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l(s.status),r.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:d(s.status)})]});const h=s.workflow.steps.find(f=>f.stepOrder===s.currentStep);return r.jsxs("div",{style:{padding:"0.75rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l(s.status),r.jsx("span",{style:{fontWeight:500},children:s.workflow.name}),r.jsx("span",{className:"badge",style:{marginLeft:"auto",background:s.status==="PENDING"?"#fef3c7":s.status==="APPROVED"?"#dcfce7":"#fee2e2",color:s.status==="PENDING"?"#92400e":s.status==="APPROVED"?"#166534":"#991b1b"},children:d(s.status)})]}),s.status==="PENDING"&&h&&r.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem"},children:["Awaiting: ",r.jsx("strong",{children:h.stepName})]}),r.jsx("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"0.5rem"},children:s.workflow.steps.map(f=>r.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",background:f.stepOrder<s.currentStep?"#22c55e":f.stepOrder===s.currentStep?"#f59e0b":"#e5e7eb"},title:f.stepName},f.stepOrder))}),s.actions.length>0&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["Last action: ",s.actions[s.actions.length-1].step.stepName," ","by ",s.actions[s.actions.length-1].actionBy.firstName," ","on ",Ke(new Date(s.actions[s.actions.length-1].createdAt),"MMM d, HH:mm")]})]})}function Wy(e,t,n=""){try{if(!e)return n;const i=new Date(e);return isNaN(i.getTime())?n:Ke(i,t)}catch{return n}}function TE(){const{id:e}=nf(),t=Cn();Ei();const[n,i]=P.useState({customerId:"",productId:"",deliveryDate:Ke(new Date,"yyyy-MM-dd"),deliveryTimeStart:"",deliveryTimeEnd:"",requestedActivity:"",activityUnit:"mCi",numberOfDoses:"",injectionTime:"",patientCount:"",specialNotes:""}),[a,s]=P.useState(""),[l,d]=P.useState(null),{data:h}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:E}=await xe.get("/customers");return E}}),{data:f}=Ye({queryKey:["products"],queryFn:async()=>{const{data:E}=await xe.get("/products");return E}}),{data:p,isLoading:g,error:j}=Ye({queryKey:["order",e],queryFn:async()=>{const{data:E}=await xe.get(`/orders/${e}`);return E},enabled:!!e});P.useEffect(()=>{if(p)try{i({customerId:p.customerId||"",productId:p.productId||"",deliveryDate:Wy(p.deliveryDate,"yyyy-MM-dd",Ke(new Date,"yyyy-MM-dd")),deliveryTimeStart:Wy(p.deliveryTimeStart,"yyyy-MM-dd'T'HH:mm"),deliveryTimeEnd:Wy(p.deliveryTimeEnd,"yyyy-MM-dd'T'HH:mm"),requestedActivity:p.requestedActivity?.toString()||"",activityUnit:p.activityUnit||"mCi",numberOfDoses:p.numberOfDoses?.toString()||"",injectionTime:Wy(p.injectionTime,"yyyy-MM-dd'T'HH:mm"),patientCount:p.patientCount?.toString()||"",specialNotes:p.specialNotes||""})}catch(E){console.error("Error loading order data:",E),s("Failed to load order data. Some fields may be missing.")}},[p]);const v=ft({mutationFn:async E=>e?xe.put(`/orders/${e}`,E):xe.post("/orders",E),onSuccess:()=>{t("/orders")},onError:E=>{s(E.response?.data?.error||"Failed to save order")}}),b=E=>{i({...n,[E.target.name]:E.target.value})},w=(E,D="DRAFT")=>{E.preventDefault(),s(""),f?.find(W=>W.id===n.productId),v.mutate({customerId:n.customerId,productId:n.productId,deliveryDate:n.deliveryDate,deliveryTimeStart:n.deliveryTimeStart,deliveryTimeEnd:n.deliveryTimeEnd,requestedActivity:parseFloat(n.requestedActivity),activityUnit:n.activityUnit,numberOfDoses:n.numberOfDoses?parseInt(n.numberOfDoses):null,injectionTime:n.injectionTime||null,patientCount:n.patientCount?parseInt(n.patientCount):null,specialNotes:n.specialNotes||null,status:D})},S=h?.find(E=>E.id===n.customerId),_=f?.find(E=>E.id===n.productId);if(e&&g)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});if(j){const E=Er(j);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t("/orders"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[r.jsx(pd,{size:18}),"Back to Orders"]}),r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(In,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h3",{style:{marginBottom:"0.5rem"},children:"Failed to Load Order"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:E?.userMessage||"Unable to load order details. Please try again."}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:[r.jsx(Gv,{size:18})," Try Again"]})]})]})}return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t("/orders"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[r.jsx(pd,{size:18}),"Back to Orders"]}),r.jsxs("div",{className:"card",style:{maxWidth:"50rem"},children:[r.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsx("h2",{style:{fontWeight:600,margin:0},children:e?"Edit Order":"New Order"}),e&&p&&r.jsx("div",{style:{marginLeft:"1rem"},children:r.jsx(EE,{entityType:"ORDER",entityId:e,compact:!0})})]})}),e&&p&&r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx(EE,{entityType:"ORDER",entityId:e})}),a&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"1rem 1.5rem",background:"#fee2e2",color:"#991b1b"},children:[r.jsx(In,{size:18}),a]}),r.jsxs("form",{onSubmit:E=>w(E),children:[r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{className:"grid grid-2",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer *"}),r.jsxs("select",{name:"customerId",className:"form-select",value:n.customerId,onChange:b,required:!0,children:[r.jsx("option",{value:"",children:"Select Customer"}),h?.map(E=>r.jsxs("option",{value:E.id,children:[E.name," (",E.code,")"]},E.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Product *"}),r.jsxs("select",{name:"productId",className:"form-select",value:n.productId,onChange:b,required:!0,children:[r.jsx("option",{value:"",children:"Select Product"}),f?.map(E=>r.jsxs("option",{value:E.id,children:[E.name," (",E.radionuclide,")"]},E.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Date *"}),r.jsx("input",{type:"date",name:"deliveryDate",className:"form-input",value:n.deliveryDate,onChange:b,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Window Start *"}),r.jsx("input",{type:"datetime-local",name:"deliveryTimeStart",className:"form-input",value:n.deliveryTimeStart,onChange:b,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Window End *"}),r.jsx("input",{type:"datetime-local",name:"deliveryTimeEnd",className:"form-input",value:n.deliveryTimeEnd,onChange:b,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Injection Time (if different)"}),r.jsx("input",{type:"datetime-local",name:"injectionTime",className:"form-input",value:n.injectionTime,onChange:b})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Requested Activity *"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("input",{type:"number",name:"requestedActivity",className:"form-input",value:n.requestedActivity,onChange:b,step:"0.1",required:!0}),r.jsxs("select",{name:"activityUnit",className:"form-select",style:{width:"6rem"},value:n.activityUnit,onChange:b,children:[r.jsx("option",{value:"mCi",children:"mCi"}),r.jsx("option",{value:"GBq",children:"GBq"}),r.jsx("option",{value:"MBq",children:"MBq"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Number of Doses"}),r.jsx("input",{type:"number",name:"numberOfDoses",className:"form-input",value:n.numberOfDoses,onChange:b})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Patient Count"}),r.jsx("input",{type:"number",name:"patientCount",className:"form-input",value:n.patientCount,onChange:b})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsx("label",{className:"form-label",children:"Special Notes"}),r.jsx("textarea",{name:"specialNotes",className:"form-input",rows:3,value:n.specialNotes,onChange:b})]})]}),_&&S&&r.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(vU,{size:18}),"Product & Delivery Info"]}),r.jsxs("div",{className:"grid grid-3",style:{fontSize:"0.875rem"},children:[r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Half-life: "}),_.halfLifeMinutes," min"]}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Shelf Life: "}),_.shelfLifeMinutes," min"]}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Travel Time: "}),S.travelTimeMinutes," min"]}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Synthesis: "}),_.synthesisTimeMinutes," min"]}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"QC Time: "}),_.qcTimeMinutes," min"]}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Overage: "}),_.overagePercent,"%"]})]})]})]}),r.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>t("/orders"),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-secondary",disabled:v.isPending,children:"Save as Draft"}),r.jsx("button",{type:"button",className:"btn btn-primary",onClick:E=>w(E,"SUBMITTED"),disabled:v.isPending,children:"Submit Order"})]})]})]})]})}function NK({window:e}){const t=n=>n==="FULL"?"var(--danger)":n==="NEAR_FULL"?"var(--warning)":"var(--success)";return r.jsxs("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:"var(--bg-primary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"0.8rem",fontWeight:500},children:e.name}),r.jsxs("span",{style:{fontSize:"0.75rem",color:t(e.status),fontWeight:600},children:[e.utilizationPercent,"% used"]})]}),r.jsx("div",{style:{height:"8px",background:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:r.jsxs("div",{style:{display:"flex",height:"100%",transition:"width 0.3s ease"},children:[r.jsx("div",{style:{width:`${Math.min(100,e.usedMinutes/e.capacityMinutes*100)}%`,background:"#3b82f6"},title:`Used: ${e.usedMinutes} min`}),r.jsx("div",{style:{width:`${Math.min(100-e.usedMinutes/e.capacityMinutes*100,e.committedMinutes/e.capacityMinutes*100)}%`,background:"#22c55e"},title:`Committed: ${e.committedMinutes} min`}),r.jsx("div",{style:{width:`${Math.min(100-(e.usedMinutes+e.committedMinutes)/e.capacityMinutes*100,e.reservedMinutes/e.capacityMinutes*100)}%`,background:"#f59e0b"},title:`Reserved: ${e.reservedMinutes} min`})]})}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.35rem",fontSize:"0.7rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:[Ke(new Date(e.startTime),"HH:mm")," - ",Ke(new Date(e.endTime),"HH:mm")]}),r.jsxs("span",{children:[e.availableMinutes," min available"]})]})]})}function _K(){const[e,t]=P.useState(Ke(new Date,"yyyy-MM-dd")),n=Tr(),i=Cn(),{data:a}=Ye({queryKey:["planner-capacity",e],queryFn:async()=>{const{data:b}=await xe.get("/planner/capacity",{params:{date:e,days:1}});return b}}),{data:s,isLoading:l}=Ye({queryKey:["planner-orders",e],queryFn:async()=>{const{data:b}=await xe.get("/planner/orders",{params:{date:e}});return b}}),{data:d,isLoading:h}=Ye({queryKey:["planner-batches",e],queryFn:async()=>{const{data:b}=await xe.get("/planner/batches",{params:{fromDate:e,toDate:e}});return b}}),{data:f}=Ye({queryKey:["suggested-batches",e],queryFn:async()=>{const{data:b}=await xe.post("/planner/group-orders",{date:e});return b},enabled:!!s?.length}),{data:p}=Ye({queryKey:["equipment"],queryFn:async()=>{const{data:b}=await xe.get("/planner/equipment");return b}}),g=ft({mutationFn:async b=>xe.post("/batches",b),onSuccess:()=>{n.invalidateQueries({queryKey:["planner-orders"]}),n.invalidateQueries({queryKey:["planner-batches"]}),n.invalidateQueries({queryKey:["suggested-batches"]})}}),j=b=>{const w=p?.find(_=>_.type==="Synthesis"),S=p?.find(_=>_.type==="HotCell");g.mutate({productId:b.productId,plannedStartTime:b.suggestedStartTime,plannedEndTime:b.suggestedEndTime,targetActivity:b.totalActivity,calibrationTime:b.suggestedStartTime,synthesisModuleId:w?.id,hotCellId:S?.id,orderIds:b.orders.map(_=>_.id)})},v=l||h;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"Production Planner"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>t(Ke(Fl(new Date(e),-1),"yyyy-MM-dd")),children:"Previous"}),r.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:e,onChange:b=>t(b.target.value)}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>t(Ke(Fl(new Date(e),1),"yyyy-MM-dd")),children:"Next"})]})]}),a?.summary&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Wl,{size:20}),"Dispensing Capacity Overview"]})}),r.jsxs("div",{style:{padding:"1rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--primary)"},children:a.summary.totalCapacityMinutes}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Total Capacity (min)"})]}),r.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"#22c55e"},children:a.summary.totalCommittedMinutes}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Committed (min)"})]}),r.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"#f59e0b"},children:a.summary.totalReservedMinutes}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Reserved (min)"})]}),r.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--success)"},children:a.summary.totalAvailableMinutes}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Available (min)"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"center",fontSize:"0.75rem"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("span",{style:{width:"12px",height:"12px",background:"#3b82f6",borderRadius:"2px"}})," Used"]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("span",{style:{width:"12px",height:"12px",background:"#22c55e",borderRadius:"2px"}})," Committed"]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("span",{style:{width:"12px",height:"12px",background:"#f59e0b",borderRadius:"2px"}})," Reserved (Tentative)"]})]}),a?.windows?.length>0&&r.jsx("div",{style:{marginTop:"1rem"},children:a.windows.map(b=>r.jsx(NK,{window:b},b.id))})]})]}),v?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{className:"grid grid-2",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Wi,{size:20}),"Orders to Schedule (",s?.length||0,")"]})}),r.jsx("div",{style:{padding:"1rem"},children:s?.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(b=>r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600},children:b.orderNumber}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("span",{className:"badge badge-info",children:b.product?.productType}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(`/orders/${b.id}/journey`),title:"View Order Details",children:r.jsx(Pa,{size:14})})]})]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsx("div",{children:b.customer?.name}),r.jsx("div",{children:b.product?.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[r.jsx(Dt,{size:14}),"Delivery: ",Ke(new Date(b.deliveryTimeStart),"HH:mm")]}),r.jsxs("div",{children:["Activity: ",b.requestedActivity," ",b.activityUnit]})]})]},b.id))}):r.jsx("div",{className:"empty-state",children:"No orders pending scheduling for this date"})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Sr,{size:20}),"Suggested Batches"]})}),r.jsx("div",{style:{padding:"1rem"},children:f?.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:f.map((b,w)=>r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600},children:b.product?.name}),r.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>j(b),disabled:g.isPending,children:[r.jsx(fd,{size:14}),"Create Batch"]})]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("div",{children:["Total Activity: ",b.totalActivity.toFixed(1)," mCi"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[r.jsx(Dt,{size:14}),"Start: ",Ke(new Date(b.suggestedStartTime),"HH:mm")]})]}),b.orders?.length>0&&r.jsxs("div",{style:{marginTop:"0.75rem",borderTop:"1px solid var(--border)",paddingTop:"0.75rem"},children:[r.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Ih,{size:12}),"Orders in this batch (",b.orders.length,")"]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:b.orders.map(S=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",background:"var(--bg-primary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.8rem"},children:[r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:500},children:S.orderNumber}),r.jsx("span",{style:{color:"var(--text-secondary)",marginLeft:"0.5rem"},children:S.customer?.name||S.customer?.nameEn}),r.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:"0.5rem"},children:["(",S.requestedActivity," mCi)"]})]}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(`/orders/${S.id}/journey`),title:"View Order History",style:{padding:"0.25rem 0.5rem",fontSize:"0.7rem"},children:r.jsx(Pa,{size:12})})]},S.id))})]})]},w))}):r.jsx("div",{className:"empty-state",children:"No batch suggestions available"})})]})]}),r.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600},children:["Scheduled Batches (",d?.length||0,")"]})}),r.jsx("div",{style:{padding:"0"},children:d?.length>0?r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Batch #"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Scheduled Time"}),r.jsx("th",{children:"Target Activity"}),r.jsx("th",{children:"Orders"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsx("tbody",{children:d.map(b=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:b.batchNumber}),r.jsx("td",{children:b.product?.name}),r.jsxs("td",{children:[Ke(new Date(b.plannedStartTime),"HH:mm")," - ",Ke(new Date(b.plannedEndTime),"HH:mm")]}),r.jsxs("td",{children:[b.targetActivity," ",b.activityUnit]}),r.jsx("td",{children:b.orders?.length||0}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${CK(b.status)}`,children:b.status.replace("_"," ")})}),r.jsx("td",{children:r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(`/batches/${b.id}/journey`),title:"View Batch Journey",children:[r.jsx(Pa,{size:14}),"View"]})})]},b.id))})]}):r.jsx("div",{className:"empty-state",children:"No batches scheduled for this date"})})]})]})}function CK(e){return{PLANNED:"default",IN_PROGRESS:"warning",COMPLETED:"success",QC_PENDING:"warning",QC_IN_PROGRESS:"warning",QC_PASSED:"success",QC_FAILED:"danger",RELEASED:"success",CANCELLED:"danger"}[e]||"default"}const PE=[{value:"PLANNED",label:"Planned",group:"main"},{value:"SCHEDULED",label:"Scheduled",group:"main"},{value:"IN_PRODUCTION",label:"In Production",group:"main"},{value:"PRODUCTION_COMPLETE",label:"Production Complete",group:"main"},{value:"QC_PENDING",label:"QC Pending",group:"main"},{value:"QC_IN_PROGRESS",label:"QC In Progress",group:"main"},{value:"QC_PASSED",label:"QC Passed",group:"main"},{value:"QP_REVIEW",label:"QP Review",group:"main"},{value:"RELEASED",label:"Released",group:"main"},{value:"DISPENSING_IN_PROGRESS",label:"Dispensing",group:"main"},{value:"DISPENSED",label:"Dispensed",group:"main"},{value:"PACKED",label:"Packed",group:"main"},{value:"DISPATCHED",label:"Dispatched",group:"main"},{value:"CLOSED",label:"Closed",group:"main"},{value:"ON_HOLD",label:"On Hold",group:"exception"},{value:"REJECTED",label:"Rejected",group:"exception"},{value:"FAILED_QC",label:"QC Failed",group:"exception"},{value:"CANCELLED",label:"Cancelled",group:"exception"},{value:"DEVIATION_OPEN",label:"Deviation",group:"exception"}];function AK(){const[e,t]=P.useState(""),[n,i]=P.useState(""),[a,s]=P.useState(""),[l,d]=P.useState(""),[h,f]=P.useState(""),[p,g]=P.useState(!1),[j,v]=P.useState(!1),b=Tr(),w=Ei(),{data:S,isLoading:_}=Ye({queryKey:["batches",e,n,a,l],queryFn:async()=>{const R={};e&&(R.status=e),n&&(R.productId=n),a&&(R.fromDate=a),l&&(R.toDate=l);const{data:Y}=await xe.get("/batches",{params:R});return Y}}),{data:E}=Ye({queryKey:["batch-metrics"],queryFn:async()=>{const{data:R}=await xe.get("/batches/metrics/summary");return R}}),{data:D}=Ye({queryKey:["products"],queryFn:async()=>{const{data:R}=await xe.get("/products");return R}}),W=ft({mutationFn:async({id:R,status:Y})=>xe.post(`/batches/${R}/transition`,{status:Y}),onSuccess:(R,Y)=>{b.invalidateQueries({queryKey:["batches"]}),b.invalidateQueries({queryKey:["batch-metrics"]}),w.success("Status Updated",`Batch moved to ${Y.status.replace(/_/g," ")}`)},onError:R=>{const Y=Er(R);w.error("Update Failed",Y?.userMessage||"Failed to update batch status")}}),K=R=>({PLANNED:{status:"IN_PRODUCTION",label:"Start"},SCHEDULED:{status:"IN_PRODUCTION",label:"Start"},IN_PRODUCTION:{status:"PRODUCTION_COMPLETE",label:"Complete"},PRODUCTION_COMPLETE:{status:"QC_PENDING",label:"To QC"},QC_PENDING:{status:"QC_IN_PROGRESS",label:"Start QC"},QC_IN_PROGRESS:{status:"QC_PASSED",label:"Pass QC"},QC_PASSED:{status:"QP_REVIEW",label:"To QP"},RELEASED:{status:"DISPENSING_IN_PROGRESS",label:"Dispense"},DISPENSING_IN_PROGRESS:{status:"DISPENSED",label:"Done"},DISPENSED:{status:"PACKED",label:"Pack"},PACKED:{status:"DISPATCHED",label:"Dispatch"},DISPATCHED:{status:"CLOSED",label:"Close"}})[R]||null,B=R=>["ON_HOLD","REJECTED","FAILED_QC","CANCELLED","DEVIATION_OPEN"].includes(R),F=S?.filter(R=>{if(p&&!B(R.status))return!1;if(h){const Y=h.toLowerCase();if(!R.batchNumber.toLowerCase().includes(Y)&&!R.product?.name.toLowerCase().includes(Y))return!1}return!0}),H=()=>{t(""),i(""),s(""),d(""),f(""),g(!1)},I=e||n||a||l||h||p;return _?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Batch Management"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Track production batches through the manufacturing lifecycle"})]}),r.jsxs("button",{className:`btn ${j?"btn-primary":"btn-secondary"}`,onClick:()=>v(!j),children:[r.jsx(sf,{size:16})," Filters ",I&&r.jsx("span",{className:"badge badge-danger",style:{marginLeft:"0.25rem"},children:"!"})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Today's Batches",value:E?.batchesToday||0,icon:r.jsx(Wi,{size:20}),color:"primary",onClick:()=>{H()},selected:!e&&!p}),r.jsx(lt,{title:"Awaiting QC",value:E?.awaitingQC||0,icon:r.jsx(wc,{size:20}),color:"warning",onClick:()=>{t("QC_PENDING"),g(!1)},selected:e==="QC_PENDING"}),r.jsx(lt,{title:"Awaiting Release",value:E?.awaitingRelease||0,icon:r.jsx(Us,{size:20}),color:"info",onClick:()=>{t("QP_REVIEW"),g(!1)},selected:e==="QP_REVIEW"}),r.jsx(lt,{title:"Exceptions",value:E?.exceptions||0,icon:r.jsx(vr,{size:20}),color:"danger",onClick:()=>{g(!p),t("")},selected:p})]}),j&&r.jsxs("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h4",{style:{margin:0,fontSize:"0.875rem",fontWeight:600},children:"Filters"}),I&&r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:H,children:[r.jsx(hn,{size:14})," Clear All"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Search"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ho,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",className:"form-input",style:{paddingLeft:"2.25rem"},placeholder:"Batch # or product...",value:h,onChange:R=>f(R.target.value)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Status"}),r.jsxs("select",{className:"form-select",value:e,onChange:R=>t(R.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("optgroup",{label:"Main Stages",children:PE.filter(R=>R.group==="main").map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))}),r.jsx("optgroup",{label:"Exceptions",children:PE.filter(R=>R.group==="exception").map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Product"}),r.jsxs("select",{className:"form-select",value:n,onChange:R=>i(R.target.value),children:[r.jsx("option",{value:"",children:"All Products"}),D?.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"From Date"}),r.jsx("input",{type:"date",className:"form-input",value:a,onChange:R=>s(R.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"To Date"}),r.jsx("input",{type:"date",className:"form-input",value:l,onChange:R=>d(R.target.value)})]}),r.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:p,onChange:R=>g(R.target.checked)}),"Exceptions Only"]})})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Batch List (",F?.length||0,")"]})}),F?.length>0?r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Batch #"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Planned Start"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Orders"}),r.jsx("th",{children:"Doses"}),r.jsx("th",{children:"Updated"}),r.jsx("th",{style:{width:"160px",textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:F.map(R=>{const Y=K(R.status),G=R.doseUnits?.length||0;return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("span",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:R.batchNumber}),B(R.status)&&r.jsx(vr,{size:14,style:{color:"var(--danger)",marginLeft:"0.25rem"}})]}),r.jsx("td",{style:{fontWeight:500},children:R.product?.name}),r.jsx("td",{children:Ke(new Date(R.plannedStartTime),"MMM dd HH:mm")}),r.jsx("td",{children:r.jsx(Wn,{status:R.status,size:"sm"})}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-default",children:R.orders?.length||0})}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-default",children:G})}),r.jsx("td",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:Ke(new Date(R.updatedAt),"MMM dd HH:mm")}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx(yr,{to:`/batches/${R.id}/journey`,className:"btn btn-sm btn-outline",title:"View Journey",children:r.jsx(PO,{size:14})}),Y&&!B(R.status)&&r.jsxs("button",{className:"btn btn-primary btn-sm",style:{minWidth:"80px"},onClick:()=>W.mutate({id:R.id,status:Y.status}),disabled:W.isPending,title:Y.label,children:[r.jsx(fd,{size:14})," ",Y.label]})]})})]},R.id)})})]}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No batches found",message:"Batches will appear here when orders are scheduled for production",icon:"package"})})]})]})}const kE=[{key:"pending",label:"Pending",icon:Dt},{key:"testing",label:"Testing",icon:wc},{key:"review",label:"Review",icon:ii},{key:"complete",label:"Complete",icon:yt}];function DE(e){if(!e||e.length===0)return{completed:0,total:0,passed:0,failed:0};const t=e.filter(a=>a.passed!==null).length,n=e.filter(a=>a.passed===!0).length,i=e.filter(a=>a.passed===!1).length;return{completed:t,total:e.length,passed:n,failed:i}}function EK(){const[e,t]=P.useState(null),[n,i]=P.useState("workbench"),[a,s]=P.useState({}),l=Tr(),d=Ei(),{data:h}=Ye({queryKey:["qc-stats"],queryFn:async()=>{const{data:H}=await xe.get("/qc/stats");return H}}),{data:f,isLoading:p}=Ye({queryKey:["qc-batches"],queryFn:async()=>{const{data:H}=await xe.get("/qc/batches");return H}}),{data:g,isLoading:j}=Ye({queryKey:["qc-history"],queryFn:async()=>{const{data:H}=await xe.get("/qc/history?days=14");return H},enabled:n==="history"}),{data:v,isLoading:b}=Ye({queryKey:["batch-qc",e?.id],queryFn:async()=>{const{data:H}=await xe.get(`/qc/batches/${e.id}`);return H},enabled:!!e}),w=ft({mutationFn:async H=>xe.post(`/qc/batches/${H}/initialize`),onSuccess:()=>{l.invalidateQueries({queryKey:["qc-batches"]}),l.invalidateQueries({queryKey:["batch-qc"]}),l.invalidateQueries({queryKey:["qc-stats"]}),d.success("QC testing initialized")},onError:()=>d.error("Failed to initialize QC")}),S=ft({mutationFn:async({resultId:H,data:I})=>xe.put(`/qc/results/${H}`,I),onSuccess:()=>{l.invalidateQueries({queryKey:["batch-qc"]})},onError:()=>d.error("Failed to update result")}),_=ft({mutationFn:async H=>xe.post(`/qc/batches/${H}/complete`),onSuccess:H=>{l.invalidateQueries({queryKey:["qc-batches"]}),l.invalidateQueries({queryKey:["batch-qc"]}),l.invalidateQueries({queryKey:["qc-stats"]}),l.invalidateQueries({queryKey:["qc-history"]}),H.data?.passed?d.success("QC completed - All tests passed!"):d.error("QC completed - Some tests failed"),t(null)},onError:H=>{const I=H.response?.data?.error||"Failed to complete QC";d.error(I)}}),E=(H,I,R)=>{S.mutate({resultId:H.id,data:{[I]:R}})},D=[{key:"search",label:"Search",type:"search",placeholder:"Search batches..."}],W=(n==="workbench"?f:g)?.filter(H=>{if(a.search){const I=a.search.toLowerCase();if(!H.batchNumber.toLowerCase().includes(I)&&!H.product?.name.toLowerCase().includes(I))return!1}return!0}),K=v?DE(v.qcResults):null,B=v?.qcResults?.length?v?.status==="QC_PASSED"||v?.status==="FAILED_QC"?"complete":K?.completed===K?.total?"review":"testing":"pending",F=H=>{i(H),t(null)};return p?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Quality Control"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Execute QC tests and manage batch testing workflows"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{className:`btn ${n==="workbench"?"btn-primary":"btn-secondary"}`,onClick:()=>F("workbench"),children:[r.jsx(wc,{size:16})," Workbench"]}),r.jsxs("button",{className:`btn ${n==="history"?"btn-primary":"btn-secondary"}`,onClick:()=>F("history"),children:[r.jsx(AO,{size:16})," History"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Pending QC",value:h?.pending||0,icon:r.jsx(Dt,{size:20}),color:"warning",onClick:()=>i("workbench")}),r.jsx(lt,{title:"In Progress",value:h?.inProgress||0,icon:r.jsx(wc,{size:20}),color:"info",onClick:()=>i("workbench")}),r.jsx(lt,{title:"Passed Today",value:h?.passedToday||0,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>i("history")}),r.jsx(lt,{title:"Failed Today",value:h?.failedToday||0,icon:r.jsx(pi,{size:20}),color:"danger",onClick:()=>i("history")})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsx(of,{widgets:D,values:a,onChange:(H,I)=>s(R=>({...R,[H]:I})),onReset:()=>s({})})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:e?"1fr 1.5fr":"1fr"},children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:r.jsx("h3",{style:{fontWeight:600},children:n==="workbench"?`Batches Pending QC (${W?.length||0})`:`QC History (${W?.length||0})`})}),r.jsx("div",{style:{padding:"0",maxHeight:"60vh",overflowY:"auto"},children:(n==="workbench"?p:j)?r.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:r.jsx("div",{className:"spinner"})}):W?.length>0?W.map(H=>{const I=DE(H.qcResults);return r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",cursor:"pointer",background:e?.id===H.id?"var(--bg-secondary)":void 0,transition:"background 0.15s"},onClick:()=>t(H),children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600},children:H.batchNumber}),H.status==="FAILED_QC"&&r.jsx(vr,{size:14,color:"var(--danger)"})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:H.product?.name}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[H.orders?.length||0," orders | ",Ke(new Date(H.plannedStartTime||H.createdAt),"MMM dd HH:mm")]}),I.total>0&&r.jsxs("div",{style:{marginTop:"0.5rem"},children:[r.jsx("div",{style:{height:"4px",background:"var(--border)",borderRadius:"2px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${I.completed/I.total*100}%`,background:I.failed>0?"var(--danger)":"var(--success)",transition:"width 0.3s"}})}),r.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[I.completed,"/",I.total," tests (",I.passed," passed, ",I.failed," failed)"]})]})]}),r.jsx(Wn,{status:H.status,size:"sm"})]})},H.id)}):r.jsx(Bs,{title:n==="workbench"?"No batches pending QC":"No QC history found",message:n==="workbench"?"All batches have completed QC testing":"No completed QC tests in the selected period",icon:"success",variant:"compact"})})]}),e&&r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("h3",{style:{fontWeight:600},children:v?.batchNumber||e.batchNumber}),r.jsx(Wn,{status:v?.status||e.status})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:v?.product?.name||e.product?.name})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs(yr,{to:`/batches/${e.id}/journey`,className:"btn btn-secondary btn-sm",children:[r.jsx(Pa,{size:14})," Batch Journey"]}),r.jsx("button",{onClick:()=>t(null),style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--text-muted)"},children:""})]})]}),b?r.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("div",{style:{display:"flex",marginBottom:"1.5rem",gap:"0.5rem"},children:kE.map((H,I)=>{const R=kE.findIndex(ae=>ae.key===B)>I,Y=H.key===B,G=H.icon;return r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",opacity:R||Y?1:.4},children:[r.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:R?"var(--success)":Y?"var(--primary)":"var(--border)",color:R||Y?"white":"var(--text-muted)",marginBottom:"0.5rem"},children:r.jsx(G,{size:14})}),r.jsx("span",{style:{fontSize:"0.75rem",fontWeight:Y?600:400},children:H.label})]},H.key)})}),v?.qcResults?.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[r.jsx(ix,{size:48,color:"var(--text-muted)",style:{marginBottom:"1rem"}}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"QC testing not yet initialized"}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>w.mutate(e.id),disabled:w.isPending,children:[r.jsx(fd,{size:18}),w.isPending?"Initializing...":"Start QC Testing"]})]}):r.jsxs(r.Fragment,{children:[K&&r.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",justifyContent:"space-around"},children:[r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:K.total}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Total Tests"})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--success)"},children:K.passed}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Passed"})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--danger)"},children:K.failed}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Failed"})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--warning)"},children:K.total-K.completed}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Pending"})]})]}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Test"}),r.jsx("th",{children:"Criteria"}),r.jsx("th",{children:"Result"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:v?.qcResults?.map(H=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:H.template?.testName}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:H.template?.testMethod})]}),r.jsxs("td",{style:{fontSize:"0.875rem"},children:[H.template?.acceptanceCriteria,H.template?.minValue!==null&&H.template?.maxValue!==null&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Range: ",H.template.minValue," - ",H.template.maxValue," ",H.template.unit]})]}),r.jsx("td",{children:n==="history"?r.jsx("span",{style:{fontWeight:500},children:H.numericResult!==null?`${H.numericResult} ${H.template?.unit||""}`:H.passed===!0?"Pass":H.passed===!1?"Fail":"-"}):H.template?.minValue!==null?r.jsx("input",{type:"number",step:"0.01",className:"form-input",style:{width:"6rem"},value:H.numericResult??"",onChange:I=>E(H,"numericResult",parseFloat(I.target.value))}):r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{className:`btn btn-sm ${H.passed===!0?"btn-success":"btn-secondary"}`,onClick:()=>E(H,"passed",!0),disabled:S.isPending,children:[r.jsx(yt,{size:14}),"Pass"]}),r.jsxs("button",{className:`btn btn-sm ${H.passed===!1?"btn-danger":"btn-secondary"}`,onClick:()=>E(H,"passed",!1),disabled:S.isPending,children:[r.jsx(pi,{size:14}),"Fail"]})]})}),r.jsxs("td",{children:[H.passed===!0&&r.jsx("span",{className:"badge badge-success",children:"Passed"}),H.passed===!1&&r.jsx("span",{className:"badge badge-danger",children:"Failed"}),H.passed===null&&r.jsx("span",{className:"badge badge-default",children:"Pending"})]})]},H.id))})]}),n==="workbench"&&r.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:r.jsxs("button",{className:"btn btn-primary",onClick:()=>_.mutate(e.id),disabled:_.isPending||!!(K&&K.completed<K.total),title:K&&K.completed<K.total?"Complete all tests first":"Complete QC",children:[r.jsx(yt,{size:18}),_.isPending?"Completing...":"Complete QC"]})})]})]})]})]})]})}const TK=[{key:"production",label:"Production"},{key:"qc",label:"QC Testing"},{key:"qp_review",label:"QP Review"},{key:"released",label:"Released"}];function PK(e){return{QC_PASSED:["production","qc"],QP_REVIEW:["production","qc"],RELEASED:["production","qc","qp_review","released"],REJECTED:["production","qc"]}[e]||[]}function kK(e){return{QC_PASSED:"qp_review",QP_REVIEW:"qp_review",RELEASED:"released",REJECTED:"qp_review"}[e]||"qp_review"}function DK(){const[e,t]=P.useState(null),[n,i]=P.useState(!1),[a,s]=P.useState(!1),[l,d]=P.useState(!1),[h,f]=P.useState("pending"),[p,g]=P.useState({}),j=Tr(),v=Ei(),{data:b}=Ye({queryKey:["release-stats"],queryFn:async()=>{const{data:q}=await xe.get("/batches/release/stats");return q}}),{data:w,isLoading:S}=Ye({queryKey:["batches-for-release"],queryFn:async()=>{const{data:q}=await xe.get("/batches",{params:{status:"QC_PASSED"}});return q}}),{data:_,isLoading:E}=Ye({queryKey:["release-history"],queryFn:async()=>{const{data:q}=await xe.get("/batches/release/history?days=14");return q},enabled:h==="history"}),{data:D,isLoading:W}=Ye({queryKey:["batch-release-details",e?.id],queryFn:async()=>{const{data:q}=await xe.get(`/batches/${e.id}`);return q},enabled:!!e}),K=()=>{j.invalidateQueries({queryKey:["batches-for-release"]}),j.invalidateQueries({queryKey:["batch-release-details"]}),j.invalidateQueries({queryKey:["release-stats"]}),j.invalidateQueries({queryKey:["release-history"]})},B=ft({mutationFn:async q=>xe.post(`/batches/${e.id}/release`,{...q,disposition:"RELEASE"}),onSuccess:()=>{K(),i(!1),t(null),v.success("Batch Released","Batch has been successfully released for dispensing")},onError:q=>{const re=q.response?.data;re?.error==="SEGREGATION_OF_DUTIES_VIOLATION"?v.error("Segregation of Duties Violation",re.userMessage||"You cannot release a batch you tested"):v.error("Release Failed",re?.error||"Failed to release batch")}}),F=ft({mutationFn:async q=>xe.post(`/batches/${e.id}/release`,{...q,disposition:"REJECT"}),onSuccess:()=>{K(),s(!1),t(null),v.warning("Batch Rejected","Batch has been rejected and removed from release queue")},onError:q=>{const re=q.response?.data?.error||"Failed to reject batch";v.error("Rejection Failed",re)}}),H=ft({mutationFn:async q=>xe.post(`/batches/${e.id}/release`,{...q,disposition:"HOLD"}),onSuccess:()=>{K(),d(!1),t(null),v.warning("Batch On Hold","Batch has been placed on hold for further investigation")},onError:q=>{const re=q.response?.data?.error||"Failed to hold batch";v.error("Hold Failed",re)}}),I=q=>{q.preventDefault();const re=new FormData(q.currentTarget);B.mutate({electronicSignature:re.get("signature"),meaning:re.get("meaning")||"I certify this batch meets all GMP requirements",reason:re.get("reason"),releaseType:"FULL"})},R=q=>{q.preventDefault();const re=new FormData(q.currentTarget);F.mutate({electronicSignature:re.get("signature"),meaning:"REJECT - Batch does not meet release criteria",reason:re.get("reason")})},Y=q=>{q.preventDefault();const re=new FormData(q.currentTarget);H.mutate({electronicSignature:re.get("signature"),meaning:"HOLD - Pending investigation or additional review",reason:re.get("reason")})},G=q=>{f(q),t(null)},ae=[{key:"search",label:"Search",type:"search",placeholder:"Search batches..."}],Ne=(h==="pending"?w:_)?.filter(q=>{if(p.search){const re=p.search.toLowerCase();if(!q.batchNumber.toLowerCase().includes(re)&&!q.product?.name.toLowerCase().includes(re))return!1}return!0}),z=D?.qcResults?.filter(q=>q.passed).length||0,ie=D?.qcResults?.length||0;return S?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"QP Release"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Review and release batches with qualified person approval"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{className:`btn ${h==="pending"?"btn-primary":"btn-secondary"}`,onClick:()=>G("pending"),children:[r.jsx(Dt,{size:16})," Pending"]}),r.jsxs("button",{className:`btn ${h==="history"?"btn-primary":"btn-secondary"}`,onClick:()=>G("history"),children:[r.jsx(AO,{size:16})," History"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Pending Release",value:b?.pendingRelease||0,icon:r.jsx(Dt,{size:20}),color:"warning",onClick:()=>G("pending")}),r.jsx(lt,{title:"In QP Review",value:b?.qpReview||0,icon:r.jsx(NO,{size:20}),color:"info"}),r.jsx(lt,{title:"Released Today",value:b?.releasedToday||0,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>G("history")}),r.jsx(lt,{title:"Rejected Today",value:b?.rejectedToday||0,icon:r.jsx(pi,{size:20}),color:"danger",onClick:()=>G("history")})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsx(of,{widgets:ae,values:p,onChange:(q,re)=>g(ue=>({...ue,[q]:re})),onReset:()=>g({})})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:e?"1fr 1.5fr":"1fr"},children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontWeight:600},children:h==="pending"?`Batches Ready for Release (${Ne?.length||0})`:`Release History (${Ne?.length||0})`})}),r.jsx("div",{style:{padding:"0",maxHeight:"60vh",overflowY:"auto"},children:(h==="pending"?S:E)?r.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:r.jsx("div",{className:"spinner"})}):Ne?.length>0?Ne.map(q=>r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",cursor:"pointer",background:e?.id===q.id?"var(--bg-secondary)":void 0,transition:"background 0.15s"},onClick:()=>t(q),children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600},children:q.batchNumber}),q.status==="REJECTED"&&r.jsx(vr,{size:14,color:"var(--danger)"})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:q.product?.name}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[q.orders?.length||0," orders | ",q.targetActivity," ",q.activityUnit]}),h==="history"&&q.batchReleases?.[0]&&r.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Released by: ",q.batchReleases[0].releasedBy?.email," | ",Ke(new Date(q.batchReleases[0].releasedAt),"MMM dd HH:mm")]})]}),r.jsx(Wn,{status:q.status,size:"sm"})]})},q.id)):r.jsx(Bs,{title:h==="pending"?"No batches pending release":"No release history found",message:h==="pending"?"All batches have been reviewed by QP":"No releases in the selected period",icon:"success",variant:"compact"})})]}),e&&r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("h3",{style:{fontWeight:600},children:D?.batchNumber||e.batchNumber}),r.jsx(Wn,{status:D?.status||e.status})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:D?.product?.name||e.product?.name})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs(yr,{to:`/batches/${e.id}/journey`,className:"btn btn-secondary btn-sm",children:[r.jsx(Pa,{size:14})," Batch Journey"]}),r.jsx("button",{onClick:()=>t(null),style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--text-muted)"},children:""})]})]}),W?r.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:r.jsx("div",{className:"spinner"})}):D?r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsx(qO,{steps:TK,currentStep:kK(D.status),completedSteps:PK(D.status),exceptionStep:D.status==="REJECTED"?"qp_review":void 0,size:"sm"})}),r.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),r.jsx("div",{style:{fontWeight:500},children:D.product?.name})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Activity"}),r.jsxs("div",{style:{fontWeight:500},children:[D.actualActivity||D.targetActivity," ",D.activityUnit]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Orders"}),r.jsx("div",{style:{fontWeight:500},children:D.orders?.length||0})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"QC Tests"}),r.jsxs("div",{style:{fontWeight:500,color:z===ie?"var(--success)":"var(--danger)"},children:[z,"/",ie," Passed"]})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ii,{size:16})," QC Results Summary"]}),r.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:D.qcResults?.map(q=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem 0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontSize:"0.875rem"},children:[r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:500},children:q.template?.testName}),q.numericResult!==null&&r.jsxs("span",{style:{color:"var(--text-muted)",marginLeft:"0.5rem"},children:["(",q.numericResult," ",q.template?.unit,")"]})]}),r.jsx("span",{className:`badge badge-${q.passed?"success":"danger"}`,children:q.passed?"Pass":"Fail"})]},q.id))})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(cU,{size:16})," Orders to be Released"]}),r.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:D.orders?.map(q=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.625rem 0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontSize:"0.875rem"},children:[r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:500},children:q.orderNumber}),r.jsx("span",{style:{color:"var(--text-muted)",marginLeft:"0.5rem"},children:q.customer?.name})]}),r.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[q.requestedActivity," ",q.activityUnit]})]},q.id))})]}),D.batchReleases?.length>0&&r.jsxs("div",{style:{background:D.status==="RELEASED"?"#f0fdf4":"#fef2f2",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:D.status==="RELEASED"?"var(--success)":"var(--danger)"},children:[D.status==="RELEASED"?"Released":"Rejected"," by QP"]}),r.jsxs("div",{style:{fontSize:"0.875rem"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"QP:"})," ",D.batchReleases[0].releasedBy?.email]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",Ke(new Date(D.batchReleases[0].releasedAt),"MMM dd, yyyy HH:mm")]}),D.batchReleases[0].reason&&r.jsxs("div",{children:[r.jsx("strong",{children:"Notes:"})," ",D.batchReleases[0].reason]})]})]}),h==="pending"&&D.status==="QC_PASSED"&&r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsxs("button",{className:"btn btn-danger",style:{flex:"1 1 auto",minWidth:"80px"},onClick:()=>s(!0),children:[r.jsx(pi,{size:18}),"Reject"]}),r.jsxs("button",{className:"btn btn-warning",style:{flex:"1 1 auto",minWidth:"80px"},onClick:()=>d(!0),children:[r.jsx(vr,{size:18}),"Hold"]}),r.jsxs("button",{className:"btn btn-success",style:{flex:"2 1 auto",minWidth:"120px"},onClick:()=>i(!0),children:[r.jsx(Us,{size:18}),"Release Batch"]})]})]}):null]})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:r.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Batch Release - Electronic Signature"}),r.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("form",{onSubmit:I,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #bbf7d0"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(Us,{size:18,color:"var(--success)"}),r.jsx("strong",{style:{color:"var(--success)"},children:"Qualified Person Release"})]}),r.jsx("p",{style:{margin:0,color:"#166534"},children:"By signing below, I confirm that this batch has been manufactured and tested in accordance with GMP requirements and is fit for release."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Batch Number"}),r.jsx("input",{className:"form-input",value:D?.batchNumber||"",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Electronic Signature (Type your full name) *"}),r.jsx("input",{name:"signature",className:"form-input",required:!0,placeholder:"Enter your full name",autoComplete:"off"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Release Notes"}),r.jsx("textarea",{name:"reason",className:"form-input",rows:3,placeholder:"Optional notes for this release"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-success",disabled:B.isPending,children:[r.jsx(yt,{size:18}),B.isPending?"Releasing...":"Confirm Release"]})]})]})]})}),a&&r.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:r.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Reject Batch"}),r.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("form",{onSubmit:R,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(vr,{size:18,color:"var(--danger)"}),r.jsx("strong",{style:{color:"var(--danger)"},children:"Batch Rejection"})]}),r.jsx("p",{style:{margin:0,color:"#991b1b"},children:"This action will reject the batch and prevent it from being released. Please provide a reason for the rejection."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Batch Number"}),r.jsx("input",{className:"form-input",value:D?.batchNumber||"",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Electronic Signature (Type your full name) *"}),r.jsx("input",{name:"signature",className:"form-input",required:!0,placeholder:"Enter your full name",autoComplete:"off"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Rejection Reason *"}),r.jsx("textarea",{name:"reason",className:"form-input",rows:3,required:!0,placeholder:"Enter reason for rejection"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-danger",disabled:F.isPending,children:[r.jsx(pi,{size:18}),F.isPending?"Rejecting...":"Confirm Rejection"]})]})]})]})}),l&&r.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:r.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Place Batch On Hold"}),r.jsx("button",{onClick:()=>d(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("form",{onSubmit:Y,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",background:"#fffbeb",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fde68a"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(vr,{size:18,color:"var(--warning)"}),r.jsx("strong",{style:{color:"#b45309"},children:"Hold for Investigation"})]}),r.jsx("p",{style:{margin:0,color:"#92400e"},children:"This action will place the batch on hold pending further investigation. The batch cannot be dispensed until it is released or rejected."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Batch Number"}),r.jsx("input",{className:"form-input",value:D?.batchNumber||"",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Electronic Signature (Type your full name) *"}),r.jsx("input",{name:"signature",className:"form-input",required:!0,placeholder:"Enter your full name",autoComplete:"off"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Reason for Hold *"}),r.jsx("textarea",{name:"reason",className:"form-input",rows:3,required:!0,placeholder:"Enter reason for placing batch on hold"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-warning",disabled:H.isPending,children:[r.jsx(vr,{size:18}),H.isPending?"Holding...":"Confirm Hold"]})]})]})]})})]})}function OK(){const[e,t]=P.useState(null),[n,i]=P.useState(!1),[a,s]=P.useState(!1),[l,d]=P.useState(!1),[h,f]=P.useState(!1),[p,g]=P.useState(null),[j,v]=P.useState({}),b=P.useRef(null),w=Tr(),S=Ei();P.useEffect(()=>{const re=ue=>{b.current&&!b.current.contains(ue.target)&&g(null)};return p&&document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[p]);const{data:_,isLoading:E}=Ye({queryKey:["shipments",j],queryFn:async()=>{const{data:re}=await xe.get("/shipments",{params:j});return re}}),{data:D}=Ye({queryKey:["released-orders"],queryFn:async()=>{const{data:re}=await xe.get("/orders",{params:{status:"RELEASED"}});return re}}),{data:W}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:re}=await xe.get("/customers");return re}}),{data:K}=Ye({queryKey:["drivers"],queryFn:async()=>{const{data:re}=await xe.get("/drivers");return re}}),B=ft({mutationFn:async re=>xe.post("/shipments",re),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),w.invalidateQueries({queryKey:["released-orders"]}),i(!1),S.success("Shipment Created","New shipment has been created successfully")},onError:re=>{const ue=Er(re);S.error("Creation Failed",ue?.userMessage||"Failed to create shipment")}}),F=ft({mutationFn:async({id:re,data:ue})=>xe.post(`/shipments/${re}/dispatch`,ue),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),g(null),S.success("Dispatched","Shipment is now in transit")},onError:re=>{const ue=Er(re);S.error("Dispatch Failed",ue?.userMessage||"Failed to dispatch shipment")}}),H=ft({mutationFn:async({id:re,data:ue})=>xe.post(`/shipments/${re}/deliver`,ue),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),s(!1),t(null),S.success("Delivered","Shipment marked as delivered")},onError:re=>{const ue=Er(re);S.error("Delivery Failed",ue?.userMessage||"Failed to confirm delivery")}}),I=ft({mutationFn:async({id:re,data:ue})=>xe.post(`/shipments/${re}/assign-driver`,ue),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),d(!1),t(null),S.success("Driver Assigned","Driver has been assigned to the shipment")},onError:re=>{const ue=Er(re);S.error("Assignment Failed",ue?.userMessage||"Failed to assign driver")}}),R=ft({mutationFn:async({id:re,data:ue})=>xe.post(`/shipments/${re}/schedule`,ue),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),f(!1),t(null),S.success("Scheduled","Shipment schedule updated")},onError:re=>{const ue=Er(re);S.error("Schedule Failed",ue?.userMessage||"Failed to update schedule")}}),Y=ft({mutationFn:async re=>xe.post(`/shipments/${re}/mark-packed`),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),g(null),S.success("Packed","Shipment marked as packed")},onError:re=>{const ue=Er(re);S.error("Failed",ue?.userMessage||"Failed to mark as packed")}}),G=ft({mutationFn:async({id:re,reason:ue})=>xe.post(`/shipments/${re}/cancel`,{reason:ue}),onSuccess:()=>{w.invalidateQueries({queryKey:["shipments"]}),g(null),S.success("Cancelled","Shipment has been cancelled")},onError:re=>{const ue=Er(re);S.error("Cancel Failed",ue?.userMessage||"Failed to cancel shipment")}}),ae=re=>{re.preventDefault();const ue=new FormData(re.currentTarget),Q=Array.from(ue.getAll("orderIds"));B.mutate({customerId:ue.get("customerId"),courierName:ue.get("courierName"),vehicleInfo:ue.get("vehicleInfo"),scheduledDepartureTime:ue.get("scheduledDepartureTime"),expectedArrivalTime:ue.get("expectedArrivalTime"),orderIds:Q})},se=re=>{re.preventDefault();const ue=new FormData(re.currentTarget);H.mutate({id:e.id,data:{receiverName:ue.get("receiverName"),notes:ue.get("notes")}})},Ne=re=>{re.preventDefault();const ue=new FormData(re.currentTarget);I.mutate({id:e.id,data:{driverId:ue.get("driverId"),scheduledPickupAt:ue.get("scheduledPickupAt"),scheduledDeliveryAt:ue.get("scheduledDeliveryAt"),driverNotes:ue.get("driverNotes"),priority:ue.get("priority")}})},z=re=>{re.preventDefault();const ue=new FormData(re.currentTarget);R.mutate({id:e.id,data:{scheduledPickupAt:ue.get("scheduledPickupAt"),scheduledDeliveryAt:ue.get("scheduledDeliveryAt"),priority:ue.get("priority")}})},ie=[{key:"search",label:"Search",type:"search",placeholder:"Search shipments..."},{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"PACKED",label:"Packed"},{value:"ASSIGNED_TO_DRIVER",label:"Assigned"},{value:"ACCEPTED_BY_DRIVER",label:"Accepted"},{value:"PICKED_UP",label:"Picked Up"},{value:"IN_TRANSIT",label:"In Transit"},{value:"ARRIVED",label:"Arrived"},{value:"DELIVERED",label:"Delivered"},{value:"DELIVERY_FAILED",label:"Failed"},{value:"DELAYED",label:"Delayed"}]},{key:"unassigned",label:"Unassigned Only",type:"select",options:[{value:"",label:"All"},{value:"true",label:"Unassigned"}]},{key:"priority",label:"Priority",type:"select",options:[{value:"",label:"All Priorities"},{value:"NORMAL",label:"Normal"},{value:"URGENT",label:"Urgent"}]}],q={total:_?.length||0,packed:_?.filter(re=>re.status==="PACKED").length||0,assigned:_?.filter(re=>["ASSIGNED_TO_DRIVER","ACCEPTED_BY_DRIVER"].includes(re.status)).length||0,inTransit:_?.filter(re=>["PICKED_UP","IN_TRANSIT","ARRIVED"].includes(re.status)).length||0,delivered:_?.filter(re=>re.status==="DELIVERED").length||0,issues:_?.filter(re=>["DELAYED","DELIVERY_FAILED"].includes(re.status)).length||0};return E?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Logistics & Shipments"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage deliveries, assign drivers, and track shipment status"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs(yr,{to:"/drivers",className:"btn btn-secondary",children:[r.jsx(om,{size:16}),"Manage Drivers"]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[r.jsx(Lr,{size:16}),"Create Shipment"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total",value:q.total,icon:r.jsx(fn,{size:20}),color:"primary",onClick:()=>v({}),selected:!j.status&&!j.unassigned}),r.jsx(lt,{title:"Packed",value:q.packed,icon:r.jsx(Sr,{size:20}),color:"warning",onClick:()=>v({status:"PACKED"}),selected:j.status==="PACKED"}),r.jsx(lt,{title:"Assigned",value:q.assigned,icon:r.jsx(om,{size:20}),color:"info",onClick:()=>v({status:"ASSIGNED_TO_DRIVER"}),selected:j.status==="ASSIGNED_TO_DRIVER"}),r.jsx(lt,{title:"In Transit",value:q.inTransit,icon:r.jsx(qo,{size:20}),color:"primary",onClick:()=>v({status:"IN_TRANSIT"}),selected:j.status==="IN_TRANSIT"}),r.jsx(lt,{title:"Delivered",value:q.delivered,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>v({status:"DELIVERED"}),selected:j.status==="DELIVERED"}),r.jsx(lt,{title:"Issues",value:q.issues,icon:r.jsx(vr,{size:20}),color:"danger",onClick:()=>v({status:"DELAYED"}),selected:j.status==="DELAYED"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsx(of,{widgets:ie,values:j,onChange:(re,ue)=>v(Q=>({...Q,[re]:ue})),onReset:()=>v({})})}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Shipment List (",_?.length||0,")"]})}),_?.length>0?r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Shipment #"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Driver"}),r.jsx("th",{children:"Orders"}),r.jsx("th",{children:"Scheduled"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"120px",textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:_.map(re=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(yr,{to:`/shipments/${re.id}`,style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem",color:"var(--primary)"},children:re.shipmentNumber})}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:re.customer?.nameEn||re.customer?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:re.customer?.city})]}),r.jsx("td",{children:re.driver?r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500},children:re.driver.fullName}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:re.driver.vehiclePlateNo})]}):r.jsx("span",{className:"badge badge-warning",style:{fontSize:"0.6875rem"},children:"Unassigned"})}),r.jsx("td",{children:r.jsxs("span",{className:"badge badge-default",children:[re.orders?.length||0," orders"]})}),r.jsx("td",{children:re.scheduledDeliveryAt?r.jsxs("div",{children:[r.jsx("div",{children:Ke(new Date(re.scheduledDeliveryAt),"MMM dd")}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Ke(new Date(re.scheduledDeliveryAt),"HH:mm")})]}):re.scheduledDepartureTime?r.jsxs("div",{children:[r.jsx("div",{children:Ke(new Date(re.scheduledDepartureTime),"MMM dd, HH:mm")}),re.expectedArrivalTime&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["ETA: ",Ke(new Date(re.expectedArrivalTime),"HH:mm")]})]}):r.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Not scheduled"})}),r.jsx("td",{children:re.priority==="URGENT"?r.jsx("span",{className:"badge badge-danger",children:"Urgent"}):r.jsx("span",{className:"badge badge-default",children:"Normal"})}),r.jsx("td",{children:r.jsx(Wn,{status:re.status,size:"sm"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",position:"relative"},children:[r.jsx(yr,{to:`/shipments/${re.id}`,className:"btn btn-sm btn-outline",title:"View Details",children:r.jsx(Pa,{size:14})}),r.jsxs("div",{style:{position:"relative"},ref:p===re.id?b:null,children:[r.jsx("button",{className:"btn btn-sm btn-outline",onClick:ue=>{ue.stopPropagation(),g(p===re.id?null:re.id)},children:r.jsx(JU,{size:14})}),p===re.id&&r.jsxs("div",{className:"dropdown-menu",onClick:ue=>ue.stopPropagation(),children:[["DRAFT","READY_TO_PACK","PACKED","ASSIGNED_TO_DRIVER","DELIVERY_FAILED"].includes(re.status)&&r.jsxs("button",{className:"dropdown-item",onClick:()=>{t(re),d(!0),g(null)},children:[r.jsx(om,{size:14}),re.driver?"Reassign Driver":"Assign Driver"]}),r.jsxs("button",{className:"dropdown-item",onClick:()=>{t(re),f(!0),g(null)},children:[r.jsx(Wi,{size:14}),"Schedule"]}),["DRAFT","READY_TO_PACK"].includes(re.status)&&r.jsxs("button",{className:"dropdown-item",onClick:()=>Y.mutate(re.id),children:[r.jsx(Sr,{size:14}),"Mark Packed"]}),re.status==="PACKED"&&re.driver&&r.jsxs("button",{className:"dropdown-item",onClick:()=>F.mutate({id:re.id,data:{}}),children:[r.jsx(qo,{size:14}),"Dispatch"]}),["ARRIVED","IN_TRANSIT"].includes(re.status)&&r.jsxs("button",{className:"dropdown-item",onClick:()=>{t(re),s(!0),g(null)},children:[r.jsx(yt,{size:14}),"Mark Delivered"]}),!["DELIVERED","CANCELLED"].includes(re.status)&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"dropdown-divider"}),r.jsxs("button",{className:"dropdown-item danger",onClick:()=>{confirm("Are you sure you want to cancel this shipment?")&&G.mutate({id:re.id,reason:"Cancelled by user"})},children:[r.jsx(hn,{size:14}),"Cancel Shipment"]})]})]})]})]})})]},re.id))})]}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No shipments found",message:"Create a shipment to start delivering orders",icon:"package"})})]}),p&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:999},onClick:()=>g(null)}),n&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Create Shipment"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(!1),children:""})]}),r.jsxs("form",{onSubmit:ae,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer *"}),r.jsxs("select",{name:"customerId",className:"form-select",required:!0,children:[r.jsx("option",{value:"",children:"Select Customer"}),W?.map(re=>r.jsxs("option",{value:re.id,children:[re.nameEn||re.name," - ",re.city]},re.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Orders to Ship"}),r.jsxs("div",{style:{maxHeight:"150px",overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem"},children:[D?.map(re=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0"},children:[r.jsx("input",{type:"checkbox",name:"orderIds",value:re.id}),r.jsxs("span",{children:[re.orderNumber," - ",re.product?.name]})]},re.id)),(!D||D.length===0)&&r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"No released orders available"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Courier Name"}),r.jsx("input",{type:"text",name:"courierName",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Vehicle Info"}),r.jsx("input",{type:"text",name:"vehicleInfo",className:"form-input",placeholder:"e.g., Van ABC-123"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Departure Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledDepartureTime",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Expected Arrival"}),r.jsx("input",{type:"datetime-local",name:"expectedArrivalTime",className:"form-input"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:B.isPending,children:B.isPending?"Creating...":"Create Shipment"})]})]})]})}),l&&e&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Assign Driver"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{d(!1),t(null)},children:""})]}),r.jsxs("form",{onSubmit:Ne,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontWeight:500},children:e.shipmentNumber}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:[e.customer?.nameEn||e.customer?.name,"  ",e.orders?.length||0," orders"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Driver *"}),r.jsxs("select",{name:"driverId",className:"form-select",required:!0,children:[r.jsx("option",{value:"",children:"Select Driver"}),K?.filter(re=>re.status==="ACTIVE").map(re=>r.jsxs("option",{value:re.id,children:[re.fullName," - ",re.vehicleType," (",re.vehiclePlateNo,")",re.inTransit>0&&`  ${re.inTransit} in transit`]},re.id))]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Pickup Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledPickupAt",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledDeliveryAt",className:"form-input"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Priority"}),r.jsxs("select",{name:"priority",className:"form-select",defaultValue:e.priority||"NORMAL",children:[r.jsx("option",{value:"NORMAL",children:"Normal"}),r.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes for Driver"}),r.jsx("textarea",{name:"driverNotes",className:"form-textarea",rows:2,placeholder:"Special instructions for the driver..."})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{d(!1),t(null)},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:I.isPending,children:I.isPending?"Assigning...":"Assign Driver"})]})]})]})}),h&&e&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Schedule Shipment"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{f(!1),t(null)},children:""})]}),r.jsxs("form",{onSubmit:z,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontWeight:500},children:e.shipmentNumber}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:e.customer?.nameEn||e.customer?.name})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Pickup Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledPickupAt",className:"form-input",defaultValue:e.scheduledPickupAt?Ke(new Date(e.scheduledPickupAt),"yyyy-MM-dd'T'HH:mm"):""})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledDeliveryAt",className:"form-input",defaultValue:e.scheduledDeliveryAt?Ke(new Date(e.scheduledDeliveryAt),"yyyy-MM-dd'T'HH:mm"):""})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Priority"}),r.jsxs("select",{name:"priority",className:"form-select",defaultValue:e.priority||"NORMAL",children:[r.jsx("option",{value:"NORMAL",children:"Normal"}),r.jsx("option",{value:"URGENT",children:"Urgent"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{f(!1),t(null)},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:R.isPending,children:R.isPending?"Saving...":"Save Schedule"})]})]})]})}),a&&e&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Confirm Delivery"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{s(!1),t(null)},children:""})]}),r.jsxs("form",{onSubmit:se,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontWeight:500},children:e.shipmentNumber}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:[e.customer?.nameEn||e.customer?.name,"  ",e.orders?.length||0," orders"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Receiver Name *"}),r.jsx("input",{type:"text",name:"receiverName",className:"form-input",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Notes"}),r.jsx("textarea",{name:"notes",className:"form-textarea",rows:3,placeholder:"Any notes about the delivery..."})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{s(!1),t(null)},children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-success",disabled:H.isPending,children:[r.jsx(yt,{size:16}),H.isPending?"Confirming...":"Confirm Delivery"]})]})]})]})})]})}function MK(){const[e,t]=P.useState(!1),[n,i]=P.useState(null),[a,s]=P.useState(""),[l,d]=P.useState(""),h=Tr(),f=Ei(),{data:p,isLoading:g}=Ye({queryKey:["users"],queryFn:async()=>{const{data:E}=await xe.get("/users");return E}}),{data:j}=Ye({queryKey:["roles"],queryFn:async()=>{const{data:E}=await xe.get("/roles");return E}}),{data:v}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:E}=await xe.get("/customers");return E}}),b=j?.find(E=>E.id===a)?.name==="Customer",w=j?.find(E=>E.id===a)?.name==="Driver";P.useEffect(()=>{n?(s(n.roleId||""),d(n.customerId||"")):(s(""),d(""))},[n]);const S=ft({mutationFn:async E=>n?xe.put(`/users/${n.id}`,E):xe.post("/users",E),onSuccess:()=>{h.invalidateQueries({queryKey:["users"]}),t(!1),i(null)}}),_=E=>{E.preventDefault();const D=new FormData(E.currentTarget),W=D.get("roleId"),K=D.get("customerId");if(j?.find(F=>F.id===W)?.name==="Customer"&&!K){f.error("Customer Required","Users with Customer role must be linked to a customer record.");return}S.mutate({email:D.get("email"),password:D.get("password")||void 0,firstName:D.get("firstName"),lastName:D.get("lastName"),phone:D.get("phone"),roleId:W,customerId:K||null,isActive:D.get("isActive")==="true"})};return g?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"User Management"}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>t(!0),children:[r.jsx(Lr,{size:18}),"Add User"]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:p?.map(E=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsxs("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600},children:[E.firstName?.[0],E.lastName?.[0]]}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:500},children:[E.firstName," ",E.lastName]}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:E.phone})]})]})}),r.jsx("td",{children:E.email}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-info",children:E.role?.name})}),r.jsx("td",{children:E.customer?.name||"-"}),r.jsx("td",{children:E.isActive?r.jsxs("span",{className:"badge badge-success",children:[r.jsx(qW,{size:12,style:{marginRight:"0.25rem"}}),"Active"]}):r.jsxs("span",{className:"badge badge-danger",children:[r.jsx(WW,{size:12,style:{marginRight:"0.25rem"}}),"Inactive"]})}),r.jsx("td",{children:r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{i(E),t(!0)},children:r.jsx($l,{size:14})})})]},E.id))})]}),p?.length===0&&r.jsx("div",{className:"empty-state",children:"No users found"})]}),e&&r.jsx("div",{className:"modal-overlay",onClick:()=>t(!1),children:r.jsxs("div",{className:"modal",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:n?"Edit User":"Add User"}),r.jsx("button",{onClick:()=>{t(!1),i(null)},style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("form",{onSubmit:_,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"grid grid-2",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"First Name *"}),r.jsx("input",{name:"firstName",className:"form-input",defaultValue:n?.firstName,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Last Name *"}),r.jsx("input",{name:"lastName",className:"form-input",defaultValue:n?.lastName,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Email *"}),r.jsx("input",{name:"email",type:"email",className:"form-input",defaultValue:n?.email,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:n?"New Password (leave blank to keep)":"Password *"}),r.jsx("input",{name:"password",type:"password",className:"form-input",required:!n})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Phone"}),r.jsx("input",{name:"phone",className:"form-input",defaultValue:n?.phone})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Role *"}),r.jsxs("select",{name:"roleId",className:"form-select",value:a,onChange:E=>s(E.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select Role"}),j?.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(MH,{size:14}),"Linked Customer ",b&&r.jsx("span",{style:{color:"var(--danger)"},children:"*"})]})}),r.jsxs("select",{name:"customerId",className:"form-select",value:l,onChange:E=>d(E.target.value),required:b,style:b&&!l?{borderColor:"var(--warning)"}:{},children:[r.jsx("option",{value:"",children:"None (Internal User)"}),v?.map(E=>r.jsxs("option",{value:E.id,children:[E.nameEn||E.name," (",E.code,")"]},E.id))]}),b&&!l&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"rgba(251, 191, 36, 0.1)",borderRadius:"var(--radius)",fontSize:"0.75rem",color:"var(--warning)"},children:[r.jsx(vr,{size:14}),"Customer role requires linking to a customer record"]}),!b&&!w&&l&&r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Note: Only Customer role users can access the customer portal"})]}),n&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Status"}),r.jsxs("select",{name:"isActive",className:"form-select",defaultValue:n?.isActive?"true":"false",children:[r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t(!1),i(null)},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S.isPending,children:S.isPending?"Saving...":"Save User"})]})]})]})})]})}function QO(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=QO(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Dn(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=QO(e))&&(i&&(i+=" "),i+=t);return i}var LK=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function sS(e){if(typeof e!="string")return!1;var t=LK;return t.includes(e)}var RK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],IK=new Set(RK);function YO(e){return typeof e!="string"?!1:IK.has(e)}function ZO(e){return typeof e=="string"&&e.startsWith("data-")}function Sc(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(YO(n)||ZO(n))&&(t[n]=e[n]);return t}function tg(e){if(e==null)return null;if(P.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Sc(t)}return typeof e=="object"&&!Array.isArray(e)?Sc(e):null}function Kl(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(YO(n)||ZO(n)||sS(n))&&(t[n]=e[n]);return t}var zK=["children","width","height","viewBox","className","style","title","desc"];function S5(){return S5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S5.apply(null,arguments)}function BK(e,t){if(e==null)return{};var n,i,a=FK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function FK(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var XO=P.forwardRef((e,t)=>{var{children:n,width:i,height:a,viewBox:s,className:l,style:d,title:h,desc:f}=e,p=BK(e,zK),g=s||{width:i,height:a,x:0,y:0},j=Dn("recharts-surface",l);return P.createElement("svg",S5({},Kl(p),{className:j,width:i,height:a,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),P.createElement("title",null,h),P.createElement("desc",null,f),n)}),qK=["children","className"];function N5(){return N5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N5.apply(null,arguments)}function UK(e,t){if(e==null)return{};var n,i,a=HK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function HK(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var co=P.forwardRef((e,t)=>{var{children:n,className:i}=e,a=UK(e,qK),s=Dn("recharts-layer",i);return P.createElement("g",N5({className:s},Kl(a),{ref:t}),n)}),WK=P.createContext(null);function Hn(e){return function(){return e}}const JO=Math.cos,Jv=Math.sin,Pc=Math.sqrt,e0=Math.PI,ox=2*e0,_5=Math.PI,C5=2*_5,jh=1e-6,$K=C5-jh;function e8(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function VK(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return e8;const n=10**t;return function(i){this._+=i[0];for(let a=1,s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}class KK{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?e8:VK(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,a){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,n,i,a,s,l){this._append`C${+t},${+n},${+i},${+a},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,i,a,s){if(t=+t,n=+n,i=+i,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,d=this._y1,h=i-t,f=a-n,p=l-t,g=d-n,j=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(j>jh)if(!(Math.abs(g*h-f*p)>jh)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let v=i-l,b=a-d,w=h*h+f*f,S=v*v+b*b,_=Math.sqrt(w),E=Math.sqrt(j),D=s*Math.tan((_5-Math.acos((w+j-S)/(2*_*E)))/2),W=D/E,K=D/_;Math.abs(W-1)>jh&&this._append`L${t+W*p},${n+W*g}`,this._append`A${s},${s},0,0,${+(g*v>p*b)},${this._x1=t+K*h},${this._y1=n+K*f}`}}arc(t,n,i,a,s,l){if(t=+t,n=+n,i=+i,l=!!l,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(a),h=i*Math.sin(a),f=t+d,p=n+h,g=1^l,j=l?a-s:s-a;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>jh||Math.abs(this._y1-p)>jh)&&this._append`L${f},${p}`,i&&(j<0&&(j=j%C5+C5),j>$K?this._append`A${i},${i},0,1,${g},${t-d},${n-h}A${i},${i},0,1,${g},${this._x1=f},${this._y1=p}`:j>jh&&this._append`A${i},${i},0,${+(j>=_5)},${g},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function oS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new KK(t)}function lS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function t8(e){this._context=e}t8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function lx(e){return new t8(e)}function r8(e){return e[0]}function n8(e){return e[1]}function i8(e,t){var n=Hn(!0),i=null,a=lx,s=null,l=oS(d);e=typeof e=="function"?e:e===void 0?r8:Hn(e),t=typeof t=="function"?t:t===void 0?n8:Hn(t);function d(h){var f,p=(h=lS(h)).length,g,j=!1,v;for(i==null&&(s=a(v=l())),f=0;f<=p;++f)!(f<p&&n(g=h[f],f,h))===j&&((j=!j)?s.lineStart():s.lineEnd()),j&&s.point(+e(g,f,h),+t(g,f,h));if(v)return s=null,v+""||null}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Hn(+h),d):e},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Hn(+h),d):t},d.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Hn(!!h),d):n},d.curve=function(h){return arguments.length?(a=h,i!=null&&(s=a(i)),d):a},d.context=function(h){return arguments.length?(h==null?i=s=null:s=a(i=h),d):i},d}function $y(e,t,n){var i=null,a=Hn(!0),s=null,l=lx,d=null,h=oS(f);e=typeof e=="function"?e:e===void 0?r8:Hn(+e),t=typeof t=="function"?t:Hn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?n8:Hn(+n);function f(g){var j,v,b,w=(g=lS(g)).length,S,_=!1,E,D=new Array(w),W=new Array(w);for(s==null&&(d=l(E=h())),j=0;j<=w;++j){if(!(j<w&&a(S=g[j],j,g))===_)if(_=!_)v=j,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),b=j-1;b>=v;--b)d.point(D[b],W[b]);d.lineEnd(),d.areaEnd()}_&&(D[j]=+e(S,j,g),W[j]=+t(S,j,g),d.point(i?+i(S,j,g):D[j],n?+n(S,j,g):W[j]))}if(E)return d=null,E+""||null}function p(){return i8().defined(a).curve(l).context(s)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:Hn(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Hn(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:Hn(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:Hn(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Hn(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Hn(+g),f):n},f.lineX0=f.lineY0=function(){return p().x(e).y(t)},f.lineY1=function(){return p().x(e).y(n)},f.lineX1=function(){return p().x(i).y(t)},f.defined=function(g){return arguments.length?(a=typeof g=="function"?g:Hn(!!g),f):a},f.curve=function(g){return arguments.length?(l=g,s!=null&&(d=l(s)),f):l},f.context=function(g){return arguments.length?(g==null?s=d=null:d=l(s=g),f):s},f}class a8{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function GK(e){return new a8(e,!0)}function QK(e){return new a8(e,!1)}const cS={draw(e,t){const n=Pc(t/e0);e.moveTo(n,0),e.arc(0,0,n,0,ox)}},YK={draw(e,t){const n=Pc(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},s8=Pc(1/3),ZK=s8*2,XK={draw(e,t){const n=Pc(t/ZK),i=n*s8;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},JK={draw(e,t){const n=Pc(t),i=-n/2;e.rect(i,i,n,n)}},eG=.8908130915292852,o8=Jv(e0/10)/Jv(7*e0/10),tG=Jv(ox/10)*o8,rG=-JO(ox/10)*o8,nG={draw(e,t){const n=Pc(t*eG),i=tG*n,a=rG*n;e.moveTo(0,-n),e.lineTo(i,a);for(let s=1;s<5;++s){const l=ox*s/5,d=JO(l),h=Jv(l);e.lineTo(h*n,-d*n),e.lineTo(d*i-h*a,h*i+d*a)}e.closePath()}},kb=Pc(3),iG={draw(e,t){const n=-Pc(t/(kb*3));e.moveTo(0,n*2),e.lineTo(-kb*n,-n),e.lineTo(kb*n,-n),e.closePath()}},Rl=-.5,Il=Pc(3)/2,A5=1/Pc(12),aG=(A5/2+1)*3,sG={draw(e,t){const n=Pc(t/aG),i=n/2,a=n*A5,s=i,l=n*A5+n,d=-s,h=l;e.moveTo(i,a),e.lineTo(s,l),e.lineTo(d,h),e.lineTo(Rl*i-Il*a,Il*i+Rl*a),e.lineTo(Rl*s-Il*l,Il*s+Rl*l),e.lineTo(Rl*d-Il*h,Il*d+Rl*h),e.lineTo(Rl*i+Il*a,Rl*a-Il*i),e.lineTo(Rl*s+Il*l,Rl*l-Il*s),e.lineTo(Rl*d+Il*h,Rl*h-Il*d),e.closePath()}};function oG(e,t){let n=null,i=oS(a);e=typeof e=="function"?e:Hn(e||cS),t=typeof t=="function"?t:Hn(t===void 0?64:+t);function a(){let s;if(n||(n=s=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Hn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Hn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function t0(){}function r0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function l8(e){this._context=e}l8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lG(e){return new l8(e)}function c8(e){this._context=e}c8.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cG(e){return new c8(e)}function d8(e){this._context=e}d8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dG(e){return new d8(e)}function u8(e){this._context=e}u8.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uG(e){return new u8(e)}function OE(e){return e<0?-1:1}function ME(e,t,n){var i=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(i||a<0&&-0),l=(n-e._y1)/(a||i<0&&-0),d=(s*a+l*i)/(i+a);return(OE(s)+OE(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(d))||0}function LE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Db(e,t,n){var i=e._x0,a=e._y0,s=e._x1,l=e._y1,d=(s-i)/3;e._context.bezierCurveTo(i+d,a+d*t,s-d,l-d*n,s,l)}function n0(e){this._context=e}n0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Db(this,this._t0,LE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Db(this,LE(this,n=ME(this,e,t)),n);break;default:Db(this,this._t0,n=ME(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function h8(e){this._context=new f8(e)}(h8.prototype=Object.create(n0.prototype)).point=function(e,t){n0.prototype.point.call(this,t,e)};function f8(e){this._context=e}f8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,a,s){this._context.bezierCurveTo(t,e,i,n,s,a)}};function hG(e){return new n0(e)}function fG(e){return new h8(e)}function m8(e){this._context=e}m8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=RE(e),a=RE(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function RE(e){var t,n=e.length-1,i,a=new Array(n),s=new Array(n),l=new Array(n);for(a[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=a[t]/s[t-1],s[t]-=i,l[t]-=i*l[t-1];for(a[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(l[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function mG(e){return new m8(e)}function cx(e,t){this._context=e,this._t=t}cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function pG(e){return new cx(e,.5)}function gG(e){return new cx(e,0)}function yG(e){return new cx(e,1)}function Vh(e,t){if((l=e.length)>1)for(var n=1,i,a,s=e[t[0]],l,d=s.length;n<l;++n)for(a=s,s=e[t[n]],i=0;i<d;++i)s[i][1]+=s[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function E5(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function vG(e,t){return e[t]}function xG(e){const t=[];return t.key=e,t}function bG(){var e=Hn([]),t=E5,n=Vh,i=vG;function a(s){var l=Array.from(e.apply(this,arguments),xG),d,h=l.length,f=-1,p;for(const g of s)for(d=0,++f;d<h;++d)(l[d][f]=[0,+i(g,l[d].key,f,s)]).data=g;for(d=0,p=lS(t(l));d<h;++d)l[p[d]].index=d;return n(l,p),l}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Hn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(i=typeof s=="function"?s:Hn(+s),a):i},a.order=function(s){return arguments.length?(t=s==null?E5:typeof s=="function"?s:Hn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??Vh,a):n},a}function jG(e,t){if((i=e.length)>0){for(var n,i,a=0,s=e[0].length,l;a<s;++a){for(l=n=0;n<i;++n)l+=e[n][a][1]||0;if(l)for(n=0;n<i;++n)e[n][a][1]/=l}Vh(e,t)}}function wG(e,t){if((a=e.length)>0){for(var n=0,i=e[t[0]],a,s=i.length;n<s;++n){for(var l=0,d=0;l<a;++l)d+=e[l][n][1]||0;i[n][1]+=i[n][0]=-d/2}Vh(e,t)}}function SG(e,t){if(!(!((l=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,i=1,a,s,l;i<s;++i){for(var d=0,h=0,f=0;d<l;++d){for(var p=e[t[d]],g=p[i][1]||0,j=p[i-1][1]||0,v=(g-j)/2,b=0;b<d;++b){var w=e[t[b]],S=w[i][1]||0,_=w[i-1][1]||0;v+=S-_}h+=g,f+=v*g}a[i-1][1]+=a[i-1][0]=n,h&&(n-=f/h)}a[i-1][1]+=a[i-1][0]=n,Vh(e,t)}}var Ob={},Mb={},IE;function NG(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Mb)),Mb}var Lb={},zE;function p8(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Lb)),Lb}var Rb={},BE;function dS(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Rb)),Rb}var Ib={},zb={},FE;function _G(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}e.toString=t})(zb)),zb}var qE;function uS(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_G(),n=dS();function i(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const s=[],l=a.length;if(l===0)return s;let d=0,h="",f="",p=!1;for(a.charCodeAt(0)===46&&(s.push(""),d++);d<l;){const g=a[d];f?g==="\\"&&d+1<l?(d++,h+=a[d]):g===f?f="":h+=g:p?g==='"'||g==="'"?f=g:g==="]"?(p=!1,s.push(h),h=""):h+=g:g==="["?(p=!0,h&&(s.push(h),h="")):g==="."?h&&(s.push(h),h=""):h+=g,d++}return h&&s.push(h),s}e.toPath=i})(Ib)),Ib}var UE;function hS(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NG(),n=p8(),i=dS(),a=uS();function s(d,h,f){if(d==null)return f;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return f;const p=d[h];return p===void 0?n.isDeepKey(h)?s(d,a.toPath(h),f):f:p}case"number":case"symbol":{typeof h=="number"&&(h=i.toKey(h));const p=d[h];return p===void 0?f:p}default:{if(Array.isArray(h))return l(d,h,f);if(Object.is(h?.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return f;const p=d[h];return p===void 0?f:p}}}function l(d,h,f){if(h.length===0)return f;let p=d;for(let g=0;g<h.length;g++){if(p==null||t.isUnsafeProperty(h[g]))return f;p=p[h[g]]}return p===void 0?f:p}e.get=s})(Ob)),Ob}var Bb,HE;function CG(){return HE||(HE=1,Bb=hS().get),Bb}var AG=CG();const Kh=Zl(AG);var EG=4;function Xu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:EG,n=10**t,i=Math.round(e*n)/n;return Object.is(i,-0)?0:i}function qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.reduce((a,s,l)=>{var d=n[l-1];return typeof d=="string"?a+d+s:d!==void 0?a+Xu(d)+s:a+s},"")}var Ka=e=>e===0?0:e>0?1:-1,Nc=e=>typeof e=="number"&&e!=+e,iu=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Rt=e=>(typeof e=="number"||e instanceof Number)&&!Nc(e),yd=e=>Rt(e)||typeof e=="string",TG=0,rg=e=>{var t=++TG;return"".concat(e||"").concat(t)},qs=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Rt(t)&&typeof t!="string")return i;var s;if(iu(t)){if(n==null)return i;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return Nc(s)&&(s=i),a&&n!=null&&s>n&&(s=n),s},g8=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},i=0;i<t;i++)if(!n[String(e[i])])n[String(e[i])]=!0;else return!0;return!1};function Aa(e,t,n){return Rt(e)&&Rt(t)?Xu(e+n*(t-e)):t}function PG(e,t,n){if(!(!e||!e.length))return e.find(i=>i&&(typeof t=="function"?t(i):Kh(i,t))===n)}var Ga=e=>e===null||typeof e>"u",Tg=e=>Ga(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function kG(e){return e!=null}function Pg(){}var DG=["type","size","sizeType"];function T5(){return T5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T5.apply(null,arguments)}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function $E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(i){OG(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function OG(e,t,n){return(t=MG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=LG(e,"string");return typeof t=="symbol"?t:t+""}function LG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RG(e,t){if(e==null)return{};var n,i,a=IG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function IG(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var y8={symbolCircle:cS,symbolCross:YK,symbolDiamond:XK,symbolSquare:JK,symbolStar:nG,symbolTriangle:iG,symbolWye:sG},zG=Math.PI/180,BG=e=>{var t="symbol".concat(Tg(e));return y8[t]||cS},FG=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*zG;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},qG=(e,t)=>{y8["symbol".concat(Tg(e))]=t},v8=e=>{var{type:t="circle",size:n=64,sizeType:i="area"}=e,a=RG(e,DG),s=$E($E({},a),{},{type:t,size:n,sizeType:i}),l="circle";typeof t=="string"&&(l=t);var d=()=>{var j=BG(l),v=oG().type(j).size(FG(n,i,l)),b=v();if(b!==null)return b},{className:h,cx:f,cy:p}=s,g=Kl(s);return Rt(f)&&Rt(p)&&Rt(n)?P.createElement("path",T5({},g,{className:Dn("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};v8.registerSymbol=qG;var x8=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,UG=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(P.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{sS(a)&&(i[a]=(s=>n[a](n,s)))}),i},HG=(e,t,n)=>i=>(e(t,n,i),null),dx=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var i=null;return Object.keys(e).forEach(a=>{var s=e[a];sS(a)&&typeof s=="function"&&(i||(i={}),i[a]=HG(s,t,n))}),i};function VE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function WG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(n),!0).forEach(function(i){$G(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function $G(e,t,n){return(t=VG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VG(e){var t=KG(e,"string");return typeof t=="symbol"?t:t+""}function KG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hs(e,t){var n=WG({},e),i=t,a=Object.keys(t),s=a.reduce((l,d)=>(l[d]===void 0&&i[d]!==void 0&&(l[d]=i[d]),l),n);return s}var Fb={},qb={},KE;function GG(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i){const a=new Map;for(let s=0;s<n.length;s++){const l=n[s],d=i(l,s,n);a.has(d)||a.set(d,l)}return Array.from(a.values())}e.uniqBy=t})(qb)),qb}var Ub={},GE;function QG(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i){return function(...a){return n.apply(this,a.slice(0,i))}}e.ary=t})(Ub)),Ub}var Hb={},QE;function b8(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Hb)),Hb}var Wb={},$b={},Vb={},YE;function YG(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Vb)),Vb}var ZE;function fS(){return ZE||(ZE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YG();function n(i){return i!=null&&typeof i!="function"&&t.isLength(i.length)}e.isArrayLike=n})($b)),$b}var Kb={},XE;function ZG(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Kb)),Kb}var JE;function XG(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fS(),n=ZG();function i(a){return n.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=i})(Wb)),Wb}var Gb={},Qb={},e4;function JG(){return e4||(e4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hS();function n(i){return function(a){return t.get(a,i)}}e.property=n})(Qb)),Qb}var Yb={},Zb={},Xb={},Jb={},t4;function j8(){return t4||(t4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Jb)),Jb}var e2={},r4;function w8(){return r4||(r4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(e2)),e2}var t2={},n4;function S8(){return n4||(n4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}e.isEqualsSameValueZero=t})(t2)),t2}var i4;function eQ(){return i4||(i4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j8(),n=w8(),i=S8();function a(p,g,j){return typeof j!="function"?a(p,g,()=>{}):s(p,g,function v(b,w,S,_,E,D){const W=j(b,w,S,_,E,D);return W!==void 0?!!W:s(b,w,v,D)},new Map)}function s(p,g,j,v){if(g===p)return!0;switch(typeof g){case"object":return l(p,g,j,v);case"function":return Object.keys(g).length>0?s(p,{...g},j,v):i.isEqualsSameValueZero(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:i.isEqualsSameValueZero(p,g)}}function l(p,g,j,v){if(g==null)return!0;if(Array.isArray(g))return h(p,g,j,v);if(g instanceof Map)return d(p,g,j,v);if(g instanceof Set)return f(p,g,j,v);const b=Object.keys(g);if(p==null||n.isPrimitive(p))return b.length===0;if(b.length===0)return!0;if(v?.has(g))return v.get(g)===p;v?.set(g,p);try{for(let w=0;w<b.length;w++){const S=b[w];if(!n.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!j(p[S],g[S],S,p,g,v))return!1}return!0}finally{v?.delete(g)}}function d(p,g,j,v){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[b,w]of g.entries()){const S=p.get(b);if(j(S,w,b,p,g,v)===!1)return!1}return!0}function h(p,g,j,v){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const b=new Set;for(let w=0;w<g.length;w++){const S=g[w];let _=!1;for(let E=0;E<p.length;E++){if(b.has(E))continue;const D=p[E];let W=!1;if(j(D,S,w,p,g,v)&&(W=!0),W){b.add(E),_=!0;break}}if(!_)return!1}return!0}function f(p,g,j,v){return g.size===0?!0:p instanceof Set?h([...p],[...g],j,v):!1}e.isMatchWith=a,e.isSetMatch=f})(Xb)),Xb}var a4;function N8(){return a4||(a4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eQ();function n(i,a){return t.isMatchWith(i,a,()=>{})}e.isMatch=n})(Zb)),Zb}var r2={},n2={},i2={},s4;function tQ(){return s4||(s4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}e.getSymbols=t})(i2)),i2}var a2={},o4;function mS(){return o4||(o4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(a2)),a2}var s2={},l4;function _8(){return l4||(l4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",i="[object Number]",a="[object Boolean]",s="[object Arguments]",l="[object Symbol]",d="[object Date]",h="[object Map]",f="[object Set]",p="[object Array]",g="[object Function]",j="[object ArrayBuffer]",v="[object Object]",b="[object Error]",w="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",D="[object Uint32Array]",W="[object BigUint64Array]",K="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",H="[object BigInt64Array]",I="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=j,e.arrayTag=p,e.bigInt64ArrayTag=H,e.bigUint64ArrayTag=W,e.booleanTag=a,e.dataViewTag=w,e.dateTag=d,e.errorTag=b,e.float32ArrayTag=I,e.float64ArrayTag=R,e.functionTag=g,e.int16ArrayTag=B,e.int32ArrayTag=F,e.int8ArrayTag=K,e.mapTag=h,e.numberTag=i,e.objectTag=v,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=D,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})(s2)),s2}var o2={},c4;function rQ(){return c4||(c4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(o2)),o2}var d4;function C8(){return d4||(d4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tQ(),n=mS(),i=_8(),a=w8(),s=rQ();function l(p,g){return d(p,void 0,p,new Map,g)}function d(p,g,j,v=new Map,b=void 0){const w=b?.(p,g,j,v);if(w!==void 0)return w;if(a.isPrimitive(p))return p;if(v.has(p))return v.get(p);if(Array.isArray(p)){const S=new Array(p.length);v.set(p,S);for(let _=0;_<p.length;_++)S[_]=d(p[_],_,j,v,b);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;v.set(p,S);for(const[_,E]of p)S.set(_,d(E,_,j,v,b));return S}if(p instanceof Set){const S=new Set;v.set(p,S);for(const _ of p)S.add(d(_,void 0,j,v,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);v.set(p,S);for(let _=0;_<p.length;_++)S[_]=d(p[_],_,j,v,b);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return v.set(p,S),h(S,p,j,v,b),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return v.set(p,S),h(S,p,j,v,b),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return v.set(p,S),h(S,p,j,v,b),S}if(p instanceof Error){const S=new p.constructor;return v.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,h(S,p,j,v,b),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return v.set(p,S),h(S,p,j,v,b),S}if(p instanceof Number){const S=new Number(p.valueOf());return v.set(p,S),h(S,p,j,v,b),S}if(p instanceof String){const S=new String(p.valueOf());return v.set(p,S),h(S,p,j,v,b),S}if(typeof p=="object"&&f(p)){const S=Object.create(Object.getPrototypeOf(p));return v.set(p,S),h(S,p,j,v,b),S}return p}function h(p,g,j=p,v,b){const w=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<w.length;S++){const _=w[S],E=Object.getOwnPropertyDescriptor(p,_);(E==null||E.writable)&&(p[_]=d(g[_],_,j,v,b))}}function f(p){switch(n.getTag(p)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=d,e.copyProperties=h})(n2)),n2}var u4;function nQ(){return u4||(u4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C8();function n(i){return t.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}e.cloneDeep=n})(r2)),r2}var h4;function iQ(){return h4||(h4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N8(),n=nQ();function i(a){return a=n.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=i})(Yb)),Yb}var l2={},c2={},d2={},f4;function aQ(){return f4||(f4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C8(),n=mS(),i=_8();function a(s,l){return t.cloneDeepWith(s,(d,h,f,p)=>{const g=l?.(d,h,f,p);if(g!==void 0)return g;if(typeof s=="object"){if(n.getTag(s)===i.objectTag&&typeof s.constructor!="function"){const j={};return p.set(s,j),t.copyProperties(j,s,f,p),j}switch(Object.prototype.toString.call(s)){case i.numberTag:case i.stringTag:case i.booleanTag:{const j=new s.constructor(s?.valueOf());return t.copyProperties(j,s),j}case i.argumentsTag:{const j={};return t.copyProperties(j,s),j.length=s.length,j[Symbol.iterator]=s[Symbol.iterator],j}default:return}}})}e.cloneDeepWith=a})(d2)),d2}var m4;function sQ(){return m4||(m4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aQ();function n(i){return t.cloneDeepWith(i)}e.cloneDeep=n})(c2)),c2}var u2={},h2={},p4;function A8(){return p4||(p4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(i,a=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<a;case"symbol":return!1;case"string":return t.test(i)}}e.isIndex=n})(h2)),h2}var f2={},g4;function oQ(){return g4||(g4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mS();function n(i){return i!==null&&typeof i=="object"&&t.getTag(i)==="[object Arguments]"}e.isArguments=n})(f2)),f2}var y4;function lQ(){return y4||(y4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p8(),n=A8(),i=oQ(),a=uS();function s(l,d){let h;if(Array.isArray(d)?h=d:typeof d=="string"&&t.isDeepKey(d)&&l?.[d]==null?h=a.toPath(d):h=[d],h.length===0)return!1;let f=l;for(let p=0;p<h.length;p++){const g=h[p];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||i.isArguments(f))&&n.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}e.has=s})(u2)),u2}var v4;function cQ(){return v4||(v4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N8(),n=dS(),i=sQ(),a=hS(),s=lQ();function l(d,h){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return h=i.cloneDeep(h),function(f){const p=a.get(f,d);return p===void 0?s.has(f,d):h===void 0?p===void 0:t.isMatch(p,h)}}e.matchesProperty=l})(l2)),l2}var x4;function dQ(){return x4||(x4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b8(),n=JG(),i=iQ(),a=cQ();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):i.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Gb)),Gb}var b4;function uQ(){return b4||(b4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GG(),n=QG(),i=b8(),a=XG(),s=dQ();function l(d,h=i.identity){return a.isArrayLikeObject(d)?t.uniqBy(Array.from(d),n.ary(s.iteratee(h),1)):[]}e.uniqBy=l})(Fb)),Fb}var m2,j4;function hQ(){return j4||(j4=1,m2=uQ().uniqBy),m2}var fQ=hQ();const w4=Zl(fQ);function mQ(e,t,n){return t===!0?w4(e,n):typeof t=="function"?w4(e,t):e}var p2={exports:{}},g2={},y2={exports:{}},v2={};var S4;function pQ(){if(S4)return v2;S4=1;var e=Am();function t(g,j){return g===j&&(g!==0||1/g===1/j)||g!==g&&j!==j}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,a=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function d(g,j){var v=j(),b=i({inst:{value:v,getSnapshot:j}}),w=b[0].inst,S=b[1];return s(function(){w.value=v,w.getSnapshot=j,h(w)&&S({inst:w})},[g,v,j]),a(function(){return h(w)&&S({inst:w}),g(function(){h(w)&&S({inst:w})})},[g]),l(v),v}function h(g){var j=g.getSnapshot;g=g.value;try{var v=j();return!n(g,v)}catch{return!0}}function f(g,j){return j()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:d;return v2.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,v2}var N4;function gQ(){return N4||(N4=1,y2.exports=pQ()),y2.exports}var _4;function yQ(){if(_4)return g2;_4=1;var e=Am(),t=gQ();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,d=e.useMemo,h=e.useDebugValue;return g2.useSyncExternalStoreWithSelector=function(f,p,g,j,v){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=d(function(){function _(B){if(!E){if(E=!0,D=B,B=j(B),v!==void 0&&w.hasValue){var F=w.value;if(v(F,B))return W=F}return W=B}if(F=W,i(D,B))return F;var H=j(B);return v!==void 0&&v(F,H)?(D=B,F):(D=B,W=H)}var E=!1,D,W,K=g===void 0?null:g;return[function(){return _(p())},K===null?void 0:function(){return _(K())}]},[p,g,j,v]);var S=a(f,b[0],b[1]);return l(function(){w.hasValue=!0,w.value=S},[S]),h(S),S},g2}var C4;function vQ(){return C4||(C4=1,p2.exports=yQ()),p2.exports}var xQ=vQ(),pS=P.createContext(null),bQ=e=>e,vi=()=>{var e=P.useContext(pS);return e?e.store.dispatch:bQ},Dv=()=>{},jQ=()=>Dv,wQ=(e,t)=>e===t;function Ft(e){var t=P.useContext(pS);return xQ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:jQ,t?t.store.getState:Dv,t?t.store.getState:Dv,t?e:Dv,wQ)}function SQ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function NQ(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function _Q(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${t}[${n}]`)}}var A4=e=>Array.isArray(e)?e:[e];function CQ(e){const t=Array.isArray(e[0])?e[0]:e;return _Q(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function AQ(e,t){const n=[],{length:i}=e;for(let a=0;a<i;a++)n.push(e[a].apply(null,t));return n}var EQ=class{constructor(e){this.value=e}deref(){return this.value}},TQ=typeof WeakRef<"u"?WeakRef:EQ,PQ=0,E4=1;function Vy(){return{s:PQ,v:void 0,o:null,p:null}}function E8(e,t={}){let n=Vy();const{resultEqualityCheck:i}=t;let a,s=0;function l(){let d=n;const{length:h}=arguments;for(let g=0,j=h;g<j;g++){const v=arguments[g];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=d.o;b===null&&(d.o=b=new WeakMap);const w=b.get(v);w===void 0?(d=Vy(),b.set(v,d)):d=w}else{let b=d.p;b===null&&(d.p=b=new Map);const w=b.get(v);w===void 0?(d=Vy(),b.set(v,d)):d=w}}const f=d;let p;if(d.s===E4)p=d.v;else if(p=e.apply(null,arguments),s++,i){const g=a?.deref?.()??a;g!=null&&i(g,p)&&(p=g,s!==0&&s--),a=typeof p=="object"&&p!==null||typeof p=="function"?new TQ(p):p}return f.s=E4,f.v=p,p}return l.clearCache=()=>{n=Vy(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function kQ(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,i=(...a)=>{let s=0,l=0,d,h={},f=a.pop();typeof f=="object"&&(h=f,f=a.pop()),SQ(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const p={...n,...h},{memoize:g,memoizeOptions:j=[],argsMemoize:v=E8,argsMemoizeOptions:b=[]}=p,w=A4(j),S=A4(b),_=CQ(a),E=g(function(){return s++,f.apply(null,arguments)},...w),D=v(function(){l++;const K=AQ(_,arguments);return d=E.apply(null,K),d},...S);return Object.assign(D,{resultFunc:f,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>d,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:v})};return Object.assign(i,{withTypes:()=>i}),i}var He=kQ(E8),DQ=Object.assign((e,t=He)=>{NQ(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),i=n.map(s=>e[s]);return t(i,(...s)=>s.reduce((l,d,h)=>(l[n[h]]=d,l),{}))},{withTypes:()=>DQ}),x2={},b2={},j2={},T4;function OQ(){return T4||(T4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,a,s)=>{if(i!==a){const l=t(i),d=t(a);if(l===d&&l===0){if(i<a)return s==="desc"?1:-1;if(i>a)return s==="desc"?-1:1}return s==="desc"?d-l:l-d}return 0};e.compareValues=n})(j2)),j2}var w2={},S2={},P4;function T8(){return P4||(P4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(S2)),S2}var k4;function MQ(){return k4||(k4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T8(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=a})(w2)),w2}var D4;function LQ(){return D4||(D4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OQ(),n=MQ(),i=uS();function a(s,l,d,h){if(s==null)return[];d=h?void 0:d,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(v=>String(v));const f=(v,b)=>{let w=v;for(let S=0;S<b.length&&w!=null;++S)w=w[b[S]];return w},p=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:f(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?f(b,v):typeof b=="object"?b[v]:b,g=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:i.toPath(v)}));return s.map(v=>({original:v,criteria:g.map(b=>p(b,v))})).slice().sort((v,b)=>{for(let w=0;w<g.length;w++){const S=t.compareValues(v.criteria[w],b.criteria[w],d[w]);if(S!==0)return S}return 0}).map(v=>v.original)}e.orderBy=a})(b2)),b2}var N2={},O4;function RQ(){return O4||(O4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i=1){const a=[],s=Math.floor(i),l=(d,h)=>{for(let f=0;f<d.length;f++){const p=d[f];Array.isArray(p)&&h<s?l(p,h+1):a.push(p)}};return l(n,0),a}e.flatten=t})(N2)),N2}var _2={},M4;function P8(){return M4||(M4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A8(),n=fS(),i=j8(),a=S8();function s(l,d,h){return i.isObject(h)&&(typeof d=="number"&&n.isArrayLike(h)&&t.isIndex(d)&&d<h.length||typeof d=="string"&&d in h)?a.isEqualsSameValueZero(h[d],l):!1}e.isIterateeCall=s})(_2)),_2}var L4;function IQ(){return L4||(L4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LQ(),n=RQ(),i=P8();function a(s,...l){const d=l.length;return d>1&&i.isIterateeCall(s,l[0],l[1])?l=[]:d>2&&i.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=a})(x2)),x2}var C2,R4;function zQ(){return R4||(R4=1,C2=IQ().sortBy),C2}var BQ=zQ();const ux=Zl(BQ);var k8=e=>e.legend.settings,FQ=e=>e.legend.size,qQ=e=>e.legend.payload;He([qQ,k8],(e,t)=>{var{itemSorter:n}=t,i=e.flat(1);return n?ux(i,n):i});var Ky=1;function UQ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=P.useState({height:0,left:0,top:0,width:0}),i=P.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Ky||Math.abs(l.left-t.left)>Ky||Math.abs(l.top-t.top)>Ky||Math.abs(l.width-t.width)>Ky)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,i]}function ms(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var HQ=typeof Symbol=="function"&&Symbol.observable||"@@observable",I4=HQ,A2=()=>Math.random().toString(36).substring(7).split("").join("."),WQ={INIT:`@@redux/INIT${A2()}`,REPLACE:`@@redux/REPLACE${A2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${A2()}`},i0=WQ;function gS(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function D8(e,t,n){if(typeof e!="function")throw new Error(ms(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ms(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ms(1));return n(D8)(e,t)}let i=e,a=t,s=new Map,l=s,d=0,h=!1;function f(){l===s&&(l=new Map,s.forEach((S,_)=>{l.set(_,S)}))}function p(){if(h)throw new Error(ms(3));return a}function g(S){if(typeof S!="function")throw new Error(ms(4));if(h)throw new Error(ms(5));let _=!0;f();const E=d++;return l.set(E,S),function(){if(_){if(h)throw new Error(ms(6));_=!1,f(),l.delete(E),s=null}}}function j(S){if(!gS(S))throw new Error(ms(7));if(typeof S.type>"u")throw new Error(ms(8));if(typeof S.type!="string")throw new Error(ms(17));if(h)throw new Error(ms(9));try{h=!0,a=i(a,S)}finally{h=!1}return(s=l).forEach(E=>{E()}),S}function v(S){if(typeof S!="function")throw new Error(ms(10));i=S,j({type:i0.REPLACE})}function b(){const S=g;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(ms(11));function E(){const W=_;W.next&&W.next(p())}return E(),{unsubscribe:S(E)}},[I4](){return this}}}return j({type:i0.INIT}),{dispatch:j,subscribe:g,getState:p,replaceReducer:v,[I4]:b}}function $Q(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:i0.INIT})>"u")throw new Error(ms(12));if(typeof n(void 0,{type:i0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ms(13))})}function O8(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const i=Object.keys(n);let a;try{$Q(n)}catch(s){a=s}return function(l={},d){if(a)throw a;let h=!1;const f={};for(let p=0;p<i.length;p++){const g=i[p],j=n[g],v=l[g],b=j(v,d);if(typeof b>"u")throw d&&d.type,new Error(ms(14));f[g]=b,h=h||b!==v}return h=h||i.length!==Object.keys(l).length,h?f:l}}function a0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function VQ(...e){return t=>(n,i)=>{const a=t(n,i);let s=()=>{throw new Error(ms(15))};const l={getState:a.getState,dispatch:(h,...f)=>s(h,...f)},d=e.map(h=>h(l));return s=a0(...d)(a.dispatch),{...a,dispatch:s}}}function M8(e){return gS(e)&&"type"in e&&typeof e.type=="string"}var L8=Symbol.for("immer-nothing"),z4=Symbol.for("immer-draftable"),uo=Symbol.for("immer-state");function yc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ml=Object,bm=ml.getPrototypeOf,s0="constructor",hx="prototype",P5="configurable",o0="enumerable",Ov="writable",ng="value",au=e=>!!e&&!!e[uo];function _c(e){return e?R8(e)||mx(e)||!!e[z4]||!!e[s0]?.[z4]||px(e)||gx(e):!1}var KQ=ml[hx][s0].toString(),B4=new WeakMap;function R8(e){if(!e||!yS(e))return!1;const t=bm(e);if(t===null||t===ml[hx])return!0;const n=ml.hasOwnProperty.call(t,s0)&&t[s0];if(n===Object)return!0;if(!Jf(n))return!1;let i=B4.get(n);return i===void 0&&(i=Function.toString.call(n),B4.set(n,i)),i===KQ}function fx(e,t,n=!0){kg(e)===0?(n?Reflect.ownKeys(e):ml.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((i,a)=>t(a,i,e))}function kg(e){const t=e[uo];return t?t.type_:mx(e)?1:px(e)?2:gx(e)?3:0}var F4=(e,t,n=kg(e))=>n===2?e.has(t):ml[hx].hasOwnProperty.call(e,t),k5=(e,t,n=kg(e))=>n===2?e.get(t):e[t],l0=(e,t,n,i=kg(e))=>{i===2?e.set(t,n):i===3?e.add(n):e[t]=n};function GQ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var mx=Array.isArray,px=e=>e instanceof Map,gx=e=>e instanceof Set,yS=e=>typeof e=="object",Jf=e=>typeof e=="function",E2=e=>typeof e=="boolean";function QQ(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var $d=e=>e.copy_||e.base_,vS=e=>e.modified_?e.copy_:e.base_;function D5(e,t){if(px(e))return new Map(e);if(gx(e))return new Set(e);if(mx(e))return Array[hx].slice.call(e);const n=R8(e);if(t===!0||t==="class_only"&&!n){const i=ml.getOwnPropertyDescriptors(e);delete i[uo];let a=Reflect.ownKeys(i);for(let s=0;s<a.length;s++){const l=a[s],d=i[l];d[Ov]===!1&&(d[Ov]=!0,d[P5]=!0),(d.get||d.set)&&(i[l]={[P5]:!0,[Ov]:!0,[o0]:d[o0],[ng]:e[l]})}return ml.create(bm(e),i)}else{const i=bm(e);if(i!==null&&n)return{...e};const a=ml.create(i);return ml.assign(a,e)}}function xS(e,t=!1){return yx(e)||au(e)||!_c(e)||(kg(e)>1&&ml.defineProperties(e,{set:Gy,add:Gy,clear:Gy,delete:Gy}),ml.freeze(e),t&&fx(e,(n,i)=>{xS(i,!0)},!1)),e}function YQ(){yc(2)}var Gy={[ng]:YQ};function yx(e){return e===null||!yS(e)?!0:ml.isFrozen(e)}var c0="MapSet",O5="Patches",q4="ArrayMethods",I8={};function Gh(e){const t=I8[e];return t||yc(0,e),t}var U4=e=>!!I8[e],ig,z8=()=>ig,ZQ=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:U4(c0)?Gh(c0):void 0,arrayMethodsPlugin_:U4(q4)?Gh(q4):void 0});function H4(e,t){t&&(e.patchPlugin_=Gh(O5),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function M5(e){L5(e),e.drafts_.forEach(XQ),e.drafts_=null}function L5(e){e===ig&&(ig=e.parent_)}var W4=e=>ig=ZQ(ig,e);function XQ(e){const t=e[uo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[uo].modified_&&(M5(t),yc(4)),_c(e)&&(e=V4(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[uo].base_,e,t)}else e=V4(t,n);return JQ(t,e,!0),M5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==L8?e:void 0}function V4(e,t){if(yx(t))return t;const n=t[uo];if(!n)return d0(t,e.handledSet_,e);if(!vx(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(e);q8(n,e)}return n.copy_}function JQ(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xS(t,n)}function B8(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var vx=(e,t)=>e.scope_===t,eY=[];function F8(e,t,n,i){const a=$d(e),s=e.type_;if(i!==void 0&&k5(a,i,s)===t){l0(a,i,n,s);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;fx(a,(h,f)=>{if(au(f)){const p=d.get(f)||[];p.push(h),d.set(f,p)}})}const l=e.draftLocations_.get(t)??eY;for(const d of l)l0(a,d,n,s)}function tY(e,t,n){e.callbacks_.push(function(a){const s=t;if(!s||!vx(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const l=vS(s);F8(e,s.draft_??s,l,n),q8(s,a)})}function q8(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}B8(e)}}function rY(e,t,n){const{scope_:i}=e;if(au(n)){const a=n[uo];vx(a,i)&&a.callbacks_.push(function(){Mv(e);const l=vS(a);F8(e,n,l,t)})}else _c(n)&&e.callbacks_.push(function(){const s=$d(e);e.type_===3?s.has(n)&&d0(n,i.handledSet_,i):k5(s,t,e.type_)===n&&i.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&d0(k5(e.copy_,t,e.type_),i.handledSet_,i)})}function d0(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||au(e)||t.has(e)||!_c(e)||yx(e)||(t.add(e),fx(e,(i,a)=>{if(au(a)){const s=a[uo];if(vx(s,n)){const l=vS(s);l0(e,i,l,e.type_),B8(s)}}else _c(a)&&d0(a,t,n)})),e}function nY(e,t){const n=mx(e),i={type_:n?1:0,scope_:t?t.scope_:z8(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,s=u0;n&&(a=[i],s=ag);const{revoke:l,proxy:d}=Proxy.revocable(a,s);return i.draft_=d,i.revoke_=l,[d,i]}var u0={get(e,t){if(t===uo)return e;let n=e.scope_.arrayMethodsPlugin_;const i=e.type_===1&&typeof t=="string";if(i&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const a=$d(e);if(!F4(a,t,e.type_))return iY(e,a,t);const s=a[t];if(e.finalized_||!_c(s)||i&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&QQ(t))return s;if(s===T2(e.base_,t)){Mv(e);const l=e.type_===1?+t:t,d=I5(e.scope_,s,e,l);return e.copy_[l]=d}return s},has(e,t){return t in $d(e)},ownKeys(e){return Reflect.ownKeys($d(e))},set(e,t,n){const i=U8($d(e),t);if(i?.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=T2($d(e),t),s=a?.[uo];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(GQ(n,a)&&(n!==void 0||F4(e.base_,t,e.type_)))return!0;Mv(e),R5(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),rY(e,t,n)),!0},deleteProperty(e,t){return Mv(e),T2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),R5(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$d(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{[Ov]:!0,[P5]:e.type_!==1||t!=="length",[o0]:i[o0],[ng]:n[t]}},defineProperty(){yc(11)},getPrototypeOf(e){return bm(e.base_)},setPrototypeOf(){yc(12)}},ag={};for(let e in u0){let t=u0[e];ag[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}ag.deleteProperty=function(e,t){return ag.set.call(this,e,t,void 0)};ag.set=function(e,t,n){return u0.set.call(this,e[0],t,n,e[0])};function T2(e,t){const n=e[uo];return(n?$d(n):e)[t]}function iY(e,t,n){const i=U8(t,n);return i?ng in i?i[ng]:i.get?.call(e.draft_):void 0}function U8(e,t){if(!(t in e))return;let n=bm(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=bm(n)}}function R5(e){e.modified_||(e.modified_=!0,e.parent_&&R5(e.parent_))}function Mv(e){e.copy_||(e.assigned_=new Map,e.copy_=D5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var aY=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,a)=>{if(Jf(n)&&!Jf(i)){const l=i;i=n;const d=this;return function(f=l,...p){return d.produce(f,g=>i.call(this,g,...p))}}Jf(i)||yc(6),a!==void 0&&!Jf(a)&&yc(7);let s;if(_c(n)){const l=W4(this),d=I5(l,n,void 0);let h=!0;try{s=i(d),h=!1}finally{h?M5(l):L5(l)}return H4(l,a),$4(s,l)}else if(!n||!yS(n)){if(s=i(n),s===void 0&&(s=n),s===L8&&(s=void 0),this.autoFreeze_&&xS(s,!0),a){const l=[],d=[];Gh(O5).generateReplacementPatches_(n,s,{patches_:l,inversePatches_:d}),a(l,d)}return s}else yc(1,n)},this.produceWithPatches=(n,i)=>{if(Jf(n))return(d,...h)=>this.produceWithPatches(d,f=>n(f,...h));let a,s;return[this.produce(n,i,(d,h)=>{a=d,s=h}),a,s]},E2(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),E2(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),E2(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){_c(t)||yc(8),au(t)&&(t=jc(t));const n=W4(this),i=I5(n,t,void 0);return i[uo].isManual_=!0,L5(n),i}finishDraft(t,n){const i=t&&t[uo];(!i||!i.isManual_)&&yc(9);const{scope_:a}=i;return H4(a,n),$4(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let i;for(i=n.length-1;i>=0;i--){const s=n[i];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}i>-1&&(n=n.slice(i+1));const a=Gh(O5).applyPatches_;return au(t)?a(t,n):this.produce(t,s=>a(s,n))}};function I5(e,t,n,i){const[a,s]=px(t)?Gh(c0).proxyMap_(t,n):gx(t)?Gh(c0).proxySet_(t,n):nY(t,n);return(n?.scope_??z8()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=i,n&&i!==void 0?tY(n,s,i):s.callbacks_.push(function(h){h.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:f}=h;s.modified_&&f&&f.generatePatches_(s,[],h)}),a}function jc(e){return au(e)||yc(10,e),H8(e)}function H8(e){if(!_c(e)||yx(e))return e;const t=e[uo];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=D5(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=D5(e,!0);return fx(n,(a,s)=>{l0(n,a,H8(s))},i),t&&(t.finalized_=!1),n}var sY=new aY,W8=sY.produce;function $8(e){return({dispatch:n,getState:i})=>a=>s=>typeof s=="function"?s(n,i,e):a(s)}var oY=$8(),lY=$8,cY=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?a0:a0.apply(null,arguments)};function Gl(e,t){function n(...i){if(t){let a=t(...i);if(!a)throw new Error(gl(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>M8(i)&&i.type===e,n}var V8=class Up extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Up.prototype)}static get[Symbol.species](){return Up}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Up(...t[0].concat(this)):new Up(...t.concat(this))}};function K4(e){return _c(e)?W8(e,()=>{}):e}function Qy(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function dY(e){return typeof e=="boolean"}var uY=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let l=new V8;return n&&(dY(n)?l.push(oY):l.push(lY(n.extraArgument))),l},K8="RTK_autoBatch",fi=()=>e=>({payload:e,meta:{[K8]:!0}}),G4=e=>t=>{setTimeout(t,e)},G8=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let a=!0,s=!1,l=!1;const d=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:G4(10):e.type==="callback"?e.queueNotification:G4(e.timeout),f=()=>{l=!1,s&&(s=!1,d.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const g=()=>a&&p(),j=i.subscribe(g);return d.add(p),()=>{j(),d.delete(p)}},dispatch(p){try{return a=!p?.meta?.[K8],s=!a,s&&(l||(l=!0,h(f))),i.dispatch(p)}finally{a=!0}}})},hY=e=>function(n){const{autoBatch:i=!0}=n??{};let a=new V8(e);return i&&a.push(G8(typeof i=="object"?i:void 0)),a};function fY(e){const t=uY(),{reducer:n=void 0,middleware:i,devTools:a=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(gS(n))d=O8(n);else throw new Error(gl(1));let h;typeof i=="function"?h=i(t):h=t();let f=a0;a&&(f=cY({trace:!1,...typeof a=="object"&&a}));const p=VQ(...h),g=hY(p);let j=typeof l=="function"?l(g):g();const v=f(...j);return D8(d,s,v)}function Q8(e){const t={},n=[];let i;const a={addCase(s,l){const d=typeof s=="string"?s:s.type;if(!d)throw new Error(gl(28));if(d in t)throw new Error(gl(29));return t[d]=l,a},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),a},addMatcher(s,l){return n.push({matcher:s,reducer:l}),a},addDefaultCase(s){return i=s,a}};return e(a),[t,n,i]}function mY(e){return typeof e=="function"}function pY(e,t){let[n,i,a]=Q8(t),s;if(mY(e))s=()=>K4(e());else{const d=K4(e);s=()=>d}function l(d=s(),h){let f=[n[h.type],...i.filter(({matcher:p})=>p(h)).map(({reducer:p})=>p)];return f.filter(p=>!!p).length===0&&(f=[a]),f.reduce((p,g)=>{if(g)if(au(p)){const v=g(p,h);return v===void 0?p:v}else{if(_c(p))return W8(p,j=>g(j,h));{const j=g(p,h);if(j===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return j}}return p},d)}return l.getInitialState=s,l}var gY="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",yY=(e=21)=>{let t="",n=e;for(;n--;)t+=gY[Math.random()*64|0];return t},vY=Symbol.for("rtk-slice-createasyncthunk");function xY(e,t){return`${e}/${t}`}function bY({creators:e}={}){const t=e?.asyncThunk?.[vY];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(gl(11));const l=(typeof i.reducers=="function"?i.reducers(wY()):i.reducers)||{},d=Object.keys(l),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(D,W){const K=typeof D=="string"?D:D.type;if(!K)throw new Error(gl(12));if(K in h.sliceCaseReducersByType)throw new Error(gl(13));return h.sliceCaseReducersByType[K]=W,f},addMatcher(D,W){return h.sliceMatchers.push({matcher:D,reducer:W}),f},exposeAction(D,W){return h.actionCreators[D]=W,f},exposeCaseReducer(D,W){return h.sliceCaseReducersByName[D]=W,f}};d.forEach(D=>{const W=l[D],K={reducerName:D,type:xY(a,D),createNotation:typeof i.reducers=="function"};NY(W)?CY(K,W,f,t):SY(K,W,f)});function p(){const[D={},W=[],K=void 0]=typeof i.extraReducers=="function"?Q8(i.extraReducers):[i.extraReducers],B={...D,...h.sliceCaseReducersByType};return pY(i.initialState,F=>{for(let H in B)F.addCase(H,B[H]);for(let H of h.sliceMatchers)F.addMatcher(H.matcher,H.reducer);for(let H of W)F.addMatcher(H.matcher,H.reducer);K&&F.addDefaultCase(K)})}const g=D=>D,j=new Map,v=new WeakMap;let b;function w(D,W){return b||(b=p()),b(D,W)}function S(){return b||(b=p()),b.getInitialState()}function _(D,W=!1){function K(F){let H=F[D];return typeof H>"u"&&W&&(H=Qy(v,K,S)),H}function B(F=g){const H=Qy(j,W,()=>new WeakMap);return Qy(H,F,()=>{const I={};for(const[R,Y]of Object.entries(i.selectors??{}))I[R]=jY(Y,F,()=>Qy(v,F,S),W);return I})}return{reducerPath:D,getSelectors:B,get selectors(){return B(K)},selectSlice:K}}const E={name:a,reducer:w,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:S,..._(s),injectInto(D,{reducerPath:W,...K}={}){const B=W??s;return D.inject({reducerPath:B,reducer:w},K),{...E,..._(B,!0)}}};return E}}function jY(e,t,n,i){function a(s,...l){let d=t(s);return typeof d>"u"&&i&&(d=n()),e(d,...l)}return a.unwrapped=e,a}var Uo=bY();function wY(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function SY({type:e,reducerName:t,createNotation:n},i,a){let s,l;if("reducer"in i){if(n&&!_Y(i))throw new Error(gl(17));s=i.reducer,l=i.prepare}else s=i;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Gl(e,l):Gl(e))}function NY(e){return e._reducerDefinitionType==="asyncThunk"}function _Y(e){return e._reducerDefinitionType==="reducerWithPrepare"}function CY({type:e,reducerName:t},n,i,a){if(!a)throw new Error(gl(18));const{payloadCreator:s,fulfilled:l,pending:d,rejected:h,settled:f,options:p}=n,g=a(e,s,p);i.exposeAction(t,g),l&&i.addCase(g.fulfilled,l),d&&i.addCase(g.pending,d),h&&i.addCase(g.rejected,h),f&&i.addMatcher(g.settled,f),i.exposeCaseReducer(t,{fulfilled:l||Yy,pending:d||Yy,rejected:h||Yy,settled:f||Yy})}function Yy(){}var AY="task",Y8="listener",Z8="completed",bS="cancelled",EY=`task-${bS}`,TY=`task-${Z8}`,z5=`${Y8}-${bS}`,PY=`${Y8}-${Z8}`,xx=class{constructor(e){this.code=e,this.message=`${AY} ${bS} (reason: ${e})`}name="TaskAbortError";message},jS=(e,t)=>{if(typeof e!="function")throw new TypeError(gl(32))},h0=()=>{},X8=(e,t=h0)=>(e.catch(t),e),J8=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),zh=e=>{if(e.aborted)throw new xx(e.reason)};function eM(e,t){let n=h0;return new Promise((i,a)=>{const s=()=>a(new xx(e.reason));if(e.aborted){s();return}n=J8(e,s),t.finally(()=>n()).then(i,a)}).finally(()=>{n=h0})}var kY=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof xx?"cancelled":"rejected",error:n}}finally{t?.()}},f0=e=>t=>X8(eM(e,t).then(n=>(zh(e),n))),tM=e=>{const t=f0(e);return n=>t(new Promise(i=>setTimeout(i,n)))},{assign:cm}=Object,Q4={},bx="listenerMiddleware",DY=(e,t)=>{const n=i=>J8(e,()=>i.abort(e.reason));return(i,a)=>{jS(i);const s=new AbortController;n(s);const l=kY(async()=>{zh(e),zh(s.signal);const d=await i({pause:f0(s.signal),delay:tM(s.signal),signal:s.signal});return zh(s.signal),d},()=>s.abort(TY));return a?.autoJoin&&t.push(l.catch(h0)),{result:f0(e)(l),cancel(){s.abort(EY)}}}},OY=(e,t)=>{const n=async(i,a)=>{zh(t);let s=()=>{};const d=[new Promise((h,f)=>{let p=e({predicate:i,effect:(g,j)=>{j.unsubscribe(),h([g,j.getState(),j.getOriginalState()])}});s=()=>{p(),f()}})];a!=null&&d.push(new Promise(h=>setTimeout(h,a,null)));try{const h=await eM(t,Promise.race(d));return zh(t),h}finally{s()}};return(i,a)=>X8(n(i,a))},rM=e=>{let{type:t,actionCreator:n,matcher:i,predicate:a,effect:s}=e;if(t)a=Gl(t).match;else if(n)t=n.type,a=n.match;else if(i)a=i;else if(!a)throw new Error(gl(21));return jS(s),{predicate:a,type:t,effect:s}},nM=cm(e=>{const{type:t,predicate:n,effect:i}=rM(e);return{id:yY(),effect:i,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(gl(22))}}},{withTypes:()=>nM}),Y4=(e,t)=>{const{type:n,effect:i,predicate:a}=rM(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===a)&&s.effect===i)},B5=e=>{e.pending.forEach(t=>{t.abort(z5)})},MY=(e,t)=>()=>{for(const n of t.keys())B5(n);e.clear()},Z4=(e,t,n)=>{try{e(t,n)}catch(i){setTimeout(()=>{throw i},0)}},iM=cm(Gl(`${bx}/add`),{withTypes:()=>iM}),LY=Gl(`${bx}/removeAll`),aM=cm(Gl(`${bx}/remove`),{withTypes:()=>aM}),RY=(...e)=>{console.error(`${bx}/error`,...e)},Dg=(e={})=>{const t=new Map,n=new Map,i=v=>{const b=n.get(v)??0;n.set(v,b+1)},a=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:s,onError:l=RY}=e;jS(l);const d=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&B5(v)}),h=v=>{const b=Y4(t,v)??nM(v);return d(b)};cm(h,{withTypes:()=>h});const f=v=>{const b=Y4(t,v);return b&&(b.unsubscribe(),v.cancelActive&&B5(b)),!!b};cm(f,{withTypes:()=>f});const p=async(v,b,w,S)=>{const _=new AbortController,E=OY(h,_.signal),D=[];try{v.pending.add(_),i(v),await Promise.resolve(v.effect(b,cm({},w,{getOriginalState:S,condition:(W,K)=>E(W,K).then(Boolean),take:E,delay:tM(_.signal),pause:f0(_.signal),extra:s,signal:_.signal,fork:DY(_.signal,D),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((W,K,B)=>{W!==_&&(W.abort(z5),B.delete(W))})},cancel:()=>{_.abort(z5),v.pending.delete(_)},throwIfCancelled:()=>{zh(_.signal)}})))}catch(W){W instanceof xx||Z4(l,W,{raisedBy:"effect"})}finally{await Promise.all(D),_.abort(PY),a(v),v.pending.delete(_)}},g=MY(t,n);return{middleware:v=>b=>w=>{if(!M8(w))return b(w);if(iM.match(w))return h(w.payload);if(LY.match(w)){g();return}if(aM.match(w))return f(w.payload);let S=v.getState();const _=()=>{if(S===Q4)throw new Error(gl(23));return S};let E;try{if(E=b(w),t.size>0){const D=v.getState(),W=Array.from(t.values());for(const K of W){let B=!1;try{B=K.predicate(w,D,S)}catch(F){B=!1,Z4(l,F,{raisedBy:"predicate"})}B&&p(K,w,v,_)}}}finally{S=Q4}return E},startListening:h,stopListening:f,clearListeners:g}};function gl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var IY={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},sM=Uo({name:"chartLayout",initialState:IY,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,i,a,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(i=t.payload.right)!==null&&i!==void 0?i:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:zY,setLayout:BY,setChartSize:FY,setScale:qY}=sM.actions,UY=sM.reducer;function oM(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Ai(e){return Number.isFinite(e)}function vd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function X4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X4(Object(n),!0).forEach(function(i){HY(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function HY(e,t,n){return(t=WY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ni(e,t,n){return Ga(e)||Ga(t)?n:yd(t)?Kh(e,t,n):typeof t=="function"?t(e):n}var VY=(e,t,n)=>{if(t&&n){var{width:i,height:a}=n,{align:s,verticalAlign:l,layout:d}=t;if((d==="vertical"||d==="horizontal"&&l==="middle")&&s!=="center"&&Rt(e[s]))return nm(nm({},e),{},{[s]:e[s]+(i||0)});if((d==="horizontal"||d==="vertical"&&s==="center")&&l!=="middle"&&Rt(e[l]))return nm(nm({},e),{},{[l]:e[l]+(a||0)})}return e},lf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",lM=(e,t,n,i)=>{if(i)return e.map(d=>d.coordinate);var a,s,l=e.map(d=>(d.coordinate===t&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate));return a||l.push(t),s||l.push(n),l},cM=(e,t,n)=>{if(!e)return null;var{duplicateDomain:i,type:a,range:s,scale:l,realScaleType:d,isCategorical:h,categoricalDomain:f,tickCount:p,ticks:g,niceTicks:j,axisType:v}=e;if(!l)return null;var b=d==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=a==="category"&&l.bandwidth?l.bandwidth()/b:0;if(w=v==="angleAxis"&&s&&s.length>=2?Ka(s[0]-s[1])*2*w:w,g||j){var S=(g||j||[]).map((_,E)=>{var D=i?i.indexOf(_):_;return{coordinate:l(D)+w,value:_,offset:w,index:E}});return S.filter(_=>!Nc(_.coordinate))}return h&&f?f.map((_,E)=>({coordinate:l(_)+w,value:_,index:E,offset:w})):l.ticks&&p!=null?l.ticks(p).map((_,E)=>({coordinate:l(_)+w,value:_,offset:w,index:E})):l.domain().map((_,E)=>({coordinate:l(_)+w,value:i?i[_]:_,index:E,offset:w}))},J4=1e-4,KY=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,i=e.range(),a=Math.min(i[0],i[1])-J4,s=Math.max(i[0],i[1])+J4,l=e(t[0]),d=e(t[n-1]);(l<a||l>s||d<a||d>s)&&e.domain([t[0],t[n-1]])}},GY=(e,t)=>{if(!t||t.length!==2||!Rt(t[0])||!Rt(t[1]))return e;var n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Rt(e[0])||e[0]<n)&&(a[0]=n),(!Rt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},QY=e=>{var t,n=e.length;if(!(n<=0)){var i=(t=e[0])===null||t===void 0?void 0:t.length;if(!(i==null||i<=0))for(var a=0;a<i;++a)for(var s=0,l=0,d=0;d<n;++d){var h=e[d],f=h?.[a];if(f!=null){var p=f[1],g=f[0],j=Nc(p)?g:p;j>=0?(f[0]=s,f[1]=s+j,s=p):(f[0]=l,f[1]=l+j,l=p)}}}},YY=e=>{var t,n=e.length;if(!(n<=0)){var i=(t=e[0])===null||t===void 0?void 0:t.length;if(!(i==null||i<=0))for(var a=0;a<i;++a)for(var s=0,l=0;l<n;++l){var d=e[l],h=d?.[a];if(h!=null){var f=Nc(h[1])?h[0]:h[1];f>=0?(h[0]=s,h[1]=s+f,s=h[1]):(h[0]=0,h[1]=0)}}}},ZY={sign:QY,expand:jG,none:Vh,silhouette:wG,wiggle:SG,positive:YY},XY=(e,t,n)=>{var i,a=(i=ZY[n])!==null&&i!==void 0?i:Vh,s=bG().keys(t).value((d,h)=>Number(ni(d,h,0))).order(E5).offset(a),l=s(e);return l.forEach((d,h)=>{d.forEach((f,p)=>{var g=ni(e[p],t[h],0);Array.isArray(g)&&g.length===2&&Rt(g[0])&&Rt(g[1])&&(f[0]=g[0],f[1]=g[1])})}),l};function JY(e){return e==null?void 0:String(e)}var e3=e=>{var{axis:t,ticks:n,offset:i,bandSize:a,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+i:null;var d=ni(s,t.dataKey,t.scale.domain()[l]);return Ga(d)?null:t.scale(d)-a/2+i},eZ=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},tZ=e=>{var t=e.flat(2).filter(Rt);return[Math.min(...t),Math.max(...t)]},rZ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],nZ=(e,t,n)=>{if(e!=null)return rZ(Object.keys(e).reduce((i,a)=>{var s=e[a];if(!s)return i;var{stackedData:l}=s,d=l.reduce((h,f)=>{var p=oM(f,t,n),g=tZ(p);return!Ai(g[0])||!Ai(g[1])?h:[Math.min(h[0],g[0]),Math.max(h[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],i[0]),Math.max(d[1],i[1])]},[1/0,-1/0]))},t3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,r3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,m0=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&t&&t.length>=2){for(var a=ux(t,p=>p.coordinate),s=1/0,l=1,d=a.length;l<d;l++){var h=a[l],f=a[l-1];s=Math.min((h?.coordinate||0)-(f?.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function n3(e){var{tooltipEntrySettings:t,dataKey:n,payload:i,value:a,name:s}=e;return nm(nm({},t),{},{dataKey:n,payload:i,value:a,name:s})}function jx(e,t){if(e)return String(e);if(typeof t=="string")return t}var iZ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},aZ=(e,t)=>t==="centric"?e.angle:e.radius,fu=e=>e.layout.width,mu=e=>e.layout.height,sZ=e=>e.layout.scale,dM=e=>e.layout.margin,wx=He(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sx=He(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),uM="data-recharts-item-index",hM="data-recharts-item-id",Og=60;function i3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Zy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(n),!0).forEach(function(i){oZ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function oZ(e,t,n){return(t=lZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lZ(e){var t=cZ(e,"string");return typeof t=="symbol"?t:t+""}function cZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dZ=e=>e.brush.height;function uZ(e){var t=Sx(e);return t.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var a=typeof i.width=="number"?i.width:Og;return n+a}return n},0)}function hZ(e){var t=Sx(e);return t.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var a=typeof i.width=="number"?i.width:Og;return n+a}return n},0)}function fZ(e){var t=wx(e);return t.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function mZ(e){var t=wx(e);return t.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var ka=He([fu,mu,dM,dZ,uZ,hZ,fZ,mZ,k8,FQ],(e,t,n,i,a,s,l,d,h,f)=>{var p={left:(n.left||0)+a,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+d},j=Zy(Zy({},g),p),v=j.bottom;j.bottom+=i,j=VY(j,h,f);var b=e-j.left-j.right,w=t-j.top-j.bottom;return Zy(Zy({brushBottom:v},j),{},{width:Math.max(b,0),height:Math.max(w,0)})}),pZ=He(ka,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),wS=He(fu,mu,(e,t)=>({x:0,y:0,width:e,height:t})),gZ=P.createContext(null),Ho=()=>P.useContext(gZ)!=null,Nx=e=>e.brush,_x=He([Nx,ka,dM],(e,t,n)=>({height:e.height,x:Rt(e.x)?e.x:t.left,y:Rt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Rt(e.width)?e.width:t.width})),P2={},k2={},D2={},a3;function yZ(){return a3||(a3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,i,{signal:a,edges:s}={}){let l,d=null;const h=s!=null&&s.includes("leading"),f=s==null||s.includes("trailing"),p=()=>{d!==null&&(n.apply(l,d),l=void 0,d=null)},g=()=>{f&&p(),w()};let j=null;const v=()=>{j!=null&&clearTimeout(j),j=setTimeout(()=>{j=null,g()},i)},b=()=>{j!==null&&(clearTimeout(j),j=null)},w=()=>{b(),l=void 0,d=null},S=()=>{p()},_=function(...E){if(a?.aborted)return;l=this,d=E;const D=j==null;v(),h&&D&&p()};return _.schedule=v,_.cancel=w,_.flush=S,a?.addEventListener("abort",w,{once:!0}),_}e.debounce=t})(D2)),D2}var s3;function vZ(){return s3||(s3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yZ();function n(i,a=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:d=!0,maxWait:h}=s,f=Array(2);l&&(f[0]="leading"),d&&(f[1]="trailing");let p,g=null;const j=t.debounce(function(...w){p=i.apply(this,w),g=null},a,{edges:f}),v=function(...w){return h!=null&&(g===null&&(g=Date.now()),Date.now()-g>=h)?(p=i.apply(this,w),g=Date.now(),j.cancel(),j.schedule(),p):(j.apply(this,w),p)},b=()=>(j.flush(),p);return v.cancel=j.cancel,v.flush=b,v}e.debounce=n})(k2)),k2}var o3;function xZ(){return o3||(o3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vZ();function n(i,a=0,s={}){const{leading:l=!0,trailing:d=!0}=s;return t.debounce(i,a,{leading:l,maxWait:a,trailing:d})}e.throttle=n})(P2)),P2}var O2,l3;function bZ(){return l3||(l3=1,O2=xZ().throttle),O2}var jZ=bZ();const wZ=Zl(jZ);var p0=function(t,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>a[l++]))}},fM=(e,t,n)=>{var{width:i="100%",height:a="100%",aspect:s,maxHeight:l}=n,d=iu(i)?e:Number(i),h=iu(a)?t:Number(a);return s&&s>0&&(d?h=d/s:h&&(d=h*s),l&&h!=null&&h>l&&(h=l)),{calculatedWidth:d,calculatedHeight:h}},SZ={width:0,height:0,overflow:"visible"},NZ={width:0,overflowX:"visible"},_Z={height:0,overflowY:"visible"},CZ={},AZ=e=>{var{width:t,height:n}=e,i=iu(t),a=iu(n);return i&&a?SZ:i?NZ:a?_Z:CZ};function EZ(e){var{width:t,height:n,aspect:i}=e,a=t,s=n;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:a,height:s}}function F5(){return F5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},F5.apply(null,arguments)}function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function d3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(i){TZ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function TZ(e,t,n){return(t=PZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PZ(e){var t=kZ(e,"string");return typeof t=="symbol"?t:t+""}function kZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mM=P.createContext({width:-1,height:-1});function DZ(e){return vd(e.width)&&vd(e.height)}function pM(e){var{children:t,width:n,height:i}=e,a=P.useMemo(()=>({width:n,height:i}),[n,i]);return DZ(a)?P.createElement(mM.Provider,{value:a},t):null}var SS=()=>P.useContext(mM),OZ=P.forwardRef((e,t)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:a,height:s,minWidth:l=0,minHeight:d,maxHeight:h,children:f,debounce:p=0,id:g,className:j,onResize:v,style:b={}}=e,w=P.useRef(null),S=P.useRef();S.current=v,P.useImperativeHandle(t,()=>w.current);var[_,E]=P.useState({containerWidth:i.width,containerHeight:i.height}),D=P.useCallback((H,I)=>{E(R=>{var Y=Math.round(H),G=Math.round(I);return R.containerWidth===Y&&R.containerHeight===G?R:{containerWidth:Y,containerHeight:G}})},[]);P.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Pg;var H=G=>{var ae,{width:se,height:Ne}=G[0].contentRect;D(se,Ne),(ae=S.current)===null||ae===void 0||ae.call(S,se,Ne)};p>0&&(H=wZ(H,p,{trailing:!0,leading:!1}));var I=new ResizeObserver(H),{width:R,height:Y}=w.current.getBoundingClientRect();return D(R,Y),I.observe(w.current),()=>{I.disconnect()}},[D,p]);var{containerWidth:W,containerHeight:K}=_;p0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:B,calculatedHeight:F}=fM(W,K,{width:a,height:s,aspect:n,maxHeight:h});return p0(B!=null&&B>0||F!=null&&F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,F,a,s,l,d,n),P.createElement("div",{id:g?"".concat(g):void 0,className:Dn("recharts-responsive-container",j),style:d3(d3({},b),{},{width:a,height:s,minWidth:l,minHeight:d,maxHeight:h}),ref:w},P.createElement("div",{style:AZ({width:a,height:s})},P.createElement(pM,{width:B,height:F},f)))}),u3=P.forwardRef((e,t)=>{var n=SS();if(vd(n.width)&&vd(n.height))return e.children;var{width:i,height:a}=EZ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:l}=fM(void 0,void 0,{width:i,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Rt(s)&&Rt(l)?P.createElement(pM,{width:s,height:l},e.children):P.createElement(OZ,F5({},e,{width:i,height:a,ref:t}))});function gM(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Cx=()=>{var e,t=Ho(),n=Ft(pZ),i=Ft(_x),a=(e=Ft(Nx))===null||e===void 0?void 0:e.padding;return!t||!i||!a?n:{width:i.width-a.left-a.right,height:i.height-a.top-a.bottom,x:a.left,y:a.top}},MZ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yM=()=>{var e;return(e=Ft(ka))!==null&&e!==void 0?e:MZ},vM=()=>Ft(fu),xM=()=>Ft(mu),ln=e=>e.layout.layoutType,Mg=()=>Ft(ln),LZ=()=>{var e=Mg();return e!==void 0},Ax=e=>{var t=vi(),n=Ho(),{width:i,height:a}=e,s=SS(),l=i,d=a;return s&&(l=s.width>0?s.width:i,d=s.height>0?s.height:a),P.useEffect(()=>{!n&&vd(l)&&vd(d)&&t(FY({width:l,height:d}))},[t,n,l,d]),null},bM=Symbol.for("immer-nothing"),h3=Symbol.for("immer-draftable"),vl=Symbol.for("immer-state");function vc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sg=Object.getPrototypeOf;function jm(e){return!!e&&!!e[vl]}function Qh(e){return e?jM(e)||Array.isArray(e)||!!e[h3]||!!e.constructor?.[h3]||Lg(e)||Tx(e):!1}var RZ=Object.prototype.constructor.toString(),f3=new WeakMap;function jM(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=f3.get(n);return i===void 0&&(i=Function.toString.call(n),f3.set(n,i)),i===RZ}function g0(e,t,n=!0){Ex(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((i,a)=>t(a,i,e))}function Ex(e){const t=e[vl];return t?t.type_:Array.isArray(e)?1:Lg(e)?2:Tx(e)?3:0}function q5(e,t){return Ex(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wM(e,t,n){const i=Ex(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function IZ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Lg(e){return e instanceof Map}function Tx(e){return e instanceof Set}function wh(e){return e.copy_||e.base_}function U5(e,t){if(Lg(e))return new Map(e);if(Tx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=jM(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[vl];let a=Reflect.ownKeys(i);for(let s=0;s<a.length;s++){const l=a[s],d=i[l];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[l]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[l]})}return Object.create(sg(e),i)}else{const i=sg(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function NS(e,t=!1){return Px(e)||jm(e)||!Qh(e)||(Ex(e)>1&&Object.defineProperties(e,{set:Xy,add:Xy,clear:Xy,delete:Xy}),Object.freeze(e),t&&Object.values(e).forEach(n=>NS(n,!0))),e}function zZ(){vc(2)}var Xy={value:zZ};function Px(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var BZ={};function Yh(e){const t=BZ[e];return t||vc(0,e),t}var og;function SM(){return og}function FZ(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function m3(e,t){t&&(Yh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function H5(e){W5(e),e.drafts_.forEach(qZ),e.drafts_=null}function W5(e){e===og&&(og=e.parent_)}function p3(e){return og=FZ(og,e)}function qZ(e){const t=e[vl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function g3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[vl].modified_&&(H5(t),vc(4)),Qh(e)&&(e=y0(t,e),t.parent_||v0(t,e)),t.patches_&&Yh("Patches").generateReplacementPatches_(n[vl].base_,e,t.patches_,t.inversePatches_)):e=y0(t,n,[]),H5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bM?e:void 0}function y0(e,t,n){if(Px(t))return t;const i=e.immer_.shouldUseStrictIteration(),a=t[vl];if(!a)return g0(t,(s,l)=>y3(e,a,t,s,l,n),i),t;if(a.scope_!==e)return t;if(!a.modified_)return v0(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let l=s,d=!1;a.type_===3&&(l=new Set(s),s.clear(),d=!0),g0(l,(h,f)=>y3(e,a,s,h,f,n,d),i),v0(e,s,!1),n&&e.patches_&&Yh("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function y3(e,t,n,i,a,s,l){if(a==null||typeof a!="object"&&!l)return;const d=Px(a);if(!(d&&!l)){if(jm(a)){const h=s&&t&&t.type_!==3&&!q5(t.assigned_,i)?s.concat(i):void 0,f=y0(e,a,h);if(wM(n,i,f),jm(f))e.canAutoFreeze_=!1;else return}else l&&n.add(a);if(Qh(a)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[i]===a&&d)return;y0(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&(Lg(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&v0(e,a)}}}function v0(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&NS(t,n)}function UZ(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:SM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,s=_S;n&&(a=[i],s=lg);const{revoke:l,proxy:d}=Proxy.revocable(a,s);return i.draft_=d,i.revoke_=l,d}var _S={get(e,t){if(t===vl)return e;const n=wh(e);if(!q5(n,t))return HZ(e,n,t);const i=n[t];return e.finalized_||!Qh(i)?i:i===M2(e.base_,t)?(L2(e),e.copy_[t]=V5(i,e)):i},has(e,t){return t in wh(e)},ownKeys(e){return Reflect.ownKeys(wh(e))},set(e,t,n){const i=NM(wh(e),t);if(i?.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=M2(wh(e),t),s=a?.[vl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(IZ(n,a)&&(n!==void 0||q5(e.base_,t)))return!0;L2(e),$5(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return M2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,L2(e),$5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=wh(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){vc(11)},getPrototypeOf(e){return sg(e.base_)},setPrototypeOf(){vc(12)}},lg={};g0(_S,(e,t)=>{lg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});lg.deleteProperty=function(e,t){return lg.set.call(this,e,t,void 0)};lg.set=function(e,t,n){return _S.set.call(this,e[0],t,n,e[0])};function M2(e,t){const n=e[vl];return(n?wh(n):e)[t]}function HZ(e,t,n){const i=NM(t,n);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function NM(e,t){if(!(t in e))return;let n=sg(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=sg(n)}}function $5(e){e.modified_||(e.modified_=!0,e.parent_&&$5(e.parent_))}function L2(e){e.copy_||(e.copy_=U5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var WZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(h=s,...f){return l.produce(h,p=>n.call(this,p,...f))}}typeof n!="function"&&vc(6),i!==void 0&&typeof i!="function"&&vc(7);let a;if(Qh(t)){const s=p3(this),l=V5(t,void 0);let d=!0;try{a=n(l),d=!1}finally{d?H5(s):W5(s)}return m3(s,i),g3(a,s)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===bM&&(a=void 0),this.autoFreeze_&&NS(a,!0),i){const s=[],l=[];Yh("Patches").generateReplacementPatches_(t,a,s,l),i(s,l)}return a}else vc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...d)=>this.produceWithPatches(l,h=>t(h,...d));let i,a;return[this.produce(t,n,(l,d)=>{i=l,a=d}),i,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Qh(e)||vc(8),jm(e)&&(e=$Z(e));const t=p3(this),n=V5(e,void 0);return n[vl].isManual_=!0,W5(t),n}finishDraft(e,t){const n=e&&e[vl];(!n||!n.isManual_)&&vc(9);const{scope_:i}=n;return m3(i,t),g3(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=Yh("Patches").applyPatches_;return jm(e)?i(e,t):this.produce(e,a=>i(a,t))}};function V5(e,t){const n=Lg(e)?Yh("MapSet").proxyMap_(e,t):Tx(e)?Yh("MapSet").proxySet_(e,t):UZ(e,t);return(t?t.scope_:SM()).drafts_.push(n),n}function $Z(e){return jm(e)||vc(10,e),_M(e)}function _M(e){if(!Qh(e)||Px(e))return e;const t=e[vl];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=U5(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=U5(e,!0);return g0(n,(a,s)=>{wM(n,a,_M(s))},i),t&&(t.finalized_=!1),n}var VZ=new WZ;VZ.produce;var KZ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CM=Uo({name:"legend",initialState:KZ,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:fi()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:i}=t.payload,a=jc(e).payload.indexOf(n);a>-1&&(e.payload[a]=i)},prepare:fi()},removeLegendPayload:{reducer(e,t){var n=jc(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:fi()}}}),{setLegendSize:Hge,setLegendSettings:Wge,addLegendPayload:AM,replaceLegendPayload:EM,removeLegendPayload:TM}=CM.actions,GZ=CM.reducer;function K5(){return K5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},K5.apply(null,arguments)}function v3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function R2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(n),!0).forEach(function(i){QZ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function QZ(e,t,n){return(t=YZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YZ(e){var t=ZZ(e,"string");return typeof t=="symbol"?t:t+""}function ZZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XZ(e){return Array.isArray(e)&&yd(e[0])&&yd(e[1])?e.join(" ~ "):e}var JZ=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:i={},labelStyle:a={},payload:s,formatter:l,itemSorter:d,wrapperClassName:h,labelClassName:f,label:p,labelFormatter:g,accessibilityLayer:j=!1}=e,v=()=>{if(s&&s.length){var K={padding:0,margin:0},B=(d?ux(s,d):s).map((F,H)=>{if(F.type==="none")return null;var I=F.formatter||l||XZ,{value:R,name:Y}=F,G=R,ae=Y;if(I){var se=I(R,Y,F,H,s);if(Array.isArray(se))[G,ae]=se;else if(se!=null)G=se;else return null}var Ne=R2({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},i);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:Ne},yd(ae)?P.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,yd(ae)?P.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,P.createElement("span",{className:"recharts-tooltip-item-value"},G),P.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:K},B)}return null},b=R2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=R2({margin:0},a),S=!Ga(p),_=S?p:"",E=Dn("recharts-default-tooltip",h),D=Dn("recharts-tooltip-label",f);S&&g&&s!==void 0&&s!==null&&(_=g(p,s));var W=j?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",K5({className:E,style:b},W),P.createElement("p",{className:D,style:w},P.isValidElement(_)?_:"".concat(_)),v())},Ap="recharts-tooltip-wrapper",eX={visibility:"hidden"};function tX(e){var{coordinate:t,translateX:n,translateY:i}=e;return Dn(Ap,{["".concat(Ap,"-right")]:Rt(n)&&t&&Rt(t.x)&&n>=t.x,["".concat(Ap,"-left")]:Rt(n)&&t&&Rt(t.x)&&n<t.x,["".concat(Ap,"-bottom")]:Rt(i)&&t&&Rt(t.y)&&i>=t.y,["".concat(Ap,"-top")]:Rt(i)&&t&&Rt(t.y)&&i<t.y})}function x3(e){var{allowEscapeViewBox:t,coordinate:n,key:i,offsetTopLeft:a,position:s,reverseDirection:l,tooltipDimension:d,viewBox:h,viewBoxDimension:f}=e;if(s&&Rt(s[i]))return s[i];var p=n[i]-d-(a>0?a:0),g=n[i]+a;if(t[i])return l[i]?p:g;var j=h[i];if(j==null)return 0;if(l[i]){var v=p,b=j;return v<b?Math.max(g,j):Math.max(p,j)}if(f==null)return 0;var w=g+d,S=j+f;return w>S?Math.max(p,j):Math.max(g,j)}function rX(e){var{translateX:t,translateY:n,useTranslate3d:i}=e;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function nX(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipBox:l,useTranslate3d:d,viewBox:h}=e,f,p,g;return l.height>0&&l.width>0&&n?(p=x3({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:h,viewBoxDimension:h.width}),g=x3({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:h,viewBoxDimension:h.height}),f=rX({translateX:p,translateY:g,useTranslate3d:d})):f=eX,{cssProperties:f,cssClasses:tX({translateX:p,translateY:g,coordinate:n})}}function b3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Jy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b3(Object(n),!0).forEach(function(i){G5(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function G5(e,t,n){return(t=iX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iX(e){var t=aX(e,"string");return typeof t=="symbol"?t:t+""}function aX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sX extends P.PureComponent{constructor(){super(...arguments),G5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),G5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,i,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,children:s,coordinate:l,hasPayload:d,isAnimationActive:h,offset:f,position:p,reverseDirection:g,useTranslate3d:j,viewBox:v,wrapperStyle:b,lastBoundingBox:w,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:D}=nX({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:p,reverseDirection:g,tooltipBox:{height:w.height,width:w.width},useTranslate3d:j,viewBox:v}),W=_?{}:Jy(Jy({transition:h&&t?"transform ".concat(i,"ms ").concat(a):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),K=Jy(Jy({},W),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},b);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:K,ref:S},s)}}var PM=()=>{var e;return(e=Ft(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Q5(){return Q5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Q5.apply(null,arguments)}function j3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function w3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(n),!0).forEach(function(i){oX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function oX(e,t,n){return(t=lX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S3={curveBasisClosed:cG,curveBasisOpen:dG,curveBasis:lG,curveBumpX:GK,curveBumpY:QK,curveLinearClosed:uG,curveLinear:lx,curveMonotoneX:hG,curveMonotoneY:fG,curveNatural:mG,curveStep:pG,curveStepAfter:yG,curveStepBefore:gG},x0=e=>Ai(e.x)&&Ai(e.y),N3=e=>e.base!=null&&x0(e.base)&&x0(e),Ep=e=>e.x,Tp=e=>e.y,dX=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Tg(e));return(n==="curveMonotone"||n==="curveBump")&&t?S3["".concat(n).concat(t==="vertical"?"Y":"X")]:S3[n]||lx},uX=e=>{var{type:t="linear",points:n=[],baseLine:i,layout:a,connectNulls:s=!1}=e,l=dX(t,a),d=s?n.filter(x0):n,h;if(Array.isArray(i)){var f=n.map((v,b)=>w3(w3({},v),{},{base:i[b]}));a==="vertical"?h=$y().y(Tp).x1(Ep).x0(v=>v.base.x):h=$y().x(Ep).y1(Tp).y0(v=>v.base.y);var p=h.defined(N3).curve(l),g=s?f.filter(N3):f;return p(g)}a==="vertical"&&Rt(i)?h=$y().y(Tp).x1(Ep).x0(i):Rt(i)?h=$y().x(Ep).y1(Tp).y0(i):h=i8().x(Ep).y(Tp);var j=h.defined(x0).curve(l);return j(d)},CS=e=>{var{className:t,points:n,path:i,pathRef:a}=e,s=Mg();if((!n||!n.length)&&!i)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},d=n&&n.length?uX(l):i;return P.createElement("path",Q5({},Sc(e),UG(e),{className:Dn("recharts-curve",t),d:d===null?void 0:d,ref:a}))},hX=["x","y","top","left","width","height","className"];function Y5(){return Y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Y5.apply(null,arguments)}function _3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function fX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(n),!0).forEach(function(i){mX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function mX(e,t,n){return(t=pX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pX(e){var t=gX(e,"string");return typeof t=="symbol"?t:t+""}function gX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yX(e,t){if(e==null)return{};var n,i,a=vX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function vX(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var xX=(e,t,n,i,a,s)=>"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(t,"h").concat(n),bX=e=>{var{x:t=0,y:n=0,top:i=0,left:a=0,width:s=0,height:l=0,className:d}=e,h=yX(e,hX),f=fX({x:t,y:n,top:i,left:a,width:s,height:l},h);return!Rt(t)||!Rt(n)||!Rt(s)||!Rt(l)||!Rt(i)||!Rt(a)?null:P.createElement("path",Y5({},Kl(f),{className:Dn("recharts-cross",d),d:xX(t,n,s,l,i,a)}))};function jX(e,t,n,i){var a=i/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?i:n.width-1,height:e==="horizontal"?n.height-1:i}}function C3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function A3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(n),!0).forEach(function(i){wX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function wX(e,t,n){return(t=SX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SX(e){var t=NX(e,"string");return typeof t=="symbol"?t:t+""}function NX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _X=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),kM=(e,t,n)=>e.map(i=>"".concat(_X(i)," ").concat(t,"ms ").concat(n)).join(","),CX=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,i)=>n.filter(a=>i.includes(a))),cg=(e,t)=>Object.keys(t).reduce((n,i)=>A3(A3({},n),{},{[i]:e(i,t[i])}),{});function E3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(n),!0).forEach(function(i){AX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function AX(e,t,n){return(t=EX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EX(e){var t=TX(e,"string");return typeof t=="symbol"?t:t+""}function TX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b0=(e,t,n)=>e+(t-e)*n,Z5=e=>{var{from:t,to:n}=e;return t!==n},DM=(e,t,n)=>{var i=cg((a,s)=>{if(Z5(s)){var[l,d]=e(s.from,s.to,s.velocity);return Ea(Ea({},s),{},{from:l,velocity:d})}return s},t);return n<1?cg((a,s)=>Z5(s)&&i[a]!=null?Ea(Ea({},s),{},{velocity:b0(s.velocity,i[a].velocity,n),from:b0(s.from,i[a].from,n)}):s,t):DM(e,i,n-1)};function PX(e,t,n,i,a,s){var l,d=i.reduce((j,v)=>Ea(Ea({},j),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),h=()=>cg((j,v)=>v.from,d),f=()=>!Object.values(d).filter(Z5).length,p=null,g=j=>{l||(l=j);var v=j-l,b=v/n.dt;d=DM(n,d,b),a(Ea(Ea(Ea({},e),t),h())),l=j,f()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var j;(j=p)===null||j===void 0||j()})}function kX(e,t,n,i,a,s,l){var d=null,h=a.reduce((g,j)=>{var v=e[j],b=t[j];return v==null||b==null?g:Ea(Ea({},g),{},{[j]:[v,b]})},{}),f,p=g=>{f||(f=g);var j=(g-f)/i,v=cg((w,S)=>b0(...S,n(j)),h);if(s(Ea(Ea(Ea({},e),t),v)),j<1)d=l.setTimeout(p);else{var b=cg((w,S)=>b0(...S,n(1)),h);s(Ea(Ea(Ea({},e),t),b))}};return()=>(d=l.setTimeout(p),()=>{var g;(g=d)===null||g===void 0||g()})}const DX=(e,t,n,i,a,s)=>{var l=CX(e,t);return n==null?()=>(a(Ea(Ea({},e),t)),()=>{}):n.isStepper===!0?PX(e,t,n,l,a,s):kX(e,t,n,i,l,a,s)};var j0=1e-4,OM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],MM=(e,t)=>e.map((n,i)=>n*t**i).reduce((n,i)=>n+i),T3=(e,t)=>n=>{var i=OM(e,t);return MM(i,n)},OX=(e,t)=>n=>{var i=OM(e,t),a=[...i.map((s,l)=>s*l).slice(1),0];return MM(a,n)},MX=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var i=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(i==null||i.length!==4)return null;var a=i.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},LX=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=MX(n[0]);if(a)return a}}return n.length===4?n:[0,0,1,1]},RX=(e,t,n,i)=>{var a=T3(e,n),s=T3(t,i),l=OX(e,n),d=f=>f>1?1:f<0?0:f,h=f=>{for(var p=f>1?1:f,g=p,j=0;j<8;++j){var v=a(g)-p,b=l(g);if(Math.abs(v-p)<j0||b<j0)return s(g);g=d(g-v/b)}return s(g)};return h.isStepper=!1,h},P3=function(){return RX(...LX(...arguments))},IX=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:a=17}=t,s=(l,d,h)=>{var f=-(l-d)*n,p=h*i,g=h+(f-p)*a/1e3,j=h*a/1e3+l;return Math.abs(j-d)<j0&&Math.abs(g)<j0?[d,0]:[j,g]};return s.isStepper=!0,s.dt=a,s},zX=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return P3(e);case"spring":return IX();default:if(e.split("(")[0]==="cubic-bezier")return P3(e)}return typeof e=="function"?e:null};function BX(e){var t,n=()=>null,i=!1,a=null,s=l=>{if(!i){if(Array.isArray(l)){if(!l.length)return;var d=l,[h,...f]=d;if(typeof h=="number"){a=e.setTimeout(s.bind(null,f),h);return}s(h),a=e.setTimeout(s.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{i=!0},start:l=>{i=!1,a&&(a(),a=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class FX{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),a=null,s=l=>{l-i>=n?t(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function qX(){return BX(new FX)}var UX=P.createContext(qX);function HX(e,t){var n=P.useContext(UX);return P.useMemo(()=>t??n(e),[e,t,n])}var WX=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),kx={isSsr:WX()},$X={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},k3={t:0},I2={t:1};function Dx(e){var t=Hs(e,$X),{isActive:n,canBegin:i,duration:a,easing:s,begin:l,onAnimationEnd:d,onAnimationStart:h,children:f}=t,p=n==="auto"?!kx.isSsr:n,g=HX(t.animationId,t.animationManager),[j,v]=P.useState(p?k3:I2),b=P.useRef(null);return P.useEffect(()=>{p||v(I2)},[p]),P.useEffect(()=>{if(!p||!i)return Pg;var w=DX(k3,I2,zX(s),a,v,g.getTimeoutController()),S=()=>{b.current=w()};return g.start([h,l,S,a,d]),()=>{g.stop(),b.current&&b.current(),d()}},[p,i,a,s,l,h,d,g]),f(j.t)}function Ox(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=P.useRef(rg(t)),i=P.useRef(e);return i.current!==e&&(n.current=rg(t),i.current=e),n.current}var VX=["radius"],KX=["radius"],D3,O3,M3,L3,R3,I3,z3,B3,F3,q3;function U3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function H3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(n),!0).forEach(function(i){GX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function GX(e,t,n){return(t=QX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QX(e){var t=YX(e,"string");return typeof t=="symbol"?t:t+""}function YX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w0.apply(null,arguments)}function W3(e,t){if(e==null)return{};var n,i,a=ZX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ZX(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function sd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $3=(e,t,n,i,a)=>{var s=Xu(n),l=Xu(i),d=Math.min(Math.abs(s)/2,Math.abs(l)/2),h=l>=0?1:-1,f=s>=0?1:-1,p=l>=0&&s>=0||l<0&&s<0?1:0,g;if(d>0&&a instanceof Array){for(var j=[0,0,0,0],v=0,b=4;v<b;v++)j[v]=a[v]>d?d:a[v];g=qi(D3||(D3=sd(["M",",",""])),e,t+h*j[0]),j[0]>0&&(g+=qi(O3||(O3=sd(["A ",",",",0,0,",",",",",""])),j[0],j[0],p,e+f*j[0],t)),g+=qi(M3||(M3=sd(["L ",",",""])),e+n-f*j[1],t),j[1]>0&&(g+=qi(L3||(L3=sd(["A ",",",",0,0,",`,
        `,",",""])),j[1],j[1],p,e+n,t+h*j[1])),g+=qi(R3||(R3=sd(["L ",",",""])),e+n,t+i-h*j[2]),j[2]>0&&(g+=qi(I3||(I3=sd(["A ",",",",0,0,",`,
        `,",",""])),j[2],j[2],p,e+n-f*j[2],t+i)),g+=qi(z3||(z3=sd(["L ",",",""])),e+f*j[3],t+i),j[3]>0&&(g+=qi(B3||(B3=sd(["A ",",",",0,0,",`,
        `,",",""])),j[3],j[3],p,e,t+i-h*j[3])),g+="Z"}else if(d>0&&a===+a&&a>0){var w=Math.min(d,a);g=qi(F3||(F3=sd(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+h*w,w,w,p,e+f*w,t,e+n-f*w,t,w,w,p,e+n,t+h*w,e+n,t+i-h*w,w,w,p,e+n-f*w,t+i,e+f*w,t+i,w,w,p,e,t+i-h*w)}else g=qi(q3||(q3=sd(["M ",","," h "," v "," h "," Z"])),e,t,n,i,-n);return g},V3={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LM=e=>{var t=Hs(e,V3),n=P.useRef(null),[i,a]=P.useState(-1);P.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ie=n.current.getTotalLength();ie&&a(ie)}catch{}},[]);var{x:s,y:l,width:d,height:h,radius:f,className:p}=t,{animationEasing:g,animationDuration:j,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:w}=t,S=P.useRef(d),_=P.useRef(h),E=P.useRef(s),D=P.useRef(l),W=P.useMemo(()=>({x:s,y:l,width:d,height:h,radius:f}),[s,l,d,h,f]),K=Ox(W,"rectangle-");if(s!==+s||l!==+l||d!==+d||h!==+h||d===0||h===0)return null;var B=Dn("recharts-rectangle",p);if(!w){var F=Kl(t),{radius:H}=F,I=W3(F,VX);return P.createElement("path",w0({},I,{x:Xu(s),y:Xu(l),width:Xu(d),height:Xu(h),radius:typeof f=="number"?f:void 0,className:B,d:$3(s,l,d,h,f)}))}var R=S.current,Y=_.current,G=E.current,ae=D.current,se="0px ".concat(i===-1?1:i,"px"),Ne="".concat(i,"px 0px"),z=kM(["strokeDasharray"],j,typeof g=="string"?g:V3.animationEasing);return P.createElement(Dx,{animationId:K,key:K,canBegin:i>0,duration:j,easing:g,isActive:w,begin:v},ie=>{var q=Aa(R,d,ie),re=Aa(Y,h,ie),ue=Aa(G,s,ie),Q=Aa(ae,l,ie);n.current&&(S.current=q,_.current=re,E.current=ue,D.current=Q);var V;b?ie>0?V={transition:z,strokeDasharray:Ne}:V={strokeDasharray:se}:V={strokeDasharray:Ne};var ne=Kl(t),{radius:$}=ne,de=W3(ne,KX);return P.createElement("path",w0({},de,{radius:typeof f=="number"?f:void 0,className:B,d:$3(ue,Q,q,re,f),ref:n,style:H3(H3({},V),t.style)}))})};function K3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function G3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(n),!0).forEach(function(i){XX(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function XX(e,t,n){return(t=JX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JX(e){var t=eJ(e,"string");return typeof t=="symbol"?t:t+""}function eJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S0=Math.PI/180,tJ=e=>e*180/Math.PI,fa=(e,t,n,i)=>({x:e+Math.cos(-S0*i)*n,y:t+Math.sin(-S0*i)*n}),RM=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},rJ=(e,t)=>{var{x:n,y:i}=e,{x:a,y:s}=t;return Math.sqrt((n-a)**2+(i-s)**2)},nJ=(e,t)=>{var{x:n,y:i}=e,{cx:a,cy:s}=t,l=rJ({x:n,y:i},{x:a,y:s});if(l<=0)return{radius:l,angle:0};var d=(n-a)/l,h=Math.acos(d);return i>s&&(h=2*Math.PI-h),{radius:l,angle:tJ(h),angleInRadian:h}},iJ=e=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:t-s*360,endAngle:n-s*360}},aJ=(e,t)=>{var{startAngle:n,endAngle:i}=t,a=Math.floor(n/360),s=Math.floor(i/360),l=Math.min(a,s);return e+l*360},sJ=(e,t)=>{var{chartX:n,chartY:i}=e,{radius:a,angle:s}=nJ({x:n,y:i},t),{innerRadius:l,outerRadius:d}=t;if(a<l||a>d||a===0)return null;var{startAngle:h,endAngle:f}=iJ(t),p=s,g;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}return g?G3(G3({},t),{},{radius:a,angle:aJ(p,t)}):null};function IM(e){var{cx:t,cy:n,radius:i,startAngle:a,endAngle:s}=e,l=fa(t,n,i,a),d=fa(t,n,i,s);return{points:[l,d],cx:t,cy:n,radius:i,startAngle:a,endAngle:s}}var Q3,Y3,Z3,X3,J3,eT,tT;function X5(){return X5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},X5.apply(null,arguments)}function Ph(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var oJ=(e,t)=>{var n=Ka(t-e),i=Math.min(Math.abs(t-e),359.999);return n*i},ev=e=>{var{cx:t,cy:n,radius:i,angle:a,sign:s,isExternal:l,cornerRadius:d,cornerIsExternal:h}=e,f=d*(l?1:-1)+i,p=Math.asin(d/f)/S0,g=h?a:a+s*p,j=fa(t,n,f,g),v=fa(t,n,i,g),b=h?a-s*p:a,w=fa(t,n,f*Math.cos(p*S0),b);return{center:j,circleTangency:v,lineTangency:w,theta:p}},zM=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:s,endAngle:l}=e,d=oJ(s,l),h=s+d,f=fa(t,n,a,s),p=fa(t,n,a,h),g=qi(Q3||(Q3=Ph(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,a,a,+(Math.abs(d)>180),+(s>h),p.x,p.y);if(i>0){var j=fa(t,n,i,s),v=fa(t,n,i,h);g+=qi(Y3||(Y3=Ph(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,i,i,+(Math.abs(d)>180),+(s<=h),j.x,j.y)}else g+=qi(Z3||(Z3=Ph(["L ",","," Z"])),t,n);return g},lJ=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:d,startAngle:h,endAngle:f}=e,p=Ka(f-h),{circleTangency:g,lineTangency:j,theta:v}=ev({cx:t,cy:n,radius:a,angle:h,sign:p,cornerRadius:s,cornerIsExternal:d}),{circleTangency:b,lineTangency:w,theta:S}=ev({cx:t,cy:n,radius:a,angle:f,sign:-p,cornerRadius:s,cornerIsExternal:d}),_=d?Math.abs(h-f):Math.abs(h-f)-v-S;if(_<0)return l?qi(X3||(X3=Ph(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),j.x,j.y,s,s,s*2,s,s,-s*2):zM({cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:h,endAngle:f});var E=qi(J3||(J3=Ph(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),j.x,j.y,s,s,+(p<0),g.x,g.y,a,a,+(_>180),+(p<0),b.x,b.y,s,s,+(p<0),w.x,w.y);if(i>0){var{circleTangency:D,lineTangency:W,theta:K}=ev({cx:t,cy:n,radius:i,angle:h,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),{circleTangency:B,lineTangency:F,theta:H}=ev({cx:t,cy:n,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),I=d?Math.abs(h-f):Math.abs(h-f)-K-H;if(I<0&&s===0)return"".concat(E,"L").concat(t,",").concat(n,"Z");E+=qi(eT||(eT=Ph(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),F.x,F.y,s,s,+(p<0),B.x,B.y,i,i,+(I>180),+(p>0),D.x,D.y,s,s,+(p<0),W.x,W.y)}else E+=qi(tT||(tT=Ph(["L",",","Z"])),t,n);return E},cJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BM=e=>{var t=Hs(e,cJ),{cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:h,startAngle:f,endAngle:p,className:g}=t;if(s<a||f===p)return null;var j=Dn("recharts-sector",g),v=s-a,b=qs(l,v,0,!0),w;return b>0&&Math.abs(f-p)<360?w=lJ({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,v/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:f,endAngle:p}):w=zM({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:p}),P.createElement("path",X5({},Kl(t),{className:j,d:w}))};function dJ(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(x8(t)){if(e==="centric"){var{cx:i,cy:a,innerRadius:s,outerRadius:l,angle:d}=t,h=fa(i,a,s,d),f=fa(i,a,l,d);return[{x:h.x,y:h.y},{x:f.x,y:f.y}]}return IM(t)}}var z2={},B2={},F2={},rT;function uJ(){return rT||(rT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T8();function n(i){return t.isSymbol(i)?NaN:Number(i)}e.toNumber=n})(F2)),F2}var nT;function hJ(){return nT||(nT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uJ();function n(i){return i?(i=t.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}e.toFinite=n})(B2)),B2}var iT;function fJ(){return iT||(iT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P8(),n=hJ();function i(a,s,l){l&&typeof l!="number"&&t.isIterateeCall(a,s,l)&&(s=l=void 0),a=n.toFinite(a),s===void 0?(s=a,a=0):s=n.toFinite(s),l=l===void 0?a<s?1:-1:n.toFinite(l);const d=Math.max(Math.ceil((s-a)/(l||1)),0),h=new Array(d);for(let f=0;f<d;f++)h[f]=a,a+=l;return h}e.range=i})(z2)),z2}var q2,aT;function mJ(){return aT||(aT=1,q2=fJ().range),q2}var pJ=mJ();const FM=Zl(pJ);function th(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function AS(e){let t,n,i;e.length!==2?(t=th,n=(d,h)=>th(e(d),h),i=(d,h)=>e(d)-h):(t=e===th||e===gJ?e:yJ,n=e,i=e);function a(d,h,f=0,p=d.length){if(f<p){if(t(h,h)!==0)return p;do{const g=f+p>>>1;n(d[g],h)<0?f=g+1:p=g}while(f<p)}return f}function s(d,h,f=0,p=d.length){if(f<p){if(t(h,h)!==0)return p;do{const g=f+p>>>1;n(d[g],h)<=0?f=g+1:p=g}while(f<p)}return f}function l(d,h,f=0,p=d.length){const g=a(d,h,f,p-1);return g>f&&i(d[g-1],h)>-i(d[g],h)?g-1:g}return{left:a,center:l,right:s}}function yJ(){return 0}function qM(e){return e===null?NaN:+e}function*vJ(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const xJ=AS(th),Rg=xJ.right;AS(qM).center;class sT extends Map{constructor(t,n=wJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,a]of t)this.set(i,a)}get(t){return super.get(oT(this,t))}has(t){return super.has(oT(this,t))}set(t,n){return super.set(bJ(this,t),n)}delete(t){return super.delete(jJ(this,t))}}function oT({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function bJ({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function jJ({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function wJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function SJ(e=th){if(e===th)return UM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function UM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const NJ=Math.sqrt(50),_J=Math.sqrt(10),CJ=Math.sqrt(2);function N0(e,t,n){const i=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),s=i/Math.pow(10,a),l=s>=NJ?10:s>=_J?5:s>=CJ?2:1;let d,h,f;return a<0?(f=Math.pow(10,-a)/l,d=Math.round(e*f),h=Math.round(t*f),d/f<e&&++d,h/f>t&&--h,f=-f):(f=Math.pow(10,a)*l,d=Math.round(e/f),h=Math.round(t/f),d*f<e&&++d,h*f>t&&--h),h<d&&.5<=n&&n<2?N0(e,t,n*2):[d,h,f]}function J5(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[a,s,l]=i?N0(t,e,n):N0(e,t,n);if(!(s>=a))return[];const d=s-a+1,h=new Array(d);if(i)if(l<0)for(let f=0;f<d;++f)h[f]=(s-f)/-l;else for(let f=0;f<d;++f)h[f]=(s-f)*l;else if(l<0)for(let f=0;f<d;++f)h[f]=(a+f)/-l;else for(let f=0;f<d;++f)h[f]=(a+f)*l;return h}function ew(e,t,n){return t=+t,e=+e,n=+n,N0(e,t,n)[2]}function tw(e,t,n){t=+t,e=+e,n=+n;const i=t<e,a=i?ew(t,e,n):ew(e,t,n);return(i?-1:1)*(a<0?1/-a:a)}function lT(e,t){let n;for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function cT(e,t){let n;for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function HM(e,t,n=0,i=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(a=a===void 0?UM:SJ(a);i>n;){if(i-n>600){const h=i-n+1,f=t-n+1,p=Math.log(h),g=.5*Math.exp(2*p/3),j=.5*Math.sqrt(p*g*(h-g)/h)*(f-h/2<0?-1:1),v=Math.max(n,Math.floor(t-f*g/h+j)),b=Math.min(i,Math.floor(t+(h-f)*g/h+j));HM(e,t,v,b,a)}const s=e[t];let l=n,d=i;for(Pp(e,n,t),a(e[i],s)>0&&Pp(e,n,i);l<d;){for(Pp(e,l,d),++l,--d;a(e[l],s)<0;)++l;for(;a(e[d],s)>0;)--d}a(e[n],s)===0?Pp(e,n,d):(++d,Pp(e,d,i)),d<=t&&(n=d+1),t<=d&&(i=d-1)}return e}function Pp(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function AJ(e,t,n){if(e=Float64Array.from(vJ(e)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return cT(e);if(t>=1)return lT(e);var i,a=(i-1)*t,s=Math.floor(a),l=lT(HM(e,s).subarray(0,s+1)),d=cT(e.subarray(s+1));return l+(d-l)*(a-s)}}function EJ(e,t,n=qM){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,a=(i-1)*t,s=Math.floor(a),l=+n(e[s],s,e),d=+n(e[s+1],s+1,e);return l+(d-l)*(a-s)}}function TJ(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++i<a;)s[i]=e+i*n;return s}function Xl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function pu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rw=Symbol("implicit");function ES(){var e=new sT,t=[],n=[],i=rw;function a(s){let l=e.get(s);if(l===void 0){if(i!==rw)return i;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new sT;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return ES(t,n).unknown(i)},Xl.apply(a,arguments),a}function TS(){var e=ES().unknown(void 0),t=e.domain,n=e.range,i=0,a=1,s,l,d=!1,h=0,f=0,p=.5;delete e.unknown;function g(){var j=t().length,v=a<i,b=v?a:i,w=v?i:a;s=(w-b)/Math.max(1,j-h+f*2),d&&(s=Math.floor(s)),b+=(w-b-s*(j-h))*p,l=s*(1-h),d&&(b=Math.round(b),l=Math.round(l));var S=TJ(j).map(function(_){return b+s*_});return n(v?S.reverse():S)}return e.domain=function(j){return arguments.length?(t(j),g()):t()},e.range=function(j){return arguments.length?([i,a]=j,i=+i,a=+a,g()):[i,a]},e.rangeRound=function(j){return[i,a]=j,i=+i,a=+a,d=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(j){return arguments.length?(d=!!j,g()):d},e.padding=function(j){return arguments.length?(h=Math.min(1,f=+j),g()):h},e.paddingInner=function(j){return arguments.length?(h=Math.min(1,j),g()):h},e.paddingOuter=function(j){return arguments.length?(f=+j,g()):f},e.align=function(j){return arguments.length?(p=Math.max(0,Math.min(1,j)),g()):p},e.copy=function(){return TS(t(),[i,a]).round(d).paddingInner(h).paddingOuter(f).align(p)},Xl.apply(g(),arguments)}function WM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return WM(t())},e}function PJ(){return WM(TS.apply(null,arguments).paddingInner(1))}function PS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $M(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ig(){}var dg=.7,_0=1/dg,dm="\\s*([+-]?\\d+)\\s*",ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kJ=/^#([0-9a-f]{3,8})$/,DJ=new RegExp(`^rgb\\(${dm},${dm},${dm}\\)$`),OJ=new RegExp(`^rgb\\(${md},${md},${md}\\)$`),MJ=new RegExp(`^rgba\\(${dm},${dm},${dm},${ug}\\)$`),LJ=new RegExp(`^rgba\\(${md},${md},${md},${ug}\\)$`),RJ=new RegExp(`^hsl\\(${ug},${md},${md}\\)$`),IJ=new RegExp(`^hsla\\(${ug},${md},${md},${ug}\\)$`),dT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PS(Ig,hg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uT,formatHex:uT,formatHex8:zJ,formatHsl:BJ,formatRgb:hT,toString:hT});function uT(){return this.rgb().formatHex()}function zJ(){return this.rgb().formatHex8()}function BJ(){return VM(this).formatHsl()}function hT(){return this.rgb().formatRgb()}function hg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=kJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fT(t):n===3?new Io(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?tv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?tv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=DJ.exec(e))?new Io(t[1],t[2],t[3],1):(t=OJ.exec(e))?new Io(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MJ.exec(e))?tv(t[1],t[2],t[3],t[4]):(t=LJ.exec(e))?tv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=RJ.exec(e))?gT(t[1],t[2]/100,t[3]/100,1):(t=IJ.exec(e))?gT(t[1],t[2]/100,t[3]/100,t[4]):dT.hasOwnProperty(e)?fT(dT[e]):e==="transparent"?new Io(NaN,NaN,NaN,0):null}function fT(e){return new Io(e>>16&255,e>>8&255,e&255,1)}function tv(e,t,n,i){return i<=0&&(e=t=n=NaN),new Io(e,t,n,i)}function FJ(e){return e instanceof Ig||(e=hg(e)),e?(e=e.rgb(),new Io(e.r,e.g,e.b,e.opacity)):new Io}function nw(e,t,n,i){return arguments.length===1?FJ(e):new Io(e,t,n,i??1)}function Io(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}PS(Io,nw,$M(Ig,{brighter(e){return e=e==null?_0:Math.pow(_0,e),new Io(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dg:Math.pow(dg,e),new Io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Io(Bh(this.r),Bh(this.g),Bh(this.b),C0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mT,formatHex:mT,formatHex8:qJ,formatRgb:pT,toString:pT}));function mT(){return`#${kh(this.r)}${kh(this.g)}${kh(this.b)}`}function qJ(){return`#${kh(this.r)}${kh(this.g)}${kh(this.b)}${kh((isNaN(this.opacity)?1:this.opacity)*255)}`}function pT(){const e=C0(this.opacity);return`${e===1?"rgb(":"rgba("}${Bh(this.r)}, ${Bh(this.g)}, ${Bh(this.b)}${e===1?")":`, ${e})`}`}function C0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kh(e){return e=Bh(e),(e<16?"0":"")+e.toString(16)}function gT(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xc(e,t,n,i)}function VM(e){if(e instanceof xc)return new xc(e.h,e.s,e.l,e.opacity);if(e instanceof Ig||(e=hg(e)),!e)return new xc;if(e instanceof xc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),s=Math.max(t,n,i),l=NaN,d=s-a,h=(s+a)/2;return d?(t===s?l=(n-i)/d+(n<i)*6:n===s?l=(i-t)/d+2:l=(t-n)/d+4,d/=h<.5?s+a:2-s-a,l*=60):d=h>0&&h<1?0:l,new xc(l,d,h,e.opacity)}function UJ(e,t,n,i){return arguments.length===1?VM(e):new xc(e,t,n,i??1)}function xc(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}PS(xc,UJ,$M(Ig,{brighter(e){return e=e==null?_0:Math.pow(_0,e),new xc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dg:Math.pow(dg,e),new xc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Io(U2(e>=240?e-240:e+120,a,i),U2(e,a,i),U2(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new xc(yT(this.h),rv(this.s),rv(this.l),C0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=C0(this.opacity);return`${e===1?"hsl(":"hsla("}${yT(this.h)}, ${rv(this.s)*100}%, ${rv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yT(e){return e=(e||0)%360,e<0?e+360:e}function rv(e){return Math.max(0,Math.min(1,e||0))}function U2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const kS=e=>()=>e;function HJ(e,t){return function(n){return e+n*t}}function WJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function $J(e){return(e=+e)==1?KM:function(t,n){return n-t?WJ(t,n,e):kS(isNaN(t)?n:t)}}function KM(e,t){var n=t-e;return n?HJ(e,n):kS(isNaN(e)?t:e)}const vT=(function e(t){var n=$J(t);function i(a,s){var l=n((a=nw(a)).r,(s=nw(s)).r),d=n(a.g,s.g),h=n(a.b,s.b),f=KM(a.opacity,s.opacity);return function(p){return a.r=l(p),a.g=d(p),a.b=h(p),a.opacity=f(p),a+""}}return i.gamma=e,i})(1);function VJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function KJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function GJ(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n),l;for(l=0;l<i;++l)a[l]=Rm(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(d){for(l=0;l<i;++l)s[l]=a[l](d);return s}}function QJ(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function A0(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function YJ(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Rm(e[a],t[a]):i[a]=t[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var iw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H2=new RegExp(iw.source,"g");function ZJ(e){return function(){return e}}function XJ(e){return function(t){return e(t)+""}}function JJ(e,t){var n=iw.lastIndex=H2.lastIndex=0,i,a,s,l=-1,d=[],h=[];for(e=e+"",t=t+"";(i=iw.exec(e))&&(a=H2.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),d[l]?d[l]+=s:d[++l]=s),(i=i[0])===(a=a[0])?d[l]?d[l]+=a:d[++l]=a:(d[++l]=null,h.push({i:l,x:A0(i,a)})),n=H2.lastIndex;return n<t.length&&(s=t.slice(n),d[l]?d[l]+=s:d[++l]=s),d.length<2?h[0]?XJ(h[0].x):ZJ(t):(t=h.length,function(f){for(var p=0,g;p<t;++p)d[(g=h[p]).i]=g.x(f);return d.join("")})}function Rm(e,t){var n=typeof t,i;return t==null||n==="boolean"?kS(t):(n==="number"?A0:n==="string"?(i=hg(t))?(t=i,vT):JJ:t instanceof hg?vT:t instanceof Date?QJ:KJ(t)?VJ:Array.isArray(t)?GJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YJ:A0)(e,t)}function DS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function eee(e,t){t===void 0&&(t=e,e=Rm);for(var n=0,i=t.length-1,a=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(a,a=t[++n]);return function(l){var d=Math.max(0,Math.min(i-1,Math.floor(l*=i)));return s[d](l-d)}}function tee(e){return function(){return e}}function E0(e){return+e}var xT=[0,1];function oo(e){return e}function aw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:tee(isNaN(t)?NaN:.5)}function ree(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function nee(e,t,n){var i=e[0],a=e[1],s=t[0],l=t[1];return a<i?(i=aw(a,i),s=n(l,s)):(i=aw(i,a),s=n(s,l)),function(d){return s(i(d))}}function iee(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),s=new Array(i),l=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<i;)a[l]=aw(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(d){var h=Rg(e,d,1,i)-1;return s[h](a[h](d))}}function zg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mx(){var e=xT,t=xT,n=Rm,i,a,s,l=oo,d,h,f;function p(){var j=Math.min(e.length,t.length);return l!==oo&&(l=ree(e[0],e[j-1])),d=j>2?iee:nee,h=f=null,g}function g(j){return j==null||isNaN(j=+j)?s:(h||(h=d(e.map(i),t,n)))(i(l(j)))}return g.invert=function(j){return l(a((f||(f=d(t,e.map(i),A0)))(j)))},g.domain=function(j){return arguments.length?(e=Array.from(j,E0),p()):e.slice()},g.range=function(j){return arguments.length?(t=Array.from(j),p()):t.slice()},g.rangeRound=function(j){return t=Array.from(j),n=DS,p()},g.clamp=function(j){return arguments.length?(l=j?!0:oo,p()):l!==oo},g.interpolate=function(j){return arguments.length?(n=j,p()):n},g.unknown=function(j){return arguments.length?(s=j,g):s},function(j,v){return i=j,a=v,p()}}function OS(){return Mx()(oo,oo)}function aee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function T0(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function wm(e){return e=T0(Math.abs(e)),e?e[1]:NaN}function see(e,t){return function(n,i){for(var a=n.length,s=[],l=0,d=e[0],h=0;a>0&&d>0&&(h+d+1>i&&(d=Math.max(1,i-h)),s.push(n.substring(a-=d,a+d)),!((h+=d+1)>i));)d=e[l=(l+1)%e.length];return s.reverse().join(t)}}function oee(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var lee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fg(e){if(!(t=lee.exec(e)))throw new Error("invalid format: "+e);var t;return new MS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fg.prototype=MS.prototype;function MS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}MS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cee(e){e:for(var t=e.length,n=1,i=-1,a;n<t;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var P0;function dee(e,t){var n=T0(e,t);if(!n)return P0=void 0,e.toPrecision(t);var i=n[0],a=n[1],s=a-(P0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+T0(e,Math.max(0,t+s-1))[0]}function bT(e,t){var n=T0(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const jT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:aee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>bT(e*100,t),r:bT,s:dee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wT(e){return e}var ST=Array.prototype.map,NT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uee(e){var t=e.grouping===void 0||e.thousands===void 0?wT:see(ST.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?wT:oee(ST.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function f(g,j){g=fg(g);var v=g.fill,b=g.align,w=g.sign,S=g.symbol,_=g.zero,E=g.width,D=g.comma,W=g.precision,K=g.trim,B=g.type;B==="n"?(D=!0,B="g"):jT[B]||(W===void 0&&(W=12),K=!0,B="g"),(_||v==="0"&&b==="=")&&(_=!0,v="0",b="=");var F=(j&&j.prefix!==void 0?j.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),H=(S==="$"?i:/[%p]/.test(B)?l:"")+(j&&j.suffix!==void 0?j.suffix:""),I=jT[B],R=/[defgprs%]/.test(B);W=W===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W));function Y(G){var ae=F,se=H,Ne,z,ie;if(B==="c")se=I(G)+se,G="";else{G=+G;var q=G<0||1/G<0;if(G=isNaN(G)?h:I(Math.abs(G),W),K&&(G=cee(G)),q&&+G==0&&w!=="+"&&(q=!1),ae=(q?w==="("?w:d:w==="-"||w==="("?"":w)+ae,se=(B==="s"&&!isNaN(G)&&P0!==void 0?NT[8+P0/3]:"")+se+(q&&w==="("?")":""),R){for(Ne=-1,z=G.length;++Ne<z;)if(ie=G.charCodeAt(Ne),48>ie||ie>57){se=(ie===46?a+G.slice(Ne+1):G.slice(Ne))+se,G=G.slice(0,Ne);break}}}D&&!_&&(G=t(G,1/0));var re=ae.length+G.length+se.length,ue=re<E?new Array(E-re+1).join(v):"";switch(D&&_&&(G=t(ue+G,ue.length?E-se.length:1/0),ue=""),b){case"<":G=ae+G+se+ue;break;case"=":G=ae+ue+G+se;break;case"^":G=ue.slice(0,re=ue.length>>1)+ae+G+se+ue.slice(re);break;default:G=ue+ae+G+se;break}return s(G)}return Y.toString=function(){return g+""},Y}function p(g,j){var v=Math.max(-8,Math.min(8,Math.floor(wm(j)/3)))*3,b=Math.pow(10,-v),w=f((g=fg(g),g.type="f",g),{suffix:NT[8+v/3]});return function(S){return w(b*S)}}return{format:f,formatPrefix:p}}var nv,LS,GM;hee({thousands:",",grouping:[3],currency:["$",""]});function hee(e){return nv=uee(e),LS=nv.format,GM=nv.formatPrefix,nv}function fee(e){return Math.max(0,-wm(Math.abs(e)))}function mee(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wm(t)/3)))*3-wm(Math.abs(e)))}function pee(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,wm(t)-wm(e))+1}function QM(e,t,n,i){var a=tw(e,t,n),s;switch(i=fg(i??",f"),i.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=mee(a,l))&&(i.precision=s),GM(i,l)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=pee(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=fee(a))&&(i.precision=s-(i.type==="%")*2);break}}return LS(i)}function sh(e){var t=e.domain;return e.ticks=function(n){var i=t();return J5(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=t();return QM(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),a=0,s=i.length-1,l=i[a],d=i[s],h,f,p=10;for(d<l&&(f=l,l=d,d=f,f=a,a=s,s=f);p-- >0;){if(f=ew(l,d,n),f===h)return i[a]=l,i[s]=d,t(i);if(f>0)l=Math.floor(l/f)*f,d=Math.ceil(d/f)*f;else if(f<0)l=Math.ceil(l*f)/f,d=Math.floor(d*f)/f;else break;h=f}return e},e}function YM(){var e=OS();return e.copy=function(){return zg(e,YM())},Xl.apply(e,arguments),sh(e)}function ZM(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,E0),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return ZM(e).unknown(t)},e=arguments.length?Array.from(e,E0):[0,1],sh(n)}function XM(e,t){e=e.slice();var n=0,i=e.length-1,a=e[n],s=e[i],l;return s<a&&(l=n,n=i,i=l,l=a,a=s,s=l),e[n]=t.floor(a),e[i]=t.ceil(s),e}function _T(e){return Math.log(e)}function CT(e){return Math.exp(e)}function gee(e){return-Math.log(-e)}function yee(e){return-Math.exp(-e)}function vee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function xee(e){return e===10?vee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function AT(e){return(t,n)=>-e(-t,n)}function RS(e){const t=e(_T,CT),n=t.domain;let i=10,a,s;function l(){return a=bee(i),s=xee(i),n()[0]<0?(a=AT(a),s=AT(s),e(gee,yee)):e(_T,CT),t}return t.base=function(d){return arguments.length?(i=+d,l()):i},t.domain=function(d){return arguments.length?(n(d),l()):n()},t.ticks=d=>{const h=n();let f=h[0],p=h[h.length-1];const g=p<f;g&&([f,p]=[p,f]);let j=a(f),v=a(p),b,w;const S=d==null?10:+d;let _=[];if(!(i%1)&&v-j<S){if(j=Math.floor(j),v=Math.ceil(v),f>0){for(;j<=v;++j)for(b=1;b<i;++b)if(w=j<0?b/s(-j):b*s(j),!(w<f)){if(w>p)break;_.push(w)}}else for(;j<=v;++j)for(b=i-1;b>=1;--b)if(w=j>0?b/s(-j):b*s(j),!(w<f)){if(w>p)break;_.push(w)}_.length*2<S&&(_=J5(f,p,S))}else _=J5(j,v,Math.min(v-j,S)).map(s);return g?_.reverse():_},t.tickFormat=(d,h)=>{if(d==null&&(d=10),h==null&&(h=i===10?"s":","),typeof h!="function"&&(!(i%1)&&(h=fg(h)).precision==null&&(h.trim=!0),h=LS(h)),d===1/0)return h;const f=Math.max(1,i*d/t.ticks().length);return p=>{let g=p/s(Math.round(a(p)));return g*i<i-.5&&(g*=i),g<=f?h(p):""}},t.nice=()=>n(XM(n(),{floor:d=>s(Math.floor(a(d))),ceil:d=>s(Math.ceil(a(d)))})),t}function JM(){const e=RS(Mx()).domain([1,10]);return e.copy=()=>zg(e,JM()).base(e.base()),Xl.apply(e,arguments),e}function ET(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function TT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function IS(e){var t=1,n=e(ET(t),TT(t));return n.constant=function(i){return arguments.length?e(ET(t=+i),TT(t)):t},sh(n)}function eL(){var e=IS(Mx());return e.copy=function(){return zg(e,eL()).constant(e.constant())},Xl.apply(e,arguments)}function PT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function jee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wee(e){return e<0?-e*e:e*e}function zS(e){var t=e(oo,oo),n=1;function i(){return n===1?e(oo,oo):n===.5?e(jee,wee):e(PT(n),PT(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,i()):n},sh(t)}function BS(){var e=zS(Mx());return e.copy=function(){return zg(e,BS()).exponent(e.exponent())},Xl.apply(e,arguments),e}function See(){return BS.apply(null,arguments).exponent(.5)}function kT(e){return Math.sign(e)*e*e}function Nee(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function tL(){var e=OS(),t=[0,1],n=!1,i;function a(s){var l=Nee(e(s));return isNaN(l)?i:n?Math.round(l):l}return a.invert=function(s){return e.invert(kT(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,E0)).map(kT)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return tL(e.domain(),t).round(n).clamp(e.clamp()).unknown(i)},Xl.apply(a,arguments),sh(a)}function rL(){var e=[],t=[],n=[],i;function a(){var l=0,d=Math.max(1,t.length);for(n=new Array(d-1);++l<d;)n[l-1]=EJ(e,l/d);return s}function s(l){return l==null||isNaN(l=+l)?i:t[Rg(n,l)]}return s.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(th),a()},s.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},s.unknown=function(l){return arguments.length?(i=l,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return rL().domain(e).range(t).unknown(i)},Xl.apply(s,arguments)}function nL(){var e=0,t=1,n=1,i=[.5],a=[0,1],s;function l(h){return h!=null&&h<=h?a[Rg(i,h,0,n)]:s}function d(){var h=-1;for(i=new Array(n);++h<n;)i[h]=((h+1)*t-(h-n)*e)/(n+1);return l}return l.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,d()):[e,t]},l.range=function(h){return arguments.length?(n=(a=Array.from(h)).length-1,d()):a.slice()},l.invertExtent=function(h){var f=a.indexOf(h);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},l.unknown=function(h){return arguments.length&&(s=h),l},l.thresholds=function(){return i.slice()},l.copy=function(){return nL().domain([e,t]).range(a).unknown(s)},Xl.apply(sh(l),arguments)}function iL(){var e=[.5],t=[0,1],n,i=1;function a(s){return s!=null&&s<=s?t[Rg(e,s,0,i)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return iL().domain(e).range(t).unknown(n)},Xl.apply(a,arguments)}const W2=new Date,$2=new Date;function Da(e,t,n,i){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const l=a(s),d=a.ceil(s);return s-l<d-s?l:d},a.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),a.range=(s,l,d)=>{const h=[];if(s=a.ceil(s),d=d==null?1:Math.floor(d),!(s<l)||!(d>0))return h;let f;do h.push(f=new Date(+s)),t(s,d),e(s);while(f<s&&s<l);return h},a.filter=s=>Da(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!s(l););else for(;--d>=0;)for(;t(l,1),!s(l););}),n&&(a.count=(s,l)=>(W2.setTime(+s),$2.setTime(+l),e(W2),e($2),Math.floor(n(W2,$2))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(i?l=>i(l)%s===0:l=>a.count(0,l)%s===0):a)),a}const k0=Da(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);k0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Da(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):k0);k0.range;const Qd=1e3,ql=Qd*60,Yd=ql*60,su=Yd*24,FS=su*7,DT=su*30,V2=su*365,Dh=Da(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qd)},(e,t)=>(t-e)/Qd,e=>e.getUTCSeconds());Dh.range;const qS=Da(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qd)},(e,t)=>{e.setTime(+e+t*ql)},(e,t)=>(t-e)/ql,e=>e.getMinutes());qS.range;const US=Da(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ql)},(e,t)=>(t-e)/ql,e=>e.getUTCMinutes());US.range;const HS=Da(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qd-e.getMinutes()*ql)},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getHours());HS.range;const WS=Da(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getUTCHours());WS.range;const Bg=Da(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ql)/su,e=>e.getDate()-1);Bg.range;const Lx=Da(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/su,e=>e.getUTCDate()-1);Lx.range;const aL=Da(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/su,e=>Math.floor(e/su));aL.range;function cf(e){return Da(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ql)/FS)}const Rx=cf(0),D0=cf(1),_ee=cf(2),Cee=cf(3),Sm=cf(4),Aee=cf(5),Eee=cf(6);Rx.range;D0.range;_ee.range;Cee.range;Sm.range;Aee.range;Eee.range;function df(e){return Da(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/FS)}const Ix=df(0),O0=df(1),Tee=df(2),Pee=df(3),Nm=df(4),kee=df(5),Dee=df(6);Ix.range;O0.range;Tee.range;Pee.range;Nm.range;kee.range;Dee.range;const $S=Da(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$S.range;const VS=Da(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());VS.range;const ou=Da(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ou.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Da(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ou.range;const lu=Da(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Da(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});lu.range;function sL(e,t,n,i,a,s){const l=[[Dh,1,Qd],[Dh,5,5*Qd],[Dh,15,15*Qd],[Dh,30,30*Qd],[s,1,ql],[s,5,5*ql],[s,15,15*ql],[s,30,30*ql],[a,1,Yd],[a,3,3*Yd],[a,6,6*Yd],[a,12,12*Yd],[i,1,su],[i,2,2*su],[n,1,FS],[t,1,DT],[t,3,3*DT],[e,1,V2]];function d(f,p,g){const j=p<f;j&&([f,p]=[p,f]);const v=g&&typeof g.range=="function"?g:h(f,p,g),b=v?v.range(f,+p+1):[];return j?b.reverse():b}function h(f,p,g){const j=Math.abs(p-f)/g,v=AS(([,,S])=>S).right(l,j);if(v===l.length)return e.every(tw(f/V2,p/V2,g));if(v===0)return k0.every(Math.max(tw(f,p,g),1));const[b,w]=l[j/l[v-1][2]<l[v][2]/j?v-1:v];return b.every(w)}return[d,h]}const[Oee,Mee]=sL(lu,VS,Ix,aL,WS,US),[Lee,Ree]=sL(ou,$S,Rx,Bg,HS,qS);function K2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function G2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Iee(e){var t=e.dateTime,n=e.date,i=e.time,a=e.periods,s=e.days,l=e.shortDays,d=e.months,h=e.shortMonths,f=Dp(a),p=Op(a),g=Dp(s),j=Op(s),v=Dp(l),b=Op(l),w=Dp(d),S=Op(d),_=Dp(h),E=Op(h),D={a:ie,A:q,b:re,B:ue,c:null,d:zT,e:zT,f:ste,g:gte,G:vte,H:nte,I:ite,j:ate,L:oL,m:ote,M:lte,p:Q,q:V,Q:qT,s:UT,S:cte,u:dte,U:ute,V:hte,w:fte,W:mte,x:null,X:null,y:pte,Y:yte,Z:xte,"%":FT},W={a:ne,A:$,b:de,B:Z,c:null,d:BT,e:BT,f:Ste,g:Ote,G:Lte,H:bte,I:jte,j:wte,L:cL,m:Nte,M:_te,p:ge,q:oe,Q:qT,s:UT,S:Cte,u:Ate,U:Ete,V:Tte,w:Pte,W:kte,x:null,X:null,y:Dte,Y:Mte,Z:Rte,"%":FT},K={a:R,A:Y,b:G,B:ae,c:se,d:RT,e:RT,f:Jee,g:LT,G:MT,H:IT,I:IT,j:Qee,L:Xee,m:Gee,M:Yee,p:I,q:Kee,Q:tte,s:rte,S:Zee,u:Uee,U:Hee,V:Wee,w:qee,W:$ee,x:Ne,X:z,y:LT,Y:MT,Z:Vee,"%":ete};D.x=B(n,D),D.X=B(i,D),D.c=B(t,D),W.x=B(n,W),W.X=B(i,W),W.c=B(t,W);function B(X,_e){return function(Ie){var De=[],ut=-1,ht=0,be=X.length,ct,Gt,Pt;for(Ie instanceof Date||(Ie=new Date(+Ie));++ut<be;)X.charCodeAt(ut)===37&&(De.push(X.slice(ht,ut)),(Gt=OT[ct=X.charAt(++ut)])!=null?ct=X.charAt(++ut):Gt=ct==="e"?" ":"0",(Pt=_e[ct])&&(ct=Pt(Ie,Gt)),De.push(ct),ht=ut+1);return De.push(X.slice(ht,ut)),De.join("")}}function F(X,_e){return function(Ie){var De=kp(1900,void 0,1),ut=H(De,X,Ie+="",0),ht,be;if(ut!=Ie.length)return null;if("Q"in De)return new Date(De.Q);if("s"in De)return new Date(De.s*1e3+("L"in De?De.L:0));if(_e&&!("Z"in De)&&(De.Z=0),"p"in De&&(De.H=De.H%12+De.p*12),De.m===void 0&&(De.m="q"in De?De.q:0),"V"in De){if(De.V<1||De.V>53)return null;"w"in De||(De.w=1),"Z"in De?(ht=G2(kp(De.y,0,1)),be=ht.getUTCDay(),ht=be>4||be===0?O0.ceil(ht):O0(ht),ht=Lx.offset(ht,(De.V-1)*7),De.y=ht.getUTCFullYear(),De.m=ht.getUTCMonth(),De.d=ht.getUTCDate()+(De.w+6)%7):(ht=K2(kp(De.y,0,1)),be=ht.getDay(),ht=be>4||be===0?D0.ceil(ht):D0(ht),ht=Bg.offset(ht,(De.V-1)*7),De.y=ht.getFullYear(),De.m=ht.getMonth(),De.d=ht.getDate()+(De.w+6)%7)}else("W"in De||"U"in De)&&("w"in De||(De.w="u"in De?De.u%7:"W"in De?1:0),be="Z"in De?G2(kp(De.y,0,1)).getUTCDay():K2(kp(De.y,0,1)).getDay(),De.m=0,De.d="W"in De?(De.w+6)%7+De.W*7-(be+5)%7:De.w+De.U*7-(be+6)%7);return"Z"in De?(De.H+=De.Z/100|0,De.M+=De.Z%100,G2(De)):K2(De)}}function H(X,_e,Ie,De){for(var ut=0,ht=_e.length,be=Ie.length,ct,Gt;ut<ht;){if(De>=be)return-1;if(ct=_e.charCodeAt(ut++),ct===37){if(ct=_e.charAt(ut++),Gt=K[ct in OT?_e.charAt(ut++):ct],!Gt||(De=Gt(X,Ie,De))<0)return-1}else if(ct!=Ie.charCodeAt(De++))return-1}return De}function I(X,_e,Ie){var De=f.exec(_e.slice(Ie));return De?(X.p=p.get(De[0].toLowerCase()),Ie+De[0].length):-1}function R(X,_e,Ie){var De=v.exec(_e.slice(Ie));return De?(X.w=b.get(De[0].toLowerCase()),Ie+De[0].length):-1}function Y(X,_e,Ie){var De=g.exec(_e.slice(Ie));return De?(X.w=j.get(De[0].toLowerCase()),Ie+De[0].length):-1}function G(X,_e,Ie){var De=_.exec(_e.slice(Ie));return De?(X.m=E.get(De[0].toLowerCase()),Ie+De[0].length):-1}function ae(X,_e,Ie){var De=w.exec(_e.slice(Ie));return De?(X.m=S.get(De[0].toLowerCase()),Ie+De[0].length):-1}function se(X,_e,Ie){return H(X,t,_e,Ie)}function Ne(X,_e,Ie){return H(X,n,_e,Ie)}function z(X,_e,Ie){return H(X,i,_e,Ie)}function ie(X){return l[X.getDay()]}function q(X){return s[X.getDay()]}function re(X){return h[X.getMonth()]}function ue(X){return d[X.getMonth()]}function Q(X){return a[+(X.getHours()>=12)]}function V(X){return 1+~~(X.getMonth()/3)}function ne(X){return l[X.getUTCDay()]}function $(X){return s[X.getUTCDay()]}function de(X){return h[X.getUTCMonth()]}function Z(X){return d[X.getUTCMonth()]}function ge(X){return a[+(X.getUTCHours()>=12)]}function oe(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var _e=B(X+="",D);return _e.toString=function(){return X},_e},parse:function(X){var _e=F(X+="",!1);return _e.toString=function(){return X},_e},utcFormat:function(X){var _e=B(X+="",W);return _e.toString=function(){return X},_e},utcParse:function(X){var _e=F(X+="",!0);return _e.toString=function(){return X},_e}}}var OT={"-":"",_:" ",0:"0"},Qa=/^\s*\d+/,zee=/^%/,Bee=/[\\^$*+?|[\]().{}]/g;function on(e,t,n){var i=e<0?"-":"",a=(i?-e:e)+"",s=a.length;return i+(s<n?new Array(n-s+1).join(t)+a:a)}function Fee(e){return e.replace(Bee,"\\$&")}function Dp(e){return new RegExp("^(?:"+e.map(Fee).join("|")+")","i")}function Op(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function qee(e,t,n){var i=Qa.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Uee(e,t,n){var i=Qa.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Hee(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Wee(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function $ee(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function MT(e,t,n){var i=Qa.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function LT(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Vee(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Kee(e,t,n){var i=Qa.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function Gee(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function RT(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Qee(e,t,n){var i=Qa.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function IT(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Yee(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Zee(e,t,n){var i=Qa.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Xee(e,t,n){var i=Qa.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Jee(e,t,n){var i=Qa.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function ete(e,t,n){var i=zee.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function tte(e,t,n){var i=Qa.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function rte(e,t,n){var i=Qa.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function zT(e,t){return on(e.getDate(),t,2)}function nte(e,t){return on(e.getHours(),t,2)}function ite(e,t){return on(e.getHours()%12||12,t,2)}function ate(e,t){return on(1+Bg.count(ou(e),e),t,3)}function oL(e,t){return on(e.getMilliseconds(),t,3)}function ste(e,t){return oL(e,t)+"000"}function ote(e,t){return on(e.getMonth()+1,t,2)}function lte(e,t){return on(e.getMinutes(),t,2)}function cte(e,t){return on(e.getSeconds(),t,2)}function dte(e){var t=e.getDay();return t===0?7:t}function ute(e,t){return on(Rx.count(ou(e)-1,e),t,2)}function lL(e){var t=e.getDay();return t>=4||t===0?Sm(e):Sm.ceil(e)}function hte(e,t){return e=lL(e),on(Sm.count(ou(e),e)+(ou(e).getDay()===4),t,2)}function fte(e){return e.getDay()}function mte(e,t){return on(D0.count(ou(e)-1,e),t,2)}function pte(e,t){return on(e.getFullYear()%100,t,2)}function gte(e,t){return e=lL(e),on(e.getFullYear()%100,t,2)}function yte(e,t){return on(e.getFullYear()%1e4,t,4)}function vte(e,t){var n=e.getDay();return e=n>=4||n===0?Sm(e):Sm.ceil(e),on(e.getFullYear()%1e4,t,4)}function xte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+on(t/60|0,"0",2)+on(t%60,"0",2)}function BT(e,t){return on(e.getUTCDate(),t,2)}function bte(e,t){return on(e.getUTCHours(),t,2)}function jte(e,t){return on(e.getUTCHours()%12||12,t,2)}function wte(e,t){return on(1+Lx.count(lu(e),e),t,3)}function cL(e,t){return on(e.getUTCMilliseconds(),t,3)}function Ste(e,t){return cL(e,t)+"000"}function Nte(e,t){return on(e.getUTCMonth()+1,t,2)}function _te(e,t){return on(e.getUTCMinutes(),t,2)}function Cte(e,t){return on(e.getUTCSeconds(),t,2)}function Ate(e){var t=e.getUTCDay();return t===0?7:t}function Ete(e,t){return on(Ix.count(lu(e)-1,e),t,2)}function dL(e){var t=e.getUTCDay();return t>=4||t===0?Nm(e):Nm.ceil(e)}function Tte(e,t){return e=dL(e),on(Nm.count(lu(e),e)+(lu(e).getUTCDay()===4),t,2)}function Pte(e){return e.getUTCDay()}function kte(e,t){return on(O0.count(lu(e)-1,e),t,2)}function Dte(e,t){return on(e.getUTCFullYear()%100,t,2)}function Ote(e,t){return e=dL(e),on(e.getUTCFullYear()%100,t,2)}function Mte(e,t){return on(e.getUTCFullYear()%1e4,t,4)}function Lte(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Nm(e):Nm.ceil(e),on(e.getUTCFullYear()%1e4,t,4)}function Rte(){return"+0000"}function FT(){return"%"}function qT(e){return+e}function UT(e){return Math.floor(+e/1e3)}var Wf,uL,hL;Ite({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ite(e){return Wf=Iee(e),uL=Wf.format,Wf.parse,hL=Wf.utcFormat,Wf.utcParse,Wf}function zte(e){return new Date(e)}function Bte(e){return e instanceof Date?+e:+new Date(+e)}function KS(e,t,n,i,a,s,l,d,h,f){var p=OS(),g=p.invert,j=p.domain,v=f(".%L"),b=f(":%S"),w=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),E=f("%b %d"),D=f("%B"),W=f("%Y");function K(B){return(h(B)<B?v:d(B)<B?b:l(B)<B?w:s(B)<B?S:i(B)<B?a(B)<B?_:E:n(B)<B?D:W)(B)}return p.invert=function(B){return new Date(g(B))},p.domain=function(B){return arguments.length?j(Array.from(B,Bte)):j().map(zte)},p.ticks=function(B){var F=j();return e(F[0],F[F.length-1],B??10)},p.tickFormat=function(B,F){return F==null?K:f(F)},p.nice=function(B){var F=j();return(!B||typeof B.range!="function")&&(B=t(F[0],F[F.length-1],B??10)),B?j(XM(F,B)):p},p.copy=function(){return zg(p,KS(e,t,n,i,a,s,l,d,h,f))},p}function Fte(){return Xl.apply(KS(Lee,Ree,ou,$S,Rx,Bg,HS,qS,Dh,uL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qte(){return Xl.apply(KS(Oee,Mee,lu,VS,Ix,Lx,WS,US,Dh,hL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zx(){var e=0,t=1,n,i,a,s,l=oo,d=!1,h;function f(g){return g==null||isNaN(g=+g)?h:l(a===0?.5:(g=(s(g)-n)*a,d?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),i=s(t=+t),a=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(d=!!g,f):d},f.interpolator=function(g){return arguments.length?(l=g,f):l};function p(g){return function(j){var v,b;return arguments.length?([v,b]=j,l=g(v,b),f):[l(0),l(1)]}}return f.range=p(Rm),f.rangeRound=p(DS),f.unknown=function(g){return arguments.length?(h=g,f):h},function(g){return s=g,n=g(e),i=g(t),a=n===i?0:1/(i-n),f}}function oh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fL(){var e=sh(zx()(oo));return e.copy=function(){return oh(e,fL())},pu.apply(e,arguments)}function mL(){var e=RS(zx()).domain([1,10]);return e.copy=function(){return oh(e,mL()).base(e.base())},pu.apply(e,arguments)}function pL(){var e=IS(zx());return e.copy=function(){return oh(e,pL()).constant(e.constant())},pu.apply(e,arguments)}function GS(){var e=zS(zx());return e.copy=function(){return oh(e,GS()).exponent(e.exponent())},pu.apply(e,arguments)}function Ute(){return GS.apply(null,arguments).exponent(.5)}function gL(){var e=[],t=oo;function n(i){if(i!=null&&!isNaN(i=+i))return t((Rg(e,i,1)-1)/(e.length-1))}return n.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let a of i)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(th),n},n.interpolator=function(i){return arguments.length?(t=i,n):t},n.range=function(){return e.map((i,a)=>t(a/(e.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(a,s)=>AJ(e,s/i))},n.copy=function(){return gL(t).domain(e)},pu.apply(n,arguments)}function Bx(){var e=0,t=.5,n=1,i=1,a,s,l,d,h,f=oo,p,g=!1,j;function v(w){return isNaN(w=+w)?j:(w=.5+((w=+p(w))-s)*(i*w<i*s?d:h),f(g?Math.max(0,Math.min(1,w)):w))}v.domain=function(w){return arguments.length?([e,t,n]=w,a=p(e=+e),s=p(t=+t),l=p(n=+n),d=a===s?0:.5/(s-a),h=s===l?0:.5/(l-s),i=s<a?-1:1,v):[e,t,n]},v.clamp=function(w){return arguments.length?(g=!!w,v):g},v.interpolator=function(w){return arguments.length?(f=w,v):f};function b(w){return function(S){var _,E,D;return arguments.length?([_,E,D]=S,f=eee(w,[_,E,D]),v):[f(0),f(.5),f(1)]}}return v.range=b(Rm),v.rangeRound=b(DS),v.unknown=function(w){return arguments.length?(j=w,v):j},function(w){return p=w,a=w(e),s=w(t),l=w(n),d=a===s?0:.5/(s-a),h=s===l?0:.5/(l-s),i=s<a?-1:1,v}}function yL(){var e=sh(Bx()(oo));return e.copy=function(){return oh(e,yL())},pu.apply(e,arguments)}function vL(){var e=RS(Bx()).domain([.1,1,10]);return e.copy=function(){return oh(e,vL()).base(e.base())},pu.apply(e,arguments)}function xL(){var e=IS(Bx());return e.copy=function(){return oh(e,xL()).constant(e.constant())},pu.apply(e,arguments)}function QS(){var e=zS(Bx());return e.copy=function(){return oh(e,QS()).exponent(e.exponent())},pu.apply(e,arguments)}function Hte(){return QS.apply(null,arguments).exponent(.5)}const Hp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:TS,scaleDiverging:yL,scaleDivergingLog:vL,scaleDivergingPow:QS,scaleDivergingSqrt:Hte,scaleDivergingSymlog:xL,scaleIdentity:ZM,scaleImplicit:rw,scaleLinear:YM,scaleLog:JM,scaleOrdinal:ES,scalePoint:PJ,scalePow:BS,scaleQuantile:rL,scaleQuantize:nL,scaleRadial:tL,scaleSequential:fL,scaleSequentialLog:mL,scaleSequentialPow:GS,scaleSequentialQuantile:gL,scaleSequentialSqrt:Ute,scaleSequentialSymlog:pL,scaleSqrt:See,scaleSymlog:eL,scaleThreshold:iL,scaleTime:Fte,scaleUtc:qte,tickFormat:QM},Symbol.toStringTag,{value:"Module"}));var gu=e=>e.chartData,Fx=He([gu],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),bL=(e,t,n,i)=>i?Fx(e):gu(e),Wte=(e,t,n)=>n?Fx(e):gu(e);function rh(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Ai(t)&&Ai(n))return!0}return!1}function HT(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function jL(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,i]=e,a,s;if(Ai(n))a=n;else if(typeof n=="function")return;if(Ai(i))s=i;else if(typeof i=="function")return;var l=[a,s];if(rh(l))return l}}function $te(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var i=e(t,n);if(rh(i))return HT(i,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,l,d;if(a==="auto")t!=null&&(l=Math.min(...t));else if(Rt(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t?.[0]))}catch{}else if(typeof a=="string"&&t3.test(a)){var h=t3.exec(a);if(h==null||h[1]==null||t==null)l=void 0;else{var f=+h[1];l=t[0]-f}}else l=t?.[0];if(s==="auto")t!=null&&(d=Math.max(...t));else if(Rt(s))d=s;else if(typeof s=="function")try{t!=null&&(d=s(t?.[1]))}catch{}else if(typeof s=="string"&&r3.test(s)){var p=r3.exec(s);if(p==null||p[1]==null||t==null)d=void 0;else{var g=+p[1];d=t[1]+g}}else d=t?.[1];var j=[l,d];if(rh(j))return t==null?j:HT(j,t,n)}}}var Im=1e9,Vte={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ZS,gi=!0,Ql="[DecimalError] ",Fh=Ql+"Invalid argument: ",YS=Ql+"Exponent out of range: ",zm=Math.floor,Sh=Math.pow,Kte=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fl,$a=1e7,ti=7,wL=9007199254740991,M0=zm(wL/ti),St={};St.absoluteValue=St.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};St.comparedTo=St.cmp=function(e){var t,n,i,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(i=s.d.length,a=e.d.length,t=0,n=i<a?i:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return i===a?0:i>a^s.s<0?1:-1};St.decimalPlaces=St.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ti;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};St.dividedBy=St.div=function(e){return Xd(this,new this.constructor(e))};St.dividedToIntegerBy=St.idiv=function(e){var t=this,n=t.constructor;return zn(Xd(t,new n(e),0,1),n.precision)};St.equals=St.eq=function(e){return!this.cmp(e)};St.exponent=function(){return ma(this)};St.greaterThan=St.gt=function(e){return this.cmp(e)>0};St.greaterThanOrEqualTo=St.gte=function(e){return this.cmp(e)>=0};St.isInteger=St.isint=function(){return this.e>this.d.length-2};St.isNegative=St.isneg=function(){return this.s<0};St.isPositive=St.ispos=function(){return this.s>0};St.isZero=function(){return this.s===0};St.lessThan=St.lt=function(e){return this.cmp(e)<0};St.lessThanOrEqualTo=St.lte=function(e){return this.cmp(e)<1};St.logarithm=St.log=function(e){var t,n=this,i=n.constructor,a=i.precision,s=a+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(fl))throw Error(Ql+"NaN");if(n.s<1)throw Error(Ql+(n.s?"NaN":"-Infinity"));return n.eq(fl)?new i(0):(gi=!1,t=Xd(mg(n,s),mg(e,s),s),gi=!0,zn(t,a))};St.minus=St.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_L(t,e):SL(t,(e.s=-e.s,e))};St.modulo=St.mod=function(e){var t,n=this,i=n.constructor,a=i.precision;if(e=new i(e),!e.s)throw Error(Ql+"NaN");return n.s?(gi=!1,t=Xd(n,e,0,1).times(e),gi=!0,n.minus(t)):zn(new i(n),a)};St.naturalExponential=St.exp=function(){return NL(this)};St.naturalLogarithm=St.ln=function(){return mg(this)};St.negated=St.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};St.plus=St.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?SL(t,e):_L(t,(e.s=-e.s,e))};St.precision=St.sd=function(e){var t,n,i,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Fh+e);if(t=ma(a)+1,i=a.d.length-1,n=i*ti+1,i=a.d[i],i){for(;i%10==0;i/=10)n--;for(i=a.d[0];i>=10;i/=10)n++}return e&&t>n?t:n};St.squareRoot=St.sqrt=function(){var e,t,n,i,a,s,l,d=this,h=d.constructor;if(d.s<1){if(!d.s)return new h(0);throw Error(Ql+"NaN")}for(e=ma(d),gi=!1,a=Math.sqrt(+d),a==0||a==1/0?(t=ud(d.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=zm((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new h(t)):i=new h(a.toString()),n=h.precision,a=l=n+3;;)if(s=i,i=s.plus(Xd(d,s,l+2)).times(.5),ud(s.d).slice(0,l)===(t=ud(i.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(zn(s,n+1,0),s.times(s).eq(d)){i=s;break}}else if(t!="9999")break;l+=4}return gi=!0,zn(i,n)};St.times=St.mul=function(e){var t,n,i,a,s,l,d,h,f,p=this,g=p.constructor,j=p.d,v=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,n=p.e+e.e,h=j.length,f=v.length,h<f&&(s=j,j=v,v=s,l=h,h=f,f=l),s=[],l=h+f,i=l;i--;)s.push(0);for(i=f;--i>=0;){for(t=0,a=h+i;a>i;)d=s[a]+v[i]*j[a-i-1]+t,s[a--]=d%$a|0,t=d/$a|0;s[a]=(s[a]+t)%$a|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,gi?zn(e,g.precision):e};St.toDecimalPlaces=St.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(xd(e,0,Im),t===void 0?t=i.rounding:xd(t,0,8),zn(n,e+ma(n)+1,t))};St.toExponential=function(e,t){var n,i=this,a=i.constructor;return e===void 0?n=Zh(i,!0):(xd(e,0,Im),t===void 0?t=a.rounding:xd(t,0,8),i=zn(new a(i),e+1,t),n=Zh(i,!0,e+1)),n};St.toFixed=function(e,t){var n,i,a=this,s=a.constructor;return e===void 0?Zh(a):(xd(e,0,Im),t===void 0?t=s.rounding:xd(t,0,8),i=zn(new s(a),e+ma(a)+1,t),n=Zh(i.abs(),!1,e+ma(i)+1),a.isneg()&&!a.isZero()?"-"+n:n)};St.toInteger=St.toint=function(){var e=this,t=e.constructor;return zn(new t(e),ma(e)+1,t.rounding)};St.toNumber=function(){return+this};St.toPower=St.pow=function(e){var t,n,i,a,s,l,d=this,h=d.constructor,f=12,p=+(e=new h(e));if(!e.s)return new h(fl);if(d=new h(d),!d.s){if(e.s<1)throw Error(Ql+"Infinity");return d}if(d.eq(fl))return d;if(i=h.precision,e.eq(fl))return zn(d,i);if(t=e.e,n=e.d.length-1,l=t>=n,s=d.s,l){if((n=p<0?-p:p)<=wL){for(a=new h(fl),t=Math.ceil(i/ti+4),gi=!1;n%2&&(a=a.times(d),$T(a.d,t)),n=zm(n/2),n!==0;)d=d.times(d),$T(d.d,t);return gi=!0,e.s<0?new h(fl).div(a):zn(a,i)}}else if(s<0)throw Error(Ql+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,gi=!1,a=e.times(mg(d,i+f)),gi=!0,a=NL(a),a.s=s,a};St.toPrecision=function(e,t){var n,i,a=this,s=a.constructor;return e===void 0?(n=ma(a),i=Zh(a,n<=s.toExpNeg||n>=s.toExpPos)):(xd(e,1,Im),t===void 0?t=s.rounding:xd(t,0,8),a=zn(new s(a),e,t),n=ma(a),i=Zh(a,e<=n||n<=s.toExpNeg,e)),i};St.toSignificantDigits=St.tosd=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(xd(e,1,Im),t===void 0?t=i.rounding:xd(t,0,8)),zn(new i(n),e,t)};St.toString=St.valueOf=St.val=St.toJSON=St[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ma(e),n=e.constructor;return Zh(e,t<=n.toExpNeg||t>=n.toExpPos)};function SL(e,t){var n,i,a,s,l,d,h,f,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),gi?zn(t,g):t;if(h=e.d,f=t.d,l=e.e,a=t.e,h=h.slice(),s=l-a,s){for(s<0?(i=h,s=-s,d=f.length):(i=f,a=l,d=h.length),l=Math.ceil(g/ti),d=l>d?l+1:d+1,s>d&&(s=d,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(d=h.length,s=f.length,d-s<0&&(s=d,i=f,f=h,h=i),n=0;s;)n=(h[--s]=h[s]+f[s]+n)/$a|0,h[s]%=$a;for(n&&(h.unshift(n),++a),d=h.length;h[--d]==0;)h.pop();return t.d=h,t.e=a,gi?zn(t,g):t}function xd(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Fh+e)}function ud(e){var t,n,i,a=e.length-1,s="",l=e[0];if(a>0){for(s+=l,t=1;t<a;t++)i=e[t]+"",n=ti-i.length,n&&(s+=Gu(n)),s+=i;l=e[t],i=l+"",n=ti-i.length,n&&(s+=Gu(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Xd=(function(){function e(i,a){var s,l=0,d=i.length;for(i=i.slice();d--;)s=i[d]*a+l,i[d]=s%$a|0,l=s/$a|0;return l&&i.unshift(l),i}function t(i,a,s,l){var d,h;if(s!=l)h=s>l?1:-1;else for(d=h=0;d<s;d++)if(i[d]!=a[d]){h=i[d]>a[d]?1:-1;break}return h}function n(i,a,s){for(var l=0;s--;)i[s]-=l,l=i[s]<a[s]?1:0,i[s]=l*$a+i[s]-a[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,s,l){var d,h,f,p,g,j,v,b,w,S,_,E,D,W,K,B,F,H,I=i.constructor,R=i.s==a.s?1:-1,Y=i.d,G=a.d;if(!i.s)return new I(i);if(!a.s)throw Error(Ql+"Division by zero");for(h=i.e-a.e,F=G.length,K=Y.length,v=new I(R),b=v.d=[],f=0;G[f]==(Y[f]||0);)++f;if(G[f]>(Y[f]||0)&&--h,s==null?E=s=I.precision:l?E=s+(ma(i)-ma(a))+1:E=s,E<0)return new I(0);if(E=E/ti+2|0,f=0,F==1)for(p=0,G=G[0],E++;(f<K||p)&&E--;f++)D=p*$a+(Y[f]||0),b[f]=D/G|0,p=D%G|0;else{for(p=$a/(G[0]+1)|0,p>1&&(G=e(G,p),Y=e(Y,p),F=G.length,K=Y.length),W=F,w=Y.slice(0,F),S=w.length;S<F;)w[S++]=0;H=G.slice(),H.unshift(0),B=G[0],G[1]>=$a/2&&++B;do p=0,d=t(G,w,F,S),d<0?(_=w[0],F!=S&&(_=_*$a+(w[1]||0)),p=_/B|0,p>1?(p>=$a&&(p=$a-1),g=e(G,p),j=g.length,S=w.length,d=t(g,w,j,S),d==1&&(p--,n(g,F<j?H:G,j))):(p==0&&(d=p=1),g=G.slice()),j=g.length,j<S&&g.unshift(0),n(w,g,S),d==-1&&(S=w.length,d=t(G,w,F,S),d<1&&(p++,n(w,F<S?H:G,S))),S=w.length):d===0&&(p++,w=[0]),b[f++]=p,d&&w[0]?w[S++]=Y[W]||0:(w=[Y[W]],S=1);while((W++<K||w[0]!==void 0)&&E--)}return b[0]||b.shift(),v.e=h,zn(v,l?s+ma(v)+1:s)}})();function NL(e,t){var n,i,a,s,l,d,h=0,f=0,p=e.constructor,g=p.precision;if(ma(e)>16)throw Error(YS+ma(e));if(!e.s)return new p(fl);for(gi=!1,d=g,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(i=Math.log(Sh(2,f))/Math.LN10*2+5|0,d+=i,n=a=s=new p(fl),p.precision=d;;){if(a=zn(a.times(e),d),n=n.times(++h),l=s.plus(Xd(a,n,d)),ud(l.d).slice(0,d)===ud(s.d).slice(0,d)){for(;f--;)s=zn(s.times(s),d);return p.precision=g,t==null?(gi=!0,zn(s,g)):s}s=l}}function ma(e){for(var t=e.e*ti,n=e.d[0];n>=10;n/=10)t++;return t}function Q2(e,t,n){if(t>e.LN10.sd())throw gi=!0,n&&(e.precision=n),Error(Ql+"LN10 precision limit exceeded");return zn(new e(e.LN10),t)}function Gu(e){for(var t="";e--;)t+="0";return t}function mg(e,t){var n,i,a,s,l,d,h,f,p,g=1,j=10,v=e,b=v.d,w=v.constructor,S=w.precision;if(v.s<1)throw Error(Ql+(v.s?"NaN":"-Infinity"));if(v.eq(fl))return new w(0);if(t==null?(gi=!1,f=S):f=t,v.eq(10))return t==null&&(gi=!0),Q2(w,f);if(f+=j,w.precision=f,n=ud(b),i=n.charAt(0),s=ma(v),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)v=v.times(e),n=ud(v.d),i=n.charAt(0),g++;s=ma(v),i>1?(v=new w("0."+n),s++):v=new w(i+"."+n.slice(1))}else return h=Q2(w,f+2,S).times(s+""),v=mg(new w(i+"."+n.slice(1)),f-j).plus(h),w.precision=S,t==null?(gi=!0,zn(v,S)):v;for(d=l=v=Xd(v.minus(fl),v.plus(fl),f),p=zn(v.times(v),f),a=3;;){if(l=zn(l.times(p),f),h=d.plus(Xd(l,new w(a),f)),ud(h.d).slice(0,f)===ud(d.d).slice(0,f))return d=d.times(2),s!==0&&(d=d.plus(Q2(w,f+2,S).times(s+""))),d=Xd(d,new w(g),f),w.precision=S,t==null?(gi=!0,zn(d,S)):d;d=h,a+=2}}function WT(e,t){var n,i,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;)++i;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(i,a),t){if(a-=i,n=n-i-1,e.e=zm(n/ti),e.d=[],i=(n+1)%ti,n<0&&(i+=ti),i<a){for(i&&e.d.push(+t.slice(0,i)),a-=ti;i<a;)e.d.push(+t.slice(i,i+=ti));t=t.slice(i),i=ti-t.length}else i-=a;for(;i--;)t+="0";if(e.d.push(+t),gi&&(e.e>M0||e.e<-M0))throw Error(YS+n)}else e.s=0,e.e=0,e.d=[0];return e}function zn(e,t,n){var i,a,s,l,d,h,f,p,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(i=t-l,i<0)i+=ti,a=t,f=g[p=0];else{if(p=Math.ceil((i+1)/ti),s=g.length,p>=s)return e;for(f=s=g[p],l=1;s>=10;s/=10)l++;i%=ti,a=i-ti+l}if(n!==void 0&&(s=Sh(10,l-a-1),d=f/s%10|0,h=t<0||g[p+1]!==void 0||f%s,h=n<4?(d||h)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||h||n==6&&(i>0?a>0?f/Sh(10,l-a):0:g[p-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return h?(s=ma(e),g.length=1,t=t-s-1,g[0]=Sh(10,(ti-t%ti)%ti),e.e=zm(-t/ti)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(i==0?(g.length=p,s=1,p--):(g.length=p+1,s=Sh(10,ti-i),g[p]=a>0?(f/Sh(10,l-a)%Sh(10,a)|0)*s:0),h)for(;;)if(p==0){(g[0]+=s)==$a&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=$a)break;g[p--]=0,s=1}for(i=g.length;g[--i]===0;)g.pop();if(gi&&(e.e>M0||e.e<-M0))throw Error(YS+ma(e));return e}function _L(e,t){var n,i,a,s,l,d,h,f,p,g,j=e.constructor,v=j.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new j(e),gi?zn(t,v):t;if(h=e.d,g=t.d,i=t.e,f=e.e,h=h.slice(),l=f-i,l){for(p=l<0,p?(n=h,l=-l,d=g.length):(n=g,i=f,d=h.length),a=Math.max(Math.ceil(v/ti),d)+2,l>a&&(l=a,n.length=1),n.reverse(),a=l;a--;)n.push(0);n.reverse()}else{for(a=h.length,d=g.length,p=a<d,p&&(d=a),a=0;a<d;a++)if(h[a]!=g[a]){p=h[a]<g[a];break}l=0}for(p&&(n=h,h=g,g=n,t.s=-t.s),d=h.length,a=g.length-d;a>0;--a)h[d++]=0;for(a=g.length;a>l;){if(h[--a]<g[a]){for(s=a;s&&h[--s]===0;)h[s]=$a-1;--h[s],h[a]+=$a}h[a]-=g[a]}for(;h[--d]===0;)h.pop();for(;h[0]===0;h.shift())--i;return h[0]?(t.d=h,t.e=i,gi?zn(t,v):t):new j(0)}function Zh(e,t,n){var i,a=ma(e),s=ud(e.d),l=s.length;return t?(n&&(i=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Gu(i):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Gu(-a-1)+s,n&&(i=n-l)>0&&(s+=Gu(i))):a>=l?(s+=Gu(a+1-l),n&&(i=n-a-1)>0&&(s=s+"."+Gu(i))):((i=a+1)<l&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-l)>0&&(a+1===l&&(s+="."),s+=Gu(i))),e.s<0?"-"+s:s}function $T(e,t){if(e.length>t)return e.length=t,!0}function CL(e){var t,n,i;function a(s){var l=this;if(!(l instanceof a))return new a(s);if(l.constructor=a,s instanceof a){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Fh+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return WT(l,s.toString())}else if(typeof s!="string")throw Error(Fh+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,Kte.test(s))WT(l,s);else throw Error(Fh+s)}if(a.prototype=St,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=CL,a.config=a.set=Gte,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return a.config(e),a}function Gte(e){if(!e||typeof e!="object")throw Error(Ql+"Object expected");var t,n,i,a=["precision",1,Im,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((i=e[n=a[t]])!==void 0)if(zm(i)===i&&i>=a[t+1]&&i<=a[t+2])this[n]=i;else throw Error(Fh+n+": "+i);if((i=e[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Fh+n+": "+i);return this}var ZS=CL(Vte);fl=new ZS(1);const Nn=ZS;var Qte=e=>e,AL={},EL=e=>e===AL,VT=e=>function t(){return arguments.length===0||arguments.length===1&&EL(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},TL=(e,t)=>e===1?t:VT(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(l=>l!==AL).length;return s>=e?t(...i):TL(e-s,VT(function(){for(var l=arguments.length,d=new Array(l),h=0;h<l;h++)d[h]=arguments[h];var f=i.map(p=>EL(p)?d.shift():p);return t(...f,...d)}))}),Yte=e=>TL(e.length,e),sw=(e,t)=>{for(var n=[],i=e;i<t;++i)n[i-e]=i;return n},Zte=Yte((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Xte=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length)return Qte;var a=n.reverse(),s=a[0],l=a.slice(1);return function(){return l.reduce((d,h)=>h(d),s(...arguments))}};function PL(e){var t;return e===0?t=1:t=Math.floor(new Nn(e).abs().log(10).toNumber())+1,t}function kL(e,t,n){for(var i=new Nn(e),a=0,s=[];i.lt(t)&&a<1e5;)s.push(i.toNumber()),i=i.add(n),a++;return s}var DL=e=>{var[t,n]=e,[i,a]=[t,n];return t>n&&([i,a]=[n,t]),[i,a]},OL=(e,t,n)=>{if(e.lte(0))return new Nn(0);var i=PL(e.toNumber()),a=new Nn(10).pow(i),s=e.div(a),l=i!==1?.05:.1,d=new Nn(Math.ceil(s.div(l).toNumber())).add(n).mul(l),h=d.mul(a);return t?new Nn(h.toNumber()):new Nn(Math.ceil(h.toNumber()))},Jte=(e,t,n)=>{var i=new Nn(1),a=new Nn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(i=new Nn(10).pow(PL(e)-1),a=new Nn(Math.floor(a.div(i).toNumber())).mul(i)):s>1&&(a=new Nn(Math.floor(e)))}else e===0?a=new Nn(Math.floor((t-1)/2)):n||(a=new Nn(Math.floor(e)));var l=Math.floor((t-1)/2),d=Xte(Zte(h=>a.add(new Nn(h-l).mul(i)).toNumber()),sw);return d(0,t)},ML=function(t,n,i,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(i-1)))return{step:new Nn(0),tickMin:new Nn(0),tickMax:new Nn(0)};var l=OL(new Nn(n).sub(t).div(i-1),a,s),d;t<=0&&n>=0?d=new Nn(0):(d=new Nn(t).add(n).div(2),d=d.sub(new Nn(d).mod(l)));var h=Math.ceil(d.sub(t).div(l).toNumber()),f=Math.ceil(new Nn(n).sub(d).div(l).toNumber()),p=h+f+1;return p>i?ML(t,n,i,a,s+1):(p<i&&(f=n>0?f+(i-p):f,h=n>0?h:h+(i-p)),{step:l,tickMin:d.sub(new Nn(h).mul(l)),tickMax:d.add(new Nn(f).mul(l))})},ere=function(t){var[n,i]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),[d,h]=DL([n,i]);if(d===-1/0||h===1/0){var f=h===1/0?[d,...sw(0,a-1).map(()=>1/0)]:[...sw(0,a-1).map(()=>-1/0),h];return n>i?f.reverse():f}if(d===h)return Jte(d,a,s);var{step:p,tickMin:g,tickMax:j}=ML(d,h,l,s,0),v=kL(g,j.add(new Nn(.1).mul(p)),p);return n>i?v.reverse():v},tre=function(t,n){var[i,a]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,d]=DL([i,a]);if(l===-1/0||d===1/0)return[i,a];if(l===d)return[l];var h=Math.max(n,2),f=OL(new Nn(d).sub(l).div(h-1),s,0),p=[...kL(new Nn(l),new Nn(d),f),d];return s===!1&&(p=p.map(g=>Math.round(g))),i>a?p.reverse():p},LL=e=>e.rootProps.maxBarSize,rre=e=>e.rootProps.barGap,RL=e=>e.rootProps.barCategoryGap,nre=e=>e.rootProps.barSize,Fg=e=>e.rootProps.stackOffset,IL=e=>e.rootProps.reverseStackOrder,XS=e=>e.options.chartName,JS=e=>e.rootProps.syncId,zL=e=>e.rootProps.syncMethod,eN=e=>e.options.eventEmitter,ys={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Kd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},hl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},qx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},ire={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Kd.angleAxisId,includeHidden:!1,name:void 0,reversed:Kd.reversed,scale:Kd.scale,tick:Kd.tick,tickCount:void 0,ticks:void 0,type:Kd.type,unit:void 0},are={allowDataOverflow:hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hl.scale,tick:hl.tick,tickCount:hl.tickCount,ticks:void 0,type:hl.type,unit:void 0},sre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Kd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Kd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Kd.scale,tick:Kd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ore={allowDataOverflow:hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hl.scale,tick:hl.tick,tickCount:hl.tickCount,ticks:void 0,type:"category",unit:void 0},tN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?sre:ire,rN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?ore:are,Ux=e=>e.polarOptions,nN=He([fu,mu,ka],RM),BL=He([Ux,nN],(e,t)=>{if(e!=null)return qs(e.innerRadius,t,0)}),FL=He([Ux,nN],(e,t)=>{if(e!=null)return qs(e.outerRadius,t,t*.8)}),lre=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},qL=He([Ux],lre);He([tN,qL],qx);var UL=He([nN,BL,FL],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});He([rN,UL],qx);var HL=He([ln,Ux,BL,FL,fu,mu],(e,t,n,i,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||i==null)){var{cx:l,cy:d,startAngle:h,endAngle:f}=t;return{cx:qs(l,a,a/2),cy:qs(d,s,s/2),innerRadius:n,outerRadius:i,startAngle:h,endAngle:f,clockWise:!1}}}),xi=(e,t)=>t,qg=(e,t,n)=>n;function iN(e){return e?.id}function WL(e,t,n){var{chartData:i=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=n,l=new Map;return e.forEach(d=>{var h,f=(h=d.data)!==null&&h!==void 0?h:i;if(!(f==null||f.length===0)){var p=iN(d);f.forEach((g,j)=>{var v=s==null||a?j:String(ni(g,s,null)),b=ni(g,d.dataKey,0),w;l.has(v)?w=l.get(v):w={},Object.assign(w,{[p]:b}),l.set(v,w)})}}),Array.from(l.values())}function Hx(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Wx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function $x(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function cre(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var Oa=e=>{var t=ln(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Bm=e=>e.tooltip.settings.axisId;function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function L0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(i){dre(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function dre(e,t,n){return(t=ure(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ure(e){var t=hre(e,"string");return typeof t=="symbol"?t:t+""}function hre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ow=[0,"auto"],Ha={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},$L=(e,t)=>e.cartesianAxis.xAxis[t],yu=(e,t)=>{var n=$L(e,t);return n??Ha},Wa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ow,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Og},VL=(e,t)=>e.cartesianAxis.yAxis[t],vu=(e,t)=>{var n=VL(e,t);return n??Wa},fre={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},aN=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??fre},Ti=(e,t,n)=>{switch(t){case"xAxis":return yu(e,n);case"yAxis":return vu(e,n);case"zAxis":return aN(e,n);case"angleAxis":return tN(e,n);case"radiusAxis":return rN(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},mre=(e,t,n)=>{switch(t){case"xAxis":return yu(e,n);case"yAxis":return vu(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ug=(e,t,n)=>{switch(t){case"xAxis":return yu(e,n);case"yAxis":return vu(e,n);case"angleAxis":return tN(e,n);case"radiusAxis":return rN(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},KL=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function sN(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var oN=e=>e.graphicalItems.cartesianItems,pre=He([xi,qg],sN),lN=(e,t,n)=>e.filter(n).filter(i=>t?.includeHidden===!0?!0:!i.hide),Hg=He([oN,Ti,pre],lN,{memoizeOptions:{resultEqualityCheck:$x}}),GL=He([Hg],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Hx)),QL=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),gre=He([Hg],QL),cN=e=>e.map(t=>t.data).filter(Boolean).flat(1),yre=He([Hg],cN,{memoizeOptions:{resultEqualityCheck:$x}}),dN=(e,t)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:a}=t;return e.length>0?e:n.slice(i,a+1)},uN=He([yre,bL],dN),hN=(e,t,n)=>t?.dataKey!=null?e.map(i=>({value:ni(i,t.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>e.map(a=>({value:ni(a,i)}))):e.map(i=>({value:i})),Vx=He([uN,Ti,Hg],hN);function YL(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Lv(e){if(yd(e)||e instanceof Date){var t=Number(e);if(Ai(t))return t}}function GT(e){if(Array.isArray(e)){var t=[Lv(e[0]),Lv(e[1])];return rh(t)?t:void 0}var n=Lv(e);if(n!=null)return[n,n]}function cu(e){return e.map(Lv).filter(kG)}function vre(e,t,n){return!n||typeof t!="number"||Nc(t)?[]:n.length?cu(n.flatMap(i=>{var a=ni(e,i.dataKey),s,l;if(Array.isArray(a)?[s,l]=a:s=l=a,!(!Ai(s)||!Ai(l)))return[t-s,t+l]})):[]}var Ma=e=>{var t=Oa(e),n=Bm(e);return Ug(e,t,n)},Wg=He([Ma],e=>e?.dataKey),xre=He([GL,bL,Ma],WL),ZL=(e,t,n,i)=>{var a={},s=t.reduce((l,d)=>{if(d.stackId==null)return l;var h=l[d.stackId];return h==null&&(h=[]),h.push(d),l[d.stackId]=h,l},a);return Object.fromEntries(Object.entries(s).map(l=>{var[d,h]=l,f=i?[...h].reverse():h,p=f.map(iN);return[d,{stackedData:XY(e,p,n),graphicalItems:f}]}))},lw=He([xre,GL,Fg,IL],ZL),XL=(e,t,n,i)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(i==null&&n!=="zAxis"){var l=nZ(e,a,s);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},bre=He([Ti],e=>e.allowDataOverflow),fN=e=>{var t;if(e==null||!("domain"in e))return ow;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=cu(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:ow},mN=He([Ti],fN),pN=He([mN,bre],jL),jre=He([lw,gu,xi,pN],XL,{memoizeOptions:{resultEqualityCheck:Wx}}),Kx=e=>e.errorBars,wre=(e,t,n)=>e.flatMap(i=>t[i.id]).filter(Boolean).filter(i=>YL(n,i)),R0=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n.filter(Boolean);if(a.length!==0){var s=a.flat(),l=Math.min(...s),d=Math.max(...s);return[l,d]}},gN=(e,t,n,i,a)=>{var s,l;if(n.length>0&&e.forEach(d=>{n.forEach(h=>{var f,p,g=(f=i[h.id])===null||f===void 0?void 0:f.filter(_=>YL(a,_)),j=ni(d,(p=t.dataKey)!==null&&p!==void 0?p:h.dataKey),v=vre(d,j,g);if(v.length>=2){var b=Math.min(...v),w=Math.max(...v);(s==null||b<s)&&(s=b),(l==null||w>l)&&(l=w)}var S=GT(j);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var h=GT(ni(d,t.dataKey));h!=null&&(s=s==null?h[0]:Math.min(s,h[0]),l=l==null?h[1]:Math.max(l,h[1]))}),Ai(s)&&Ai(l))return[s,l]},Sre=He([uN,Ti,gre,Kx,xi],gN,{memoizeOptions:{resultEqualityCheck:Wx}});function Nre(e){var{value:t}=e;if(yd(t)||t instanceof Date)return t}var _re=(e,t,n)=>{var i=e.map(Nre).filter(a=>a!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&g8(i))?FM(0,e.length):t.allowDuplicatedCategory?i:Array.from(new Set(i))},JL=e=>e.referenceElements.dots,Fm=(e,t,n)=>e.filter(i=>i.ifOverflow==="extendDomain").filter(i=>t==="xAxis"?i.xAxisId===n:i.yAxisId===n),Cre=He([JL,xi,qg],Fm),eR=e=>e.referenceElements.areas,Are=He([eR,xi,qg],Fm),tR=e=>e.referenceElements.lines,Ere=He([tR,xi,qg],Fm),rR=(e,t)=>{if(e!=null){var n=cu(e.map(i=>t==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Tre=He(Cre,xi,rR),nR=(e,t)=>{if(e!=null){var n=cu(e.flatMap(i=>[t==="xAxis"?i.x1:i.y1,t==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Pre=He([Are,xi],nR);function kre(e){var t;if(e.x!=null)return cu([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(i=>i.x);return n==null||n.length===0?[]:cu(n)}function Dre(e){var t;if(e.y!=null)return cu([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(i=>i.y);return n==null||n.length===0?[]:cu(n)}var iR=(e,t)=>{if(e!=null){var n=e.flatMap(i=>t==="xAxis"?kre(i):Dre(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Ore=He([Ere,xi],iR),Mre=He(Tre,Ore,Pre,(e,t,n)=>R0(e,n,t)),yN=(e,t,n,i,a,s,l,d)=>{if(n!=null)return n;var h=l==="vertical"&&d==="xAxis"||l==="horizontal"&&d==="yAxis",f=h?R0(i,s,a):R0(s,a);return $te(t,f,e.allowDataOverflow)},Lre=He([Ti,mN,pN,jre,Sre,Mre,ln,xi],yN,{memoizeOptions:{resultEqualityCheck:Wx}}),Rre=[0,1],vN=(e,t,n,i,a,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:d,type:h}=e,f=lf(t,s);if(f&&d==null){var p;return FM(0,(p=n?.length)!==null&&p!==void 0?p:0)}return h==="category"?_re(i,e,f):a==="expand"?Rre:l}},xN=He([Ti,ln,uN,Vx,Fg,xi,Lre],vN),aR=(e,t,n,i,a)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":l==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var d="scale".concat(Tg(s));return d in Hp?d:"point"}}},qm=He([Ti,ln,KL,XS,xi],aR);function Ire(e){if(e!=null){if(e in Hp)return Hp[e]();var t="scale".concat(Tg(e));if(t in Hp)return Hp[t]()}}function bN(e,t,n,i){if(!(n==null||i==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(i);var a=Ire(t);if(a!=null){var s=a.domain(n).range(i);return KY(s),s}}}var jN=(e,t,n)=>{var i=fN(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&rh(e))return ere(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&rh(e))return tre(e,t.tickCount,t.allowDecimals)}},wN=He([xN,Ug,qm],jN),SN=(e,t,n,i)=>{if(i!=="angleAxis"&&e?.type==="number"&&rh(t)&&Array.isArray(n)&&n.length>0){var a=t[0],s=n[0],l=t[1],d=n[n.length-1];return[Math.min(a,s),Math.max(l,d)]}return t},zre=He([Ti,xN,wN,xi],SN),Bre=He(Vx,Ti,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,i=Array.from(cu(e.map(g=>g.value))).sort((g,j)=>g-j),a=i[0],s=i[i.length-1];if(a==null||s==null)return 1/0;var l=s-a;if(l===0)return 1/0;for(var d=0;d<i.length-1;d++){var h=i[d],f=i[d+1];if(!(h==null||f==null)){var p=f-h;n=Math.min(n,p)}}return n/l}}),sR=He(Bre,ln,RL,ka,(e,t,n,i,a)=>a,(e,t,n,i,a)=>{if(!Ai(e))return 0;var s=t==="vertical"?i.height:i.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var l=qs(n,e*s),d=e*s/2;return d-l-(d-l)/s*l}return 0}),Fre=(e,t,n)=>{var i=yu(e,t);return i==null||typeof i.padding!="string"?0:sR(e,"xAxis",t,n,i.padding)},qre=(e,t,n)=>{var i=vu(e,t);return i==null||typeof i.padding!="string"?0:sR(e,"yAxis",t,n,i.padding)},Ure=He(yu,Fre,(e,t)=>{var n,i;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((n=a.left)!==null&&n!==void 0?n:0)+t,right:((i=a.right)!==null&&i!==void 0?i:0)+t}}),Hre=He(vu,qre,(e,t)=>{var n,i;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((n=a.top)!==null&&n!==void 0?n:0)+t,bottom:((i=a.bottom)!==null&&i!==void 0?i:0)+t}}),Wre=He([ka,Ure,_x,Nx,(e,t,n)=>n],(e,t,n,i,a)=>{var{padding:s}=i;return a?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),$re=He([ka,ln,Hre,_x,Nx,(e,t,n)=>n],(e,t,n,i,a,s)=>{var{padding:l}=a;return s?[i.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),$g=(e,t,n,i)=>{var a;switch(t){case"xAxis":return Wre(e,n,i);case"yAxis":return $re(e,n,i);case"zAxis":return(a=aN(e,n))===null||a===void 0?void 0:a.range;case"angleAxis":return qL(e);case"radiusAxis":return UL(e,n);default:return}},oR=He([Ti,$g],qx),Gx=He([Ti,qm,zre,oR],bN);He([Hg,Kx,xi],wre);function lR(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Qx=(e,t)=>t,Yx=(e,t,n)=>n,Vre=He(wx,Qx,Yx,(e,t,n)=>e.filter(i=>i.orientation===t).filter(i=>i.mirror===n).sort(lR)),Kre=He(Sx,Qx,Yx,(e,t,n)=>e.filter(i=>i.orientation===t).filter(i=>i.mirror===n).sort(lR)),cR=(e,t)=>({width:e.width,height:t.height}),Gre=(e,t)=>{var n=typeof t.width=="number"?t.width:Og;return{width:n,height:e.height}},dR=He(ka,yu,cR),Qre=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Yre=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},Zre=He(mu,ka,Vre,Qx,Yx,(e,t,n,i,a)=>{var s={},l;return n.forEach(d=>{var h=cR(t,d);l==null&&(l=Qre(t,i,e));var f=i==="top"&&!a||i==="bottom"&&a;s[d.id]=l-Number(f)*h.height,l+=(f?-1:1)*h.height}),s}),Xre=He(fu,ka,Kre,Qx,Yx,(e,t,n,i,a)=>{var s={},l;return n.forEach(d=>{var h=Gre(t,d);l==null&&(l=Yre(t,i,e));var f=i==="left"&&!a||i==="right"&&a;s[d.id]=l-Number(f)*h.width,l+=(f?-1:1)*h.width}),s}),Jre=(e,t)=>{var n=yu(e,t);if(n!=null)return Zre(e,n.orientation,n.mirror)},ene=He([ka,yu,Jre,(e,t)=>t],(e,t,n,i)=>{if(t!=null){var a=n?.[i];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),tne=(e,t)=>{var n=vu(e,t);if(n!=null)return Xre(e,n.orientation,n.mirror)},rne=He([ka,vu,tne,(e,t)=>t],(e,t,n,i)=>{if(t!=null){var a=n?.[i];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),uR=He(ka,vu,(e,t)=>{var n=typeof t.width=="number"?t.width:Og;return{width:n,height:e.height}}),QT=(e,t,n)=>{switch(t){case"xAxis":return dR(e,n).width;case"yAxis":return uR(e,n).height;default:return}},hR=(e,t,n,i)=>{if(n!=null){var{allowDuplicatedCategory:a,type:s,dataKey:l}=n,d=lf(e,i),h=t.map(f=>f.value);if(l&&d&&s==="category"&&a&&g8(h))return h}},NN=He([ln,Vx,Ti,xi],hR),fR=(e,t,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:s}=n,l=lf(e,i);if(l&&(a==="number"||s!=="auto"))return t.map(d=>d.value)}},_N=He([ln,Vx,Ug,xi],fR),YT=He([ln,mre,qm,Gx,NN,_N,$g,wN,xi],(e,t,n,i,a,s,l,d,h)=>{if(t!=null){var f=lf(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:s,duplicateDomain:a,isCategorical:f,niceTicks:d,range:l,realScaleType:n,scale:i}}}),nne=(e,t,n,i,a,s,l,d,h)=>{if(!(t==null||i==null)){var f=lf(e,h),{type:p,ticks:g,tickCount:j}=t,v=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,b=p==="category"&&i.bandwidth?i.bandwidth()/v:0;b=h==="angleAxis"&&s!=null&&s.length>=2?Ka(s[0]-s[1])*2*b:b;var w=g||a;if(w){var S=w.map((_,E)=>{var D=l?l.indexOf(_):_;return{index:E,coordinate:i(D)+b,value:_,offset:b}});return S.filter(_=>Ai(_.coordinate))}return f&&d?d.map((_,E)=>({coordinate:i(_)+b,value:_,index:E,offset:b})).filter(_=>Ai(_.coordinate)):i.ticks?i.ticks(j).map(_=>({coordinate:i(_)+b,value:_,offset:b})):i.domain().map((_,E)=>({coordinate:i(_)+b,value:l?l[_]:_,index:E,offset:b}))}},mR=He([ln,Ug,qm,Gx,wN,$g,NN,_N,xi],nne),ine=(e,t,n,i,a,s,l)=>{if(!(t==null||n==null||i==null||i[0]===i[1])){var d=lf(e,l),{tickCount:h}=t,f=0;return f=l==="angleAxis"&&i?.length>=2?Ka(i[0]-i[1])*2*f:f,d&&s?s.map((p,g)=>({coordinate:n(p)+f,value:p,index:g,offset:f})):n.ticks?n.ticks(h).map(p=>({coordinate:n(p)+f,value:p,offset:f})):n.domain().map((p,g)=>({coordinate:n(p)+f,value:a?a[p]:p,index:g,offset:f}))}},_m=He([ln,Ug,Gx,$g,NN,_N,xi],ine),Cm=He(Ti,Gx,(e,t)=>{if(!(e==null||t==null))return L0(L0({},e),{},{scale:t})}),ane=He([Ti,qm,xN,oR],bN);He((e,t,n)=>aN(e,n),ane,(e,t)=>{if(!(e==null||t==null))return L0(L0({},e),{},{scale:t})});var sne=He([ln,wx,Sx],(e,t,n)=>{switch(e){case"horizontal":return t.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),pR=e=>e.options.defaultTooltipEventType,gR=e=>e.options.validateTooltipEventTypes;function yR(e,t,n){if(e==null)return t;var i=e?"axis":"item";return n==null?t:n.includes(i)?i:t}function CN(e,t){var n=pR(e),i=gR(e);return yR(t,n,i)}function one(e){return Ft(t=>CN(t,e))}var vR=(e,t)=>{var n,i=Number(t);if(!(Nc(i)||t==null))return i>=0?e==null||(n=e[i])===null||n===void 0?void 0:n.value:void 0},lne=e=>e.tooltip.settings,Zu={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},cne={itemInteraction:{click:Zu,hover:Zu},axisInteraction:{click:Zu,hover:Zu},keyboardInteraction:Zu,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},xR=Uo({name:"tooltip",initialState:cne,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:fi()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:i}=t.payload,a=jc(e).tooltipItemPayloads.indexOf(n);a>-1&&(e.tooltipItemPayloads[a]=i)},prepare:fi()},removeTooltipEntrySettings:{reducer(e,t){var n=jc(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:fi()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:dne,replaceTooltipEntrySettings:une,removeTooltipEntrySettings:hne,setTooltipSettingsState:fne,setActiveMouseOverItemIndex:bR,mouseLeaveItem:mne,mouseLeaveChart:jR,setActiveClickItemIndex:pne,setMouseOverAxisIndex:wR,setMouseClickAxisIndex:gne,setSyncInteraction:cw,setKeyboardInteraction:dw}=xR.actions,yne=xR.reducer;function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function iv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(i){vne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function vne(e,t,n){return(t=xne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xne(e){var t=bne(e,"string");return typeof t=="symbol"?t:t+""}function bne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jne(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function wne(e){return e.index!=null}var SR=(e,t,n,i)=>{if(t==null)return Zu;var a=jne(e,t,n);if(a==null)return Zu;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(wne(a)){if(s)return iv(iv({},a),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return iv(iv({},Zu),{},{coordinate:a.coordinate})};function Sne(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Nne(e,t){var n=Sne(e),i=t[0],a=t[1];if(n===void 0)return!1;var s=Math.min(i,a),l=Math.max(i,a);return n>=s&&n<=l}function _ne(e,t,n){if(n==null||t==null)return!0;var i=ni(e,t);return i==null||!rh(n)?!0:Nne(i,n)}var AN=(e,t,n,i)=>{var a=e?.index;if(a==null)return null;var s=Number(a);if(!Ai(s))return a;var l=0,d=1/0;t.length>0&&(d=t.length-1);var h=Math.max(l,Math.min(s,d)),f=t[h];return f==null||_ne(f,n,i)?String(h):null},NR=(e,t,n,i,a,s,l,d)=>{if(!(s==null||d==null)){var h=l[0],f=h==null?void 0:d(h.positions,s);if(f!=null)return f;var p=a?.[Number(s)];if(p)return n==="horizontal"?{x:p.coordinate,y:(i.top+t)/2}:{x:(i.left+e)/2,y:p.coordinate}}},_R=(e,t,n,i)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(n==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&i!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(l=>{var d;return((d=l.settings)===null||d===void 0?void 0:d.graphicalItemId)===a})},Vg=e=>e.options.tooltipPayloadSearcher,Um=e=>e.tooltip;function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function JT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(i){Cne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Cne(e,t,n){return(t=Ane(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ane(e){var t=Ene(e,"string");return typeof t=="symbol"?t:t+""}function Ene(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tne(e,t){return e??t}var CR=(e,t,n,i,a,s,l)=>{if(!(t==null||s==null)){var{chartData:d,computedData:h,dataStartIndex:f,dataEndIndex:p}=n,g=[];return e.reduce((j,v)=>{var b,{dataDefinedOnItem:w,settings:S}=v,_=Tne(w,d),E=Array.isArray(_)?oM(_,f,p):_,D=(b=S?.dataKey)!==null&&b!==void 0?b:i,W=S?.nameKey,K;if(i&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?K=PG(E,i,a):K=s(E,t,h,W),Array.isArray(K))K.forEach(F=>{var H=JT(JT({},S),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});j.push(n3({tooltipEntrySettings:H,dataKey:F.dataKey,payload:F.payload,value:ni(F.payload,F.dataKey),name:F.name}))});else{var B;j.push(n3({tooltipEntrySettings:S,dataKey:D,payload:K,value:ni(K,D),name:(B=ni(K,W))!==null&&B!==void 0?B:S?.name}))}return j},g)}},EN=He([Ma,ln,KL,XS,Oa],aR),Pne=He([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),kne=He([Oa,Bm],sN),Hm=He([Pne,Ma,kne],lN,{memoizeOptions:{resultEqualityCheck:$x}}),Dne=He([Hm],e=>e.filter(Hx)),One=He([Hm],cN,{memoizeOptions:{resultEqualityCheck:$x}}),Wm=He([One,gu],dN),Mne=He([Dne,gu,Ma],WL),TN=He([Wm,Ma,Hm],hN),AR=He([Ma],fN),Lne=He([Ma],e=>e.allowDataOverflow),ER=He([AR,Lne],jL),Rne=He([Hm],e=>e.filter(Hx)),Ine=He([Mne,Rne,Fg,IL],ZL),zne=He([Ine,gu,Oa,ER],XL),Bne=He([Hm],QL),Fne=He([Wm,Ma,Bne,Kx,Oa],gN,{memoizeOptions:{resultEqualityCheck:Wx}}),qne=He([JL,Oa,Bm],Fm),Une=He([qne,Oa],rR),Hne=He([eR,Oa,Bm],Fm),Wne=He([Hne,Oa],nR),$ne=He([tR,Oa,Bm],Fm),Vne=He([$ne,Oa],iR),Kne=He([Une,Vne,Wne],R0),Gne=He([Ma,AR,ER,zne,Fne,Kne,ln,Oa],yN),Kg=He([Ma,ln,Wm,TN,Fg,Oa,Gne],vN),Qne=He([Kg,Ma,EN],jN),Yne=He([Ma,Kg,Qne,Oa],SN),TR=e=>{var t=Oa(e),n=Bm(e),i=!1;return $g(e,t,n,i)},PR=He([Ma,TR],qx),kR=He([Ma,EN,Yne,PR],bN),Zne=He([ln,TN,Ma,Oa],hR),Xne=He([ln,TN,Ma,Oa],fR),Jne=(e,t,n,i,a,s,l,d)=>{if(t){var{type:h}=t,f=lf(e,d);if(i){var p=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,g=h==="category"&&i.bandwidth?i.bandwidth()/p:0;return g=d==="angleAxis"&&a!=null&&a?.length>=2?Ka(a[0]-a[1])*2*g:g,f&&l?l.map((j,v)=>({coordinate:i(j)+g,value:j,index:v,offset:g})):i.domain().map((j,v)=>({coordinate:i(j)+g,value:s?s[j]:j,index:v,offset:g}))}}},xu=He([ln,Ma,EN,kR,TR,Zne,Xne,Oa],Jne),PN=He([pR,gR,lne],(e,t,n)=>yR(n.shared,e,t)),DR=e=>e.tooltip.settings.trigger,kN=e=>e.tooltip.settings.defaultIndex,Gg=He([Um,PN,DR,kN],SR),Xh=He([Gg,Wm,Wg,Kg],AN),OR=He([xu,Xh],vR),DN=He([Gg],e=>{if(e)return e.dataKey}),eie=He([Gg],e=>{if(e)return e.graphicalItemId}),MR=He([Um,PN,DR,kN],_R),tie=He([fu,mu,ln,ka,xu,kN,MR,Vg],NR),rie=He([Gg,tie],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),nie=He([Gg],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),iie=He([MR,Xh,gu,Wg,OR,Vg,PN],CR);He([iie],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function eP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function tP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(n),!0).forEach(function(i){aie(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function aie(e,t,n){return(t=sie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sie(e){var t=oie(e,"string");return typeof t=="symbol"?t:t+""}function oie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lie=()=>Ft(Ma),cie=()=>{var e=lie(),t=Ft(xu),n=Ft(kR);return m0(!e||!n?void 0:tP(tP({},e),{},{scale:n}),t)};function rP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(n),!0).forEach(function(i){die(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function die(e,t,n){return(t=uie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uie(e){var t=hie(e,"string");return typeof t=="symbol"?t:t+""}function hie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fie=(e,t,n,i)=>{var a=t.find(s=>s&&s.index===n);if(a){if(e==="horizontal")return{x:a.coordinate,y:i.chartY};if(e==="vertical")return{x:i.chartX,y:a.coordinate}}return{x:0,y:0}},mie=(e,t,n,i)=>{var a=t.find(f=>f&&f.index===n);if(a){if(e==="centric"){var s=a.coordinate,{radius:l}=i;return $f($f($f({},i),fa(i.cx,i.cy,l,s)),{},{angle:s,radius:l})}var d=a.coordinate,{angle:h}=i;return $f($f($f({},i),fa(i.cx,i.cy,d,h)),{},{angle:h,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function pie(e,t){var{chartX:n,chartY:i}=e;return n>=t.left&&n<=t.left+t.width&&i>=t.top&&i<=t.top+t.height}var LR=(e,t,n,i,a)=>{var s,l=(s=t?.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(i==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<l;d++){var h,f,p,g,j,v=d>0?(h=n[d-1])===null||h===void 0?void 0:h.coordinate:(f=n[l-1])===null||f===void 0?void 0:f.coordinate,b=(p=n[d])===null||p===void 0?void 0:p.coordinate,w=d>=l-1?(g=n[0])===null||g===void 0?void 0:g.coordinate:(j=n[d+1])===null||j===void 0?void 0:j.coordinate,S=void 0;if(!(v==null||b==null||w==null))if(Ka(b-v)!==Ka(w-b)){var _=[];if(Ka(w-b)===Ka(a[1]-a[0])){S=w;var E=b+a[1]-a[0];_[0]=Math.min(E,(E+v)/2),_[1]=Math.max(E,(E+v)/2)}else{S=v;var D=w+a[1]-a[0];_[0]=Math.min(b,(D+b)/2),_[1]=Math.max(b,(D+b)/2)}var W=[Math.min(b,(S+b)/2),Math.max(b,(S+b)/2)];if(e>W[0]&&e<=W[1]||e>=_[0]&&e<=_[1]){var K;return(K=n[d])===null||K===void 0?void 0:K.index}}else{var B=Math.min(v,w),F=Math.max(v,w);if(e>(B+b)/2&&e<=(F+b)/2){var H;return(H=n[d])===null||H===void 0?void 0:H.index}}}else if(t)for(var I=0;I<l;I++){var R=t[I];if(R!=null){var Y=t[I+1],G=t[I-1];if(I===0&&Y!=null&&e<=(R.coordinate+Y.coordinate)/2||I===l-1&&G!=null&&e>(R.coordinate+G.coordinate)/2||I>0&&I<l-1&&G!=null&&Y!=null&&e>(R.coordinate+G.coordinate)/2&&e<=(R.coordinate+Y.coordinate)/2)return R.index}}return-1},gie=()=>Ft(XS),ON=(e,t)=>t,RR=(e,t,n)=>n,MN=(e,t,n,i)=>i,yie=He(xu,e=>ux(e,t=>t.coordinate)),LN=He([Um,ON,RR,MN],SR),RN=He([LN,Wm,Wg,Kg],AN),vie=(e,t,n)=>{if(t!=null){var i=Um(e);return t==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},IR=He([Um,ON,RR,MN],_R),I0=He([fu,mu,ln,ka,xu,MN,IR,Vg],NR),xie=He([LN,I0],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),zR=He([xu,RN],vR),bie=He([IR,RN,gu,Wg,zR,Vg,ON],CR),jie=He([LN,RN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),wie=(e,t,n,i,a,s,l)=>{if(!(!e||!n||!i||!a)&&pie(e,l)){var d=iZ(e,t),h=LR(d,s,a,n,i),f=fie(t,a,h,e);return{activeIndex:String(h),activeCoordinate:f}}},Sie=(e,t,n,i,a,s,l)=>{if(!(!e||!i||!a||!s||!n)){var d=sJ(e,n);if(d){var h=aZ(d,t),f=LR(h,l,s,i,a),p=mie(t,s,f,d);return{activeIndex:String(f),activeCoordinate:p}}}},Nie=(e,t,n,i,a,s,l,d)=>{if(!(!e||!t||!i||!a||!s))return t==="horizontal"||t==="vertical"?wie(e,t,i,a,s,l,d):Sie(e,t,n,i,a,s,l)},_ie=He(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var i=e[t];if(i!=null)return n?i.panoramaElement:i.element}}),Cie=He(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(i=>parseInt(i,10)).concat(Object.values(ys)),n=Array.from(new Set(t));return n.sort((i,a)=>i-a)},{memoizeOptions:{resultEqualityCheck:cre}});function nP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function iP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(n),!0).forEach(function(i){Aie(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Aie(e,t,n){return(t=Eie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eie(e){var t=Tie(e,"string");return typeof t=="symbol"?t:t+""}function Tie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pie={},kie={zIndexMap:Object.values(ys).reduce((e,t)=>iP(iP({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Pie)},Die=new Set(Object.values(ys));function Oie(e){return Die.has(e)}var BR=Uo({name:"zIndex",initialState:kie,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:fi()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!Oie(n)&&delete e.zIndexMap[n])},prepare:fi()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:i,isPanorama:a}=t.payload;e.zIndexMap[n]?a?e.zIndexMap[n].panoramaElement=i:e.zIndexMap[n].element=i:e.zIndexMap[n]={consumers:0,element:a?void 0:i,panoramaElement:a?i:void 0}},prepare:fi()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:fi()}}}),{registerZIndexPortal:Mie,unregisterZIndexPortal:Lie,registerZIndexPortalElement:Rie,unregisterZIndexPortalElement:Iie}=BR.actions,zie=BR.reducer;function kc(e){var{zIndex:t,children:n}=e,i=LZ(),a=i&&t!==void 0&&t!==0,s=Ho(),l=vi();P.useLayoutEffect(()=>a?(l(Mie({zIndex:t})),()=>{l(Lie({zIndex:t}))}):Pg,[l,t,a]);var d=Ft(h=>_ie(h,t,s));return a?d?FD.createPortal(n,d):null:n}function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uw.apply(null,arguments)}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(n),!0).forEach(function(i){Bie(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Bie(e,t,n){return(t=Fie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fie(e){var t=qie(e,"string");return typeof t=="symbol"?t:t+""}function qie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uie(e){var{cursor:t,cursorComp:n,cursorProps:i}=e;return P.isValidElement(t)?P.cloneElement(t,i):P.createElement(n,i)}function Hie(e){var t,{coordinate:n,payload:i,index:a,offset:s,tooltipAxisBandSize:l,layout:d,cursor:h,tooltipEventType:f,chartName:p}=e,g=n,j=i,v=a;if(!h||!g||p!=="ScatterChart"&&f!=="axis")return null;var b,w,S;if(p==="ScatterChart")b=g,w=bX,S=ys.cursorLine;else if(p==="BarChart")b=jX(d,g,s,l),w=LM,S=ys.cursorRectangle;else if(d==="radial"&&x8(g)){var{cx:_,cy:E,radius:D,startAngle:W,endAngle:K}=IM(g);b={cx:_,cy:E,startAngle:W,endAngle:K,innerRadius:D,outerRadius:D},w=BM,S=ys.cursorLine}else b={points:dJ(d,g,s)},w=CS,S=ys.cursorLine;var B=typeof h=="object"&&"className"in h?h.className:void 0,F=av(av(av(av({stroke:"#ccc",pointerEvents:"none"},s),b),tg(h)),{},{payload:j,payloadIndex:v,className:Dn("recharts-tooltip-cursor",B)});return P.createElement(kc,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},P.createElement(Uie,{cursor:h,cursorComp:w,cursorProps:F}))}function Wie(e){var t=cie(),n=yM(),i=Mg(),a=gie();return t==null||n==null||i==null||a==null?null:P.createElement(Hie,uw({},e,{offset:n,layout:i,tooltipAxisBandSize:t,chartName:a}))}var FR=P.createContext(null),$ie=()=>P.useContext(FR),Y2={exports:{}},sP;function Vie(){return sP||(sP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(h,f,p){this.fn=h,this.context=f,this.once=p||!1}function s(h,f,p,g,j){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,g||h,j),b=n?n+f:f;return h._events[b]?h._events[b].fn?h._events[b]=[h._events[b],v]:h._events[b].push(v):(h._events[b]=v,h._eventsCount++),h}function l(h,f){--h._eventsCount===0?h._events=new i:delete h._events[f]}function d(){this._events=new i,this._eventsCount=0}d.prototype.eventNames=function(){var f=[],p,g;if(this._eventsCount===0)return f;for(g in p=this._events)t.call(p,g)&&f.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},d.prototype.listeners=function(f){var p=n?n+f:f,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var j=0,v=g.length,b=new Array(v);j<v;j++)b[j]=g[j].fn;return b},d.prototype.listenerCount=function(f){var p=n?n+f:f,g=this._events[p];return g?g.fn?1:g.length:0},d.prototype.emit=function(f,p,g,j,v,b){var w=n?n+f:f;if(!this._events[w])return!1;var S=this._events[w],_=arguments.length,E,D;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,j),!0;case 5:return S.fn.call(S.context,p,g,j,v),!0;case 6:return S.fn.call(S.context,p,g,j,v,b),!0}for(D=1,E=new Array(_-1);D<_;D++)E[D-1]=arguments[D];S.fn.apply(S.context,E)}else{var W=S.length,K;for(D=0;D<W;D++)switch(S[D].once&&this.removeListener(f,S[D].fn,void 0,!0),_){case 1:S[D].fn.call(S[D].context);break;case 2:S[D].fn.call(S[D].context,p);break;case 3:S[D].fn.call(S[D].context,p,g);break;case 4:S[D].fn.call(S[D].context,p,g,j);break;default:if(!E)for(K=1,E=new Array(_-1);K<_;K++)E[K-1]=arguments[K];S[D].fn.apply(S[D].context,E)}}return!0},d.prototype.on=function(f,p,g){return s(this,f,p,g,!1)},d.prototype.once=function(f,p,g){return s(this,f,p,g,!0)},d.prototype.removeListener=function(f,p,g,j){var v=n?n+f:f;if(!this._events[v])return this;if(!p)return l(this,v),this;var b=this._events[v];if(b.fn)b.fn===p&&(!j||b.once)&&(!g||b.context===g)&&l(this,v);else{for(var w=0,S=[],_=b.length;w<_;w++)(b[w].fn!==p||j&&!b[w].once||g&&b[w].context!==g)&&S.push(b[w]);S.length?this._events[v]=S.length===1?S[0]:S:l(this,v)}return this},d.prototype.removeAllListeners=function(f){var p;return f?(p=n?n+f:f,this._events[p]&&l(this,p)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(Y2)),Y2.exports}var Kie=Vie();const Gie=Zl(Kie);var pg=new Gie,hw="recharts.syncEvent.tooltip",oP="recharts.syncEvent.brush";function qR(e,t){if(t){var n=Number.parseInt(t,10);if(!Nc(n))return e?.[n]}}var Qie={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},UR=Uo({name:"options",initialState:Qie,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Yie=UR.reducer,{createEventEmitter:Zie}=UR.actions;function Xie(e){return e.tooltip.syncInteraction}var Jie={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},HR=Uo({name:"chartData",initialState:Jie,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:i}=t.payload;n!=null&&(e.dataStartIndex=n),i!=null&&(e.dataEndIndex=i)}}}),{setChartData:lP,setDataStartEndIndexes:eae,setComputedData:$ge}=HR.actions,tae=HR.reducer,rae=["x","y"];function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(i){nae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function nae(e,t,n){return(t=iae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iae(e){var t=aae(e,"string");return typeof t=="symbol"?t:t+""}function aae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sae(e,t){if(e==null)return{};var n,i,a=oae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function oae(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function lae(){var e=Ft(JS),t=Ft(eN),n=vi(),i=Ft(zL),a=Ft(xu),s=Mg(),l=Cx(),d=Ft(h=>h.rootProps.className);P.useEffect(()=>{if(e==null)return Pg;var h=(f,p,g)=>{if(t!==g&&e===f){if(i==="index"){var j;if(l&&p!==null&&p!==void 0&&(j=p.payload)!==null&&j!==void 0&&j.coordinate&&p.payload.sourceViewBox){var v=p.payload.coordinate,{x:b,y:w}=v,S=sae(v,rae),{x:_,y:E,width:D,height:W}=p.payload.sourceViewBox,K=Vf(Vf({},S),{},{x:l.x+(D?(b-_)/D:0)*l.width,y:l.y+(W?(w-E)/W:0)*l.height});n(Vf(Vf({},p),{},{payload:Vf(Vf({},p.payload),{},{coordinate:K})}))}else n(p);return}if(a!=null){var B;if(typeof i=="function"){var F={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},H=i(a,F);B=a[H]}else i==="value"&&(B=a.find(z=>String(z.value)===p.payload.label));var{coordinate:I}=p.payload;if(B==null||p.payload.active===!1||I==null||l==null){n(cw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:R,y:Y}=I,G=Math.min(R,l.x+l.width),ae=Math.min(Y,l.y+l.height),se={x:s==="horizontal"?B.coordinate:G,y:s==="horizontal"?ae:B.coordinate},Ne=cw({active:p.payload.active,coordinate:se,dataKey:p.payload.dataKey,index:String(B.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});n(Ne)}}};return pg.on(hw,h),()=>{pg.off(hw,h)}},[d,n,t,e,i,a,s,l])}function cae(){var e=Ft(JS),t=Ft(eN),n=vi();P.useEffect(()=>{if(e==null)return Pg;var i=(a,s,l)=>{t!==l&&e===a&&n(eae(s))};return pg.on(oP,i),()=>{pg.off(oP,i)}},[n,t,e])}function dae(){var e=vi();P.useEffect(()=>{e(Zie())},[e]),lae(),cae()}function uae(e,t,n,i,a,s){var l=Ft(v=>vie(v,e,t)),d=Ft(eN),h=Ft(JS),f=Ft(zL),p=Ft(Xie),g=p?.active,j=Cx();P.useEffect(()=>{if(!g&&h!=null&&d!=null){var v=cw({active:s,coordinate:n,dataKey:l,index:a,label:typeof i=="number"?String(i):i,sourceViewBox:j,graphicalItemId:void 0});pg.emit(hw,h,v,d)}},[g,n,l,a,i,d,h,f,s,j])}function dP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function uP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(n),!0).forEach(function(i){hae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function hae(e,t,n){return(t=fae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fae(e){var t=mae(e,"string");return typeof t=="symbol"?t:t+""}function mae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pae(e){return e.dataKey}function gae(e,t){return P.isValidElement(e)?P.cloneElement(e,t):typeof e=="function"?P.createElement(e,t):P.createElement(JZ,t)}var hP=[],yae={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function fP(e){var t,n,i=Hs(e,yae),{active:a,allowEscapeViewBox:s,animationDuration:l,animationEasing:d,content:h,filterNull:f,isAnimationActive:p,offset:g,payloadUniqBy:j,position:v,reverseDirection:b,useTranslate3d:w,wrapperStyle:S,cursor:_,shared:E,trigger:D,defaultIndex:W,portal:K,axisId:B}=i,F=vi(),H=typeof W=="number"?String(W):W;P.useEffect(()=>{F(fne({shared:E,trigger:D,axisId:B,active:a,defaultIndex:H}))},[F,E,D,B,a,H]);var I=Cx(),R=PM(),Y=one(E),{activeIndex:G,isActive:ae}=(t=Ft(ge=>jie(ge,Y,D,H)))!==null&&t!==void 0?t:{},se=Ft(ge=>bie(ge,Y,D,H)),Ne=Ft(ge=>zR(ge,Y,D,H)),z=Ft(ge=>xie(ge,Y,D,H)),ie=se,q=$ie(),re=(n=a??ae)!==null&&n!==void 0?n:!1,[ue,Q]=UQ([ie,re]),V=Y==="axis"?Ne:void 0;uae(Y,D,z,V,G,re);var ne=K??q;if(ne==null||I==null||Y==null)return null;var $=ie??hP;re||($=hP),f&&$.length&&($=mQ($.filter(ge=>ge.value!=null&&(ge.hide!==!0||i.includeHidden)),j,pae));var de=$.length>0,Z=P.createElement(sX,{allowEscapeViewBox:s,animationDuration:l,animationEasing:d,isAnimationActive:p,active:re,coordinate:z,hasPayload:de,offset:g,position:v,reverseDirection:b,useTranslate3d:w,viewBox:I,wrapperStyle:S,lastBoundingBox:ue,innerRef:Q,hasPortalFromProps:!!K},gae(h,uP(uP({},i),{},{payload:$,label:V,active:re,activeIndex:G,coordinate:z,accessibilityLayer:R})));return P.createElement(P.Fragment,null,FD.createPortal(Z,ne),re&&P.createElement(Wie,{cursor:_,tooltipEventType:Y,coordinate:z,payload:$,index:G}))}var Qg=e=>null;Qg.displayName="Cell";function vae(e,t,n){return(t=xae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xae(e){var t=bae(e,"string");return typeof t=="symbol"?t:t+""}function bae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jae{constructor(t){vae(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function wae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(i){Sae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Sae(e,t,n){return(t=Nae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nae(e){var t=_ae(e,"string");return typeof t=="symbol"?t:t+""}function _ae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cae={cacheSize:2e3,enableCache:!0},WR=wae({},Cae),pP=new jae(WR.cacheSize),Aae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gP="recharts_measurement_span";function Eae(e,t){var n=t.fontSize||"",i=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(d)}var yP=(e,t)=>{try{var n=document.getElementById(gP);n||(n=document.createElement("span"),n.setAttribute("id",gP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Aae,t),n.textContent="".concat(e);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},$p=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||kx.isSsr)return{width:0,height:0};if(!WR.enableCache)return yP(t,n);var i=Eae(t,n),a=pP.get(i);if(a)return a;var s=yP(t,n);return pP.set(i,s),s},$R;function Tae(e,t,n){return(t=Pae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pae(e){var t=kae(e,"string");return typeof t=="symbol"?t:t+""}function kae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dae=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Oae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Mae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Lae=["cm","mm","pt","pc","in","Q","px"];function Rae(e){return Lae.includes(e)}var im="NaN";function Iae(e,t){return e*Mae[t]}class ps{static parse(t){var n,[,i,a]=(n=Oae.exec(t))!==null&&n!==void 0?n:[];return i==null?ps.NaN:new ps(parseFloat(i),a??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Nc(t)&&(this.unit=""),n!==""&&!Dae.test(n)&&(this.num=NaN,this.unit=""),Rae(n)&&(this.num=Iae(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ps(NaN,""):new ps(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ps(NaN,""):new ps(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ps(NaN,""):new ps(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ps(NaN,""):new ps(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Nc(this.num)}}$R=ps;Tae(ps,"NaN",new $R(NaN,""));function VR(e){if(e==null||e.includes(im))return im;for(var t=e;t.includes("*")||t.includes("/");){var n,[,i,a,s]=(n=vP.exec(t))!==null&&n!==void 0?n:[],l=ps.parse(i??""),d=ps.parse(s??""),h=a==="*"?l.multiply(d):l.divide(d);if(h.isNaN())return im;t=t.replace(vP,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,p,g,j]=(f=xP.exec(t))!==null&&f!==void 0?f:[],v=ps.parse(p??""),b=ps.parse(j??""),w=g==="+"?v.add(b):v.subtract(b);if(w.isNaN())return im;t=t.replace(xP,w.toString())}return t}var bP=/\(([^()]*)\)/;function zae(e){for(var t=e,n;(n=bP.exec(t))!=null;){var[,i]=n;t=t.replace(bP,VR(i))}return t}function Bae(e){var t=e.replace(/\s+/g,"");return t=zae(t),t=VR(t),t}function Fae(e){try{return Bae(e)}catch{return im}}function Z2(e){var t=Fae(e.slice(5,-1));return t===im?"":t}var qae=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Uae=["dx","dy","angle","className","breakAll"];function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fw.apply(null,arguments)}function jP(e,t){if(e==null)return{};var n,i,a=Hae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hae(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var KR=/[ \f\n\r\t\v\u2028\u2029]+/,GR=e=>{var{children:t,breakAll:n,style:i}=e;try{var a=[];Ga(t)||(n?a=t.toString().split(""):a=t.toString().split(KR));var s=a.map(d=>({word:d,width:$p(d,i).width})),l=n?0:$p("",i).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}};function Wae(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var QR=(e,t,n,i)=>e.reduce((a,s)=>{var{word:l,width:d}=s,h=a[a.length-1];if(h&&d!=null&&(t==null||i||h.width+d+n<Number(t)))h.words.push(l),h.width+=d+n;else{var f={words:[l],width:d};a.push(f)}return a},[]),YR=e=>e.reduce((t,n)=>t.width>n.width?t:n),$ae="",wP=(e,t,n,i,a,s,l,d)=>{var h=e.slice(0,t),f=GR({breakAll:n,style:i,children:h+$ae});if(!f)return[!1,[]];var p=QR(f.wordsWithComputedWidth,s,l,d),g=p.length>a||YR(p).width>Number(s);return[g,p]},Vae=(e,t,n,i,a)=>{var{maxLines:s,children:l,style:d,breakAll:h}=e,f=Rt(s),p=String(l),g=QR(t,i,n,a);if(!f||a)return g;var j=g.length>s||YR(g).width>Number(i);if(!j)return g;for(var v=0,b=p.length-1,w=0,S;v<=b&&w<=p.length-1;){var _=Math.floor((v+b)/2),E=_-1,[D,W]=wP(p,E,h,d,s,i,n,a),[K]=wP(p,_,h,d,s,i,n,a);if(!D&&!K&&(v=_+1),D&&K&&(b=_-1),!D&&K){S=W;break}w++}return S||g},SP=e=>{var t=Ga(e)?[]:e.toString().split(KR);return[{words:t,width:void 0}]},Kae=e=>{var{width:t,scaleToFit:n,children:i,style:a,breakAll:s,maxLines:l}=e;if((t||n)&&!kx.isSsr){var d,h,f=GR({breakAll:s,children:i,style:a});if(f){var{wordsWithComputedWidth:p,spaceWidth:g}=f;d=p,h=g}else return SP(i);return Vae({breakAll:s,children:i,maxLines:l,style:a},d,h,t,!!n)}return SP(i)},ZR="#808080",Gae={angle:0,breakAll:!1,capHeight:"0.71em",fill:ZR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Zx=P.forwardRef((e,t)=>{var n=Hs(e,Gae),{x:i,y:a,lineHeight:s,capHeight:l,fill:d,scaleToFit:h,textAnchor:f,verticalAnchor:p}=n,g=jP(n,qae),j=P.useMemo(()=>Kae({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:h,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,h,g.style,g.width]),{dx:v,dy:b,angle:w,className:S,breakAll:_}=g,E=jP(g,Uae);if(!yd(i)||!yd(a)||j.length===0)return null;var D=Number(i)+(Rt(v)?v:0),W=Number(a)+(Rt(b)?b:0);if(!Ai(D)||!Ai(W))return null;var K;switch(p){case"start":K=Z2("calc(".concat(l,")"));break;case"middle":K=Z2("calc(".concat((j.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:K=Z2("calc(".concat(j.length-1," * -").concat(s,")"));break}var B=[];if(h){var F=j[0].width,{width:H}=g;B.push("scale(".concat(Rt(H)&&Rt(F)?H/F:1,")"))}return w&&B.push("rotate(".concat(w,", ").concat(D,", ").concat(W,")")),B.length&&(E.transform=B.join(" ")),P.createElement("text",fw({},Kl(E),{ref:t,x:D,y:W,className:Dn("recharts-text",S),textAnchor:f,fill:d.includes("url")?ZR:d}),j.map((I,R)=>{var Y=I.words.join(_?"":" ");return P.createElement("tspan",{x:D,dy:R===0?K:s,key:"".concat(Y,"-").concat(R)},Y)}))});Zx.displayName="Text";var Qae=["labelRef"],Yae=["content"];function NP(e,t){if(e==null)return{};var n,i,a=Zae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zae(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(n),!0).forEach(function(i){Xae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Xae(e,t,n){return(t=Jae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jae(e){var t=ese(e,"string");return typeof t=="symbol"?t:t+""}function ese(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gd.apply(null,arguments)}var XR=P.createContext(null),tse=e=>{var{x:t,y:n,upperWidth:i,lowerWidth:a,width:s,height:l,children:d}=e,h=P.useMemo(()=>({x:t,y:n,upperWidth:i,lowerWidth:a,width:s,height:l}),[t,n,i,a,s,l]);return P.createElement(XR.Provider,{value:h},d)},JR=()=>{var e=P.useContext(XR),t=Cx();return e||gM(t)},rse=P.createContext(null),nse=()=>{var e=P.useContext(rse),t=Ft(HL);return e||t},ise=e=>{var{value:t,formatter:n}=e,i=Ga(e.children)?t:e.children;return typeof n=="function"?n(i):i},IN=e=>e!=null&&typeof e=="function",ase=(e,t)=>{var n=Ka(t-e),i=Math.min(Math.abs(t-e),360);return n*i},sse=(e,t,n,i,a)=>{var{offset:s,className:l}=e,{cx:d,cy:h,innerRadius:f,outerRadius:p,startAngle:g,endAngle:j,clockWise:v}=a,b=(f+p)/2,w=ase(g,j),S=w>=0?1:-1,_,E;switch(t){case"insideStart":_=g+S*s,E=v;break;case"insideEnd":_=j-S*s,E=!v;break;case"end":_=j+S*s,E=v;break;default:throw new Error("Unsupported position ".concat(t))}E=w<=0?E:!E;var D=fa(d,h,b,_),W=fa(d,h,b,_+(E?1:-1)*359),K="M".concat(D.x,",").concat(D.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(E?0:1,`,
    `).concat(W.x,",").concat(W.y),B=Ga(e.id)?rg("recharts-radial-line-"):e.id;return P.createElement("text",Gd({},i,{dominantBaseline:"central",className:Dn("recharts-radial-bar-label",l)}),P.createElement("defs",null,P.createElement("path",{id:B,d:K})),P.createElement("textPath",{xlinkHref:"#".concat(B)},n))},ose=(e,t,n)=>{var{cx:i,cy:a,innerRadius:s,outerRadius:l,startAngle:d,endAngle:h}=e,f=(d+h)/2;if(n==="outside"){var{x:p,y:g}=fa(i,a,l+t,f);return{x:p,y:g,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var j=(s+l)/2,{x:v,y:b}=fa(i,a,j,f);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},mw=e=>"cx"in e&&Rt(e.cx),lse=(e,t)=>{var{parentViewBox:n,offset:i,position:a}=e,s;n!=null&&!mw(n)&&(s=n);var{x:l,y:d,upperWidth:h,lowerWidth:f,height:p}=t,g=l,j=l+(h-f)/2,v=(g+j)/2,b=(h+f)/2,w=g+h/2,S=p>=0?1:-1,_=S*i,E=S>0?"end":"start",D=S>0?"start":"end",W=h>=0?1:-1,K=W*i,B=W>0?"end":"start",F=W>0?"start":"end";if(a==="top"){var H={x:g+h/2,y:d-_,textAnchor:"middle",verticalAnchor:E};return ea(ea({},H),s?{height:Math.max(d-s.y,0),width:h}:{})}if(a==="bottom"){var I={x:j+f/2,y:d+p+_,textAnchor:"middle",verticalAnchor:D};return ea(ea({},I),s?{height:Math.max(s.y+s.height-(d+p),0),width:f}:{})}if(a==="left"){var R={x:v-K,y:d+p/2,textAnchor:B,verticalAnchor:"middle"};return ea(ea({},R),s?{width:Math.max(R.x-s.x,0),height:p}:{})}if(a==="right"){var Y={x:v+b+K,y:d+p/2,textAnchor:F,verticalAnchor:"middle"};return ea(ea({},Y),s?{width:Math.max(s.x+s.width-Y.x,0),height:p}:{})}var G=s?{width:b,height:p}:{};return a==="insideLeft"?ea({x:v+K,y:d+p/2,textAnchor:F,verticalAnchor:"middle"},G):a==="insideRight"?ea({x:v+b-K,y:d+p/2,textAnchor:B,verticalAnchor:"middle"},G):a==="insideTop"?ea({x:g+h/2,y:d+_,textAnchor:"middle",verticalAnchor:D},G):a==="insideBottom"?ea({x:j+f/2,y:d+p-_,textAnchor:"middle",verticalAnchor:E},G):a==="insideTopLeft"?ea({x:g+K,y:d+_,textAnchor:F,verticalAnchor:D},G):a==="insideTopRight"?ea({x:g+h-K,y:d+_,textAnchor:B,verticalAnchor:D},G):a==="insideBottomLeft"?ea({x:j+K,y:d+p-_,textAnchor:F,verticalAnchor:E},G):a==="insideBottomRight"?ea({x:j+f-K,y:d+p-_,textAnchor:B,verticalAnchor:E},G):a&&typeof a=="object"&&(Rt(a.x)||iu(a.x))&&(Rt(a.y)||iu(a.y))?ea({x:l+qs(a.x,b),y:d+qs(a.y,p),textAnchor:"end",verticalAnchor:"end"},G):ea({x:w,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},G)},cse={angle:0,offset:5,zIndex:ys.label,position:"middle",textBreakAll:!1};function Qu(e){var t=Hs(e,cse),{viewBox:n,position:i,value:a,children:s,content:l,className:d="",textBreakAll:h,labelRef:f}=t,p=nse(),g=JR(),j=i==="center"?g:p??g,v,b,w;if(n==null?v=j:mw(n)?v=n:v=gM(n),!v||Ga(a)&&Ga(s)&&!P.isValidElement(l)&&typeof l!="function")return null;var S=ea(ea({},t),{},{viewBox:v});if(P.isValidElement(l)){var{labelRef:_}=S,E=NP(S,Qae);return P.cloneElement(l,E)}if(typeof l=="function"){var{content:D}=S,W=NP(S,Yae);if(b=P.createElement(l,W),P.isValidElement(b))return b}else b=ise(t);var K=Kl(t);if(mw(v)){if(i==="insideStart"||i==="insideEnd"||i==="end")return sse(t,i,b,K,v);w=ose(v,t.offset,t.position)}else w=lse(t,v);return P.createElement(kc,{zIndex:t.zIndex},P.createElement(Zx,Gd({ref:f,className:Dn("recharts-label",d)},K,w,{textAnchor:Wae(K.textAnchor)?K.textAnchor:w.textAnchor,breakAll:h}),b))}Qu.displayName="Label";var dse=(e,t,n)=>{if(!e)return null;var i={viewBox:t,labelRef:n};return e===!0?P.createElement(Qu,Gd({key:"label-implicit"},i)):yd(e)?P.createElement(Qu,Gd({key:"label-implicit",value:e},i)):P.isValidElement(e)?e.type===Qu?P.cloneElement(e,ea({key:"label-implicit"},i)):P.createElement(Qu,Gd({key:"label-implicit",content:e},i)):IN(e)?P.createElement(Qu,Gd({key:"label-implicit",content:e},i)):e&&typeof e=="object"?P.createElement(Qu,Gd({},e,{key:"label-implicit"},i)):null};function use(e){var{label:t,labelRef:n}=e,i=JR();return dse(t,i,n)||null}var X2={},J2={},CP;function hse(){return CP||(CP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(J2)),J2}var ej={},AP;function fse(){return AP||(AP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(ej)),ej}var EP;function mse(){return EP||(EP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hse(),n=fse(),i=fS();function a(s){if(i.isArrayLike(s))return t.last(n.toArray(s))}e.last=a})(X2)),X2}var tj,TP;function pse(){return TP||(TP=1,tj=mse().last),tj}var gse=pse();const yse=Zl(gse);var vse=["valueAccessor"],xse=["dataKey","clockWise","id","textBreakAll","zIndex"];function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},z0.apply(null,arguments)}function PP(e,t){if(e==null)return{};var n,i,a=bse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function bse(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var jse=e=>Array.isArray(e.value)?yse(e.value):e.value,eI=P.createContext(void 0),wse=eI.Provider,tI=P.createContext(void 0),Sse=tI.Provider;function Nse(){return P.useContext(eI)}function _se(){return P.useContext(tI)}function Rv(e){var{valueAccessor:t=jse}=e,n=PP(e,vse),{dataKey:i,clockWise:a,id:s,textBreakAll:l,zIndex:d}=n,h=PP(n,xse),f=Nse(),p=_se(),g=f||p;return!g||!g.length?null:P.createElement(kc,{zIndex:d??ys.label},P.createElement(co,{className:"recharts-label-list"},g.map((j,v)=>{var b,w=Ga(i)?t(j,v):ni(j&&j.payload,i),S=Ga(s)?{}:{id:"".concat(s,"-").concat(v)};return P.createElement(Qu,z0({key:"label-".concat(v)},Kl(j),h,S,{fill:(b=n.fill)!==null&&b!==void 0?b:j.fill,parentViewBox:j.parentViewBox,value:w,textBreakAll:l,viewBox:j.viewBox,index:v,zIndex:0}))})))}Rv.displayName="LabelList";function rI(e){var{label:t}=e;return t?t===!0?P.createElement(Rv,{key:"labelList-implicit"}):P.isValidElement(t)||IN(t)?P.createElement(Rv,{key:"labelList-implicit",content:t}):typeof t=="object"?P.createElement(Rv,z0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var nI=e=>e.graphicalItems.polarItems,Cse=He([xi,qg],sN),Xx=He([nI,Ti,Cse],lN),Ase=He([Xx],cN),Jx=He([Ase,Fx],dN),Ese=He([Jx,Ti,Xx],hN);He([Jx,Ti,Xx],(e,t,n)=>n.length>0?e.flatMap(i=>n.flatMap(a=>{var s,l=ni(i,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(i=>({value:ni(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})));var kP=()=>{},Tse=He([Jx,Ti,Xx,Kx,xi],gN),Pse=He([Ti,mN,pN,kP,Tse,kP,ln,xi],yN),iI=He([Ti,ln,Jx,Ese,Fg,xi,Pse],vN),kse=He([iI,Ti,qm],jN);He([Ti,iI,kse,xi],SN);var Dse={radiusAxis:{},angleAxis:{}},aI=Uo({name:"polarAxis",initialState:Dse,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Vge,removeRadiusAxis:Kge,addAngleAxis:Gge,removeAngleAxis:Qge}=aI.actions,Ose=aI.reducer;function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function OP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(i){Mse(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Mse(e,t,n){return(t=Lse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lse(e){var t=Rse(e,"string");return typeof t=="symbol"?t:t+""}function Rse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ise=(e,t)=>t,zN=He([nI,Ise],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),zse=[],BN=(e,t,n)=>n?.length===0?zse:n,sI=He([Fx,zN,BN],(e,t,n)=>{var{chartData:i}=e;if(t!=null){var a;if(t?.data!=null&&t.data.length>0?a=t.data:a=i,(!a||!a.length)&&n!=null&&(a=n.map(s=>OP(OP({},t.presentationProps),s.props))),a!=null)return a}}),Bse=He([sI,zN,BN],(e,t,n)=>{if(!(e==null||t==null))return e.map((i,a)=>{var s,l=ni(i,t.nameKey,t.name),d;return n!=null&&(s=n[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?d=n[a].props.fill:typeof i=="object"&&i!=null&&"fill"in i?d=i.fill:d=t.fill,{value:jx(l,t.dataKey),color:d,payload:i,type:t.legendType}})}),Fse=He([sI,zN,BN,ka],(e,t,n,i)=>{if(!(t==null||e==null))return Woe({offset:i,pieSettings:t,displayedData:e,cells:n})}),rj={exports:{}},kn={};var MP;function qse(){if(MP)return kn;MP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),j=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case e:switch(w=w.type,w){case n:case a:case i:case h:case f:case j:return w;default:switch(w=w&&w.$$typeof,w){case l:case d:case g:case p:return w;case s:return w;default:return S}}case t:return S}}}return kn.ContextConsumer=s,kn.ContextProvider=l,kn.Element=e,kn.ForwardRef=d,kn.Fragment=n,kn.Lazy=g,kn.Memo=p,kn.Portal=t,kn.Profiler=a,kn.StrictMode=i,kn.Suspense=h,kn.SuspenseList=f,kn.isContextConsumer=function(w){return b(w)===s},kn.isContextProvider=function(w){return b(w)===l},kn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},kn.isForwardRef=function(w){return b(w)===d},kn.isFragment=function(w){return b(w)===n},kn.isLazy=function(w){return b(w)===g},kn.isMemo=function(w){return b(w)===p},kn.isPortal=function(w){return b(w)===t},kn.isProfiler=function(w){return b(w)===a},kn.isStrictMode=function(w){return b(w)===i},kn.isSuspense=function(w){return b(w)===h},kn.isSuspenseList=function(w){return b(w)===f},kn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===a||w===i||w===h||w===f||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===p||w.$$typeof===l||w.$$typeof===s||w.$$typeof===d||w.$$typeof===v||w.getModuleId!==void 0)},kn.typeOf=b,kn}var LP;function Use(){return LP||(LP=1,rj.exports=qse()),rj.exports}var Hse=Use(),RP=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",IP=null,nj=null,oI=e=>{if(e===IP&&Array.isArray(nj))return nj;var t=[];return P.Children.forEach(e,n=>{Ga(n)||(Hse.isFragment(n)?t=t.concat(oI(n.props.children)):t.push(n))}),nj=t,IP=e,t};function FN(e,t){var n=[],i=[];return Array.isArray(t)?i=t.map(a=>RP(a)):i=[RP(t)],oI(e).forEach(a=>{var s=Kh(a,"type.displayName")||Kh(a,"type.name");s&&i.indexOf(s)!==-1&&n.push(a)}),n}var ij={},zP;function Wse(){return zP||(zP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${a}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}e.isPlainObject=t})(ij)),ij}var aj,BP;function $se(){return BP||(BP=1,aj=Wse().isPlainObject),aj}var Vse=$se();const Kse=Zl(Vse);var FP,qP,UP,HP,WP;function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function VP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(i){Gse(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Gse(e,t,n){return(t=Qse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qse(e){var t=Yse(e,"string");return typeof t=="symbol"?t:t+""}function Yse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},B0.apply(null,arguments)}function Mp(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var KP=(e,t,n,i,a)=>{var s=n-i,l;return l=qi(FP||(FP=Mp(["M ",",",""])),e,t),l+=qi(qP||(qP=Mp(["L ",",",""])),e+n,t),l+=qi(UP||(UP=Mp(["L ",",",""])),e+n-s/2,t+a),l+=qi(HP||(HP=Mp(["L ",",",""])),e+n-s/2-i,t+a),l+=qi(WP||(WP=Mp(["L ",","," Z"])),e,t),l},Zse={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xse=e=>{var t=Hs(e,Zse),{x:n,y:i,upperWidth:a,lowerWidth:s,height:l,className:d}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:g}=t,j=P.useRef(null),[v,b]=P.useState(-1),w=P.useRef(a),S=P.useRef(s),_=P.useRef(l),E=P.useRef(n),D=P.useRef(i),W=Ox(e,"trapezoid-");if(P.useEffect(()=>{if(j.current&&j.current.getTotalLength)try{var se=j.current.getTotalLength();se&&b(se)}catch{}},[]),n!==+n||i!==+i||a!==+a||s!==+s||l!==+l||a===0&&s===0||l===0)return null;var K=Dn("recharts-trapezoid",d);if(!g)return P.createElement("g",null,P.createElement("path",B0({},Kl(t),{className:K,d:KP(n,i,a,s,l)})));var B=w.current,F=S.current,H=_.current,I=E.current,R=D.current,Y="0px ".concat(v===-1?1:v,"px"),G="".concat(v,"px 0px"),ae=kM(["strokeDasharray"],f,h);return P.createElement(Dx,{animationId:W,key:W,canBegin:v>0,duration:f,easing:h,isActive:g,begin:p},se=>{var Ne=Aa(B,a,se),z=Aa(F,s,se),ie=Aa(H,l,se),q=Aa(I,n,se),re=Aa(R,i,se);j.current&&(w.current=Ne,S.current=z,_.current=ie,E.current=q,D.current=re);var ue=se>0?{transition:ae,strokeDasharray:G}:{strokeDasharray:Y};return P.createElement("path",B0({},Kl(t),{className:K,d:KP(q,re,Ne,z,ie),ref:j,style:VP(VP({},ue),t.style)}))})},Jse=["option","shapeType","activeClassName"];function eoe(e,t){if(e==null)return{};var n,i,a=toe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function toe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function GP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function F0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(n),!0).forEach(function(i){roe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function roe(e,t,n){return(t=noe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function noe(e){var t=ioe(e,"string");return typeof t=="symbol"?t:t+""}function ioe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aoe(e,t){return F0(F0({},t),e)}function soe(e,t){return e==="symbols"}function QP(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return P.createElement(LM,n);case"trapezoid":return P.createElement(Xse,n);case"sector":return P.createElement(BM,n);case"symbols":if(soe(t))return P.createElement(v8,n);break;case"curve":return P.createElement(CS,n);default:return null}}function ooe(e){return P.isValidElement(e)?e.props:e}function lI(e){var{option:t,shapeType:n,activeClassName:i="recharts-active-shape"}=e,a=eoe(e,Jse),s;if(P.isValidElement(t))s=P.cloneElement(t,F0(F0({},a),ooe(t)));else if(typeof t=="function")s=t(a,a.index);else if(Kse(t)&&typeof t!="boolean"){var l=aoe(t,a);s=P.createElement(QP,{shapeType:n,elementProps:l})}else{var d=a;s=P.createElement(QP,{shapeType:n,elementProps:d})}return a.isActive?P.createElement(co,{className:i},s):s}var qN=(e,t,n)=>{var i=vi();return(a,s)=>l=>{e?.(a,s,l),i(bR({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}},UN=e=>{var t=vi();return(n,i)=>a=>{e?.(n,i,a),t(mne())}},HN=(e,t,n)=>{var i=vi();return(a,s)=>l=>{e?.(a,s,l),i(pne({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}};function cI(e){var{tooltipEntrySettings:t}=e,n=vi(),i=Ho(),a=P.useRef(null);return P.useLayoutEffect(()=>{i||(a.current===null?n(dne(t)):a.current!==t&&n(une({prev:a.current,next:t})),a.current=t)},[t,n,i]),P.useLayoutEffect(()=>()=>{a.current&&(n(hne(a.current)),a.current=null)},[n]),null}function loe(e){var{legendPayload:t}=e,n=vi(),i=Ho(),a=P.useRef(null);return P.useLayoutEffect(()=>{i||(a.current===null?n(AM(t)):a.current!==t&&n(EM({prev:a.current,next:t})),a.current=t)},[n,i,t]),P.useLayoutEffect(()=>()=>{a.current&&(n(TM(a.current)),a.current=null)},[n]),null}function coe(e){var{legendPayload:t}=e,n=vi(),i=Ft(ln),a=P.useRef(null);return P.useLayoutEffect(()=>{i!=="centric"&&i!=="radial"||(a.current===null?n(AM(t)):a.current!==t&&n(EM({prev:a.current,next:t})),a.current=t)},[n,i,t]),P.useLayoutEffect(()=>()=>{a.current&&(n(TM(a.current)),a.current=null)},[n]),null}var sj,doe=()=>{var[e]=P.useState(()=>rg("uid-"));return e},uoe=(sj=Xz.useId)!==null&&sj!==void 0?sj:doe;function hoe(e,t){var n=uoe();return t||(e?"".concat(e,"-").concat(n):n)}var foe=P.createContext(void 0),dI=e=>{var{id:t,type:n,children:i}=e,a=hoe("recharts-".concat(n),t);return P.createElement(foe.Provider,{value:a},i(a))},moe={cartesianItems:[],polarItems:[]},uI=Uo({name:"graphicalItems",initialState:moe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:fi()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:i}=t.payload,a=jc(e).cartesianItems.indexOf(n);a>-1&&(e.cartesianItems[a]=i)},prepare:fi()},removeCartesianGraphicalItem:{reducer(e,t){var n=jc(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:fi()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:fi()},removePolarGraphicalItem:{reducer(e,t){var n=jc(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:fi()}}}),{addCartesianGraphicalItem:poe,replaceCartesianGraphicalItem:goe,removeCartesianGraphicalItem:yoe,addPolarGraphicalItem:voe,removePolarGraphicalItem:xoe}=uI.actions,boe=uI.reducer,joe=e=>{var t=vi(),n=P.useRef(null);return P.useLayoutEffect(()=>{n.current===null?t(poe(e)):n.current!==e&&t(goe({prev:n.current,next:e})),n.current=e},[t,e]),P.useLayoutEffect(()=>()=>{n.current&&(t(yoe(n.current)),n.current=null)},[t]),null},woe=P.memo(joe);function Soe(e){var t=vi();return P.useLayoutEffect(()=>(t(voe(e)),()=>{t(xoe(e))}),[t,e]),null}var Noe=["key"],_oe=["onMouseEnter","onClick","onMouseLeave"],Coe=["id"],Aoe=["id"];function YP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(n),!0).forEach(function(i){Eoe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Eoe(e,t,n){return(t=Toe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Toe(e){var t=Poe(e,"string");return typeof t=="symbol"?t:t+""}function Poe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nh.apply(null,arguments)}function e1(e,t){if(e==null)return{};var n,i,a=koe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function koe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Doe(e){var t=P.useMemo(()=>FN(e.children,Qg),[e.children]),n=Ft(i=>Bse(i,e.id,t));return n==null?null:P.createElement(coe,{legendPayload:n})}var Ooe=P.memo(e=>{var{dataKey:t,nameKey:n,sectors:i,stroke:a,strokeWidth:s,fill:l,name:d,hide:h,tooltipType:f,id:p}=e,g={dataDefinedOnItem:i.map(j=>j.tooltipPayload),positions:i.map(j=>j.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:jx(d,t),hide:h,type:f,color:l,unit:"",graphicalItemId:p}};return P.createElement(cI,{tooltipEntrySettings:g})}),Moe=(e,t)=>e>t?"start":e<t?"end":"middle",Loe=(e,t,n)=>qs(typeof t=="function"?t(e):t,n,n*.8),Roe=(e,t,n)=>{var{top:i,left:a,width:s,height:l}=t,d=RM(s,l),h=a+qs(e.cx,s,s/2),f=i+qs(e.cy,l,l/2),p=qs(e.innerRadius,d,0),g=Loe(n,e.outerRadius,d),j=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:h,cy:f,innerRadius:p,outerRadius:g,maxRadius:j}},Ioe=(e,t)=>{var n=Ka(t-e),i=Math.min(Math.abs(t-e),360);return n*i};function zoe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Boe=(e,t)=>{if(P.isValidElement(e))return P.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Dn("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:i}=t,a=e1(t,Noe);return P.createElement(CS,nh({},a,{type:"linear",className:n}))},Foe=(e,t,n)=>{if(P.isValidElement(e))return P.cloneElement(e,t);var i=n;if(typeof e=="function"&&(i=e(t),P.isValidElement(i)))return i;var a=Dn("recharts-pie-label-text",zoe(e));return P.createElement(Zx,nh({},t,{alignmentBaseline:"middle",className:a}),i)};function qoe(e){var{sectors:t,props:n,showLabels:i}=e,{label:a,labelLine:s,dataKey:l}=n;if(!i||!a||!t)return null;var d=Sc(n),h=tg(a),f=tg(s),p=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,g=t.map((j,v)=>{var b=(j.startAngle+j.endAngle)/2,w=fa(j.cx,j.cy,j.outerRadius+p,b),S=Ui(Ui(Ui(Ui({},d),j),{},{stroke:"none"},h),{},{index:v,textAnchor:Moe(w.x,j.cx)},w),_=Ui(Ui(Ui(Ui({},d),j),{},{fill:"none",stroke:j.fill},f),{},{index:v,points:[fa(j.cx,j.cy,j.outerRadius,b),w],key:"line"});return P.createElement(kc,{zIndex:ys.label,key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(v)},P.createElement(co,null,s&&Boe(s,_),Foe(a,S,ni(j,l))))});return P.createElement(co,{className:"recharts-pie-labels"},g)}function Uoe(e){var{sectors:t,props:n,showLabels:i}=e,{label:a}=n;return typeof a=="object"&&a!=null&&"position"in a?P.createElement(rI,{label:a}):P.createElement(qoe,{sectors:t,props:n,showLabels:i})}function Hoe(e){var{sectors:t,activeShape:n,inactiveShape:i,allOtherPieProps:a,shape:s,id:l}=e,d=Ft(Xh),h=Ft(DN),f=Ft(eie),{onMouseEnter:p,onClick:g,onMouseLeave:j}=a,v=e1(a,_oe),b=qN(p,a.dataKey,l),w=UN(j),S=HN(g,a.dataKey,l);return t==null||t.length===0?null:P.createElement(P.Fragment,null,t.map((_,E)=>{if(_?.startAngle===0&&_?.endAngle===0&&t.length!==1)return null;var D=f==null||f===l,W=String(E)===d&&(h==null||a.dataKey===h)&&D,K=d?i:null,B=n&&W?n:K,F=Ui(Ui({},_),{},{stroke:_.stroke,tabIndex:-1,[uM]:E,[hM]:l});return P.createElement(co,nh({key:"sector-".concat(_?.startAngle,"-").concat(_?.endAngle,"-").concat(_.midAngle,"-").concat(E),tabIndex:-1,className:"recharts-pie-sector"},dx(v,_,E),{onMouseEnter:b(_,E),onMouseLeave:w(_,E),onClick:S(_,E)}),P.createElement(lI,nh({option:s??B,index:E,shapeType:"sector",isActive:W},F)))}))}function Woe(e){var t,{pieSettings:n,displayedData:i,cells:a,offset:s}=e,{cornerRadius:l,startAngle:d,endAngle:h,dataKey:f,nameKey:p,tooltipType:g}=n,j=Math.abs(n.minAngle),v=Ioe(d,h),b=Math.abs(v),w=i.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,S=i.filter(B=>ni(B,f,0)!==0).length,_=(b>=360?S:S-1)*w,E=b-S*j-_,D=i.reduce((B,F)=>{var H=ni(F,f,0);return B+(Rt(H)?H:0)},0),W;if(D>0){var K;W=i.map((B,F)=>{var H=ni(B,f,0),I=ni(B,p,F),R=Roe(n,s,B),Y=(Rt(H)?H:0)/D,G,ae=Ui(Ui({},B),a&&a[F]&&a[F].props);F?G=K.endAngle+Ka(v)*w*(H!==0?1:0):G=d;var se=G+Ka(v)*((H!==0?j:0)+Y*E),Ne=(G+se)/2,z=(R.innerRadius+R.outerRadius)/2,ie=[{name:I,value:H,payload:ae,dataKey:f,type:g,graphicalItemId:n.id}],q=fa(R.cx,R.cy,z,Ne);return K=Ui(Ui(Ui(Ui({},n.presentationProps),{},{percent:Y,cornerRadius:typeof l=="string"?parseFloat(l):l,name:I,tooltipPayload:ie,midAngle:Ne,middleRadius:z,tooltipPosition:q},ae),R),{},{value:H,dataKey:f,startAngle:G,endAngle:se,payload:ae,paddingAngle:Ka(v)*w}),K})}return W}function $oe(e){var{showLabels:t,sectors:n,children:i}=e,a=P.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return P.createElement(Sse,{value:t?a:void 0},i)}function Voe(e){var{props:t,previousSectorsRef:n,id:i}=e,{sectors:a,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:h,activeShape:f,inactiveShape:p,onAnimationStart:g,onAnimationEnd:j}=t,v=Ox(t,"recharts-pie-"),b=n.current,[w,S]=P.useState(!1),_=P.useCallback(()=>{typeof j=="function"&&j(),S(!1)},[j]),E=P.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return P.createElement($oe,{showLabels:!w,sectors:a},P.createElement(Dx,{animationId:v,begin:l,duration:d,isActive:s,easing:h,onAnimationStart:E,onAnimationEnd:_,key:v},D=>{var W=[],K=a&&a[0],B=K?.startAngle;return a?.forEach((F,H)=>{var I=b&&b[H],R=H>0?Kh(F,"paddingAngle",0):0;if(I){var Y=Aa(I.endAngle-I.startAngle,F.endAngle-F.startAngle,D),G=Ui(Ui({},F),{},{startAngle:B+R,endAngle:B+Y+R});W.push(G),B=G.endAngle}else{var{endAngle:ae,startAngle:se}=F,Ne=Aa(0,ae-se,D),z=Ui(Ui({},F),{},{startAngle:B+R,endAngle:B+Ne+R});W.push(z),B=z.endAngle}}),n.current=W,P.createElement(co,null,P.createElement(Hoe,{sectors:W,activeShape:f,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:i}))}),P.createElement(Uoe,{showLabels:!w,sectors:a,props:t}),t.children)}var Koe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ys.area};function Goe(e){var{id:t}=e,n=e1(e,Coe),{hide:i,className:a,rootTabIndex:s}=e,l=P.useMemo(()=>FN(e.children,Qg),[e.children]),d=Ft(p=>Fse(p,t,l)),h=P.useRef(null),f=Dn("recharts-pie",a);return i||d==null?(h.current=null,P.createElement(co,{tabIndex:s,className:f})):P.createElement(kc,{zIndex:e.zIndex},P.createElement(Ooe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),P.createElement(co,{tabIndex:s,className:f},P.createElement(Voe,{props:Ui(Ui({},n),{},{sectors:d}),previousSectorsRef:h,id:t})))}function hI(e){var t=Hs(e,Koe),{id:n}=t,i=e1(t,Aoe),a=Sc(i);return P.createElement(dI,{id:n,type:"pie"},s=>P.createElement(P.Fragment,null,P.createElement(Soe,{type:"pie",id:s,data:i.data,dataKey:i.dataKey,hide:i.hide,angleAxisId:0,radiusAxisId:0,name:i.name,nameKey:i.nameKey,tooltipType:i.tooltipType,legendType:i.legendType,fill:i.fill,cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,paddingAngle:i.paddingAngle,minAngle:i.minAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius,cornerRadius:i.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),P.createElement(Doe,nh({},i,{id:s})),P.createElement(Goe,nh({},i,{id:s}))))}hI.displayName="Pie";function ZP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function XP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(n),!0).forEach(function(i){Qoe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Qoe(e,t,n){return(t=Yoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yoe(e){var t=Zoe(e,"string");return typeof t=="symbol"?t:t+""}function Zoe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fI=0,Xoe={xAxis:{},yAxis:{},zAxis:{}},mI=Uo({name:"cartesianAxis",initialState:Xoe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:fi()},replaceXAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete e.xAxis[n.id],e.xAxis[i.id]=i)},prepare:fi()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:fi()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:fi()},replaceYAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete e.yAxis[n.id],e.yAxis[i.id]=i)},prepare:fi()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:fi()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:fi()},replaceZAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete e.zAxis[n.id],e.zAxis[i.id]=i)},prepare:fi()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:fi()},updateYAxisWidth(e,t){var{id:n,width:i}=t.payload,a=e.yAxis[n];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==a.width&&Math.abs(i-s[0])<=1)return;var l=[...s,i].slice(-3);e.yAxis[n]=XP(XP({},e.yAxis[n]),{},{width:i,widthHistory:l})}}}}),{addXAxis:Joe,replaceXAxis:ele,removeXAxis:tle,addYAxis:rle,replaceYAxis:nle,removeYAxis:ile,addZAxis:Yge,replaceZAxis:Zge,removeZAxis:Xge,updateYAxisWidth:ale}=mI.actions,sle=mI.reducer,ole=He([ka],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),lle=He([ole,fu,mu],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),pI=()=>Ft(lle),JP=(e,t,n)=>{var i=n??e;if(!Ga(i))return qs(i,t,0)},cle=(e,t,n)=>{var i={},a=e.filter(Hx),s=e.filter(f=>f.stackId==null),l=a.reduce((f,p)=>(f[p.stackId]||(f[p.stackId]=[]),f[p.stackId].push(p),f),i),d=Object.entries(l).map(f=>{var[p,g]=f,j=g.map(b=>b.dataKey),v=JP(t,n,g[0].barSize);return{stackId:p,dataKeys:j,barSize:v}}),h=s.map(f=>{var p=[f.dataKey].filter(j=>j!=null),g=JP(t,n,f.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...d,...h]};function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function sv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(i){dle(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function dle(e,t,n){return(t=ule(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ule(e){var t=hle(e,"string");return typeof t=="symbol"?t:t+""}function hle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fle(e,t,n,i,a){var s=i.length;if(!(s<1)){var l=qs(e,n,0,!0),d,h=[];if(Ai(i[0].barSize)){var f=!1,p=n/s,g=i.reduce((_,E)=>_+(E.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&p>0&&(f=!0,p*=.9,g=s*p);var j=(n-g)/2>>0,v={offset:j-l,size:0};d=i.reduce((_,E)=>{var D,W={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:v.offset+v.size+l,size:f?p:(D=E.barSize)!==null&&D!==void 0?D:0}},K=[..._,W];return v=K[K.length-1].position,K},h)}else{var b=qs(t,n,0,!0);n-2*b-(s-1)*l<=0&&(l=0);var w=(n-2*b-(s-1)*l)/s;w>1&&(w>>=0);var S=Ai(a)?Math.min(w,a):w;d=i.reduce((_,E,D)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:b+(w+l)*D+(w-S)/2,size:S}}],h)}return d}}var mle=(e,t,n,i,a,s,l)=>{var d=Ga(l)?t:l,h=fle(n,i,a!==s?a:s,e,d);return a!==s&&h!=null&&(h=h.map(f=>sv(sv({},f),{},{position:sv(sv({},f.position),{},{offset:f.position.offset-a/2})}))),h},ple=(e,t)=>{var n=iN(t);if(!(!e||n==null||t==null)){var{stackId:i}=t;if(i!=null){var a=e[i];if(a){var{stackedData:s}=a;if(s)return s.find(l=>l.key===n)}}}};function gle(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ai(e.zIndex)?e.zIndex:t}var gI=e=>{var{chartData:t}=e,n=vi(),i=Ho();return P.useEffect(()=>i?()=>{}:(n(lP(t)),()=>{n(lP(void 0))}),[t,n,i]),null},tk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},yI=Uo({name:"brush",initialState:tk,reducers:{setBrushSettings(e,t){return t.payload==null?tk:t.payload}}}),{setBrushSettings:Jge}=yI.actions,yle=yI.reducer;function vle(e,t,n){return(t=xle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xle(e){var t=ble(e,"string");return typeof t=="symbol"?t:t+""}function ble(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class WN{static create(t){return new WN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(i)switch(i){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}vle(WN,"EPS",1e-4);function jle(e){return(e%180+180)%180}var wle=function(t){var{width:n,height:i}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=jle(a),l=s*Math.PI/180,d=Math.atan(i/n),h=l>d&&l<Math.PI-d?i/Math.sin(l):n/Math.cos(l);return Math.abs(h)},Sle={dots:[],areas:[],lines:[]},vI=Uo({name:"referenceElements",initialState:Sle,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=jc(e).dots.findIndex(i=>i===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=jc(e).areas.findIndex(i=>i===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=jc(e).lines.findIndex(i=>i===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:eye,removeDot:tye,addArea:rye,removeArea:nye,addLine:iye,removeLine:aye}=vI.actions,Nle=vI.reducer,_le=P.createContext(void 0),Cle=e=>{var{children:t}=e,[n]=P.useState("".concat(rg("recharts"),"-clip")),i=pI();if(i==null)return null;var{x:a,y:s,width:l,height:d}=i;return P.createElement(_le.Provider,{value:n},P.createElement("defs",null,P.createElement("clipPath",{id:n},P.createElement("rect",{x:a,y:s,height:d,width:l}))),t)};function xI(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],i=0;i<e.length;i+=t){var a=e[i];a!==void 0&&n.push(a)}return n}function Ale(e,t,n){var i={width:e.width+t.width,height:e.height+t.height};return wle(i,n)}function Ele(e,t,n){var i=n==="width",{x:a,y:s,width:l,height:d}=e;return t===1?{start:i?a:s,end:i?a+l:s+d}:{start:i?a+l:s+d,end:i?a:s}}function gg(e,t,n,i,a){if(e*t<e*i||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-i)>=0&&e*(t+e*s/2-a)<=0}function Tle(e,t){return xI(e,t+1)}function Ple(e,t,n,i,a){for(var s=(i||[]).slice(),{start:l,end:d}=t,h=0,f=1,p=l,g=function(){var b=i?.[h];if(b===void 0)return{v:xI(i,f)};var w=h,S,_=()=>(S===void 0&&(S=n(b,w)),S),E=b.coordinate,D=h===0||gg(e,E,_,p,d);D||(h=0,p=l,f+=1),D&&(p=E+e*(_()/2+a),h+=f)},j;f<=s.length;)if(j=g(),j)return j.v;return[]}function kle(e,t,n,i,a){var s=(i||[]).slice(),l=s.length;if(l===0)return[];for(var{start:d,end:h}=t,f=1;f<=l;f++){for(var p=(l-1)%f,g=d,j=!0,v=function(){var E=i[b],D=b,W,K=()=>(W===void 0&&(W=n(E,D)),W),B=E.coordinate,F=b===p||gg(e,B,K,g,h);if(!F)return j=!1,1;F&&(g=B+e*(K()/2+a))},b=p;b<l&&!v();b+=f);if(j){for(var w=[],S=p;S<l;S+=f)w.push(i[S]);return w}}return[]}function rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(n),!0).forEach(function(i){Dle(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Dle(e,t,n){return(t=Ole(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ole(e){var t=Mle(e,"string");return typeof t=="symbol"?t:t+""}function Mle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lle(e,t,n,i,a){for(var s=(i||[]).slice(),l=s.length,{start:d}=t,{end:h}=t,f=function(j){var v=s[j],b,w=()=>(b===void 0&&(b=n(v,j)),b);if(j===l-1){var S=e*(v.coordinate+e*w()/2-h);s[j]=v=Rs(Rs({},v),{},{tickCoord:S>0?v.coordinate-S*e:v.coordinate})}else s[j]=v=Rs(Rs({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var _=gg(e,v.tickCoord,w,d,h);_&&(h=v.tickCoord-e*(w()/2+a),s[j]=Rs(Rs({},v),{},{isShow:!0}))}},p=l-1;p>=0;p--)f(p);return s}function Rle(e,t,n,i,a,s){var l=(i||[]).slice(),d=l.length,{start:h,end:f}=t;if(s){var p=i[d-1],g=n(p,d-1),j=e*(p.coordinate+e*g/2-f);if(l[d-1]=p=Rs(Rs({},p),{},{tickCoord:j>0?p.coordinate-j*e:p.coordinate}),p.tickCoord!=null){var v=gg(e,p.tickCoord,()=>g,h,f);v&&(f=p.tickCoord-e*(g/2+a),l[d-1]=Rs(Rs({},p),{},{isShow:!0}))}}for(var b=s?d-1:d,w=function(E){var D=l[E],W,K=()=>(W===void 0&&(W=n(D,E)),W);if(E===0){var B=e*(D.coordinate-e*K()/2-h);l[E]=D=Rs(Rs({},D),{},{tickCoord:B<0?D.coordinate-B*e:D.coordinate})}else l[E]=D=Rs(Rs({},D),{},{tickCoord:D.coordinate});if(D.tickCoord!=null){var F=gg(e,D.tickCoord,K,h,f);F&&(h=D.tickCoord+e*(K()/2+a),l[E]=Rs(Rs({},D),{},{isShow:!0}))}},S=0;S<b;S++)w(S);return l}function $N(e,t,n){var{tick:i,ticks:a,viewBox:s,minTickGap:l,orientation:d,interval:h,tickFormatter:f,unit:p,angle:g}=e;if(!a||!a.length||!i)return[];if(Rt(h)||kx.isSsr){var j;return(j=Tle(a,Rt(h)?h:0))!==null&&j!==void 0?j:[]}var v=[],b=d==="top"||d==="bottom"?"width":"height",w=p&&b==="width"?$p(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(D,W)=>{var K=typeof f=="function"?f(D.value,W):D.value;return b==="width"?Ale($p(K,{fontSize:t,letterSpacing:n}),w,g):$p(K,{fontSize:t,letterSpacing:n})[b]},_=a.length>=2?Ka(a[1].coordinate-a[0].coordinate):1,E=Ele(s,_,b);return h==="equidistantPreserveStart"?Ple(_,E,S,a,l):h==="equidistantPreserveEnd"?kle(_,E,S,a,l):(h==="preserveStart"||h==="preserveStartEnd"?v=Rle(_,E,S,a,l,h==="preserveStartEnd"):v=Lle(_,E,S,a,l),v.filter(D=>D.isShow))}var Ile=e=>{var{ticks:t,label:n,labelGapWithTick:i=5,tickSize:a=0,tickMargin:s=0}=e,l=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>l&&(l=g.width)}});var d=n?n.getBoundingClientRect().width:0,h=a+s,f=l+h+d+(n?i:0);return Math.round(f)}return 0},zle=["axisLine","width","height","className","hide","ticks","axisType"];function Ble(e,t){if(e==null)return{};var n,i,a=Fle(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Fle(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jh.apply(null,arguments)}function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(n),!0).forEach(function(i){qle(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function qle(e,t,n){return(t=Ule(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ule(e){var t=Hle(e,"string");return typeof t=="symbol"?t:t+""}function Hle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jd={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ys.axis};function Wle(e){var{x:t,y:n,width:i,height:a,orientation:s,mirror:l,axisLine:d,otherSvgProps:h}=e;if(!d)return null;var f=ha(ha(ha({},h),Sc(d)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!l||s==="bottom"&&l);f=ha(ha({},f),{},{x1:t,y1:n+p*a,x2:t+i,y2:n+p*a})}else{var g=+(s==="left"&&!l||s==="right"&&l);f=ha(ha({},f),{},{x1:t+g*i,y1:n,x2:t+g*i,y2:n+a})}return P.createElement("line",Jh({},f,{className:Dn("recharts-cartesian-axis-line",Kh(d,"className"))}))}function $le(e,t,n,i,a,s,l,d,h){var f,p,g,j,v,b,w=d?-1:1,S=e.tickSize||l,_=Rt(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":f=p=e.coordinate,j=n+ +!d*a,g=j-w*S,b=g-w*h,v=_;break;case"left":g=j=e.coordinate,p=t+ +!d*i,f=p-w*S,v=f-w*h,b=_;break;case"right":g=j=e.coordinate,p=t+ +d*i,f=p+w*S,v=f+w*h,b=_;break;default:f=p=e.coordinate,j=n+ +d*a,g=j+w*S,b=g+w*h,v=_;break}return{line:{x1:f,y1:g,x2:p,y2:j},tick:{x:v,y:b}}}function Vle(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Kle(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Gle(e){var{option:t,tickProps:n,value:i}=e,a,s=Dn(n.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(t))a=P.cloneElement(t,ha(ha({},n),{},{className:s}));else if(typeof t=="function")a=t(ha(ha({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Dn(l,t?.className)),a=P.createElement(Zx,Jh({},n,{className:l}),i)}return a}var Qle=P.forwardRef((e,t)=>{var{ticks:n=[],tick:i,tickLine:a,stroke:s,tickFormatter:l,unit:d,padding:h,tickTextProps:f,orientation:p,mirror:g,x:j,y:v,width:b,height:w,tickSize:S,tickMargin:_,fontSize:E,letterSpacing:D,getTicksConfig:W,events:K,axisType:B}=e,F=$N(ha(ha({},W),{},{ticks:n}),E,D),H=Vle(p,g),I=Kle(p,g),R=Sc(W),Y=tg(i),G={};typeof a=="object"&&(G=a);var ae=ha(ha({},R),{},{fill:"none"},G),se=F.map(ie=>ha({entry:ie},$le(ie,j,v,b,w,p,S,g,_))),Ne=se.map(ie=>{var{entry:q,line:re}=ie;return P.createElement(co,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},a&&P.createElement("line",Jh({},ae,re,{className:Dn("recharts-cartesian-axis-tick-line",Kh(a,"className"))})))}),z=se.map((ie,q)=>{var{entry:re,tick:ue}=ie,Q=ha(ha(ha(ha({textAnchor:H,verticalAnchor:I},R),{},{stroke:"none",fill:s},Y),ue),{},{index:q,payload:re,visibleTicksCount:F.length,tickFormatter:l,padding:h},f);return P.createElement(co,Jh({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},dx(K,re,q)),i&&P.createElement(Gle,{option:i,tickProps:Q,value:"".concat(typeof l=="function"?l(re.value,q):re.value).concat(d||"")}))});return P.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(B,"-ticks")},z.length>0&&P.createElement(kc,{zIndex:ys.label},P.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(B,"-tick-labels"),ref:t},z)),Ne.length>0&&P.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(B,"-tick-lines")},Ne))}),Yle=P.forwardRef((e,t)=>{var{axisLine:n,width:i,height:a,className:s,hide:l,ticks:d,axisType:h}=e,f=Ble(e,zle),[p,g]=P.useState(""),[j,v]=P.useState(""),b=P.useRef(null);P.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return Ile({ticks:b.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=P.useCallback(S=>{if(S){var _=S.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=_;var E=_[0];if(E){var D=window.getComputedStyle(E),W=D.fontSize,K=D.letterSpacing;(W!==p||K!==j)&&(g(W),v(K))}}},[p,j]);return l||i!=null&&i<=0||a!=null&&a<=0?null:P.createElement(kc,{zIndex:e.zIndex},P.createElement(co,{className:Dn("recharts-cartesian-axis",s)},P.createElement(Wle,{x:e.x,y:e.y,width:i,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Sc(e)}),P.createElement(Qle,{ref:w,axisType:h,events:f,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:j,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),P.createElement(tse,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},P.createElement(use,{label:e.label,labelRef:e.labelRef}),e.children)))}),VN=P.forwardRef((e,t)=>{var n=Hs(e,Jd);return P.createElement(Yle,Jh({},n,{ref:t}))});VN.displayName="CartesianAxis";var Zle=["x1","y1","x2","y2","key"],Xle=["offset"],Jle=["xAxisId","yAxisId"],ece=["xAxisId","yAxisId"];function ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(n),!0).forEach(function(i){tce(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function tce(e,t,n){return(t=rce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rce(e){var t=nce(e,"string");return typeof t=="symbol"?t:t+""}function nce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Oh.apply(null,arguments)}function q0(e,t){if(e==null)return{};var n,i,a=ice(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ice(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var ace=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:i,y:a,width:s,height:l,ry:d}=e;return P.createElement("rect",{x:i,y:a,ry:d,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function bI(e){var{option:t,lineItemProps:n}=e,i;if(P.isValidElement(t))i=P.cloneElement(t,n);else if(typeof t=="function")i=t(n);else{var a,{x1:s,y1:l,x2:d,y2:h,key:f}=n,p=q0(n,Zle),g=(a=Sc(p))!==null&&a!==void 0?a:{},{offset:j}=g,v=q0(g,Xle);i=P.createElement("line",Oh({},v,{x1:s,y1:l,x2:d,y2:h,fill:"none",key:f}))}return i}function sce(e){var{x:t,width:n,horizontal:i=!0,horizontalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,d=q0(e,Jle),h=a.map((f,p)=>{var g=Is(Is({},d),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(p),index:p});return P.createElement(bI,{key:"line-".concat(p),option:i,lineItemProps:g})});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function oce(e){var{y:t,height:n,vertical:i=!0,verticalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,d=q0(e,ece),h=a.map((f,p)=>{var g=Is(Is({},d),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(p),index:p});return P.createElement(bI,{option:i,lineItemProps:g,key:"line-".concat(p)})});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function lce(e){var{horizontalFill:t,fillOpacity:n,x:i,y:a,width:s,height:l,horizontalPoints:d,horizontal:h=!0}=e;if(!h||!t||!t.length||d==null)return null;var f=d.map(g=>Math.round(g+a-a)).sort((g,j)=>g-j);a!==f[0]&&f.unshift(0);var p=f.map((g,j)=>{var v=!f[j+1],b=v?a+l-g:f[j+1]-g;if(b<=0)return null;var w=j%t.length;return P.createElement("rect",{key:"react-".concat(j),y:g,x:i,height:b,width:s,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function cce(e){var{vertical:t=!0,verticalFill:n,fillOpacity:i,x:a,y:s,width:l,height:d,verticalPoints:h}=e;if(!t||!n||!n.length)return null;var f=h.map(g=>Math.round(g+a-a)).sort((g,j)=>g-j);a!==f[0]&&f.unshift(0);var p=f.map((g,j)=>{var v=!f[j+1],b=v?a+l-g:f[j+1]-g;if(b<=0)return null;var w=j%n.length;return P.createElement("rect",{key:"react-".concat(j),x:g,y:s,width:b,height:d,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var dce=(e,t)=>{var{xAxis:n,width:i,height:a,offset:s}=e;return lM($N(Is(Is(Is({},Jd),n),{},{ticks:cM(n),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,t)},uce=(e,t)=>{var{yAxis:n,width:i,height:a,offset:s}=e;return lM($N(Is(Is(Is({},Jd),n),{},{ticks:cM(n),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,t)},hce={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ys.grid};function jI(e){var t=vM(),n=xM(),i=yM(),a=Is(Is({},Hs(e,hce)),{},{x:Rt(e.x)?e.x:i.left,y:Rt(e.y)?e.y:i.top,width:Rt(e.width)?e.width:i.width,height:Rt(e.height)?e.height:i.height}),{xAxisId:s,yAxisId:l,x:d,y:h,width:f,height:p,syncWithTicks:g,horizontalValues:j,verticalValues:v}=a,b=Ho(),w=Ft(I=>YT(I,"xAxis",s,b)),S=Ft(I=>YT(I,"yAxis",l,b));if(!vd(f)||!vd(p)||!Rt(d)||!Rt(h))return null;var _=a.verticalCoordinatesGenerator||dce,E=a.horizontalCoordinatesGenerator||uce,{horizontalPoints:D,verticalPoints:W}=a;if((!D||!D.length)&&typeof E=="function"){var K=j&&j.length,B=E({yAxis:S?Is(Is({},S),{},{ticks:K?j:S.ticks}):void 0,width:t??f,height:n??p,offset:i},K?!0:g);p0(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(D=B)}if((!W||!W.length)&&typeof _=="function"){var F=v&&v.length,H=_({xAxis:w?Is(Is({},w),{},{ticks:F?v:w.ticks}):void 0,width:t??f,height:n??p,offset:i},F?!0:g);p0(Array.isArray(H),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof H,"]")),Array.isArray(H)&&(W=H)}return P.createElement(kc,{zIndex:a.zIndex},P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(ace,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),P.createElement(lce,Oh({},a,{horizontalPoints:D})),P.createElement(cce,Oh({},a,{verticalPoints:W})),P.createElement(sce,Oh({},a,{offset:i,horizontalPoints:D,xAxis:w,yAxis:S})),P.createElement(oce,Oh({},a,{offset:i,verticalPoints:W,xAxis:w,yAxis:S}))))}jI.displayName="CartesianGrid";var fce={},wI=Uo({name:"errorBars",initialState:fce,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]||(e[n]=[]),e[n].push(i)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:i,next:a}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?a:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]&&(e[n]=e[n].filter(a=>a.dataKey!==i.dataKey||a.direction!==i.direction))}}}),{addErrorBar:sye,replaceErrorBar:oye,removeErrorBar:lye}=wI.actions,mce=wI.reducer,pce=["children"];function gce(e,t){if(e==null)return{};var n,i,a=yce(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yce(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var vce={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},xce=P.createContext(vce);function bce(e){var{children:t}=e,n=gce(e,pce);return P.createElement(xce.Provider,{value:n},t)}function SI(e,t){var n,i,a=Ft(f=>yu(f,e)),s=Ft(f=>vu(f,t)),l=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Ha.allowDataOverflow,d=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:Wa.allowDataOverflow,h=l||d;return{needClip:h,needClipX:l,needClipY:d}}function jce(e){var{xAxisId:t,yAxisId:n,clipPathId:i}=e,a=pI(),{needClipX:s,needClipY:l,needClip:d}=SI(t,n);if(!d||!a)return null;var{x:h,y:f,width:p,height:g}=a;return P.createElement("clipPath",{id:"clipPath-".concat(i)},P.createElement("rect",{x:s?h:h-p/2,y:l?f:f-g/2,width:s?p:p*2,height:l?g:g*2}))}var oj={exports:{}},lj={};var ak;function wce(){if(ak)return lj;ak=1;var e=Am();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,l=e.useMemo,d=e.useDebugValue;return lj.useSyncExternalStoreWithSelector=function(h,f,p,g,j){var v=a(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=l(function(){function S(K){if(!_){if(_=!0,E=K,K=g(K),j!==void 0&&b.hasValue){var B=b.value;if(j(B,K))return D=B}return D=K}if(B=D,n(E,K))return B;var F=g(K);return j!==void 0&&j(B,F)?(E=K,B):(E=K,D=F)}var _=!1,E,D,W=p===void 0?null:p;return[function(){return S(f())},W===null?void 0:function(){return S(W())}]},[f,p,g,j]);var w=i(h,v[0],v[1]);return s(function(){b.hasValue=!0,b.value=w},[w]),d(w),w},lj}var sk;function Sce(){return sk||(sk=1,oj.exports=wce()),oj.exports}Sce();function Nce(e){e()}function _ce(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Nce(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var ok={notify(){},get:()=>[]};function Cce(e,t){let n,i=ok,a=0,s=!1;function l(w){p();const S=i.subscribe(w);let _=!1;return()=>{_||(_=!0,S(),g())}}function d(){i.notify()}function h(){b.onStateChange&&b.onStateChange()}function f(){return s}function p(){a++,n||(n=e.subscribe(h),i=_ce())}function g(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=ok)}function j(){s||(s=!0,p())}function v(){s&&(s=!1,g())}const b={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:f,trySubscribe:j,tryUnsubscribe:v,getListeners:()=>i};return b}var Ace=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ece=Ace(),Tce=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Pce=Tce(),kce=()=>Ece||Pce?P.useLayoutEffect:P.useEffect,Dce=kce();function lk(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Oce(e,t){if(lk(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!lk(e[n[a]],t[n[a]]))return!1;return!0}var Mce=Symbol.for("react-redux-context"),Lce=typeof globalThis<"u"?globalThis:{};function Rce(){if(!P.createContext)return{};const e=Lce[Mce]??=new Map;let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var Ice=Rce();function zce(e){const{children:t,context:n,serverState:i,store:a}=e,s=P.useMemo(()=>{const h=Cce(a);return{store:a,subscription:h,getServerState:i?()=>i:void 0}},[a,i]),l=P.useMemo(()=>a.getState(),[a]);Dce(()=>{const{subscription:h}=s;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),l!==a.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[s,l]);const d=n||Ice;return P.createElement(d.Provider,{value:s},t)}var Bce=zce,Fce=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function qce(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function KN(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var i of n)if(Fce.has(i)){if(e[i]==null&&t[i]==null)continue;if(!Oce(e[i],t[i]))return!1}else if(!qce(e[i],t[i]))return!1;return!0}function uf(e,t){var n,i;return(n=(i=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||i===void 0?void 0:i.xAxisId)!==null&&n!==void 0?n:fI}function hf(e,t){var n,i;return(n=(i=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||i===void 0?void 0:i.yAxisId)!==null&&n!==void 0?n:fI}var Uce="Invariant failed";function Hce(e,t){throw new Error(Uce)}function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pw.apply(null,arguments)}function U0(e){return P.createElement(lI,pw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Wce=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,a)=>{if(Rt(t))return t;var s=Rt(i)||Ga(i);return s?t(i,a):(s||Hce(),n)}},$ce=(e,t,n)=>n,Vce=(e,t)=>t,Yg=He([oN,Vce],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Kce=He([Yg],e=>e?.maxBarSize),Gce=(e,t,n,i)=>i,Qce=He([ln,oN,uf,hf,$ce],(e,t,n,i,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===i).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Yce=(e,t,n)=>{var i=ln(e),a=uf(e,t),s=hf(e,t);if(!(a==null||s==null))return i==="horizontal"?lw(e,"yAxis",s,n):lw(e,"xAxis",a,n)},Zce=(e,t)=>{var n=ln(e),i=uf(e,t),a=hf(e,t);if(!(i==null||a==null))return n==="horizontal"?QT(e,"xAxis",i):QT(e,"yAxis",a)},Xce=He([Qce,nre,Zce],cle),Jce=(e,t,n)=>{var i,a,s=Yg(e,t);if(s!=null){var l=uf(e,t),d=hf(e,t);if(!(l==null||d==null)){var h=ln(e),f=LL(e),{maxBarSize:p}=s,g=Ga(p)?f:p,j,v;return h==="horizontal"?(j=Cm(e,"xAxis",l,n),v=_m(e,"xAxis",l,n)):(j=Cm(e,"yAxis",d,n),v=_m(e,"yAxis",d,n)),(i=(a=m0(j,v,!0))!==null&&a!==void 0?a:g)!==null&&i!==void 0?i:0}}},NI=(e,t,n)=>{var i=ln(e),a=uf(e,t),s=hf(e,t);if(!(a==null||s==null)){var l,d;return i==="horizontal"?(l=Cm(e,"xAxis",a,n),d=_m(e,"xAxis",a,n)):(l=Cm(e,"yAxis",s,n),d=_m(e,"yAxis",s,n)),m0(l,d)}},ede=He([Xce,LL,rre,RL,Jce,NI,Kce],mle),tde=(e,t,n)=>{var i=uf(e,t);if(i!=null)return Cm(e,"xAxis",i,n)},rde=(e,t,n)=>{var i=hf(e,t);if(i!=null)return Cm(e,"yAxis",i,n)},nde=(e,t,n)=>{var i=uf(e,t);if(i!=null)return _m(e,"xAxis",i,n)},ide=(e,t,n)=>{var i=hf(e,t);if(i!=null)return _m(e,"yAxis",i,n)},ade=He([ede,Yg],(e,t)=>{if(!(e==null||t==null)){var n=e.find(i=>i.stackId===t.stackId&&t.dataKey!=null&&i.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),sde=He([Yce,Yg],ple),ode=He([ka,wS,tde,rde,nde,ide,ade,ln,Wte,NI,sde,Yg,Gce],(e,t,n,i,a,s,l,d,h,f,p,g,j)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:w}=h;if(!(g==null||l==null||t==null||d!=="horizontal"&&d!=="vertical"||n==null||i==null||a==null||s==null||f==null)){var{data:S}=g,_;if(S!=null&&S.length>0?_=S:_=v?.slice(b,w+1),_!=null)return Rde({layout:d,barSettings:g,pos:l,parentViewBox:t,bandSize:f,xAxis:n,yAxis:i,xAxisTicks:a,yAxisTicks:s,stackedData:p,displayedData:_,offset:e,cells:j,dataStartIndex:b})}}),lde=["index"];function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gw.apply(null,arguments)}function cde(e,t){if(e==null)return{};var n,i,a=dde(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dde(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var _I=P.createContext(void 0),ude=e=>{var t=P.useContext(_I);if(t!=null)return t.stackId;if(e!=null)return JY(e)},hde=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),fde=e=>{var t=P.useContext(_I);if(t!=null){var{stackId:n}=t;return"url(#".concat(hde(n,e),")")}},mde=e=>{var{index:t}=e,n=cde(e,lde),i=fde(t);return P.createElement(co,gw({className:"recharts-bar-stack-layer",clipPath:i},n))},pde=["onMouseEnter","onMouseLeave","onClick"],gde=["value","background","tooltipPosition"],yde=["id"],vde=["onMouseEnter","onClick","onMouseLeave"];function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},du.apply(null,arguments)}function ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(n),!0).forEach(function(i){xde(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function xde(e,t,n){return(t=bde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bde(e){var t=jde(e,"string");return typeof t=="symbol"?t:t+""}function jde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H0(e,t){if(e==null)return{};var n,i,a=wde(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function wde(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var Sde=e=>{var{dataKey:t,name:n,fill:i,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:i,value:jx(n,t),payload:e}]},Nde=P.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:i,fill:a,name:s,hide:l,unit:d,tooltipType:h,id:f}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:jx(s,t),hide:l,type:h,color:a,unit:d,graphicalItemId:f}};return P.createElement(cI,{tooltipEntrySettings:p})});function _de(e){var t=Ft(Xh),{data:n,dataKey:i,background:a,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:d,onClick:h}=s,f=H0(s,pde),p=qN(l,i,s.id),g=UN(d),j=HN(h,i,s.id);if(!a||n==null)return null;var v=tg(a);return P.createElement(kc,{zIndex:gle(a,ys.barBackground)},n.map((b,w)=>{var{value:S,background:_,tooltipPosition:E}=b,D=H0(b,gde);if(!_)return null;var W=p(b,w),K=g(b,w),B=j(b,w),F=so(so(so(so(so({option:a,isActive:String(w)===t},D),{},{fill:"#eee"},_),v),dx(f,b,w)),{},{onMouseEnter:W,onMouseLeave:K,onClick:B,dataKey:i,index:w,className:"recharts-bar-background-rectangle"});return P.createElement(U0,du({key:"background-bar-".concat(w)},F))}))}function Cde(e){var{showLabels:t,children:n,rects:i}=e,a=i?.map(s=>{var l={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return so(so({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return P.createElement(wse,{value:t?a:void 0},n)}function Ade(e){var{shape:t,activeBar:n,baseProps:i,entry:a,index:s,dataKey:l}=e,d=Ft(Xh),h=Ft(DN),f=n&&String(s)===d&&(h==null||l===h),p=f?n:t;return f?P.createElement(kc,{zIndex:ys.activeBar},P.createElement(U0,du({},i,{name:String(i.name)},a,{isActive:f,option:p,index:s,dataKey:l}))):P.createElement(U0,du({},i,{name:String(i.name)},a,{isActive:f,option:p,index:s,dataKey:l}))}function Ede(e){var{shape:t,baseProps:n,entry:i,index:a,dataKey:s}=e;return P.createElement(U0,du({},n,{name:String(n.name)},i,{isActive:!1,option:t,index:a,dataKey:s}))}function Tde(e){var t,{data:n,props:i}=e,a=(t=Sc(i))!==null&&t!==void 0?t:{},{id:s}=a,l=H0(a,yde),{shape:d,dataKey:h,activeBar:f}=i,{onMouseEnter:p,onClick:g,onMouseLeave:j}=i,v=H0(i,vde),b=qN(p,h,s),w=UN(j),S=HN(g,h,s);return n?P.createElement(P.Fragment,null,n.map((_,E)=>P.createElement(mde,du({index:E,key:"rectangle-".concat(_?.x,"-").concat(_?.y,"-").concat(_?.value,"-").concat(E),className:"recharts-bar-rectangle"},dx(v,_,E),{onMouseEnter:b(_,E),onMouseLeave:w(_,E),onClick:S(_,E)}),f?P.createElement(Ade,{shape:d,activeBar:f,baseProps:l,entry:_,index:E,dataKey:h}):P.createElement(Ede,{shape:d,baseProps:l,entry:_,index:E,dataKey:h})))):null}function Pde(e){var{props:t,previousRectanglesRef:n}=e,{data:i,layout:a,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:h,onAnimationEnd:f,onAnimationStart:p}=t,g=n.current,j=Ox(t,"recharts-bar-"),[v,b]=P.useState(!1),w=!v,S=P.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),_=P.useCallback(()=>{typeof p=="function"&&p(),b(!0)},[p]);return P.createElement(Cde,{showLabels:w,rects:i},P.createElement(Dx,{animationId:j,begin:l,duration:d,isActive:s,easing:h,onAnimationEnd:S,onAnimationStart:_,key:j},E=>{var D=E===1?i:i?.map((W,K)=>{var B=g&&g[K];if(B)return so(so({},W),{},{x:Aa(B.x,W.x,E),y:Aa(B.y,W.y,E),width:Aa(B.width,W.width,E),height:Aa(B.height,W.height,E)});if(a==="horizontal"){var F=Aa(0,W.height,E),H=Aa(W.stackedBarStart,W.y,E);return so(so({},W),{},{y:H,height:F})}var I=Aa(0,W.width,E),R=Aa(W.stackedBarStart,W.x,E);return so(so({},W),{},{width:I,x:R})});return E>0&&(n.current=D??null),D==null?null:P.createElement(co,null,P.createElement(Tde,{props:t,data:D}))}),P.createElement(rI,{label:t.label}),t.children)}function kde(e){var t=P.useRef(null);return P.createElement(Pde,{previousRectanglesRef:t,props:e})}var CI=0,Dde=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:ni(e,t)}};class Ode extends P.PureComponent{render(){var{hide:t,data:n,dataKey:i,className:a,xAxisId:s,yAxisId:l,needClip:d,background:h,id:f}=this.props;if(t||n==null)return null;var p=Dn("recharts-bar",a),g=f;return P.createElement(co,{className:p,id:f},d&&P.createElement("defs",null,P.createElement(jce,{clipPathId:g,xAxisId:s,yAxisId:l})),P.createElement(co,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},P.createElement(_de,{data:n,dataKey:i,background:h,allOtherBarProps:this.props}),P.createElement(kde,this.props)))}}var Mde={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:CI,xAxisId:0,yAxisId:0,zIndex:ys.bar};function Lde(e){var{xAxisId:t,yAxisId:n,hide:i,legendType:a,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:h,animationEasing:f,isAnimationActive:p}=e,{needClip:g}=SI(t,n),j=Mg(),v=Ho(),b=FN(e.children,Qg),w=Ft(E=>ode(E,e.id,v,b));if(j!=="vertical"&&j!=="horizontal")return null;var S,_=w?.[0];return _==null||_.height==null||_.width==null?S=0:S=j==="vertical"?_.height/2:_.width/2,P.createElement(bce,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:Dde,errorBarOffset:S},P.createElement(Ode,du({},e,{layout:j,needClip:g,data:w,xAxisId:t,yAxisId:n,hide:i,legendType:a,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:h,animationEasing:f,isAnimationActive:p})))}function Rde(e){var{layout:t,barSettings:{dataKey:n,minPointSize:i},pos:a,bandSize:s,xAxis:l,yAxis:d,xAxisTicks:h,yAxisTicks:f,stackedData:p,displayedData:g,offset:j,cells:v,parentViewBox:b,dataStartIndex:w}=e,S=t==="horizontal"?d:l,_=p?S.scale.domain():null,E=eZ({numericAxis:S}),D=S.scale(E);return g.map((W,K)=>{var B,F,H,I,R,Y;if(p){var G=p[K+w];if(G==null)return null;B=GY(G,_)}else B=ni(W,n),Array.isArray(B)||(B=[E,B]);var ae=Wce(i,CI)(B[1],K);if(t==="horizontal"){var se,[Ne,z]=[d.scale(B[0]),d.scale(B[1])];F=e3({axis:l,ticks:h,bandSize:s,offset:a.offset,entry:W,index:K}),H=(se=z??Ne)!==null&&se!==void 0?se:void 0,I=a.size;var ie=Ne-z;if(R=Nc(ie)?0:ie,Y={x:F,y:j.top,width:I,height:j.height},Math.abs(ae)>0&&Math.abs(R)<Math.abs(ae)){var q=Ka(R||ae)*(Math.abs(ae)-Math.abs(R));H-=q,R+=q}}else{var[re,ue]=[l.scale(B[0]),l.scale(B[1])];if(F=re,H=e3({axis:d,ticks:f,bandSize:s,offset:a.offset,entry:W,index:K}),I=ue-re,R=a.size,Y={x:j.left,y:H,width:j.width,height:R},Math.abs(ae)>0&&Math.abs(I)<Math.abs(ae)){var Q=Ka(I||ae)*(Math.abs(ae)-Math.abs(I));I+=Q}}if(F==null||H==null||I==null||R==null)return null;var V=so(so({},W),{},{stackedBarStart:D,x:F,y:H,width:I,height:R,value:p?B:B[1],payload:W,background:Y,tooltipPosition:{x:F+I/2,y:H+R/2},parentViewBox:b},v&&v[K]&&v[K].props);return V}).filter(Boolean)}function Ide(e){var t=Hs(e,Mde),n=ude(t.stackId),i=Ho();return P.createElement(dI,{id:t.id,type:"bar"},a=>P.createElement(P.Fragment,null,P.createElement(loe,{legendPayload:Sde(t)}),P.createElement(Nde,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),P.createElement(woe,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:i}),P.createElement(kc,{zIndex:t.zIndex},P.createElement(Lde,du({},t,{id:a})))))}var yw=P.memo(Ide,KN);yw.displayName="Bar";var zde=["domain","range"],Bde=["domain","range"];function dk(e,t){if(e==null)return{};var n,i,a=Fde(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Fde(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function uk(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function AI(e,t){if(e===t)return!0;var{domain:n,range:i}=e,a=dk(e,zde),{domain:s,range:l}=t,d=dk(t,Bde);return!uk(n,s)||!uk(i,l)?!1:KN(a,d)}var qde=["dangerouslySetInnerHTML","ticks","scale"],Ude=["id","scale"];function vw(){return vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vw.apply(null,arguments)}function hk(e,t){if(e==null)return{};var n,i,a=Hde(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hde(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Wde(e){var t=vi(),n=P.useRef(null);return P.useLayoutEffect(()=>{n.current===null?t(Joe(e)):n.current!==e&&t(ele({prev:n.current,next:e})),n.current=e},[e,t]),P.useLayoutEffect(()=>()=>{n.current&&(t(tle(n.current)),n.current=null)},[t]),null}var $de=e=>{var{xAxisId:t,className:n}=e,i=Ft(wS),a=Ho(),s="xAxis",l=Ft(_=>mR(_,s,t,a)),d=Ft(_=>dR(_,t)),h=Ft(_=>ene(_,t)),f=Ft(_=>$L(_,t));if(d==null||h==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:j}=e,v=hk(e,qde),{id:b,scale:w}=f,S=hk(f,Ude);return P.createElement(VN,vw({},v,S,{x:h.x,y:h.y,width:d.width,height:d.height,className:Dn("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:l,axisType:s}))},Vde={allowDataOverflow:Ha.allowDataOverflow,allowDecimals:Ha.allowDecimals,allowDuplicatedCategory:Ha.allowDuplicatedCategory,angle:Ha.angle,axisLine:Jd.axisLine,height:Ha.height,hide:!1,includeHidden:Ha.includeHidden,interval:Ha.interval,minTickGap:Ha.minTickGap,mirror:Ha.mirror,orientation:Ha.orientation,padding:Ha.padding,reversed:Ha.reversed,scale:Ha.scale,tick:Ha.tick,tickCount:Ha.tickCount,tickLine:Jd.tickLine,tickSize:Jd.tickSize,type:Ha.type,xAxisId:0},Kde=e=>{var t=Hs(e,Vde);return P.createElement(P.Fragment,null,P.createElement(Wde,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),P.createElement($de,t))},EI=P.memo(Kde,AI);EI.displayName="XAxis";var Gde=["dangerouslySetInnerHTML","ticks","scale"],Qde=["id","scale"];function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xw.apply(null,arguments)}function fk(e,t){if(e==null)return{};var n,i,a=Yde(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Yde(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Zde(e){var t=vi(),n=P.useRef(null);return P.useLayoutEffect(()=>{n.current===null?t(rle(e)):n.current!==e&&t(nle({prev:n.current,next:e})),n.current=e},[e,t]),P.useLayoutEffect(()=>()=>{n.current&&(t(ile(n.current)),n.current=null)},[t]),null}var Xde=e=>{var{yAxisId:t,className:n,width:i,label:a}=e,s=P.useRef(null),l=P.useRef(null),d=Ft(wS),h=Ho(),f=vi(),p="yAxis",g=Ft(B=>uR(B,t)),j=Ft(B=>rne(B,t)),v=Ft(B=>mR(B,p,t,h)),b=Ft(B=>VL(B,t));if(P.useLayoutEffect(()=>{if(!(i!=="auto"||!g||IN(a)||P.isValidElement(a)||b==null)){var B=s.current;if(B){var F=B.getCalculatedWidth();Math.round(g.width)!==Math.round(F)&&f(ale({id:t,width:F}))}}},[v,g,f,a,t,i,b]),g==null||j==null||b==null)return null;var{dangerouslySetInnerHTML:w,ticks:S,scale:_}=e,E=fk(e,Gde),{id:D,scale:W}=b,K=fk(b,Qde);return P.createElement(VN,xw({},E,K,{ref:s,labelRef:l,x:j.x,y:j.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:g.width,height:g.height,className:Dn("recharts-".concat(p," ").concat(p),n),viewBox:d,ticks:v,axisType:p}))},Jde={allowDataOverflow:Wa.allowDataOverflow,allowDecimals:Wa.allowDecimals,allowDuplicatedCategory:Wa.allowDuplicatedCategory,angle:Wa.angle,axisLine:Jd.axisLine,hide:!1,includeHidden:Wa.includeHidden,interval:Wa.interval,minTickGap:Wa.minTickGap,mirror:Wa.mirror,orientation:Wa.orientation,padding:Wa.padding,reversed:Wa.reversed,scale:Wa.scale,tick:Wa.tick,tickCount:Wa.tickCount,tickLine:Jd.tickLine,tickSize:Jd.tickSize,type:Wa.type,width:Wa.width,yAxisId:0},eue=e=>{var t=Hs(e,Jde);return P.createElement(P.Fragment,null,P.createElement(Zde,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),P.createElement(Xde,t))},TI=P.memo(eue,AI);TI.displayName="YAxis";var tue=(e,t)=>t,GN=He([tue,ln,HL,Oa,PR,xu,yie,ka],Nie),QN=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,i=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/i)}},PI=Gl("mouseClick"),kI=Dg();kI.startListening({actionCreator:PI,effect:(e,t)=>{var n=e.payload,i=GN(t.getState(),QN(n));i?.activeIndex!=null&&t.dispatch(gne({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var bw=Gl("mouseMove"),DI=Dg(),ov=null;DI.startListening({actionCreator:bw,effect:(e,t)=>{var n=e.payload;ov!==null&&cancelAnimationFrame(ov);var i=QN(n);ov=requestAnimationFrame(()=>{var a=t.getState(),s=CN(a,a.tooltip.settings.shared);if(s==="axis"){var l=GN(a,i);l?.activeIndex!=null?t.dispatch(wR({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(jR())}ov=null})}});function rue(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var mk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},OI=Uo({name:"rootProps",initialState:mk,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:mk.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),nue=OI.reducer,{updateOptions:iue}=OI.actions,MI=Uo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:aue}=MI.actions,sue=MI.reducer,LI=Gl("keyDown"),RI=Gl("focus"),YN=Dg();YN.startListening({actionCreator:LI,effect:(e,t)=>{var n=t.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:a}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=AN(a,Wm(n),Wg(n),Kg(n)),d=l==null?-1:Number(l);if(!(!Number.isFinite(d)||d<0)){var h=xu(n);if(s==="Enter"){var f=I0(n,"axis","hover",String(a.index));t.dispatch(dw({active:!a.active,activeIndex:a.index,activeCoordinate:f}));return}var p=sne(n),g=p==="left-to-right"?1:-1,j=s==="ArrowRight"?1:-1,v=d+j*g;if(!(h==null||v>=h.length||v<0)){var b=I0(n,"axis","hover",String(v));t.dispatch(dw({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});YN.startListening({actionCreator:RI,effect:(e,t)=>{var n=t.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var s="0",l=I0(n,"axis","hover",String(s));t.dispatch(dw({active:!0,activeIndex:s,activeCoordinate:l}))}}}});var zl=Gl("externalEvent"),II=Dg(),cj=new Map;II.startListening({actionCreator:zl,effect:(e,t)=>{var{handler:n,reactEvent:i}=e.payload;if(n!=null){i.persist();var a=i.type,s=cj.get(a);s!==void 0&&cancelAnimationFrame(s);var l=requestAnimationFrame(()=>{try{var d=t.getState(),h={activeCoordinate:rie(d),activeDataKey:DN(d),activeIndex:Xh(d),activeLabel:OR(d),activeTooltipIndex:Xh(d),isTooltipActive:nie(d)};n(h,i)}finally{cj.delete(a)}});cj.set(a,l)}}});var oue=He([Um],e=>e.tooltipItemPayloads),lue=He([oue,Vg,(e,t)=>t,(e,t,n)=>n],(e,t,n,i)=>{var a=e.find(d=>d.settings.graphicalItemId===i);if(a!=null){var{positions:s}=a;if(s!=null){var l=t(s,n);return l}}}),zI=Gl("touchMove"),BI=Dg();BI.startListening({actionCreator:zI,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var i=t.getState(),a=CN(i,i.tooltip.settings.shared);if(a==="axis"){var s=n.touches[0];if(s==null)return;var l=GN(i,QN({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&t.dispatch(wR({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var d,h=n.touches[0];if(document.elementFromPoint==null||h==null)return;var f=document.elementFromPoint(h.clientX,h.clientY);if(!f||!f.getAttribute)return;var p=f.getAttribute(uM),g=(d=f.getAttribute(hM))!==null&&d!==void 0?d:void 0,j=Hm(i).find(w=>w.id===g);if(p==null||j==null||g==null)return;var{dataKey:v}=j,b=lue(i,p,g);t.dispatch(bR({activeDataKey:v,activeIndex:p,activeCoordinate:b,activeGraphicalItemId:g}))}}}});var cue=O8({brush:yle,cartesianAxis:sle,chartData:tae,errorBars:mce,graphicalItems:boe,layout:UY,legend:GZ,options:Yie,polarAxis:Ose,polarOptions:sue,referenceElements:Nle,rootProps:nue,tooltip:yne,zIndex:zie}),due=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return fY({reducer:cue,preloadedState:t,middleware:i=>{var a;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([kI.middleware,DI.middleware,YN.middleware,II.middleware,BI.middleware])},enhancers:i=>{var a=i;return typeof i=="function"&&(a=i()),a.concat(G8({type:"raf"}))},devTools:{serialize:{replacer:rue},name:"recharts-".concat(n)}})};function FI(e){var{preloadedState:t,children:n,reduxStoreName:i}=e,a=Ho(),s=P.useRef(null);if(a)return n;s.current==null&&(s.current=due(t,i));var l=pS;return P.createElement(Bce,{context:l,store:s.current},n)}function uue(e){var{layout:t,margin:n}=e,i=vi(),a=Ho();return P.useEffect(()=>{a||(i(BY(t)),i(zY(n)))},[i,a,t,n]),null}var qI=P.memo(uue,KN);function UI(e){var t=vi();return P.useEffect(()=>{t(iue(e))},[t,e]),null}function pk(e){var{zIndex:t,isPanorama:n}=e,i=P.useRef(null),a=vi();return P.useLayoutEffect(()=>(i.current&&a(Rie({zIndex:t,element:i.current,isPanorama:n})),()=>{a(Iie({zIndex:t,isPanorama:n}))}),[a,t,n]),P.createElement("g",{tabIndex:-1,ref:i})}function gk(e){var{children:t,isPanorama:n}=e,i=Ft(Cie);if(!i||i.length===0)return t;var a=i.filter(l=>l<0),s=i.filter(l=>l>0);return P.createElement(P.Fragment,null,a.map(l=>P.createElement(pk,{key:l,zIndex:l,isPanorama:n})),t,s.map(l=>P.createElement(pk,{key:l,zIndex:l,isPanorama:n})))}var hue=["children"];function fue(e,t){if(e==null)return{};var n,i,a=mue(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function mue(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W0.apply(null,arguments)}var pue={width:"100%",height:"100%",display:"block"},gue=P.forwardRef((e,t)=>{var n=vM(),i=xM(),a=PM();if(!vd(n)||!vd(i))return null;var{children:s,otherAttributes:l,title:d,desc:h}=e,f,p;return l!=null&&(typeof l.tabIndex=="number"?f=l.tabIndex:f=a?0:void 0,typeof l.role=="string"?p=l.role:p=a?"application":void 0),P.createElement(XO,W0({},l,{title:d,desc:h,role:p,tabIndex:f,width:n,height:i,style:pue,ref:t}),s)}),yue=e=>{var{children:t}=e,n=Ft(_x);if(!n)return null;var{width:i,height:a,y:s,x:l}=n;return P.createElement(XO,{width:i,height:a,x:l,y:s},t)},yk=P.forwardRef((e,t)=>{var{children:n}=e,i=fue(e,hue),a=Ho();return a?P.createElement(yue,null,P.createElement(gk,{isPanorama:!0},n)):P.createElement(gue,W0({ref:t},i),P.createElement(gk,{isPanorama:!1},n))});function vue(){var e=vi(),[t,n]=P.useState(null),i=Ft(sZ);return P.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Ai(s)&&s!==i&&e(qY(s))}},[t,e,i]),n}function vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function xue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(n),!0).forEach(function(i){bue(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function bue(e,t,n){return(t=jue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jue(e){var t=wue(e,"string");return typeof t=="symbol"?t:t+""}function wue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ef.apply(null,arguments)}var Sue=()=>(dae(),null);function $0(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Nue=P.forwardRef((e,t)=>{var n,i,a=P.useRef(null),[s,l]=P.useState({containerWidth:$0((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:$0((i=e.style)===null||i===void 0?void 0:i.height)}),d=P.useCallback((f,p)=>{l(g=>{var j=Math.round(f),v=Math.round(p);return g.containerWidth===j&&g.containerHeight===v?g:{containerWidth:j,containerHeight:v}})},[]),h=P.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=f.getBoundingClientRect();d(p,g);var j=b=>{var{width:w,height:S}=b[0].contentRect;d(w,S)},v=new ResizeObserver(j);v.observe(f),a.current=v}},[t,d]);return P.useEffect(()=>()=>{var f=a.current;f?.disconnect()},[d]),P.createElement(P.Fragment,null,P.createElement(Ax,{width:s.containerWidth,height:s.containerHeight}),P.createElement("div",ef({ref:h},e)))}),_ue=P.forwardRef((e,t)=>{var{width:n,height:i}=e,[a,s]=P.useState({containerWidth:$0(n),containerHeight:$0(i)}),l=P.useCallback((h,f)=>{s(p=>{var g=Math.round(h),j=Math.round(f);return p.containerWidth===g&&p.containerHeight===j?p:{containerWidth:g,containerHeight:j}})},[]),d=P.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:f,height:p}=h.getBoundingClientRect();l(f,p)}},[t,l]);return P.createElement(P.Fragment,null,P.createElement(Ax,{width:a.containerWidth,height:a.containerHeight}),P.createElement("div",ef({ref:d},e)))}),Cue=P.forwardRef((e,t)=>{var{width:n,height:i}=e;return P.createElement(P.Fragment,null,P.createElement(Ax,{width:n,height:i}),P.createElement("div",ef({ref:t},e)))}),Aue=P.forwardRef((e,t)=>{var{width:n,height:i}=e;return iu(n)||iu(i)?P.createElement(_ue,ef({},e,{ref:t})):P.createElement(Cue,ef({},e,{ref:t}))});function Eue(e){return e===!0?Nue:Aue}var Tue=P.forwardRef((e,t)=>{var{children:n,className:i,height:a,onClick:s,onContextMenu:l,onDoubleClick:d,onMouseDown:h,onMouseEnter:f,onMouseLeave:p,onMouseMove:g,onMouseUp:j,onTouchEnd:v,onTouchMove:b,onTouchStart:w,style:S,width:_,responsive:E,dispatchTouchEvents:D=!0}=e,W=P.useRef(null),K=vi(),[B,F]=P.useState(null),[H,I]=P.useState(null),R=vue(),Y=SS(),G=Y?.width>0?Y.width:_,ae=Y?.height>0?Y.height:a,se=P.useCallback(X=>{R(X),typeof t=="function"&&t(X),F(X),I(X),X!=null&&(W.current=X)},[R,t,F,I]),Ne=P.useCallback(X=>{K(PI(X)),K(zl({handler:s,reactEvent:X}))},[K,s]),z=P.useCallback(X=>{K(bw(X)),K(zl({handler:f,reactEvent:X}))},[K,f]),ie=P.useCallback(X=>{K(jR()),K(zl({handler:p,reactEvent:X}))},[K,p]),q=P.useCallback(X=>{K(bw(X)),K(zl({handler:g,reactEvent:X}))},[K,g]),re=P.useCallback(()=>{K(RI())},[K]),ue=P.useCallback(X=>{K(LI(X.key))},[K]),Q=P.useCallback(X=>{K(zl({handler:l,reactEvent:X}))},[K,l]),V=P.useCallback(X=>{K(zl({handler:d,reactEvent:X}))},[K,d]),ne=P.useCallback(X=>{K(zl({handler:h,reactEvent:X}))},[K,h]),$=P.useCallback(X=>{K(zl({handler:j,reactEvent:X}))},[K,j]),de=P.useCallback(X=>{K(zl({handler:w,reactEvent:X}))},[K,w]),Z=P.useCallback(X=>{D&&K(zI(X)),K(zl({handler:b,reactEvent:X}))},[K,D,b]),ge=P.useCallback(X=>{K(zl({handler:v,reactEvent:X}))},[K,v]),oe=Eue(E);return P.createElement(FR.Provider,{value:B},P.createElement(WK.Provider,{value:H},P.createElement(oe,{width:G??S?.width,height:ae??S?.height,className:Dn("recharts-wrapper",i),style:xue({position:"relative",cursor:"default",width:G,height:ae},S),onClick:Ne,onContextMenu:Q,onDoubleClick:V,onFocus:re,onKeyDown:ue,onMouseDown:ne,onMouseEnter:z,onMouseLeave:ie,onMouseMove:q,onMouseUp:$,onTouchEnd:ge,onTouchMove:Z,onTouchStart:de,ref:se},P.createElement(Sue,null),n)))}),Pue=["width","height","responsive","children","className","style","compact","title","desc"];function kue(e,t){if(e==null)return{};var n,i,a=Due(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Due(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var HI=P.forwardRef((e,t)=>{var{width:n,height:i,responsive:a,children:s,className:l,style:d,compact:h,title:f,desc:p}=e,g=kue(e,Pue),j=Sc(g);return h?P.createElement(P.Fragment,null,P.createElement(Ax,{width:n,height:i}),P.createElement(yk,{otherAttributes:j,title:f,desc:p},s)):P.createElement(Tue,{className:l,style:d,width:n,height:i,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},P.createElement(yk,{otherAttributes:j,title:f,desc:p,ref:t},P.createElement(Cle,null,s)))});function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jw.apply(null,arguments)}var Oue={top:5,right:5,bottom:5,left:5},Mue={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Oue,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Lue=P.forwardRef(function(t,n){var i,a=Hs(t.categoricalChartProps,Mue),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,categoricalChartProps:f}=t,p={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return P.createElement(FI,{preloadedState:{options:p},reduxStoreName:(i=f.id)!==null&&i!==void 0?i:s},P.createElement(gI,{chartData:f.data}),P.createElement(qI,{layout:a.layout,margin:a.margin}),P.createElement(UI,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),P.createElement(HI,jw({},a,{ref:n})))}),Rue=["axis","item"],Iue=P.forwardRef((e,t)=>P.createElement(Lue,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Rue,tooltipPayloadSearcher:qR,categoricalChartProps:e,ref:t}));function zue(e){var t=vi();return P.useEffect(()=>{t(aue(e))},[t,e]),null}var Bue=["layout"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ww.apply(null,arguments)}function Fue(e,t){if(e==null)return{};var n,i,a=que(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function que(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}var Uue={top:5,right:5,bottom:5,left:5},WI={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Uue,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Hue=P.forwardRef(function(t,n){var i,a=Hs(t.categoricalChartProps,WI),{layout:s}=a,l=Fue(a,Bue),{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:f,tooltipPayloadSearcher:p}=t,g={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:f,tooltipPayloadSearcher:p,eventEmitter:void 0};return P.createElement(FI,{preloadedState:{options:g},reduxStoreName:(i=a.id)!==null&&i!==void 0?i:d},P.createElement(gI,{chartData:a.data}),P.createElement(qI,{layout:s,margin:a.margin}),P.createElement(UI,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),P.createElement(zue,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),P.createElement(HI,ww({},l,{ref:n})))});function xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(n),!0).forEach(function(i){Wue(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Wue(e,t,n){return(t=$ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ue(e){var t=Vue(e,"string");return typeof t=="symbol"?t:t+""}function Vue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kue=["item"],Gue=bk(bk({},WI),{},{layout:"centric",startAngle:0,endAngle:360}),Que=P.forwardRef((e,t)=>{var n=Hs(e,Gue);return P.createElement(Hue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Kue,tooltipPayloadSearcher:qR,categoricalChartProps:n,ref:t})});const jk=["#2563eb","#22c55e","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];function Yue(){const[e,t]=P.useState({fromDate:Ke(yV(new Date),"yyyy-MM-dd"),toDate:Ke(new Date,"yyyy-MM-dd")}),{data:n}=Ye({queryKey:["daily-production",e],queryFn:async()=>{const{data:d}=await xe.get("/reports/daily-production",{params:e});return d}}),{data:i}=Ye({queryKey:["on-time-delivery",e],queryFn:async()=>{const{data:d}=await xe.get("/reports/on-time-delivery",{params:e});return d}}),{data:a}=Ye({queryKey:["qc-pass-rate",e],queryFn:async()=>{const{data:d}=await xe.get("/reports/qc-pass-rate",{params:e});return d}}),{data:s}=Ye({queryKey:["capacity-utilization",e],queryFn:async()=>{const{data:d}=await xe.get("/reports/capacity-utilization",{params:e});return d}}),{data:l}=Ye({queryKey:["order-turnaround",e],queryFn:async()=>{const{data:d}=await xe.get("/reports/order-turnaround",{params:e});return d}});return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"Reports & Analytics"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx(Wi,{size:18,color:"var(--text-muted)"}),r.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:e.fromDate,onChange:d=>t({...e,fromDate:d.target.value})}),r.jsx("span",{children:"to"}),r.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:e.toDate,onChange:d=>t({...e,toDate:d.target.value})})]})]}),r.jsxs("div",{className:"grid grid-4",style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card stat-card",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(fn,{size:20,color:"var(--primary)"}),r.jsx("span",{className:"stat-label",children:"On-Time Delivery"})]}),r.jsxs("div",{className:"stat-value",children:[i?.onTimeRate||0,"%"]}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[i?.onTime||0," of ",i?.totalDelivered||0," deliveries"]})]}),r.jsxs("div",{className:"card stat-card",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(yt,{size:20,color:"var(--success)"}),r.jsx("span",{className:"stat-label",children:"QC Pass Rate"})]}),r.jsxs("div",{className:"stat-value",children:[a?.passRate||0,"%"]}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[a?.passed||0," passed, ",a?.failed||0," failed"]})]}),r.jsxs("div",{className:"card stat-card",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(Dt,{size:20,color:"var(--warning)"}),r.jsx("span",{className:"stat-label",children:"Avg Turnaround"})]}),r.jsxs("div",{className:"stat-value",children:[l?.averageTurnaroundHours||0,"h"]}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Order to delivery"})]}),r.jsxs("div",{className:"card stat-card",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(iS,{size:20,color:"var(--info)"}),r.jsx("span",{className:"stat-label",children:"Total Orders"})]}),r.jsx("div",{className:"stat-value",children:l?.totalOrders||0}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered in period"})]})]}),r.jsxs("div",{className:"grid grid-2",style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontWeight:600},children:"Daily Production Summary"})}),r.jsx("div",{style:{padding:"1.5rem",height:"300px"},children:n?.length>0?r.jsx(u3,{width:"100%",height:"100%",children:r.jsxs(Iue,{data:n,children:[r.jsx(jI,{strokeDasharray:"3 3"}),r.jsx(EI,{dataKey:"date",tickFormatter:d=>Ke(new Date(d),"MMM dd")}),r.jsx(TI,{}),r.jsx(fP,{}),r.jsx(yw,{dataKey:"totalBatches",fill:"#2563eb",name:"Batches"}),r.jsx(yw,{dataKey:"totalOrders",fill:"#22c55e",name:"Orders"})]})}):r.jsx("div",{className:"empty-state",children:"No production data for this period"})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontWeight:600},children:"QC Pass Rate by Product"})}),r.jsx("div",{style:{padding:"1.5rem",height:"300px"},children:a?.byProduct&&Object.keys(a.byProduct).length>0?r.jsx(u3,{width:"100%",height:"100%",children:r.jsxs(Que,{children:[r.jsx(hI,{data:Object.entries(a.byProduct).map(([d,h])=>({name:d,value:h.passed})),cx:"50%",cy:"50%",labelLine:!1,label:({name:d,percent:h})=>`${d} (${(h*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:Object.entries(a.byProduct).map((d,h)=>r.jsx(Qg,{fill:jk[h%jk.length]},`cell-${h}`))}),r.jsx(fP,{})]})}):r.jsx("div",{className:"empty-state",children:"No QC data for this period"})})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontWeight:600},children:"Capacity Utilization"})}),r.jsx("div",{style:{padding:"0"},children:s?.length>0?r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Equipment"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Batches"}),r.jsx("th",{children:"Minutes Used"}),r.jsx("th",{children:"Utilization"})]})}),r.jsx("tbody",{children:s.map(d=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:d.equipment}),r.jsx("td",{children:d.type}),r.jsx("td",{children:d.batchCount}),r.jsxs("td",{children:[d.minutesUsed.toFixed(0)," min"]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{width:"100px",height:"8px",background:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:r.jsx("div",{style:{width:`${d.utilizationPercent}%`,height:"100%",background:parseFloat(d.utilizationPercent)>80?"var(--success)":"var(--primary)",borderRadius:"4px"}})}),r.jsxs("span",{children:[d.utilizationPercent,"%"]})]})})]},d.equipment))})]}):r.jsx("div",{className:"empty-state",children:"No capacity data for this period"})})]})]})}function Zue(){const[e,t]=P.useState({entityType:"",action:"",fromDate:"",toDate:"",limit:50,offset:0}),[n,i]=P.useState(null),{data:a,isLoading:s}=Ye({queryKey:["audit-logs",e],queryFn:async()=>{const p={...e};Object.keys(p).forEach(j=>{p[j]||delete p[j]});const{data:g}=await xe.get("/audit",{params:p});return g}}),{data:l}=Ye({queryKey:["audit-actions"],queryFn:async()=>{const{data:p}=await xe.get("/audit/actions");return p}}),{data:d}=Ye({queryKey:["audit-entity-types"],queryFn:async()=>{const{data:p}=await xe.get("/audit/entity-types");return p}}),h=p=>{t(g=>({...g,offset:p==="next"?g.offset+g.limit:Math.max(0,g.offset-g.limit)}))},f=p=>p.includes("CREATE")?"success":p.includes("UPDATE")||p.includes("CHANGE")?"warning":p.includes("DELETE")?"danger":p.includes("LOGIN")||p.includes("LOGOUT")?"info":"default";return s?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:"Audit Log"})}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[r.jsx(sf,{size:18,color:"var(--text-muted)"}),r.jsxs("select",{className:"form-select",style:{width:"auto"},value:e.entityType,onChange:p=>t({...e,entityType:p.target.value,offset:0}),children:[r.jsx("option",{value:"",children:"All Entity Types"}),d?.map(p=>r.jsx("option",{value:p,children:p},p))]}),r.jsxs("select",{className:"form-select",style:{width:"auto"},value:e.action,onChange:p=>t({...e,action:p.target.value,offset:0}),children:[r.jsx("option",{value:"",children:"All Actions"}),l?.map(p=>r.jsx("option",{value:p,children:p},p))]}),r.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:e.fromDate,onChange:p=>t({...e,fromDate:p.target.value,offset:0}),placeholder:"From Date"}),r.jsx("input",{type:"date",className:"form-input",style:{width:"auto"},value:e.toDate,onChange:p=>t({...e,toDate:p.target.value,offset:0}),placeholder:"To Date"}),(e.entityType||e.action||e.fromDate||e.toDate)&&r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>t({entityType:"",action:"",fromDate:"",toDate:"",limit:50,offset:0}),children:"Clear Filters"})]})}),r.jsxs("div",{className:"card",children:[r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Timestamp"}),r.jsx("th",{children:"User"}),r.jsx("th",{children:"Action"}),r.jsx("th",{children:"Entity Type"}),r.jsx("th",{children:"Entity ID"}),r.jsx("th",{children:"Details"})]})}),r.jsx("tbody",{children:a?.logs?.map(p=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:Ke(new Date(p.createdAt),"MMM dd, yyyy")}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Ke(new Date(p.createdAt),"HH:mm:ss")})]}),r.jsx("td",{children:p.user?r.jsxs("div",{children:[r.jsxs("div",{children:[p.user.firstName," ",p.user.lastName]}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:p.user.email})]}):r.jsx("span",{style:{color:"var(--text-muted)"},children:"System"})}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${f(p.action)}`,children:p.action})}),r.jsx("td",{children:p.entityType}),r.jsx("td",{children:r.jsx("code",{style:{fontSize:"0.75rem",background:"var(--bg-tertiary)",padding:"0.125rem 0.25rem",borderRadius:"4px"},children:p.entityId?.slice(0,8)||"-"})}),r.jsx("td",{children:r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(p),children:"View"})})]},p.id))})]}),a?.logs?.length===0&&r.jsx("div",{className:"empty-state",children:"No audit logs found"}),r.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Showing ",e.offset+1," - ",Math.min(e.offset+e.limit,a?.total||0)," of ",a?.total||0]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>h("prev"),disabled:e.offset===0,children:[r.jsx(Yp,{size:16}),"Previous"]}),r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>h("next"),disabled:e.offset+e.limit>=(a?.total||0),children:["Next",r.jsx(uu,{size:16})]})]})]})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(null),children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:p=>p.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",style:{background:"linear-gradient(135deg, var(--primary) 0%, #1e40af 100%)",padding:"1.5rem",borderRadius:"16px 16px 0 0",color:"white"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(10px)"},children:r.jsx(Wl,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:600,color:"white"},children:"Audit Log Details"}),r.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255,255,255,0.8)"},children:Ke(new Date(n.createdAt),"MMMM dd, yyyy 'at' HH:mm:ss")})]})]}),r.jsx("button",{onClick:()=>i(null),style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(hn,{size:20,color:"white"})})]}),r.jsxs("div",{className:"modal-body",style:{overflow:"auto",flex:1,padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"12px",border:"1px solid #bae6fd"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#0284c7",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Vl,{size:14,color:"white"})}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#0369a1",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"User"})]}),n.user?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{fontWeight:600,fontSize:"1rem",color:"#0c4a6e"},children:[n.user.firstName," ",n.user.lastName]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#0369a1",marginTop:"0.25rem"},children:n.user.email}),n.actorRole&&r.jsx("span",{className:"badge badge-info",style:{marginTop:"0.75rem",display:"inline-block"},children:n.actorRole})]}):r.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#64748b"},children:"System"})]}),r.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#16a34a",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Dt,{size:14,color:"white"})}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#15803d",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"Timestamp"})]}),r.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#14532d"},children:Ke(new Date(n.createdAt),"MMM dd, yyyy")}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#15803d",marginTop:"0.25rem"},children:Ke(new Date(n.createdAt),"HH:mm:ss.SSS")})]}),r.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #fefce8 0%, #fef9c3 100%)",borderRadius:"12px",border:"1px solid #fde047"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#ca8a04",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ii,{size:14,color:"white"})}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#a16207",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"Entity"})]}),r.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#713f12"},children:n.entityType}),r.jsx("code",{style:{fontSize:"0.75rem",background:"rgba(0,0,0,0.05)",padding:"0.375rem 0.625rem",borderRadius:"6px",display:"inline-block",marginTop:"0.5rem",color:"#92400e",fontFamily:"monospace",wordBreak:"break-all"},children:n.entityId||"N/A"})]}),r.jsxs("div",{style:{padding:"1.25rem",background:"linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%)",borderRadius:"12px",border:"1px solid #e879f9"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"#a855f7",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(bH,{size:14,color:"white"})}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#7e22ce",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:"Action"})]}),r.jsx("span",{className:`badge badge-${f(n.action)}`,style:{fontSize:"0.875rem",fontWeight:600},children:n.action}),n.traceId&&r.jsxs("div",{style:{marginTop:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"0.75rem",color:"#7e22ce"},children:"Trace ID: "}),r.jsxs("code",{style:{fontSize:"0.7rem",background:"rgba(0,0,0,0.05)",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:[n.traceId.slice(0,16),"..."]})]})]})]}),(n.oldValues||n.newValues)&&r.jsxs("div",{style:{marginTop:"1.5rem",padding:"1.25rem",background:"var(--bg-secondary)",borderRadius:"12px",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(bc,{size:16,color:"white"})}),r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,margin:0,color:"var(--text-primary)"},children:"Changes"})]}),n.oldValues&&n.newValues?r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"#dc2626",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626"}}),"Before"]}),r.jsx("pre",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",overflow:"auto",maxHeight:"220px",border:"1px solid #fecaca",margin:0,color:"#991b1b",fontFamily:'"SF Mono", "Fira Code", monospace',lineHeight:1.5},children:JSON.stringify(n.oldValues,null,2)})]}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"#16a34a",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#16a34a"}}),"After"]}),r.jsx("pre",{style:{background:"#f0fdf4",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",overflow:"auto",maxHeight:"220px",border:"1px solid #bbf7d0",margin:0,color:"#166534",fontFamily:'"SF Mono", "Fira Code", monospace',lineHeight:1.5},children:JSON.stringify(n.newValues,null,2)})]})]}):r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:n.oldValues?"#dc2626":"#16a34a",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.oldValues?"#dc2626":"#16a34a"}}),n.oldValues?"Previous Values":"New Values"]}),r.jsx("pre",{style:{background:n.oldValues?"#fef2f2":"#f0fdf4",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",overflow:"auto",maxHeight:"300px",border:`1px solid ${n.oldValues?"#fecaca":"#bbf7d0"}`,margin:0,color:n.oldValues?"#991b1b":"#166534",fontFamily:'"SF Mono", "Fira Code", monospace',lineHeight:1.5},children:JSON.stringify(n.oldValues||n.newValues,null,2)})]})]}),!n.oldValues&&!n.newValues&&r.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"12px",border:"2px dashed var(--border)",marginTop:"1rem"},children:[r.jsx(ii,{size:32,style:{marginBottom:"0.75rem",opacity:.5}}),r.jsx("div",{style:{fontWeight:500},children:"No detailed change data available"}),r.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem"},children:"This log entry does not contain before/after values."})]})]}),r.jsx("div",{className:"modal-footer",style:{borderTop:"1px solid var(--border)",padding:"1rem 1.5rem",display:"flex",justifyContent:"flex-end",background:"var(--bg-secondary)",borderRadius:"0 0 16px 16px"},children:r.jsx("button",{className:"btn btn-primary",onClick:()=>i(null),children:"Close"})})]})})]})}function Xue(){const e=Tr(),t=Ei(),[n,i]=P.useState(null),[a,s]=P.useState("PENDING"),[l,d]=P.useState({}),[h,f]=P.useState(null),[p,g]=P.useState(""),[j,v]=P.useState(""),{data:b=[],isLoading:w}=Ye({queryKey:["approvals","pending"],queryFn:async()=>{const{data:I}=await xe.get("/approvals/pending");return I}}),{data:S=[],isLoading:_}=Ye({queryKey:["approvals","requests",a],queryFn:async()=>{const I=a!=="all"?`?status=${a}`:"",{data:R}=await xe.get(`/approvals/requests${I}`);return R}}),E=ft({mutationFn:async({requestId:I,action:R,comments:Y,signature:G})=>{const{data:ae}=await xe.post(`/approvals/${I}/action`,{action:R,comments:Y,signature:G});return ae},onSuccess:(I,R)=>{e.invalidateQueries({queryKey:["approvals"]}),f(null),g(""),v(""),R.action==="APPROVED"?t.success("Request Approved","The approval request has been approved successfully"):t.warning("Request Rejected","The approval request has been rejected")},onError:I=>{t.error("Action Failed",I.response?.data?.error||"Failed to process approval action")}}),D=(I,R,Y)=>{f({requestId:I,action:R,workflowName:Y})},W=()=>{h&&E.mutate({requestId:h.requestId,action:h.action,comments:p||void 0,signature:j||void 0})},K=[{key:"search",label:"Search",type:"search",placeholder:"Search workflows..."}],B=b.filter(I=>{if(l.search){const R=l.search.toLowerCase();if(!I.workflow.name.toLowerCase().includes(R)&&!I.entityType.toLowerCase().includes(R)&&!`${I.requestedBy.firstName} ${I.requestedBy.lastName}`.toLowerCase().includes(R))return!1}return!0}),F=S.filter(I=>{if(l.search){const R=l.search.toLowerCase();if(!I.workflow.name.toLowerCase().includes(R)&&!I.entityType.toLowerCase().includes(R))return!1}return!0}),H={pending:b.length,approved:S.filter(I=>I.status==="APPROVED").length,rejected:S.filter(I=>I.status==="REJECTED").length,urgent:b.filter(I=>I.priority==="URGENT").length};return w||_?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Approval Inbox"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Review and process pending approval requests"})]})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Pending Approvals",value:H.pending,icon:r.jsx(Dt,{size:20}),color:"warning",onClick:()=>s("PENDING"),selected:a==="PENDING"}),r.jsx(lt,{title:"Urgent",value:H.urgent,icon:r.jsx(af,{size:20}),color:"danger",onClick:()=>d(I=>({...I,priority:"URGENT"}))}),r.jsx(lt,{title:"Approved",value:H.approved,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>s("APPROVED"),selected:a==="APPROVED"}),r.jsx(lt,{title:"Rejected",value:H.rejected,icon:r.jsx(pi,{size:20}),color:"default",onClick:()=>s("REJECTED"),selected:a==="REJECTED"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsx(of,{widgets:K,values:l,onChange:(I,R)=>d(Y=>({...Y,[I]:R})),onReset:()=>d({})})}),B.length>0&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(CH,{size:18,style:{color:"var(--warning)"}}),r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Awaiting Your Approval (",B.length,")"]})]}),r.jsx("div",{style:{padding:0},children:r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40px"}}),r.jsx("th",{children:"Workflow"}),r.jsx("th",{children:"Entity"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Current Step"}),r.jsx("th",{children:"Requested By"}),r.jsx("th",{children:"Date"}),r.jsx("th",{style:{width:"200px",textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:B.map(I=>r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("button",{className:"btn btn-sm btn-outline",style:{padding:"0.25rem"},onClick:()=>i(n===I.id?null:I.id),children:n===I.id?r.jsx(tu,{size:14}):r.jsx(uu,{size:14})})}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:I.workflow.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:I.entityType})]}),r.jsxs("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:[I.entityId.slice(0,8),"..."]}),r.jsx("td",{children:r.jsx(Wn,{status:I.priority,size:"sm"})}),r.jsx("td",{children:I.workflow.steps.find(R=>R.stepOrder===I.currentStep)?.stepName||"Unknown"}),r.jsxs("td",{children:[I.requestedBy.firstName," ",I.requestedBy.lastName]}),r.jsx("td",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:Ke(new Date(I.createdAt),"MMM d, HH:mm")}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>i(n===I.id?null:I.id),title:"View Details",children:r.jsx(Pa,{size:14})}),r.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>D(I.id,"APPROVED",I.workflow.name),style:{minWidth:"80px"},children:[r.jsx(yt,{size:14}),"Approve"]}),r.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>D(I.id,"REJECTED",I.workflow.name),style:{minWidth:"70px"},children:[r.jsx(pi,{size:14}),"Reject"]})]})})]},I.id),n===I.id&&r.jsx("tr",{children:r.jsxs("td",{colSpan:8,style:{background:"var(--bg-secondary)",padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"0.875rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Workflow Steps"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:I.workflow.steps.map(R=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:R.stepOrder===I.currentStep?"rgba(59, 130, 246, 0.1)":"var(--bg)",borderRadius:"var(--radius)",border:R.stepOrder===I.currentStep?"1px solid var(--primary)":"1px solid var(--border)"},children:[R.stepOrder<I.currentStep?r.jsx(yt,{size:18,color:"var(--success)"}):R.stepOrder===I.currentStep?r.jsx(Dt,{size:18,color:"var(--primary)"}):r.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid var(--border)"}}),r.jsxs("span",{style:{fontWeight:R.stepOrder===I.currentStep?500:400,flex:1},children:[R.stepOrder,". ",R.stepName]}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:R.approverRole.name})]},R.id))})]}),r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"0.875rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Approval History"}),I.actions.length===0?r.jsx("div",{style:{color:"var(--text-muted)",fontStyle:"italic",padding:"1rem",background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:"No actions taken yet"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:I.actions.map(R=>r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[R.action==="APPROVED"?r.jsx(yt,{size:16,color:"var(--success)"}):r.jsx(pi,{size:16,color:"var(--danger)"}),r.jsx("span",{style:{fontWeight:500},children:R.step.stepName}),r.jsx("span",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--text-muted)"},children:Ke(new Date(R.createdAt),"MMM d, HH:mm")})]}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["by ",R.actionBy.firstName," ",R.actionBy.lastName]}),R.comments&&r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",marginTop:"0.5rem",fontStyle:"italic",paddingLeft:"1.5rem"},children:['"',R.comments,'"']})]},R.id))})]})]}),I.notes&&r.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[r.jsx("strong",{style:{fontSize:"0.8125rem"},children:"Notes:"}),r.jsx("span",{style:{marginLeft:"0.5rem",color:"var(--text-secondary)"},children:I.notes})]})]})},`${I.id}-details`)]}))})]})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(sf,{size:18,style:{color:"var(--text-muted)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"All Approval Requests"})]}),r.jsx("div",{style:{display:"inline-flex",background:"var(--bg)",borderRadius:"8px",padding:"4px",border:"1px solid var(--border)"},children:[{key:"PENDING",label:"Pending",icon:Dt,color:"var(--warning)"},{key:"APPROVED",label:"Approved",icon:yt,color:"var(--success)"},{key:"REJECTED",label:"Rejected",icon:pi,color:"var(--danger)"},{key:"all",label:"All",icon:null,color:"var(--primary)"}].map((I,R,Y)=>{const G=a===I.key,ae=I.icon;return r.jsxs("button",{onClick:()=>s(I.key),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",fontSize:"0.8125rem",fontWeight:G?600:500,color:G?"#fff":"var(--text-secondary)",background:G?I.color:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.15s ease",whiteSpace:"nowrap"},onMouseEnter:se=>{G||(se.currentTarget.style.background="var(--bg-hover)")},onMouseLeave:se=>{G||(se.currentTarget.style.background="transparent")},children:[ae&&r.jsx(ae,{size:14}),I.label]},I.key)})})]}),r.jsx("div",{style:{padding:0},children:F.length>0?r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Workflow"}),r.jsx("th",{children:"Entity Type"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Current Step"}),r.jsx("th",{children:"Requested By"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:F.map(I=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:I.workflow.name}),r.jsx("td",{children:I.entityType}),r.jsx("td",{children:r.jsx(Wn,{status:I.status,size:"sm"})}),r.jsx("td",{children:r.jsx(Wn,{status:I.priority,size:"sm"})}),r.jsx("td",{children:I.workflow.steps.find(R=>R.stepOrder===I.currentStep)?.stepName||"-"}),r.jsxs("td",{children:[I.requestedBy.firstName," ",I.requestedBy.lastName]}),r.jsx("td",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:Ke(new Date(I.createdAt),"MMM d, yyyy HH:mm")})]},I.id))})]}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No approval requests",message:`No ${a==="all"?"":a.toLowerCase()} approval requests found`,icon:"package",variant:"compact"})})})]}),h&&r.jsx("div",{className:"modal-overlay",onClick:()=>f(null),children:r.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{margin:0,fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:h.action==="APPROVED"?r.jsxs(r.Fragment,{children:[r.jsx(yt,{color:"var(--success)",size:20})," Approve Request"]}):r.jsxs(r.Fragment,{children:[r.jsx(pi,{color:"var(--danger)",size:20})," Reject Request"]})}),r.jsx("button",{onClick:()=>f(null),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("div",{style:{padding:"1rem",background:h.action==="APPROVED"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius)",marginBottom:"1rem",border:h.action==="APPROVED"?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(239, 68, 68, 0.3)"},children:r.jsxs("p",{style:{margin:0,fontSize:"0.875rem"},children:["You are about to ",r.jsx("strong",{children:h.action==="APPROVED"?"approve":"reject"})," the request for ",r.jsx("strong",{children:h.workflowName}),"."]})}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Comments ",h.action==="REJECTED"?"*":"(optional)"]}),r.jsx("textarea",{className:"form-input",value:p,onChange:I=>g(I.target.value),placeholder:h.action==="REJECTED"?"Please provide a reason for rejection...":"Add any comments or notes...",rows:3,required:h.action==="REJECTED"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Electronic Signature *"}),r.jsx("input",{type:"text",className:"form-input",value:j,onChange:I=>v(I.target.value),placeholder:"Type your full name to sign"}),r.jsx("small",{style:{color:"var(--text-muted)",display:"block",marginTop:"0.5rem",fontSize:"0.75rem"},children:"By signing, you confirm this action is in compliance with GMP requirements."})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>f(null),children:"Cancel"}),r.jsxs("button",{className:`btn ${h.action==="APPROVED"?"btn-primary":"btn-danger"}`,onClick:W,disabled:E.isPending||!j.trim()||h.action==="REJECTED"&&!p.trim(),style:{minWidth:"140px"},children:[r.jsx(qo,{size:16}),E.isPending?"Processing...":`Confirm ${h.action==="APPROVED"?"Approval":"Rejection"}`]})]})]})})]})}function Jue(){const[e,t]=P.useState(""),[n,i]=P.useState(!1),[a,s]=P.useState(!1),[l,d]=P.useState(null),[h,f]=P.useState(""),[p,g]=P.useState({}),[j,v]=P.useState({batchId:"",orderId:"",patientReference:"",requestedActivity:"",volume:"",containerType:"",notes:""}),b=Tr(),w=Ei(),{data:S}=Ye({queryKey:["dispensing-stats"],queryFn:async()=>{const{data:z}=await xe.get("/dispensing/stats");return z}}),{data:_,isLoading:E}=Ye({queryKey:["batches","RELEASED"],queryFn:async()=>{const{data:z}=await xe.get("/batches",{params:{status:"RELEASED"}});return z}}),{data:D,isLoading:W}=Ye({queryKey:["dispensing","batch",e],queryFn:async()=>{const{data:z}=await xe.get(`/dispensing/batch/${e}`);return z},enabled:!!e}),{data:K}=Ye({queryKey:["dispensing"],queryFn:async()=>{const{data:z}=await xe.get("/dispensing");return z}}),B=ft({mutationFn:async z=>xe.post("/dispensing",z),onSuccess:()=>{b.invalidateQueries({queryKey:["dispensing"]}),b.invalidateQueries({queryKey:["dispensing-stats"]}),i(!1),v({batchId:"",orderId:"",patientReference:"",requestedActivity:"",volume:"",containerType:"",notes:""}),w.success("Dose Created","New dose unit has been created successfully")},onError:z=>{w.error("Creation Failed",z.response?.data?.error||"Failed to create dose unit")}}),F=ft({mutationFn:async({id:z,dispensedActivity:ie})=>xe.put(`/dispensing/${z}/dispense`,{dispensedActivity:ie}),onSuccess:()=>{b.invalidateQueries({queryKey:["dispensing"]}),b.invalidateQueries({queryKey:["dispensing-stats"]}),w.success("Dose Dispensed","Dose has been marked as dispensed")},onError:z=>{w.error("Dispense Failed",z.response?.data?.error||"Failed to dispense dose")}}),H=ft({mutationFn:async z=>xe.put(`/dispensing/${z}/label`),onSuccess:()=>{b.invalidateQueries({queryKey:["dispensing"]}),w.success("Label Printed","Dose has been labeled")},onError:z=>{w.error("Label Failed",z.response?.data?.error||"Failed to label dose")}}),I=ft({mutationFn:async({id:z,reason:ie})=>xe.put(`/dispensing/${z}/waste`,{reason:ie}),onSuccess:()=>{b.invalidateQueries({queryKey:["dispensing"]}),b.invalidateQueries({queryKey:["dispensing-stats"]}),s(!1),d(null),f(""),w.warning("Dose Wasted","Dose has been marked as wasted")},onError:z=>{w.error("Waste Failed",z.response?.data?.error||"Failed to mark as wasted")}}),R=()=>{!j.batchId||!j.requestedActivity||B.mutate({batchId:j.batchId,orderId:j.orderId||void 0,patientReference:j.patientReference||void 0,requestedActivity:parseFloat(j.requestedActivity),volume:j.volume?parseFloat(j.volume):void 0,containerType:j.containerType||void 0,notes:j.notes||void 0})},Y=()=>{!l||!h.trim()||I.mutate({id:l.id,reason:h})},G=z=>{d(z),f(""),s(!0)},ae=[{key:"search",label:"Search",type:"search",placeholder:"Search doses..."}],se=_?.filter(z=>{if(p.search){const ie=p.search.toLowerCase();if(!z.batchNumber.toLowerCase().includes(ie)&&!z.product?.name.toLowerCase().includes(ie))return!1}return!0}),Ne=K?.filter(z=>{if(p.search){const ie=p.search.toLowerCase();if(!z.doseNumber.toLowerCase().includes(ie)&&!z.batch?.batchNumber?.toLowerCase().includes(ie)&&!z.batch?.product?.name?.toLowerCase().includes(ie))return!1}return!0});return E?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Dose Dispensing"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Create and manage individual dose units from released batches"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[r.jsx(Lr,{size:18})," Create Dose Unit"]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Released Batches",value:S?.releasedBatches||0,icon:r.jsx(wc,{size:20}),color:"primary"}),r.jsx(lt,{title:"Total Doses",value:S?.totalDoses||0,icon:r.jsx(Xf,{size:20}),color:"default"}),r.jsx(lt,{title:"Pending",value:S?.pending||0,icon:r.jsx(Dt,{size:20}),color:"warning"}),r.jsx(lt,{title:"Dispensed Today",value:S?.dispensedToday||0,icon:r.jsx(yt,{size:20}),color:"success"}),r.jsx(lt,{title:"Shipped",value:S?.shipped||0,icon:r.jsx(fn,{size:20}),color:"info"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsx(of,{widgets:ae,values:p,onChange:(z,ie)=>g(q=>({...q,[z]:ie})),onReset:()=>g({})})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"320px 1fr",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(wc,{size:18,style:{color:"var(--primary)"}}),r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Released Batches (",se?.length||0,")"]})]}),r.jsx("div",{style:{padding:"0.75rem",maxHeight:"50vh",overflowY:"auto"},children:se?.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:se.map(z=>{const ie=z.doseUnits?.length||0;return r.jsxs("button",{className:`btn ${e===z.id?"btn-primary":"btn-outline"}`,style:{textAlign:"left",justifyContent:"flex-start",padding:"0.75rem 1rem",height:"auto"},onClick:()=>t(z.id),children:[r.jsx(Sr,{size:16}),r.jsxs("div",{style:{flex:1,marginLeft:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:500},children:z.batchNumber}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:z.product?.name}),r.jsxs("div",{style:{fontSize:"0.7rem",opacity:.5,marginTop:"0.25rem"},children:[ie," doses | ",z.targetActivity," ",z.activityUnit]})]})]},z.id)})}):r.jsx(Bs,{title:"No released batches",message:"Batches must be released by QP before dispensing",icon:"package",variant:"compact"})})]}),r.jsx("div",{className:"card",children:e&&D?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:0},children:D.batch?.batchNumber}),r.jsx(Wn,{status:D.batch?.status,size:"sm"})]}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",margin:"0.25rem 0 0 0"},children:D.batch?.product?.name})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs("div",{style:{textAlign:"right",backgroundColor:"var(--bg-secondary)",padding:"0.5rem 0.75rem",borderRadius:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx(Wl,{size:14,style:{color:"var(--primary)"}}),r.jsxs("span",{style:{fontSize:"1rem",fontWeight:600,color:"var(--primary)"},children:[D.remainingActivity?.toFixed(2)," ",D.batch?.activityUnit]})]}),r.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Available"})]}),r.jsx(yr,{to:`/batches/${e}/journey`,className:"btn btn-secondary btn-sm",children:r.jsx(Pa,{size:14})})]})]}),r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[r.jsxs("h4",{style:{fontWeight:600,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)",margin:0},children:["Dose Units (",D.doseUnits?.length||0,")"]}),r.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{v({...j,batchId:e}),i(!0)},children:[r.jsx(Lr,{size:14})," Add Dose"]})]}),D.doseUnits?.length>0?r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Dose #"}),r.jsx("th",{children:"Patient Ref"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"140px"},children:"Actions"})]})}),r.jsx("tbody",{children:D.doseUnits.map(z=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:z.doseNumber}),r.jsx("td",{children:z.patientReference||r.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),r.jsxs("td",{style:{fontWeight:500},children:[z.dispensedActivity||z.requestedActivity," ",z.activityUnit]}),r.jsx("td",{children:r.jsx(Wn,{status:z.status,size:"sm"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[z.status==="CREATED"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>H.mutate(z.id),disabled:H.isPending,title:"Print Label",children:r.jsx(kO,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>F.mutate({id:z.id}),disabled:F.isPending,title:"Dispense",children:r.jsx(Xf,{size:14})})]}),z.status==="LABELED"&&r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>F.mutate({id:z.id}),disabled:F.isPending,title:"Dispense",children:r.jsx(Xf,{size:14})}),["CREATED","LABELED"].includes(z.status)&&r.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>G(z),title:"Mark as Wasted",children:r.jsx(mi,{size:14})})]})})]},z.id))})]}):r.jsx(Bs,{title:"No dose units",message:"Create dose units for this batch",icon:"package",variant:"compact",ctaLabel:"Create Dose",onCta:()=>{v({...j,batchId:e}),i(!0)}}),D.pendingOrders?.length>0&&r.jsxs("div",{style:{marginTop:"1.5rem"},children:[r.jsxs("h4",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:["Pending Orders (",D.pendingOrders.length,")"]}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order #"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Requested Activity"}),r.jsx("th",{style:{width:"120px"},children:"Action"})]})}),r.jsx("tbody",{children:D.pendingOrders.map(z=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:z.orderNumber}),r.jsx("td",{children:z.customer?.name}),r.jsxs("td",{style:{fontWeight:500},children:[z.requestedActivity," ",z.activityUnit]}),r.jsx("td",{children:r.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{v({...j,batchId:e,orderId:z.id,requestedActivity:z.requestedActivity.toString()}),i(!0)},children:[r.jsx(Lr,{size:14})," Create Dose"]})})]},z.id))})]})]})]})]}):W?r.jsx("div",{style:{padding:"4rem",textAlign:"center"},children:r.jsx("div",{className:"spinner"})}):r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(Bs,{title:"No Batch Selected",message:"Select a released batch from the left to view and manage dose units",icon:"package"})})})]}),r.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Xf,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Recent Dose Units"})]}),r.jsx("div",{style:{padding:"0"},children:Ne?.length>0?r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Dose #"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Created"})]})}),r.jsx("tbody",{children:Ne.slice(0,15).map(z=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:z.doseNumber}),r.jsx("td",{children:z.batch?.batchNumber}),r.jsx("td",{children:z.batch?.product?.name}),r.jsx("td",{children:z.order?.customer?.name||r.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),r.jsxs("td",{style:{fontWeight:500},children:[z.dispensedActivity||z.requestedActivity," ",z.activityUnit]}),r.jsx("td",{children:r.jsx(Wn,{status:z.status,size:"sm"})}),r.jsx("td",{style:{color:"var(--text-muted)",fontSize:"0.8125rem"},children:Ke(new Date(z.createdAt),"MMM d, HH:mm")})]},z.id))})]}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No dose units",message:"Create dose units from released batches",icon:"package",variant:"compact"})})})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:r.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Create Dose Unit"}),r.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Batch *"}),r.jsxs("select",{className:"form-select",value:j.batchId,onChange:z=>v({...j,batchId:z.target.value}),children:[r.jsx("option",{value:"",children:"Select a batch"}),_?.map(z=>r.jsxs("option",{value:z.id,children:[z.batchNumber," - ",z.product?.name]},z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Requested Activity (mCi) *"}),r.jsx("input",{type:"number",className:"form-input",value:j.requestedActivity,onChange:z=>v({...j,requestedActivity:z.target.value}),step:"0.01",placeholder:"Enter activity amount"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Patient Reference"}),r.jsx("input",{type:"text",className:"form-input",value:j.patientReference,onChange:z=>v({...j,patientReference:z.target.value}),placeholder:"e.g., Hospital order ref or pseudonym"})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Volume (mL)"}),r.jsx("input",{type:"number",className:"form-input",value:j.volume,onChange:z=>v({...j,volume:z.target.value}),step:"0.1",placeholder:"Optional"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Container Type"}),r.jsx("input",{type:"text",className:"form-input",value:j.containerType,onChange:z=>v({...j,containerType:z.target.value}),placeholder:"e.g., Vial, Syringe"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{className:"form-input",value:j.notes,onChange:z=>v({...j,notes:z.target.value}),rows:2,placeholder:"Optional notes"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsxs("button",{className:"btn btn-primary",onClick:R,disabled:B.isPending||!j.batchId||!j.requestedActivity,children:[r.jsx(Xf,{size:16}),B.isPending?"Creating...":"Create Dose Unit"]})]})]})}),a&&l&&r.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:r.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Mark Dose as Wasted"}),r.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(vr,{size:18,color:"var(--danger)"}),r.jsx("strong",{style:{color:"var(--danger)"},children:"Dose Waste"})]}),r.jsx("p",{style:{margin:0,color:"#991b1b"},children:"This action will mark the dose as wasted. Please provide a reason for the waste."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Dose Number"}),r.jsx("input",{className:"form-input",value:l.doseNumber,disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Activity"}),r.jsx("input",{className:"form-input",value:`${l.requestedActivity} ${l.activityUnit}`,disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Waste Reason *"}),r.jsx("textarea",{className:"form-input",value:h,onChange:z=>f(z.target.value),rows:3,required:!0,placeholder:"Enter reason for waste (e.g., spillage, contamination, decay)"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),r.jsxs("button",{className:"btn btn-danger",onClick:Y,disabled:I.isPending||!h.trim(),children:[r.jsx(mi,{size:16}),I.isPending?"Processing...":"Confirm Waste"]})]})]})})]})}function ehe(){const[e,t]=P.useState(new Date),[n,i]=P.useState(!1),[a,s]=P.useState(!1),[l,d]=P.useState(null),h=Tr(),f=xm(e,{weekStartsOn:1}),p=y$(e,{weekStartsOn:1}),{data:g,isLoading:j}=Ye({queryKey:["availability","calendar",f.toISOString(),p.toISOString()],queryFn:async()=>{const{data:z}=await xe.get("/availability/calendar",{params:{startDate:f.toISOString(),endDate:p.toISOString()}});return z}}),{data:v}=Ye({queryKey:["reservations",f.toISOString(),p.toISOString()],queryFn:async()=>{const{data:z}=await xe.get("/reservations",{params:{startDate:f.toISOString(),endDate:p.toISOString()}});return z}}),b=ft({mutationFn:async z=>xe.post("/availability/windows",z),onSuccess:()=>{h.invalidateQueries({queryKey:["availability"]}),i(!1)}}),w=ft({mutationFn:async z=>xe.post("/availability/windows/generate",z),onSuccess:()=>{h.invalidateQueries({queryKey:["availability"]}),s(!1)}}),[S,_]=P.useState({name:"",date:Ke(new Date,"yyyy-MM-dd"),startTime:"08:00",endTime:"17:00",capacityMinutes:480}),[E,D]=P.useState({startDate:Ke(new Date,"yyyy-MM-dd"),endDate:Ke(Fl(new Date,30),"yyyy-MM-dd"),startTime:"08:00",endTime:"17:00",capacityMinutes:480,excludeWeekends:!0}),W=Array.from({length:7},(z,ie)=>Fl(f,ie)),K=z=>{if(!g)return[];const ie=Ke(z,"yyyy-MM-dd");return g.filter(q=>Ke(new Date(q.date),"yyyy-MM-dd")===ie)},B=z=>z>=90?"var(--danger)":z>=70?"var(--warning)":z>=40?"var(--primary)":"var(--success)",F=()=>{const z=S.date;b.mutate({name:S.name||`Delivery Window ${z}`,date:z,startTime:`${z}T${S.startTime}:00`,endTime:`${z}T${S.endTime}:00`,capacityMinutes:S.capacityMinutes})},H=()=>{w.mutate({startDate:E.startDate,endDate:E.endDate,startTime:E.startTime,endTime:E.endTime,capacityMinutes:E.capacityMinutes,excludeWeekends:E.excludeWeekends})},I=z=>{d(z)},R=z=>v?v.filter(ie=>ie.windowId===z&&["TENTATIVE","CONFIRMED"].includes(ie.status)):[],Y=v?.filter(z=>["TENTATIVE","CONFIRMED"].includes(z.status))||[],G=l?Y.filter(z=>z.windowId===l.id):Y,ae=g?.length||0,se=g?.reduce((z,ie)=>z+ie.capacityMinutes,0)||0,Ne=g?.reduce((z,ie)=>z+ie.usedMinutes,0)||0;return j?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Availability & Capacity"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage delivery windows and track capacity utilization"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{className:"btn btn-secondary",onClick:()=>s(!0),children:[r.jsx(dE,{size:16})," Generate Windows"]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[r.jsx(Lr,{size:18})," Add Window"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card stat-card",style:{cursor:"pointer"},onClick:()=>d(null),children:[r.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:r.jsx(dE,{size:20})}),r.jsxs("div",{children:[r.jsx("div",{className:"stat-value",style:{color:"var(--primary)"},children:ae}),r.jsx("div",{className:"stat-label",children:"Delivery Windows"})]})]}),r.jsxs("div",{className:"card stat-card",children:[r.jsx("div",{className:"stat-icon",style:{background:"rgba(100, 116, 139, 0.1)",color:"var(--text-muted)"},children:r.jsx(Dt,{size:20})}),r.jsxs("div",{children:[r.jsxs("div",{className:"stat-value",children:[Math.round(se/60),"h"]}),r.jsx("div",{className:"stat-label",children:"Total Capacity"})]})]}),r.jsxs("div",{className:"card stat-card",children:[r.jsx("div",{className:"stat-icon",style:{background:se>0?`${B(Ne/se*100)}15`:"rgba(34, 197, 94, 0.1)",color:se>0?B(Ne/se*100):"var(--success)"},children:r.jsx(Ih,{size:20})}),r.jsxs("div",{children:[r.jsxs("div",{className:"stat-value",style:{color:se>0?B(Ne/se*100):"var(--success)"},children:[se>0?Math.round(Ne/se*100):0,"%"]}),r.jsx("div",{className:"stat-label",children:"Utilization"})]})]}),r.jsxs("div",{className:"card stat-card",style:{cursor:"pointer",border:l===null&&Y.length>0?"2px solid var(--warning)":void 0},onClick:()=>d(null),children:[r.jsx("div",{className:"stat-icon",style:{background:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"},children:r.jsx(Sr,{size:20})}),r.jsxs("div",{children:[r.jsx("div",{className:"stat-value",style:{color:"var(--warning)"},children:Y.length}),r.jsx("div",{className:"stat-label",children:"Active Reservations"})]})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[r.jsxs("button",{className:"btn btn-secondary",onClick:()=>t(Fl(e,-7)),children:[r.jsx(Yp,{size:18})," Previous Week"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Wi,{size:20,style:{color:"var(--primary)"}}),r.jsxs("h3",{style:{fontWeight:600,fontSize:"1.125rem",margin:0},children:[Ke(f,"MMM d")," - ",Ke(p,"MMM d, yyyy")]})]}),r.jsxs("button",{className:"btn btn-secondary",onClick:()=>t(Fl(e,7)),children:["Next Week ",r.jsx(uu,{size:18})]})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.75rem"},children:W.map(z=>{const ie=K(z),q=Ke(z,"yyyy-MM-dd")===Ke(new Date,"yyyy-MM-dd"),re=z.getDay()===0||z.getDay()===6;return r.jsxs("div",{style:{border:q?"2px solid var(--primary)":"1px solid var(--border)",borderRadius:"var(--radius)",padding:"1rem",minHeight:"180px",backgroundColor:re?"var(--bg-secondary)":"white",transition:"box-shadow 0.2s"},children:[r.jsxs("div",{style:{marginBottom:"0.75rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",color:q?"var(--primary)":"var(--text-muted)",letterSpacing:"0.05em"},children:Ke(z,"EEE")}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600,color:q?"var(--primary)":"var(--text)"},children:Ke(z,"d")})]}),ie.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:ie.map(ue=>{const Q=R(ue.id),V=l?.id===ue.id;return r.jsxs("div",{onClick:()=>I(ue),style:{backgroundColor:V?"rgba(59, 130, 246, 0.1)":"var(--bg-secondary)",borderRadius:"var(--radius)",padding:"0.625rem",fontSize:"0.75rem",border:V?"2px solid var(--primary)":"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.5rem"},children:[r.jsx(Dt,{size:12,style:{color:"var(--text-muted)"}}),r.jsxs("span",{style:{fontWeight:500},children:[Ke(new Date(ue.startTime),"HH:mm"),"-",Ke(new Date(ue.endTime),"HH:mm")]})]}),r.jsx("div",{style:{height:"6px",backgroundColor:"var(--border)",borderRadius:"3px",overflow:"hidden"},children:r.jsx("div",{style:{width:`${ue.utilizationPercent}%`,height:"100%",backgroundColor:B(ue.utilizationPercent),transition:"width 0.3s"}})}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.375rem"},children:[r.jsxs("span",{style:{color:"var(--text-muted)"},children:[ue.availableMinutes,"m free"]}),r.jsxs("span",{style:{color:B(ue.utilizationPercent),fontWeight:500},children:[ue.utilizationPercent,"%"]})]}),Q.length>0&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--primary)",marginTop:"0.375rem",fontSize:"0.6875rem"},children:[r.jsx(Ih,{size:10}),Q.length," reservation",Q.length>1?"s":""]})]},ue.id)})}):r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem",textAlign:"center",paddingTop:"2rem",opacity:.7},children:"No windows"})]},z.toISOString())})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ih,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:l?"Window Reservations":"Active Reservations"}),l&&r.jsxs("span",{className:"badge badge-primary",style:{marginLeft:"0.5rem"},children:[Ke(new Date(l.date),"MMM d")," ",Ke(new Date(l.startTime),"HH:mm"),"-",Ke(new Date(l.endTime),"HH:mm")]})]}),l&&r.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>d(null),children:[r.jsx(hn,{size:14})," Clear Filter"]})]}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Reservation #"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Window"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Est. Minutes"}),r.jsx("th",{children:"Status"})]})}),r.jsxs("tbody",{children:[G.map(z=>r.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>z.windowId&&d(g?.find(ie=>ie.id===z.windowId)),children:[r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem",fontWeight:500},children:z.reservationNumber}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Fo,{size:14,style:{color:"var(--text-muted)"}}),z.customer?.name]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Sr,{size:14,style:{color:"var(--text-muted)"}}),z.product?.name]})}),r.jsx("td",{children:z.window?r.jsxs("span",{style:{fontSize:"0.8125rem",color:"var(--primary)"},children:[Ke(new Date(z.window.startTime),"HH:mm"),"-",Ke(new Date(z.window.endTime),"HH:mm")]}):r.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"No window"})}),r.jsx("td",{children:Ke(new Date(z.requestedDate),"MMM d, yyyy")}),r.jsxs("td",{style:{fontWeight:500},children:[z.requestedActivity," ",z.activityUnit]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Dt,{size:12,style:{color:"var(--text-muted)"}}),z.estimatedMinutes," min"]})}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${z.status==="CONFIRMED"?"success":"warning"}`,children:z.status})})]},z.id)),G.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:8,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:l?"No reservations for this window":"No active reservations for this period"})})]})]})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:r.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Create Delivery Window"}),r.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Add a new delivery window for a specific date"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:z=>_({...S,name:z.target.value}),placeholder:"e.g., Morning Delivery Window"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date"}),r.jsx("input",{type:"date",className:"form-input",value:S.date,onChange:z=>_({...S,date:z.target.value})})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Start Time"}),r.jsx("input",{type:"time",className:"form-input",value:S.startTime,onChange:z=>_({...S,startTime:z.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"End Time"}),r.jsx("input",{type:"time",className:"form-input",value:S.endTime,onChange:z=>_({...S,endTime:z.target.value})})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Capacity (minutes)"}),r.jsx("input",{type:"number",className:"form-input",value:S.capacityMinutes,onChange:z=>_({...S,capacityMinutes:parseInt(z.target.value)||0}),min:"0",step:"30"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:F,disabled:b.isPending,children:b.isPending?"Creating...":"Create Window"})]})]})}),a&&r.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:r.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Generate Delivery Windows"}),r.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Automatically generate delivery windows for a date range"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Start Date"}),r.jsx("input",{type:"date",className:"form-input",value:E.startDate,onChange:z=>D({...E,startDate:z.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"End Date"}),r.jsx("input",{type:"date",className:"form-input",value:E.endDate,onChange:z=>D({...E,endDate:z.target.value})})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Start Time"}),r.jsx("input",{type:"time",className:"form-input",value:E.startTime,onChange:z=>D({...E,startTime:z.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"End Time"}),r.jsx("input",{type:"time",className:"form-input",value:E.endTime,onChange:z=>D({...E,endTime:z.target.value})})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Capacity (minutes per day)"}),r.jsx("input",{type:"number",className:"form-input",value:E.capacityMinutes,onChange:z=>D({...E,capacityMinutes:parseInt(z.target.value)||0}),min:"0",step:"30"})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:E.excludeWeekends,onChange:z=>D({...E,excludeWeekends:z.target.checked}),style:{width:"16px",height:"16px"}}),r.jsx("span",{className:"form-label",style:{margin:0},children:"Exclude weekends"})]})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:H,disabled:w.isPending,children:w.isPending?"Generating...":"Generate Windows"})]})]})})]})}const the={TENTATIVE:"warning",CONFIRMED:"success",CANCELLED:"default",CONVERTED:"primary",EXPIRED:"default"};function rhe(){const e=Ei(),[t,n]=P.useState(!1),[i,a]=P.useState(""),[s,l]=P.useState({customerId:"",productId:"",windowId:"",requestedDate:new Date().toISOString().split("T")[0],requestedActivity:"",numberOfDoses:"1",notes:""}),d=Tr(),{data:h,isLoading:f}=Ye({queryKey:["reservations",i],queryFn:async()=>{const I=new URLSearchParams;i&&I.append("status",i);const{data:R}=await xe.get(`/reservations?${I.toString()}`);return R}}),{data:p}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:I}=await xe.get("/customers");return I}}),{data:g}=Ye({queryKey:["products"],queryFn:async()=>{const{data:I}=await xe.get("/products");return I}}),{data:j}=Ye({queryKey:["availability-windows"],queryFn:async()=>{const I=new Date().toISOString().split("T")[0],{data:R}=await xe.get(`/availability/windows?startDate=${I}&isActive=true`);return R}}),v=ft({mutationFn:async I=>(await xe.post("/reservations",I)).data,onSuccess:()=>{d.invalidateQueries({queryKey:["reservations"]}),d.invalidateQueries({queryKey:["availability-windows"]}),n(!1),_()}}),b=ft({mutationFn:async I=>(await xe.put(`/reservations/${I}/confirm`)).data,onSuccess:()=>{d.invalidateQueries({queryKey:["reservations"]})}}),w=ft({mutationFn:async I=>(await xe.put(`/reservations/${I}/cancel`,{reason:"Cancelled by user"})).data,onSuccess:()=>{d.invalidateQueries({queryKey:["reservations"]}),d.invalidateQueries({queryKey:["availability-windows"]})}}),S=ft({mutationFn:async I=>(await xe.post(`/reservations/${I}/convert`)).data,onSuccess:I=>{d.invalidateQueries({queryKey:["reservations"]}),d.invalidateQueries({queryKey:["orders"]}),e.success("Order Created",`Order ${I.order?.orderNumber||""} created successfully from reservation.`)},onError:I=>{const R=Er(I);e.error("Conversion Failed",R?.userMessage||"Failed to convert reservation to order.")}}),_=()=>{l({customerId:"",productId:"",windowId:"",requestedDate:new Date().toISOString().split("T")[0],requestedActivity:"",numberOfDoses:"1",notes:""})},E=I=>{l({customerId:I.customerId||"",productId:I.productId||"",windowId:"",requestedDate:new Date().toISOString().split("T")[0],requestedActivity:I.requestedActivity?.toString()||"",numberOfDoses:I.numberOfDoses?.toString()||"1",notes:I.notes||""}),n(!0)},D=async()=>{!s.customerId||!s.productId||!s.requestedActivity||await v.mutateAsync({...s,requestedActivity:parseFloat(s.requestedActivity),numberOfDoses:parseInt(s.numberOfDoses)||1,windowId:s.windowId||void 0})},K=!s.windowId||!j?null:j.find(I=>I.id===s.windowId),B=K?K.capacityMinutes-K.usedMinutes:0,F=K?Math.round(K.usedMinutes/K.capacityMinutes*100):0,H={total:h?.length||0,tentative:h?.filter(I=>I.status==="TENTATIVE").length||0,confirmed:h?.filter(I=>I.status==="CONFIRMED").length||0,converted:h?.filter(I=>I.status==="CONVERTED").length||0};return f?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Reservations"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage capacity reservations to prevent overbooking"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>n(!0),children:[r.jsx(Lr,{size:16})," New Reservation"]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Reservations",value:H.total,icon:r.jsx(Wi,{size:20}),color:"primary",onClick:()=>a(""),selected:!i}),r.jsx(lt,{title:"Tentative",value:H.tentative,icon:r.jsx(Dt,{size:20}),color:"warning",onClick:()=>a("TENTATIVE"),selected:i==="TENTATIVE"}),r.jsx(lt,{title:"Confirmed",value:H.confirmed,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>a("CONFIRMED"),selected:i==="CONFIRMED"}),r.jsx(lt,{title:"Converted to Orders",value:H.converted,icon:r.jsx(ru,{size:20}),color:"info",onClick:()=>a("CONVERTED"),selected:i==="CONVERTED"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1.5rem"},children:r.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[r.jsx("label",{style:{fontWeight:500},children:"Status:"}),r.jsxs("select",{className:"form-select",style:{width:"auto"},value:i,onChange:I=>a(I.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"TENTATIVE",children:"Tentative"}),r.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),r.jsx("option",{value:"CANCELLED",children:"Cancelled"}),r.jsx("option",{value:"CONVERTED",children:"Converted"}),r.jsx("option",{value:"EXPIRED",children:"Expired"})]})]})})}),r.jsx("div",{className:"card",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Reservation #"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Doses"}),r.jsx("th",{children:"Est. Time"}),r.jsx("th",{children:"Window"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsxs("tbody",{children:[h?.map(I=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:I.reservationNumber}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Fo,{size:14,style:{color:"var(--text-muted)"}}),I.customer?.name]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Sr,{size:14,style:{color:"var(--text-muted)"}}),I.product?.name]})}),r.jsx("td",{children:new Date(I.requestedDate).toLocaleDateString()}),r.jsxs("td",{children:[I.requestedActivity," mCi"]}),r.jsx("td",{children:I.numberOfDoses}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Dt,{size:14,style:{color:"var(--text-muted)"}}),I.estimatedMinutes," min"]})}),r.jsx("td",{children:I.window?r.jsx("span",{style:{fontSize:"0.8125rem"},children:I.window.name||new Date(I.window.date).toLocaleDateString()}):r.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${the[I.status]||"default"}`,children:I.status})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>E(I),title:"Copy as New",children:r.jsx(_O,{size:14})}),I.status==="TENTATIVE"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>b.mutate(I.id),disabled:b.isPending,title:"Confirm",children:r.jsx(yl,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>w.mutate(I.id),disabled:w.isPending,title:"Cancel",children:r.jsx(hn,{size:14})})]}),I.status==="CONFIRMED"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>S.mutate(I.id),disabled:S.isPending,title:"Convert to Order",children:r.jsx(ru,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>w.mutate(I.id),disabled:w.isPending,title:"Cancel",children:r.jsx(hn,{size:14})})]})]})})]},I.id)),h?.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{textAlign:"center",color:"var(--text-muted)",padding:"3rem"},children:"No reservations found"})})]})]})}),t&&r.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"560px"},onClick:I=>I.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"New Reservation"}),r.jsx("button",{onClick:()=>n(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Reserve capacity in a delivery window to prevent overbooking"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer *"}),r.jsxs("select",{className:"form-select",value:s.customerId,onChange:I=>l({...s,customerId:I.target.value}),children:[r.jsx("option",{value:"",children:"Select customer"}),p?.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Product *"}),r.jsxs("select",{className:"form-select",value:s.productId,onChange:I=>l({...s,productId:I.target.value}),children:[r.jsx("option",{value:"",children:"Select product"}),g?.map(I=>r.jsxs("option",{value:I.id,children:[I.name," (",I.code,")"]},I.id))]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Window"}),r.jsxs("select",{className:"form-select",value:s.windowId,onChange:I=>l({...s,windowId:I.target.value}),children:[r.jsx("option",{value:"",children:"No specific window"}),j?.map(I=>{const R=I.capacityMinutes-I.usedMinutes,Y=Math.round(I.usedMinutes/I.capacityMinutes*100);return r.jsxs("option",{value:I.id,children:[new Date(I.date).toLocaleDateString()," ",I.startTime,"-",I.endTime," (",R," min available, ",Y,"% used)"]},I.id)})]})]}),K&&r.jsxs("div",{style:{padding:"0.75rem 1rem",background:F>80?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[F>80?r.jsx(In,{size:18,style:{color:"var(--danger)"}}):r.jsx(Wi,{size:18,style:{color:"var(--success)"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:[B," minutes available"]}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[F,"% capacity used"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Requested Date *"}),r.jsx("input",{type:"date",className:"form-input",value:s.requestedDate,onChange:I=>l({...s,requestedDate:I.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Activity (mCi) *"}),r.jsx("input",{type:"number",className:"form-input",value:s.requestedActivity,onChange:I=>l({...s,requestedActivity:I.target.value}),step:"0.1",placeholder:"e.g., 15"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"No. of Doses"}),r.jsx("input",{type:"number",className:"form-input",value:s.numberOfDoses,onChange:I=>l({...s,numberOfDoses:I.target.value}),min:"1"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{className:"form-input",value:s.notes,onChange:I=>l({...s,notes:I.target.value}),rows:2,placeholder:"Optional notes about this reservation"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:D,disabled:v.isPending||!s.customerId||!s.productId||!s.requestedActivity,children:v.isPending?"Creating...":"Create Reservation"})]})]})})]})}function nhe(){const[e,t]=P.useState(null),[n,i]=P.useState(!1),[a,s]=P.useState(!1),[l,d]=P.useState(""),[h,f]=P.useState("info"),p=Tr(),{data:g,isLoading:j}=Ye({queryKey:["contracts",l],queryFn:async()=>{const q={includeExpired:"true"};l&&(q.status=l);const{data:re}=await xe.get("/contracts",{params:q});return re}}),{data:v}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:q}=await xe.get("/customers");return q}}),{data:b}=Ye({queryKey:["products"],queryFn:async()=>{const{data:q}=await xe.get("/products");return q}}),[w,S]=P.useState({customerId:"",name:"",startDate:Ke(new Date,"yyyy-MM-dd"),endDate:Ke(new Date(Date.now()+365*24*60*60*1e3),"yyyy-MM-dd"),paymentTermsDays:30,creditLimit:"",discountPercent:0,notes:""}),[_,E]=P.useState({productId:"",unitPrice:"",priceUnit:"per mCi",minimumQuantity:"",discountPercent:0}),D=ft({mutationFn:async q=>xe.post("/contracts",q),onSuccess:()=>{p.invalidateQueries({queryKey:["contracts"]}),i(!1),H()}}),W=ft({mutationFn:async({contractId:q,data:re})=>xe.post(`/contracts/${q}/price-items`,re),onSuccess:()=>{if(p.invalidateQueries({queryKey:["contracts"]}),s(!1),I(),e){const q=g?.find(re=>re.id===e.id);q&&t(q)}}}),K=ft({mutationFn:async({contractId:q,itemId:re})=>xe.delete(`/contracts/${q}/price-items/${re}`),onSuccess:()=>{p.invalidateQueries({queryKey:["contracts"]})}}),B=ft({mutationFn:async q=>xe.put(`/contracts/${q}/activate`),onSuccess:()=>{p.invalidateQueries({queryKey:["contracts"]})}}),F=ft({mutationFn:async({id:q,reason:re})=>xe.put(`/contracts/${q}/terminate`,{reason:re}),onSuccess:()=>{p.invalidateQueries({queryKey:["contracts"]}),t(null)}}),H=()=>{S({customerId:"",name:"",startDate:Ke(new Date,"yyyy-MM-dd"),endDate:Ke(new Date(Date.now()+365*24*60*60*1e3),"yyyy-MM-dd"),paymentTermsDays:30,creditLimit:"",discountPercent:0,notes:""})},I=()=>{E({productId:"",unitPrice:"",priceUnit:"per mCi",minimumQuantity:"",discountPercent:0})},R=q=>({DRAFT:"default",ACTIVE:"success",EXPIRED:"warning",TERMINATED:"danger"})[q]||"default",Y=q=>{const re=new Date(q.startDate).getTime(),ue=new Date(q.endDate).getTime(),Q=Date.now();return Q<re?0:Q>ue?100:Math.round((Q-re)/(ue-re)*100)},G=q=>{const re=new Date(q.endDate);return l$(re,new Date)},ae=()=>{!w.customerId||!w.name||D.mutate({customerId:w.customerId,name:w.name,startDate:w.startDate,endDate:w.endDate,paymentTermsDays:w.paymentTermsDays,creditLimit:w.creditLimit?parseFloat(w.creditLimit):void 0,discountPercent:w.discountPercent,notes:w.notes||void 0})},se=()=>{!_.productId||!_.unitPrice||!e||W.mutate({contractId:e.id,data:{productId:_.productId,unitPrice:parseFloat(_.unitPrice),priceUnit:_.priceUnit,minimumQuantity:_.minimumQuantity?parseInt(_.minimumQuantity):void 0,discountPercent:_.discountPercent}})},Ne=g?.filter(q=>q.status==="ACTIVE").length||0,z=g?.reduce((q,re)=>q+(re.creditLimit||0),0)||0;g?.length&&(g.reduce((q,re)=>q+(re.discountPercent||0),0)/g.length).toFixed(1);const ie=g?.filter(q=>{if(q.status!=="ACTIVE")return!1;const re=G(q);return re>=0&&re<=30}).length||0;return j?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Contracts & Pricing"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage customer contracts, payment terms, and product pricing"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"140px"},value:l,onChange:q=>d(q.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"DRAFT",children:"Draft"}),r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"EXPIRED",children:"Expired"}),r.jsx("option",{value:"TERMINATED",children:"Terminated"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[r.jsx(Lr,{size:18})," New Contract"]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Contracts",value:g?.length||0,icon:r.jsx(ii,{size:20}),color:"primary",onClick:()=>d(""),selected:!l}),r.jsx(lt,{title:"Active",value:Ne,icon:r.jsx(yl,{size:20}),color:"success",onClick:()=>d("ACTIVE"),selected:l==="ACTIVE"}),r.jsx(lt,{title:"Total Credit",value:`$${(z/1e3).toFixed(0)}k`,icon:r.jsx(Ul,{size:20}),color:"info"}),r.jsx(lt,{title:"Expiring Soon",value:ie,icon:r.jsx(vr,{size:20}),color:ie>0?"warning":"default",onClick:()=>d("EXPIRING"),selected:l==="EXPIRING"})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:e?"1fr 420px":"1fr",gap:"1.5rem"},children:[r.jsx("div",{className:"card",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Contract"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Period"}),r.jsx("th",{children:"Credit / Discount"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[g?.map(q=>{const re=G(q),ue=Y(q);return r.jsxs("tr",{style:{cursor:"pointer",backgroundColor:e?.id===q.id?"var(--bg-secondary)":void 0},onClick:()=>{t(q),f("info")},children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600,marginBottom:"0.125rem"},children:q.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontFamily:"monospace"},children:q.contractNumber})]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Fo,{size:16,style:{color:"var(--text-muted)"}})}),r.jsx("span",{style:{fontWeight:500},children:q.customer?.name})]})}),r.jsxs("td",{children:[r.jsx("div",{style:{fontSize:"0.875rem"},children:Ke(new Date(q.startDate),"MMM d, yyyy")}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["to ",Ke(new Date(q.endDate),"MMM d, yyyy")]}),q.status==="ACTIVE"&&r.jsxs("div",{style:{marginTop:"0.375rem"},children:[r.jsx("div",{style:{height:"4px",background:"var(--border)",borderRadius:"2px",overflow:"hidden",width:"100px"},children:r.jsx("div",{style:{height:"100%",width:`${ue}%`,background:re<=30?"var(--warning)":"var(--success)",borderRadius:"2px",transition:"width 0.3s ease"}})}),r.jsx("div",{style:{fontSize:"0.6875rem",color:re<=30?"var(--warning)":"var(--text-muted)",marginTop:"0.125rem"},children:re>0?`${re} days left`:"Expired"})]})]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Ul,{size:12,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{fontWeight:500},children:q.creditLimit?`$${q.creditLimit.toLocaleString()}`:"No limit"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(hE,{size:12,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{color:q.discountPercent>0?"var(--success)":"var(--text-muted)",fontWeight:q.discountPercent>0?500:400},children:q.discountPercent>0?`${q.discountPercent}% discount`:"No discount"})]})]})}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${R(q.status)}`,children:q.status})}),r.jsx("td",{onClick:Q=>Q.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[q.status==="DRAFT"&&r.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--success)",border:"none"},onClick:()=>B.mutate(q.id),disabled:B.isPending,title:"Activate Contract",children:r.jsx(yl,{size:14})}),q.status==="ACTIVE"&&r.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",border:"none"},onClick:()=>{const Q=prompt("Reason for termination:");Q&&F.mutate({id:q.id,reason:Q})},disabled:F.isPending,title:"Terminate Contract",children:r.jsx(hn,{size:14})})]})})]},q.id)}),(!g||g.length===0)&&r.jsx("tr",{children:r.jsxs("td",{colSpan:6,style:{textAlign:"center",color:"var(--text-muted)",padding:"3rem"},children:[r.jsx(CO,{size:40,style:{opacity:.2,marginBottom:"0.75rem"}}),r.jsx("div",{children:"No contracts found"})]})})]})]})}),e&&r.jsxs("div",{className:"card",style:{padding:0},children:[r.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:r.jsx("span",{className:`badge badge-${R(e.status)}`,children:e.status})}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:e.name}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.8125rem",fontFamily:"monospace",margin:0},children:e.contractNumber})]}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>t(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:r.jsx(hn,{size:14})})]})}),r.jsx("div",{style:{borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",padding:"0 1rem"},children:[r.jsx("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:h==="info"?"2px solid var(--primary)":"2px solid transparent",color:h==="info"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>f("info"),children:"Contract Info"}),r.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:h==="pricing"?"2px solid var(--primary)":"2px solid transparent",color:h==="pricing"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>f("pricing"),children:["Product Pricing (",e.priceItems?.length||0,")"]}),r.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:h==="attachments"?"2px solid var(--primary)":"2px solid transparent",color:h==="attachments"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.375rem"},onClick:()=>f("attachments"),children:[r.jsx(ym,{size:14})," Documents"]})]})}),r.jsxs("div",{style:{padding:"1.25rem"},children:[h==="info"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1.25rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:r.jsx(Fo,{size:20,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600},children:e.customer?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:e.customer?.code})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx(Wi,{size:14,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contract Period"})]}),r.jsxs("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",marginBottom:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"Start"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(e.startDate),"MMM d, yyyy")})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:"End"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(e.endDate),"MMM d, yyyy")})]})]}),e.status==="ACTIVE"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{height:"6px",background:"var(--border)",borderRadius:"3px",overflow:"hidden",marginBottom:"0.5rem"},children:r.jsx("div",{style:{height:"100%",width:`${Y(e)}%`,background:G(e)<=30?"var(--warning)":"var(--success)",borderRadius:"3px"}})}),r.jsx("div",{style:{fontSize:"0.75rem",color:G(e)<=30?"var(--warning)":"var(--text-muted)",textAlign:"center"},children:G(e)>0?`${G(e)} days remaining`:"Contract has expired"})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[r.jsx(Dt,{size:18,style:{color:"var(--primary)",marginBottom:"0.375rem"}}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Payment Terms"}),r.jsxs("div",{style:{fontWeight:600,fontSize:"1.125rem"},children:["Net ",e.paymentTermsDays]})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[r.jsx(hE,{size:18,style:{color:e.discountPercent>0?"var(--success)":"var(--text-muted)",marginBottom:"0.375rem"}}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Discount"}),r.jsxs("div",{style:{fontWeight:600,fontSize:"1.125rem",color:e.discountPercent>0?"var(--success)":void 0},children:[e.discountPercent,"%"]})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[r.jsx(Ul,{size:18,style:{color:"#10b981",marginBottom:"0.375rem"}}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Credit Limit"}),r.jsx("div",{style:{fontWeight:600,fontSize:"1.125rem"},children:e.creditLimit?`$${e.creditLimit.toLocaleString()}`:"Unlimited"})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",textAlign:"center"},children:[r.jsx(ii,{size:18,style:{color:"var(--primary)",marginBottom:"0.375rem"}}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Invoices"}),r.jsx("div",{style:{fontWeight:600,fontSize:"1.125rem"},children:e._count?.invoices||0})]})]}),e.notes&&r.jsxs("div",{style:{marginTop:"1.25rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Notes"}),r.jsx("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",fontSize:"0.875rem",lineHeight:1.5},children:e.notes})]})]}),h==="pricing"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Custom pricing for this contract"}),e.status==="DRAFT"&&r.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>s(!0),children:[r.jsx(Lr,{size:14})," Add"]})]}),e.priceItems?.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.priceItems.map(q=>r.jsxs("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Sr,{size:18,style:{color:"var(--primary)"}})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:500,marginBottom:"0.125rem"},children:q.product?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:q.product?.code})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("div",{style:{fontWeight:600,color:"var(--primary)"},children:["$",q.unitPrice.toFixed(2)]}),r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)"},children:q.priceUnit})]}),q.discountPercent>0&&r.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--success)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500},children:["-",q.discountPercent,"%"]}),e.status==="DRAFT"&&r.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",border:"none"},onClick:()=>K.mutate({contractId:e.id,itemId:q.id}),children:r.jsx(mi,{size:14})})]},q.id))}):r.jsxs("div",{style:{textAlign:"center",padding:"2.5rem 1rem",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx(ax,{size:32,style:{opacity:.3,marginBottom:"0.75rem"}}),r.jsx("div",{style:{marginBottom:"0.25rem"},children:"No custom pricing"}),r.jsx("div",{style:{fontSize:"0.75rem"},children:"Using default product rates"})]})]}),h==="attachments"&&r.jsx(Lm,{entityType:"CONTRACT",entityId:e.id,title:"Contract Documents"})]})]})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"520px"},onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"New Contract"}),r.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Create a new customer contract with payment terms and pricing"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer *"}),r.jsxs("select",{className:"form-select",value:w.customerId,onChange:q=>S({...w,customerId:q.target.value}),children:[r.jsx("option",{value:"",children:"Select a customer"}),v?.map(q=>r.jsxs("option",{value:q.id,children:[q.name," (",q.code,")"]},q.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contract Name *"}),r.jsx("input",{type:"text",className:"form-input",value:w.name,onChange:q=>S({...w,name:q.target.value}),placeholder:"e.g., Annual Supply Agreement 2026"})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Start Date"}),r.jsx("input",{type:"date",className:"form-input",value:w.startDate,onChange:q=>S({...w,startDate:q.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"End Date"}),r.jsx("input",{type:"date",className:"form-input",value:w.endDate,onChange:q=>S({...w,endDate:q.target.value})})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Terms (days)"}),r.jsx("input",{type:"number",className:"form-input",value:w.paymentTermsDays,onChange:q=>S({...w,paymentTermsDays:parseInt(q.target.value)||30})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Credit Limit ($)"}),r.jsx("input",{type:"number",className:"form-input",value:w.creditLimit,onChange:q=>S({...w,creditLimit:q.target.value}),placeholder:"Leave empty for no limit"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contract Discount (%)"}),r.jsx("input",{type:"number",className:"form-input",value:w.discountPercent,onChange:q=>S({...w,discountPercent:parseFloat(q.target.value)||0}),min:"0",max:"100",step:"0.5"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{className:"form-input",value:w.notes,onChange:q=>S({...w,notes:q.target.value}),rows:2,placeholder:"Optional notes about this contract"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:ae,disabled:D.isPending||!w.customerId||!w.name,children:D.isPending?"Creating...":"Create Contract"})]})]})}),a&&r.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"440px"},onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Add Product Pricing"}),r.jsx("button",{onClick:()=>s(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Add custom pricing for a product in this contract"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Product *"}),r.jsxs("select",{className:"form-select",value:_.productId,onChange:q=>E({..._,productId:q.target.value}),children:[r.jsx("option",{value:"",children:"Select a product"}),b?.filter(q=>!e?.priceItems?.some(re=>re.productId===q.id)).map(q=>r.jsxs("option",{value:q.id,children:[q.name," (",q.code,")"]},q.id))]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Unit Price ($) *"}),r.jsx("input",{type:"number",className:"form-input",value:_.unitPrice,onChange:q=>E({..._,unitPrice:q.target.value}),step:"0.01",placeholder:"0.00"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Price Unit"}),r.jsxs("select",{className:"form-select",value:_.priceUnit,onChange:q=>E({..._,priceUnit:q.target.value}),children:[r.jsx("option",{value:"per mCi",children:"per mCi"}),r.jsx("option",{value:"per MBq",children:"per MBq"}),r.jsx("option",{value:"per dose",children:"per dose"}),r.jsx("option",{value:"per vial",children:"per vial"})]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Minimum Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:_.minimumQuantity,onChange:q=>E({..._,minimumQuantity:q.target.value}),placeholder:"Optional"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Product Discount (%)"}),r.jsx("input",{type:"number",className:"form-input",value:_.discountPercent,onChange:q=>E({..._,discountPercent:parseFloat(q.target.value)||0}),min:"0",max:"100",step:"0.5"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:se,disabled:W.isPending||!_.productId||!_.unitPrice,children:W.isPending?"Adding...":"Add Pricing"})]})]})})]})}const ihe="modulepreload",ahe=function(e){return"/"+e},wk={},dj=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");a=h(n.map(f=>{if(f=ahe(f),f in wk)return;wk[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const j=document.createElement("link");if(j.rel=p?"stylesheet":ihe,p||(j.as="script"),j.crossOrigin="",j.href=f,d&&j.setAttribute("nonce",d),document.head.appendChild(j),p)return new Promise((v,b)=>{j.addEventListener("load",v),j.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return a.then(l=>{for(const d of l||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})};function _n(e){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(e)}var Cc=Uint8Array,pl=Uint16Array,ZN=Int32Array,XN=new Cc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JN=new Cc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sk=new Cc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$I=function(e,t){for(var n=new pl(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var a=new ZN(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)a[s]=s-n[i]<<5|i;return{b:n,r:a}},VI=$I(XN,2),she=VI.b,Sw=VI.r;she[28]=258,Sw[258]=28;var ohe=$I(JN,0),Nk=ohe.r,Nw=new pl(32768);for(var ri=0;ri<32768;++ri){var Wu=(ri&43690)>>1|(ri&21845)<<1;Wu=(Wu&52428)>>2|(Wu&13107)<<2,Wu=(Wu&61680)>>4|(Wu&3855)<<4,Nw[ri]=((Wu&65280)>>8|(Wu&255)<<8)>>1}var Vp=(function(e,t,n){for(var i=e.length,a=0,s=new pl(t);a<i;++a)e[a]&&++s[e[a]-1];var l=new pl(t);for(a=1;a<t;++a)l[a]=l[a-1]+s[a-1]<<1;var d;if(n){d=new pl(1<<t);var h=15-t;for(a=0;a<i;++a)if(e[a])for(var f=a<<4|e[a],p=t-e[a],g=l[e[a]-1]++<<p,j=g|(1<<p)-1;g<=j;++g)d[Nw[g]>>h]=f}else for(d=new pl(i),a=0;a<i;++a)e[a]&&(d[a]=Nw[l[e[a]-1]++]>>15-e[a]);return d}),tf=new Cc(288);for(var ri=0;ri<144;++ri)tf[ri]=8;for(var ri=144;ri<256;++ri)tf[ri]=9;for(var ri=256;ri<280;++ri)tf[ri]=7;for(var ri=280;ri<288;++ri)tf[ri]=8;var V0=new Cc(32);for(var ri=0;ri<32;++ri)V0[ri]=5;var lhe=Vp(tf,9,0),che=Vp(V0,5,0),KI=function(e){return(e+7)/8|0},dhe=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Cc(e.subarray(t,n))},Hd=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},Lp=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},uj=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var a=n.length,s=n.slice();if(!a)return{t:QI,l:0};if(a==1){var l=new Cc(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(K,B){return K.f-B.f}),n.push({s:-1,f:25001});var d=n[0],h=n[1],f=0,p=1,g=2;for(n[0]={s:-1,f:d.f+h.f,l:d,r:h};p!=a-1;)d=n[n[f].f<n[g].f?f++:g++],h=n[f!=p&&n[f].f<n[g].f?f++:g++],n[p++]={s:-1,f:d.f+h.f,l:d,r:h};for(var j=s[0].s,i=1;i<a;++i)s[i].s>j&&(j=s[i].s);var v=new pl(j+1),b=_w(n[p-1],v,0);if(b>t){var i=0,w=0,S=b-t,_=1<<S;for(s.sort(function(B,F){return v[F.s]-v[B.s]||B.f-F.f});i<a;++i){var E=s[i].s;if(v[E]>t)w+=_-(1<<b-v[E]),v[E]=t;else break}for(w>>=S;w>0;){var D=s[i].s;v[D]<t?w-=1<<t-v[D]++-1:++i}for(;i>=0&&w;--i){var W=s[i].s;v[W]==t&&(--v[W],++w)}b=t}return{t:new Cc(v),l:b}},_w=function(e,t,n){return e.s==-1?Math.max(_w(e.l,t,n+1),_w(e.r,t,n+1)):t[e.s]=n},_k=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new pl(++t),i=0,a=e[0],s=1,l=function(h){n[i++]=h},d=1;d<=t;++d)if(e[d]==a&&d!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(a),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(a);s=1,a=e[d]}return{c:n.subarray(0,i),n:t}},Rp=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},GI=function(e,t,n){var i=n.length,a=KI(t+2);e[a]=i&255,e[a+1]=i>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<i;++s)e[a+s+4]=n[s];return(a+4+i)*8},Ck=function(e,t,n,i,a,s,l,d,h,f,p){Hd(t,p++,n),++a[256];for(var g=uj(a,15),j=g.t,v=g.l,b=uj(s,15),w=b.t,S=b.l,_=_k(j),E=_.c,D=_.n,W=_k(w),K=W.c,B=W.n,F=new pl(19),H=0;H<E.length;++H)++F[E[H]&31];for(var H=0;H<K.length;++H)++F[K[H]&31];for(var I=uj(F,7),R=I.t,Y=I.l,G=19;G>4&&!R[Sk[G-1]];--G);var ae=f+5<<3,se=Rp(a,tf)+Rp(s,V0)+l,Ne=Rp(a,j)+Rp(s,w)+l+14+3*G+Rp(F,R)+2*F[16]+3*F[17]+7*F[18];if(h>=0&&ae<=se&&ae<=Ne)return GI(t,p,e.subarray(h,h+f));var z,ie,q,re;if(Hd(t,p,1+(Ne<se)),p+=2,Ne<se){z=Vp(j,v,0),ie=j,q=Vp(w,S,0),re=w;var ue=Vp(R,Y,0);Hd(t,p,D-257),Hd(t,p+5,B-1),Hd(t,p+10,G-4),p+=14;for(var H=0;H<G;++H)Hd(t,p+3*H,R[Sk[H]]);p+=3*G;for(var Q=[E,K],V=0;V<2;++V)for(var ne=Q[V],H=0;H<ne.length;++H){var $=ne[H]&31;Hd(t,p,ue[$]),p+=R[$],$>15&&(Hd(t,p,ne[H]>>5&127),p+=ne[H]>>12)}}else z=lhe,ie=tf,q=che,re=V0;for(var H=0;H<d;++H){var de=i[H];if(de>255){var $=de>>18&31;Lp(t,p,z[$+257]),p+=ie[$+257],$>7&&(Hd(t,p,de>>23&31),p+=XN[$]);var Z=de&31;Lp(t,p,q[Z]),p+=re[Z],Z>3&&(Lp(t,p,de>>5&8191),p+=JN[Z])}else Lp(t,p,z[de]),p+=ie[de]}return Lp(t,p,z[256]),p+ie[256]},uhe=new ZN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),QI=new Cc(0),hhe=function(e,t,n,i,a,s){var l=s.z||e.length,d=new Cc(i+l+5*(1+Math.ceil(l/7e3))+a),h=d.subarray(i,d.length-a),f=s.l,p=(s.r||0)&7;if(t){p&&(h[0]=s.r>>3);for(var g=uhe[t-1],j=g>>13,v=g&8191,b=(1<<n)-1,w=s.p||new pl(32768),S=s.h||new pl(b+1),_=Math.ceil(n/3),E=2*_,D=function(ht){return(e[ht]^e[ht+1]<<_^e[ht+2]<<E)&b},W=new ZN(25e3),K=new pl(288),B=new pl(32),F=0,H=0,I=s.i||0,R=0,Y=s.w||0,G=0;I+2<l;++I){var ae=D(I),se=I&32767,Ne=S[ae];if(w[se]=Ne,S[ae]=se,Y<=I){var z=l-I;if((F>7e3||R>24576)&&(z>423||!f)){p=Ck(e,h,0,W,K,B,H,R,G,I-G,p),R=F=H=0,G=I;for(var ie=0;ie<286;++ie)K[ie]=0;for(var ie=0;ie<30;++ie)B[ie]=0}var q=2,re=0,ue=v,Q=se-Ne&32767;if(z>2&&ae==D(I-Q))for(var V=Math.min(j,z)-1,ne=Math.min(32767,I),$=Math.min(258,z);Q<=ne&&--ue&&se!=Ne;){if(e[I+q]==e[I+q-Q]){for(var de=0;de<$&&e[I+de]==e[I+de-Q];++de);if(de>q){if(q=de,re=Q,de>V)break;for(var Z=Math.min(Q,de-2),ge=0,ie=0;ie<Z;++ie){var oe=I-Q+ie&32767,X=w[oe],_e=oe-X&32767;_e>ge&&(ge=_e,Ne=oe)}}}se=Ne,Ne=w[se],Q+=se-Ne&32767}if(re){W[R++]=268435456|Sw[q]<<18|Nk[re];var Ie=Sw[q]&31,De=Nk[re]&31;H+=XN[Ie]+JN[De],++K[257+Ie],++B[De],Y=I+q,++F}else W[R++]=e[I],++K[e[I]]}}for(I=Math.max(I,Y);I<l;++I)W[R++]=e[I],++K[e[I]];p=Ck(e,h,f,W,K,B,H,R,G,I-G,p),f||(s.r=p&7|h[p/8|0]<<3,p-=7,s.h=S,s.p=w,s.i=I,s.w=Y)}else{for(var I=s.w||0;I<l+f;I+=65535){var ut=I+65535;ut>=l&&(h[p/8|0]=f,ut=l),p=GI(h,p+1,e.subarray(I,ut))}s.i=l}return dhe(d,0,i+KI(p)+a)},YI=function(){var e=1,t=0;return{p:function(n){for(var i=e,a=t,s=n.length|0,l=0;l!=s;){for(var d=Math.min(l+2655,s);l<d;++l)a+=i+=n[l];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}e=i,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},fhe=function(e,t,n,i,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),l=new Cc(s.length+e.length);l.set(s),l.set(e,s.length),e=l,a.w=s.length}return hhe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,i,a)},ZI=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},mhe=function(e,t){var n=t.level,i=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=YI();a.p(t.dictionary),ZI(e,2,a.d())}};function Cw(e,t){t||(t={});var n=YI();n.p(e);var i=fhe(e,t,t.dictionary?6:2,4);return mhe(i,t),ZI(i,i.length-4,n.d()),i}var phe=typeof TextDecoder<"u"&&new TextDecoder,ghe=0;try{phe.decode(QI,{stream:!0}),ghe=1}catch{}function yhe(e){if(Array.isArray(e))return e}function vhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,l,d=[],h=!0,f=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(h=(i=s.call(n)).done)&&(d.push(i.value),d.length!==t);h=!0);}catch(p){f=!0,a=p}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(f)throw a}}return d}}function Ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function xhe(e,t){if(e){if(typeof e=="string")return Ak(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ak(e,t):void 0}}function bhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ek(e,t){return yhe(e)||vhe(e,t)||xhe(e,t)||bhe()}function Tk(e,t="utf8"){return new TextDecoder(t).decode(e)}const jhe=new TextEncoder;function whe(e){return jhe.encode(e)}const She=1024*8,Nhe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),hj={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class e_{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=She,n={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const a=n.offset?n.offset>>>0:0,s=t.byteLength-a;let l=a;(ArrayBuffer.isView(t)||t instanceof e_)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+a),t=t.buffer),i?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,a=new Uint8Array(i);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const i=hj[n].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+i);if(this.littleEndian===Nhe&&n!=="uint8"&&n!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+i));d.reverse();const h=new hj[n](d.buffer);return this.offset+=i,h.reverse(),h}const l=new hj[n](s);return this.offset+=i,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let i=0;i<t;i++)n+=this.readChar();return n}readUtf8(t=1){return Tk(this.readBytes(t))}decodeText(t=1,n="utf8"){return Tk(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(whe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function $m(e){let t=e.length;for(;--t>=0;)e[t]=0}const _he=3,Che=258,XI=29,Ahe=256,Ehe=Ahe+1+XI,JI=30,The=512,Phe=new Array((Ehe+2)*2);$m(Phe);const khe=new Array(JI*2);$m(khe);const Dhe=new Array(The);$m(Dhe);const Ohe=new Array(Che-_he+1);$m(Ohe);const Mhe=new Array(XI);$m(Mhe);const Lhe=new Array(JI);$m(Lhe);const Rhe=(e,t,n,i)=>{let a=e&65535|0,s=e>>>16&65535|0,l=0;for(;n!==0;){l=n>2e3?2e3:n,n-=l;do a=a+t[i++]|0,s=s+a|0;while(--l);a%=65521,s%=65521}return a|s<<16|0};var Aw=Rhe;const Ihe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},zhe=new Uint32Array(Ihe()),Bhe=(e,t,n,i)=>{const a=zhe,s=i+n;e^=-1;for(let l=i;l<s;l++)e=e>>>8^a[(e^t[l])&255];return e^-1};var od=Bhe,Ew={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},e7={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Fhe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var qhe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)Fhe(n,i)&&(e[i]=n[i])}}return e},Uhe=e=>{let t=0;for(let i=0,a=e.length;i<a;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,a=0,s=e.length;i<s;i++){let l=e[i];n.set(l,a),a+=l.length}return n},t7={assign:qhe,flattenChunks:Uhe};let r7=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r7=!1}const yg=new Uint8Array(256);for(let e=0;e<256;e++)yg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;yg[254]=yg[254]=1;var Hhe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,a,s,l=e.length,d=0;for(a=0;a<l;a++)n=e.charCodeAt(a),(n&64512)===55296&&a+1<l&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),a++)),d+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(d),s=0,a=0;s<d;a++)n=e.charCodeAt(a),(n&64512)===55296&&a+1<l&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),a++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const Whe=(e,t)=>{if(t<65534&&e.subarray&&r7)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var $he=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,a;const s=new Array(n*2);for(a=0,i=0;i<n;){let l=e[i++];if(l<128){s[a++]=l;continue}let d=yg[l];if(d>4){s[a++]=65533,i+=d-1;continue}for(l&=d===2?31:d===3?15:7;d>1&&i<n;)l=l<<6|e[i++]&63,d--;if(d>1){s[a++]=65533;continue}l<65536?s[a++]=l:(l-=65536,s[a++]=55296|l>>10&1023,s[a++]=56320|l&1023)}return Whe(s,a)},Vhe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+yg[e[n]]>t?n:t},Tw={string2buf:Hhe,buf2string:$he,utf8border:Vhe};function Khe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ghe=Khe;const lv=16209,Qhe=16191;var Yhe=function(t,n){let i,a,s,l,d,h,f,p,g,j,v,b,w,S,_,E,D,W,K,B,F,H,I,R;const Y=t.state;i=t.next_in,I=t.input,a=i+(t.avail_in-5),s=t.next_out,R=t.output,l=s-(n-t.avail_out),d=s+(t.avail_out-257),h=Y.dmax,f=Y.wsize,p=Y.whave,g=Y.wnext,j=Y.window,v=Y.hold,b=Y.bits,w=Y.lencode,S=Y.distcode,_=(1<<Y.lenbits)-1,E=(1<<Y.distbits)-1;e:do{b<15&&(v+=I[i++]<<b,b+=8,v+=I[i++]<<b,b+=8),D=w[v&_];t:for(;;){if(W=D>>>24,v>>>=W,b-=W,W=D>>>16&255,W===0)R[s++]=D&65535;else if(W&16){K=D&65535,W&=15,W&&(b<W&&(v+=I[i++]<<b,b+=8),K+=v&(1<<W)-1,v>>>=W,b-=W),b<15&&(v+=I[i++]<<b,b+=8,v+=I[i++]<<b,b+=8),D=S[v&E];r:for(;;){if(W=D>>>24,v>>>=W,b-=W,W=D>>>16&255,W&16){if(B=D&65535,W&=15,b<W&&(v+=I[i++]<<b,b+=8,b<W&&(v+=I[i++]<<b,b+=8)),B+=v&(1<<W)-1,B>h){t.msg="invalid distance too far back",Y.mode=lv;break e}if(v>>>=W,b-=W,W=s-l,B>W){if(W=B-W,W>p&&Y.sane){t.msg="invalid distance too far back",Y.mode=lv;break e}if(F=0,H=j,g===0){if(F+=f-W,W<K){K-=W;do R[s++]=j[F++];while(--W);F=s-B,H=R}}else if(g<W){if(F+=f+g-W,W-=g,W<K){K-=W;do R[s++]=j[F++];while(--W);if(F=0,g<K){W=g,K-=W;do R[s++]=j[F++];while(--W);F=s-B,H=R}}}else if(F+=g-W,W<K){K-=W;do R[s++]=j[F++];while(--W);F=s-B,H=R}for(;K>2;)R[s++]=H[F++],R[s++]=H[F++],R[s++]=H[F++],K-=3;K&&(R[s++]=H[F++],K>1&&(R[s++]=H[F++]))}else{F=s-B;do R[s++]=R[F++],R[s++]=R[F++],R[s++]=R[F++],K-=3;while(K>2);K&&(R[s++]=R[F++],K>1&&(R[s++]=R[F++]))}}else if((W&64)===0){D=S[(D&65535)+(v&(1<<W)-1)];continue r}else{t.msg="invalid distance code",Y.mode=lv;break e}break}}else if((W&64)===0){D=w[(D&65535)+(v&(1<<W)-1)];continue t}else if(W&32){Y.mode=Qhe;break e}else{t.msg="invalid literal/length code",Y.mode=lv;break e}break}}while(i<a&&s<d);K=b>>3,i-=K,b-=K<<3,v&=(1<<b)-1,t.next_in=i,t.next_out=s,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=s<d?257+(d-s):257-(s-d),Y.hold=v,Y.bits=b};const Kf=15,Pk=852,kk=592,Dk=0,fj=1,Ok=2,Zhe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Xhe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Jhe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),efe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),tfe=(e,t,n,i,a,s,l,d)=>{const h=d.bits;let f=0,p=0,g=0,j=0,v=0,b=0,w=0,S=0,_=0,E=0,D,W,K,B,F,H=null,I;const R=new Uint16Array(Kf+1),Y=new Uint16Array(Kf+1);let G=null,ae,se,Ne;for(f=0;f<=Kf;f++)R[f]=0;for(p=0;p<i;p++)R[t[n+p]]++;for(v=h,j=Kf;j>=1&&R[j]===0;j--);if(v>j&&(v=j),j===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,d.bits=1,0;for(g=1;g<j&&R[g]===0;g++);for(v<g&&(v=g),S=1,f=1;f<=Kf;f++)if(S<<=1,S-=R[f],S<0)return-1;if(S>0&&(e===Dk||j!==1))return-1;for(Y[1]=0,f=1;f<Kf;f++)Y[f+1]=Y[f]+R[f];for(p=0;p<i;p++)t[n+p]!==0&&(l[Y[t[n+p]]++]=p);if(e===Dk?(H=G=l,I=20):e===fj?(H=Zhe,G=Xhe,I=257):(H=Jhe,G=efe,I=0),E=0,p=0,f=g,F=s,b=v,w=0,K=-1,_=1<<v,B=_-1,e===fj&&_>Pk||e===Ok&&_>kk)return 1;for(;;){ae=f-w,l[p]+1<I?(se=0,Ne=l[p]):l[p]>=I?(se=G[l[p]-I],Ne=H[l[p]-I]):(se=96,Ne=0),D=1<<f-w,W=1<<b,g=W;do W-=D,a[F+(E>>w)+W]=ae<<24|se<<16|Ne|0;while(W!==0);for(D=1<<f-1;E&D;)D>>=1;if(D!==0?(E&=D-1,E+=D):E=0,p++,--R[f]===0){if(f===j)break;f=t[n+l[p]]}if(f>v&&(E&B)!==K){for(w===0&&(w=v),F+=g,b=f-w,S=1<<b;b+w<j&&(S-=R[b+w],!(S<=0));)b++,S<<=1;if(_+=1<<b,e===fj&&_>Pk||e===Ok&&_>kk)return 1;K=E&B,a[K]=v<<24|b<<16|F-s|0}}return E!==0&&(a[F+E]=f-w<<24|64<<16|0),d.bits=v,0};var Kp=tfe;const rfe=0,n7=1,i7=2,{Z_FINISH:Mk,Z_BLOCK:nfe,Z_TREES:cv,Z_OK:rf,Z_STREAM_END:ife,Z_NEED_DICT:afe,Z_STREAM_ERROR:Yl,Z_DATA_ERROR:a7,Z_MEM_ERROR:s7,Z_BUF_ERROR:sfe,Z_DEFLATED:Lk}=e7,t1=16180,Rk=16181,Ik=16182,zk=16183,Bk=16184,Fk=16185,qk=16186,Uk=16187,Hk=16188,Wk=16189,K0=16190,Wd=16191,mj=16192,$k=16193,pj=16194,Vk=16195,Kk=16196,Gk=16197,Qk=16198,dv=16199,uv=16200,Yk=16201,Zk=16202,Xk=16203,Jk=16204,e6=16205,gj=16206,t6=16207,r6=16208,hi=16209,o7=16210,l7=16211,ofe=852,lfe=592,cfe=15,dfe=cfe,n6=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function ufe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ff=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<t1||t.mode>l7?1:0},c7=e=>{if(ff(e))return Yl;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=t1,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ofe),t.distcode=t.distdyn=new Int32Array(lfe),t.sane=1,t.back=-1,rf},d7=e=>{if(ff(e))return Yl;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,c7(e)},u7=(e,t)=>{let n;if(ff(e))return Yl;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Yl:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,d7(e))},h7=(e,t)=>{if(!e)return Yl;const n=new ufe;e.state=n,n.strm=e,n.window=null,n.mode=t1;const i=u7(e,t);return i!==rf&&(e.state=null),i},hfe=e=>h7(e,dfe);let i6=!0,yj,vj;const ffe=e=>{if(i6){yj=new Int32Array(512),vj=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Kp(n7,e.lens,0,288,yj,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Kp(i7,e.lens,0,32,vj,0,e.work,{bits:5}),i6=!1}e.lencode=yj,e.lenbits=9,e.distcode=vj,e.distbits=5},f7=(e,t,n,i)=>{let a;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>i&&(a=i),s.window.set(t.subarray(n-i,n-i+a),s.wnext),i-=a,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},mfe=(e,t)=>{let n,i,a,s,l,d,h,f,p,g,j,v,b,w,S=0,_,E,D,W,K,B,F,H;const I=new Uint8Array(4);let R,Y;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ff(e)||!e.output||!e.input&&e.avail_in!==0)return Yl;n=e.state,n.mode===Wd&&(n.mode=mj),l=e.next_out,a=e.output,h=e.avail_out,s=e.next_in,i=e.input,d=e.avail_in,f=n.hold,p=n.bits,g=d,j=h,H=rf;e:for(;;)switch(n.mode){case t1:if(n.wrap===0){n.mode=mj;break}for(;p<16;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(n.wrap&2&&f===35615){n.wbits===0&&(n.wbits=15),n.check=0,I[0]=f&255,I[1]=f>>>8&255,n.check=od(n.check,I,2,0),f=0,p=0,n.mode=Rk;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=hi;break}if((f&15)!==Lk){e.msg="unknown compression method",n.mode=hi;break}if(f>>>=4,p-=4,F=(f&15)+8,n.wbits===0&&(n.wbits=F),F>15||F>n.wbits){e.msg="invalid window size",n.mode=hi;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=f&512?Wk:Wd,f=0,p=0;break;case Rk:for(;p<16;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(n.flags=f,(n.flags&255)!==Lk){e.msg="unknown compression method",n.mode=hi;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=hi;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,n.check=od(n.check,I,2,0)),f=0,p=0,n.mode=Ik;case Ik:for(;p<32;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}n.head&&(n.head.time=f),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,I[2]=f>>>16&255,I[3]=f>>>24&255,n.check=od(n.check,I,4,0)),f=0,p=0,n.mode=zk;case zk:for(;p<16;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,n.check=od(n.check,I,2,0)),f=0,p=0,n.mode=Bk;case Bk:if(n.flags&1024){for(;p<16;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,n.check=od(n.check,I,2,0)),f=0,p=0}else n.head&&(n.head.extra=null);n.mode=Fk;case Fk:if(n.flags&1024&&(v=n.length,v>d&&(v=d),v&&(n.head&&(F=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+v),F)),n.flags&512&&n.wrap&4&&(n.check=od(n.check,i,v,s)),d-=v,s+=v,n.length-=v),n.length))break e;n.length=0,n.mode=qk;case qk:if(n.flags&2048){if(d===0)break e;v=0;do F=i[s+v++],n.head&&F&&n.length<65536&&(n.head.name+=String.fromCharCode(F));while(F&&v<d);if(n.flags&512&&n.wrap&4&&(n.check=od(n.check,i,v,s)),d-=v,s+=v,F)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Uk;case Uk:if(n.flags&4096){if(d===0)break e;v=0;do F=i[s+v++],n.head&&F&&n.length<65536&&(n.head.comment+=String.fromCharCode(F));while(F&&v<d);if(n.flags&512&&n.wrap&4&&(n.check=od(n.check,i,v,s)),d-=v,s+=v,F)break e}else n.head&&(n.head.comment=null);n.mode=Hk;case Hk:if(n.flags&512){for(;p<16;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(n.wrap&4&&f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=hi;break}f=0,p=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Wd;break;case Wk:for(;p<32;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}e.adler=n.check=n6(f),f=0,p=0,n.mode=K0;case K0:if(n.havedict===0)return e.next_out=l,e.avail_out=h,e.next_in=s,e.avail_in=d,n.hold=f,n.bits=p,afe;e.adler=n.check=1,n.mode=Wd;case Wd:if(t===nfe||t===cv)break e;case mj:if(n.last){f>>>=p&7,p-=p&7,n.mode=gj;break}for(;p<3;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}switch(n.last=f&1,f>>>=1,p-=1,f&3){case 0:n.mode=$k;break;case 1:if(ffe(n),n.mode=dv,t===cv){f>>>=2,p-=2;break e}break;case 2:n.mode=Kk;break;case 3:e.msg="invalid block type",n.mode=hi}f>>>=2,p-=2;break;case $k:for(f>>>=p&7,p-=p&7;p<32;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=hi;break}if(n.length=f&65535,f=0,p=0,n.mode=pj,t===cv)break e;case pj:n.mode=Vk;case Vk:if(v=n.length,v){if(v>d&&(v=d),v>h&&(v=h),v===0)break e;a.set(i.subarray(s,s+v),l),d-=v,s+=v,h-=v,l+=v,n.length-=v;break}n.mode=Wd;break;case Kk:for(;p<14;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(n.nlen=(f&31)+257,f>>>=5,p-=5,n.ndist=(f&31)+1,f>>>=5,p-=5,n.ncode=(f&15)+4,f>>>=4,p-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=hi;break}n.have=0,n.mode=Gk;case Gk:for(;n.have<n.ncode;){for(;p<3;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}n.lens[G[n.have++]]=f&7,f>>>=3,p-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},H=Kp(rfe,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,H){e.msg="invalid code lengths set",n.mode=hi;break}n.have=0,n.mode=Qk;case Qk:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[f&(1<<n.lenbits)-1],_=S>>>24,E=S>>>16&255,D=S&65535,!(_<=p);){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(D<16)f>>>=_,p-=_,n.lens[n.have++]=D;else{if(D===16){for(Y=_+2;p<Y;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(f>>>=_,p-=_,n.have===0){e.msg="invalid bit length repeat",n.mode=hi;break}F=n.lens[n.have-1],v=3+(f&3),f>>>=2,p-=2}else if(D===17){for(Y=_+3;p<Y;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}f>>>=_,p-=_,F=0,v=3+(f&7),f>>>=3,p-=3}else{for(Y=_+7;p<Y;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}f>>>=_,p-=_,F=0,v=11+(f&127),f>>>=7,p-=7}if(n.have+v>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=hi;break}for(;v--;)n.lens[n.have++]=F}}if(n.mode===hi)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=hi;break}if(n.lenbits=9,R={bits:n.lenbits},H=Kp(n7,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,H){e.msg="invalid literal/lengths set",n.mode=hi;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},H=Kp(i7,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,H){e.msg="invalid distances set",n.mode=hi;break}if(n.mode=dv,t===cv)break e;case dv:n.mode=uv;case uv:if(d>=6&&h>=258){e.next_out=l,e.avail_out=h,e.next_in=s,e.avail_in=d,n.hold=f,n.bits=p,Yhe(e,j),l=e.next_out,a=e.output,h=e.avail_out,s=e.next_in,i=e.input,d=e.avail_in,f=n.hold,p=n.bits,n.mode===Wd&&(n.back=-1);break}for(n.back=0;S=n.lencode[f&(1<<n.lenbits)-1],_=S>>>24,E=S>>>16&255,D=S&65535,!(_<=p);){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(E&&(E&240)===0){for(W=_,K=E,B=D;S=n.lencode[B+((f&(1<<W+K)-1)>>W)],_=S>>>24,E=S>>>16&255,D=S&65535,!(W+_<=p);){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}f>>>=W,p-=W,n.back+=W}if(f>>>=_,p-=_,n.back+=_,n.length=D,E===0){n.mode=e6;break}if(E&32){n.back=-1,n.mode=Wd;break}if(E&64){e.msg="invalid literal/length code",n.mode=hi;break}n.extra=E&15,n.mode=Yk;case Yk:if(n.extra){for(Y=n.extra;p<Y;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Zk;case Zk:for(;S=n.distcode[f&(1<<n.distbits)-1],_=S>>>24,E=S>>>16&255,D=S&65535,!(_<=p);){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if((E&240)===0){for(W=_,K=E,B=D;S=n.distcode[B+((f&(1<<W+K)-1)>>W)],_=S>>>24,E=S>>>16&255,D=S&65535,!(W+_<=p);){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}f>>>=W,p-=W,n.back+=W}if(f>>>=_,p-=_,n.back+=_,E&64){e.msg="invalid distance code",n.mode=hi;break}n.offset=D,n.extra=E&15,n.mode=Xk;case Xk:if(n.extra){for(Y=n.extra;p<Y;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=hi;break}n.mode=Jk;case Jk:if(h===0)break e;if(v=j-h,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=hi;break}v>n.wnext?(v-=n.wnext,b=n.wsize-v):b=n.wnext-v,v>n.length&&(v=n.length),w=n.window}else w=a,b=l-n.offset,v=n.length;v>h&&(v=h),h-=v,n.length-=v;do a[l++]=w[b++];while(--v);n.length===0&&(n.mode=uv);break;case e6:if(h===0)break e;a[l++]=n.length,h--,n.mode=uv;break;case gj:if(n.wrap){for(;p<32;){if(d===0)break e;d--,f|=i[s++]<<p,p+=8}if(j-=h,e.total_out+=j,n.total+=j,n.wrap&4&&j&&(e.adler=n.check=n.flags?od(n.check,a,j,l-j):Aw(n.check,a,j,l-j)),j=h,n.wrap&4&&(n.flags?f:n6(f))!==n.check){e.msg="incorrect data check",n.mode=hi;break}f=0,p=0}n.mode=t6;case t6:if(n.wrap&&n.flags){for(;p<32;){if(d===0)break e;d--,f+=i[s++]<<p,p+=8}if(n.wrap&4&&f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=hi;break}f=0,p=0}n.mode=r6;case r6:H=ife;break e;case hi:H=a7;break e;case o7:return s7;case l7:default:return Yl}return e.next_out=l,e.avail_out=h,e.next_in=s,e.avail_in=d,n.hold=f,n.bits=p,(n.wsize||j!==e.avail_out&&n.mode<hi&&(n.mode<gj||t!==Mk))&&f7(e,e.output,e.next_out,j-e.avail_out),g-=e.avail_in,j-=e.avail_out,e.total_in+=g,e.total_out+=j,n.total+=j,n.wrap&4&&j&&(e.adler=n.check=n.flags?od(n.check,a,j,e.next_out-j):Aw(n.check,a,j,e.next_out-j)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Wd?128:0)+(n.mode===dv||n.mode===pj?256:0),(g===0&&j===0||t===Mk)&&H===rf&&(H=sfe),H},pfe=e=>{if(ff(e))return Yl;let t=e.state;return t.window&&(t.window=null),e.state=null,rf},gfe=(e,t)=>{if(ff(e))return Yl;const n=e.state;return(n.wrap&2)===0?Yl:(n.head=t,t.done=!1,rf)},yfe=(e,t)=>{const n=t.length;let i,a,s;return ff(e)||(i=e.state,i.wrap!==0&&i.mode!==K0)?Yl:i.mode===K0&&(a=1,a=Aw(a,t,n,0),a!==i.check)?a7:(s=f7(e,t,n,n),s?(i.mode=o7,s7):(i.havedict=1,rf))};var vfe=d7,xfe=u7,bfe=c7,jfe=hfe,wfe=h7,Sfe=mfe,Nfe=pfe,_fe=gfe,Cfe=yfe,Afe="pako inflate (from Nodeca project)",Vd={inflateReset:vfe,inflateReset2:xfe,inflateResetKeep:bfe,inflateInit:jfe,inflateInit2:wfe,inflate:Sfe,inflateEnd:Nfe,inflateGetHeader:_fe,inflateSetDictionary:Cfe,inflateInfo:Afe};function Efe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Tfe=Efe;const m7=Object.prototype.toString,{Z_NO_FLUSH:Pfe,Z_FINISH:kfe,Z_OK:vg,Z_STREAM_END:xj,Z_NEED_DICT:bj,Z_STREAM_ERROR:Dfe,Z_DATA_ERROR:a6,Z_MEM_ERROR:Ofe}=e7;function Zg(e){this.options=t7.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ghe,this.strm.avail_out=0;let n=Vd.inflateInit2(this.strm,t.windowBits);if(n!==vg)throw new Error(Ew[n]);if(this.header=new Tfe,Vd.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Tw.string2buf(t.dictionary):m7.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vd.inflateSetDictionary(this.strm,t.dictionary),n!==vg)))throw new Error(Ew[n])}Zg.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let s,l,d;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?kfe:Pfe,m7.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Vd.inflate(n,l),s===bj&&a&&(s=Vd.inflateSetDictionary(n,a),s===vg?s=Vd.inflate(n,l):s===a6&&(s=bj));n.avail_in>0&&s===xj&&n.state.wrap>0&&e[n.next_in]!==0;)Vd.inflateReset(n),s=Vd.inflate(n,l);switch(s){case Dfe:case a6:case bj:case Ofe:return this.onEnd(s),this.ended=!0,!1}if(d=n.avail_out,n.next_out&&(n.avail_out===0||s===xj))if(this.options.to==="string"){let h=Tw.utf8border(n.output,n.next_out),f=n.next_out-h,p=Tw.buf2string(n.output,h);n.next_out=f,n.avail_out=i-f,f&&n.output.set(n.output.subarray(h,h+f),0),this.onData(p)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===vg&&d===0)){if(s===xj)return s=Vd.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Zg.prototype.onData=function(e){this.chunks.push(e)};Zg.prototype.onEnd=function(e){e===vg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Mfe(e,t){const n=new Zg(t);if(n.push(e),n.err)throw n.msg||Ew[n.err];return n.result}var Lfe=Zg,Rfe=Mfe,Ife={Inflate:Lfe,inflate:Rfe};const{Inflate:zfe,inflate:Bfe}=Ife;var s6=zfe,Ffe=Bfe;const p7=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;p7[e]=t}const o6=4294967295;function qfe(e,t,n){let i=e;for(let a=0;a<n;a++)i=p7[(i^t[a])&255]^i>>>8;return i}function Ufe(e,t){return(qfe(o6,e,t)^o6)>>>0}function l6(e,t,n){const i=e.readUint32(),a=Ufe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${a}`)}function g7(e,t,n){for(let i=0;i<n;i++)t[i]=e[i]}function y7(e,t,n,i){let a=0;for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-i]&255}function v7(e,t,n,i){let a=0;if(n.length===0)for(;a<i;a++)t[a]=e[a];else for(;a<i;a++)t[a]=e[a]+n[a]&255}function x7(e,t,n,i,a){let s=0;if(n.length===0){for(;s<a;s++)t[s]=e[s];for(;s<i;s++)t[s]=e[s]+(t[s-a]>>1)&255}else{for(;s<a;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<i;s++)t[s]=e[s]+(t[s-a]+n[s]>>1)&255}}function b7(e,t,n,i,a){let s=0;if(n.length===0){for(;s<a;s++)t[s]=e[s];for(;s<i;s++)t[s]=e[s]+t[s-a]&255}else{for(;s<a;s++)t[s]=e[s]+n[s]&255;for(;s<i;s++)t[s]=e[s]+Hfe(t[s-a],n[s],n[s-a])&255}}function Hfe(e,t,n){const i=e+t-n,a=Math.abs(i-e),s=Math.abs(i-t),l=Math.abs(i-n);return a<=s&&a<=l?e:s<=l?t:n}function Wfe(e,t,n,i,a,s){switch(e){case 0:g7(t,n,a);break;case 1:y7(t,n,a,s);break;case 2:v7(t,n,i,a);break;case 3:x7(t,n,i,a,s);break;case 4:b7(t,n,i,a,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const $fe=new Uint16Array([255]),Vfe=new Uint8Array($fe.buffer),Kfe=Vfe[0]===255;function Gfe(e){const{data:t,width:n,height:i,channels:a,depth:s}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(s/8)*a,h=new Uint8Array(i*n*d);let f=0;for(let p=0;p<7;p++){const g=l[p],j=Math.ceil((n-g.x)/g.xStep),v=Math.ceil((i-g.y)/g.yStep);if(j<=0||v<=0)continue;const b=j*d,w=new Uint8Array(b);for(let S=0;S<v;S++){const _=t[f++],E=t.subarray(f,f+b);f+=b;const D=new Uint8Array(b);Wfe(_,E,D,w,b,d),w.set(D);for(let W=0;W<j;W++){const K=g.x+W*g.xStep,B=g.y+S*g.yStep;if(!(K>=n||B>=i))for(let F=0;F<d;F++)h[(B*n+K)*d+F]=D[W*d+F]}}}if(s===16){const p=new Uint16Array(h.buffer);if(Kfe)for(let g=0;g<p.length;g++)p[g]=Qfe(p[g]);return p}else return h}function Qfe(e){return(e&255)<<8|e>>8&255}const Yfe=new Uint16Array([255]),Zfe=new Uint8Array(Yfe.buffer),Xfe=Zfe[0]===255,Jfe=new Uint8Array(0);function c6(e){const{data:t,width:n,height:i,channels:a,depth:s}=e,l=Math.ceil(s/8)*a,d=Math.ceil(s/8*a*n),h=new Uint8Array(i*d);let f=Jfe,p=0,g,j;for(let v=0;v<i;v++){switch(g=t.subarray(p+1,p+1+d),j=h.subarray(v*d,(v+1)*d),t[p]){case 0:g7(g,j,d);break;case 1:y7(g,j,d,l);break;case 2:v7(g,j,f,d);break;case 3:x7(g,j,f,d,l);break;case 4:b7(g,j,f,d,l);break;default:throw new Error(`Unsupported filter: ${t[p]}`)}f=j,p+=d+1}if(s===16){const v=new Uint16Array(h.buffer);if(Xfe)for(let b=0;b<v.length;b++)v[b]=eme(v[b]);return v}else return h}function eme(e){return(e&255)<<8|e>>8&255}const Iv=Uint8Array.of(137,80,78,71,13,10,26,10);function d6(e){if(!tme(e.readBytes(Iv.length)))throw new Error("wrong PNG signature")}function tme(e){if(e.length<Iv.length)return!1;for(let t=0;t<Iv.length;t++)if(e[t]!==Iv[t])return!1;return!0}const rme="tEXt",nme=0,j7=new TextDecoder("latin1");function ime(e){if(sme(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const ame=/^[\u0000-\u00FF]*$/;function sme(e){if(!ame.test(e))throw new Error("invalid latin1 text")}function ome(e,t,n){const i=w7(t);e[i]=lme(t,n-i.length-1)}function w7(e){for(e.mark();e.readByte()!==nme;);const t=e.offset;e.reset();const n=j7.decode(e.readBytes(t-e.offset-1));return e.skip(1),ime(n),n}function lme(e,t){return j7.decode(e.readBytes(t))}const ul={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},jj={UNKNOWN:-1,DEFLATE:0},u6={UNKNOWN:-1,ADAPTIVE:0},wj={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},hv={NONE:0,BACKGROUND:1,PREVIOUS:2},Sj={SOURCE:0,OVER:1};class cme extends e_{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,n={}){super(t);const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new s6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=jj.UNKNOWN,this._filterMethod=u6.UNKNOWN,this._interlaceMethod=wj.UNKNOWN,this._colorType=ul.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(d6(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(d6(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case rme:ome(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?l6(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?l6(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=dme(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case ul.GREYSCALE:i=1;break;case ul.TRUECOLOUR:i=3;break;case ul.INDEXED_COLOUR:i=1;break;case ul.GREYSCALE_ALPHA:i=2;break;case ul.TRUECOLOUR_ALPHA:i=4;break;case ul.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==jj.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ul.GREYSCALE:case ul.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case ul.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ul.UNKNOWN:case ul.GREYSCALE_ALPHA:case ul.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=w7(this),i=this.readUint8();if(i!==jj.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Ffe(a)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=c6({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case hv.NONE:break;case hv.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const l=(a*t.width+s)*this._png.channels;for(let d=0;d<this._png.channels;d++)i.data[l+d]=0}break;case hv.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,a=(s,l)=>{const d=((s+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,h=(s*n.width+l)*this._png.channels;return{index:d,frameIndex:h}};switch(n.blendOp){case Sj.SOURCE:for(let s=0;s<n.height;s++)for(let l=0;l<n.width;l++){const{index:d,frameIndex:h}=a(s,l);for(let f=0;f<this._png.channels;f++)t.data[d+f]=n.data[h+f]}break;case Sj.OVER:for(let s=0;s<n.height;s++)for(let l=0;l<n.width;l++){const{index:d,frameIndex:h}=a(s,l);for(let f=0;f<this._png.channels;f++){const p=n.data[h+this._png.channels-1]/i,g=f%(this._png.channels-1)===0?1:n.data[h+f],j=Math.floor(p*g+(1-p)*t.data[d+f]);t.data[d+f]+=j}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==u6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===wj.NO_INTERLACE)this._png.data=c6({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===wj.ADAM7)this._png.data=Gfe({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:hv.NONE,blendOp:Sj.SOURCE,data:t}),this._inflator=new s6,this._writingDataChunks=!1}}function dme(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var h6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(h6||(h6={}));function ume(e,t){return new cme(e,t).decode()}var or=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Nj(){or.console&&typeof or.console.log=="function"&&or.console.log.apply(or.console,arguments)}var Rn={log:Nj,warn:function(e){or.console&&(typeof or.console.warn=="function"?or.console.warn.apply(or.console,arguments):Nj.call(null,arguments))},error:function(e){or.console&&(typeof or.console.error=="function"?or.console.error.apply(or.console,arguments):Nj(e))}};function _j(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Nh(i.response,t,n)},i.onerror=function(){Rn.error("could not download file")},i.send()}function f6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function fv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Nh=or.saveAs||((typeof window>"u"?"undefined":_n(window))!=="object"||window!==or?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=or.URL||or.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?f6(a.href)?_j(e,t,n):fv(a,a.target="_blank"):fv(a)):(a.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){fv(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(f6(e))_j(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){fv(i)})}else navigator.msSaveOrOpenBlob((function(a,s){return s===void 0?s={autoBom:!1}:_n(s)!=="object"&&(Rn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return _j(e,t,n);var a=e.type==="application/octet-stream",s=/constructor/i.test(or.HTMLElement)||or.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&(typeof FileReader>"u"?"undefined":_n(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var p=d.result;p=l?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},d.readAsDataURL(e)}else{var h=or.URL||or.webkitURL,f=h.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function S7(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],i=0;i<n.length;i++){var a=n[i].re,s=n[i].process,l=a.exec(e);l&&(t=s(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+d+h+f}}var zv=or.atob.bind(or),m6=or.btoa.bind(or);function Cj(e,t){var n=e[0],i=e[1],a=e[2],s=e[3];n=Ds(n,i,a,s,t[0],7,-680876936),s=Ds(s,n,i,a,t[1],12,-389564586),a=Ds(a,s,n,i,t[2],17,606105819),i=Ds(i,a,s,n,t[3],22,-1044525330),n=Ds(n,i,a,s,t[4],7,-176418897),s=Ds(s,n,i,a,t[5],12,1200080426),a=Ds(a,s,n,i,t[6],17,-1473231341),i=Ds(i,a,s,n,t[7],22,-45705983),n=Ds(n,i,a,s,t[8],7,1770035416),s=Ds(s,n,i,a,t[9],12,-1958414417),a=Ds(a,s,n,i,t[10],17,-42063),i=Ds(i,a,s,n,t[11],22,-1990404162),n=Ds(n,i,a,s,t[12],7,1804603682),s=Ds(s,n,i,a,t[13],12,-40341101),a=Ds(a,s,n,i,t[14],17,-1502002290),n=Os(n,i=Ds(i,a,s,n,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Os(s,n,i,a,t[6],9,-1069501632),a=Os(a,s,n,i,t[11],14,643717713),i=Os(i,a,s,n,t[0],20,-373897302),n=Os(n,i,a,s,t[5],5,-701558691),s=Os(s,n,i,a,t[10],9,38016083),a=Os(a,s,n,i,t[15],14,-660478335),i=Os(i,a,s,n,t[4],20,-405537848),n=Os(n,i,a,s,t[9],5,568446438),s=Os(s,n,i,a,t[14],9,-1019803690),a=Os(a,s,n,i,t[3],14,-187363961),i=Os(i,a,s,n,t[8],20,1163531501),n=Os(n,i,a,s,t[13],5,-1444681467),s=Os(s,n,i,a,t[2],9,-51403784),a=Os(a,s,n,i,t[7],14,1735328473),n=Ms(n,i=Os(i,a,s,n,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Ms(s,n,i,a,t[8],11,-2022574463),a=Ms(a,s,n,i,t[11],16,1839030562),i=Ms(i,a,s,n,t[14],23,-35309556),n=Ms(n,i,a,s,t[1],4,-1530992060),s=Ms(s,n,i,a,t[4],11,1272893353),a=Ms(a,s,n,i,t[7],16,-155497632),i=Ms(i,a,s,n,t[10],23,-1094730640),n=Ms(n,i,a,s,t[13],4,681279174),s=Ms(s,n,i,a,t[0],11,-358537222),a=Ms(a,s,n,i,t[3],16,-722521979),i=Ms(i,a,s,n,t[6],23,76029189),n=Ms(n,i,a,s,t[9],4,-640364487),s=Ms(s,n,i,a,t[12],11,-421815835),a=Ms(a,s,n,i,t[15],16,530742520),n=Ls(n,i=Ms(i,a,s,n,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Ls(s,n,i,a,t[7],10,1126891415),a=Ls(a,s,n,i,t[14],15,-1416354905),i=Ls(i,a,s,n,t[5],21,-57434055),n=Ls(n,i,a,s,t[12],6,1700485571),s=Ls(s,n,i,a,t[3],10,-1894986606),a=Ls(a,s,n,i,t[10],15,-1051523),i=Ls(i,a,s,n,t[1],21,-2054922799),n=Ls(n,i,a,s,t[8],6,1873313359),s=Ls(s,n,i,a,t[15],10,-30611744),a=Ls(a,s,n,i,t[6],15,-1560198380),i=Ls(i,a,s,n,t[13],21,1309151649),n=Ls(n,i,a,s,t[4],6,-145523070),s=Ls(s,n,i,a,t[11],10,-1120210379),a=Ls(a,s,n,i,t[2],15,718787259),i=Ls(i,a,s,n,t[9],21,-343485551),e[0]=Ju(n,e[0]),e[1]=Ju(i,e[1]),e[2]=Ju(a,e[2]),e[3]=Ju(s,e[3])}function r1(e,t,n,i,a,s){return t=Ju(Ju(t,e),Ju(i,s)),Ju(t<<a|t>>>32-a,n)}function Ds(e,t,n,i,a,s,l){return r1(t&n|~t&i,e,t,a,s,l)}function Os(e,t,n,i,a,s,l){return r1(t&i|n&~i,e,t,a,s,l)}function Ms(e,t,n,i,a,s,l){return r1(t^n^i,e,t,a,s,l)}function Ls(e,t,n,i,a,s,l){return r1(n^(t|~i),e,t,a,s,l)}function N7(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Cj(i,hme(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Cj(i,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,Cj(i,a),i}function hme(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var p6="0123456789abcdef".split("");function fme(e){for(var t="",n=0;n<4;n++)t+=p6[e>>8*n+4&15]+p6[e>>8*n&15];return t}function mme(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Pw(e){return N7(e).map(mme).join("")}var pme=(function(e){for(var t=0;t<e.length;t++)e[t]=fme(e[t]);return e.join("")})(N7("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ju(e,t){if(pme){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function kw(e,t){var n,i,a,s;if(e!==n){for(var l=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),d=[],h=0;h<256;h++)d[h]=h;var f=0;for(h=0;h<256;h++){var p=d[h];f=(f+p+l.charCodeAt(h))%256,d[h]=d[f],d[f]=p}n=e,i=d}else d=i;var g=t.length,j=0,v=0,b="";for(h=0;h<g;h++)v=(v+(p=d[j=(j+1)%256]))%256,d[j]=d[v],d[v]=p,l=d[(d[j]+d[v])%256],b+=String.fromCharCode(t.charCodeAt(h)^l);return b}var g6={print:4,modify:8,copy:16,"annot-forms":32};function em(e,t,n,i){this.v=1,this.r=2;var a=192;e.forEach(function(d){if(g6.perm!==void 0)throw new Error("Invalid permission: "+d);a+=g6[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^a)),this.encryptionKey=Pw(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=kw(this.encryptionKey,this.padding)}function tm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var a=e.charCodeAt(i);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[i]}return t}function y6(e){if(_n(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,i,a){if(a=a||!1,typeof n!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[i,!!a],s},this.unsubscribe=function(n){for(var i in t)if(t[i][n])return delete t[i][n],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[n]){var l=t[n][s];try{l[0].apply(e,i)}catch(d){or.console&&Rn.error("jsPDF PubSub Error",d.message,d)}l[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function G0(e){if(!(this instanceof G0))return new G0(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function _7(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ah(e,t,n,i,a){if(!(this instanceof Ah))return new Ah(e,t,n,i,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,_7.call(this,i,a)}function am(e,t,n,i,a){if(!(this instanceof am))return new am(e,t,n,i,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,_7.call(this,i,a)}function Ut(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],s=arguments[3],l=[],d=1,h=16,f="S",p=null;_n(e=e||{})==="object"&&(n=e.orientation,i=e.unit||i,a=e.format||a,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),d=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(h=e.floatPrecision),f=e.defaultPathOperation||"S"),l=e.filters||(s===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,j={},v={internal:{},__private__:{}};v.__private__.PubSub=y6;var b="1.3",w=v.__private__.getPdfVersion=function(){return b};v.__private__.setPdfVersion=function(M){b=M};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return S};var _=v.__private__.getPageFormat=function(M){return S[M]};a=a||"a4";var E="compat",D="advanced",W=E;function K(){this.saveGraphicsState(),be(new zt(nr,0,0,-nr,0,Xo()*nr).toString()+" cm"),this.setFontSize(this.getFontSize()/nr),f="n",W=D}function B(){this.restoreGraphicsState(),f="S",W=E}var F=v.__private__.combineFontStyleAndFontWeight=function(M,le){if(M=="bold"&&le=="normal"||M=="bold"&&le==400||M=="normal"&&le=="italic"||M=="bold"&&le=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return le&&(M=le==400||le==="normal"?M==="italic"?"italic":"normal":le!=700&&le!=="bold"||M!=="normal"?(le==700?"bold":le)+""+M:"bold"),M};v.advancedAPI=function(M){var le=W===E;return le&&K.call(this),typeof M!="function"||(M(this),le&&B.call(this)),this},v.compatAPI=function(M){var le=W===D;return le&&B.call(this),typeof M!="function"||(M(this),le&&K.call(this)),this},v.isAdvancedAPI=function(){return W===D};var H,I=function(M){if(W!==D)throw new Error(M+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=v.roundToPrecision=v.__private__.roundToPrecision=function(M,le){var je=t||le;if(isNaN(M)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return M.toFixed(je).replace(/0+$/,"")};H=v.hpf=v.__private__.hpf=typeof h=="number"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return R(M,h)}:h==="smart"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return R(M,M>-1&&M<1?16:5)}:function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return R(M,16)};var Y=v.f2=v.__private__.f2=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f2");return R(M,2)},G=v.__private__.f3=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f3");return R(M,3)},ae=v.scale=v.__private__.scale=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.scale");return W===E?M*nr:W===D?M:void 0},se=function(M){return ae((function(le){return W===E?Xo()-le:W===D?le:void 0})(M))};v.__private__.setPrecision=v.setPrecision=function(M){typeof parseInt(M,10)=="number"&&(t=parseInt(M,10))};var Ne,z="00000000000000000000000000000000",ie=v.__private__.getFileId=function(){return z},q=v.__private__.setFileId=function(M){return z=M!==void 0&&/^[a-fA-F0-9]{32}$/.test(M)?M.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Bn=new em(p.userPermissions,p.userPassword,p.ownerPassword,z)),z};v.setFileId=function(M){return q(M),this},v.getFileId=function(){return ie()};var re=v.__private__.convertDateToPDFDate=function(M){var le=M.getTimezoneOffset(),je=le<0?"+":"-",Ee=Math.floor(Math.abs(le/60)),Oe=Math.abs(le%60),Ge=[je,$(Ee),"'",$(Oe),"'"].join("");return["D:",M.getFullYear(),$(M.getMonth()+1),$(M.getDate()),$(M.getHours()),$(M.getMinutes()),$(M.getSeconds()),Ge].join("")},ue=v.__private__.convertPDFDateToDate=function(M){var le=parseInt(M.substr(2,4),10),je=parseInt(M.substr(6,2),10)-1,Ee=parseInt(M.substr(8,2),10),Oe=parseInt(M.substr(10,2),10),Ge=parseInt(M.substr(12,2),10),at=parseInt(M.substr(14,2),10);return new Date(le,je,Ee,Oe,Ge,at,0)},Q=v.__private__.setCreationDate=function(M){var le;if(M===void 0&&(M=new Date),M instanceof Date)le=re(M);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(M))throw new Error("Invalid argument passed to jsPDF.setCreationDate");le=M}return Ne=le},V=v.__private__.getCreationDate=function(M){var le=Ne;return M==="jsDate"&&(le=ue(Ne)),le};v.setCreationDate=function(M){return Q(M),this},v.getCreationDate=function(M){return V(M)};var ne,$=v.__private__.padd2=function(M){return("0"+parseInt(M)).slice(-2)},de=v.__private__.padd2Hex=function(M){return("00"+(M=M.toString())).substr(M.length)},Z=0,ge=[],oe=[],X=0,_e=[],Ie=[],De=!1,ut=oe;v.__private__.setCustomOutputDestination=function(M){De=!0,ut=M};var ht=function(M){De||(ut=M)};v.__private__.resetCustomOutputDestination=function(){De=!1,ut=oe};var be=v.__private__.out=function(M){return M=M.toString(),X+=M.length+1,ut.push(M),ut},ct=v.__private__.write=function(M){return be(arguments.length===1?M.toString():Array.prototype.join.call(arguments," "))},Gt=v.__private__.getArrayBuffer=function(M){for(var le=M.length,je=new ArrayBuffer(le),Ee=new Uint8Array(je);le--;)Ee[le]=M.charCodeAt(le);return je},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Pt};var st=e.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(M){return st=W===D?M/nr:M,this};var qt,vt=v.__private__.getFontSize=v.getFontSize=function(){return W===E?st:st*nr},Ht=e.R2L||!1;v.__private__.setR2L=v.setR2L=function(M){return Ht=M,this},v.__private__.getR2L=v.getR2L=function(){return Ht};var Bt,lr=v.__private__.setZoomMode=function(M){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(M))qt=M;else if(isNaN(M)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(M)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+M+'" is not recognized.');qt=M}else qt=parseInt(M,10)};v.__private__.getZoomMode=function(){return qt};var Nr,rr=v.__private__.setPageMode=function(M){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(M)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+M+'" is not recognized.');Bt=M};v.__private__.getPageMode=function(){return Bt};var jr=v.__private__.setLayoutMode=function(M){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(M)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+M+'" is not recognized.');Nr=M};v.__private__.getLayoutMode=function(){return Nr},v.__private__.setDisplayMode=v.setDisplayMode=function(M,le,je){return lr(M),jr(le),rr(je),this};var dr={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(M){if(Object.keys(dr).indexOf(M)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return dr[M]},v.__private__.getDocumentProperties=function(){return dr},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(M){for(var le in dr)dr.hasOwnProperty(le)&&M[le]&&(dr[le]=M[le]);return this},v.__private__.setDocumentProperty=function(M,le){if(Object.keys(dr).indexOf(M)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return dr[M]=le};var Tt,nr,kt,$n,xr,Wt={},Xt={},_r=[],Ot={},mn={},Qt={},Jt={},en=null,cr=0,It=[],Rr=new y6(v),Ws=e.hotfixes||[],ia={},fo={},vs=[],zt=function M(le,je,Ee,Oe,Ge,at){if(!(this instanceof M))return new M(le,je,Ee,Oe,Ge,at);isNaN(le)&&(le=1),isNaN(je)&&(je=0),isNaN(Ee)&&(Ee=0),isNaN(Oe)&&(Oe=1),isNaN(Ge)&&(Ge=0),isNaN(at)&&(at=0),this._matrix=[le,je,Ee,Oe,Ge,at]};Object.defineProperty(zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),zt.prototype.join=function(M){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(H).join(M)},zt.prototype.multiply=function(M){var le=M.sx*this.sx+M.shy*this.shx,je=M.sx*this.shy+M.shy*this.sy,Ee=M.shx*this.sx+M.sy*this.shx,Oe=M.shx*this.shy+M.sy*this.sy,Ge=M.tx*this.sx+M.ty*this.shx+this.tx,at=M.tx*this.shy+M.ty*this.sy+this.ty;return new zt(le,je,Ee,Oe,Ge,at)},zt.prototype.decompose=function(){var M=this.sx,le=this.shy,je=this.shx,Ee=this.sy,Oe=this.tx,Ge=this.ty,at=Math.sqrt(M*M+le*le),jt=(M/=at)*je+(le/=at)*Ee;je-=M*jt,Ee-=le*jt;var Nt=Math.sqrt(je*je+Ee*Ee);return jt/=Nt,M*(Ee/=Nt)<le*(je/=Nt)&&(M=-M,le=-le,jt=-jt,at=-at),{scale:new zt(at,0,0,Nt,0,0),translate:new zt(1,0,0,1,Oe,Ge),rotate:new zt(M,le,-le,M,0,0),skew:new zt(1,0,jt,1,0,0)}},zt.prototype.toString=function(M){return this.join(" ")},zt.prototype.inversed=function(){var M=this.sx,le=this.shy,je=this.shx,Ee=this.sy,Oe=this.tx,Ge=this.ty,at=1/(M*Ee-le*je),jt=Ee*at,Nt=-le*at,Yt=-je*at,ar=M*at;return new zt(jt,Nt,Yt,ar,-jt*Oe-Yt*Ge,-Nt*Oe-ar*Ge)},zt.prototype.applyToPoint=function(M){var le=M.x*this.sx+M.y*this.shx+this.tx,je=M.x*this.shy+M.y*this.sy+this.ty;return new ws(le,je)},zt.prototype.applyToRectangle=function(M){var le=this.applyToPoint(M),je=this.applyToPoint(new ws(M.x+M.w,M.y+M.h));return new bo(le.x,le.y,je.x-le.x,je.y-le.y)},zt.prototype.clone=function(){var M=this.sx,le=this.shy,je=this.shx,Ee=this.sy,Oe=this.tx,Ge=this.ty;return new zt(M,le,je,Ee,Oe,Ge)},v.Matrix=zt;var $o=v.matrixMult=function(M,le){return le.multiply(M)},mo=new zt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=mo;var Ya=function(M,le){if(!mn[M]){var je=(le instanceof Ah?"Sh":"P")+(Object.keys(Ot).length+1).toString(10);le.id=je,mn[M]=je,Ot[je]=le,Rr.publish("addPattern",le)}};v.ShadingPattern=Ah,v.TilingPattern=am,v.addShadingPattern=function(M,le){return I("addShadingPattern()"),Ya(M,le),this},v.beginTilingPattern=function(M){I("beginTilingPattern()"),ic(M.boundingBox[0],M.boundingBox[1],M.boundingBox[2]-M.boundingBox[0],M.boundingBox[3]-M.boundingBox[1],M.matrix)},v.endTilingPattern=function(M,le){I("endTilingPattern()"),le.stream=Ie[ne].join(`
`),Ya(M,le),Rr.publish("endTilingPattern",le),vs.pop().restore()};var Za,Ir=v.__private__.newObject=function(){var M=gt();return bi(M,!0),M},gt=v.__private__.newObjectDeferred=function(){return Z++,ge[Z]=function(){return X},Z},bi=function(M,le){return le=typeof le=="boolean"&&le,ge[M]=X,le&&be(M+" 0 obj"),M},Vo=v.__private__.newAdditionalObject=function(){var M={objId:gt(),content:""};return _e.push(M),M},aa=gt(),tn=gt(),yn=v.__private__.decodeColorString=function(M){var le=M.split(" ");if(le.length!==2||le[1]!=="g"&&le[1]!=="G")le.length!==5||le[4]!=="k"&&le[4]!=="K"||(le=[(1-le[0])*(1-le[3]),(1-le[1])*(1-le[3]),(1-le[2])*(1-le[3]),"r"]);else{var je=parseFloat(le[0]);le=[je,je,je,"r"]}for(var Ee="#",Oe=0;Oe<3;Oe++)Ee+=("0"+Math.floor(255*parseFloat(le[Oe])).toString(16)).slice(-2);return Ee},$i=v.__private__.encodeColorString=function(M){var le;typeof M=="string"&&(M={ch1:M});var je=M.ch1,Ee=M.ch2,Oe=M.ch3,Ge=M.ch4,at=M.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var jt=new S7(je);if(jt.ok)je=jt.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var Nt=parseInt(je.substr(1),16);je=Nt>>16&255,Ee=Nt>>8&255,Oe=255&Nt}if(Ee===void 0||Ge===void 0&&je===Ee&&Ee===Oe)le=typeof je=="string"?je+" "+at[0]:M.precision===2?Y(je/255)+" "+at[0]:G(je/255)+" "+at[0];else if(Ge===void 0||_n(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",at[1]].join(" ");le=typeof je=="string"?[je,Ee,Oe,at[1]].join(" "):M.precision===2?[Y(je/255),Y(Ee/255),Y(Oe/255),at[1]].join(" "):[G(je/255),G(Ee/255),G(Oe/255),at[1]].join(" ")}else le=typeof je=="string"?[je,Ee,Oe,Ge,at[2]].join(" "):M.precision===2?[Y(je),Y(Ee),Y(Oe),Y(Ge),at[2]].join(" "):[G(je),G(Ee),G(Oe),G(Ge),at[2]].join(" ");return le},Pi=v.__private__.getFilters=function(){return l},Xa=v.__private__.putStream=function(M){var le=(M=M||{}).data||"",je=M.filters||Pi(),Ee=M.alreadyAppliedFilters||[],Oe=M.addLength1||!1,Ge=le.length,at=M.objectId,jt=function(Ni){return Ni};if(p!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(jt=Bn.encryptor(at,0));var Nt={};je===!0&&(je=["FlateEncode"]);var Yt=M.additionalKeyValues||[],ar=(Nt=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(le,je):{data:le,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(Nt.data.length!==0&&(Yt.push({key:"Length",value:Nt.data.length}),Oe===!0&&Yt.push({key:"Length1",value:Ge})),ar.length!=0)if(ar.split("/").length-1==1)Yt.push({key:"Filter",value:ar});else{Yt.push({key:"Filter",value:"["+ar+"]"});for(var Dr=0;Dr<Yt.length;Dr+=1)if(Yt[Dr].key==="DecodeParms"){for(var On=[],Kn=0;Kn<Nt.reverseChain.split("/").length-1;Kn+=1)On.push("null");On.push(Yt[Dr].value),Yt[Dr].value="["+On.join(" ")+"]"}}be("<<");for(var rn=0;rn<Yt.length;rn++)be("/"+Yt[rn].key+" "+Yt[rn].value);be(">>"),Nt.data.length!==0&&(be("stream"),be(jt(Nt.data)),be("endstream"))},Jl=v.__private__.putPage=function(M){var le=M.number,je=M.data,Ee=M.objId,Oe=M.contentsObjId;bi(Ee,!0),be("<</Type /Page"),be("/Parent "+M.rootDictionaryObjId+" 0 R"),be("/Resources "+M.resourceDictionaryObjId+" 0 R"),be("/MediaBox ["+parseFloat(H(M.mediaBox.bottomLeftX))+" "+parseFloat(H(M.mediaBox.bottomLeftY))+" "+H(M.mediaBox.topRightX)+" "+H(M.mediaBox.topRightY)+"]"),M.cropBox!==null&&be("/CropBox ["+H(M.cropBox.bottomLeftX)+" "+H(M.cropBox.bottomLeftY)+" "+H(M.cropBox.topRightX)+" "+H(M.cropBox.topRightY)+"]"),M.bleedBox!==null&&be("/BleedBox ["+H(M.bleedBox.bottomLeftX)+" "+H(M.bleedBox.bottomLeftY)+" "+H(M.bleedBox.topRightX)+" "+H(M.bleedBox.topRightY)+"]"),M.trimBox!==null&&be("/TrimBox ["+H(M.trimBox.bottomLeftX)+" "+H(M.trimBox.bottomLeftY)+" "+H(M.trimBox.topRightX)+" "+H(M.trimBox.topRightY)+"]"),M.artBox!==null&&be("/ArtBox ["+H(M.artBox.bottomLeftX)+" "+H(M.artBox.bottomLeftY)+" "+H(M.artBox.topRightX)+" "+H(M.artBox.topRightY)+"]"),typeof M.userUnit=="number"&&M.userUnit!==1&&be("/UserUnit "+M.userUnit),Rr.publish("putPage",{objId:Ee,pageContext:It[le],pageNumber:le,page:je}),be("/Contents "+Oe+" 0 R"),be(">>"),be("endobj");var Ge=je.join(`
`);return W===D&&(Ge+=`
Q`),bi(Oe,!0),Xa({data:Ge,filters:Pi(),objectId:Oe}),be("endobj"),Ee},$s=v.__private__.putPages=function(){var M,le,je=[];for(M=1;M<=cr;M++)It[M].objId=gt(),It[M].contentsObjId=gt();for(M=1;M<=cr;M++)je.push(Jl({number:M,data:Ie[M],objId:It[M].objId,contentsObjId:It[M].contentsObjId,mediaBox:It[M].mediaBox,cropBox:It[M].cropBox,bleedBox:It[M].bleedBox,trimBox:It[M].trimBox,artBox:It[M].artBox,userUnit:It[M].userUnit,rootDictionaryObjId:aa,resourceDictionaryObjId:tn}));bi(aa,!0),be("<</Type /Pages");var Ee="/Kids [";for(le=0;le<cr;le++)Ee+=je[le]+" 0 R ";be(Ee+"]"),be("/Count "+cr),be(">>"),be("endobj"),Rr.publish("postPutPages")},Vs=function(M){Rr.publish("putFont",{font:M,out:be,newObject:Ir,putStream:Xa}),M.isAlreadyPutted!==!0&&(M.objectNumber=Ir(),be("<<"),be("/Type /Font"),be("/BaseFont /"+tm(M.postScriptName)),be("/Subtype /Type1"),typeof M.encoding=="string"&&be("/Encoding /"+M.encoding),be("/FirstChar 32"),be("/LastChar 255"),be(">>"),be("endobj"))},jl=function(M){M.objectNumber=Ir();var le=[];le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Form"}),le.push({key:"BBox",value:"["+[H(M.x),H(M.y),H(M.x+M.width),H(M.y+M.height)].join(" ")+"]"}),le.push({key:"Matrix",value:"["+M.matrix.toString()+"]"});var je=M.pages[1].join(`
`);Xa({data:je,additionalKeyValues:le,objectId:M.objectNumber}),be("endobj")},xs=function(M,le){le||(le=21);var je=Ir(),Ee=(function(at,jt){var Nt,Yt=[],ar=1/(jt-1);for(Nt=0;Nt<1;Nt+=ar)Yt.push(Nt);if(Yt.push(1),at[0].offset!=0){var Dr={offset:0,color:at[0].color};at.unshift(Dr)}if(at[at.length-1].offset!=1){var On={offset:1,color:at[at.length-1].color};at.push(On)}for(var Kn="",rn=0,Ni=0;Ni<Yt.length;Ni++){for(Nt=Yt[Ni];Nt>at[rn+1].offset;)rn++;var Gn=at[rn].offset,ki=(Nt-Gn)/(at[rn+1].offset-Gn),Ss=at[rn].color,Ki=at[rn+1].color;Kn+=de(Math.round((1-ki)*Ss[0]+ki*Ki[0]).toString(16))+de(Math.round((1-ki)*Ss[1]+ki*Ki[1]).toString(16))+de(Math.round((1-ki)*Ss[2]+ki*Ki[2]).toString(16))}return Kn.trim()})(M.colors,le),Oe=[];Oe.push({key:"FunctionType",value:"0"}),Oe.push({key:"Domain",value:"[0.0 1.0]"}),Oe.push({key:"Size",value:"["+le+"]"}),Oe.push({key:"BitsPerSample",value:"8"}),Oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xa({data:Ee,additionalKeyValues:Oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),be("endobj"),M.objectNumber=Ir(),be("<< /ShadingType "+M.type),be("/ColorSpace /DeviceRGB");var Ge="/Coords ["+H(parseFloat(M.coords[0]))+" "+H(parseFloat(M.coords[1]))+" ";M.type===2?Ge+=H(parseFloat(M.coords[2]))+" "+H(parseFloat(M.coords[3])):Ge+=H(parseFloat(M.coords[2]))+" "+H(parseFloat(M.coords[3]))+" "+H(parseFloat(M.coords[4]))+" "+H(parseFloat(M.coords[5])),be(Ge+="]"),M.matrix&&be("/Matrix ["+M.matrix.toString()+"]"),be("/Function "+je+" 0 R"),be("/Extend [true true]"),be(">>"),be("endobj")},Ks=function(M,le){var je=gt(),Ee=Ir();le.push({resourcesOid:je,objectOid:Ee}),M.objectNumber=Ee;var Oe=[];Oe.push({key:"Type",value:"/Pattern"}),Oe.push({key:"PatternType",value:"1"}),Oe.push({key:"PaintType",value:"1"}),Oe.push({key:"TilingType",value:"1"}),Oe.push({key:"BBox",value:"["+M.boundingBox.map(H).join(" ")+"]"}),Oe.push({key:"XStep",value:H(M.xStep)}),Oe.push({key:"YStep",value:H(M.yStep)}),Oe.push({key:"Resources",value:je+" 0 R"}),M.matrix&&Oe.push({key:"Matrix",value:"["+M.matrix.toString()+"]"}),Xa({data:M.stream,additionalKeyValues:Oe,objectId:M.objectNumber}),be("endobj")},po=function(M){for(var le in M.objectNumber=Ir(),be("<<"),M)switch(le){case"opacity":be("/ca "+Y(M[le]));break;case"stroke-opacity":be("/CA "+Y(M[le]))}be(">>"),be("endobj")},go=function(M){bi(M.resourcesOid,!0),be("<<"),be("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var le in be("/Font <<"),Wt)Wt.hasOwnProperty(le)&&(g===!1||g===!0&&j.hasOwnProperty(le))&&be("/"+le+" "+Wt[le].objectNumber+" 0 R");be(">>")})(),(function(){if(Object.keys(Ot).length>0){for(var le in be("/Shading <<"),Ot)Ot.hasOwnProperty(le)&&Ot[le]instanceof Ah&&Ot[le].objectNumber>=0&&be("/"+le+" "+Ot[le].objectNumber+" 0 R");Rr.publish("putShadingPatternDict"),be(">>")}})(),(function(le){if(Object.keys(Ot).length>0){for(var je in be("/Pattern <<"),Ot)Ot.hasOwnProperty(je)&&Ot[je]instanceof v.TilingPattern&&Ot[je].objectNumber>=0&&Ot[je].objectNumber<le&&be("/"+je+" "+Ot[je].objectNumber+" 0 R");Rr.publish("putTilingPatternDict"),be(">>")}})(M.objectOid),(function(){if(Object.keys(Qt).length>0){var le;for(le in be("/ExtGState <<"),Qt)Qt.hasOwnProperty(le)&&Qt[le].objectNumber>=0&&be("/"+le+" "+Qt[le].objectNumber+" 0 R");Rr.publish("putGStateDict"),be(">>")}})(),(function(){for(var le in be("/XObject <<"),ia)ia.hasOwnProperty(le)&&ia[le].objectNumber>=0&&be("/"+le+" "+ia[le].objectNumber+" 0 R");Rr.publish("putXobjectDict"),be(">>")})(),be(">>"),be("endobj")},Vn=function(M){Xt[M.fontName]=Xt[M.fontName]||{},Xt[M.fontName][M.fontStyle]=M.id},jd=function(M,le,je,Ee,Oe){var Ge={id:"F"+(Object.keys(Wt).length+1).toString(10),postScriptName:M,fontName:le,fontStyle:je,encoding:Ee,isStandardFont:Oe||!1,metadata:{}};return Rr.publish("addFont",{font:Ge,instance:this}),Wt[Ge.id]=Ge,Vn(Ge),Ge.id},Ja=v.__private__.pdfEscape=v.pdfEscape=function(M,le){return(function(je,Ee){var Oe,Ge,at,jt,Nt,Yt,ar,Dr,On;if(at=(Ee=Ee||{}).sourceEncoding||"Unicode",Nt=Ee.outputEncoding,(Ee.autoencode||Nt)&&Wt[Tt].metadata&&Wt[Tt].metadata[at]&&Wt[Tt].metadata[at].encoding&&(jt=Wt[Tt].metadata[at].encoding,!Nt&&Wt[Tt].encoding&&(Nt=Wt[Tt].encoding),!Nt&&jt.codePages&&(Nt=jt.codePages[0]),typeof Nt=="string"&&(Nt=jt[Nt]),Nt)){for(ar=!1,Yt=[],Oe=0,Ge=je.length;Oe<Ge;Oe++)(Dr=Nt[je.charCodeAt(Oe)])?Yt.push(String.fromCharCode(Dr)):Yt.push(je[Oe]),Yt[Oe].charCodeAt(0)>>8&&(ar=!0);je=Yt.join("")}for(Oe=je.length;ar===void 0&&Oe!==0;)je.charCodeAt(Oe-1)>>8&&(ar=!0),Oe--;if(!ar)return je;for(Yt=Ee.noBOM?[]:[254,255],Oe=0,Ge=je.length;Oe<Ge;Oe++){if((On=(Dr=je.charCodeAt(Oe))>>8)>>8)throw new Error("Character at position "+Oe+" of string '"+je+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yt.push(On),Yt.push(Dr-(On<<8))}return String.fromCharCode.apply(void 0,Yt)})(M,le).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gs=v.__private__.beginPage=function(M){Ie[++cr]=[],It[cr]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(M[0]),topRightY:Number(M[1])}},Mc(cr),ht(Ie[ne])},Qs=function(M,le){var je,Ee,Oe;switch(n=le||n,typeof M=="string"&&(je=_(M.toLowerCase()),Array.isArray(je)&&(Ee=je[0],Oe=je[1])),Array.isArray(M)&&(Ee=M[0]*nr,Oe=M[1]*nr),isNaN(Ee)&&(Ee=a[0],Oe=a[1]),(Ee>14400||Oe>14400)&&(Rn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),Oe=Math.min(14400,Oe)),a=[Ee,Oe],n.substr(0,1)){case"l":Oe>Ee&&(a=[Oe,Ee]);break;case"p":Ee>Oe&&(a=[Oe,Ee])}Gs(a),dt(Yo),be(va),Bc!==0&&be(Bc+" J"),wi!==0&&be(wi+" j"),Rr.publish("addPage",{pageNumber:cr})},Ko=function(M){M>0&&M<=cr&&(Ie.splice(M,1),It.splice(M,1),cr--,ne>cr&&(ne=cr),this.setPage(ne))},Mc=function(M){M>0&&M<=cr&&(ne=M)},Lc=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ie.length-1},wl=function(M,le,je){var Ee,Oe=void 0;return je=je||{},M=M!==void 0?M:Wt[Tt].fontName,le=le!==void 0?le:Wt[Tt].fontStyle,Ee=M.toLowerCase(),Xt[Ee]!==void 0&&Xt[Ee][le]!==void 0?Oe=Xt[Ee][le]:Xt[M]!==void 0&&Xt[M][le]!==void 0?Oe=Xt[M][le]:je.disableWarning===!1&&Rn.warn("Unable to look up font label for font '"+M+"', '"+le+"'. Refer to getFontList() for available fonts."),Oe||je.noFallback||(Oe=Xt.times[le])==null&&(Oe=Xt.times.normal),Oe},ir=v.__private__.putInfo=function(){var M=Ir(),le=function(Ee){return Ee};for(var je in p!==null&&(le=Bn.encryptor(M,0)),be("<<"),be("/Producer ("+Ja(le("jsPDF "+Ut.version))+")"),dr)dr.hasOwnProperty(je)&&dr[je]&&be("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+Ja(le(dr[je]))+")");be("/CreationDate ("+Ja(le(Ne))+")"),be(">>"),be("endobj")},Hr=v.__private__.putCatalog=function(M){var le=(M=M||{}).rootDictionaryObjId||aa;switch(Ir(),be("<<"),be("/Type /Catalog"),be("/Pages "+le+" 0 R"),qt||(qt="fullwidth"),qt){case"fullwidth":be("/OpenAction [3 0 R /FitH null]");break;case"fullheight":be("/OpenAction [3 0 R /FitV null]");break;case"fullpage":be("/OpenAction [3 0 R /Fit]");break;case"original":be("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+qt;je.substr(je.length-1)==="%"&&(qt=parseInt(qt)/100),typeof qt=="number"&&be("/OpenAction [3 0 R /XYZ null null "+Y(qt)+"]")}switch(Nr||(Nr="continuous"),Nr){case"continuous":be("/PageLayout /OneColumn");break;case"single":be("/PageLayout /SinglePage");break;case"two":case"twoleft":be("/PageLayout /TwoColumnLeft");break;case"tworight":be("/PageLayout /TwoColumnRight")}Bt&&be("/PageMode /"+Bt),Rr.publish("putCatalog"),be(">>"),be("endobj")},La=v.__private__.putTrailer=function(){be("trailer"),be("<<"),be("/Size "+(Z+1)),be("/Root "+Z+" 0 R"),be("/Info "+(Z-1)+" 0 R"),p!==null&&be("/Encrypt "+Bn.oid+" 0 R"),be("/ID [ <"+z+"> <"+z+"> ]"),be(">>")},Cr=v.__private__.putHeader=function(){be("%PDF-"+b),be("%")},yo=v.__private__.putXRef=function(){var M="0000000000";be("xref"),be("0 "+(Z+1)),be("0000000000 65535 f ");for(var le=1;le<=Z;le++)typeof ge[le]=="function"?be((M+ge[le]()).slice(-10)+" 00000 n "):ge[le]!==void 0?be((M+ge[le]).slice(-10)+" 00000 n "):be("0000000000 00000 n ")},bs=v.__private__.buildDocument=function(){var M;Z=0,X=0,oe=[],ge=[],_e=[],aa=gt(),tn=gt(),ht(oe),Rr.publish("buildDocument"),Cr(),$s(),(function(){Rr.publish("putAdditionalObjects");for(var je=0;je<_e.length;je++){var Ee=_e[je];bi(Ee.objId,!0),be(Ee.content),be("endobj")}Rr.publish("postPutAdditionalObjects")})(),M=[],(function(){for(var je in Wt)Wt.hasOwnProperty(je)&&(g===!1||g===!0&&j.hasOwnProperty(je))&&Vs(Wt[je])})(),(function(){var je;for(je in Qt)Qt.hasOwnProperty(je)&&po(Qt[je])})(),(function(){for(var je in ia)ia.hasOwnProperty(je)&&jl(ia[je])})(),(function(je){var Ee;for(Ee in Ot)Ot.hasOwnProperty(Ee)&&(Ot[Ee]instanceof Ah?xs(Ot[Ee]):Ot[Ee]instanceof am&&Ks(Ot[Ee],je))})(M),Rr.publish("putResources"),M.forEach(go),go({resourcesOid:tn,objectOid:Number.MAX_SAFE_INTEGER}),Rr.publish("postPutResources"),p!==null&&(Bn.oid=Ir(),be("<<"),be("/Filter /Standard"),be("/V "+Bn.v),be("/R "+Bn.r),be("/U <"+Bn.toHexString(Bn.U)+">"),be("/O <"+Bn.toHexString(Bn.O)+">"),be("/P "+Bn.P),be(">>"),be("endobj")),ir(),Hr();var le=X;return yo(),La(),be("startxref"),be(""+le),be("%%EOF"),ht(Ie[ne]),oe.join(`
`)},er=v.__private__.getBlob=function(M){return new Blob([Gt(M)],{type:"application/pdf"})},vn=v.output=v.__private__.output=(Za=function(M,le){switch(typeof(le=le||{})=="string"?le={filename:le}:le.filename=le.filename||"generated.pdf",M){case void 0:return bs();case"save":v.save(le.filename);break;case"arraybuffer":return Gt(bs());case"blob":return er(bs());case"bloburi":case"bloburl":if(or.URL!==void 0&&typeof or.URL.createObjectURL=="function")return or.URL&&or.URL.createObjectURL(er(bs()))||void 0;Rn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",Ee=bs();try{je=m6(Ee)}catch{je=m6(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+le.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(or)==="[object Window]"){var Oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';le.pdfObjectUrl&&(Oe=le.pdfObjectUrl,Ge="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Oe+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(le)+");<\/script></body></html>",jt=or.open();return jt!==null&&jt.document.write(at),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(or)==="[object Window]"){var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(le.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+le.filename+'" width="500px" height="400px" /></body></html>',Yt=or.open();if(Yt!==null){Yt.document.write(Nt);var ar=this;Yt.document.documentElement.querySelector("#pdfViewer").onload=function(){Yt.document.title=le.filename,Yt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ar.output("bloburl"))}}return Yt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(or)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",le)+'"></iframe></body></html>',On=or.open();if(On!==null&&(On.document.write(Dr),On.document.title=le.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return or.document.location.href=this.output("datauristring",le);default:return null}},Za.foo=function(){try{return Za.apply(this,arguments)}catch(je){var M=je.stack||"";~M.indexOf(" at ")&&(M=M.split(" at ")[1]);var le="Error in function "+M.split(`
`)[0].split("<")[0]+": "+je.message;if(!or.console)throw new Error(le);or.console.error(le,je),or.alert&&alert(le)}},Za.foo.bar=Za,Za.foo),Vi=function(M){return Array.isArray(Ws)===!0&&Ws.indexOf(M)>-1};switch(i){case"pt":nr=1;break;case"mm":nr=72/25.4;break;case"cm":nr=72/2.54;break;case"in":nr=72;break;case"px":nr=Vi("px_scaling")==1?.75:96/72;break;case"pc":case"em":nr=12;break;case"ex":nr=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);nr=i}var Bn=null;Q(),q();var Wr=v.__private__.getPageInfo=v.getPageInfo=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[M].objId,pageNumber:M,pageContext:It[M]}},Rc=v.__private__.getPageInfoByObjId=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var le in It)if(It[le].objId===M)break;return Wr(le)},ec=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:It[ne].objId,pageNumber:ne,pageContext:It[ne]}};v.addPage=function(){return Qs.apply(this,arguments),this},v.setPage=function(){return Mc.apply(this,arguments),ht.call(this,Ie[ne]),this},v.insertPage=function(M){return this.addPage(),this.movePage(ne,M),this},v.movePage=function(M,le){var je,Ee;if(M>le){je=Ie[M],Ee=It[M];for(var Oe=M;Oe>le;Oe--)Ie[Oe]=Ie[Oe-1],It[Oe]=It[Oe-1];Ie[le]=je,It[le]=Ee,this.setPage(le)}else if(M<le){je=Ie[M],Ee=It[M];for(var Ge=M;Ge<le;Ge++)Ie[Ge]=Ie[Ge+1],It[Ge]=It[Ge+1];Ie[le]=je,It[le]=Ee,this.setPage(le)}return this},v.deletePage=function(){return Ko.apply(this,arguments),this},v.__private__.text=v.text=function(M,le,je,Ee,Oe){var Ge,at,jt,Nt,Yt,ar,Dr,On,Kn,rn=(Ee=Ee||{}).scope||this;if(typeof M=="number"&&typeof le=="number"&&(typeof je=="string"||Array.isArray(je))){var Ni=je;je=le,le=M,M=Ni}if(arguments[3]instanceof zt==0?(jt=arguments[4],Nt=arguments[5],_n(Dr=arguments[3])==="object"&&Dr!==null||(typeof jt=="string"&&(Nt=jt,jt=null),typeof Dr=="string"&&(Nt=Dr,Dr=null),typeof Dr=="number"&&(jt=Dr,Dr=null),Ee={flags:Dr,angle:jt,align:Nt})):(I("The transform parameter of text() with a Matrix value"),Kn=Oe),isNaN(le)||isNaN(je)||M==null)throw new Error("Invalid arguments passed to jsPDF.text");if(M.length===0)return rn;var Gn,ki="",Ss=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:vo,Ki=rn.internal.scaleFactor;function Jo($r){return $r=$r.split("	").join(Array(Ee.TabLen||9).join(" ")),Ja($r,Dr)}function el($r){for(var Or,gn=$r.concat(),qn=[],Ao=gn.length;Ao--;)typeof(Or=gn.shift())=="string"?qn.push(Or):Array.isArray($r)&&(Or.length===1||Or[1]===void 0&&Or[2]===void 0)?qn.push(Or[0]):qn.push([Or[0],Or[1],Or[2]]);return qn}function Gi($r,Or){var gn;if(typeof $r=="string")gn=Or($r)[0];else if(Array.isArray($r)){for(var qn,Ao,oi=$r.concat(),Eo=[],_d=oi.length;_d--;)typeof(qn=oi.shift())=="string"?Eo.push(Or(qn)[0]):Array.isArray(qn)&&typeof qn[0]=="string"&&(Ao=Or(qn[0],qn[1],qn[2]),Eo.push([Ao[0],Ao[1],Ao[2]]));gn=Eo}return gn}var eo=!1,Ns=!0;if(typeof M=="string")eo=!0;else if(Array.isArray(M)){var ac=M.concat();at=[];for(var to,ai=ac.length;ai--;)(typeof(to=ac.shift())!="string"||Array.isArray(to)&&typeof to[0]!="string")&&(Ns=!1);eo=Ns}if(eo===!1)throw new Error('Type of text must be string or Array. "'+M+'" is not recognized.');typeof M=="string"&&(M=M.match(/[\r?\n]/)?M.split(/\r\n|\r|\n/g):[M]);var Al=st/rn.internal.scaleFactor,El=Al*(Ss-1);switch(Ee.baseline){case"bottom":je-=El;break;case"top":je+=Al-El;break;case"hanging":je+=Al-2*El;break;case"middle":je+=Al/2-El}if((ar=Ee.maxWidth||0)>0&&(typeof M=="string"?M=rn.splitTextToSize(M,ar):Object.prototype.toString.call(M)==="[object Array]"&&(M=M.reduce(function($r,Or){return $r.concat(rn.splitTextToSize(Or,ar))},[]))),Ge={text:M,x:le,y:je,options:Ee,mutex:{pdfEscape:Ja,activeFontKey:Tt,fonts:Wt,activeFontSize:st}},Rr.publish("preProcessText",Ge),M=Ge.text,jt=(Ee=Ge.options).angle,Kn instanceof zt==0&&jt&&typeof jt=="number"){jt*=Math.PI/180,Ee.rotationDirection===0&&(jt=-jt),W===D&&(jt=-jt);var sc=Math.cos(jt),jo=Math.sin(jt);Kn=new zt(sc,jo,-jo,sc,0,0)}else jt&&jt instanceof zt&&(Kn=jt);W!==D||Kn||(Kn=mo),(Yt=Ee.charSpace||rs)!==void 0&&(ki+=H(ae(Yt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=Ee.horizontalScale)!==void 0&&(ki+=H(100*On)+` Tz
`),Ee.lang;var xn=-1,Ia=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,Fc=rn.internal.getCurrentPageInfo().pageContext;switch(Ia){case 0:case!1:case"fill":xn=0;break;case 1:case!0:case"stroke":xn=1;break;case 2:case"fillThenStroke":xn=2;break;case 3:case"invisible":xn=3;break;case 4:case"fillAndAddForClipping":xn=4;break;case 5:case"strokeAndAddPathForClipping":xn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xn=6;break;case 7:case"addToPathForClipping":xn=7}var is=Fc.usedRenderingMode!==void 0?Fc.usedRenderingMode:-1;xn!==-1?ki+=xn+` Tr
`:is!==-1&&(ki+=`0 Tr
`),xn!==-1&&(Fc.usedRenderingMode=xn),Nt=Ee.align||"left";var as,oa=st*Ss,tl=rn.internal.pageSize.getWidth(),rl=Wt[Tt];Yt=Ee.charSpace||rs,ar=Ee.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var _s=[],ro=function($r){return rn.getStringUnitWidth($r,{font:rl,charSpace:Yt,fontSize:st,doKerning:!1})*st/Ki};if(Object.prototype.toString.call(M)==="[object Array]"){var za;at=el(M),Nt!=="left"&&(as=at.map(ro));var Fn,ss=0;if(Nt==="right"){le-=as[0],M=[],ai=at.length;for(var wo=0;wo<ai;wo++)wo===0?(Fn=ya(le),za=ji(je)):(Fn=ae(ss-as[wo]),za=-oa),M.push([at[wo],Fn,za]),ss=as[wo]}else if(Nt==="center"){le-=as[0]/2,M=[],ai=at.length;for(var no=0;no<ai;no++)no===0?(Fn=ya(le),za=ji(je)):(Fn=ae((ss-as[no])/2),za=-oa),M.push([at[no],Fn,za]),ss=as[no]}else if(Nt==="left"){M=[],ai=at.length;for(var qc=0;qc<ai;qc++)M.push(at[qc])}else if(Nt==="justify"&&rl.encoding==="Identity-H"){M=[],ai=at.length,ar=ar!==0?ar:tl;for(var Ba=0,Qn=0;Qn<ai;Qn++)if(za=Qn===0?ji(je):-oa,Fn=Qn===0?ya(le):Ba,Qn<ai-1){var nl=ae((ar-as[Qn])/(at[Qn].split(" ").length-1)),So=at[Qn].split(" ");M.push([So[0]+" ",Fn,za]),Ba=0;for(var Di=1;Di<So.length;Di++){var si=(ro(So[Di-1]+" "+So[Di])-ro(So[Di]))*Ki+nl;Di==So.length-1?M.push([So[Di],si,0]):M.push([So[Di]+" ",si,0]),Ba-=si}}else M.push([at[Qn],Fn,za]);M.push(["",Ba,0])}else{if(Nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(M=[],ai=at.length,ar=ar!==0?ar:tl,Qn=0;Qn<ai;Qn++){za=Qn===0?ji(je):-oa,Fn=Qn===0?ya(le):0;var No=at[Qn].split(" ").length-1,Tl=No>0?(ar-as[Qn])/No:0;Qn<ai-1?_s.push(H(ae(Tl))):_s.push(0),M.push([at[Qn],Fn,za])}}}(typeof Ee.R2L=="boolean"?Ee.R2L:Ht)===!0&&(M=Gi(M,function($r,Or,gn){return[$r.split("").reverse().join(""),Or,gn]})),Ge={text:M,x:le,y:je,options:Ee,mutex:{pdfEscape:Ja,activeFontKey:Tt,fonts:Wt,activeFontSize:st}},Rr.publish("postProcessText",Ge),M=Ge.text,Gn=Ge.mutex.isHex||!1;var il=Wt[Tt].encoding;il!=="WinAnsiEncoding"&&il!=="StandardEncoding"||(M=Gi(M,function($r,Or,gn){return[Jo($r),Or,gn]})),at=el(M),M=[];for(var io,Cs,xa,_o=Array.isArray(at[0])?1:0,ba="",Co=function($r,Or,gn){var qn="";return gn instanceof zt?(gn=typeof Ee.angle=="number"?$o(gn,new zt(1,0,0,1,$r,Or)):$o(new zt(1,0,0,1,$r,Or),gn),W===D&&(gn=$o(new zt(1,0,0,-1,0,0),gn)),qn=gn.join(" ")+` Tm
`):qn=H($r)+" "+H(Or)+` Td
`,qn},la=0;la<at.length;la++){switch(ba="",_o){case 1:xa=(Gn?"<":"(")+at[la][0]+(Gn?">":")"),io=parseFloat(at[la][1]),Cs=parseFloat(at[la][2]);break;case 0:xa=(Gn?"<":"(")+at[la]+(Gn?">":")"),io=ya(le),Cs=ji(je)}_s!==void 0&&_s[la]!==void 0&&(ba=_s[la]+` Tw
`),la===0?M.push(ba+Co(io,Cs,Kn)+xa):_o===0?M.push(ba+xa):_o===1&&M.push(ba+Co(io,Cs,Kn)+xa)}M=_o===0?M.join(` Tj
T* `):M.join(` Tj
`),M+=` Tj
`;var ja=`BT
/`;return ja+=Tt+" "+st+` Tf
`,ja+=H(st*Ss)+` TL
`,ja+=pn+`
`,ja+=ki,ja+=M,be(ja+="ET"),j[Tt]=!0,rn};var Ys=v.__private__.clip=v.clip=function(M){return be(M==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Ys("evenodd")},v.__private__.discardPath=v.discardPath=function(){return be("n"),this};var kr=v.__private__.isValidStyle=function(M){var le=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(M)!==-1&&(le=!0),le};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(M){return kr(M)&&(f=M),this};var Zs=v.__private__.getStyle=v.getStyle=function(M){var le=f;switch(M){case"D":case"S":le="S";break;case"F":le="f";break;case"FD":case"DF":le="B";break;case"f":case"f*":case"B":case"B*":le=M}return le},Go=v.close=function(){return be("h"),this};v.stroke=function(){return be("S"),this},v.fill=function(M){return ga("f",M),this},v.fillEvenOdd=function(M){return ga("f*",M),this},v.fillStroke=function(M){return ga("B",M),this},v.fillStrokeEvenOdd=function(M){return ga("B*",M),this};var ga=function(M,le){_n(le)==="object"?Ic(le,M):be(M)},Qo=function(M){M===null||W===D&&M===void 0||(M=Zs(M),be(M))};function Sl(M,le,je,Ee,Oe){var Ge=new am(le||this.boundingBox,je||this.xStep,Ee||this.yStep,this.gState,Oe||this.matrix);Ge.stream=this.stream;var at=M+"$$"+this.cloneIndex+++"$$";return Ya(at,Ge),Ge}var Ic=function(M,le){var je=mn[M.key],Ee=Ot[je];if(Ee instanceof Ah)be("q"),be(tc(le)),Ee.gState&&v.setGState(Ee.gState),be(M.matrix.toString()+" cm"),be("/"+je+" sh"),be("Q");else if(Ee instanceof am){var Oe=new zt(1,0,0,-1,0,Xo());M.matrix&&(Oe=Oe.multiply(M.matrix||mo),je=Sl.call(Ee,M.key,M.boundingBox,M.xStep,M.yStep,Oe).id),be("q"),be("/Pattern cs"),be("/"+je+" scn"),Ee.gState&&v.setGState(Ee.gState),be(le),be("Q")}},tc=function(M){switch(M){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Nl=v.moveTo=function(M,le){return be(H(ae(M))+" "+H(se(le))+" m"),this},zc=v.lineTo=function(M,le){return be(H(ae(M))+" "+H(se(le))+" l"),this},sa=v.curveTo=function(M,le,je,Ee,Oe,Ge){return be([H(ae(M)),H(se(le)),H(ae(je)),H(se(Ee)),H(ae(Oe)),H(se(Ge)),"c"].join(" ")),this};v.__private__.line=v.line=function(M,le,je,Ee,Oe){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Ee)||!kr(Oe))throw new Error("Invalid arguments passed to jsPDF.line");return W===E?this.lines([[je-M,Ee-le]],M,le,[1,1],Oe||"S"):this.lines([[je-M,Ee-le]],M,le,[1,1]).stroke()},v.__private__.lines=v.lines=function(M,le,je,Ee,Oe,Ge){var at,jt,Nt,Yt,ar,Dr,On,Kn,rn,Ni,Gn,ki;if(typeof M=="number"&&(ki=je,je=le,le=M,M=ki),Ee=Ee||[1,1],Ge=Ge||!1,isNaN(le)||isNaN(je)||!Array.isArray(M)||!Array.isArray(Ee)||!kr(Oe)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Nl(le,je),at=Ee[0],jt=Ee[1],Yt=M.length,Ni=le,Gn=je,Nt=0;Nt<Yt;Nt++)(ar=M[Nt]).length===2?(Ni=ar[0]*at+Ni,Gn=ar[1]*jt+Gn,zc(Ni,Gn)):(Dr=ar[0]*at+Ni,On=ar[1]*jt+Gn,Kn=ar[2]*at+Ni,rn=ar[3]*jt+Gn,Ni=ar[4]*at+Ni,Gn=ar[5]*jt+Gn,sa(Dr,On,Kn,rn,Ni,Gn));return Ge&&Go(),Qo(Oe),this},v.path=function(M){for(var le=0;le<M.length;le++){var je=M[le],Ee=je.c;switch(je.op){case"m":Nl(Ee[0],Ee[1]);break;case"l":zc(Ee[0],Ee[1]);break;case"c":sa.apply(this,Ee);break;case"h":Go()}}return this},v.__private__.rect=v.rect=function(M,le,je,Ee,Oe){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Ee)||!kr(Oe))throw new Error("Invalid arguments passed to jsPDF.rect");return W===E&&(Ee=-Ee),be([H(ae(M)),H(se(le)),H(ae(je)),H(ae(Ee)),"re"].join(" ")),Qo(Oe),this},v.__private__.triangle=v.triangle=function(M,le,je,Ee,Oe,Ge,at){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Ee)||isNaN(Oe)||isNaN(Ge)||!kr(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-M,Ee-le],[Oe-je,Ge-Ee],[M-Oe,le-Ge]],M,le,[1,1],at,!0),this},v.__private__.roundedRect=v.roundedRect=function(M,le,je,Ee,Oe,Ge,at){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Ee)||isNaN(Oe)||isNaN(Ge)||!kr(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return Oe=Math.min(Oe,.5*je),Ge=Math.min(Ge,.5*Ee),this.lines([[je-2*Oe,0],[Oe*jt,0,Oe,Ge-Ge*jt,Oe,Ge],[0,Ee-2*Ge],[0,Ge*jt,-Oe*jt,Ge,-Oe,Ge],[2*Oe-je,0],[-Oe*jt,0,-Oe,-Ge*jt,-Oe,-Ge],[0,2*Ge-Ee],[0,-Ge*jt,Oe*jt,-Ge,Oe,-Ge]],M+Oe,le,[1,1],at,!0),this},v.__private__.ellipse=v.ellipse=function(M,le,je,Ee,Oe){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Ee)||!kr(Oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*je,at=4/3*(Math.SQRT2-1)*Ee;return Nl(M+je,le),sa(M+je,le-at,M+Ge,le-Ee,M,le-Ee),sa(M-Ge,le-Ee,M-je,le-at,M-je,le),sa(M-je,le+at,M-Ge,le+Ee,M,le+Ee),sa(M+Ge,le+Ee,M+je,le+at,M+je,le),Qo(Oe),this},v.__private__.circle=v.circle=function(M,le,je,Ee){if(isNaN(M)||isNaN(le)||isNaN(je)||!kr(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(M,le,je,je,Ee)},v.setFont=function(M,le,je){return je&&(le=F(le,je)),Tt=wl(M,le,{disableWarning:!1}),this};var Ra=v.__private__.getFont=v.getFont=function(){return Wt[wl.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var M,le,je={};for(M in Xt)if(Xt.hasOwnProperty(M))for(le in je[M]=[],Xt[M])Xt[M].hasOwnProperty(le)&&je[M].push(le);return je},v.addFont=function(M,le,je,Ee,Oe){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Oe=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(je=F(je,Ee)),jd.call(this,M,le,je,Oe=Oe||"Identity-H")};var vo,Yo=e.lineWidth||.200025,_l=v.__private__.getLineWidth=v.getLineWidth=function(){return Yo},dt=v.__private__.setLineWidth=v.setLineWidth=function(M){return Yo=M,be(H(ae(M))+" w"),this};v.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(M,le){if(M=M||[],le=le||0,isNaN(le)||!Array.isArray(M))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return M=M.map(function(je){return H(ae(je))}).join(" "),le=H(ae(le)),be("["+M+"] "+le+" d"),this};var es=v.__private__.getLineHeight=v.getLineHeight=function(){return st*vo};v.__private__.getLineHeight=v.getLineHeight=function(){return st*vo};var Kr=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(M){return typeof(M=M||1.15)=="number"&&(vo=M),this},wd=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return vo};Kr(e.lineHeight);var ya=v.__private__.getHorizontalCoordinate=function(M){return ae(M)},ji=v.__private__.getVerticalCoordinate=function(M){return W===D?M:It[ne].mediaBox.topRightY-It[ne].mediaBox.bottomLeftY-ae(M)},rc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(M){return H(ya(M))},ts=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(M){return H(ji(M))},va=e.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return yn(va)},v.__private__.setStrokeColor=v.setDrawColor=function(M,le,je,Ee){return va=$i({ch1:M,ch2:le,ch3:je,ch4:Ee,pdfColorType:"draw",precision:2}),be(va),this};var Xs=e.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return yn(Xs)},v.__private__.setFillColor=v.setFillColor=function(M,le,je,Ee){return Xs=$i({ch1:M,ch2:le,ch3:je,ch4:Ee,pdfColorType:"fill",precision:2}),be(Xs),this};var pn=e.textColor||"0 g",xo=v.__private__.getTextColor=v.getTextColor=function(){return yn(pn)};v.__private__.setTextColor=v.setTextColor=function(M,le,je,Ee){return pn=$i({ch1:M,ch2:le,ch3:je,ch4:Ee,pdfColorType:"text",precision:3}),this};var rs=e.charSpace,nc=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(rs||0)};v.__private__.setCharSpace=v.setCharSpace=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return rs=M,this};var Bc=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(M){var le=v.CapJoinStyles[M];if(le===void 0)throw new Error("Line cap style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bc=le,be(le+" J"),this};var wi=0;v.__private__.setLineJoin=v.setLineJoin=function(M){var le=v.CapJoinStyles[M];if(le===void 0)throw new Error("Line join style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wi=le,be(le+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(M){if(M=M||0,isNaN(M))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return be(H(ae(M))+" M"),this},v.GState=G0,v.setGState=function(M){(M=typeof M=="string"?Qt[Jt[M]]:js(null,M)).equals(en)||(be("/"+M.id+" gs"),en=M)};var js=function(M,le){if(!M||!Jt[M]){var je=!1;for(var Ee in Qt)if(Qt.hasOwnProperty(Ee)&&Qt[Ee].equals(le)){je=!0;break}if(je)le=Qt[Ee];else{var Oe="GS"+(Object.keys(Qt).length+1).toString(10);Qt[Oe]=le,le.id=Oe}return M&&(Jt[M]=le.id),Rr.publish("addGState",le),le}};v.addGState=function(M,le){return js(M,le),this},v.saveGraphicsState=function(){return be("q"),_r.push({key:Tt,size:st,color:pn}),this},v.restoreGraphicsState=function(){be("Q");var M=_r.pop();return Tt=M.key,st=M.size,pn=M.color,en=null,this},v.setCurrentTransformationMatrix=function(M){return be(M.toString()+" cm"),this},v.comment=function(M){return be("#"+M),this};var ws=function(M,le){var je=M||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(Ge){isNaN(Ge)||(je=parseFloat(Ge))}});var Ee=le||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(Ge){isNaN(Ge)||(Ee=parseFloat(Ge))}});var Oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Oe},set:function(Ge){Oe=Ge.toString()}}),this},bo=function(M,le,je,Ee){ws.call(this,M,le),this.type="rect";var Oe=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Oe},set:function(at){isNaN(at)||(Oe=parseFloat(at))}});var Ge=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(at){isNaN(at)||(Ge=parseFloat(at))}}),this},mr=function(){this.page=cr,this.currentPage=ne,this.pages=Ie.slice(0),this.pagesContext=It.slice(0),this.x=kt,this.y=$n,this.matrix=xr,this.width=ns(ne),this.height=Sd(ne),this.outputDestination=ut,this.id="",this.objectNumber=-1};mr.prototype.restore=function(){cr=this.page,ne=this.currentPage,It=this.pagesContext,Ie=this.pages,kt=this.x,$n=this.y,xr=this.matrix,Cl(ne,this.width),Js(ne,this.height),ut=this.outputDestination};var ic=function(M,le,je,Ee,Oe){vs.push(new mr),cr=ne=0,Ie=[],kt=M,$n=le,xr=Oe,Gs([je,Ee])};for(var Si in v.beginFormObject=function(M,le,je,Ee,Oe){return ic(M,le,je,Ee,Oe),this},v.endFormObject=function(M){return(function(le){if(fo[le])vs.pop().restore();else{var je=new mr,Ee="Xo"+(Object.keys(ia).length+1).toString(10);je.id=Ee,fo[le]=Ee,ia[Ee]=je,Rr.publish("addFormObject",je),vs.pop().restore()}})(M),this},v.doFormObject=function(M,le){var je=ia[fo[M]];return be("q"),be(le.toString()+" cm"),be("/"+je.id+" Do"),be("Q"),this},v.getFormObject=function(M){var le=ia[fo[M]];return{x:le.x,y:le.y,width:le.width,height:le.height,matrix:le.matrix}},v.save=function(M,le){return M=M||"generated.pdf",(le=le||{}).returnPromise=le.returnPromise||!1,le.returnPromise===!1?(Nh(er(bs()),M),typeof Nh.unload=="function"&&or.setTimeout&&setTimeout(Nh.unload,911),this):new Promise(function(je,Ee){try{var Oe=Nh(er(bs()),M);typeof Nh.unload=="function"&&or.setTimeout&&setTimeout(Nh.unload,911),je(Oe)}catch(Ge){Ee(Ge.message)}})},Ut.API)Ut.API.hasOwnProperty(Si)&&(Si==="events"&&Ut.API.events.length?(function(M,le){var je,Ee,Oe;for(Oe=le.length-1;Oe!==-1;Oe--)je=le[Oe][0],Ee=le[Oe][1],M.subscribe.apply(M,[je].concat(typeof Ee=="function"?[Ee]:Ee))})(Rr,Ut.API.events):v[Si]=Ut.API[Si]);function ns(M){return It[M].mediaBox.topRightX-It[M].mediaBox.bottomLeftX}function Cl(M,le){It[M].mediaBox.topRightX=le+It[M].mediaBox.bottomLeftX}function Sd(M){return It[M].mediaBox.topRightY-It[M].mediaBox.bottomLeftY}function Js(M,le){It[M].mediaBox.topRightY=le+It[M].mediaBox.bottomLeftY}var Zo=v.getPageWidth=function(M){return ns(M=M||ne)/nr},Nd=v.setPageWidth=function(M,le){Cl(M,le*nr)},Xo=v.getPageHeight=function(M){return Sd(M=M||ne)/nr},bu=v.setPageHeight=function(M,le){Js(M,le*nr)};return v.internal={pdfEscape:Ja,getStyle:Zs,getFont:Ra,getFontSize:vt,getCharSpace:nc,getTextColor:xo,getLineHeight:es,getLineHeightFactor:wd,getLineWidth:_l,write:ct,getHorizontalCoordinate:ya,getVerticalCoordinate:ji,getCoordinateString:rc,getVerticalCoordinateString:ts,collections:{},newObject:Ir,newAdditionalObject:Vo,newObjectDeferred:gt,newObjectDeferredBegin:bi,getFilters:Pi,putStream:Xa,events:Rr,scaleFactor:nr,pageSize:{getWidth:function(){return Zo(ne)},setWidth:function(M){Nd(ne,M)},getHeight:function(){return Xo(ne)},setHeight:function(M){bu(ne,M)}},encryptionOptions:p,encryption:Bn,getEncryptor:function(M){return p!==null?Bn.encryptor(M,0):function(le){return le}},output:vn,getNumberOfPages:Lc,get pages(){return Ie},out:be,f2:Y,f3:G,getPageInfo:Wr,getPageInfoByObjId:Rc,getCurrentPageInfo:ec,getPDFVersion:w,Point:ws,Rectangle:bo,Matrix:zt,hasHotfix:Vi},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Zo(ne)},set:function(M){Nd(ne,M)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Xo(ne)},set:function(M){bu(ne,M)},enumerable:!0,configurable:!0}),(function(M){for(var le=0,je=Pt.length;le<je;le++){var Ee=jd.call(this,M[le][0],M[le][1],M[le][2],Pt[le][3],!0);g===!1&&(j[Ee]=!0);var Oe=M[le][0].split("-");Vn({id:Ee,fontName:Oe[0],fontStyle:Oe[1]||""})}Rr.publish("addFonts",{fonts:Wt,dictionary:Xt})}).call(v,Pt),Tt="F1",Qs(a,n),Rr.publish("initialized"),v}em.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},em.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},em.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},em.prototype.processOwnerPassword=function(e,t){return kw(Pw(t).substr(0,5),e)},em.prototype.encryptor=function(e,t){var n=Pw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return kw(n,i)}},G0.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||_n(e)!==_n(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return i===0},Ut.API={events:[]},Ut.version="4.1.0";var Fi=Ut.API,t_=1,mf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Q0=function(e){return e.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var n=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},fr=function(e){return e.toFixed(2)},$u=function(e){return e.toFixed(5)};Fi.__acroform__={};var Wo=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},v6=function(e){return e*t_},cd=function(e){var t=new A7,n=Et.internal.getHeight(e)||0,i=Et.internal.getWidth(e)||0;return t.BBox=[0,0,Number(fr(i)),Number(fr(n))],t},gme=Fi.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},yme=Fi.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},vme=Fi.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ta=Fi.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return vme(e,t-1)},ra=Fi.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return gme(e,t-1)},na=Fi.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yme(e,t-1)},xme=Fi.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,a=e[0],s=e[1],l=e[2],d=e[3],h={};return h.lowerLeft_X=n(a)||0,h.lowerLeft_Y=i(s+d)||0,h.upperRight_X=n(a+l)||0,h.upperRight_Y=i(s)||0,[Number(fr(h.lowerLeft_X)),Number(fr(h.lowerLeft_Y)),Number(fr(h.upperRight_X)),Number(fr(h.upperRight_Y))]},bme=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=Dw(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+fr(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=cd(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},Dw=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(Y){return Y.split(`
`)}):a.map(function(Y){return[Y]});var s=n,l=Et.internal.getHeight(e)||0;l=l<0?-l:l;var d=Et.internal.getWidth(e)||0;d=d<0?-d:d;var h=function(Y,G,ae){if(Y+1<a.length){var se=G+" "+a[Y+1][0];return mv(se,e,ae).width<=d-4}return!1};s++;e:for(;s>0;){t="",s--;var f,p,g=mv("3",e,s).height,j=e.multiline?l-s:(l-g)/2,v=j+=2,b=0,w=0,S=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+mv(t,e,s=12).width+", FieldWidth:"+d+`
`;break}for(var _="",E=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var W=!1;if(a[D].length!==1&&S!==a[D].length-1){if((g+2)*(E+2)+2>l)continue e;_+=a[D][S],W=!0,w=D,D--}else{_=(_+=a[D][S]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var K=parseInt(D),B=h(K,_,s),F=D>=a.length-1;if(B&&!F){_+=" ",S=0;continue}if(B||F){if(F)w=K;else if(e.multiline&&(g+2)*(E+2)+2>l)continue e}else{if(!e.multiline||(g+2)*(E+2)+2>l)continue e;w=K}}for(var H="",I=b;I<=w;I++){var R=a[I];if(e.multiline){if(I===w){H+=R[S]+" ",S=(S+1)%R.length;continue}if(I===b){H+=R[R.length-1]+" ";continue}}H+=R[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,p=mv(H,e,s).width,e.textAlign){case"right":f=d-p-2;break;case"center":f=(d-p)/2;break;default:f=2}t+=fr(f)+" "+fr(v)+` Td
`,t+="("+mf(H)+`) Tj
`,t+=-fr(f)+` 0 Td
`,v=-(s+2),p=0,b=W?w:w+1,E++,_=""}break}return i.text=t,i.fontSize=s,i},mv=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},jme={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wme=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Sme=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Dc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(jme)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");t_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new E7,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s.objId=void 0,s.hasAnnotation&&wme(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(i,a){var s=!i;for(var l in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var d=i[l],h=[],f=d.Rect;if(d.Rect&&(d.Rect=xme(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=Et.createDefaultAppearanceStream(d),_n(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=f,d.hasAppearanceStream&&!d.appearanceStreamContent){var p=bme(d);h.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(d.appearanceStreamContent){var g="";for(var j in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(j)){var v=d.appearanceStreamContent[j];if(g+="/"+j+" ",g+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var l in v)if(v.hasOwnProperty(l)){var b=v[l];typeof b=="function"&&(b=b.call(a,d)),g+="/"+l+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=v)=="function"&&(b=b.call(a,d)),g+="/"+l+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);g+=">>"}h.push({key:"AP",value:`<<
`+g+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:d.objId}),a.internal.out("endobj")}s&&(function(w,S){for(var _ in w)if(w.hasOwnProperty(_)){var E=_,D=w[_];S.internal.newObjectDeferredBegin(D.objId,!0),_n(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete w[E]}})(a.internal.acroformPlugin.xForms,a)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},C7=Fi.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(l){return l};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),_n(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)==="/"?a+="/"+Q0(e[s].substr(1)):(t!==void 0&&n&&(i=n.internal.getEncryptor(t)),a+="("+mf(i(e[s].toString()))+")")}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Aj=function(e,t,n){var i=function(a){return a};return t!==void 0&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+mf(i(e))+")"},hd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hd.prototype.toString=function(){return this.objId+" 0 R"},hd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},hd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var i=t[n],a=this[i];a&&(Array.isArray(a)?e.push({key:i,value:C7(a,this.objId,this.scope)}):a instanceof hd?(a.scope=this.scope,e.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:i,value:a}))}return e};var A7=function(){hd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Wo(A7,hd);var E7=function(){hd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+mf(n(e))+")"}},set:function(n){e=n}})};Wo(E7,hd);var Dc=function e(){hd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ta(t,3)},set:function(_){_?this.F=ra(t,3):this.F=na(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(_){i=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(_){i[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(_){i[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(_){i[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(_){i[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Y0)return;s="FieldObject"+e.FieldNum++}var _=function(E){return E};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+mf(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/t_:f},set:function(_){f=_}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Y0||this instanceof qh))return Aj(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=_}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof Va==0?Aj(j,this.objId,this.scope):j},set:function(_){_=_.toString(),j=this instanceof Va==0?_.substr(0,1)==="("?Gf(_.substr(1,_.length-2)):Gf(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Va==1?Gf(j.substr(1,j.length-1)):j},set:function(_){_=_.toString(),j=this instanceof Va==1?"/"+Q0(_):_}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Va==0?Aj(v,this.objId,this.scope):v},set:function(_){_=_.toString(),v=this instanceof Va==0?_.substr(0,1)==="("?Gf(_.substr(1,_.length-2)):Gf(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Va==1?Gf(v.substr(1,v.length-1)):v},set:function(_){_=_.toString(),v=this instanceof Va==1?"/"+Q0(_):_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(_){_=!!_,w=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(_){b=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,1)},set:function(_){_?this.Ff=ra(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,2)},set:function(_){_?this.Ff=ra(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,3)},set:function(_){_?this.Ff=ra(this.Ff,3):this.Ff=na(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');S=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(S){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};Wo(Dc,hd);var um=function(){Dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return C7(t,this.objId,this.scope)},set:function(n){var i,a;a=[],typeof(i=n)=="string"&&(a=(function(s,l,d){d||(d=1);for(var h,f=[];h=l.exec(s);)f.push(h[d]);return f})(i,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,18)},set:function(n){n?this.Ff=ra(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ra(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,20)},set:function(n){n?(this.Ff=ra(this.Ff,20),t.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,22)},set:function(n){n?this.Ff=ra(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,23)},set:function(n){n?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,27)},set:function(n){n?this.Ff=ra(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};Wo(um,Dc);var hm=function(){um.call(this),this.fontName="helvetica",this.combo=!1};Wo(hm,um);var fm=function(){hm.call(this),this.combo=!0};Wo(fm,hm);var Bv=function(){fm.call(this),this.edit=!0};Wo(Bv,fm);var Va=function(){Dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,15)},set:function(n){n?this.Ff=ra(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,16)},set:function(n){n?this.Ff=ra(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,17)},set:function(n){n?this.Ff=ra(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,26)},set:function(n){n?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,a=[];for(i in a.push("<<"),t)a.push("/"+i+" ("+mf(n(t[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){_n(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+Q0(n)}})};Wo(Va,Dc);var Fv=function(){Va.call(this),this.pushButton=!0};Wo(Fv,Va);var mm=function(){Va.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Wo(mm,Va);var Y0=function(){var e,t;Dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),i)l.push("/"+s+" ("+mf(a(i[s]))+")");return l.push(">>"),l.join(`
`)},set:function(a){_n(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wo(Y0,Dc),mm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},mm.prototype.createOption=function(e){var t=new Y0;return t.Parent=this,t.optionName=e,this.Kids.push(t),Nme.call(this.scope,t),t};var qv=function(){Va.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Et.CheckBox.createAppearanceStream()};Wo(qv,Va);var qh=function(){Dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,13)},set:function(t){t?this.Ff=ra(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,21)},set:function(t){t?this.Ff=ra(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,23)},set:function(t){t?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,24)},set:function(t){t?this.Ff=ra(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,25)},set:function(t){t?this.Ff=ra(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,26)},set:function(t){t?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wo(qh,Dc);var Uv=function(){qh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ta(this.Ff,14)},set:function(e){e?this.Ff=ra(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};Wo(Uv,qh);var Et={CheckBox:{createAppearanceStream:function(){return{N:{On:Et.CheckBox.YesNormal},D:{On:Et.CheckBox.YesPushDown,Off:Et.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=cd(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=Dw(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+fr(Et.internal.getWidth(e))+" "+fr(Et.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+fr(s.fontSize)+" Tf "+a),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=cd(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=[],s=Et.internal.getHeight(e),l=Et.internal.getWidth(e),d=Dw(e,e.caption);return a.push("1 g"),a.push("0 0 "+fr(l)+" "+fr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+fr(l-1)+" "+fr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+fr(d.fontSize)+" Tf "+i),a.push(d.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=cd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+fr(Et.internal.getWidth(e))+" "+fr(Et.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Et.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Et.RadioButton.Circle.YesNormal,t.D[e]=Et.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=cd(e);t.scope=e.scope;var n=[],i=Et.internal.getWidth(e)<=Et.internal.getHeight(e)?Et.internal.getWidth(e)/4:Et.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Et.internal.Bezier_C,s=Number((i*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+$u(Et.internal.getWidth(e)/2)+" "+$u(Et.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=cd(e);t.scope=e.scope;var n=[],i=Et.internal.getWidth(e)<=Et.internal.getHeight(e)?Et.internal.getWidth(e)/4:Et.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),s=Number((a*Et.internal.Bezier_C).toFixed(5)),l=Number((i*Et.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$u(Et.internal.getWidth(e)/2)+" "+$u(Et.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+$u(Et.internal.getWidth(e)/2)+" "+$u(Et.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=cd(e);t.scope=e.scope;var n=[],i=Et.internal.getWidth(e)<=Et.internal.getHeight(e)?Et.internal.getWidth(e)/4:Et.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),s=Number((a*Et.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$u(Et.internal.getWidth(e)/2)+" "+$u(Et.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Et.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Et.RadioButton.Cross.YesNormal,t.D[e]=Et.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=cd(e);t.scope=e.scope;var n=[],i=Et.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+fr(Et.internal.getWidth(e)-2)+" "+fr(Et.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(fr(i.x1.x)+" "+fr(i.x1.y)+" m"),n.push(fr(i.x2.x)+" "+fr(i.x2.y)+" l"),n.push(fr(i.x4.x)+" "+fr(i.x4.y)+" m"),n.push(fr(i.x3.x)+" "+fr(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=cd(e);t.scope=e.scope;var n=Et.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+fr(Et.internal.getWidth(e))+" "+fr(Et.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+fr(Et.internal.getWidth(e)-2)+" "+fr(Et.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(fr(n.x1.x)+" "+fr(n.x1.y)+" m"),i.push(fr(n.x2.x)+" "+fr(n.x2.y)+" l"),i.push(fr(n.x4.x)+" "+fr(n.x4.y)+" m"),i.push(fr(n.x3.x)+" "+fr(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=cd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+fr(Et.internal.getWidth(e))+" "+fr(Et.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Et.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Et.internal.getWidth(e),n=Et.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},Et.internal.getWidth=function(e){var t=0;return _n(e)==="object"&&(t=v6(e.Rect[2])),t},Et.internal.getHeight=function(e){var t=0;return _n(e)==="object"&&(t=v6(e.Rect[3])),t};var Nme=Fi.addField=function(e){if(Sme(this,e),!(e instanceof Dc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Fi.AcroFormChoiceField=um,Fi.AcroFormListBox=hm,Fi.AcroFormComboBox=fm,Fi.AcroFormEditBox=Bv,Fi.AcroFormButton=Va,Fi.AcroFormPushButton=Fv,Fi.AcroFormRadioButton=mm,Fi.AcroFormCheckBox=qv,Fi.AcroFormTextField=qh,Fi.AcroFormPasswordField=Uv,Fi.AcroFormAppearance=Et,Fi.AcroForm={ChoiceField:um,ListBox:hm,ComboBox:fm,EditBox:Bv,Button:Va,PushButton:Fv,RadioButton:mm,CheckBox:qv,TextField:qh,PasswordField:Uv,Appearance:Et},Ut.AcroForm={ChoiceField:um,ListBox:hm,ComboBox:fm,EditBox:Bv,Button:Va,PushButton:Fv,RadioButton:mm,CheckBox:qv,TextField:qh,PasswordField:Uv,Appearance:Et};Ut.AcroForm;function T7(e){return e.reduce(function(t,n,i){return t[n]=i,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(Y,G){var ae,se,Ne,z,ie,q=n;if((G=G||n)==="RGBA"||Y.data!==void 0&&Y.data instanceof Uint8ClampedArray&&"height"in Y&&"width"in Y)return"RGBA";if(B(Y))for(ie in i)for(Ne=i[ie],ae=0;ae<Ne.length;ae+=1){for(z=!0,se=0;se<Ne[ae].length;se+=1)if(Ne[ae][se]!==void 0&&Ne[ae][se]!==Y[se]){z=!1;break}if(z===!0){q=ie;break}}else for(ie in i)for(Ne=i[ie],ae=0;ae<Ne.length;ae+=1){for(z=!0,se=0;se<Ne[ae].length;se+=1)if(Ne[ae][se]!==void 0&&Ne[ae][se]!==Y.charCodeAt(se)){z=!1;break}if(z===!0){q=ie;break}}return q===n&&G!==n&&(q=G),q},s=function Y(G){for(var ae=this.internal.write,se=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:G.width}),z.push({key:"Height",value:G.height}),G.colorSpace===_.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===_.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)&&G.transparency.length>0){for(var ie="",q=0,re=G.transparency.length;q<re;q++)ie+=G.transparency[q]+" "+G.transparency[q]+" ";z.push({key:"Mask",value:"["+ie+"]"})}G.sMask!==void 0&&z.push({key:"SMask",value:G.objectId+1+" 0 R"});var ue=G.filter!==void 0?["/"+G.filter]:void 0;if(se({data:G.data,additionalKeyValues:z,alreadyAppliedFilters:ue,objectId:G.objectId}),ae("endobj"),"sMask"in G&&G.sMask!==void 0){var Q,V=(Q=G.sMaskBitsPerComponent)!==null&&Q!==void 0?Q:G.bitsPerComponent,ne={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:V,data:G.sMask};"filter"in G&&(ne.decodeParameters="/Predictor ".concat(G.predictor," /Colors 1 /BitsPerComponent ").concat(V," /Columns ").concat(G.width),ne.filter=G.filter),Y.call(this,ne)}if(G.colorSpace===_.INDEXED){var $=this.internal.newObject();se({data:H(new Uint8Array(G.palette)),objectId:$}),ae("endobj")}},l=function(){var Y=this.internal.collections[t+"images"];for(var G in Y)s.call(this,Y[G])},d=function(){var Y,G=this.internal.collections[t+"images"],ae=this.internal.write;for(var se in G)ae("/I"+(Y=G[se]).index,Y.objectId,"0","R")},h=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},f=function(){var Y=this.internal.collections[t+"images"];return h.call(this),Y},p=function(){return Object.keys(this.internal.collections[t+"images"]).length},g=function(Y){return typeof e["process"+Y.toUpperCase()]=="function"},j=function(Y){return _n(Y)==="object"&&Y.nodeType===1},v=function(Y,G){if(Y.nodeName==="IMG"&&Y.hasAttribute("src")){var ae=""+Y.getAttribute("src");if(ae.indexOf("data:image/")===0)return zv(unescape(ae).split("base64,").pop());var se=e.loadFile(ae,!0);if(se!==void 0)return se}if(Y.nodeName==="CANVAS"){if(Y.width===0||Y.height===0)throw new Error("Given canvas must have data. Canvas width: "+Y.width+", height: "+Y.height);var Ne;switch(G){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;default:Ne="image/jpeg"}return zv(Y.toDataURL(Ne,1).split("base64,").pop())}},b=function(Y){var G=this.internal.collections[t+"images"];if(G){for(var ae in G)if(Y===G[ae].alias)return G[ae]}},w=function(Y,G,ae){return Y||G||(Y=-96,G=-96),Y<0&&(Y=-1*ae.width*72/Y/this.internal.scaleFactor),G<0&&(G=-1*ae.height*72/G/this.internal.scaleFactor),Y===0&&(Y=G*ae.width/ae.height),G===0&&(G=Y*ae.height/ae.width),[Y,G]},S=function(Y,G,ae,se,Ne,z){var ie=w.call(this,ae,se,Ne),q=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,ue=f.call(this);if(ae=ie[0],se=ie[1],ue[Ne.index]=Ne,z){z*=Math.PI/180;var Q=Math.cos(z),V=Math.sin(z),ne=function(de){return de.toFixed(4)},$=[ne(Q),ne(V),ne(-1*V),ne(Q),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,q(Y),re(G+se),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([q(ae),"0","0",q(se),"0","0","cm"].join(" "))):this.internal.write([q(ae),"0","0",q(se),q(Y),re(G+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},_=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=e.__addimage__.sHashCode=function(Y){var G,ae,se=0;if(typeof Y=="string")for(ae=Y.length,G=0;G<ae;G++)se=(se<<5)-se+Y.charCodeAt(G),se|=0;else if(B(Y))for(ae=Y.byteLength/2,G=0;G<ae;G++)se=(se<<5)-se+Y[G],se|=0;return se},W=e.__addimage__.validateStringAsBase64=function(Y){(Y=Y||"").toString().trim();var G=!0;return Y.length===0&&(G=!1),Y.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(Y.substr(0,Y.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Y.substr(-2))===!1&&(G=!1),G},K=e.__addimage__.extractImageFromDataUrl=function(Y){if(Y==null||!(Y=Y.trim()).startsWith("data:"))return null;var G=Y.indexOf(",");return G<0?null:Y.substring(0,G).trim().endsWith("base64")?Y.substring(G+1):null};e.__addimage__.isArrayBuffer=function(Y){return Y instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(Y){return Y instanceof Int8Array||Y instanceof Uint8Array||Y instanceof Uint8ClampedArray||Y instanceof Int16Array||Y instanceof Uint16Array||Y instanceof Int32Array||Y instanceof Uint32Array||Y instanceof Float32Array||Y instanceof Float64Array},F=e.__addimage__.binaryStringToUint8Array=function(Y){for(var G=Y.length,ae=new Uint8Array(G),se=0;se<G;se++)ae[se]=Y.charCodeAt(se);return ae},H=e.__addimage__.arrayBufferToBinaryString=function(Y){for(var G="",ae=B(Y)?Y:new Uint8Array(Y),se=0;se<ae.length;se+=8192)G+=String.fromCharCode.apply(null,ae.subarray(se,se+8192));return G};e.addImage=function(){var Y,G,ae,se,Ne,z,ie,q,re;if(typeof arguments[1]=="number"?(G=n,ae=arguments[1],se=arguments[2],Ne=arguments[3],z=arguments[4],ie=arguments[5],q=arguments[6],re=arguments[7]):(G=arguments[1],ae=arguments[2],se=arguments[3],Ne=arguments[4],z=arguments[5],ie=arguments[6],q=arguments[7],re=arguments[8]),_n(Y=arguments[0])==="object"&&!j(Y)&&"imageData"in Y){var ue=Y;Y=ue.imageData,G=ue.format||G||n,ae=ue.x||ae||0,se=ue.y||se||0,Ne=ue.w||ue.width||Ne,z=ue.h||ue.height||z,ie=ue.alias||ie,q=ue.compression||q,re=ue.rotation||ue.angle||re}var Q=this.internal.getFilters();if(q===void 0&&Q.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(ae)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var V=I.call(this,Y,G,ie,q);return S.call(this,ae,se,Ne,z,V,re),this};var I=function(Y,G,ae,se){var Ne,z,ie;if(typeof Y=="string"&&a(Y)===n){Y=unescape(Y);var q=R(Y,!1);(q!==""||(q=e.loadFile(Y,!0))!==void 0)&&(Y=q)}if(j(Y)&&(Y=v(Y,G)),G=a(Y,G),!g(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((ie=ae)==null||ie.length===0)&&(ae=(function(re){return typeof re=="string"||B(re)?D(re):B(re.data)?D(re.data):null})(Y)),(Ne=b.call(this,ae))||(Y instanceof Uint8Array||G==="RGBA"||(z=Y,Y=F(Y)),Ne=this["process"+G.toUpperCase()](Y,p.call(this),ae,(function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in e.image_compression?re:E.NONE})(se),z)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},R=e.__addimage__.convertBase64ToBinaryString=function(Y,G){G=typeof G!="boolean"||G;var ae,se="";if(typeof Y=="string"){var Ne;ae=(Ne=K(Y))!==null&&Ne!==void 0?Ne:Y;try{se=zv(ae)}catch(z){if(G)throw W(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};e.getImageProperties=function(Y){var G,ae,se="";if(j(Y)&&(Y=v(Y)),typeof Y=="string"&&a(Y)===n&&((se=R(Y,!1))===""&&(se=e.loadFile(Y)||""),Y=se),ae=a(Y),!g(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(Y instanceof Uint8Array||(Y=F(Y)),!(G=this["process"+ae.toUpperCase()](Y)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=ae,G}})(Ut.API),(function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ut.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var i,a,s,l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,p=!1,g=0;g<f.length&&!p;g++)switch((i=f[g]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var j=0;j<f.length;j++){i=f[j];var v=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(w.objId),E=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(i.bounds.x)+" "+d(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y)+"] ")+"/Contents ("+v(_(i.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+v(_(E))+") >>",w.content=s;var D=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(i.bounds.x+30)+" "+d(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+d(i.bounds.y)+"] ")+" /Parent "+D,i.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":a="/Rect ["+l(i.bounds.x)+" "+d(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y+i.bounds.h)+"] ";var W=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+v(b(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var K=this.annotations._nameMap[i.options.name];i.options.pageNumber=K.page,i.options.top=K.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+v(b(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;default:var B=d(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+B+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},e.link=function(n,i,a,s,l){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(n),y:f(i),w:h(n+a),h:f(i+s)},options:l,type:"link"})},e.textWithLink=function(n,i,a,s){var l,d,h=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){d=s.maxWidth;var p=this.splitTextToSize(n,d).length;l=Math.ceil(f*p)}else d=h,l=f;return this.text(n,i,a,s),a+=.2*f,s.align==="center"&&(i-=h/2),s.align==="right"&&(i-=h),this.link(i,a-f,d,l,s),h},e.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(Ut.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},d=e.__arabicParser__.isArabicEndLetter=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length<=2},h=e.__arabicParser__.isArabicAlfLetter=function(w){return l(w)&&a.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(w){var S=0,_=n,E="",D=0;for(S=0;S<w.length;S+=1)_[w.charCodeAt(S)]!==void 0?(D++,typeof(_=_[w.charCodeAt(S)])=="number"&&(E+=String.fromCharCode(_),_=n,D=0),S===w.length-1&&(_=n,E+=w.charAt(S-(D-1)),S-=D-1,D=0)):(_=n,E+=w.charAt(S-D),S-=D,D=0);return E};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var j=e.__arabicParser__.getCorrectForm=function(w,S,_){return l(w)?s(w)===!1?-1:!f(w)||!l(S)&&!l(_)||!l(_)&&d(S)||d(w)&&!l(S)||d(w)&&h(S)||d(w)&&d(S)?0:p(w)&&l(S)&&!d(S)&&l(_)&&f(_)?3:d(w)||!l(_)?1:2:-1},v=function(w){var S=0,_=0,E=0,D="",W="",K="",B=(w=w||"").split("\\s+"),F=[];for(S=0;S<B.length;S+=1){for(F.push(""),_=0;_<B[S].length;_+=1)D=B[S][_],W=B[S][_-1],K=B[S][_+1],l(D)?(E=j(D,W,K),F[S]+=E!==-1?String.fromCharCode(t[D.charCodeAt(0)][E]):D):F[S]+=D;F[S]=g(F[S])}return F.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(S)){var E=0;for(_=[],E=0;E<S.length;E+=1)Array.isArray(S[E])?_.push([v(S[E][0]),S[E][1],S[E][2]]):_.push([v(S[E])]);w=_}else w=v(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",b])})(Ut.API),Ut.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(d){s=d}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(d){l=d}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,i){var a;if((n=n||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Ut.API),(function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(w){j=w}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(h){return i.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},e.getTextDimensions=function(h,f){i.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),g=f.font||this.getFont(),j=f.scaleFactor||this.internal.scaleFactor,v=0,b=0,w=0,S=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var _=f.maxWidth;_>0?typeof h=="string"?h=this.splitTextToSize(h,_):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(D,W){return D.concat(S.splitTextToSize(W,_))},[])):h=Array.isArray(h)?h:[h];for(var E=0;E<h.length;E++)v<(w=this.getStringUnitWidth(h[E],{font:g})*p)&&(v=w);return v!==0&&(b=h.length),{w:v/=j,h:Math.max((b*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/j,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,j=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=g.top,v&&j&&(this.printHeaderRow(h.lineNumber,!0),h.y+=j[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,n===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};e.table=function(h,f,p,g,j){if(i.call(this),!p)throw new Error("No data for PDF table.");var v,b,w,S,_=[],E=[],D=[],W={},K={},B=[],F=[],H=(j=j||{}).autoSize||!1,I=j.printHeaders!==!1,R=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,Y=j.margins||Object.assign({width:this.getPageWidth()},t),G=typeof j.padding=="number"?j.padding:3,ae=j.headerBackgroundColor||"#c8c8c8",se=j.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=Y,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=ae,this.internal.__cell__.headerTextColor=se,this.setFontSize(R),g==null)E=_=Object.keys(p[0]),D=_.map(function(){return"left"});else if(Array.isArray(g)&&_n(g[0])==="object")for(_=g.map(function(ue){return ue.name}),E=g.map(function(ue){return ue.prompt||ue.name||""}),D=g.map(function(ue){return ue.align||"left"}),v=0;v<g.length;v+=1)K[g[v].name]=.7499990551181103*g[v].width;else Array.isArray(g)&&typeof g[0]=="string"&&(E=_=g,D=_.map(function(){return"left"}));if(H||Array.isArray(g)&&typeof g[0]=="string")for(v=0;v<_.length;v+=1){for(W[S=_[v]]=p.map(function(ue){return ue[S]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(E[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=W[S],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)B.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[S]=Math.max.apply(null,B)+G+G,B=[]}if(I){var Ne={};for(v=0;v<_.length;v+=1)Ne[_[v]]={},Ne[_[v]].text=E[v],Ne[_[v]].align=D[v];var z=d.call(this,Ne,K);F=_.map(function(ue){return new s(h,f,K[ue],z,Ne[ue].text,void 0,Ne[ue].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var ie=g.reduce(function(ue,Q){return ue[Q.name]=Q.align,ue},{});for(v=0;v<p.length;v+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:v,data:p[v]},this);var q=d.call(this,p[v],K);for(w=0;w<_.length;w+=1){var re=p[v][_[w]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:v,col:w,data:re},this),l.call(this,new s(h,f,K[_[w]],q,re,v+2,ie[_[w]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var d=function(h,f){var p=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(h).map(function(v){var b=h[v];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,f[v]-p-p)},this).map(function(v){return this.getLineHeightFactor()*v.length*g/j+p+p},this).reduce(function(v,b){return Math.max(v,b)},0)};e.setTableHeaderRow=function(h){i.call(this),this.internal.__cell__.tableHeaderRow=h},e.printHeaderRow=function(h,f){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){p=this.internal.__cell__.tableHeaderRow[v].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,j.push(p)),p.lineNumber=h;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,p),this.setTextColor(b)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),n=!1}})(Ut.API);var P7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},k7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ow=T7(k7),D7=[100,200,300,400,500,600,700,800,900],_me=T7(D7);function Ej(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=(function(s){return P7[s=s||"normal"]?s:"normal"})(e.style),i=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(e.weight),a=(function(s){return typeof Ow[s=s||"normal"]=="number"?s:"normal"})(e.stretch);return{family:t,style:n,weight:i,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,i].join(" ")}}}function x6(e,t,n,i){var a;for(a=n;a>=0&&a<t.length;a+=i)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=i)if(e[t[a]])return e[t[a]]}var Cme={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},b6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function j6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function w6(e){return e.trimLeft()}function Ame(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Eme(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Qf,pv,S6,N6,_6,Tj=["times"];function C6(e,t,n,i,a){var s=4,l=E6;switch(a){case Ut.API.image_compression.FAST:s=1,l=A6;break;case Ut.API.image_compression.MEDIUM:s=6,l=T6;break;case Ut.API.image_compression.SLOW:s=9,l=P6}e=(function(h,f,p,g){for(var j,v=h.length/f,b=new Uint8Array(h.length+v),w=[Tme,A6,E6,T6,P6],S=0;S<v;S+=1){var _=S*f,E=h.subarray(_,_+f);if(g)b.set(g(E,p,j),_+S);else{for(var D=w.length,W=[],K=0;K<D;K+=1)W[K]=w[K](E,p,j);var B=kme(W.concat());b.set(W[B],_+S)}j=E}return b})(e,t,Math.ceil(n*i/8),l);var d=Cw(e,{level:s});return Ut.API.__addimage__.arrayBufferToBinaryString(d)}function Tme(e){var t=Array.apply([],e);return t.unshift(0),t}function A6(e,t){var n=e.length,i=[];i[0]=1;for(var a=0;a<n;a+=1){var s=e[a-t]||0;i[a+1]=e[a]-s+256&255}return i}function E6(e,t,n){var i=e.length,a=[];a[0]=2;for(var s=0;s<i;s+=1){var l=n&&n[s]||0;a[s+1]=e[s]-l+256&255}return a}function T6(e,t,n){var i=e.length,a=[];a[0]=3;for(var s=0;s<i;s+=1){var l=e[s-t]||0,d=n&&n[s]||0;a[s+1]=e[s]+256-(l+d>>>1)&255}return a}function P6(e,t,n){var i=e.length,a=[];a[0]=4;for(var s=0;s<i;s+=1){var l=Pme(e[s-t]||0,n&&n[s]||0,n&&n[s-t]||0);a[s+1]=e[s]-l+256&255}return a}function Pme(e,t,n){if(e===t&&t===n)return e;var i=Math.abs(t-n),a=Math.abs(e-n),s=Math.abs(e+t-n-n);return i<=a&&i<=s?e:a<=s?t:n}function kme(e){var t=e.map(function(n){return n.reduce(function(i,a){return i+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function Pj(e,t,n){var i=t*n,a=Math.floor(i/8),s=16-(i-8*a+n),l=(1<<n)-1;return O7(e,a)>>s&l}function k6(e,t,n,i){var a=n*i,s=Math.floor(a/8),l=16-(a-8*s+i),d=(1<<i)-1,h=(t&d)<<l;(function(f,p,g){if(p+1<f.byteLength)f.setUint16(p,g,!1);else{var j=g>>8&255;f.setUint8(p,j)}})(e,s,O7(e,s)&~(d<<l)&65535|h)}function O7(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Dme(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,l=1<<1+(7&a);e[t++],e[t++];var d=null,h=null;s&&(d=t,h=l,t+=3*l);var f=!0,p=[],g=0,j=null,v=0,b=null;for(this.width=n,this.height=i;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((Y=e[t++])>=0))throw Error("Invalid block size");if(Y===0)break;t+=Y}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];g=e[t++]|e[t++]<<8,j=e[t++],1&w||(j=null),v=w>>2&7,t++;break;case 254:for(;;){if(!((Y=e[t++])>=0))throw Error("Invalid block size");if(Y===0)break;t+=Y}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var S=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,W=e[t++],K=W>>6&1,B=1<<1+(7&W),F=d,H=h,I=!1;W>>7&&(I=!0,F=t,H=B,t+=3*B);var R=t;for(t++;;){var Y;if(!((Y=e[t++])>=0))throw Error("Invalid block size");if(Y===0)break;t+=Y}p.push({x:S,y:_,width:E,height:D,has_local_palette:I,palette_offset:F,palette_size:H,data_offset:R,data_length:t-R,transparent_index:j,interlaced:!!K,delay:g,disposal:v});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return b},this.frameInfo=function(G){if(G<0||G>=p.length)throw new Error("Frame index out of range.");return p[G]},this.decodeAndBlitFrameBGRA=function(G,ae){var se=this.frameInfo(G),Ne=se.width*se.height,z=new Uint8Array(Ne);D6(e,se.data_offset,z,Ne);var ie=se.palette_offset,q=se.transparent_index;q===null&&(q=256);var re=se.width,ue=n-re,Q=re,V=4*(se.y*n+se.x),ne=4*((se.y+se.height)*n+se.x),$=V,de=4*ue;se.interlaced===!0&&(de+=4*n*7);for(var Z=8,ge=0,oe=z.length;ge<oe;++ge){var X=z[ge];if(Q===0&&(Q=re,($+=de)>=ne&&(de=4*ue+4*n*(Z-1),$=V+(re+ue)*(Z<<1),Z>>=1)),X===q)$+=4;else{var _e=e[ie+3*X],Ie=e[ie+3*X+1],De=e[ie+3*X+2];ae[$++]=De,ae[$++]=Ie,ae[$++]=_e,ae[$++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(G,ae){var se=this.frameInfo(G),Ne=se.width*se.height,z=new Uint8Array(Ne);D6(e,se.data_offset,z,Ne);var ie=se.palette_offset,q=se.transparent_index;q===null&&(q=256);var re=se.width,ue=n-re,Q=re,V=4*(se.y*n+se.x),ne=4*((se.y+se.height)*n+se.x),$=V,de=4*ue;se.interlaced===!0&&(de+=4*n*7);for(var Z=8,ge=0,oe=z.length;ge<oe;++ge){var X=z[ge];if(Q===0&&(Q=re,($+=de)>=ne&&(de=4*ue+4*n*(Z-1),$=V+(re+ue)*(Z<<1),Z>>=1)),X===q)$+=4;else{var _e=e[ie+3*X],Ie=e[ie+3*X+1],De=e[ie+3*X+2];ae[$++]=_e,ae[$++]=Ie,ae[$++]=De,ae[$++]=255}--Q}}}function D6(e,t,n,i){for(var a=e[t++],s=1<<a,l=s+1,d=l+1,h=a+1,f=(1<<h)-1,p=0,g=0,j=0,v=e[t++],b=new Int32Array(4096),w=null;;){for(;p<16&&v!==0;)g|=e[t++]<<p,p+=8,v===1?v=e[t++]:--v;if(p<h)break;var S=g&f;if(g>>=h,p-=h,S!==s){if(S===l)break;for(var _=S<d?S:w,E=0,D=_;D>s;)D=b[D]>>8,++E;var W=D;if(j+E+(_!==S?1:0)>i)return void Rn.log("Warning, gif stream longer than expected.");n[j++]=W;var K=j+=E;for(_!==S&&(n[j++]=W),D=_;E--;)D=b[D],n[--K]=255&D,D>>=8;w!==null&&d<4096&&(b[d++]=w<<8|W,d>=f+1&&h<12&&(++h,f=f<<1|1)),w=S}else d=l+1,f=(1<<(h=a+1))-1,w=null}return j!==i&&Rn.log("Warning, gif stream shorter than expected."),n}function kj(e){var t,n,i,a,s,l=Math.floor,d=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),g=new Array(65535),j=new Array(65535),v=new Array(64),b=new Array(64),w=[],S=0,_=7,E=new Array(64),D=new Array(64),W=new Array(64),K=new Array(256),B=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(V,ne){for(var $=0,de=0,Z=new Array,ge=1;ge<=16;ge++){for(var oe=1;oe<=V[ge];oe++)Z[ne[de]]=[],Z[ne[de]][0]=$,Z[ne[de]][1]=ge,de++,$++;$*=2}return Z}function ie(V){for(var ne=V[0],$=V[1]-1;$>=0;)ne&1<<$&&(S|=1<<_),$--,--_<0&&(S==255?(q(255),q(0)):q(S),_=7,S=0)}function q(V){w.push(V)}function re(V){q(V>>8&255),q(255&V)}function ue(V,ne,$,de,Z){for(var ge,oe=Z[0],X=Z[240],_e=(function(st,qt){var vt,Ht,Bt,lr,Nr,rr,jr,dr,Tt,nr,kt=0;for(Tt=0;Tt<8;++Tt){vt=st[kt],Ht=st[kt+1],Bt=st[kt+2],lr=st[kt+3],Nr=st[kt+4],rr=st[kt+5],jr=st[kt+6];var $n=vt+(dr=st[kt+7]),xr=vt-dr,Wt=Ht+jr,Xt=Ht-jr,_r=Bt+rr,Ot=Bt-rr,mn=lr+Nr,Qt=lr-Nr,Jt=$n+mn,en=$n-mn,cr=Wt+_r,It=Wt-_r;st[kt]=Jt+cr,st[kt+4]=Jt-cr;var Rr=.707106781*(It+en);st[kt+2]=en+Rr,st[kt+6]=en-Rr;var Ws=.382683433*((Jt=Qt+Ot)-(It=Xt+xr)),ia=.5411961*Jt+Ws,fo=1.306562965*It+Ws,vs=.707106781*(cr=Ot+Xt),zt=xr+vs,$o=xr-vs;st[kt+5]=$o+ia,st[kt+3]=$o-ia,st[kt+1]=zt+fo,st[kt+7]=zt-fo,kt+=8}for(kt=0,Tt=0;Tt<8;++Tt){vt=st[kt],Ht=st[kt+8],Bt=st[kt+16],lr=st[kt+24],Nr=st[kt+32],rr=st[kt+40],jr=st[kt+48];var mo=vt+(dr=st[kt+56]),Ya=vt-dr,Za=Ht+jr,Ir=Ht-jr,gt=Bt+rr,bi=Bt-rr,Vo=lr+Nr,aa=lr-Nr,tn=mo+Vo,yn=mo-Vo,$i=Za+gt,Pi=Za-gt;st[kt]=tn+$i,st[kt+32]=tn-$i;var Xa=.707106781*(Pi+yn);st[kt+16]=yn+Xa,st[kt+48]=yn-Xa;var Jl=.382683433*((tn=aa+bi)-(Pi=Ir+Ya)),$s=.5411961*tn+Jl,Vs=1.306562965*Pi+Jl,jl=.707106781*($i=bi+Ir),xs=Ya+jl,Ks=Ya-jl;st[kt+40]=Ks+$s,st[kt+24]=Ks-$s,st[kt+8]=xs+Vs,st[kt+56]=xs-Vs,kt++}for(Tt=0;Tt<64;++Tt)nr=st[Tt]*qt[Tt],v[Tt]=nr>0?nr+.5|0:nr-.5|0;return v})(V,ne),Ie=0;Ie<64;++Ie)b[F[Ie]]=_e[Ie];var De=b[0]-$;$=b[0],De==0?ie(de[0]):(ie(de[j[ge=32767+De]]),ie(g[ge]));for(var ut=63;ut>0&&b[ut]==0;)ut--;if(ut==0)return ie(oe),$;for(var ht,be=1;be<=ut;){for(var ct=be;b[be]==0&&be<=ut;)++be;var Gt=be-ct;if(Gt>=16){ht=Gt>>4;for(var Pt=1;Pt<=ht;++Pt)ie(X);Gt&=15}ge=32767+b[be],ie(Z[(Gt<<4)+j[ge]]),ie(g[ge]),be++}return ut!=63&&ie(oe),$}function Q(V){V=Math.min(Math.max(V,1),100),s!=V&&((function(ne){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var Z=l(($[de]*ne+50)/100);Z=Math.min(Math.max(Z,1),255),d[F[de]]=Z}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var X=l((ge[oe]*ne+50)/100);X=Math.min(Math.max(X,1),255),h[F[oe]]=X}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,De=0;De<8;De++)for(var ut=0;ut<8;ut++)f[Ie]=1/(d[F[Ie]]*_e[De]*_e[ut]*8),p[Ie]=1/(h[F[Ie]]*_e[De]*_e[ut]*8),Ie++})(V<50?Math.floor(5e3/V):Math.floor(200-2*V)),s=V)}this.encode=function(V,ne){ne&&Q(ne),w=new Array,S=0,_=7,re(65496),re(65504),re(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),re(1),re(1),q(0),q(0),(function(){re(65499),re(132),q(0);for(var Ht=0;Ht<64;Ht++)q(d[Ht]);q(1);for(var Bt=0;Bt<64;Bt++)q(h[Bt])})(),(function(Ht,Bt){re(65472),re(17),q(8),re(Bt),re(Ht),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)})(V.width,V.height),(function(){re(65476),re(418),q(0);for(var Ht=0;Ht<16;Ht++)q(H[Ht+1]);for(var Bt=0;Bt<=11;Bt++)q(I[Bt]);q(16);for(var lr=0;lr<16;lr++)q(R[lr+1]);for(var Nr=0;Nr<=161;Nr++)q(Y[Nr]);q(1);for(var rr=0;rr<16;rr++)q(G[rr+1]);for(var jr=0;jr<=11;jr++)q(ae[jr]);q(17);for(var dr=0;dr<16;dr++)q(se[dr+1]);for(var Tt=0;Tt<=161;Tt++)q(Ne[Tt])})(),re(65498),re(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var $=0,de=0,Z=0;S=0,_=7,this.encode.displayName="_encode_";for(var ge,oe,X,_e,Ie,De,ut,ht,be,ct=V.data,Gt=V.width,Pt=V.height,st=4*Gt,qt=0;qt<Pt;){for(ge=0;ge<st;){for(Ie=st*qt+ge,ut=-1,ht=0,be=0;be<64;be++)De=Ie+(ht=be>>3)*st+(ut=4*(7&be)),qt+ht>=Pt&&(De-=st*(qt+1+ht-Pt)),ge+ut>=st&&(De-=ge+ut-st+4),oe=ct[De++],X=ct[De++],_e=ct[De++],E[be]=(B[oe]+B[X+256|0]+B[_e+512|0]>>16)-128,D[be]=(B[oe+768|0]+B[X+1024|0]+B[_e+1280|0]>>16)-128,W[be]=(B[oe+1280|0]+B[X+1536|0]+B[_e+1792|0]>>16)-128;$=ue(E,f,$,t,i),de=ue(D,p,de,n,a),Z=ue(W,p,Z,n,a),ge+=32}qt+=8}if(_>=0){var vt=[];vt[1]=_+1,vt[0]=(1<<_+1)-1,ie(vt)}return re(65497),new Uint8Array(w)},e=e||50,(function(){for(var V=String.fromCharCode,ne=0;ne<256;ne++)K[ne]=V(ne)})(),t=z(H,I),n=z(G,ae),i=z(R,Y),a=z(se,Ne),(function(){for(var V=1,ne=2,$=1;$<=15;$++){for(var de=V;de<ne;de++)j[32767+de]=$,g[32767+de]=[],g[32767+de][1]=$,g[32767+de][0]=de;for(var Z=-(ne-1);Z<=-V;Z++)j[32767+Z]=$,g[32767+Z]=[],g[32767+Z][1]=$,g[32767+Z][0]=ne-1+Z;V<<=1,ne<<=1}})(),(function(){for(var V=0;V<256;V++)B[V]=19595*V,B[V+256|0]=38470*V,B[V+512|0]=7471*V+32768,B[V+768|0]=-11059*V,B[V+1024|0]=-21709*V,B[V+1280|0]=32768*V+8421375,B[V+1536|0]=-27439*V,B[V+1792|0]=-5329*V})(),Q(e)}function gc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function O6(e){function t(I){if(!I)throw Error("assert :P")}function n(I,R,Y){for(var G=0;4>G;G++)if(I[R+G]!=Y.charCodeAt(G))return!0;return!1}function i(I,R,Y,G,ae){for(var se=0;se<ae;se++)I[R+se]=Y[G+se]}function a(I,R,Y,G){for(var ae=0;ae<G;ae++)I[R+ae]=Y}function s(I){return new Int32Array(I)}function l(I,R){for(var Y=[],G=0;G<I;G++)Y.push(new R);return Y}function d(I,R){var Y=[];return(function G(ae,se,Ne){for(var z=Ne[se],ie=0;ie<z&&(ae.push(Ne.length>se+1?[]:new R),!(Ne.length<se+1));ie++)G(ae[ie],se+1,Ne)})(Y,0,I),Y}var h=function(){var I=this;function R(N,T){for(var U=1<<T-1>>>0;N&U;)U>>>=1;return U?(N&U-1)+U:N}function Y(N,T,U,J,ce){t(!(J%U));do N[T+(J-=U)]=ce;while(0<J)}function G(N,T,U,J,ce){if(t(2328>=ce),512>=ce)var he=s(512);else if((he=s(ce))==null)return 0;return(function(me,ye,ve,Se,Te,Be){var we,ke,Re=ye,Ze=1<<ve,ze=s(16),Qe=s(16);for(t(Te!=0),t(Se!=null),t(me!=null),t(0<ve),ke=0;ke<Te;++ke){if(15<Se[ke])return 0;++ze[Se[ke]]}if(ze[0]==Te)return 0;for(Qe[1]=0,we=1;15>we;++we){if(ze[we]>1<<we)return 0;Qe[we+1]=Qe[we]+ze[we]}for(ke=0;ke<Te;++ke)we=Se[ke],0<Se[ke]&&(Be[Qe[we]++]=ke);if(Qe[15]==1)return(Se=new ae).g=0,Se.value=Be[0],Y(me,Re,1,Ze,Se),Ze;var Je,ot=-1,it=Ze-1,At=0,xt=1,sr=1,wt=1<<ve;for(ke=0,we=1,Te=2;we<=ve;++we,Te<<=1){if(xt+=sr<<=1,0>(sr-=ze[we]))return 0;for(;0<ze[we];--ze[we])(Se=new ae).g=we,Se.value=Be[ke++],Y(me,Re+At,Te,wt,Se),At=R(At,we)}for(we=ve+1,Te=2;15>=we;++we,Te<<=1){if(xt+=sr<<=1,0>(sr-=ze[we]))return 0;for(;0<ze[we];--ze[we]){if(Se=new ae,(At&it)!=ot){for(Re+=wt,Je=1<<(ot=we)-ve;15>ot&&!(0>=(Je-=ze[ot]));)++ot,Je<<=1;Ze+=wt=1<<(Je=ot-ve),me[ye+(ot=At&it)].g=Je+ve,me[ye+ot].value=Re-ye-ot}Se.g=we-ve,Se.value=Be[ke++],Y(me,Re+(At>>ve),Te,wt,Se),At=R(At,we)}}return xt!=2*Qe[15]-1?0:Ze})(N,T,U,J,ce,he)}function ae(){this.value=this.g=0}function se(){this.value=this.g=0}function Ne(){this.G=l(5,ae),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(ro,se)}function z(N,T,U,J){t(N!=null),t(T!=null),t(2147483648>J),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=T,N.pa=U,N.Jd=T,N.Yc=U+J,N.Zc=4<=J?U+J-4+1:U,oe(N)}function ie(N,T){for(var U=0;0<T--;)U|=_e(N,128)<<T;return U}function q(N,T){var U=ie(N,T);return X(N)?-U:U}function re(N,T,U,J){var ce,he=0;for(t(N!=null),t(T!=null),t(4294967288>J),N.Sb=J,N.Ra=0,N.u=0,N.h=0,4<J&&(J=4),ce=0;ce<J;++ce)he+=T[U+ce]<<8*ce;N.Ra=he,N.bb=J,N.oa=T,N.pa=U}function ue(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<ss-8>>>0,++N.bb,N.u-=8;de(N)&&(N.h=1,N.u=0)}function Q(N,T){if(t(0<=T),!N.h&&T<=Fn){var U=$(N)&za[T];return N.u+=T,ue(N),U}return N.h=1,N.u=0}function V(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ne(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(N){return N.Ra>>>(N.u&ss-1)>>>0}function de(N){return t(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>ss}function Z(N,T){N.u=T,N.h=de(N)}function ge(N){N.u>=wo&&(t(N.u>=wo),ue(N))}function oe(N){t(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(t(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function X(N){return ie(N,1)}function _e(N,T){var U=N.Ca;0>N.b&&oe(N);var J=N.b,ce=U*T>>>8,he=(N.I>>>J>ce)+0;for(he?(U-=ce,N.I-=ce+1<<J>>>0):U=ce+1,J=U,ce=0;256<=J;)ce+=8,J>>=8;return J=7^ce+no[J],N.b-=J,N.Ca=(U<<J)-1,he}function Ie(N,T,U){N[T+0]=U>>24&255,N[T+1]=U>>16&255,N[T+2]=U>>8&255,N[T+3]=255&U}function De(N,T){return N[T+0]|N[T+1]<<8}function ut(N,T){return De(N,T)|N[T+2]<<16}function ht(N,T){return De(N,T)|De(N,T+2)<<16}function be(N,T){var U=1<<T;return t(N!=null),t(0<T),N.X=s(U),N.X==null?0:(N.Mb=32-T,N.Xa=T,1)}function ct(N,T){t(N!=null),t(T!=null),t(N.Xa==T.Xa),i(T.X,0,N.X,0,1<<T.Xa)}function Gt(){this.X=[],this.Xa=this.Mb=0}function Pt(N,T,U,J){t(U!=null),t(J!=null);var ce=U[0],he=J[0];return ce==0&&(ce=(N*he+T/2)/T),he==0&&(he=(T*ce+N/2)/N),0>=ce||0>=he?0:(U[0]=ce,J[0]=he,1)}function st(N,T){return N+(1<<T)-1>>>T}function qt(N,T){return((4278255360&N)+(4278255360&T)>>>0&4278255360)+((16711935&N)+(16711935&T)>>>0&16711935)>>>0}function vt(N,T){I[T]=function(U,J,ce,he,me,ye,ve){var Se;for(Se=0;Se<me;++Se){var Te=I[N](ye[ve+Se-1],ce,he+Se);ye[ve+Se]=qt(U[J+Se],Te)}}}function Ht(){this.ud=this.hd=this.jd=0}function Bt(N,T){return((4278124286&(N^T))>>>1)+(N&T)>>>0}function lr(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Nr(N,T){return lr(N+(N-T+.5>>1))}function rr(N,T,U){return Math.abs(T-U)-Math.abs(N-U)}function jr(N,T,U,J,ce,he,me){for(J=he[me-1],U=0;U<ce;++U)he[me+U]=J=qt(N[T+U],J)}function dr(N,T,U,J,ce){var he;for(he=0;he<U;++he){var me=N[T+he],ye=me>>8&255,ve=16711935&(ve=(ve=16711935&me)+((ye<<16)+ye));J[ce+he]=(4278255360&me)+ve>>>0}}function Tt(N,T){T.jd=255&N,T.hd=N>>8&255,T.ud=N>>16&255}function nr(N,T,U,J,ce,he){var me;for(me=0;me<J;++me){var ye=T[U+me],ve=ye>>>8,Se=ye,Te=255&(Te=(Te=ye>>>16)+((N.jd<<24>>24)*(ve<<24>>24)>>>5));Se=255&(Se=(Se+=(N.hd<<24>>24)*(ve<<24>>24)>>>5)+((N.ud<<24>>24)*(Te<<24>>24)>>>5)),ce[he+me]=(4278255360&ye)+(Te<<16)+Se}}function kt(N,T,U,J,ce){I[T]=function(he,me,ye,ve,Se,Te,Be,we,ke){for(ve=Be;ve<we;++ve)for(Be=0;Be<ke;++Be)Se[Te++]=ce(ye[J(he[me++])])},I[N]=function(he,me,ye,ve,Se,Te,Be){var we=8>>he.b,ke=he.Ea,Re=he.K[0],Ze=he.w;if(8>we)for(he=(1<<he.b)-1,Ze=(1<<we)-1;me<ye;++me){var ze,Qe=0;for(ze=0;ze<ke;++ze)ze&he||(Qe=J(ve[Se++])),Te[Be++]=ce(Re[Qe&Ze]),Qe>>=we}else I["VP8LMapColor"+U](ve,Se,Re,Ze,Te,Be,me,ye,ke)}}function $n(N,T,U,J,ce){for(U=T+U;T<U;){var he=N[T++];J[ce++]=he>>16&255,J[ce++]=he>>8&255,J[ce++]=255&he}}function xr(N,T,U,J,ce){for(U=T+U;T<U;){var he=N[T++];J[ce++]=he>>16&255,J[ce++]=he>>8&255,J[ce++]=255&he,J[ce++]=he>>24&255}}function Wt(N,T,U,J,ce){for(U=T+U;T<U;){var he=(me=N[T++])>>16&240|me>>12&15,me=240&me|me>>28&15;J[ce++]=he,J[ce++]=me}}function Xt(N,T,U,J,ce){for(U=T+U;T<U;){var he=(me=N[T++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;J[ce++]=he,J[ce++]=me}}function _r(N,T,U,J,ce){for(U=T+U;T<U;){var he=N[T++];J[ce++]=255&he,J[ce++]=he>>8&255,J[ce++]=he>>16&255}}function Ot(N,T,U,J,ce,he){if(he==0)for(U=T+U;T<U;)Ie(J,((he=N[T++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ce+=32;else i(J,ce,N,T,U)}function mn(N,T){I[T][0]=I[N+"0"],I[T][1]=I[N+"1"],I[T][2]=I[N+"2"],I[T][3]=I[N+"3"],I[T][4]=I[N+"4"],I[T][5]=I[N+"5"],I[T][6]=I[N+"6"],I[T][7]=I[N+"7"],I[T][8]=I[N+"8"],I[T][9]=I[N+"9"],I[T][10]=I[N+"10"],I[T][11]=I[N+"11"],I[T][12]=I[N+"12"],I[T][13]=I[N+"13"],I[T][14]=I[N+"0"],I[T][15]=I[N+"0"]}function Qt(N){return N==Vc||N==Ed||N==Kc||N==u}function Jt(){this.eb=[],this.size=this.A=this.fb=0}function en(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Jt,this.f.kb=new en,this.sd=null}function It(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ws(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function ia(N,T){var U=N.T,J=T.ba.f.RGBA,ce=J.eb,he=J.fb+N.ka*J.A,me=li[T.ba.S],ye=N.y,ve=N.O,Se=N.f,Te=N.N,Be=N.ea,we=N.W,ke=T.cc,Re=T.dc,Ze=T.Mc,ze=T.Nc,Qe=N.ka,Je=N.ka+N.T,ot=N.U,it=ot+1>>1;for(Qe==0?me(ye,ve,null,null,Se,Te,Be,we,Se,Te,Be,we,ce,he,null,null,ot):(me(T.ec,T.fc,ye,ve,ke,Re,Ze,ze,Se,Te,Be,we,ce,he-J.A,ce,he,ot),++U);Qe+2<Je;Qe+=2)ke=Se,Re=Te,Ze=Be,ze=we,Te+=N.Rc,we+=N.Rc,he+=2*J.A,me(ye,(ve+=2*N.fa)-N.fa,ye,ve,ke,Re,Ze,ze,Se,Te,Be,we,ce,he-J.A,ce,he,ot);return ve+=N.fa,N.j+Je<N.o?(i(T.ec,T.fc,ye,ve,ot),i(T.cc,T.dc,Se,Te,it),i(T.Mc,T.Nc,Be,we,it),U--):1&Je||me(ye,ve,null,null,Se,Te,Be,we,Se,Te,Be,we,ce,he+J.A,null,null,ot),U}function fo(N,T,U){var J=N.F,ce=[N.J];if(J!=null){var he=N.U,me=T.ba.S,ye=me==$c||me==Kc;T=T.ba.f.RGBA;var ve=[0],Se=N.ka;ve[0]=N.T,N.Kb&&(Se==0?--ve[0]:(--Se,ce[0]-=N.width),N.j+N.ka+N.T==N.o&&(ve[0]=N.o-N.j-Se));var Te=T.eb;Se=T.fb+Se*T.A,N=Hc(J,ce[0],N.width,he,ve,Te,Se+(ye?0:3),T.A),t(U==ve),N&&Qt(me)&&As(Te,Se,ye,he,ve,T.A)}return 0}function vs(N){var T=N.ma,U=T.ba.S,J=11>U,ce=U==Yi||U==cs||U==$c||U==lc||U==12||Qt(U);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!tl(T.Oa,N,ce?11:12))return 0;if(ce&&Qt(U)&&el(),N.da)alert("todo:use_scaling");else{if(J){if(T.Ib=Ws,N.Kb){if(U=N.U+1>>1,T.memory=s(N.U+2*U),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+N.U,T.Mc=T.cc,T.Nc=T.dc+U,T.Ib=ia,el()}}else alert("todo:EmitYUV");ce&&(T.Jb=fo,J&&Ki())}if(J&&!Xc){for(N=0;256>N;++N)Na[N]=89858*(N-128)+Nu>>Po,n1[N]=-22014*(N-128)+Nu,Xg[N]=-45773*(N-128),bf[N]=113618*(N-128)+Nu>>Po;for(N=Td;N<Zc;++N)T=76283*(N-16)+Nu>>Po,i1[N-Td]=ir(T,255),a1[N-Td]=ir(T+8>>4,15);Xc=1}return 1}function zt(N){var T=N.ma,U=N.U,J=N.T;return t(!(1&N.ka)),0>=U||0>=J?0:(U=T.Ib(N,T),T.Jb!=null&&T.Jb(N,T,U),T.Dc+=U,1)}function $o(N){N.ma.memory=null}function mo(N,T,U,J){return Q(N,8)!=47?0:(T[0]=Q(N,14)+1,U[0]=Q(N,14)+1,J[0]=Q(N,1),Q(N,3)!=0?0:!N.h)}function Ya(N,T){if(4>N)return N+1;var U=N-2>>1;return(2+(1&N)<<U)+Q(T,U)+1}function Za(N,T){return 120<T?T-120:1<=(U=((U=Ce[T-1])>>4)*N+(8-(15&U)))?U:1;var U}function Ir(N,T,U){var J=$(U),ce=N[T+=255&J].g-8;return 0<ce&&(Z(U,U.u+8),J=$(U),T+=N[T].value,T+=J&(1<<ce)-1),Z(U,U.u+N[T].g),N[T].value}function gt(N,T,U){return U.g+=N.g,U.value+=N.value<<T>>>0,t(8>=U.g),N.g}function bi(N,T,U){var J=N.xc;return t((T=J==0?0:N.vc[N.md*(U>>J)+(T>>J)])<N.Wb),N.Ya[T]}function Vo(N,T,U,J){var ce=N.ab,he=N.c*T,me=N.C;T=me+T;var ye=U,ve=J;for(J=N.Ta,U=N.Ua;0<ce--;){var Se=N.gc[ce],Te=me,Be=T,we=ye,ke=ve,Re=(ve=J,ye=U,Se.Ea);switch(t(Te<Be),t(Be<=Se.nc),Se.hc){case 2:Qn(we,ke,(Be-Te)*Re,ve,ye);break;case 0:var Ze=Te,ze=Be,Qe=ve,Je=ye,ot=(wt=Se).Ea;Ze==0&&(qc(we,ke,null,null,1,Qe,Je),jr(we,ke+1,0,0,ot-1,Qe,Je+1),ke+=ot,Je+=ot,++Ze);for(var it=1<<wt.b,At=it-1,xt=st(ot,wt.b),sr=wt.K,wt=wt.w+(Ze>>wt.b)*xt;Ze<ze;){var Mr=sr,Mn=wt,ur=1;for(Ba(we,ke,Qe,Je-ot,1,Qe,Je);ur<ot;){var bt=(ur&~At)+it;bt>ot&&(bt=ot),(0,No[Mr[Mn++]>>8&15])(we,ke+ +ur,Qe,Je+ur-ot,bt-ur,Qe,Je+ur),ur=bt}ke+=ot,Je+=ot,++Ze&At||(wt+=xt)}Be!=Se.nc&&i(ve,ye-Re,ve,ye+(Be-Te-1)*Re,Re);break;case 1:for(Re=we,ze=ke,ot=(we=Se.Ea)-(Je=we&~(Qe=(ke=1<<Se.b)-1)),Ze=st(we,Se.b),it=Se.K,Se=Se.w+(Te>>Se.b)*Ze;Te<Be;){for(At=it,xt=Se,sr=new Ht,wt=ze+Je,Mr=ze+we;ze<wt;)Tt(At[xt++],sr),Tl(sr,Re,ze,ke,ve,ye),ze+=ke,ye+=ke;ze<Mr&&(Tt(At[xt++],sr),Tl(sr,Re,ze,ot,ve,ye),ze+=ot,ye+=ot),++Te&Qe||(Se+=Ze)}break;case 3:if(we==ve&&ke==ye&&0<Se.b){for(ze=ve,we=Re=ye+(Be-Te)*Re-(Je=(Be-Te)*st(Se.Ea,Se.b)),ke=ve,Qe=ye,Ze=[],Je=(ot=Je)-1;0<=Je;--Je)Ze[Je]=ke[Qe+Je];for(Je=ot-1;0<=Je;--Je)ze[we+Je]=Ze[Je];nl(Se,Te,Be,ve,Re,ve,ye)}else nl(Se,Te,Be,we,ke,ve,ye)}ye=J,ve=U}ve!=U&&i(J,U,ye,ve,he)}function aa(N,T){var U=N.V,J=N.Ba+N.c*N.C,ce=T-N.C;if(t(T<=N.l.o),t(16>=ce),0<ce){var he=N.l,me=N.Ta,ye=N.Ua,ve=he.width;if(Vo(N,ce,U,J),ce=ye=[ye],t((U=N.C)<(J=T)),t(he.v<he.va),J>he.o&&(J=he.o),U<he.j){var Se=he.j-U;U=he.j,ce[0]+=Se*ve}if(U>=J?U=0:(ce[0]+=4*he.v,he.ka=U-he.j,he.U=he.va-he.v,he.T=J-U,U=1),U){if(ye=ye[0],11>(U=N.ca).S){var Te=U.f.RGBA,Be=(J=U.S,ce=he.U,he=he.T,Se=Te.eb,Te.A),we=he;for(Te=Te.fb+N.Ma*Te.A;0<we--;){var ke=me,Re=ye,Ze=ce,ze=Se,Qe=Te;switch(J){case wu:il(ke,Re,Ze,ze,Qe);break;case Yi:io(ke,Re,Ze,ze,Qe);break;case Vc:io(ke,Re,Ze,ze,Qe),As(ze,Qe,0,Ze,1,0);break;case Ad:_o(ke,Re,Ze,ze,Qe);break;case cs:Ot(ke,Re,Ze,ze,Qe,1);break;case Ed:Ot(ke,Re,Ze,ze,Qe,1),As(ze,Qe,0,Ze,1,0);break;case $c:Ot(ke,Re,Ze,ze,Qe,0);break;case Kc:Ot(ke,Re,Ze,ze,Qe,0),As(ze,Qe,1,Ze,1,0);break;case lc:Cs(ke,Re,Ze,ze,Qe);break;case u:Cs(ke,Re,Ze,ze,Qe),os(ze,Qe,Ze,1,0);break;case Pl:xa(ke,Re,Ze,ze,Qe);break;default:t(0)}ye+=ve,Te+=Be}N.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");t(N.Ma<=U.height)}}N.C=T,t(N.C<=N.i)}function tn(N){var T;if(0<N.ua)return 0;for(T=0;T<N.Wb;++T){var U=N.Ya[T].G,J=N.Ya[T].H;if(0<U[1][J[1]+0].g||0<U[2][J[2]+0].g||0<U[3][J[3]+0].g)return 0}return 1}function yn(N,T,U,J,ce,he){if(N.Z!=0){var me=N.qd,ye=N.rd;for(t(nn[N.Z]!=null);T<U;++T)nn[N.Z](me,ye,J,ce,J,ce,he),me=J,ye=ce,ce+=he;N.qd=me,N.rd=ye}}function $i(N,T){var U=N.l.ma,J=U.Z==0||U.Z==1?N.l.j:N.C;if(J=N.C<J?J:N.C,t(T<=N.l.o),T>J){var ce=N.l.width,he=U.ca,me=U.tb+ce*J,ye=N.V,ve=N.Ba+N.c*J,Se=N.gc;t(N.ab==1),t(Se[0].hc==3),Di(Se[0],J,T,ye,ve,he,me),yn(U,J,T,he,me,ce)}N.C=N.Ma=T}function Pi(N,T,U,J,ce,he,me){var ye=N.$/J,ve=N.$%J,Se=N.m,Te=N.s,Be=U+N.$,we=Be;ce=U+J*ce;var ke=U+J*he,Re=280+Te.ua,Ze=N.Pb?ye:16777216,ze=0<Te.ua?Te.Wa:null,Qe=Te.wc,Je=Be<ke?bi(Te,ve,ye):null;t(N.C<he),t(ke<=ce);var ot=!1;e:for(;;){for(;ot||Be<ke;){var it=0;if(ye>=Ze){var At=Be-U;t((Ze=N).Pb),Ze.wd=Ze.m,Ze.xd=At,0<Ze.s.ua&&ct(Ze.s.Wa,Ze.s.vb),Ze=ye+Ue}if(ve&Qe||(Je=bi(Te,ve,ye)),t(Je!=null),Je.Qb&&(T[Be]=Je.qb,ot=!0),!ot)if(ge(Se),Je.jc){it=Se,At=T;var xt=Be,sr=Je.pd[$(it)&ro-1];t(Je.jc),256>sr.g?(Z(it,it.u+sr.g),At[xt]=sr.value,it=0):(Z(it,it.u+sr.g-256),t(256<=sr.value),it=sr.value),it==0&&(ot=!0)}else it=Ir(Je.G[0],Je.H[0],Se);if(Se.h)break;if(ot||256>it){if(!ot)if(Je.nd)T[Be]=(Je.qb|it<<8)>>>0;else{if(ge(Se),ot=Ir(Je.G[1],Je.H[1],Se),ge(Se),At=Ir(Je.G[2],Je.H[2],Se),xt=Ir(Je.G[3],Je.H[3],Se),Se.h)break;T[Be]=(xt<<24|ot<<16|it<<8|At)>>>0}if(ot=!1,++Be,++ve>=J&&(ve=0,++ye,me!=null&&ye<=he&&!(ye%16)&&me(N,ye),ze!=null))for(;we<Be;)it=T[we++],ze.X[(506832829*it&4294967295)>>>ze.Mb]=it}else if(280>it){if(it=Ya(it-256,Se),At=Ir(Je.G[4],Je.H[4],Se),ge(Se),At=Za(J,At=Ya(At,Se)),Se.h)break;if(Be-U<At||ce-Be<it)break e;for(xt=0;xt<it;++xt)T[Be+xt]=T[Be+xt-At];for(Be+=it,ve+=it;ve>=J;)ve-=J,++ye,me!=null&&ye<=he&&!(ye%16)&&me(N,ye);if(t(Be<=ce),ve&Qe&&(Je=bi(Te,ve,ye)),ze!=null)for(;we<Be;)it=T[we++],ze.X[(506832829*it&4294967295)>>>ze.Mb]=it}else{if(!(it<Re))break e;for(ot=it-280,t(ze!=null);we<Be;)it=T[we++],ze.X[(506832829*it&4294967295)>>>ze.Mb]=it;it=Be,t(!(ot>>>(At=ze).Xa)),T[it]=At.X[ot],ot=!0}ot||t(Se.h==de(Se))}if(N.Pb&&Se.h&&Be<ce)t(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&ct(N.s.vb,N.s.Wa);else{if(Se.h)break e;me?.(N,ye>he?he:ye),N.a=0,N.$=Be-U}return 1}return N.a=3,0}function Xa(N){t(N!=null),N.vc=null,N.yc=null,N.Ya=null;var T=N.Wa;T!=null&&(T.X=null),N.vb=null,t(N!=null)}function Jl(){var N=new Yt;return N==null?null:(N.a=0,N.xb=Su,mn("Predictor","VP8LPredictors"),mn("Predictor","VP8LPredictors_C"),mn("PredictorAdd","VP8LPredictorsAdd"),mn("PredictorAdd","VP8LPredictorsAdd_C"),Qn=dr,Tl=nr,il=$n,io=xr,Cs=Wt,xa=Xt,_o=_r,I.VP8LMapColor32b=So,I.VP8LMapColor8b=si,N)}function $s(N,T,U,J,ce){var he=1,me=[N],ye=[T],ve=J.m,Se=J.s,Te=null,Be=0;e:for(;;){if(U)for(;he&&Q(ve,1);){var we=me,ke=ye,Re=J,Ze=1,ze=Re.m,Qe=Re.gc[Re.ab],Je=Q(ze,2);if(Re.Oc&1<<Je)he=0;else{switch(Re.Oc|=1<<Je,Qe.hc=Je,Qe.Ea=we[0],Qe.nc=ke[0],Qe.K=[null],++Re.ab,t(4>=Re.ab),Je){case 0:case 1:Qe.b=Q(ze,3)+2,Ze=$s(st(Qe.Ea,Qe.b),st(Qe.nc,Qe.b),0,Re,Qe.K),Qe.K=Qe.K[0];break;case 3:var ot,it=Q(ze,8)+1,At=16<it?0:4<it?1:2<it?2:3;if(we[0]=st(Qe.Ea,At),Qe.b=At,ot=Ze=$s(it,1,0,Re,Qe.K)){var xt,sr=it,wt=Qe,Mr=1<<(8>>wt.b),Mn=s(Mr);if(Mn==null)ot=0;else{var ur=wt.K[0],bt=wt.w;for(Mn[0]=wt.K[0][0],xt=1;xt<1*sr;++xt)Mn[xt]=qt(ur[bt+xt],Mn[xt-1]);for(;xt<4*Mr;++xt)Mn[xt]=0;wt.K[0]=null,wt.K[0]=Mn,ot=1}}Ze=ot;break;case 2:break;default:t(0)}he=Ze}}if(me=me[0],ye=ye[0],he&&Q(ve,1)&&!(he=1<=(Be=Q(ve,4))&&11>=Be)){J.a=3;break e}var pt;if(pt=he)t:{var Zn,Zt,gr,cn=J,Xi=me,_a=ye,An=Be,Mi=U,Fa=cn.m,Li=cn.s,Ar=[null],Yr=1,Xn=0,Jr=Me[An];r:for(;;){if(Mi&&Q(Fa,1)){var Ji=Q(Fa,3)+2,Jn=st(Xi,Ji),Zr=st(_a,Ji),Ci=Jn*Zr;if(!$s(Jn,Zr,0,cn,Ar))break r;for(Ar=Ar[0],Li.xc=Ji,Zn=0;Zn<Ci;++Zn){var dn=Ar[Zn]>>8&65535;Ar[Zn]=dn,dn>=Yr&&(Yr=dn+1)}}if(Fa.h)break r;for(Zt=0;5>Zt;++Zt){var Ri=O[Zt];!Zt&&0<An&&(Ri+=1<<An),Xn<Ri&&(Xn=Ri)}var Ii=l(Yr*Jr,ae),bn=Yr,Vr=l(bn,Ne);if(Vr==null)var qa=null;else t(65536>=bn),qa=Vr;var ci=s(Xn);if(qa==null||ci==null||Ii==null){cn.a=1;break r}var $t=Ii;for(Zn=gr=0;Zn<Yr;++Zn){var Vt=qa[Zn],Xr=Vt.G,Ps=Vt.H,ko=0,us=1,zi=0;for(Zt=0;5>Zt;++Zt){Ri=O[Zt],Xr[Zt]=$t,Ps[Zt]=gr,!Zt&&0<An&&(Ri+=1<<An);i:{var Jc,ed=Ri,wf=cn,En=ci,Vm=$t,Km=gr,Sf=0,dc=wf.m,s1=Q(dc,1);if(a(En,0,0,ed),s1){var Gm=Q(dc,1)+1,Qm=Q(dc,1),Nf=Q(dc,Qm==0?1:8);En[Nf]=1,Gm==2&&(En[Nf=Q(dc,8)]=1);var ca=1}else{var di=s(19),fh=Q(dc,4)+4;if(19<fh){wf.a=3;var td=0;break i}for(Jc=0;Jc<fh;++Jc)di[fe[Jc]]=Q(dc,3);var Cu=void 0,Pd=void 0,Dl=wf,_f=di,Au=ed,Cf=En,Af=0,uc=Dl.m,Ym=8,Zm=l(128,ae);n:for(;G(Zm,0,7,_f,19);){if(Q(uc,1)){var Jg=2+2*Q(uc,3);if((Cu=2+Q(uc,Jg))>Au)break n}else Cu=Au;for(Pd=0;Pd<Au&&Cu--;){ge(uc);var Xm=Zm[0+(127&$(uc))];Z(uc,uc.u+Xm.g);var rd=Xm.value;if(16>rd)Cf[Pd++]=rd,rd!=0&&(Ym=rd);else{var ey=rd==16,ty=rd-16,ry=C[ty],Jm=Q(uc,y[ty])+ry;if(Pd+Jm>Au)break n;for(var ny=ey?Ym:0;0<Jm--;)Cf[Pd++]=ny}}Af=1;break n}Af||(Dl.a=3),ca=Af}(ca=ca&&!dc.h)&&(Sf=G(Vm,Km,8,En,ed)),ca&&Sf!=0?td=Sf:(wf.a=3,td=0)}if(td==0)break r;if(us&&ee[Zt]==1&&(us=$t[gr].g==0),ko+=$t[gr].g,gr+=td,3>=Zt){var kd,Ef=ci[0];for(kd=1;kd<Ri;++kd)ci[kd]>Ef&&(Ef=ci[kd]);zi+=Ef}}if(Vt.nd=us,Vt.Qb=0,us&&(Vt.qb=(Xr[3][Ps[3]+0].value<<24|Xr[1][Ps[1]+0].value<<16|Xr[2][Ps[2]+0].value)>>>0,ko==0&&256>Xr[0][Ps[0]+0].value&&(Vt.Qb=1,Vt.qb+=Xr[0][Ps[0]+0].value<<8)),Vt.jc=!Vt.Qb&&6>zi,Vt.jc){var mh,Ol=Vt;for(mh=0;mh<ro;++mh){var hc=mh,fc=Ol.pd[hc],Tf=Ol.G[0][Ol.H[0]+hc];256<=Tf.value?(fc.g=Tf.g+256,fc.value=Tf.value):(fc.g=0,fc.value=0,hc>>=gt(Tf,8,fc),hc>>=gt(Ol.G[1][Ol.H[1]+hc],16,fc),hc>>=gt(Ol.G[2][Ol.H[2]+hc],0,fc),gt(Ol.G[3][Ol.H[3]+hc],24,fc))}}}Li.vc=Ar,Li.Wb=Yr,Li.Ya=qa,Li.yc=Ii,pt=1;break t}pt=0}if(!(he=pt)){J.a=3;break e}if(0<Be){if(Se.ua=1<<Be,!be(Se.Wa,Be)){J.a=1,he=0;break e}}else Se.ua=0;var Pf=J,Dd=me,iy=ye,Eu=Pf.s,Tu=Eu.xc;if(Pf.c=Dd,Pf.i=iy,Eu.md=st(Dd,Tu),Eu.wc=Tu==0?-1:(1<<Tu)-1,U){J.xb=kl;break e}if((Te=s(me*ye))==null){J.a=1,he=0;break e}he=(he=Pi(J,Te,0,me,ye,ye,null))&&!ve.h;break e}return he?(ce!=null?ce[0]=Te:(t(Te==null),t(U)),J.$=0,U||Xa(Se)):Xa(Se),he}function Vs(N,T){var U=N.c*N.i,J=U+T+16*T;return t(N.c<=T),N.V=s(J),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+U+T,1)}function jl(N,T){var U=N.C,J=T-U,ce=N.V,he=N.Ba+N.c*U;for(t(T<=N.l.o);0<J;){var me=16<J?16:J,ye=N.l.ma,ve=N.l.width,Se=ve*me,Te=ye.ca,Be=ye.tb+ve*U,we=N.Ta,ke=N.Ua;Vo(N,me,ce,he),ls(we,ke,Te,Be,Se),yn(ye,U,U+me,Te,Be,ve),J-=me,ce+=me*N.c,U+=me}t(U==T),N.C=N.Ma=T}function xs(){this.ub=this.yd=this.td=this.Rb=0}function Ks(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function po(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function go(){this.Yb=(function(){var N=[];return(function T(U,J,ce){for(var he=ce[J],me=0;me<he&&(U.push(ce.length>J+1?[]:0),!(ce.length<J+1));me++)T(U[me],J+1,ce)})(N,0,[3,11]),N})()}function Vn(){this.jb=s(3),this.Wc=d([4,8],go),this.Xc=d([4,17],go)}function jd(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ja(){this.ld=this.La=this.dd=this.tc=0}function Gs(){this.Na=this.la=0}function Qs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ko(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Mc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ja),this.Y=0,this.ya=Array(new Ko),this.aa=0,this.l=new Hr}function Lc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function wl(){this.cb=this.a=0,this.sc="",this.m=new V,this.Od=new xs,this.Kc=new Ks,this.ed=new jd,this.Qa=new po,this.Ic=this.$c=this.Aa=0,this.D=new Mc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,V),this.ia=0,this.pb=l(4,Qs),this.Pa=new Vn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Lc),this.Hd=0,this.rb=Array(new Gs),this.sb=0,this.wa=Array(new Ja),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ko),this.L=this.aa=0,this.gd=d([4,2],Ja),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ir(N,T){return 0>N?0:N>T?T:N}function Hr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function La(){var N=new wl;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,_t||(_t=er)),N}function Cr(N,T,U){return N.a==0&&(N.a=T,N.sc=U,N.cb=0),0}function yo(N,T,U){return 3<=U&&N[T+0]==157&&N[T+1]==1&&N[T+2]==42}function bs(N,T){if(N==null)return 0;if(N.a=0,N.sc="OK",T==null)return Cr(N,2,"null VP8Io passed to VP8GetHeaders()");var U=T.data,J=T.w,ce=T.ha;if(4>ce)return Cr(N,7,"Truncated header.");var he=U[J+0]|U[J+1]<<8|U[J+2]<<16,me=N.Od;if(me.Rb=!(1&he),me.td=he>>1&7,me.yd=he>>4&1,me.ub=he>>5,3<me.td)return Cr(N,3,"Incorrect keyframe parameters.");if(!me.yd)return Cr(N,4,"Frame not displayable.");J+=3,ce-=3;var ye=N.Kc;if(me.Rb){if(7>ce)return Cr(N,7,"cannot parse picture header");if(!yo(U,J,ce))return Cr(N,3,"Bad code word");ye.c=16383&(U[J+4]<<8|U[J+3]),ye.Td=U[J+4]>>6,ye.i=16383&(U[J+6]<<8|U[J+5]),ye.Ud=U[J+6]>>6,J+=7,ce-=7,N.za=ye.c+15>>4,N.Ub=ye.i+15>>4,T.width=ye.c,T.height=ye.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((he=N.Pa).jb,0,255,he.jb.length),t((he=N.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(me.ub>ce)return Cr(N,7,"bad partition length");z(he=N.m,U,J,me.ub),J+=me.ub,ce-=me.ub,me.Rb&&(ye.Ld=X(he),ye.Kd=X(he)),ye=N.Qa;var ve,Se=N.Pa;if(t(he!=null),t(ye!=null),ye.Cb=X(he),ye.Cb){if(ye.Bb=X(he),X(he)){for(ye.Fb=X(he),ve=0;4>ve;++ve)ye.Zb[ve]=X(he)?q(he,7):0;for(ve=0;4>ve;++ve)ye.Lb[ve]=X(he)?q(he,6):0}if(ye.Bb)for(ve=0;3>ve;++ve)Se.jb[ve]=X(he)?ie(he,8):255}else ye.Bb=0;if(he.Ka)return Cr(N,3,"cannot parse segment header");if((ye=N.ed).zd=X(he),ye.Tb=ie(he,6),ye.wb=ie(he,3),ye.Pc=X(he),ye.Pc&&X(he)){for(Se=0;4>Se;++Se)X(he)&&(ye.vd[Se]=q(he,6));for(Se=0;4>Se;++Se)X(he)&&(ye.od[Se]=q(he,6))}if(N.L=ye.Tb==0?0:ye.zd?1:2,he.Ka)return Cr(N,3,"cannot parse filter header");var Te=ce;if(ce=ve=J,J=ve+Te,ye=Te,N.Xb=(1<<ie(N.m,2))-1,Te<3*(Se=N.Xb))U=7;else{for(ve+=3*Se,ye-=3*Se,Te=0;Te<Se;++Te){var Be=U[ce+0]|U[ce+1]<<8|U[ce+2]<<16;Be>ye&&(Be=ye),z(N.Jc[+Te],U,ve,Be),ve+=Be,ye-=Be,ce+=3}z(N.Jc[+Se],U,ve,ye),U=ve<J?0:5}if(U!=0)return Cr(N,U,"cannot parse partitions");for(U=ie(ve=N.m,7),ce=X(ve)?q(ve,4):0,J=X(ve)?q(ve,4):0,ye=X(ve)?q(ve,4):0,Se=X(ve)?q(ve,4):0,ve=X(ve)?q(ve,4):0,Te=N.Qa,Be=0;4>Be;++Be){if(Te.Cb){var we=Te.Zb[Be];Te.Fb||(we+=U)}else{if(0<Be){N.pb[Be]=N.pb[0];continue}we=U}var ke=N.pb[Be];ke.Sc[0]=tt[ir(we+ce,127)],ke.Sc[1]=mt[ir(we+0,127)],ke.Eb[0]=2*tt[ir(we+J,127)],ke.Eb[1]=101581*mt[ir(we+ye,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=tt[ir(we+Se,117)],ke.Qc[1]=mt[ir(we+ve,127)],ke.lc=we+ve}if(!me.Rb)return Cr(N,4,"Not a key frame.");for(X(he),me=N.Pa,U=0;4>U;++U){for(ce=0;8>ce;++ce)for(J=0;3>J;++J)for(ye=0;11>ye;++ye)Se=_e(he,Qr[U][ce][J][ye])?ie(he,8):ds[U][ce][J][ye],me.Wc[U][ce].Yb[J][ye]=Se;for(ce=0;17>ce;++ce)me.Xc[U][ce]=me.Wc[U][Pr[ce]]}return N.kc=X(he),N.kc&&(N.Bd=ie(he,8)),N.cb=1}function er(N,T,U,J,ce,he,me){var ye=T[ce].Yb[U];for(U=0;16>ce;++ce){if(!_e(N,ye[U+0]))return ce;for(;!_e(N,ye[U+1]);)if(ye=T[++ce].Yb[0],U=0,ce==16)return 16;var ve=T[ce+1].Yb;if(_e(N,ye[U+2])){var Se=N,Te=0;if(_e(Se,(we=ye)[(Be=U)+3]))if(_e(Se,we[Be+6])){for(ye=0,Be=2*(Te=_e(Se,we[Be+8]))+(we=_e(Se,we[Be+9+Te])),Te=0,we=pr[Be];we[ye];++ye)Te+=Te+_e(Se,we[ye]);Te+=3+(8<<Be)}else _e(Se,we[Be+7])?(Te=7+2*_e(Se,165),Te+=_e(Se,145)):Te=5+_e(Se,159);else Te=_e(Se,we[Be+4])?3+_e(Se,we[Be+5]):2;ye=ve[2]}else Te=1,ye=ve[1];ve=me+Zi[ce],0>(Se=N).b&&oe(Se);var Be,we=Se.b,ke=(Be=Se.Ca>>1)-(Se.I>>we)>>31;--Se.b,Se.Ca+=ke,Se.Ca|=1,Se.I-=(Be+1&ke)<<we,he[ve]=((Te^ke)-ke)*J[(0<ce)+0]}return 16}function vn(N){var T=N.rb[N.sb-1];T.la=0,T.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function Vi(N,T,U,J,ce){ce=N[T+U+32*J]+(ce>>3),N[T+U+32*J]=-256&ce?0>ce?0:255:ce}function Bn(N,T,U,J,ce,he){Vi(N,T,0,U,J+ce),Vi(N,T,1,U,J+he),Vi(N,T,2,U,J-he),Vi(N,T,3,U,J-ce)}function Wr(N){return(20091*N>>16)+N}function Rc(N,T,U,J){var ce,he=0,me=s(16);for(ce=0;4>ce;++ce){var ye=N[T+0]+N[T+8],ve=N[T+0]-N[T+8],Se=(35468*N[T+4]>>16)-Wr(N[T+12]),Te=Wr(N[T+4])+(35468*N[T+12]>>16);me[he+0]=ye+Te,me[he+1]=ve+Se,me[he+2]=ve-Se,me[he+3]=ye-Te,he+=4,T++}for(ce=he=0;4>ce;++ce)ye=(N=me[he+0]+4)+me[he+8],ve=N-me[he+8],Se=(35468*me[he+4]>>16)-Wr(me[he+12]),Vi(U,J,0,0,ye+(Te=Wr(me[he+4])+(35468*me[he+12]>>16))),Vi(U,J,1,0,ve+Se),Vi(U,J,2,0,ve-Se),Vi(U,J,3,0,ye-Te),he++,J+=32}function ec(N,T,U,J){var ce=N[T+0]+4,he=35468*N[T+4]>>16,me=Wr(N[T+4]),ye=35468*N[T+1]>>16;Bn(U,J,0,ce+me,N=Wr(N[T+1]),ye),Bn(U,J,1,ce+he,N,ye),Bn(U,J,2,ce-he,N,ye),Bn(U,J,3,ce-me,N,ye)}function Ys(N,T,U,J,ce){Rc(N,T,U,J),ce&&Rc(N,T+16,U,J+4)}function kr(N,T,U,J){Co(N,T+0,U,J,1),Co(N,T+32,U,J+128,1)}function Zs(N,T,U,J){var ce;for(N=N[T+0]+4,ce=0;4>ce;++ce)for(T=0;4>T;++T)Vi(U,J,T,ce,N)}function Go(N,T,U,J){N[T+0]&&$r(N,T+0,U,J),N[T+16]&&$r(N,T+16,U,J+4),N[T+32]&&$r(N,T+32,U,J+128),N[T+48]&&$r(N,T+48,U,J+128+4)}function ga(N,T,U,J){var ce,he=s(16);for(ce=0;4>ce;++ce){var me=N[T+0+ce]+N[T+12+ce],ye=N[T+4+ce]+N[T+8+ce],ve=N[T+4+ce]-N[T+8+ce],Se=N[T+0+ce]-N[T+12+ce];he[0+ce]=me+ye,he[8+ce]=me-ye,he[4+ce]=Se+ve,he[12+ce]=Se-ve}for(ce=0;4>ce;++ce)me=(N=he[0+4*ce]+3)+he[3+4*ce],ye=he[1+4*ce]+he[2+4*ce],ve=he[1+4*ce]-he[2+4*ce],Se=N-he[3+4*ce],U[J+0]=me+ye>>3,U[J+16]=Se+ve>>3,U[J+32]=me-ye>>3,U[J+48]=Se-ve>>3,J+=64}function Qo(N,T,U){var J,ce=T-32,he=Qi,me=255-N[ce-1];for(J=0;J<U;++J){var ye,ve=he,Se=me+N[T-1];for(ye=0;ye<U;++ye)N[T+ye]=ve[Se+N[ce+ye]];T+=32}}function Sl(N,T){Qo(N,T,4)}function Ic(N,T){Qo(N,T,8)}function tc(N,T){Qo(N,T,16)}function Nl(N,T){var U;for(U=0;16>U;++U)i(N,T+32*U,N,T-32,16)}function zc(N,T){var U;for(U=16;0<U;--U)a(N,T,N[T-1],16),T+=32}function sa(N,T,U){var J;for(J=0;16>J;++J)a(T,U+32*J,N,16)}function Ra(N,T){var U,J=16;for(U=0;16>U;++U)J+=N[T-1+32*U]+N[T+U-32];sa(J>>5,N,T)}function vo(N,T){var U,J=8;for(U=0;16>U;++U)J+=N[T-1+32*U];sa(J>>4,N,T)}function Yo(N,T){var U,J=8;for(U=0;16>U;++U)J+=N[T+U-32];sa(J>>4,N,T)}function _l(N,T){sa(128,N,T)}function dt(N,T,U){return N+2*T+U+2>>2}function es(N,T){var U,J=T-32;for(J=new Uint8Array([dt(N[J-1],N[J+0],N[J+1]),dt(N[J+0],N[J+1],N[J+2]),dt(N[J+1],N[J+2],N[J+3]),dt(N[J+2],N[J+3],N[J+4])]),U=0;4>U;++U)i(N,T+32*U,J,0,J.length)}function Kr(N,T){var U=N[T-1],J=N[T-1+32],ce=N[T-1+64],he=N[T-1+96];Ie(N,T+0,16843009*dt(N[T-1-32],U,J)),Ie(N,T+32,16843009*dt(U,J,ce)),Ie(N,T+64,16843009*dt(J,ce,he)),Ie(N,T+96,16843009*dt(ce,he,he))}function wd(N,T){var U,J=4;for(U=0;4>U;++U)J+=N[T+U-32]+N[T-1+32*U];for(J>>=3,U=0;4>U;++U)a(N,T+32*U,J,4)}function ya(N,T){var U=N[T-1+0],J=N[T-1+32],ce=N[T-1+64],he=N[T-1-32],me=N[T+0-32],ye=N[T+1-32],ve=N[T+2-32],Se=N[T+3-32];N[T+0+96]=dt(J,ce,N[T-1+96]),N[T+1+96]=N[T+0+64]=dt(U,J,ce),N[T+2+96]=N[T+1+64]=N[T+0+32]=dt(he,U,J),N[T+3+96]=N[T+2+64]=N[T+1+32]=N[T+0+0]=dt(me,he,U),N[T+3+64]=N[T+2+32]=N[T+1+0]=dt(ye,me,he),N[T+3+32]=N[T+2+0]=dt(ve,ye,me),N[T+3+0]=dt(Se,ve,ye)}function ji(N,T){var U=N[T+1-32],J=N[T+2-32],ce=N[T+3-32],he=N[T+4-32],me=N[T+5-32],ye=N[T+6-32],ve=N[T+7-32];N[T+0+0]=dt(N[T+0-32],U,J),N[T+1+0]=N[T+0+32]=dt(U,J,ce),N[T+2+0]=N[T+1+32]=N[T+0+64]=dt(J,ce,he),N[T+3+0]=N[T+2+32]=N[T+1+64]=N[T+0+96]=dt(ce,he,me),N[T+3+32]=N[T+2+64]=N[T+1+96]=dt(he,me,ye),N[T+3+64]=N[T+2+96]=dt(me,ye,ve),N[T+3+96]=dt(ye,ve,ve)}function rc(N,T){var U=N[T-1+0],J=N[T-1+32],ce=N[T-1+64],he=N[T-1-32],me=N[T+0-32],ye=N[T+1-32],ve=N[T+2-32],Se=N[T+3-32];N[T+0+0]=N[T+1+64]=he+me+1>>1,N[T+1+0]=N[T+2+64]=me+ye+1>>1,N[T+2+0]=N[T+3+64]=ye+ve+1>>1,N[T+3+0]=ve+Se+1>>1,N[T+0+96]=dt(ce,J,U),N[T+0+64]=dt(J,U,he),N[T+0+32]=N[T+1+96]=dt(U,he,me),N[T+1+32]=N[T+2+96]=dt(he,me,ye),N[T+2+32]=N[T+3+96]=dt(me,ye,ve),N[T+3+32]=dt(ye,ve,Se)}function ts(N,T){var U=N[T+0-32],J=N[T+1-32],ce=N[T+2-32],he=N[T+3-32],me=N[T+4-32],ye=N[T+5-32],ve=N[T+6-32],Se=N[T+7-32];N[T+0+0]=U+J+1>>1,N[T+1+0]=N[T+0+64]=J+ce+1>>1,N[T+2+0]=N[T+1+64]=ce+he+1>>1,N[T+3+0]=N[T+2+64]=he+me+1>>1,N[T+0+32]=dt(U,J,ce),N[T+1+32]=N[T+0+96]=dt(J,ce,he),N[T+2+32]=N[T+1+96]=dt(ce,he,me),N[T+3+32]=N[T+2+96]=dt(he,me,ye),N[T+3+64]=dt(me,ye,ve),N[T+3+96]=dt(ye,ve,Se)}function va(N,T){var U=N[T-1+0],J=N[T-1+32],ce=N[T-1+64],he=N[T-1+96];N[T+0+0]=U+J+1>>1,N[T+2+0]=N[T+0+32]=J+ce+1>>1,N[T+2+32]=N[T+0+64]=ce+he+1>>1,N[T+1+0]=dt(U,J,ce),N[T+3+0]=N[T+1+32]=dt(J,ce,he),N[T+3+32]=N[T+1+64]=dt(ce,he,he),N[T+3+64]=N[T+2+64]=N[T+0+96]=N[T+1+96]=N[T+2+96]=N[T+3+96]=he}function Xs(N,T){var U=N[T-1+0],J=N[T-1+32],ce=N[T-1+64],he=N[T-1+96],me=N[T-1-32],ye=N[T+0-32],ve=N[T+1-32],Se=N[T+2-32];N[T+0+0]=N[T+2+32]=U+me+1>>1,N[T+0+32]=N[T+2+64]=J+U+1>>1,N[T+0+64]=N[T+2+96]=ce+J+1>>1,N[T+0+96]=he+ce+1>>1,N[T+3+0]=dt(ye,ve,Se),N[T+2+0]=dt(me,ye,ve),N[T+1+0]=N[T+3+32]=dt(U,me,ye),N[T+1+32]=N[T+3+64]=dt(J,U,me),N[T+1+64]=N[T+3+96]=dt(ce,J,U),N[T+1+96]=dt(he,ce,J)}function pn(N,T){var U;for(U=0;8>U;++U)i(N,T+32*U,N,T-32,8)}function xo(N,T){var U;for(U=0;8>U;++U)a(N,T,N[T-1],8),T+=32}function rs(N,T,U){var J;for(J=0;8>J;++J)a(T,U+32*J,N,8)}function nc(N,T){var U,J=8;for(U=0;8>U;++U)J+=N[T+U-32]+N[T-1+32*U];rs(J>>4,N,T)}function Bc(N,T){var U,J=4;for(U=0;8>U;++U)J+=N[T+U-32];rs(J>>3,N,T)}function wi(N,T){var U,J=4;for(U=0;8>U;++U)J+=N[T-1+32*U];rs(J>>3,N,T)}function js(N,T){rs(128,N,T)}function ws(N,T,U){var J=N[T-U],ce=N[T+0],he=3*(ce-J)+Es[1020+N[T-2*U]-N[T+U]],me=sl[112+(he+4>>3)];N[T-U]=Qi[255+J+sl[112+(he+3>>3)]],N[T+0]=Qi[255+ce-me]}function bo(N,T,U,J){var ce=N[T+0],he=N[T+U];return Oi[255+N[T-2*U]-N[T-U]]>J||Oi[255+he-ce]>J}function mr(N,T,U,J){return 4*Oi[255+N[T-U]-N[T+0]]+Oi[255+N[T-2*U]-N[T+U]]<=J}function ic(N,T,U,J,ce){var he=N[T-3*U],me=N[T-2*U],ye=N[T-U],ve=N[T+0],Se=N[T+U],Te=N[T+2*U],Be=N[T+3*U];return 4*Oi[255+ye-ve]+Oi[255+me-Se]>J?0:Oi[255+N[T-4*U]-he]<=ce&&Oi[255+he-me]<=ce&&Oi[255+me-ye]<=ce&&Oi[255+Be-Te]<=ce&&Oi[255+Te-Se]<=ce&&Oi[255+Se-ve]<=ce}function Si(N,T,U,J){var ce=2*J+1;for(J=0;16>J;++J)mr(N,T+J,U,ce)&&ws(N,T+J,U)}function ns(N,T,U,J){var ce=2*J+1;for(J=0;16>J;++J)mr(N,T+J*U,1,ce)&&ws(N,T+J*U,1)}function Cl(N,T,U,J){var ce;for(ce=3;0<ce;--ce)Si(N,T+=4*U,U,J)}function Sd(N,T,U,J){var ce;for(ce=3;0<ce;--ce)ns(N,T+=4,U,J)}function Js(N,T,U,J,ce,he,me,ye){for(he=2*he+1;0<ce--;){if(ic(N,T,U,he,me))if(bo(N,T,U,ye))ws(N,T,U);else{var ve=N,Se=T,Te=U,Be=ve[Se-2*Te],we=ve[Se-Te],ke=ve[Se+0],Re=ve[Se+Te],Ze=ve[Se+2*Te],ze=27*(Je=Es[1020+3*(ke-we)+Es[1020+Be-Re]])+63>>7,Qe=18*Je+63>>7,Je=9*Je+63>>7;ve[Se-3*Te]=Qi[255+ve[Se-3*Te]+Je],ve[Se-2*Te]=Qi[255+Be+Qe],ve[Se-Te]=Qi[255+we+ze],ve[Se+0]=Qi[255+ke-ze],ve[Se+Te]=Qi[255+Re-Qe],ve[Se+2*Te]=Qi[255+Ze-Je]}T+=J}}function Zo(N,T,U,J,ce,he,me,ye){for(he=2*he+1;0<ce--;){if(ic(N,T,U,he,me))if(bo(N,T,U,ye))ws(N,T,U);else{var ve=N,Se=T,Te=U,Be=ve[Se-Te],we=ve[Se+0],ke=ve[Se+Te],Re=sl[112+(4+(Ze=3*(we-Be))>>3)],Ze=sl[112+(Ze+3>>3)],ze=Re+1>>1;ve[Se-2*Te]=Qi[255+ve[Se-2*Te]+ze],ve[Se-Te]=Qi[255+Be+Ze],ve[Se+0]=Qi[255+we-Re],ve[Se+Te]=Qi[255+ke-ze]}T+=J}}function Nd(N,T,U,J,ce,he){Js(N,T,U,1,16,J,ce,he)}function Xo(N,T,U,J,ce,he){Js(N,T,1,U,16,J,ce,he)}function bu(N,T,U,J,ce,he){var me;for(me=3;0<me;--me)Zo(N,T+=4*U,U,1,16,J,ce,he)}function M(N,T,U,J,ce,he){var me;for(me=3;0<me;--me)Zo(N,T+=4,1,U,16,J,ce,he)}function le(N,T,U,J,ce,he,me,ye){Js(N,T,ce,1,8,he,me,ye),Js(U,J,ce,1,8,he,me,ye)}function je(N,T,U,J,ce,he,me,ye){Js(N,T,1,ce,8,he,me,ye),Js(U,J,1,ce,8,he,me,ye)}function Ee(N,T,U,J,ce,he,me,ye){Zo(N,T+4*ce,ce,1,8,he,me,ye),Zo(U,J+4*ce,ce,1,8,he,me,ye)}function Oe(N,T,U,J,ce,he,me,ye){Zo(N,T+4,1,ce,8,he,me,ye),Zo(U,J+4,1,ce,8,he,me,ye)}function Ge(){this.ba=new cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function at(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nt(){this.ua=0,this.Wa=new Gt,this.vb=new Gt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ne,this.yc=new ae}function Yt(){this.xb=this.a=0,this.l=new Hr,this.ca=new cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ne,this.Pb=0,this.wd=new ne,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nt,this.ab=0,this.gc=l(4,jt),this.Oc=0}function ar(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dr(N,T,U,J,ce,he,me){for(N=N==null?0:N[T+0],T=0;T<me;++T)ce[he+T]=N+U[J+T]&255,N=ce[he+T]}function On(N,T,U,J,ce,he,me){var ye;if(N==null)Dr(null,null,U,J,ce,he,me);else for(ye=0;ye<me;++ye)ce[he+ye]=N[T+ye]+U[J+ye]&255}function Kn(N,T,U,J,ce,he,me){if(N==null)Dr(null,null,U,J,ce,he,me);else{var ye,ve=N[T+0],Se=ve,Te=ve;for(ye=0;ye<me;++ye)Se=Te+(ve=N[T+ye])-Se,Te=U[J+ye]+(-256&Se?0>Se?0:255:Se)&255,Se=ve,ce[he+ye]=Te}}function rn(N,T,U,J){var ce=T.width,he=T.o;if(t(N!=null&&T!=null),0>U||0>=J||U+J>he)return null;if(!N.Cc){if(N.ga==null){var me;if(N.ga=new ar,(me=N.ga==null)||(me=T.width*T.o,t(N.Gb.length==0),N.Gb=s(me),N.Uc=0,N.Gb==null?me=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,me=1),me=!me),!me){me=N.ga;var ye=N.Fa,ve=N.P,Se=N.qc,Te=N.mb,Be=N.nb,we=ve+1,ke=Se-1,Re=me.l;if(t(ye!=null&&Te!=null&&T!=null),nn[0]=null,nn[1]=Dr,nn[2]=On,nn[3]=Kn,me.ca=Te,me.tb=Be,me.c=T.width,me.i=T.height,t(0<me.c&&0<me.i),1>=Se)T=0;else if(me.$a=3&ye[ve+0],me.Z=ye[ve+0]>>2&3,me.Lc=ye[ve+0]>>4&3,ve=ye[ve+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||ve)T=0;else if(Re.put=zt,Re.ac=vs,Re.bc=$o,Re.ma=me,Re.width=T.width,Re.height=T.height,Re.Da=T.Da,Re.v=T.v,Re.va=T.va,Re.j=T.j,Re.o=T.o,me.$a)e:{t(me.$a==1),T=Jl();t:for(;;){if(T==null){T=0;break e}if(t(me!=null),me.mc=T,T.c=me.c,T.i=me.i,T.l=me.l,T.l.ma=me,T.l.width=me.c,T.l.height=me.i,T.a=0,re(T.m,ye,we,ke),!$s(me.c,me.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&tn(T.s)?(me.ic=1,ye=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(ye),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(me.ic=0,T=Vs(T,me.c)),!T))break t;T=1;break e}me.mc=null,T=0}else T=ke>=me.c*me.i;me=!T}if(me)return null;N.ga.Lc!=1?N.Ga=0:J=he-U}t(N.ga!=null),t(U+J<=he);e:{if(T=(ye=N.ga).c,he=ye.l.o,ye.$a==0){if(we=N.rc,ke=N.Vc,Re=N.Fa,ve=N.P+1+U*T,Se=N.mb,Te=N.nb+U*T,t(ve<=N.P+N.qc),ye.Z!=0)for(t(nn[ye.Z]!=null),me=0;me<J;++me)nn[ye.Z](we,ke,Re,ve,Se,Te,T),we=Se,ke=Te,Te+=T,ve+=T;else for(me=0;me<J;++me)i(Se,Te,Re,ve,T),we=Se,ke=Te,Te+=T,ve+=T;N.rc=we,N.Vc=ke}else{if(t(ye.mc!=null),T=U+J,t((me=ye.mc)!=null),t(T<=me.i),me.C>=T)T=1;else if(ye.ic||Ki(),ye.ic){ye=me.V,we=me.Ba,ke=me.c;var Ze=me.i,ze=(Re=1,ve=me.$/ke,Se=me.$%ke,Te=me.m,Be=me.s,me.$),Qe=ke*Ze,Je=ke*T,ot=Be.wc,it=ze<Je?bi(Be,Se,ve):null;t(ze<=Qe),t(T<=Ze),t(tn(Be));t:for(;;){for(;!Te.h&&ze<Je;){if(Se&ot||(it=bi(Be,Se,ve)),t(it!=null),ge(Te),256>(Ze=Ir(it.G[0],it.H[0],Te)))ye[we+ze]=Ze,++ze,++Se>=ke&&(Se=0,++ve<=T&&!(ve%16)&&$i(me,ve));else{if(!(280>Ze)){Re=0;break t}Ze=Ya(Ze-256,Te);var At,xt=Ir(it.G[4],it.H[4],Te);if(ge(Te),!(ze>=(xt=Za(ke,xt=Ya(xt,Te)))&&Qe-ze>=Ze)){Re=0;break t}for(At=0;At<Ze;++At)ye[we+ze+At]=ye[we+ze+At-xt];for(ze+=Ze,Se+=Ze;Se>=ke;)Se-=ke,++ve<=T&&!(ve%16)&&$i(me,ve);ze<Je&&Se&ot&&(it=bi(Be,Se,ve))}t(Te.h==de(Te))}$i(me,ve>T?T:ve);break t}!Re||Te.h&&ze<Qe?(Re=0,me.a=Te.h?5:3):me.$=ze,T=Re}else T=Pi(me,me.V,me.Ba,me.c,me.i,T,jl);if(!T){J=0;break e}}U+J>=he&&(N.Cc=1),J=1}if(!J)return null;if(N.Cc&&((J=N.ga)!=null&&(J.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+U*ce}function Ni(N,T,U,J,ce,he){for(;0<ce--;){var me,ye=N,ve=T+(U?1:0),Se=N,Te=T+(U?0:3);for(me=0;me<J;++me){var Be=Se[Te+4*me];Be!=255&&(Be*=32897,ye[ve+4*me+0]=ye[ve+4*me+0]*Be>>23,ye[ve+4*me+1]=ye[ve+4*me+1]*Be>>23,ye[ve+4*me+2]=ye[ve+4*me+2]*Be>>23)}T+=he}}function Gn(N,T,U,J,ce){for(;0<J--;){var he;for(he=0;he<U;++he){var me=N[T+2*he+0],ye=15&(Se=N[T+2*he+1]),ve=4369*ye,Se=(240&Se|Se>>4)*ve>>16;N[T+2*he+0]=(240&me|me>>4)*ve>>16&240|(15&me|me<<4)*ve>>16>>4&15,N[T+2*he+1]=240&Se|ye}T+=ce}}function ki(N,T,U,J,ce,he,me,ye){var ve,Se,Te=255;for(Se=0;Se<ce;++Se){for(ve=0;ve<J;++ve){var Be=N[T+ve];he[me+4*ve]=Be,Te&=Be}T+=U,me+=ye}return Te!=255}function Ss(N,T,U,J,ce){var he;for(he=0;he<ce;++he)U[J+he]=N[T+he]>>8}function Ki(){As=Ni,os=Gn,Hc=ki,ls=Ss}function Jo(N,T,U){I[N]=function(J,ce,he,me,ye,ve,Se,Te,Be,we,ke,Re,Ze,ze,Qe,Je,ot){var it,At=ot-1>>1,xt=ye[ve+0]|Se[Te+0]<<16,sr=Be[we+0]|ke[Re+0]<<16;t(J!=null);var wt=3*xt+sr+131074>>2;for(T(J[ce+0],255&wt,wt>>16,Ze,ze),he!=null&&(wt=3*sr+xt+131074>>2,T(he[me+0],255&wt,wt>>16,Qe,Je)),it=1;it<=At;++it){var Mr=ye[ve+it]|Se[Te+it]<<16,Mn=Be[we+it]|ke[Re+it]<<16,ur=xt+Mr+sr+Mn+524296,bt=ur+2*(Mr+sr)>>3;wt=bt+xt>>1,xt=(ur=ur+2*(xt+Mn)>>3)+Mr>>1,T(J[ce+2*it-1],255&wt,wt>>16,Ze,ze+(2*it-1)*U),T(J[ce+2*it-0],255&xt,xt>>16,Ze,ze+(2*it-0)*U),he!=null&&(wt=ur+sr>>1,xt=bt+Mn>>1,T(he[me+2*it-1],255&wt,wt>>16,Qe,Je+(2*it-1)*U),T(he[me+2*it+0],255&xt,xt>>16,Qe,Je+(2*it+0)*U)),xt=Mr,sr=Mn}1&ot||(wt=3*xt+sr+131074>>2,T(J[ce+ot-1],255&wt,wt>>16,Ze,ze+(ot-1)*U),he!=null&&(wt=3*sr+xt+131074>>2,T(he[me+ot-1],255&wt,wt>>16,Qe,Je+(ot-1)*U)))}}function el(){li[wu]=cc,li[Yi]=Gc,li[Ad]=dh,li[cs]=Qc,li[$c]=ol,li[lc]=To,li[Pl]=Yc,li[Vc]=Gc,li[Ed]=Qc,li[Kc]=ol,li[u]=To}function Gi(N){return N&-16384?0>N?0:255:N>>xf}function eo(N,T){return Gi((19077*N>>8)+(26149*T>>8)-14234)}function Ns(N,T,U){return Gi((19077*N>>8)-(6419*T>>8)-(13320*U>>8)+8708)}function ac(N,T){return Gi((19077*N>>8)+(33050*T>>8)-17685)}function to(N,T,U,J,ce){J[ce+0]=eo(N,U),J[ce+1]=Ns(N,T,U),J[ce+2]=ac(N,T)}function ai(N,T,U,J,ce){J[ce+0]=ac(N,T),J[ce+1]=Ns(N,T,U),J[ce+2]=eo(N,U)}function Al(N,T,U,J,ce){var he=Ns(N,T,U);T=he<<3&224|ac(N,T)>>3,J[ce+0]=248&eo(N,U)|he>>5,J[ce+1]=T}function El(N,T,U,J,ce){var he=240&ac(N,T)|15;J[ce+0]=240&eo(N,U)|Ns(N,T,U)>>4,J[ce+1]=he}function sc(N,T,U,J,ce){J[ce+0]=255,to(N,T,U,J,ce+1)}function jo(N,T,U,J,ce){ai(N,T,U,J,ce),J[ce+3]=255}function xn(N,T,U,J,ce){to(N,T,U,J,ce),J[ce+3]=255}function Ia(N,T,U){I[N]=function(J,ce,he,me,ye,ve,Se,Te,Be){for(var we=Te+(-2&Be)*U;Te!=we;)T(J[ce+0],he[me+0],ye[ve+0],Se,Te),T(J[ce+1],he[me+0],ye[ve+0],Se,Te+U),ce+=2,++me,++ve,Te+=2*U;1&Be&&T(J[ce+0],he[me+0],ye[ve+0],Se,Te)}}function Fc(N,T,U){return U==0?N==0?T==0?6:5:T==0?4:0:U}function is(N,T,U,J,ce){switch(N>>>30){case 3:Co(T,U,J,ce,0);break;case 2:la(T,U,J,ce);break;case 1:$r(T,U,J,ce)}}function as(N,T){var U,J,ce=T.M,he=T.Nb,me=N.oc,ye=N.pc+40,ve=N.oc,Se=N.pc+584,Te=N.oc,Be=N.pc+600;for(U=0;16>U;++U)me[ye+32*U-1]=129;for(U=0;8>U;++U)ve[Se+32*U-1]=129,Te[Be+32*U-1]=129;for(0<ce?me[ye-1-32]=ve[Se-1-32]=Te[Be-1-32]=129:(a(me,ye-32-1,127,21),a(ve,Se-32-1,127,9),a(Te,Be-32-1,127,9)),J=0;J<N.za;++J){var we=T.ya[T.aa+J];if(0<J){for(U=-1;16>U;++U)i(me,ye+32*U-4,me,ye+32*U+12,4);for(U=-1;8>U;++U)i(ve,Se+32*U-4,ve,Se+32*U+4,4),i(Te,Be+32*U-4,Te,Be+32*U+4,4)}var ke=N.Gd,Re=N.Hd+J,Ze=we.ad,ze=we.Hc;if(0<ce&&(i(me,ye-32,ke[Re].y,0,16),i(ve,Se-32,ke[Re].f,0,8),i(Te,Be-32,ke[Re].ea,0,8)),we.Za){var Qe=me,Je=ye-32+16;for(0<ce&&(J>=N.za-1?a(Qe,Je,ke[Re].y[15],4):i(Qe,Je,ke[Re+1].y,0,4)),U=0;4>U;U++)Qe[Je+128+U]=Qe[Je+256+U]=Qe[Je+384+U]=Qe[Je+0+U];for(U=0;16>U;++U,ze<<=2)Qe=me,Je=ye+_i[U],Un[we.Ob[U]](Qe,Je),is(ze,Ze,16*+U,Qe,Je)}else if(Qe=Fc(J,ce,we.Ob[0]),Sa[Qe](me,ye),ze!=0)for(U=0;16>U;++U,ze<<=2)is(ze,Ze,16*+U,me,ye+_i[U]);for(U=we.Gc,Qe=Fc(J,ce,we.Dd),Ts[Qe](ve,Se),Ts[Qe](Te,Be),ze=Ze,Qe=ve,Je=Se,255&(we=0|U)&&(170&we?ja(ze,256,Qe,Je):Or(ze,256,Qe,Je)),we=Te,ze=Be,255&(U>>=8)&&(170&U?ja(Ze,320,we,ze):Or(Ze,320,we,ze)),ce<N.Ub-1&&(i(ke[Re].y,0,me,ye+480,16),i(ke[Re].f,0,ve,Se+224,8),i(ke[Re].ea,0,Te,Be+224,8)),U=8*he*N.B,ke=N.sa,Re=N.ta+16*J+16*he*N.R,Ze=N.qa,we=N.ra+8*J+U,ze=N.Ha,Qe=N.Ia+8*J+U,U=0;16>U;++U)i(ke,Re+U*N.R,me,ye+32*U,16);for(U=0;8>U;++U)i(Ze,we+U*N.B,ve,Se+32*U,8),i(ze,Qe+U*N.B,Te,Be+32*U,8)}}function oa(N,T,U,J,ce,he,me,ye,ve){var Se=[0],Te=[0],Be=0,we=ve!=null?ve.kd:0,ke=ve??new at;if(N==null||12>U)return 7;ke.data=N,ke.w=T,ke.ha=U,T=[T],U=[U],ke.gb=[ke.gb];e:{var Re=T,Ze=U,ze=ke.gb;if(t(N!=null),t(Ze!=null),t(ze!=null),ze[0]=0,12<=Ze[0]&&!n(N,Re[0],"RIFF")){if(n(N,Re[0]+8,"WEBP")){ze=3;break e}var Qe=ht(N,Re[0]+4);if(12>Qe||4294967286<Qe){ze=3;break e}if(we&&Qe>Ze[0]-8){ze=7;break e}ze[0]=Qe,Re[0]+=12,Ze[0]-=12}ze=0}if(ze!=0)return ze;for(Qe=0<ke.gb[0],U=U[0];;){e:{var Je=N;Ze=T,ze=U;var ot=Se,it=Te,At=Re=[0];if((wt=Be=[Be])[0]=0,8>ze[0])ze=7;else{if(!n(Je,Ze[0],"VP8X")){if(ht(Je,Ze[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var xt=ht(Je,Ze[0]+8),sr=1+ut(Je,Ze[0]+12);if(2147483648<=sr*(Je=1+ut(Je,Ze[0]+15))){ze=3;break e}At!=null&&(At[0]=xt),ot!=null&&(ot[0]=sr),it!=null&&(it[0]=Je),Ze[0]+=18,ze[0]-=18,wt[0]=1}ze=0}}if(Be=Be[0],Re=Re[0],ze!=0)return ze;if(Ze=!!(2&Re),!Qe&&Be)return 3;if(he!=null&&(he[0]=!!(16&Re)),me!=null&&(me[0]=Ze),ye!=null&&(ye[0]=0),me=Se[0],Re=Te[0],Be&&Ze&&ve==null){ze=0;break}if(4>U){ze=7;break}if(Qe&&Be||!Qe&&!Be&&!n(N,T[0],"ALPH")){U=[U],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{xt=N,ze=T,Qe=U;var wt=ke.gb;ot=ke.na,it=ke.P,At=ke.Sa,sr=22,t(xt!=null),t(Qe!=null),Je=ze[0];var Mr=Qe[0];for(t(ot!=null),t(At!=null),ot[0]=null,it[0]=null,At[0]=0;;){if(ze[0]=Je,Qe[0]=Mr,8>Mr){ze=7;break e}var Mn=ht(xt,Je+4);if(4294967286<Mn){ze=3;break e}var ur=8+Mn+1&-2;if(sr+=ur,0<wt&&sr>wt){ze=3;break e}if(!n(xt,Je,"VP8 ")||!n(xt,Je,"VP8L")){ze=0;break e}if(Mr[0]<ur){ze=7;break e}n(xt,Je,"ALPH")||(ot[0]=xt,it[0]=Je+8,At[0]=Mn),Je+=ur,Mr-=ur}}if(U=U[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],ze!=0)break}U=[U],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(wt=N,ze=T,Qe=U,ot=ke.gb[0],it=ke.Ja,At=ke.xa,xt=ze[0],Je=!n(wt,xt,"VP8 "),sr=!n(wt,xt,"VP8L"),t(wt!=null),t(Qe!=null),t(it!=null),t(At!=null),8>Qe[0])ze=7;else{if(Je||sr){if(wt=ht(wt,xt+4),12<=ot&&wt>ot-12){ze=3;break e}if(we&&wt>Qe[0]-8){ze=7;break e}it[0]=wt,ze[0]+=8,Qe[0]-=8,At[0]=sr}else At[0]=5<=Qe[0]&&wt[xt+0]==47&&!(wt[xt+4]>>5),it[0]=Qe[0];ze=0}if(U=U[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],T=T[0],ze!=0)break;if(4294967286<ke.Ja)return 3;if(ye==null||Ze||(ye[0]=ke.xa?2:1),me=[me],Re=[Re],ke.xa){if(5>U){ze=7;break}ye=me,we=Re,Ze=he,N==null||5>U?N=0:5<=U&&N[T+0]==47&&!(N[T+4]>>5)?(Qe=[0],wt=[0],ot=[0],re(it=new ne,N,T,U),mo(it,Qe,wt,ot)?(ye!=null&&(ye[0]=Qe[0]),we!=null&&(we[0]=wt[0]),Ze!=null&&(Ze[0]=ot[0]),N=1):N=0):N=0}else{if(10>U){ze=7;break}ye=Re,N==null||10>U||!yo(N,T+3,U-3)?N=0:(we=N[T+0]|N[T+1]<<8|N[T+2]<<16,Ze=16383&(N[T+7]<<8|N[T+6]),N=16383&(N[T+9]<<8|N[T+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=ke.Ja||!Ze||!N?N=0:(me&&(me[0]=Ze),ye&&(ye[0]=N),N=1))}if(!N||(me=me[0],Re=Re[0],Be&&(Se[0]!=me||Te[0]!=Re)))return 3;ve!=null&&(ve[0]=ke,ve.offset=T-ve.w,t(4294967286>T-ve.w),t(ve.offset==ve.ha-U));break}return ze==0||ze==7&&Be&&ve==null?(he!=null&&(he[0]|=ke.na!=null&&0<ke.na.length),J!=null&&(J[0]=me),ce!=null&&(ce[0]=Re),0):ze}function tl(N,T,U){var J=T.width,ce=T.height,he=0,me=0,ye=J,ve=ce;if(T.Da=N!=null&&0<N.Da,T.Da&&(ye=N.cd,ve=N.bd,he=N.v,me=N.j,11>U||(he&=-2,me&=-2),0>he||0>me||0>=ye||0>=ve||he+ye>J||me+ve>ce))return 0;if(T.v=he,T.j=me,T.va=he+ye,T.o=me+ve,T.U=ye,T.T=ve,T.da=N!=null&&0<N.da,T.da){if(!Pt(ye,ve,U=[N.ib],he=[N.hb]))return 0;T.ib=U[0],T.hb=he[0]}return T.ob=N!=null&&N.ob,T.Kb=N==null||!N.Sd,T.da&&(T.ob=T.ib<3*J/4&&T.hb<3*ce/4,T.Kb=0),1}function rl(N){if(N==null)return 2;if(11>N.S){var T=N.f.RGBA;T.fb+=(N.height-1)*T.A,T.A=-T.A}else T=N.f.kb,N=N.height,T.O+=(N-1)*T.fa,T.fa=-T.fa,T.N+=(N-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(N-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(N-1)*T.lb,T.lb=-T.lb);return 0}function _s(N,T,U,J){if(J==null||0>=N||0>=T)return 2;if(U!=null){if(U.Da){var ce=U.cd,he=U.bd,me=-2&U.v,ye=-2&U.j;if(0>me||0>ye||0>=ce||0>=he||me+ce>N||ye+he>T)return 2;N=ce,T=he}if(U.da){if(!Pt(N,T,ce=[U.ib],he=[U.hb]))return 2;N=ce[0],T=he[0]}}J.width=N,J.height=T;e:{var ve=J.width,Se=J.height;if(N=J.S,0>=ve||0>=Se||!(N>=wu&&13>N))N=2;else{if(0>=J.Rd&&J.sd==null){me=he=ce=T=0;var Te=(ye=ve*jf[N])*Se;if(11>N||(he=(Se+1)/2*(T=(ve+1)/2),N==12&&(me=(ce=ve)*Se)),(Se=s(Te+2*he+me))==null){N=1;break e}J.sd=Se,11>N?((ve=J.f.RGBA).eb=Se,ve.fb=0,ve.A=ye,ve.size=Te):((ve=J.f.kb).y=Se,ve.O=0,ve.fa=ye,ve.Fd=Te,ve.f=Se,ve.N=0+Te,ve.Ab=T,ve.Cd=he,ve.ea=Se,ve.W=0+Te+he,ve.Db=T,ve.Ed=he,N==12&&(ve.F=Se,ve.J=0+Te+2*he),ve.Tc=me,ve.lb=ce)}if(T=1,ce=J.S,he=J.width,me=J.height,ce>=wu&&13>ce)if(11>ce)N=J.f.RGBA,T&=(ye=Math.abs(N.A))*(me-1)+he<=N.size,T&=ye>=he*jf[ce],T&=N.eb!=null;else{N=J.f.kb,ye=(he+1)/2,Te=(me+1)/2,ve=Math.abs(N.fa),Se=Math.abs(N.Ab);var Be=Math.abs(N.Db),we=Math.abs(N.lb),ke=we*(me-1)+he;T&=ve*(me-1)+he<=N.Fd,T&=Se*(Te-1)+ye<=N.Cd,T=(T&=Be*(Te-1)+ye<=N.Ed)&ve>=he&Se>=ye&Be>=ye,T&=N.y!=null,T&=N.f!=null,T&=N.ea!=null,ce==12&&(T&=we>=he,T&=ke<=N.Tc,T&=N.F!=null)}else T=0;N=T?0:2}}return N!=0||U!=null&&U.fd&&(N=rl(J)),N}var ro=64,za=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fn=24,ss=32,wo=8,no=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];vt("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(N){return N},I.Predictor2=function(N,T,U){return T[U+0]},I.Predictor3=function(N,T,U){return T[U+1]},I.Predictor4=function(N,T,U){return T[U-1]},I.Predictor5=function(N,T,U){return Bt(Bt(N,T[U+1]),T[U+0])},I.Predictor6=function(N,T,U){return Bt(N,T[U-1])},I.Predictor7=function(N,T,U){return Bt(N,T[U+0])},I.Predictor8=function(N,T,U){return Bt(T[U-1],T[U+0])},I.Predictor9=function(N,T,U){return Bt(T[U+0],T[U+1])},I.Predictor10=function(N,T,U){return Bt(Bt(N,T[U-1]),Bt(T[U+0],T[U+1]))},I.Predictor11=function(N,T,U){var J=T[U+0];return 0>=rr(J>>24&255,N>>24&255,(T=T[U-1])>>24&255)+rr(J>>16&255,N>>16&255,T>>16&255)+rr(J>>8&255,N>>8&255,T>>8&255)+rr(255&J,255&N,255&T)?J:N},I.Predictor12=function(N,T,U){var J=T[U+0];return(lr((N>>24&255)+(J>>24&255)-((T=T[U-1])>>24&255))<<24|lr((N>>16&255)+(J>>16&255)-(T>>16&255))<<16|lr((N>>8&255)+(J>>8&255)-(T>>8&255))<<8|lr((255&N)+(255&J)-(255&T)))>>>0},I.Predictor13=function(N,T,U){var J=T[U-1];return(Nr((N=Bt(N,T[U+0]))>>24&255,J>>24&255)<<24|Nr(N>>16&255,J>>16&255)<<16|Nr(N>>8&255,J>>8&255)<<8|Nr(255&N,255&J))>>>0};var qc=I.PredictorAdd0;I.PredictorAdd1=jr,vt("Predictor2","PredictorAdd2"),vt("Predictor3","PredictorAdd3"),vt("Predictor4","PredictorAdd4"),vt("Predictor5","PredictorAdd5"),vt("Predictor6","PredictorAdd6"),vt("Predictor7","PredictorAdd7"),vt("Predictor8","PredictorAdd8"),vt("Predictor9","PredictorAdd9"),vt("Predictor10","PredictorAdd10"),vt("Predictor11","PredictorAdd11"),vt("Predictor12","PredictorAdd12"),vt("Predictor13","PredictorAdd13");var Ba=I.PredictorAdd2;kt("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),kt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Qn,nl=I.ColorIndexInverseTransform,So=I.MapARGB,Di=I.VP8LColorIndexInverseTransformAlpha,si=I.MapAlpha,No=I.VP8LPredictorsAdd=[];No.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Tl,il,io,Cs,xa,_o,ba,Co,la,ja,$r,Or,gn,qn,Ao,oi,Eo,_d,Uc,yf,lh,vf,oc,ch,As,os,Hc,ls,wa=s(511),Cd=s(2041),Wc=s(225),al=s(767),ju=0,Es=Cd,sl=Wc,Qi=al,Oi=wa,wu=0,Yi=1,Ad=2,cs=3,$c=4,lc=5,Pl=6,Vc=7,Ed=8,Kc=9,u=10,y=[2,3,7],C=[3,3,11],O=[280,256,256,256,40],ee=[0,1,1,1,0],fe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Me=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ue=8,tt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],mt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_t=null,pr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yn=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ds=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Gr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Qr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Pr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Sa=[],Un=[],Ts=[],kl=1,Su=2,nn=[],li=[];Jo("UpsampleRgbLinePair",to,3),Jo("UpsampleBgrLinePair",ai,3),Jo("UpsampleRgbaLinePair",xn,4),Jo("UpsampleBgraLinePair",jo,4),Jo("UpsampleArgbLinePair",sc,4),Jo("UpsampleRgba4444LinePair",El,2),Jo("UpsampleRgb565LinePair",Al,2);var cc=I.UpsampleRgbLinePair,dh=I.UpsampleBgrLinePair,Gc=I.UpsampleRgbaLinePair,Qc=I.UpsampleBgraLinePair,ol=I.UpsampleArgbLinePair,To=I.UpsampleRgba4444LinePair,Yc=I.UpsampleRgb565LinePair,Po=16,Nu=1<<Po-1,Td=-227,Zc=482,xf=6,Xc=0,Na=s(256),bf=s(256),Xg=s(256),n1=s(256),i1=s(Zc-Td),a1=s(Zc-Td);Ia("YuvToRgbRow",to,3),Ia("YuvToBgrRow",ai,3),Ia("YuvToRgbaRow",xn,4),Ia("YuvToBgraRow",jo,4),Ia("YuvToArgbRow",sc,4),Ia("YuvToRgba4444Row",El,2),Ia("YuvToRgb565Row",Al,2);var _i=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_u=[0,2,8],uh=[8,7,6,4,4,2,2,2,1,1,1,1],hh=1;this.WebPDecodeRGBA=function(N,T,U,J,ce){var he=Yi,me=new Ge,ye=new cr;me.ba=ye,ye.S=he,ye.width=[ye.width],ye.height=[ye.height];var ve=ye.width,Se=ye.height,Te=new It;if(Te==null||N==null)var Be=2;else t(Te!=null),Be=oa(N,T,U,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if(Be!=0?ve=0:(ve!=null&&(ve[0]=Te.width[0]),Se!=null&&(Se[0]=Te.height[0]),ve=1),ve){ye.width=ye.width[0],ye.height=ye.height[0],J!=null&&(J[0]=ye.width),ce!=null&&(ce[0]=ye.height);e:{if(J=new Hr,(ce=new at).data=N,ce.w=T,ce.ha=U,ce.kd=1,T=[0],t(ce!=null),((N=oa(ce.data,ce.w,ce.ha,null,null,null,T,null,ce))==0||N==7)&&T[0]&&(N=4),(T=N)==0){if(t(me!=null),J.data=ce.data,J.w=ce.w+ce.offset,J.ha=ce.ha-ce.offset,J.put=zt,J.ac=vs,J.bc=$o,J.ma=me,ce.xa){if((N=Jl())==null){me=1;break e}if((function(we,ke){var Re=[0],Ze=[0],ze=[0];t:for(;;){if(we==null)return 0;if(ke==null)return we.a=2,0;if(we.l=ke,we.a=0,re(we.m,ke.data,ke.w,ke.ha),!mo(we.m,Re,Ze,ze)){we.a=3;break t}if(we.xb=Su,ke.width=Re[0],ke.height=Ze[0],!$s(Re[0],Ze[0],1,we,null))break t;return 1}return t(we.a!=0),0})(N,J)){if(J=(T=_s(J.width,J.height,me.Oa,me.ba))==0){t:{J=N;r:for(;;){if(J==null){J=0;break t}if(t(J.s.yc!=null),t(J.s.Ya!=null),t(0<J.s.Wb),t((U=J.l)!=null),t((ce=U.ma)!=null),J.xb!=0){if(J.ca=ce.ba,J.tb=ce.tb,t(J.ca!=null),!tl(ce.Oa,U,cs)){J.a=2;break r}if(!Vs(J,U.width)||U.da)break r;if((U.da||Qt(J.ca.S))&&Ki(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&Ki()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!be(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!Pi(J,J.V,J.Ba,J.c,J.i,U.o,aa))break r;ce.Dc=J.Ma,J=1;break t}t(J.a!=0),J=0}J=!J}J&&(T=N.a)}else T=N.a}else{if((N=new La)==null){me=1;break e}if(N.Fa=ce.na,N.P=ce.P,N.qc=ce.Sa,bs(N,J)){if((T=_s(J.width,J.height,me.Oa,me.ba))==0){if(N.Aa=0,U=me.Oa,t((ce=N)!=null),U!=null){if(0<(ve=0>(ve=U.Md)?0:100<ve?255:255*ve/100)){for(Se=Te=0;4>Se;++Se)12>(Be=ce.pb[Se]).lc&&(Be.ia=ve*uh[0>Be.lc?0:Be.lc]>>3),Te|=Be.ia;Te&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=U.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}(function(we,ke){if(we==null)return 0;if(ke==null)return Cr(we,2,"NULL VP8Io parameter in VP8Decode().");if(!we.cb&&!bs(we,ke))return 0;if(t(we.cb),ke.ac==null||ke.ac(ke)){ke.ob&&(we.L=0);var Re=_u[we.L];if(we.L==2?(we.yb=0,we.zb=0):(we.yb=ke.v-Re>>4,we.zb=ke.j-Re>>4,0>we.yb&&(we.yb=0),0>we.zb&&(we.zb=0)),we.Va=ke.o+15+Re>>4,we.Hb=ke.va+15+Re>>4,we.Hb>we.za&&(we.Hb=we.za),we.Va>we.Ub&&(we.Va=we.Ub),0<we.L){var Ze=we.ed;for(Re=0;4>Re;++Re){var ze;if(we.Qa.Cb){var Qe=we.Qa.Lb[Re];we.Qa.Fb||(Qe+=Ze.Tb)}else Qe=Ze.Tb;for(ze=0;1>=ze;++ze){var Je=we.gd[Re][ze],ot=Qe;if(Ze.Pc&&(ot+=Ze.vd[0],ze&&(ot+=Ze.od[0])),0<(ot=0>ot?0:63<ot?63:ot)){var it=ot;0<Ze.wb&&(it=4<Ze.wb?it>>2:it>>1)>9-Ze.wb&&(it=9-Ze.wb),1>it&&(it=1),Je.dd=it,Je.tc=2*ot+it,Je.ld=40<=ot?2:15<=ot?1:0}else Je.tc=0;Je.La=ze}}}Re=0}else Cr(we,6,"Frame setup failed"),Re=we.a;if(Re=Re==0){if(Re){we.$c=0,0<we.Aa||(we.Ic=hh);t:{Re=we.Ic,Ze=4*(it=we.za);var At=32*it,xt=it+1,sr=0<we.L?it*(0<we.Aa?2:1):0,wt=(we.Aa==2?2:1)*it;if((Je=Ze+832+(ze=3*(16*Re+_u[we.L])/2*At)+(Qe=we.Fa!=null&&0<we.Fa.length?we.Kc.c*we.Kc.i:0))!=Je)Re=0;else{if(Je>we.Vb){if(we.Vb=0,we.Ec=s(Je),we.Fc=0,we.Ec==null){Re=Cr(we,1,"no memory during frame initialization.");break t}we.Vb=Je}Je=we.Ec,ot=we.Fc,we.Ac=Je,we.Bc=ot,ot+=Ze,we.Gd=l(At,Lc),we.Hd=0,we.rb=l(xt+1,Gs),we.sb=1,we.wa=sr?l(sr,Ja):null,we.Y=0,we.D.Nb=0,we.D.wa=we.wa,we.D.Y=we.Y,0<we.Aa&&(we.D.Y+=it),t(!0),we.oc=Je,we.pc=ot,ot+=832,we.ya=l(wt,Ko),we.aa=0,we.D.ya=we.ya,we.D.aa=we.aa,we.Aa==2&&(we.D.aa+=it),we.R=16*it,we.B=8*it,it=(At=_u[we.L])*we.R,At=At/2*we.B,we.sa=Je,we.ta=ot+it,we.qa=we.sa,we.ra=we.ta+16*Re*we.R+At,we.Ha=we.qa,we.Ia=we.ra+8*Re*we.B+At,we.$c=0,ot+=ze,we.mb=Qe?Je:null,we.nb=Qe?ot:null,t(ot+Qe<=we.Fc+we.Vb),vn(we),a(we.Ac,we.Bc,0,Ze),Re=1}}if(Re){if(ke.ka=0,ke.y=we.sa,ke.O=we.ta,ke.f=we.qa,ke.N=we.ra,ke.ea=we.Ha,ke.Vd=we.Ia,ke.fa=we.R,ke.Rc=we.B,ke.F=null,ke.J=0,!ju){for(Re=-255;255>=Re;++Re)wa[255+Re]=0>Re?-Re:Re;for(Re=-1020;1020>=Re;++Re)Cd[1020+Re]=-128>Re?-128:127<Re?127:Re;for(Re=-112;112>=Re;++Re)Wc[112+Re]=-16>Re?-16:15<Re?15:Re;for(Re=-255;510>=Re;++Re)al[255+Re]=0>Re?0:255<Re?255:Re;ju=1}ba=ga,Co=Ys,ja=kr,$r=Zs,Or=Go,la=ec,gn=Nd,qn=Xo,Ao=le,oi=je,Eo=bu,_d=M,Uc=Ee,yf=Oe,lh=Si,vf=ns,oc=Cl,ch=Sd,Un[0]=wd,Un[1]=Sl,Un[2]=es,Un[3]=Kr,Un[4]=ya,Un[5]=rc,Un[6]=ji,Un[7]=ts,Un[8]=Xs,Un[9]=va,Sa[0]=Ra,Sa[1]=tc,Sa[2]=Nl,Sa[3]=zc,Sa[4]=vo,Sa[5]=Yo,Sa[6]=_l,Ts[0]=nc,Ts[1]=Ic,Ts[2]=pn,Ts[3]=xo,Ts[4]=wi,Ts[5]=Bc,Ts[6]=js,Re=1}else Re=0}Re&&(Re=(function(Mr,Mn){for(Mr.M=0;Mr.M<Mr.Va;++Mr.M){var ur,bt=Mr.Jc[Mr.M&Mr.Xb],pt=Mr.m,Zn=Mr;for(ur=0;ur<Zn.za;++ur){var Zt=pt,gr=Zn,cn=gr.Ac,Xi=gr.Bc+4*ur,_a=gr.zc,An=gr.ya[gr.aa+ur];if(gr.Qa.Bb?An.$b=_e(Zt,gr.Pa.jb[0])?2+_e(Zt,gr.Pa.jb[2]):_e(Zt,gr.Pa.jb[1]):An.$b=0,gr.kc&&(An.Ad=_e(Zt,gr.Bd)),An.Za=!_e(Zt,145)+0,An.Za){var Mi=An.Ob,Fa=0;for(gr=0;4>gr;++gr){var Li,Ar=_a[0+gr];for(Li=0;4>Li;++Li){Ar=Gr[cn[Xi+Li]][Ar];for(var Yr=Yn[_e(Zt,Ar[0])];0<Yr;)Yr=Yn[2*Yr+_e(Zt,Ar[Yr])];Ar=-Yr,cn[Xi+Li]=Ar}i(Mi,Fa,cn,Xi,4),Fa+=4,_a[0+gr]=Ar}}else Ar=_e(Zt,156)?_e(Zt,128)?1:3:_e(Zt,163)?2:0,An.Ob[0]=Ar,a(cn,Xi,Ar,4),a(_a,0,Ar,4);An.Dd=_e(Zt,142)?_e(Zt,114)?_e(Zt,183)?1:3:2:0}if(Zn.m.Ka)return Cr(Mr,7,"Premature end-of-partition0 encountered.");for(;Mr.ja<Mr.za;++Mr.ja){if(Zn=bt,Zt=(pt=Mr).rb[pt.sb-1],cn=pt.rb[pt.sb+pt.ja],ur=pt.ya[pt.aa+pt.ja],Xi=pt.kc?ur.Ad:0)Zt.la=cn.la=0,ur.Za||(Zt.Na=cn.Na=0),ur.Hc=0,ur.Gc=0,ur.ia=0;else{var Xn,Jr;if(Zt=cn,cn=Zn,Xi=pt.Pa.Xc,_a=pt.ya[pt.aa+pt.ja],An=pt.pb[_a.$b],gr=_a.ad,Mi=0,Fa=pt.rb[pt.sb-1],Ar=Li=0,a(gr,Mi,0,384),_a.Za)var Ji=0,Jn=Xi[3];else{Yr=s(16);var Zr=Zt.Na+Fa.Na;if(Zr=_t(cn,Xi[1],Zr,An.Eb,0,Yr,0),Zt.Na=Fa.Na=(0<Zr)+0,1<Zr)ba(Yr,0,gr,Mi);else{var Ci=Yr[0]+3>>3;for(Yr=0;256>Yr;Yr+=16)gr[Mi+Yr]=Ci}Ji=1,Jn=Xi[0]}var dn=15&Zt.la,Ri=15&Fa.la;for(Yr=0;4>Yr;++Yr){var Ii=1&Ri;for(Ci=Jr=0;4>Ci;++Ci)dn=dn>>1|(Ii=(Zr=_t(cn,Jn,Zr=Ii+(1&dn),An.Sc,Ji,gr,Mi))>Ji)<<7,Jr=Jr<<2|(3<Zr?3:1<Zr?2:gr[Mi+0]!=0),Mi+=16;dn>>=4,Ri=Ri>>1|Ii<<7,Li=(Li<<8|Jr)>>>0}for(Jn=dn,Ji=Ri>>4,Xn=0;4>Xn;Xn+=2){for(Jr=0,dn=Zt.la>>4+Xn,Ri=Fa.la>>4+Xn,Yr=0;2>Yr;++Yr){for(Ii=1&Ri,Ci=0;2>Ci;++Ci)Zr=Ii+(1&dn),dn=dn>>1|(Ii=0<(Zr=_t(cn,Xi[2],Zr,An.Qc,0,gr,Mi)))<<3,Jr=Jr<<2|(3<Zr?3:1<Zr?2:gr[Mi+0]!=0),Mi+=16;dn>>=2,Ri=Ri>>1|Ii<<5}Ar|=Jr<<4*Xn,Jn|=dn<<4<<Xn,Ji|=(240&Ri)<<Xn}Zt.la=Jn,Fa.la=Ji,_a.Hc=Li,_a.Gc=Ar,_a.ia=43690&Ar?0:An.ia,Xi=!(Li|Ar)}if(0<pt.L&&(pt.wa[pt.Y+pt.ja]=pt.gd[ur.$b][ur.Za],pt.wa[pt.Y+pt.ja].La|=!Xi),Zn.Ka)return Cr(Mr,7,"Premature end-of-file encountered.")}if(vn(Mr),pt=Mn,Zn=1,ur=(bt=Mr).D,Zt=0<bt.L&&bt.M>=bt.zb&&bt.M<=bt.Va,bt.Aa==0)t:{if(ur.M=bt.M,ur.uc=Zt,as(bt,ur),Zn=1,ur=(Jr=bt.D).Nb,Zt=(Ar=_u[bt.L])*bt.R,cn=Ar/2*bt.B,Yr=16*ur*bt.R,Ci=8*ur*bt.B,Xi=bt.sa,_a=bt.ta-Zt+Yr,An=bt.qa,gr=bt.ra-cn+Ci,Mi=bt.Ha,Fa=bt.Ia-cn+Ci,Ri=(dn=Jr.M)==0,Li=dn>=bt.Va-1,bt.Aa==2&&as(bt,Jr),Jr.uc)for(Ii=(Zr=bt).D.M,t(Zr.D.uc),Jr=Zr.yb;Jr<Zr.Hb;++Jr){Ji=Jr,Jn=Ii;var bn=(Vr=(zi=Zr).D).Nb;Xn=zi.R;var Vr=Vr.wa[Vr.Y+Ji],qa=zi.sa,ci=zi.ta+16*bn*Xn+16*Ji,$t=Vr.dd,Vt=Vr.tc;if(Vt!=0)if(t(3<=Vt),zi.L==1)0<Ji&&vf(qa,ci,Xn,Vt+4),Vr.La&&ch(qa,ci,Xn,Vt),0<Jn&&lh(qa,ci,Xn,Vt+4),Vr.La&&oc(qa,ci,Xn,Vt);else{var Xr=zi.B,Ps=zi.qa,ko=zi.ra+8*bn*Xr+8*Ji,us=zi.Ha,zi=zi.Ia+8*bn*Xr+8*Ji;bn=Vr.ld,0<Ji&&(qn(qa,ci,Xn,Vt+4,$t,bn),oi(Ps,ko,us,zi,Xr,Vt+4,$t,bn)),Vr.La&&(_d(qa,ci,Xn,Vt,$t,bn),yf(Ps,ko,us,zi,Xr,Vt,$t,bn)),0<Jn&&(gn(qa,ci,Xn,Vt+4,$t,bn),Ao(Ps,ko,us,zi,Xr,Vt+4,$t,bn)),Vr.La&&(Eo(qa,ci,Xn,Vt,$t,bn),Uc(Ps,ko,us,zi,Xr,Vt,$t,bn))}}if(bt.ia&&alert("todo:DitherRow"),pt.put!=null){if(Jr=16*dn,dn=16*(dn+1),Ri?(pt.y=bt.sa,pt.O=bt.ta+Yr,pt.f=bt.qa,pt.N=bt.ra+Ci,pt.ea=bt.Ha,pt.W=bt.Ia+Ci):(Jr-=Ar,pt.y=Xi,pt.O=_a,pt.f=An,pt.N=gr,pt.ea=Mi,pt.W=Fa),Li||(dn-=Ar),dn>pt.o&&(dn=pt.o),pt.F=null,pt.J=null,bt.Fa!=null&&0<bt.Fa.length&&Jr<dn&&(pt.J=rn(bt,pt,Jr,dn-Jr),pt.F=bt.mb,pt.F==null&&pt.F.length==0)){Zn=Cr(bt,3,"Could not decode alpha data.");break t}Jr<pt.j&&(Ar=pt.j-Jr,Jr=pt.j,t(!(1&Ar)),pt.O+=bt.R*Ar,pt.N+=bt.B*(Ar>>1),pt.W+=bt.B*(Ar>>1),pt.F!=null&&(pt.J+=pt.width*Ar)),Jr<dn&&(pt.O+=pt.v,pt.N+=pt.v>>1,pt.W+=pt.v>>1,pt.F!=null&&(pt.J+=pt.v),pt.ka=Jr-pt.j,pt.U=pt.va-pt.v,pt.T=dn-Jr,Zn=pt.put(pt))}ur+1!=bt.Ic||Li||(i(bt.sa,bt.ta-Zt,Xi,_a+16*bt.R,Zt),i(bt.qa,bt.ra-cn,An,gr+8*bt.B,cn),i(bt.Ha,bt.Ia-cn,Mi,Fa+8*bt.B,cn))}if(!Zn)return Cr(Mr,6,"Output aborted.")}return 1})(we,ke)),ke.bc!=null&&ke.bc(ke),Re&=1}return Re?(we.cb=0,Re):0})(N,J)||(T=N.a)}}else T=N.a}T==0&&me.Oa!=null&&me.Oa.fd&&(T=rl(me.ba))}me=T}he=me!=0?null:11>he?ye.f.RGBA.eb:ye.f.kb.y}else he=null;return he};var jf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(I,R){for(var Y="",G=0;G<4;G++)Y+=String.fromCharCode(I[R++]);return Y}function p(I,R){return I[R+0]|I[R+1]<<8}function g(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16)>>>0}function j(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16|I[R+3]<<24)>>>0}new h;var v=[0],b=[0],w=[],S=new h,_=e,E=(function(I,R){var Y={},G=0,ae=!1,se=0,Ne=0;if(Y.frames=[],!(function(V,ne){for(var $=0;$<4;$++)if(V[ne+$]!="RIFF".charCodeAt($))return!0;return!1})(I,R)){for(j(I,R+=4),R+=8;R<I.length;){var z=f(I,R),ie=j(I,R+=4);R+=4;var q=ie+(1&ie);switch(z){case"VP8 ":case"VP8L":Y.frames[G]===void 0&&(Y.frames[G]={}),(Q=Y.frames[G]).src_off=ae?Ne:R-8,Q.src_size=se+ie+8,G++,ae&&(ae=!1,se=0,Ne=0);break;case"VP8X":(Q=Y.header={}).feature_flags=I[R];var re=R+4;Q.canvas_width=1+g(I,re),re+=3,Q.canvas_height=1+g(I,re),re+=3;break;case"ALPH":ae=!0,se=q+8,Ne=R-8;break;case"ANIM":(Q=Y.header).bgcolor=j(I,R),re=R+4,Q.loop_count=p(I,re),re+=2;break;case"ANMF":var ue,Q;(Q=Y.frames[G]={}).offset_x=2*g(I,R),R+=3,Q.offset_y=2*g(I,R),R+=3,Q.width=1+g(I,R),R+=3,Q.height=1+g(I,R),R+=3,Q.duration=g(I,R),R+=3,ue=I[R++],Q.dispose=1&ue,Q.blend=ue>>1&1}z!="ANMF"&&(R+=q)}return Y}})(_,0);E.response=_,E.rgbaoutput=!0,E.dataurl=!1;var D=E.header?E.header:null,W=E.frames?E.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],b=[D.canvas_width];for(var K=0;K<W.length&&W[K].blend!=0;K++);}var B=W[0],F=S.WebPDecodeRGBA(_,B.src_off,B.src_size,b,v);B.rgba=F,B.imgwidth=b[0],B.imgheight=v[0];for(var H=0;H<b[0]*v[0]*4;H++)w[H]=F[H];return this.width=b,this.height=v,this.data=w,this}function Ome(){var e,t=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(t));e=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+e.length+" >>"),this.internal.write("stream"),this.internal.write(e),this.internal.write("endstream"),this.internal.write("endobj")}function Mme(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(e){var t,n,i,a,s,l,d,h,f,p=function(V){return V=V||{},this.isStrokeTransparent=V.isStrokeTransparent||!1,this.strokeOpacity=V.strokeOpacity||1,this.strokeStyle=V.strokeStyle||"#000000",this.fillStyle=V.fillStyle||"#000000",this.isFillTransparent=V.isFillTransparent||!1,this.fillOpacity=V.fillOpacity||1,this.font=V.font||"10px sans-serif",this.textBaseline=V.textBaseline||"alphabetic",this.textAlign=V.textAlign||"left",this.lineWidth=V.lineWidth||1,this.lineJoin=V.lineJoin||"miter",this.lineCap=V.lineCap||"butt",this.path=V.path||[],this.transform=V.transform!==void 0?V.transform.clone():new h,this.globalCompositeOperation=V.globalCompositeOperation||"normal",this.globalAlpha=V.globalAlpha||1,this.clip_path=V.clip_path||[],this.currentPoint=V.currentPoint||new l,this.miterLimit=V.miterLimit||10,this.lastPoint=V.lastPoint||new l,this.lineDashOffset=V.lineDashOffset||0,this.lineDash=V.lineDash||[],this.margin=V.margin||[0,0,0,0],this.prevPageLastElemOffset=V.prevPageLastElemOffset||0,this.ignoreClearRect=typeof V.ignoreClearRect!="boolean"||V.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var g=function(V){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ne=V;Object.defineProperty(this,"pdf",{get:function(){return ne}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(be){$=!!be}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(be){de=!!be}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(be){isNaN(be)||(Z=be)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(be){isNaN(be)||(ge=be)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(be){var ct;typeof be=="number"?ct=[be,be,be,be]:((ct=new Array(4))[0]=be[0],ct[1]=be.length>=2?be[1]:ct[0],ct[2]=be.length>=3?be[2]:ct[0],ct[3]=be.length>=4?be[3]:ct[1]),f.margin=ct}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(be){oe=be}});var X=0;Object.defineProperty(this,"lastBreak",{get:function(){return X},set:function(be){X=be}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(be){_e=be}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(be){be instanceof p&&(f=be)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(be){f.path=be}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(be){Ie=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ct;ct=j(be),this.ctx.fillStyle=ct.style,this.ctx.isFillTransparent=ct.a===0,this.ctx.fillOpacity=ct.a,this.pdf.setFillColor(ct.r,ct.g,ct.b,{a:ct.a}),this.pdf.setTextColor(ct.r,ct.g,ct.b,{a:ct.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ct=j(be);this.ctx.strokeStyle=ct.style,this.ctx.isStrokeTransparent=ct.a===0,this.ctx.strokeOpacity=ct.a,ct.a===0?this.pdf.setDrawColor(255,255,255):(ct.a,this.pdf.setDrawColor(ct.r,ct.g,ct.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var De=null,ut=null,ht=null;Object.defineProperty(this,"fontFaces",{get:function(){return ht},set:function(be){De=null,ut=null,ht=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ct;if(this.ctx.font=be,(ct=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(be))!==null){var Gt=ct[1];ct[2];var Pt=ct[3],st=ct[4];ct[5];var qt=ct[6],vt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(vt==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:vt==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var Ht=(function(kt){var $n,xr,Wt=[],Xt=kt.trim();if(Xt==="")return Tj;if(Xt in b6)return[b6[Xt]];for(;Xt!=="";){switch(xr=null,$n=(Xt=w6(Xt)).charAt(0)){case'"':case"'":xr=Ame(Xt.substring(1),$n);break;default:xr=Eme(Xt)}if(xr===null||(Wt.push(xr[0]),(Xt=w6(xr[1]))!==""&&Xt.charAt(0)!==","))return Tj;Xt=Xt.replace(/^,/,"")}return Wt})(qt);if(this.fontFaces){var Bt=(function(kt,$n){var xr=kt.getFontList(),Wt=JSON.stringify(xr);if(De===null||ut!==Wt){var Xt=(function(_r){var Ot=[];return Object.keys(_r).forEach(function(mn){_r[mn].forEach(function(Qt){var Jt=null;switch(Qt){case"bold":Jt={family:mn,weight:"bold"};break;case"italic":Jt={family:mn,style:"italic"};break;case"bolditalic":Jt={family:mn,weight:"bold",style:"italic"};break;case"":case"normal":Jt={family:mn}}Jt!==null&&(Jt.ref={name:mn,style:Qt},Ot.push(Jt))})}),Ot})(xr);De=(function(_r){for(var Ot={},mn=0;mn<_r.length;++mn){var Qt=Ej(_r[mn]),Jt=Qt.family,en=Qt.stretch,cr=Qt.style,It=Qt.weight;Ot[Jt]=Ot[Jt]||{},Ot[Jt][en]=Ot[Jt][en]||{},Ot[Jt][en][cr]=Ot[Jt][en][cr]||{},Ot[Jt][en][cr][It]=Qt}return Ot})(Xt.concat($n)),ut=Wt}return De})(this.pdf,this.fontFaces),lr=Ht.map(function(kt){return{family:kt,stretch:"normal",weight:Pt,style:Gt}}),Nr=(function(kt,$n,xr){for(var Wt=(xr=xr||{}).defaultFontFamily||"times",Xt=Object.assign({},Cme,xr.genericFontFamilies||{}),_r=null,Ot=null,mn=0;mn<$n.length;++mn)if(Xt[(_r=Ej($n[mn])).family]&&(_r.family=Xt[_r.family]),kt.hasOwnProperty(_r.family)){Ot=kt[_r.family];break}if(!(Ot=Ot||kt[Wt]))throw new Error("Could not find a font-family for the rule '"+j6(_r)+"' and default family '"+Wt+"'.");if(Ot=(function(Qt,Jt){if(Jt[Qt])return Jt[Qt];var en=Ow[Qt],cr=en<=Ow.normal?-1:1,It=x6(Jt,k7,en,cr);if(!It)throw new Error("Could not find a matching font-stretch value for "+Qt);return It})(_r.stretch,Ot),Ot=(function(Qt,Jt){if(Jt[Qt])return Jt[Qt];for(var en=P7[Qt],cr=0;cr<en.length;++cr)if(Jt[en[cr]])return Jt[en[cr]];throw new Error("Could not find a matching font-style for "+Qt)})(_r.style,Ot),!(Ot=(function(Qt,Jt){if(Jt[Qt])return Jt[Qt];if(Qt===400&&Jt[500])return Jt[500];if(Qt===500&&Jt[400])return Jt[400];var en=_me[Qt],cr=x6(Jt,D7,en,Qt<400?-1:1);if(!cr)throw new Error("Could not find a matching font-weight for value "+Qt);return cr})(_r.weight,Ot)))throw new Error("Failed to resolve a font for the rule '"+j6(_r)+"'.");return Ot})(Bt,lr);this.pdf.setFont(Nr.ref.name,Nr.ref.style)}else{var rr="";(Pt==="bold"||parseInt(Pt,10)>=700||Gt==="bold")&&(rr="bold"),Gt==="italic"&&(rr+="italic"),rr.length===0&&(rr="normal");for(var jr="",dr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Tt=0;Tt<Ht.length;Tt++){if(this.pdf.internal.getFont(Ht[Tt],rr,{noFallback:!0,disableWarning:!0})!==void 0){jr=Ht[Tt];break}if(rr==="bolditalic"&&this.pdf.internal.getFont(Ht[Tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jr=Ht[Tt],rr="bold";else if(this.pdf.internal.getFont(Ht[Tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jr=Ht[Tt],rr="normal";break}}if(jr===""){for(var nr=0;nr<Ht.length;nr++)if(dr[Ht[nr]]){jr=dr[Ht[nr]];break}}jr=jr===""?"Times":jr,this.pdf.setFont(jr,rr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};g.prototype.setLineDash=function(V){this.lineDash=V},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){W.call(this,"fill",!1)},g.prototype.stroke=function(){W.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(V,ne){if(isNaN(V)||isNaN(ne))throw Rn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new l(V,ne));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new l(V,ne)},g.prototype.closePath=function(){var V=new l(0,0),ne=0;for(ne=this.path.length-1;ne!==-1;ne--)if(this.path[ne].type==="begin"&&_n(this.path[ne+1])==="object"&&typeof this.path[ne+1].x=="number"){V=new l(this.path[ne+1].x,this.path[ne+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(V.x,V.y)},g.prototype.lineTo=function(V,ne){if(isNaN(V)||isNaN(ne))throw Rn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new l(V,ne));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new l($.x,$.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},g.prototype.quadraticCurveTo=function(V,ne,$,de){if(isNaN($)||isNaN(de)||isNaN(V)||isNaN(ne))throw Rn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new l($,de)),ge=this.ctx.transform.applyToPoint(new l(V,ne));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new l(Z.x,Z.y)},g.prototype.bezierCurveTo=function(V,ne,$,de,Z,ge){if(isNaN(Z)||isNaN(ge)||isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de))throw Rn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new l(Z,ge)),X=this.ctx.transform.applyToPoint(new l(V,ne)),_e=this.ctx.transform.applyToPoint(new l($,de));this.path.push({type:"bct",x1:X.x,y1:X.y,x2:_e.x,y2:_e.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new l(oe.x,oe.y)},g.prototype.arc=function(V,ne,$,de,Z,ge){if(isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de)||isNaN(Z))throw Rn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new l(V,ne));V=oe.x,ne=oe.y;var X=this.ctx.transform.applyToPoint(new l(0,$)),_e=this.ctx.transform.applyToPoint(new l(0,0));$=Math.sqrt(Math.pow(X.x-_e.x,2)+Math.pow(X.y-_e.y,2))}Math.abs(Z-de)>=2*Math.PI&&(de=0,Z=2*Math.PI),this.path.push({type:"arc",x:V,y:ne,radius:$,startAngle:de,endAngle:Z,counterclockwise:ge})},g.prototype.arcTo=function(V,ne,$,de,Z){throw new Error("arcTo not implemented.")},g.prototype.rect=function(V,ne,$,de){if(isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de))throw Rn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(V,ne),this.lineTo(V+$,ne),this.lineTo(V+$,ne+de),this.lineTo(V,ne+de),this.lineTo(V,ne),this.lineTo(V+$,ne),this.lineTo(V,ne)},g.prototype.fillRect=function(V,ne,$,de){if(isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de))throw Rn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(V,ne,$,de),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},g.prototype.strokeRect=function(V,ne,$,de){if(isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de))throw Rn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(V,ne,$,de),this.stroke())},g.prototype.clearRect=function(V,ne,$,de){if(isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de))throw Rn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(V,ne,$,de))},g.prototype.save=function(V){V=typeof V!="boolean"||V;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(ne),V){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},g.prototype.restore=function(V){V=typeof V!="boolean"||V;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(ne),V&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(V){var ne,$,de,Z;if(V.isCanvasGradient===!0&&(V=V.getColor()),!V)return{r:0,g:0,b:0,a:0,style:V};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(V))ne=0,$=0,de=0,Z=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(V);if(ge!==null)ne=parseInt(ge[1]),$=parseInt(ge[2]),de=parseInt(ge[3]),Z=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(V))!==null)ne=parseInt(ge[1]),$=parseInt(ge[2]),de=parseInt(ge[3]),Z=parseFloat(ge[4]);else{if(Z=1,typeof V=="string"&&V.charAt(0)!=="#"){var oe=new S7(V);V=oe.ok?oe.toHex():"#000000"}V.length===4?(ne=V.substring(1,2),ne+=ne,$=V.substring(2,3),$+=$,de=V.substring(3,4),de+=de):(ne=V.substring(1,3),$=V.substring(3,5),de=V.substring(5,7)),ne=parseInt(ne,16),$=parseInt($,16),de=parseInt(de,16)}}return{r:ne,g:$,b:de,a:Z,style:V}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(V,ne,$,de){if(isNaN(ne)||isNaN($)||typeof V!="string")throw Rn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!v.call(this)){var Z=q(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;G.call(this,{text:V,x:ne,y:$,scale:ge,angle:Z,align:this.textAlign,maxWidth:de})}},g.prototype.strokeText=function(V,ne,$,de){if(isNaN(ne)||isNaN($)||typeof V!="string")throw Rn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){de=isNaN(de)?void 0:de;var Z=q(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;G.call(this,{text:V,x:ne,y:$,scale:ge,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:de})}},g.prototype.measureText=function(V){if(typeof V!="string")throw Rn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ne=this.pdf,$=this.pdf.internal.scaleFactor,de=ne.internal.getFontSize(),Z=ne.getStringUnitWidth(V)*de/ne.internal.scaleFactor;return new function(ge){var oe=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this}({width:Z*=Math.round(96*$/72*1e4)/1e4})},g.prototype.scale=function(V,ne){if(isNaN(V)||isNaN(ne))throw Rn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new h(V,0,0,ne,0,0);this.ctx.transform=this.ctx.transform.multiply($)},g.prototype.rotate=function(V){if(isNaN(V))throw Rn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ne=new h(Math.cos(V),Math.sin(V),-Math.sin(V),Math.cos(V),0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},g.prototype.translate=function(V,ne){if(isNaN(V)||isNaN(ne))throw Rn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new h(1,0,0,1,V,ne);this.ctx.transform=this.ctx.transform.multiply($)},g.prototype.transform=function(V,ne,$,de,Z,ge){if(isNaN(V)||isNaN(ne)||isNaN($)||isNaN(de)||isNaN(Z)||isNaN(ge))throw Rn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new h(V,ne,$,de,Z,ge);this.ctx.transform=this.ctx.transform.multiply(oe)},g.prototype.setTransform=function(V,ne,$,de,Z,ge){V=isNaN(V)?1:V,ne=isNaN(ne)?0:ne,$=isNaN($)?0:$,de=isNaN(de)?1:de,Z=isNaN(Z)?0:Z,ge=isNaN(ge)?0:ge,this.ctx.transform=new h(V,ne,$,de,Z,ge)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(V,ne,$,de,Z,ge,oe,X,_e){var Ie=this.pdf.getImageProperties(V),De=1,ut=1,ht=1,be=1;de!==void 0&&X!==void 0&&(ht=X/de,be=_e/Z,De=Ie.width/de*X/de,ut=Ie.height/Z*_e/Z),ge===void 0&&(ge=ne,oe=$,ne=0,$=0),de!==void 0&&X===void 0&&(X=de,_e=Z),de===void 0&&X===void 0&&(X=Ie.width,_e=Ie.height);var ct=this.ctx.transform.decompose(),Gt=q(ct.rotate.shx),Pt=new h,st=(Pt=(Pt=(Pt=Pt.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale)).applyToRectangle(new d(ge-ne*ht,oe-$*be,de*De,Z*ut));if(this.autoPaging){for(var qt,vt=S.call(this,st),Ht=[],Bt=0;Bt<vt.length;Bt+=1)Ht.indexOf(vt[Bt])===-1&&Ht.push(vt[Bt]);D(Ht);for(var lr=Ht[0],Nr=Ht[Ht.length-1],rr=lr;rr<Nr+1;rr++){this.pdf.setPage(rr);var jr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dr=rr===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kt=rr===1?0:Tt+(rr-2)*nr;if(this.ctx.clip_path.length!==0){var $n=this.path;qt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(qt,this.posX+this.margin[3],-kt+dr+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=$n}var xr=JSON.parse(JSON.stringify(st));xr=E([xr],this.posX+this.margin[3],-kt+dr+this.ctx.prevPageLastElemOffset)[0];var Wt=(rr>lr||rr<Nr)&&w.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jr,nr,null).clip().discardPath()),this.pdf.addImage(V,"JPEG",xr.x,xr.y,xr.w,xr.h,null,null,Gt),Wt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(V,"JPEG",st.x,st.y,st.w,st.h,null,null,Gt)};var S=function(V,ne,$){var de=[];ne=ne||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(V.type){default:case"mt":case"lt":de.push(Math.floor((V.y+Z)/$)+1);break;case"arc":de.push(Math.floor((V.y+Z-V.radius)/$)+1),de.push(Math.floor((V.y+Z+V.radius)/$)+1);break;case"qct":var ge=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x,V.y);de.push(Math.floor((ge.y+Z)/$)+1),de.push(Math.floor((ge.y+ge.h+Z)/$)+1);break;case"bct":var oe=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x2,V.y2,V.x,V.y);de.push(Math.floor((oe.y+Z)/$)+1),de.push(Math.floor((oe.y+oe.h+Z)/$)+1);break;case"rect":de.push(Math.floor((V.y+Z)/$)+1),de.push(Math.floor((V.y+V.h+Z)/$)+1)}for(var X=0;X<de.length;X+=1)for(;this.pdf.internal.getNumberOfPages()<de[X];)_.call(this);return de},_=function(){var V=this.fillStyle,ne=this.strokeStyle,$=this.font,de=this.lineCap,Z=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=V,this.strokeStyle=ne,this.font=$,this.lineCap=de,this.lineWidth=Z,this.lineJoin=ge},E=function(V,ne,$){for(var de=0;de<V.length;de++)switch(V[de].type){case"bct":V[de].x2+=ne,V[de].y2+=$;case"qct":V[de].x1+=ne,V[de].y1+=$;default:V[de].x+=ne,V[de].y+=$}return V},D=function(V){return V.sort(function(ne,$){return ne-$})},W=function(V,ne){var $=this.fillStyle,de=this.strokeStyle,Z=this.lineCap,ge=this.lineWidth,oe=Math.abs(ge*this.ctx.transform.scaleX),X=this.lineJoin;if(this.autoPaging){for(var _e,Ie,De=JSON.parse(JSON.stringify(this.path)),ut=JSON.parse(JSON.stringify(this.path)),ht=[],be=0;be<ut.length;be++)if(ut[be].x!==void 0)for(var ct=S.call(this,ut[be]),Gt=0;Gt<ct.length;Gt+=1)ht.indexOf(ct[Gt])===-1&&ht.push(ct[Gt]);for(var Pt=0;Pt<ht.length;Pt++)for(;this.pdf.internal.getNumberOfPages()<ht[Pt];)_.call(this);D(ht);for(var st=ht[0],qt=ht[ht.length-1],vt=st;vt<qt+1;vt++){this.pdf.setPage(vt),this.fillStyle=$,this.strokeStyle=de,this.lineCap=Z,this.lineWidth=oe,this.lineJoin=X;var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Bt=vt===1?this.posY+this.margin[0]:this.margin[0],lr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rr=vt===1?0:lr+(vt-2)*Nr;if(this.ctx.clip_path.length!==0){var jr=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(_e,this.posX+this.margin[3],-rr+Bt+this.ctx.prevPageLastElemOffset),K.call(this,V,!0),this.path=jr}if(Ie=JSON.parse(JSON.stringify(De)),this.path=E(Ie,this.posX+this.margin[3],-rr+Bt+this.ctx.prevPageLastElemOffset),ne===!1||vt===0){var dr=(vt>st||vt<qt)&&w.call(this);dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,Nr,null).clip().discardPath()),K.call(this,V,ne),dr&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}this.path=De}else this.lineWidth=oe,K.call(this,V,ne),this.lineWidth=ge},K=function(V,ne){if((V!=="stroke"||ne||!b.call(this))&&(V==="stroke"||ne||!v.call(this))){for(var $,de,Z=[],ge=this.path,oe=0;oe<ge.length;oe++){var X=ge[oe];switch(X.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:X,deltas:[],abs:[]});break;case"lt":var _e=Z.length;if(ge[oe-1]&&!isNaN(ge[oe-1].x)&&($=[X.x-ge[oe-1].x,X.y-ge[oe-1].y],_e>0)){for(;_e>=0;_e--)if(Z[_e-1].close!==!0&&Z[_e-1].begin!==!0){Z[_e-1].deltas.push($),Z[_e-1].abs.push(X);break}}break;case"bct":$=[X.x1-ge[oe-1].x,X.y1-ge[oe-1].y,X.x2-ge[oe-1].x,X.y2-ge[oe-1].y,X.x-ge[oe-1].x,X.y-ge[oe-1].y],Z[Z.length-1].deltas.push($);break;case"qct":var Ie=ge[oe-1].x+2/3*(X.x1-ge[oe-1].x),De=ge[oe-1].y+2/3*(X.y1-ge[oe-1].y),ut=X.x+2/3*(X.x1-X.x),ht=X.y+2/3*(X.y1-X.y),be=X.x,ct=X.y;$=[Ie-ge[oe-1].x,De-ge[oe-1].y,ut-ge[oe-1].x,ht-ge[oe-1].y,be-ge[oe-1].x,ct-ge[oe-1].y],Z[Z.length-1].deltas.push($);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(X)}}de=ne?null:V==="stroke"?"stroke":"fill";for(var Gt=!1,Pt=0;Pt<Z.length;Pt++)if(Z[Pt].arc)for(var st=Z[Pt].abs,qt=0;qt<st.length;qt++){var vt=st[qt];vt.type==="arc"?H.call(this,vt.x,vt.y,vt.radius,vt.startAngle,vt.endAngle,vt.counterclockwise,void 0,ne,!Gt):ae.call(this,vt.x,vt.y),Gt=!0}else if(Z[Pt].close===!0)this.pdf.internal.out("h"),Gt=!1;else if(Z[Pt].begin!==!0){var Ht=Z[Pt].start.x,Bt=Z[Pt].start.y;se.call(this,Z[Pt].deltas,Ht,Bt),Gt=!0}de&&I.call(this,de),ne&&R.call(this)}},B=function(V){var ne=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=ne*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return V-$;case"top":return V+ne-$;case"hanging":return V+ne-2*$;case"middle":return V+ne/2-$;default:return V}},F=function(V){return V+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var V=function(){};return V.colorStops=[],V.addColorStop=function(ne,$){this.colorStops.push([ne,$])},V.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},V.isCanvasGradient=!0,V},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(V,ne,$,de,Z,ge,oe,X,_e){for(var Ie=z.call(this,$,de,Z,ge),De=0;De<Ie.length;De++){var ut=Ie[De];De===0&&(_e?Y.call(this,ut.x1+V,ut.y1+ne):ae.call(this,ut.x1+V,ut.y1+ne)),Ne.call(this,V,ne,ut.x2,ut.y2,ut.x3,ut.y3,ut.x4,ut.y4)}X?R.call(this):I.call(this,oe)},I=function(V){switch(V){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},Y=function(V,ne){this.pdf.internal.out(n(V)+" "+i(ne)+" m")},G=function(V){var ne;switch(V.align){case"right":case"end":ne="right";break;case"center":ne="center";break;default:ne="left"}var $,de,Z,ge=this.pdf.getTextDimensions(V.text),oe=B.call(this,V.y),X=F.call(this,oe)-ge.h,_e=this.ctx.transform.applyToPoint(new l(V.x,oe));if(this.autoPaging){var Ie=this.ctx.transform.decompose(),De=new h;De=(De=(De=De.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var ut=this.ctx.transform.applyToRectangle(new d(V.x,oe,ge.w,ge.h)),ht=De.applyToRectangle(new d(V.x,X,ge.w,ge.h)),be=S.call(this,ht),ct=[],Gt=0;Gt<be.length;Gt+=1)ct.indexOf(be[Gt])===-1&&ct.push(be[Gt]);D(ct);for(var Pt=ct[0],st=ct[ct.length-1],qt=Pt;qt<st+1;qt++){this.pdf.setPage(qt);var vt=qt===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[2],lr=Bt-this.margin[0],Nr=this.pdf.internal.pageSize.width-this.margin[1],rr=Nr-this.margin[3],jr=qt===1?0:Ht+(qt-2)*lr;if(this.ctx.clip_path.length!==0){var dr=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E($,this.posX+this.margin[3],-1*jr+vt),K.call(this,"fill",!0),this.path=dr}var Tt=E([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-jr+vt+this.ctx.prevPageLastElemOffset)[0];V.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*V.scale),Z=this.lineWidth,this.lineWidth=Z*V.scale);var nr=this.autoPaging!=="text";if(nr||Tt.y+Tt.h<=Bt){if(nr||Tt.y>=vt&&Tt.x<=Nr){var kt=nr?V.text:this.pdf.splitTextToSize(V.text,V.maxWidth||Nr-Tt.x)[0],$n=E([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-jr+vt+this.ctx.prevPageLastElemOffset)[0],xr=nr&&(qt>Pt||qt<st)&&w.call(this);xr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rr,lr,null).clip().discardPath()),this.pdf.text(kt,$n.x,$n.y,{angle:V.angle,align:ne,renderingMode:V.renderingMode}),xr&&this.pdf.restoreGraphicsState()}}else Tt.y<Bt&&(this.ctx.prevPageLastElemOffset+=Bt-Tt.y);V.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Z)}}else V.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*V.scale),Z=this.lineWidth,this.lineWidth=Z*V.scale),this.pdf.text(V.text,_e.x+this.posX,_e.y+this.posY,{angle:V.angle,align:ne,renderingMode:V.renderingMode,maxWidth:V.maxWidth}),V.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Z)},ae=function(V,ne,$,de){$=$||0,de=de||0,this.pdf.internal.out(n(V+$)+" "+i(ne+de)+" l")},se=function(V,ne,$){return this.pdf.lines(V,ne,$,null,null)},Ne=function(V,ne,$,de,Z,ge,oe,X){this.pdf.internal.out([t(a($+V)),t(s(de+ne)),t(a(Z+V)),t(s(ge+ne)),t(a(oe+V)),t(s(X+ne)),"c"].join(" "))},z=function(V,ne,$,de){for(var Z=2*Math.PI,ge=Math.PI/2;ne>$;)ne-=Z;var oe=Math.abs($-ne);oe<Z&&de&&(oe=Z-oe);for(var X=[],_e=de?-1:1,Ie=ne;oe>1e-5;){var De=Ie+_e*Math.min(oe,ge);X.push(ie.call(this,V,Ie,De)),oe-=Math.abs(De-Ie),Ie=De}return X},ie=function(V,ne,$){var de=($-ne)/2,Z=V*Math.cos(de),ge=V*Math.sin(de),oe=Z,X=-ge,_e=oe*oe+X*X,Ie=_e+oe*Z+X*ge,De=4/3*(Math.sqrt(2*_e*Ie)-Ie)/(oe*ge-X*Z),ut=oe-De*X,ht=X+De*oe,be=ut,ct=-ht,Gt=de+ne,Pt=Math.cos(Gt),st=Math.sin(Gt);return{x1:V*Math.cos(ne),y1:V*Math.sin(ne),x2:ut*Pt-ht*st,y2:ut*st+ht*Pt,x3:be*Pt-ct*st,y3:be*st+ct*Pt,x4:V*Math.cos($),y4:V*Math.sin($)}},q=function(V){return 180*V/Math.PI},re=function(V,ne,$,de,Z,ge){var oe=V+.5*($-V),X=ne+.5*(de-ne),_e=Z+.5*($-Z),Ie=ge+.5*(de-ge),De=Math.min(V,Z,oe,_e),ut=Math.max(V,Z,oe,_e),ht=Math.min(ne,ge,X,Ie),be=Math.max(ne,ge,X,Ie);return new d(De,ht,ut-De,be-ht)},ue=function(V,ne,$,de,Z,ge,oe,X){var _e,Ie,De,ut,ht,be,ct,Gt,Pt,st,qt,vt,Ht,Bt,lr=$-V,Nr=de-ne,rr=Z-$,jr=ge-de,dr=oe-Z,Tt=X-ge;for(Ie=0;Ie<41;Ie++)Pt=(ct=(De=V+(_e=Ie/40)*lr)+_e*((ht=$+_e*rr)-De))+_e*(ht+_e*(Z+_e*dr-ht)-ct),st=(Gt=(ut=ne+_e*Nr)+_e*((be=de+_e*jr)-ut))+_e*(be+_e*(ge+_e*Tt-be)-Gt),Ie==0?(qt=Pt,vt=st,Ht=Pt,Bt=st):(qt=Math.min(qt,Pt),vt=Math.min(vt,st),Ht=Math.max(Ht,Pt),Bt=Math.max(Bt,st));return new d(Math.round(qt),Math.round(vt),Math.round(Ht-qt),Math.round(Bt-vt))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var V,ne,$=(V=this.ctx.lineDash,ne=this.ctx.lineDashOffset,JSON.stringify({lineDash:V,lineDashOffset:ne}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(Ut.API),(function(e){var t=function(l){var d,h,f,p,g,j,v,b,w,S;for(h=[],f=0,p=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;p>f;f+=4)(g=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(j=(g=((g=((g=((g=(g-(S=g%85))/85)-(w=g%85))/85)-(b=g%85))/85)-(v=g%85))/85)%85,h.push(j+33,v+33,b+33,w+33,S+33)):h.push(122);return(function(_,E){for(var D=E;D>0;D--)_.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},n=function(l){var d,h,f,p,g,j=String,v="length",b=255,w="charCodeAt",S="slice",_="replace";for(l[S](-2),l=l[S](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),f=[],p=0,g=(l+=d="uuuuu"[S](l[v]%5||5))[v];g>p;p+=5)h=52200625*(l[w](p)-33)+614125*(l[w](p+1)-33)+7225*(l[w](p+2)-33)+85*(l[w](p+3)-33)+(l[w](p+4)-33),f.push(b&h>>24,b&h>>16,b&h>>8,b&h);return(function(E,D){for(var W=D;W>0;W--)E.pop()})(f,d[v]),j.fromCharCode.apply(j,f)},i=function(l){return l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var h="",f=0;f<l.length;f+=2)h+=String.fromCharCode("0x"+(l[f]+l[f+1]));return h},s=function(l){for(var d=new Uint8Array(l.length),h=l.length;h--;)d[h]=l.charCodeAt(h);return(d=Cw(d)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};e.processDataByFilters=function(l,d){var h=0,f=l||"",p=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":f=n(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=i(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=s(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Ut.API),(function(e){e.loadFile=function(t,n,i){return(function(a,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var d=void 0;try{d=(function(h,f,p){var g=new XMLHttpRequest,j=0,v=function(b){var w=b.length,S=[],_=String.fromCharCode;for(j=0;j<w;j+=1)S.push(_(255&b.charCodeAt(j)));return S.join("")};if(g.open("GET",h,!f),g.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(g.onload=function(){g.status===200?p(v(this.responseText)):p(void 0)}),g.send(null),f&&g.status===200)return v(g.responseText)})(a,s,l)}catch{}return d})(t,n,i)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile})(Ut.API),(function(e){function t(){return(or.html2canvas?Promise.resolve(or.html2canvas):dj(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function n(){return(or.DOMPurify?Promise.resolve(or.DOMPurify):dj(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var i=function(d){var h=_n(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(d,h){var f=document.createElement(d);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},s=function d(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),g=h.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(d(g,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},l=function d(h){var f=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),p=d.convert(Promise.resolve(),f);return(p=p.setProgress(1,d,1,[d])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,h){return d.__proto__=h||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(f){switch(i(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(n).then(function(f){return this.set({src:a("div",{innerHTML:d,dompurify:f})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(t).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(t).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,j=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete j.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var v=0;v<p.length;++v){var b=p[v],w=b.src.find(function(S){return S.format==="truetype"});w&&f.addFont(w.url,b.ref.name,b.ref.style)}return j.windowHeight=j.windowHeight||0,j.windowHeight=j.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):j.windowHeight,f.context2d.save(!0),h(this.prop.container,j)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(d,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},l.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(d){if(i(d)!=="object")return this;var h=Object.keys(d||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=d[f]};switch(f){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[f]=d[f]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(d,h){return this.then(function(){var f=d in l.template.prop?this.prop[d]:this.opt[d];return h?h(f):f})},l.prototype.setMargin=function(d){return this.then(function(){switch(i(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},l.prototype.setPageSize=function(d){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(d=d||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},l.prototype.setProgress=function(d,h,f,p){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,h,f,p){return this.setProgress(d?this.progress.val+d:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},l.prototype.then=function(d,h){var f=this;return this.thenCore(d,h,function(p,g){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(j){return f.updateProgress(null,p),j}).then(p,g).then(function(j){return f.updateProgress(1),j})})},l.prototype.thenCore=function(d,h,f){f=f||Promise.prototype.then;var p=this;d&&(d=d.bind(p)),h&&(h=h.bind(p));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:l.convert(Object.assign({},p),Promise.prototype),j=f.call(g,d,h);return l.convert(j,p.__proto__)},l.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},l.prototype.thenList=function(d){var h=this;return d.forEach(function(f){h=h.thenCore(f)}),h},l.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return l.convert(h,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then(function(){throw new Error(d)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Ut.getPageSize=function(d,h,f){if(_n(d)==="object"){var p=d;d=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",d=(""+(d||"P")).toLowerCase();var g,j=(""+f).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+h}var b,w=0,S=0;if(v.hasOwnProperty(j))w=v[j][1]/g,S=v[j][0]/g;else try{w=f[1],S=f[0]}catch{throw new Error("Invalid format: "+f)}if(d==="p"||d==="portrait")d="p",S>w&&(b=S,S=w,w=b);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",w>S&&(b=S,S=w,w=b)}return{width:S,height:w,unit:h,k:g,orientation:d}},e.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Ej):null;var f=new l(h);return h.worker?f:f.from(d).doCallback()}})(Ut.API),Ut.API.addJS=function(e){var t,n,i=e;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),s=0;s<a.length;s++){var l=a[s],d=i.exec(l);if(d!=null){var h=d[1];n.internal.newObjectDeferredBegin(h,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var g=n.internal.newObject();p.push(g);var j=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,a,s){var l={title:a,options:s,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var l=i.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var d=this.count=this.count_r({count:0},l);if(d>0&&this.line("/Count "+d),l.options&&l.options.pageNumber){var h=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<i.children.length;f++)this.renderItems(i.children[f])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,a){for(var s=0;s<a.children.length;s++)i.count++,this.count_r(i,a.children[s]);return i.count}}])})(Ut.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,i,a,s,l,d){var h,f=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,h=(function(g){for(var j,v=256*g.charCodeAt(4)+g.charCodeAt(5),b=g.length,w={width:0,height:0,numcomponents:1},S=4;S<b;S+=2){if(S+=v,t.indexOf(g.charCodeAt(S+1))!==-1){j=256*g.charCodeAt(S+5)+g.charCodeAt(S+6),w={width:256*g.charCodeAt(S+7)+g.charCodeAt(S+8),height:j,numcomponents:g.charCodeAt(S+9)};break}v=256*g.charCodeAt(S+2)+g.charCodeAt(S+3)}return w})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}p={data:n,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:f,index:i,alias:a}}return p}})(Ut.API),Ut.API.processPNG=function(e,t,n,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,s=ume(e,{checkCrc:!0}),l=s.width,d=s.height,h=s.channels,f=s.palette,p=s.depth;a=f&&h===1?(function(H){for(var I=H.width,R=H.height,Y=H.data,G=H.palette,ae=H.depth,se=!1,Ne=[],z=[],ie=void 0,q=!1,re=0,ue=0;ue<G.length;ue++){var Q=Ek(G[ue],4),V=Q[0],ne=Q[1],$=Q[2],de=Q[3];Ne.push(V,ne,$),de!=null&&(de===0?(re++,z.length<1&&z.push(ue)):de<255&&(q=!0))}if(q||re>1){se=!0,z=void 0;var Z=I*R;ie=new Uint8Array(Z);for(var ge=new DataView(Y.buffer),oe=0;oe<Z;oe++){var X=Pj(ge,oe,ae),_e=Ek(G[X],4)[3];ie[oe]=_e}}else re===0&&(z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:se?8:void 0,colorBytes:Y,alphaBytes:ie,needSMask:se,palette:Ne,mask:z}})(s):h===2||h===4?(function(H){for(var I=H.data,R=H.width,Y=H.height,G=H.channels,ae=H.depth,se=G===2?"DeviceGray":"DeviceRGB",Ne=G-1,z=R*Y,ie=Ne,q=z*ie,re=1*z,ue=Math.ceil(q*ae/8),Q=Math.ceil(re*ae/8),V=new Uint8Array(ue),ne=new Uint8Array(Q),$=new DataView(I.buffer),de=new DataView(V.buffer),Z=new DataView(ne.buffer),ge=!1,oe=0;oe<z;oe++){for(var X=oe*G,_e=0;_e<ie;_e++)k6(de,Pj($,X+_e,ae),oe*ie+_e,ae);var Ie=Pj($,X+ie,ae);Ie<(1<<ae)-1&&(ge=!0),k6(Z,Ie,1*oe,ae)}return{colorSpace:se,colorsPerPixel:Ne,sMaskBitsPerComponent:ge?ae:void 0,colorBytes:V,alphaBytes:ne,needSMask:ge}})(s):(function(H){var I=H.data,R=H.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(Y){for(var G=Y.length,ae=new Uint8Array(2*G),se=new DataView(ae.buffer,ae.byteOffset,ae.byteLength),Ne=0;Ne<G;Ne++)se.setUint16(2*Ne,Y[Ne],!1);return ae})(I):I,needSMask:!1}})(s);var g,j,v,b=a,w=b.colorSpace,S=b.colorsPerPixel,_=b.sMaskBitsPerComponent,E=b.colorBytes,D=b.alphaBytes,W=b.needSMask,K=b.palette,B=b.mask,F=null;return i!==Ut.API.image_compression.NONE&&typeof Cw=="function"?(F=(function(H){var I;switch(H){case Ut.API.image_compression.FAST:I=11;break;case Ut.API.image_compression.MEDIUM:I=13;break;case Ut.API.image_compression.SLOW:I=14;break;default:I=12}return I})(i),g=this.decode.FLATE_DECODE,j="/Predictor ".concat(F," /Colors ").concat(S," /BitsPerComponent ").concat(p," /Columns ").concat(l),e=C6(E,Math.ceil(l*S*p/8),S,p,i),W&&(v=C6(D,Math.ceil(l*_/8),1,_,i))):(g=void 0,j=void 0,e=E,W&&(v=D)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:n,data:e,index:t,filter:g,decodeParameters:j,transparency:B,palette:K,sMask:v,predictor:F,width:l,height:d,bitsPerComponent:p,sMaskBitsPerComponent:_,colorSpace:w}}},(function(e){e.processGIF89A=function(t,n,i,a){var s=new Dme(t),l=s.width,d=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:l,height:d},p=new kj(100).encode(f,100);return e.processJPEG.call(this,p,n,i,a)},e.processGIF87A=e.processGIF89A})(Ut.API),gc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},gc.prototype.parseBGR=function(){this.pos=this.offset;var e="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[e]()}catch(n){Rn.log("bit decode error:"+n)}},gc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var h=this.palette[s>>7-d&1];this.data[l+4*d]=h.blue,this.data[l+4*d+1]=h.green,this.data[l+4*d+2]=h.red,this.data[l+4*d+3]=255}n!==0&&(this.pos+=4-n)}},gc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*a*4,d=s>>4,h=15&s,f=this.palette[d];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*a+1>=this.width)break;f=this.palette[h],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},gc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(a<this.palette.length){var l=this.palette[a];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},gc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&t)/t*255|0,d=(s>>5&t)/t*255|0,h=(s>>10&t)/t*255|0,f=s>>15?255:0,p=i*this.width*4+4*a;this.data[p]=h,this.data[p+1]=d,this.data[p+2]=l,this.data[p+3]=f}this.pos+=e}},gc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&t)/t*255|0,h=(l>>5&n)/n*255|0,f=(l>>11)/t*255|0,p=a*this.width*4+4*s;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=d,this.data[p+3]=255}this.pos+=e}},gc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},gc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=t*this.width*4+4*n;this.data[d]=s,this.data[d+1]=a,this.data[d+2]=i,this.data[d+3]=l}},gc.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,n,i,a){var s=new gc(t,!1),l=s.width,d=s.height,h={data:s.getData(),width:l,height:d},f=new kj(100).encode(h,100);return e.processJPEG.call(this,f,n,i,a)}})(Ut.API),O6.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,n,i,a){var s=new O6(t),l=s.width,d=s.height,h={data:s.getData(),width:l,height:d},f=new kj(100).encode(h,100);return e.processJPEG.call(this,f,n,i,a)}})(Ut.API),Ut.API.processRGBA=function(e,t,n){for(var i=e.data,a=i.length,s=new Uint8Array(a/4*3),l=new Uint8Array(a/4),d=0,h=0,f=0;f<a;f+=4){var p=i[f],g=i[f+1],j=i[f+2],v=i[f+3];s[d++]=p,s[d++]=g,s[d++]=j,l[h++]=v}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:b,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ut.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qf=Ut.API,pv=Qf.getCharWidthsArray=function(e,t){var n,i,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),d=t.widths?t.widths:a.metadata.Unicode.widths,h=d.fof?d.fof:1,f=t.kerning?t.kerning:a.metadata.Unicode.kerning,p=f.fof?f.fof:1,g=t.doKerning!==!1,j=0,v=e.length,b=0,w=d[0]||h,S=[];for(n=0;n<v;n++)i=e.charCodeAt(n),typeof a.metadata.widthOfString=="function"?S.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+l*(1e3/s)||0)/1e3):(j=g&&_n(f[i])==="object"&&!isNaN(parseInt(f[i][b],10))?f[i][b]/p:0,S.push((d[i]||w)/h+j)),b=i;return S},S6=Qf.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Qf.processArabic&&(e=Qf.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,n,a)/n:pv.apply(this,arguments).reduce(function(s,l){return s+l},0)},N6=function(e,t,n,i){for(var a=[],s=0,l=e.length,d=0;s!==l&&d+t[s]<n;)d+=t[s],s++;a.push(e.slice(0,s));var h=s;for(d=0;s!==l;)d+t[s]>i&&(a.push(e.slice(h,s)),d=0,h=s),d+=t[s],s++;return h!==s&&a.push(e.slice(h,s)),a},_6=function(e,t,n){n||(n={});var i,a,s,l,d,h,f,p=[],g=[p],j=n.textIndent||0,v=0,b=0,w=e.split(" "),S=pv.apply(this,[" ",n])[0];if(h=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var _=Array(h).join(" "),E=[];w.map(function(W){(W=W.split(/\s*\n/)).length>1?E=E.concat(W.map(function(K,B){return(B&&K.length?`
`:"")+K})):E.push(W[0])}),w=E,h=S6.apply(this,[_,n])}for(s=0,l=w.length;s<l;s++){var D=0;if(i=w[s],h&&i[0]==`
`&&(i=i.substr(1),D=1),j+v+(b=(a=pv.apply(this,[i,n])).reduce(function(W,K){return W+K},0))>t||D){if(b>t){for(d=N6.apply(this,[i,a,t-(j+v),t]),p.push(d.shift()),p=[d.pop()];d.length;)g.push([d.shift()]);b=a.slice(i.length-(p[0]?p[0].length:0)).reduce(function(W,K){return W+K},0)}else p=[i];g.push(p),j=b+h,v=S}else p.push(i),j+=v+b,v=S}return f=h?function(W,K){return(K?_:"")+W.join(" ")}:function(W){return W.join(" ")},g.map(f)},Qf.splitTextToSize=function(e,t,n){var i,a=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var g=this.internal.getFont(p.fontName,p.fontStyle),j="Unicode";return g.metadata[j]?{widths:g.metadata[j].widths||{0:1},kerning:g.metadata[j].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/a;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=n.lineIndent;var d,h,f=[];for(d=0,h=i.length;d<h;d++)f=f.concat(_6.apply(this,[i[d],l,s]));return f},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",i={},a={},s=0;s<16;s++)i[n[s]]=t[s],a[t[s]]=n[s];var l=function(j){return"0x"+parseInt(j,10).toString(16)},d=e.__fontmetrics__.compress=function(j){var v,b,w,S,_=["{"];for(var E in j){if(v=j[E],isNaN(parseInt(E,10))?b="'"+E+"'":(E=parseInt(E,10),b=(b=l(E).slice(2)).slice(0,-1)+a[b.slice(-1)]),typeof v=="number")v<0?(w=l(v).slice(3),S="-"):(w=l(v).slice(2),S=""),w=S+w.slice(0,-1)+a[w.slice(-1)];else{if(_n(v)!=="object")throw new Error("Don't know what to do with value type "+_n(v)+".");w=d(v)}_.push(b+w)}return _.push("}"),_.join("")},h=e.__fontmetrics__.uncompress=function(j){if(typeof j!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,b,w,S,_={},E=1,D=_,W=[],K="",B="",F=j.length-1,H=1;H<F;H+=1)(S=j[H])=="'"?v?(w=v.join(""),v=void 0):v=[]:v?v.push(S):S=="{"?(W.push([D,w]),D={},w=void 0):S=="}"?((b=W.pop())[0][b[1]]=D,w=void 0,D=b[0]):S=="-"?E=-1:w===void 0?i.hasOwnProperty(S)?(K+=i[S],w=parseInt(K,16)*E,E=1,K=""):K+=S:i.hasOwnProperty(S)?(B+=i[S],D[w]=parseInt(B,16)*E,E=1,w=void 0,B=""):B+=S;return _},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(j){var v=j.font,b=g.Unicode[v.postScriptName];b&&(v.metadata.Unicode={},v.metadata.Unicode.widths=b.widths,v.metadata.Unicode.kerning=b.kerning);var w=p.Unicode[v.postScriptName];w&&(v.metadata.Unicode.encoding=w,v.encoding=w.codePages[0])}])})(Ut.API),(function(e){var t=function(n){for(var i=n.length,a=new Uint8Array(i),s=0;s<i;s++)a[s]=n.charCodeAt(s);return a};e.API.events.push(["addFont",function(n){var i=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,d){d=/^\x00\x01\x00\x00/.test(d)?t(d):t(zv(d)),l.metadata=e.API.TTFFont.open(d),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,i)}}])})(Ut),Ut.API.addSvgAsImage=function(e,t,n,i,a,s,l,d){if(isNaN(t)||isNaN(n))throw Rn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Rn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=i,h.height=a;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(or.canvg?Promise.resolve(or.canvg):dj(()=>import("./index.es-BkJvmVLR.js"),[])).catch(function(j){return Promise.reject(new Error("Could not load canvg: "+j))}).then(function(j){return j.default?j.default:j}).then(function(j){return j.fromString(f,e,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(p)}).then(function(){g.addImage(h.toDataURL("image/jpeg",1),t,n,i,a,l,d)})},Ut.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(t,n);return this},Ut.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,a,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(l),h=[],f=0,p=0,g=0;function j(b,w){var S,_=!1;for(S=0;S<b.length;S+=1)b[S]===w&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var v=d.length;for(g=0;g<v;g+=1)n[d[g]].value=n[d[g]].defaultValue,n[d[g]].explicitSet=!1}if(_n(e)==="object"){for(a in e)if(s=e[a],j(d,a)&&s!==void 0){if(n[a].type==="boolean"&&typeof s=="boolean")n[a].value=s;else if(n[a].type==="name"&&j(n[a].valueSet,s))n[a].value=s;else if(n[a].type==="integer"&&Number.isInteger(s))n[a].value=s;else if(n[a].type==="array"){for(f=0;f<s.length;f+=1)if(i=!0,s[f].length===1&&typeof s[f][0]=="number")h.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(i=!1);i===!0&&h.push([s[f][0]-1,s[f][1]-1].join(" "))}n[a].value="["+h.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?w.push("/"+b+" /"+n[b].value):w.push("/"+b+" "+n[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},Ut.API.addMetadata=function(e,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:e,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",Mme),this.internal.events.subscribe("postPutResources",Ome)),this},(function(e){var t=e.API,n=t.pdfEscape16=function(s,l){for(var d,h=l.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],g=0,j=s.length;g<j;++g){if(d=l.metadata.characterToGlyph(s.charCodeAt(g)),l.metadata.glyIdsUsed.push(d),l.metadata.toUnicode[d]=s.charCodeAt(g),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(l.metadata.widthOfGlyph(d),10)])),d=="0")return p.join("");d=d.toString(16),p.push(f[4-d.length],d)}return p.join("")},i=function(s){var l,d,h,f,p,g,j;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],g=0,j=(d=Object.keys(s).sort(function(v,b){return v-b})).length;g<j;g++)l=d[g],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(f=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(l){var d=l.font,h=l.out,f=l.newObject,p=l.putStream;if(d.metadata instanceof e.API.TTFFont&&d.encoding==="Identity-H"){for(var g=d.metadata.Unicode.widths,j=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),v="",b=0;b<j.length;b++)v+=String.fromCharCode(j[b]);var w=f();p({data:v,addLength1:!0,objectId:w}),h("endobj");var S=f();p({data:i(d.metadata.toUnicode),addLength1:!0,objectId:S}),h("endobj");var _=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+tm(d.fontName)),h("/FontFile2 "+w+" 0 R"),h("/FontBBox "+e.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var E=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+tm(d.fontName)),h("/FontDescriptor "+_+" 0 R"),h("/W "+e.API.PDFObject.convert(g)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+S+" 0 R"),h("/BaseFont /"+tm(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+E+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(l){var d=l.font,h=l.out,f=l.newObject,p=l.putStream;if(d.metadata instanceof e.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var g=d.metadata.rawData,j="",v=0;v<g.length;v++)j+=String.fromCharCode(g[v]);var b=f();p({data:j,addLength1:!0,objectId:b}),h("endobj");var w=f();p({data:i(d.metadata.toUnicode),addLength1:!0,objectId:w}),h("endobj");var S=f();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+b+" 0 R"),h("/Flags 96"),h("/FontBBox "+e.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+tm(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=f();for(var _=0;_<d.metadata.hmtx.widths.length;_++)d.metadata.hmtx.widths[_]=parseInt(d.metadata.hmtx.widths[_]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+tm(d.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(s)}]);var a=function(s){var l,d=s.text||"",h=s.x,f=s.y,p=s.options||{},g=s.mutex||{},j=g.pdfEscape,v=g.activeFontKey,b=g.fonts,w=v,S="",_=0,E="",D=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:d,x:h,y:f,options:p,mutex:g};for(E=d,w=v,Array.isArray(d)&&(E=d[0]),_=0;_<E.length;_+=1)b[w].metadata.hasOwnProperty("cmap")&&(l=b[w].metadata.cmap.unicode.codeMap[E[_].charCodeAt(0)]),l||E[_].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?S+=E[_]:S+="";var W="";return parseInt(w.slice(1))<14||D==="WinAnsiEncoding"?W=j(S,w).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(W=n(S,b[w])),g.isHex=!0,{text:W,x:h,y:f,options:p,mutex:g}};t.events.push(["postProcessText",function(s){var l=s.text||"",d=[],h={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?d.push([a(Object.assign({},h,{text:l[f][0]})).text,l[f][1],l[f][2]]):d.push(a(Object.assign({},h,{text:l[f]})).text);s.text=d}else s.text=a(Object.assign({},h,{text:l})).text}])})(Ut),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,i){return t.call(this),this.internal.vFS[n]=i,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Ut.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var a,s,l,d,h,f,p,g=t,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,D=0;this.__bidiEngine__={};var W=function(Y){var G=Y.charCodeAt(),ae=G>>8,se=w[ae];return se!==void 0?g[256*se+(255&G)]:ae===252||ae===253?"AL":_.test(ae)?"L":ae===8?"R":"N"},K=function(Y){for(var G,ae=0;ae<Y.length;ae++){if((G=W(Y.charAt(ae)))==="L")return!1;if(G==="R")return!0}return!1},B=function(Y,G,ae,se){var Ne,z,ie,q,re=G[se];switch(re){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(re="AN");break;case"AL":E=!0,re="R";break;case"WS":case"BN":re="N";break;case"CS":se<1||se+1>=G.length||(Ne=ae[se-1])!=="EN"&&Ne!=="AN"||(z=G[se+1])!=="EN"&&z!=="AN"?re="N":E&&(z="AN"),re=z===Ne?z:"N";break;case"ES":re=(Ne=se>0?ae[se-1]:"B")==="EN"&&se+1<G.length&&G[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&ae[se-1]==="EN"){re="EN";break}if(E){re="N";break}for(ie=se+1,q=G.length;ie<q&&G[ie]==="ET";)ie++;re=ie<q&&G[ie]==="EN"?"EN":"N";break;case"NSM":if(l&&!d){for(q=G.length,ie=se+1;ie<q&&G[ie]==="NSM";)ie++;if(ie<q){var ue=Y[se],Q=ue>=1425&&ue<=2303||ue===64286;if(Ne=G[ie],Q&&(Ne==="R"||Ne==="AL")){re="R";break}}}re=se<1||(Ne=G[se-1])==="B"?"N":ae[se-1];break;case"B":E=!1,a=!0,re=D;break;case"S":s=!0,re="N"}return re},F=function(Y,G,ae){var se=Y.split("");return ae&&H(se,ae,{hiLevel:D}),se.reverse(),G&&G.reverse(),se.join("")},H=function(Y,G,ae){var se,Ne,z,ie,q,re=-1,ue=Y.length,Q=0,V=[],ne=D?v:j,$=[];for(E=!1,a=!1,s=!1,Ne=0;Ne<ue;Ne++)$[Ne]=W(Y[Ne]);for(z=0;z<ue;z++){if(q=Q,V[z]=B(Y,$,V,z),se=240&(Q=ne[q][b[V[z]]]),Q&=15,G[z]=ie=ne[Q][5],se>0)if(se===16){for(Ne=re;Ne<z;Ne++)G[Ne]=1;re=-1}else re=-1;if(ne[Q][6])re===-1&&(re=z);else if(re>-1){for(Ne=re;Ne<z;Ne++)G[Ne]=ie;re=-1}$[z]==="B"&&(G[z]=0),ae.hiLevel|=ie}s&&(function(de,Z,ge){for(var oe=0;oe<ge;oe++)if(de[oe]==="S"){Z[oe]=D;for(var X=oe-1;X>=0&&de[X]==="WS";X--)Z[X]=D}})($,G,ue)},I=function(Y,G,ae,se,Ne){if(!(Ne.hiLevel<Y)){if(Y===1&&D===1&&!a)return G.reverse(),void(ae&&ae.reverse());for(var z,ie,q,re,ue=G.length,Q=0;Q<ue;){if(se[Q]>=Y){for(q=Q+1;q<ue&&se[q]>=Y;)q++;for(re=Q,ie=q-1;re<ie;re++,ie--)z=G[re],G[re]=G[ie],G[ie]=z,ae&&(z=ae[re],ae[re]=ae[ie],ae[ie]=z);Q=q}Q++}}},R=function(Y,G,ae){var se=Y.split(""),Ne={hiLevel:D};return ae||(ae=[]),H(se,ae,Ne),(function(z,ie,q){if(q.hiLevel!==0&&p)for(var re,ue=0;ue<z.length;ue++)ie[ue]===1&&(re=S.indexOf(z[ue]))>=0&&(z[ue]=S[re+1])})(se,ae,Ne),I(2,se,G,ae,Ne),I(1,se,G,ae,Ne),se.join("")};return this.__bidiEngine__.doBidiReorder=function(Y,G,ae){if((function(Ne,z){if(z)for(var ie=0;ie<Ne.length;ie++)z[ie]=ie;d===void 0&&(d=K(Ne)),f===void 0&&(f=K(Ne))})(Y,G),l||!h||f)if(l&&h&&d^f)D=d?1:0,Y=F(Y,G,ae);else if(!l&&h&&f)D=d?1:0,Y=R(Y,G,ae),Y=F(Y,G);else if(!l||d||h||f){if(l&&!h&&d^f)Y=F(Y,G),d?(D=0,Y=R(Y,G,ae)):(D=1,Y=R(Y,G,ae),Y=F(Y,G));else if(l&&d&&!h&&f)D=1,Y=R(Y,G,ae),Y=F(Y,G);else if(!l&&!h&&d^f){var se=p;d?(D=1,Y=R(Y,G,ae),D=0,p=!1,Y=R(Y,G,ae),p=se):(D=0,Y=R(Y,G,ae),Y=F(Y,G),D=1,p=!1,Y=R(Y,G,ae),p=se,Y=F(Y,G))}}else D=0,Y=R(Y,G,ae);else D=d?1:0,Y=R(Y,G,ae);return Y},this.__bidiEngine__.setOptions=function(Y){Y&&(l=Y.isInputVisual,h=Y.isOutputVisual,d=Y.isInputRtl,f=Y.isOutputRtl,p=Y.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(l=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?l.push([n.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):l.push([n.doBidiReorder(a[d])]);i.text=l}else i.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(Ut),Ut.API.TTFFont=(function(){function e(t){var n;if(this.rawData=t,n=this.contents=new ih(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Qme(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Lme(this.contents),this.head=new Ime(this),this.name=new Ume(this),this.cmap=new M7(this),this.toUnicode={},this.hhea=new zme(this),this.maxp=new Hme(this),this.hmtx=new Wme(this),this.post=new Fme(this),this.os2=new Bme(this),this.loca=new Gme(this),this.glyf=new $me(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,i,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,d,h,f;for(f=[],l=0,d=(h=this.bbox).length;l<d;l++)t=h[l],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,i){var a,s,l,d;for(l=0,s=0,d=(t=""+t).length;0<=d?s<d:s>d;s=0<=d?++s:--s)a=t.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/n)||0;return l*(n/1e3)},e.prototype.lineHeight=function(t,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e})();var Oc,ih=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,i;for(i=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var n,i,a;for(a=[],n=0,i=t.length;0<=i?n<i:n>i;n=0<=i?++n:--n)a.push(this.writeByte(t.charCodeAt(n)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,i,a,s,l,d,h;return t=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),d=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^s)+65536*(255^l)+256*(255^d)+(255^h)+1):72057594037927940*t+281474976710656*n+1099511627776*i+4294967296*a+16777216*s+65536*l+256*d+h},e.prototype.writeLongLong=function(t){var n,i;return n=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,i;for(n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push(this.readByte());return n},e.prototype.write=function(t){var n,i,a,s;for(s=[],i=0,a=t.length;i<a;i++)n=t[i],s.push(this.writeByte(n));return s},e})(),Lme=(function(){var e;function t(n){var i,a,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(n){var i,a,s,l,d,h,f,p,g,j,v,b,w;for(w in v=Object.keys(n).length,h=Math.log(2),g=16*Math.floor(Math.log(v)/h),l=Math.floor(g/h),p=16*v-g,(a=new ih).writeInt(this.scalarType),a.writeShort(v),a.writeShort(g),a.writeShort(l),a.writeShort(p),s=16*v,f=a.pos+s,d=null,b=[],n)for(j=n[w],a.writeString(w),a.writeInt(e(j)),a.writeInt(f),a.writeInt(j.length),b=b.concat(j),w==="head"&&(d=f),f+=j.length;f%4;)b.push(0),f++;return a.write(b),i=2981146554-e(a.data),a.pos=d+8,a.writeUInt32(i),a.data},e=function(n){var i,a,s,l;for(n=L7.call(n);n.length%4;)n.push(0);for(s=new ih(n),a=0,i=0,l=n.length;i<l;i=i+=4)a+=s.readUInt32();return 4294967295&a},t})(),Rme={}.hasOwnProperty,bd=function(e,t){for(var n in t)Rme.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Oc=(function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Ime=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new ih).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e})(),M6=(function(){function e(t,n){var i,a,s,l,d,h,f,p,g,j,v,b,w,S,_,E,D;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(v=t.readUInt16(),j=v/2,t.pos+=6,s=(function(){var W,K;for(K=[],h=W=0;0<=j?W<j:W>j;h=0<=j?++W:--W)K.push(t.readUInt16());return K})(),t.pos+=2,w=(function(){var W,K;for(K=[],h=W=0;0<=j?W<j:W>j;h=0<=j?++W:--W)K.push(t.readUInt16());return K})(),f=(function(){var W,K;for(K=[],h=W=0;0<=j?W<j:W>j;h=0<=j?++W:--W)K.push(t.readUInt16());return K})(),p=(function(){var W,K;for(K=[],h=W=0;0<=j?W<j:W>j;h=0<=j?++W:--W)K.push(t.readUInt16());return K})(),a=(this.length-t.pos+this.offset)/2,d=(function(){var W,K;for(K=[],h=W=0;0<=a?W<a:W>a;h=0<=a?++W:--W)K.push(t.readUInt16());return K})(),h=_=0,D=s.length;_<D;h=++_)for(S=s[h],i=E=b=w[h];b<=S?E<=S:E>=S;i=b<=S?++E:--E)p[h]===0?l=i+f[h]:(l=d[p[h]/2+(i-b)-(j-h)]||0)!==0&&(l+=f[h]),this.codeMap[i]=65535&l}t.pos=g}return e.encode=function(t,n){var i,a,s,l,d,h,f,p,g,j,v,b,w,S,_,E,D,W,K,B,F,H,I,R,Y,G,ae,se,Ne,z,ie,q,re,ue,Q,V,ne,$,de,Z,ge,oe,X,_e,Ie,De;switch(se=new ih,l=Object.keys(t).sort(function(ut,ht){return ut-ht}),n){case"macroman":for(w=0,S=(function(){var ut=[];for(b=0;b<256;++b)ut.push(0);return ut})(),E={0:0},s={},Ne=0,re=l.length;Ne<re;Ne++)E[X=t[a=l[Ne]]]==null&&(E[X]=++w),s[a]={old:t[a],new:E[t[a]]},S[a]=E[t[a]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(S),{charMap:s,subtable:se.data,maxGlyphID:w+1};case"unicode":for(G=[],g=[],D=0,E={},i={},_=f=null,z=0,ue=l.length;z<ue;z++)E[K=t[a=l[z]]]==null&&(E[K]=++D),i[a]={old:K,new:E[K]},d=E[K]-a,_!=null&&d===f||(_&&g.push(_),G.push(a),f=d),_=a;for(_&&g.push(_),g.push(65535),G.push(65535),R=2*(I=G.length),H=2*Math.pow(Math.log(I)/Math.LN2,2),j=Math.log(H/2)/Math.LN2,F=2*I-H,h=[],B=[],v=[],b=ie=0,Q=G.length;ie<Q;b=++ie){if(Y=G[b],p=g[b],Y===65535){h.push(0),B.push(0);break}if(Y-(ae=i[Y].new)>=32768)for(h.push(0),B.push(2*(v.length+I-b)),a=q=Y;Y<=p?q<=p:q>=p;a=Y<=p?++q:--q)v.push(i[a].new);else h.push(ae-Y),B.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*I+2*v.length),se.writeUInt16(0),se.writeUInt16(R),se.writeUInt16(H),se.writeUInt16(j),se.writeUInt16(F),ge=0,V=g.length;ge<V;ge++)a=g[ge],se.writeUInt16(a);for(se.writeUInt16(0),oe=0,ne=G.length;oe<ne;oe++)a=G[oe],se.writeUInt16(a);for(_e=0,$=h.length;_e<$;_e++)d=h[_e],se.writeUInt16(d);for(Ie=0,de=B.length;Ie<de;Ie++)W=B[Ie],se.writeUInt16(W);for(De=0,Z=v.length;De<Z;De++)w=v[De],se.writeUInt16(w);return{charMap:i,subtable:se.data,maxGlyphID:D+1}}},e})(),M7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new M6(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,a;return n==null&&(n="macroman"),i=M6.encode(t,n),(a=new ih).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e})(),zme=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),Bme=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i})(),this.charRange=(function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Fme=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)n=t.readByte(),a.push(this.names.push(t.readString(n)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var l,d,h;for(h=[],s=l=0,d=this.file.maxp.numGlyphs;0<=d?l<d:l>d;s=0<=d?++l:--l)h.push(t.readUInt32());return h}).call(this)}},e})(),qme=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Ume=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,a,s,l,d,h,f,p,g,j;for(t.pos=this.offset,t.readShort(),n=t.readShort(),d=t.readShort(),i=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+d+t.readShort()});for(h={},s=p=0,g=i.length;p<g;s=++p)a=i[s],t.pos=a.offset,f=t.readString(a.length),l=new qme(f,a),h[j=a.nameID]==null&&(h[j]=[]),h[a.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e})(),Hme=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Wme=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,a,s,l,d,h;for(t.pos=this.offset,this.metrics=[],n=0,d=this.file.hhea.numberOfMetrics;0<=d?n<d:n>d;n=0<=d?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],n=f=0;0<=a?f<a:f>a;n=0<=a?++f:--f)p.push(t.readInt16());return p})(),this.widths=(function(){var f,p,g,j;for(j=[],f=0,p=(g=this.metrics).length;f<p;f++)s=g[f],j.push(s.advance);return j}).call(this),i=this.widths[this.widths.length-1],h=[],n=l=0;0<=a?l<a:l>a;n=0<=a?++l:--l)h.push(this.widths.push(i));return h},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),L7=[].slice,$me=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,a,s,l,d,h,f,p,g;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,i=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,l=(d=new ih(n.read(a))).readShort(),f=d.readShort(),g=d.readShort(),h=d.readShort(),p=d.readShort(),this.cache[t]=l===-1?new Kme(d,f,g,h,p):new Vme(d,l,f,g,h,p),this.cache[t]))},e.prototype.encode=function(t,n,i){var a,s,l,d,h;for(l=[],s=[],d=0,h=n.length;d<h;d++)a=t[n[d]],s.push(l.length),a&&(l=l.concat(a.encode(i)));return s.push(l.length),{table:l,offsets:s}},e})(),Vme=(function(){function e(t,n,i,a,s,l){this.raw=t,this.numberOfContours=n,this.xMin=i,this.yMin=a,this.xMax=s,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Kme=(function(){function e(t,n,i,a,s){var l,d;for(this.raw=t,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;d=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&d;)l.pos+=1&d?4:2,128&d?l.pos+=8:64&d?l.pos+=4:8&d&&(l.pos+=2)}return e.prototype.encode=function(){var t,n,i;for(n=new ih(L7.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)n.pos=this.glyphOffsets[t];return n.data},e})(),Gme=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Oc),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),a=0,s=0,l=0;l<i.length;++l)if(i[l]=a,s<n.length&&n[s]==l){++s,i[l]=a;var d=this.offsets[l],h=this.offsets[l+1]-d;h>0&&(a+=h)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e})(),Qme=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,i,a,s;for(n in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[n],t[n]=a[i];return t},e.prototype.glyphsFor=function(t){var n,i,a,s,l,d,h;for(a={},l=0,d=t.length;l<d;l++)a[s=t[l]]=this.font.glyf.glyphFor(s);for(s in n=[],a)(i=a[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in h=this.glyphsFor(n))i=h[s],a[s]=i;return a},e.prototype.encode=function(t,n){var i,a,s,l,d,h,f,p,g,j,v,b,w,S,_;for(a in i=M7.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),v={0:0},_=i.charMap)v[(h=_[a]).old]=h.new;for(b in j=i.maxGlyphID,l)b in v||(v[b]=j++);return p=(function(E){var D,W;for(D in W={},E)W[E[D]]=D;return W})(v),g=Object.keys(p).sort(function(E,D){return E-D}),w=(function(){var E,D,W;for(W=[],E=0,D=g.length;E<D;E++)d=g[E],W.push(p[d]);return W})(),s=this.font.glyf.encode(l,w,v),f=this.font.loca.encode(s.offsets,w),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e})();Ut.API.PDFObject=(function(){var e;function t(){}return e=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},t.convert=function(n){var i,a,s,l;if(Array.isArray(n))return"["+(function(){var d,h,f;for(f=[],d=0,h=n.length;d<h;d++)i=n[d],f.push(t.convert(i));return f})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in s=["<<"],n)l=n[a],s.push("/"+a+" "+t.convert(l));return s.push(">>"),s.join(`
`)}return""+n},t})();var Yf={},Dj,L6;function Yme(){return L6||(L6=1,Dj=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Dj}var Oj={},Vu={},R6;function pf(){if(R6)return Vu;R6=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Vu.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Vu.getSymbolTotalCodewords=function(i){return t[i]},Vu.getBCHDigit=function(n){let i=0;for(;n!==0;)i++,n>>>=1;return i},Vu.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');e=i},Vu.isKanjiModeEnabled=function(){return typeof e<"u"},Vu.toSJIS=function(i){return e(i)},Vu}var Mj={},I6;function r_(){return I6||(I6=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},e.from=function(i,a){if(e.isValid(i))return i;try{return t(i)}catch{return a}}})(Mj)),Mj}var Lj,z6;function Zme(){if(z6)return Lj;z6=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let i=0;i<n;i++)this.putBit((t>>>n-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Lj=e,Lj}var Rj,B6;function Xme(){if(B6)return Rj;B6=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,n,i,a){const s=t*this.size+n;this.data[s]=i,a&&(this.reservedBit[s]=!0)},e.prototype.get=function(t,n){return this.data[t*this.size+n]},e.prototype.xor=function(t,n,i){this.data[t*this.size+n]^=i},e.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]},Rj=e,Rj}var Ij={},F6;function Jme(){return F6||(F6=1,(function(e){const t=pf().getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,s=t(i),l=s===145?26:Math.ceil((s-13)/(2*a-2))*2,d=[s-7];for(let h=1;h<a-1;h++)d[h]=d[h-1]-l;return d.push(6),d.reverse()},e.getPositions=function(i){const a=[],s=e.getRowColCoords(i),l=s.length;for(let d=0;d<l;d++)for(let h=0;h<l;h++)d===0&&h===0||d===0&&h===l-1||d===l-1&&h===0||a.push([s[d],s[h]]);return a}})(Ij)),Ij}var zj={},q6;function epe(){if(q6)return zj;q6=1;const e=pf().getSymbolSize,t=7;return zj.getPositions=function(i){const a=e(i);return[[0,0],[a-t,0],[0,a-t]]},zj}var Bj={},U6;function tpe(){return U6||(U6=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const s=a.size;let l=0,d=0,h=0,f=null,p=null;for(let g=0;g<s;g++){d=h=0,f=p=null;for(let j=0;j<s;j++){let v=a.get(g,j);v===f?d++:(d>=5&&(l+=t.N1+(d-5)),f=v,d=1),v=a.get(j,g),v===p?h++:(h>=5&&(l+=t.N1+(h-5)),p=v,h=1)}d>=5&&(l+=t.N1+(d-5)),h>=5&&(l+=t.N1+(h-5))}return l},e.getPenaltyN2=function(a){const s=a.size;let l=0;for(let d=0;d<s-1;d++)for(let h=0;h<s-1;h++){const f=a.get(d,h)+a.get(d,h+1)+a.get(d+1,h)+a.get(d+1,h+1);(f===4||f===0)&&l++}return l*t.N2},e.getPenaltyN3=function(a){const s=a.size;let l=0,d=0,h=0;for(let f=0;f<s;f++){d=h=0;for(let p=0;p<s;p++)d=d<<1&2047|a.get(f,p),p>=10&&(d===1488||d===93)&&l++,h=h<<1&2047|a.get(p,f),p>=10&&(h===1488||h===93)&&l++}return l*t.N3},e.getPenaltyN4=function(a){let s=0;const l=a.data.length;for(let h=0;h<l;h++)s+=a.data[h];return Math.abs(Math.ceil(s*100/l/5)-10)*t.N4};function n(i,a,s){switch(i){case e.Patterns.PATTERN000:return(a+s)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return s%3===0;case e.Patterns.PATTERN011:return(a+s)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(s/3))%2===0;case e.Patterns.PATTERN101:return a*s%2+a*s%3===0;case e.Patterns.PATTERN110:return(a*s%2+a*s%3)%2===0;case e.Patterns.PATTERN111:return(a*s%3+(a+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(a,s){const l=s.size;for(let d=0;d<l;d++)for(let h=0;h<l;h++)s.isReserved(h,d)||s.xor(h,d,n(a,h,d))},e.getBestMask=function(a,s){const l=Object.keys(e.Patterns).length;let d=0,h=1/0;for(let f=0;f<l;f++){s(f),e.applyMask(f,a);const p=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(f,a),p<h&&(h=p,d=f)}return d}})(Bj)),Bj}var gv={},H6;function R7(){if(H6)return gv;H6=1;const e=r_(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return gv.getBlocksCount=function(a,s){switch(s){case e.L:return t[(a-1)*4+0];case e.M:return t[(a-1)*4+1];case e.Q:return t[(a-1)*4+2];case e.H:return t[(a-1)*4+3];default:return}},gv.getTotalCodewordsCount=function(a,s){switch(s){case e.L:return n[(a-1)*4+0];case e.M:return n[(a-1)*4+1];case e.Q:return n[(a-1)*4+2];case e.H:return n[(a-1)*4+3];default:return}},gv}var Fj={},Ip={},W6;function rpe(){if(W6)return Ip;W6=1;const e=new Uint8Array(512),t=new Uint8Array(256);return(function(){let i=1;for(let a=0;a<255;a++)e[a]=i,t[i]=a,i<<=1,i&256&&(i^=285);for(let a=255;a<512;a++)e[a]=e[a-255]})(),Ip.log=function(i){if(i<1)throw new Error("log("+i+")");return t[i]},Ip.exp=function(i){return e[i]},Ip.mul=function(i,a){return i===0||a===0?0:e[t[i]+t[a]]},Ip}var $6;function npe(){return $6||($6=1,(function(e){const t=rpe();e.mul=function(i,a){const s=new Uint8Array(i.length+a.length-1);for(let l=0;l<i.length;l++)for(let d=0;d<a.length;d++)s[l+d]^=t.mul(i[l],a[d]);return s},e.mod=function(i,a){let s=new Uint8Array(i);for(;s.length-a.length>=0;){const l=s[0];for(let h=0;h<a.length;h++)s[h]^=t.mul(a[h],l);let d=0;for(;d<s.length&&s[d]===0;)d++;s=s.slice(d)}return s},e.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let s=0;s<i;s++)a=e.mul(a,new Uint8Array([1,t.exp(s)]));return a}})(Fj)),Fj}var qj,V6;function ipe(){if(V6)return qj;V6=1;const e=npe();function t(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(i){this.degree=i,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(i.length+this.degree);a.set(i);const s=e.mod(a,this.genPoly),l=this.degree-s.length;if(l>0){const d=new Uint8Array(this.degree);return d.set(s,l),d}return s},qj=t,qj}var Uj={},Hj={},Wj={},K6;function I7(){return K6||(K6=1,Wj.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Wj}var ld={},G6;function z7(){if(G6)return ld;G6=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;ld.KANJI=new RegExp(n,"g"),ld.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ld.BYTE=new RegExp(i,"g"),ld.NUMERIC=new RegExp(e,"g"),ld.ALPHANUMERIC=new RegExp(t,"g");const a=new RegExp("^"+n+"$"),s=new RegExp("^"+e+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ld.testKanji=function(h){return a.test(h)},ld.testNumeric=function(h){return s.test(h)},ld.testAlphanumeric=function(h){return l.test(h)},ld}var Q6;function gf(){return Q6||(Q6=1,(function(e){const t=I7(),n=z7();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(s,l){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!t.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?s.ccBits[0]:l<27?s.ccBits[1]:s.ccBits[2]},e.getBestModeForData=function(s){return n.testNumeric(s)?e.NUMERIC:n.testAlphanumeric(s)?e.ALPHANUMERIC:n.testKanji(s)?e.KANJI:e.BYTE},e.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},e.isValid=function(s){return s&&s.bit&&s.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(s,l){if(e.isValid(s))return s;try{return i(s)}catch{return l}}})(Hj)),Hj}var Y6;function ape(){return Y6||(Y6=1,(function(e){const t=pf(),n=R7(),i=r_(),a=gf(),s=I7(),l=7973,d=t.getBCHDigit(l);function h(j,v,b){for(let w=1;w<=40;w++)if(v<=e.getCapacity(w,b,j))return w}function f(j,v){return a.getCharCountIndicator(j,v)+4}function p(j,v){let b=0;return j.forEach(function(w){const S=f(w.mode,v);b+=S+w.getBitsLength()}),b}function g(j,v){for(let b=1;b<=40;b++)if(p(j,b)<=e.getCapacity(b,v,a.MIXED))return b}e.from=function(v,b){return s.isValid(v)?parseInt(v,10):b},e.getCapacity=function(v,b,w){if(!s.isValid(v))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=a.BYTE);const S=t.getSymbolTotalCodewords(v),_=n.getTotalCodewordsCount(v,b),E=(S-_)*8;if(w===a.MIXED)return E;const D=E-f(w,v);switch(w){case a.NUMERIC:return Math.floor(D/10*3);case a.ALPHANUMERIC:return Math.floor(D/11*2);case a.KANJI:return Math.floor(D/13);case a.BYTE:default:return Math.floor(D/8)}},e.getBestVersionForData=function(v,b){let w;const S=i.from(b,i.M);if(Array.isArray(v)){if(v.length>1)return g(v,S);if(v.length===0)return 1;w=v[0]}else w=v;return h(w.mode,w.getLength(),S)},e.getEncodedBits=function(v){if(!s.isValid(v)||v<7)throw new Error("Invalid QR Code version");let b=v<<12;for(;t.getBCHDigit(b)-d>=0;)b^=l<<t.getBCHDigit(b)-d;return v<<12|b}})(Uj)),Uj}var $j={},Z6;function spe(){if(Z6)return $j;Z6=1;const e=pf(),t=1335,n=21522,i=e.getBCHDigit(t);return $j.getEncodedBits=function(s,l){const d=s.bit<<3|l;let h=d<<10;for(;e.getBCHDigit(h)-i>=0;)h^=t<<e.getBCHDigit(h)-i;return(d<<10|h)^n},$j}var Vj={},Kj,X6;function ope(){if(X6)return Kj;X6=1;const e=gf();function t(n){this.mode=e.NUMERIC,this.data=n.toString()}return t.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a,s,l;for(a=0;a+3<=this.data.length;a+=3)s=this.data.substr(a,3),l=parseInt(s,10),i.put(l,10);const d=this.data.length-a;d>0&&(s=this.data.substr(a),l=parseInt(s,10),i.put(l,d*3+1))},Kj=t,Kj}var Gj,J6;function lpe(){if(J6)return Gj;J6=1;const e=gf(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(i){this.mode=e.ALPHANUMERIC,this.data=i}return n.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(a){let s;for(s=0;s+2<=this.data.length;s+=2){let l=t.indexOf(this.data[s])*45;l+=t.indexOf(this.data[s+1]),a.put(l,11)}this.data.length%2&&a.put(t.indexOf(this.data[s]),6)},Gj=n,Gj}var Qj,eD;function cpe(){if(eD)return Qj;eD=1;const e=gf();function t(n){this.mode=e.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return t.getBitsLength=function(i){return i*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){for(let i=0,a=this.data.length;i<a;i++)n.put(this.data[i],8)},Qj=t,Qj}var Yj,tD;function dpe(){if(tD)return Yj;tD=1;const e=gf(),t=pf();function n(i){this.mode=e.KANJI,this.data=i}return n.getBitsLength=function(a){return a*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let a;for(a=0;a<this.data.length;a++){let s=t.toSJIS(this.data[a]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),i.put(s,13)}},Yj=n,Yj}var Zj={exports:{}},rD;function upe(){return rD||(rD=1,(function(e){var t={single_source_shortest_paths:function(n,i,a){var s={},l={};l[i]=0;var d=t.PriorityQueue.make();d.push(i,0);for(var h,f,p,g,j,v,b,w,S;!d.empty();){h=d.pop(),f=h.value,g=h.cost,j=n[f]||{};for(p in j)j.hasOwnProperty(p)&&(v=j[p],b=g+v,w=l[p],S=typeof l[p]>"u",(S||w>b)&&(l[p]=b,d.push(p,b),s[p]=f))}if(typeof a<"u"&&typeof l[a]>"u"){var _=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(_)}return s},extract_shortest_path_from_predecessor_list:function(n,i){for(var a=[],s=i;s;)a.push(s),n[s],s=n[s];return a.reverse(),a},find_path:function(n,i,a){var s=t.single_source_shortest_paths(n,i,a);return t.extract_shortest_path_from_predecessor_list(s,a)},PriorityQueue:{make:function(n){var i=t.PriorityQueue,a={},s;n=n||{};for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);return a.queue=[],a.sorter=n.sorter||i.default_sorter,a},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var a={value:n,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Zj)),Zj.exports}var nD;function hpe(){return nD||(nD=1,(function(e){const t=gf(),n=ope(),i=lpe(),a=cpe(),s=dpe(),l=z7(),d=pf(),h=upe();function f(_){return unescape(encodeURIComponent(_)).length}function p(_,E,D){const W=[];let K;for(;(K=_.exec(D))!==null;)W.push({data:K[0],index:K.index,mode:E,length:K[0].length});return W}function g(_){const E=p(l.NUMERIC,t.NUMERIC,_),D=p(l.ALPHANUMERIC,t.ALPHANUMERIC,_);let W,K;return d.isKanjiModeEnabled()?(W=p(l.BYTE,t.BYTE,_),K=p(l.KANJI,t.KANJI,_)):(W=p(l.BYTE_KANJI,t.BYTE,_),K=[]),E.concat(D,W,K).sort(function(F,H){return F.index-H.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function j(_,E){switch(E){case t.NUMERIC:return n.getBitsLength(_);case t.ALPHANUMERIC:return i.getBitsLength(_);case t.KANJI:return s.getBitsLength(_);case t.BYTE:return a.getBitsLength(_)}}function v(_){return _.reduce(function(E,D){const W=E.length-1>=0?E[E.length-1]:null;return W&&W.mode===D.mode?(E[E.length-1].data+=D.data,E):(E.push(D),E)},[])}function b(_){const E=[];for(let D=0;D<_.length;D++){const W=_[D];switch(W.mode){case t.NUMERIC:E.push([W,{data:W.data,mode:t.ALPHANUMERIC,length:W.length},{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.ALPHANUMERIC:E.push([W,{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.KANJI:E.push([W,{data:W.data,mode:t.BYTE,length:f(W.data)}]);break;case t.BYTE:E.push([{data:W.data,mode:t.BYTE,length:f(W.data)}])}}return E}function w(_,E){const D={},W={start:{}};let K=["start"];for(let B=0;B<_.length;B++){const F=_[B],H=[];for(let I=0;I<F.length;I++){const R=F[I],Y=""+B+I;H.push(Y),D[Y]={node:R,lastCount:0},W[Y]={};for(let G=0;G<K.length;G++){const ae=K[G];D[ae]&&D[ae].node.mode===R.mode?(W[ae][Y]=j(D[ae].lastCount+R.length,R.mode)-j(D[ae].lastCount,R.mode),D[ae].lastCount+=R.length):(D[ae]&&(D[ae].lastCount=R.length),W[ae][Y]=j(R.length,R.mode)+4+t.getCharCountIndicator(R.mode,E))}}K=H}for(let B=0;B<K.length;B++)W[K[B]].end=0;return{map:W,table:D}}function S(_,E){let D;const W=t.getBestModeForData(_);if(D=t.from(E,W),D!==t.BYTE&&D.bit<W.bit)throw new Error('"'+_+'" cannot be encoded with mode '+t.toString(D)+`.
 Suggested mode is: `+t.toString(W));switch(D===t.KANJI&&!d.isKanjiModeEnabled()&&(D=t.BYTE),D){case t.NUMERIC:return new n(_);case t.ALPHANUMERIC:return new i(_);case t.KANJI:return new s(_);case t.BYTE:return new a(_)}}e.fromArray=function(E){return E.reduce(function(D,W){return typeof W=="string"?D.push(S(W,null)):W.data&&D.push(S(W.data,W.mode)),D},[])},e.fromString=function(E,D){const W=g(E,d.isKanjiModeEnabled()),K=b(W),B=w(K,D),F=h.find_path(B.map,"start","end"),H=[];for(let I=1;I<F.length-1;I++)H.push(B.table[F[I]].node);return e.fromArray(v(H))},e.rawSplit=function(E){return e.fromArray(g(E,d.isKanjiModeEnabled()))}})(Vj)),Vj}var iD;function fpe(){if(iD)return Oj;iD=1;const e=pf(),t=r_(),n=Zme(),i=Xme(),a=Jme(),s=epe(),l=tpe(),d=R7(),h=ipe(),f=ape(),p=spe(),g=gf(),j=hpe();function v(B,F){const H=B.size,I=s.getPositions(F);for(let R=0;R<I.length;R++){const Y=I[R][0],G=I[R][1];for(let ae=-1;ae<=7;ae++)if(!(Y+ae<=-1||H<=Y+ae))for(let se=-1;se<=7;se++)G+se<=-1||H<=G+se||(ae>=0&&ae<=6&&(se===0||se===6)||se>=0&&se<=6&&(ae===0||ae===6)||ae>=2&&ae<=4&&se>=2&&se<=4?B.set(Y+ae,G+se,!0,!0):B.set(Y+ae,G+se,!1,!0))}}function b(B){const F=B.size;for(let H=8;H<F-8;H++){const I=H%2===0;B.set(H,6,I,!0),B.set(6,H,I,!0)}}function w(B,F){const H=a.getPositions(F);for(let I=0;I<H.length;I++){const R=H[I][0],Y=H[I][1];for(let G=-2;G<=2;G++)for(let ae=-2;ae<=2;ae++)G===-2||G===2||ae===-2||ae===2||G===0&&ae===0?B.set(R+G,Y+ae,!0,!0):B.set(R+G,Y+ae,!1,!0)}}function S(B,F){const H=B.size,I=f.getEncodedBits(F);let R,Y,G;for(let ae=0;ae<18;ae++)R=Math.floor(ae/3),Y=ae%3+H-8-3,G=(I>>ae&1)===1,B.set(R,Y,G,!0),B.set(Y,R,G,!0)}function _(B,F,H){const I=B.size,R=p.getEncodedBits(F,H);let Y,G;for(Y=0;Y<15;Y++)G=(R>>Y&1)===1,Y<6?B.set(Y,8,G,!0):Y<8?B.set(Y+1,8,G,!0):B.set(I-15+Y,8,G,!0),Y<8?B.set(8,I-Y-1,G,!0):Y<9?B.set(8,15-Y-1+1,G,!0):B.set(8,15-Y-1,G,!0);B.set(I-8,8,1,!0)}function E(B,F){const H=B.size;let I=-1,R=H-1,Y=7,G=0;for(let ae=H-1;ae>0;ae-=2)for(ae===6&&ae--;;){for(let se=0;se<2;se++)if(!B.isReserved(R,ae-se)){let Ne=!1;G<F.length&&(Ne=(F[G]>>>Y&1)===1),B.set(R,ae-se,Ne),Y--,Y===-1&&(G++,Y=7)}if(R+=I,R<0||H<=R){R-=I,I=-I;break}}}function D(B,F,H){const I=new n;H.forEach(function(se){I.put(se.mode.bit,4),I.put(se.getLength(),g.getCharCountIndicator(se.mode,B)),se.write(I)});const R=e.getSymbolTotalCodewords(B),Y=d.getTotalCodewordsCount(B,F),G=(R-Y)*8;for(I.getLengthInBits()+4<=G&&I.put(0,4);I.getLengthInBits()%8!==0;)I.putBit(0);const ae=(G-I.getLengthInBits())/8;for(let se=0;se<ae;se++)I.put(se%2?17:236,8);return W(I,B,F)}function W(B,F,H){const I=e.getSymbolTotalCodewords(F),R=d.getTotalCodewordsCount(F,H),Y=I-R,G=d.getBlocksCount(F,H),ae=I%G,se=G-ae,Ne=Math.floor(I/G),z=Math.floor(Y/G),ie=z+1,q=Ne-z,re=new h(q);let ue=0;const Q=new Array(G),V=new Array(G);let ne=0;const $=new Uint8Array(B.buffer);for(let X=0;X<G;X++){const _e=X<se?z:ie;Q[X]=$.slice(ue,ue+_e),V[X]=re.encode(Q[X]),ue+=_e,ne=Math.max(ne,_e)}const de=new Uint8Array(I);let Z=0,ge,oe;for(ge=0;ge<ne;ge++)for(oe=0;oe<G;oe++)ge<Q[oe].length&&(de[Z++]=Q[oe][ge]);for(ge=0;ge<q;ge++)for(oe=0;oe<G;oe++)de[Z++]=V[oe][ge];return de}function K(B,F,H,I){let R;if(Array.isArray(B))R=j.fromArray(B);else if(typeof B=="string"){let Ne=F;if(!Ne){const z=j.rawSplit(B);Ne=f.getBestVersionForData(z,H)}R=j.fromString(B,Ne||40)}else throw new Error("Invalid data");const Y=f.getBestVersionForData(R,H);if(!Y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!F)F=Y;else if(F<Y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+Y+`.
`);const G=D(F,H,R),ae=e.getSymbolSize(F),se=new i(ae);return v(se,F),b(se),w(se,F),_(se,H,0),F>=7&&S(se,F),E(se,G),isNaN(I)&&(I=l.getBestMask(se,_.bind(null,se,H))),l.applyMask(I,se),_(se,H,I),{modules:se,version:F,errorCorrectionLevel:H,maskPattern:I,segments:R}}return Oj.create=function(F,H){if(typeof F>"u"||F==="")throw new Error("No input text");let I=t.M,R,Y;return typeof H<"u"&&(I=t.from(H.errorCorrectionLevel,t.M),R=f.from(H.version),Y=l.from(H.maskPattern),H.toSJISFunc&&e.setToSJISFunction(H.toSJISFunc)),K(F,R,I,Y)},Oj}var Xj={},Jj={},aD;function B7(){return aD||(aD=1,(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,l=i.scale||4;return{width:s,scale:s?4:l,margin:a,color:{dark:t(i.color.dark||"#000000ff"),light:t(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},e.getImageWidth=function(i,a){const s=e.getScale(i,a);return Math.floor((i+a.margin*2)*s)},e.qrToImageData=function(i,a,s){const l=a.modules.size,d=a.modules.data,h=e.getScale(l,s),f=Math.floor((l+s.margin*2)*h),p=s.margin*h,g=[s.color.light,s.color.dark];for(let j=0;j<f;j++)for(let v=0;v<f;v++){let b=(j*f+v)*4,w=s.color.light;if(j>=p&&v>=p&&j<f-p&&v<f-p){const S=Math.floor((j-p)/h),_=Math.floor((v-p)/h);w=g[d[S*l+_]?1:0]}i[b++]=w.r,i[b++]=w.g,i[b++]=w.b,i[b]=w.a}}})(Jj)),Jj}var sD;function mpe(){return sD||(sD=1,(function(e){const t=B7();function n(a,s,l){a.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=l,s.width=l,s.style.height=l+"px",s.style.width=l+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(s,l,d){let h=d,f=l;typeof h>"u"&&(!l||!l.getContext)&&(h=l,l=void 0),l||(f=i()),h=t.getOptions(h);const p=t.getImageWidth(s.modules.size,h),g=f.getContext("2d"),j=g.createImageData(p,p);return t.qrToImageData(j.data,s,h),n(g,f,p),g.putImageData(j,0,0),f},e.renderToDataURL=function(s,l,d){let h=d;typeof h>"u"&&(!l||!l.getContext)&&(h=l,l=void 0),h||(h={});const f=e.render(s,l,h),p=h.type||"image/png",g=h.rendererOpts||{};return f.toDataURL(p,g.quality)}})(Xj)),Xj}var e5={},oD;function ppe(){if(oD)return e5;oD=1;const e=B7();function t(a,s){const l=a.a/255,d=s+'="'+a.hex+'"';return l<1?d+" "+s+'-opacity="'+l.toFixed(2).slice(1)+'"':d}function n(a,s,l){let d=a+s;return typeof l<"u"&&(d+=" "+l),d}function i(a,s,l){let d="",h=0,f=!1,p=0;for(let g=0;g<a.length;g++){const j=Math.floor(g%s),v=Math.floor(g/s);!j&&!f&&(f=!0),a[g]?(p++,g>0&&j>0&&a[g-1]||(d+=f?n("M",j+l,.5+v+l):n("m",h,0),h=0,f=!1),j+1<s&&a[g+1]||(d+=n("h",p),p=0)):h++}return d}return e5.render=function(s,l,d){const h=e.getOptions(l),f=s.modules.size,p=s.modules.data,g=f+h.margin*2,j=h.color.light.a?"<path "+t(h.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",v="<path "+t(h.color.dark,"stroke")+' d="'+i(p,f,h.margin)+'"/>',b='viewBox="0 0 '+g+" "+g+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(h.width?'width="'+h.width+'" height="'+h.width+'" ':"")+b+' shape-rendering="crispEdges">'+j+v+`</svg>
`;return typeof d=="function"&&d(null,S),S},e5}var lD;function gpe(){if(lD)return Yf;lD=1;const e=Yme(),t=fpe(),n=mpe(),i=ppe();function a(s,l,d,h,f){const p=[].slice.call(arguments,1),g=p.length,j=typeof p[g-1]=="function";if(!j&&!e())throw new Error("Callback required as last argument");if(j){if(g<2)throw new Error("Too few arguments provided");g===2?(f=d,d=l,l=h=void 0):g===3&&(l.getContext&&typeof f>"u"?(f=h,h=void 0):(f=h,h=d,d=l,l=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(d=l,l=h=void 0):g===2&&!l.getContext&&(h=d,d=l,l=void 0),new Promise(function(v,b){try{const w=t.create(d,h);v(s(w,l,h))}catch(w){b(w)}})}try{const v=t.create(d,h);f(null,s(v,l,h))}catch(v){f(v)}}return Yf.create=t.create,Yf.toCanvas=a.bind(null,n.render),Yf.toDataURL=a.bind(null,n.renderToDataURL),Yf.toString=a.bind(null,function(s,l,d){return i.render(s,d)}),Yf}var ype=gpe();const vpe=Zl(ype);function xpe(e,t,n){const i=new Date(e.invoiceDate).toISOString(),a=e.totalAmount.toFixed(2),s=e.taxAmount.toFixed(2),l=[{tag:1,value:t},{tag:2,value:n},{tag:3,value:i},{tag:4,value:a},{tag:5,value:s}];let d=[];return l.forEach(f=>{const p=new TextEncoder().encode(f.value);d.push(f.tag),d.push(p.length),d.push(...p)}),btoa(String.fromCharCode(...d))}function bpe(){const[e,t]=P.useState(null),[n,i]=P.useState(!1),[a,s]=P.useState(null),[l,d]=P.useState(""),[h,f]=P.useState("details"),[p,g]=P.useState(!1),j=Tr(),{data:v,isLoading:b}=Ye({queryKey:["invoices",l],queryFn:async()=>{const q={};l&&(q.status=l);const{data:re}=await xe.get("/invoices",{params:q});return re}}),{data:w}=Ye({queryKey:["invoices","stats"],queryFn:async()=>{const{data:q}=await xe.get("/invoices/stats");return q}}),{data:S}=Ye({queryKey:["customers"],queryFn:async()=>{const{data:q}=await xe.get("/customers");return q}}),{data:_}=Ye({queryKey:["orders","DELIVERED"],queryFn:async()=>{const{data:q}=await xe.get("/orders",{params:{status:"DELIVERED"}});return q}}),[E,D]=P.useState({amount:"",paymentMethod:"BANK_TRANSFER",referenceNumber:"",notes:""}),W=ft({mutationFn:async q=>xe.put(`/invoices/${q}/submit-for-approval`),onSuccess:()=>{j.invalidateQueries({queryKey:["invoices"]})}}),K=ft({mutationFn:async q=>xe.put(`/invoices/${q}/approve-post`),onSuccess:()=>{j.invalidateQueries({queryKey:["invoices"]})}});ft({mutationFn:async q=>xe.put(`/invoices/${q}/close`),onSuccess:()=>{j.invalidateQueries({queryKey:["invoices"]})}});const B=ft({mutationFn:async({id:q,...re})=>xe.post(`/invoices/${q}/payments`,re),onSuccess:()=>{j.invalidateQueries({queryKey:["invoices"]}),s(null),D({amount:"",paymentMethod:"BANK_TRANSFER",referenceNumber:"",notes:""})}});ft({mutationFn:async({id:q,reason:re})=>xe.put(`/invoices/${q}/void`,{reason:re}),onSuccess:()=>{j.invalidateQueries({queryKey:["invoices"]})}});const F=ft({mutationFn:async q=>xe.post("/invoices/generate-from-orders",q),onSuccess:()=>{j.invalidateQueries({queryKey:["invoices"]}),i(!1)}}),[H,I]=P.useState({customerId:"",selectedOrders:[],taxRate:15}),R=q=>({DRAFT:"default",PENDING_APPROVAL:"warning",ISSUED_POSTED:"info",PAID:"success",PARTIALLY_PAID:"warning",CLOSED_ARCHIVED:"success",CANCELLED_VOIDED:"danger",OVERDUE:"danger",DISPUTED:"danger"})[q]||"default",Y=()=>{!a||!E.amount||B.mutate({id:a.id,amount:parseFloat(E.amount),paymentMethod:E.paymentMethod,referenceNumber:E.referenceNumber||void 0,notes:E.notes||void 0})},G=()=>{!H.customerId||H.selectedOrders.length===0||F.mutate({customerId:H.customerId,orderIds:H.selectedOrders,taxRate:H.taxRate})},ae=P.useCallback(async q=>{g(!0);try{const re=new Ut({orientation:"portrait",unit:"mm",format:"a4"}),ue=210,Q=297,V=20,ne=ue-V*2,$="RadioPharma Manufacturing Co.",de="300000000000003",Z=xpe(q,$,de);let ge="";try{ge=await vpe.toDataURL(Z,{width:100,margin:1,errorCorrectionLevel:"M"})}catch(De){console.error("QR generation error:",De)}re.setFillColor(30,58,95),re.rect(0,0,ue,45,"F"),re.setTextColor(255,255,255),re.setFontSize(24),re.setFont("helvetica","bold"),re.text("INVOICE",V,25),re.setFontSize(10),re.setFont("helvetica","normal"),re.text(q.invoiceNumber,V,35),re.setFontSize(12),re.setFont("helvetica","bold"),re.text($,ue-V,20,{align:"right"}),re.setFontSize(9),re.setFont("helvetica","normal"),re.text("Riyadh, Saudi Arabia",ue-V,27,{align:"right"}),re.text(`VAT: ${de}`,ue-V,34,{align:"right"});let oe=60;re.setTextColor(100,100,100),re.setFontSize(9),re.text("BILL TO",V,oe),re.setTextColor(0,0,0),re.setFontSize(12),re.setFont("helvetica","bold"),re.text(q.customer?.name||"Customer",V,oe+7),re.setFont("helvetica","normal"),re.setFontSize(10),q.customer?.address&&re.text(q.customer.address,V,oe+14);const X=Ke(new Date(q.invoiceDate),"MMMM d, yyyy"),_e=Ke(new Date(q.dueDate),"MMMM d, yyyy");re.setTextColor(100,100,100),re.setFontSize(9),re.text("INVOICE DATE",ue-V-50,oe,{align:"left"}),re.text("DUE DATE",ue-V-50,oe+15,{align:"left"}),re.setTextColor(0,0,0),re.setFontSize(10),re.text(X,ue-V-50,oe+6),re.text(_e,ue-V-50,oe+21),oe=105,re.setFillColor(245,247,250),re.rect(V,oe,ne,10,"F"),re.setTextColor(100,100,100),re.setFontSize(8),re.setFont("helvetica","bold"),re.text("DESCRIPTION",V+3,oe+7),re.text("QTY",V+95,oe+7),re.text("UNIT PRICE",V+115,oe+7),re.text("TOTAL",V+ne-3,oe+7,{align:"right"}),oe+=15,re.setFont("helvetica","normal"),re.setTextColor(0,0,0),re.setFontSize(10),q.items&&q.items.length>0&&q.items.forEach(De=>{re.text(De.description||"Item",V+3,oe),re.text(De.quantity?.toString()||"1",V+95,oe),re.text(`$${De.unitPrice?.toFixed(2)||"0.00"}`,V+115,oe),re.text(`$${De.lineTotal?.toFixed(2)||"0.00"}`,V+ne-3,oe,{align:"right"}),re.setDrawColor(230,230,230),re.line(V,oe+3,V+ne,oe+3),oe+=10}),oe+=10;const Ie=V+100;if(re.setFontSize(10),re.setTextColor(100,100,100),re.text("Subtotal:",Ie,oe),re.setTextColor(0,0,0),re.text(`$${q.subtotal?.toFixed(2)||"0.00"}`,V+ne-3,oe,{align:"right"}),oe+=8,re.setTextColor(100,100,100),re.text(`VAT (${q.taxRate||15}%):`,Ie,oe),re.setTextColor(0,0,0),re.text(`$${q.taxAmount?.toFixed(2)||"0.00"}`,V+ne-3,oe,{align:"right"}),oe+=10,re.setFillColor(30,58,95),re.rect(Ie-5,oe-5,ne-Ie+V+5,12,"F"),re.setTextColor(255,255,255),re.setFont("helvetica","bold"),re.setFontSize(11),re.text("TOTAL:",Ie,oe+3),re.text(`$${q.totalAmount?.toFixed(2)||"0.00"}`,V+ne-3,oe+3,{align:"right"}),q.paidAmount>0){oe+=18,re.setTextColor(34,197,94),re.setFontSize(10),re.text(`Paid: $${q.paidAmount?.toFixed(2)}`,Ie,oe);const De=q.totalAmount-q.paidAmount;De>0&&(oe+=8,re.setTextColor(239,68,68),re.text(`Balance Due: $${De.toFixed(2)}`,Ie,oe))}ge&&(re.addImage(ge,"PNG",V,Q-V-30-15,30,30),re.setTextColor(100,100,100),re.setFontSize(7),re.text("ZATCA E-Invoice QR Code",V,Q-V-12)),re.setTextColor(100,100,100),re.setFontSize(8),re.setFont("helvetica","normal"),re.text("Thank you for your business!",ue/2,Q-V-5,{align:"center"}),re.setDrawColor(200,200,200),re.line(V,Q-V-20,ue-V,Q-V-20),re.save(`Invoice_${q.invoiceNumber}.pdf`)}catch(re){console.error("PDF generation error:",re),alert("Failed to generate PDF. Please try again.")}finally{g(!1)}},[]),se=_?.filter(q=>q.customerId===H.customerId)||[],Ne=v?.filter(q=>q.status==="PAID"||q.status==="CLOSED_ARCHIVED").length||0,z=v?.filter(q=>q.status==="ISSUED_POSTED").length||0;v?.filter(q=>q.status==="DRAFT").length;const ie=v?.filter(q=>q.status==="PENDING_APPROVAL").length||0;return b?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Invoicing"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Generate invoices from delivered orders and track payments"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"140px"},value:l,onChange:q=>d(q.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"DRAFT",children:"Draft"}),r.jsx("option",{value:"PENDING_APPROVAL",children:"Pending Approval"}),r.jsx("option",{value:"ISSUED_POSTED",children:"Issued"}),r.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),r.jsx("option",{value:"PAID",children:"Paid"}),r.jsx("option",{value:"CLOSED_ARCHIVED",children:"Closed"}),r.jsx("option",{value:"CANCELLED_VOIDED",children:"Voided"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[r.jsx(Lr,{size:16})," Generate Invoice"]})]})]}),w&&r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Pending Approval",value:w.pendingApproval||ie,icon:r.jsx(Dt,{size:20}),color:"warning",onClick:()=>d("PENDING_APPROVAL"),selected:l==="PENDING_APPROVAL"}),r.jsx(lt,{title:"Issued",value:w.issued||z,icon:r.jsx(qo,{size:20}),color:"info",onClick:()=>d("ISSUED_POSTED"),selected:l==="ISSUED_POSTED"}),r.jsx(lt,{title:"Outstanding",value:`SAR ${((w.outstanding||0)/1e3).toFixed(1)}k`,icon:r.jsx(ax,{size:20}),color:"primary",onClick:()=>d(""),selected:!l}),r.jsx(lt,{title:"Paid",value:w.paid||Ne,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>d("PAID"),selected:l==="PAID"}),r.jsx(lt,{title:"Overdue",value:w.overdue||0,icon:r.jsx(In,{size:20}),color:"danger",onClick:()=>d("OVERDUE"),selected:l==="OVERDUE"})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:e?"1fr 440px":"1fr",gap:"1.5rem"},children:[r.jsx("div",{className:"card",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Invoice"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"140px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[v?.map(q=>{const re=["SENT","PARTIALLY_PAID"].includes(q.status)&&new Date(q.dueDate)<new Date,ue=q.totalAmount-q.paidAmount;return r.jsxs("tr",{style:{cursor:"pointer",backgroundColor:e?.id===q.id?"var(--bg-secondary)":void 0},onClick:()=>{t(q),f("details")},children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600,marginBottom:"0.125rem"},children:q.invoiceNumber}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Due: ",Ke(new Date(q.dueDate),"MMM d, yyyy")]})]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Fo,{size:16,style:{color:"var(--text-muted)"}})}),r.jsx("span",{style:{fontWeight:500},children:q.customer?.name})]})}),r.jsx("td",{children:r.jsx("div",{style:{fontSize:"0.875rem"},children:Ke(new Date(q.invoiceDate),"MMM d, yyyy")})}),r.jsxs("td",{children:[r.jsxs("div",{style:{fontWeight:600,fontSize:"1rem"},children:["$",q.totalAmount.toLocaleString(void 0,{minimumFractionDigits:2})]}),q.paidAmount>0&&q.paidAmount<q.totalAmount&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--success)"},children:["Paid: $",q.paidAmount.toFixed(2)]})]}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${re?"danger":R(q.status)}`,children:re?"OVERDUE":q.status.replace("_"," ")})}),r.jsx("td",{onClick:Q=>Q.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>ae(q),disabled:p,title:"Download PDF",children:r.jsx(Xw,{size:14})}),q.status==="DRAFT"&&r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>W.mutate(q.id),disabled:W.isPending,title:"Submit for Approval",children:r.jsx(qo,{size:14})}),q.status==="PENDING_APPROVAL"&&r.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>K.mutate(q.id),disabled:K.isPending,title:"Approve & Post",children:r.jsx(yt,{size:14})}),["ISSUED_POSTED","PARTIALLY_PAID"].includes(q.status)&&r.jsx("button",{className:"btn btn-sm btn-secondary",style:{background:"rgba(34, 197, 94, 0.1)",color:"var(--success)",border:"none"},onClick:()=>{D({...E,amount:ue.toFixed(2)}),s(q)},title:"Record Payment",children:r.jsx(Ul,{size:14})})]})})]},q.id)}),(!v||v.length===0)&&r.jsx("tr",{children:r.jsxs("td",{colSpan:6,style:{textAlign:"center",color:"var(--text-muted)",padding:"3rem"},children:[r.jsx($h,{size:40,style:{opacity:.2,marginBottom:"0.75rem"}}),r.jsx("div",{children:"No invoices found"})]})})]})]})}),e&&r.jsxs("div",{className:"card",style:{padding:0},children:[r.jsx("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:r.jsx("span",{className:`badge badge-${R(e.status)}`,children:e.status.replace("_"," ")})}),r.jsxs("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:["Invoice ",e.invoiceNumber]}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:e.customer?.name})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>ae(e),disabled:p,title:"Download PDF",children:r.jsx(rS,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>t(null),style:{borderRadius:"50%",width:"28px",height:"28px",padding:0},children:r.jsx(hn,{size:14})})]})]})}),r.jsx("div",{style:{borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",padding:"0 1rem"},children:[r.jsx("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:h==="details"?"2px solid var(--primary)":"2px solid transparent",color:h==="details"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>f("details"),children:"Invoice Details"}),r.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:h==="payments"?"2px solid var(--primary)":"2px solid transparent",color:h==="payments"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem"},onClick:()=>f("payments"),children:["Payments (",e.payments?.length||0,")"]}),r.jsxs("button",{style:{padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:h==="attachments"?"2px solid var(--primary)":"2px solid transparent",color:h==="attachments"?"var(--primary)":"var(--text-muted)",fontWeight:500,cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.375rem"},onClick:()=>f("attachments"),children:[r.jsx(ym,{size:14})," Documents"]})]})}),r.jsxs("div",{style:{padding:"1.25rem"},children:[h==="details"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsxs("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Wi,{size:18,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Invoice Date"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(e.invoiceDate),"MMM d, yyyy")})]})]}),r.jsxs("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Dt,{size:18,style:{color:new Date(e.dueDate)<new Date?"var(--danger)":"var(--warning)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Due Date"}),r.jsx("div",{style:{fontWeight:500,color:new Date(e.dueDate)<new Date?"var(--danger)":void 0},children:Ke(new Date(e.dueDate),"MMM d, yyyy")})]})]})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, var(--primary) 0%, #1e40af 100%)",color:"white",padding:"1.25rem",borderRadius:"var(--radius)",marginBottom:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8,marginBottom:"0.25rem"},children:"Total Amount"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700},children:["$",e.totalAmount.toFixed(2)]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8,marginBottom:"0.25rem"},children:"Paid"}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:600},children:["$",e.paidAmount.toFixed(2)]})]})]}),e.totalAmount-e.paidAmount>0&&r.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(255,255,255,0.2)",display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"0.875rem",opacity:.8},children:"Balance Due"}),r.jsxs("span",{style:{fontWeight:600},children:["$",(e.totalAmount-e.paidAmount).toFixed(2)]})]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.75rem"},children:"Line Items"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.items?.map(q=>r.jsxs("div",{style:{padding:"0.875rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:500,marginBottom:"0.125rem"},children:q.description}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[q.quantity," x $",q.unitPrice.toFixed(2)]})]}),r.jsxs("div",{style:{fontWeight:600,color:"var(--primary)"},children:["$",q.lineTotal.toFixed(2)]})]},q.id))})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Subtotal"}),r.jsxs("span",{children:["$",e.subtotal.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{color:"var(--text-muted)"},children:["VAT (",e.taxRate||15,"%)"]}),r.jsxs("span",{children:["$",e.taxAmount.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:"1px solid var(--border)",fontWeight:600},children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{children:["$",e.totalAmount.toFixed(2)]})]})]})]}),h==="payments"&&r.jsxs(r.Fragment,{children:[e.payments?.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.payments.map(q=>r.jsxs("div",{style:{padding:"1rem",border:"1px solid var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(yt,{size:20,style:{color:"var(--success)"}})}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:600,color:"var(--success)",marginBottom:"0.125rem"},children:["$",q.amount.toFixed(2)]}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[Ke(new Date(q.paymentDate),"MMM d, yyyy")," via ",q.paymentMethod.replace("_"," ")]})]}),q.referenceNumber&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontFamily:"monospace"},children:["#",q.referenceNumber]})]},q.id))}):r.jsxs("div",{style:{textAlign:"center",padding:"2.5rem 1rem",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx(Ul,{size:32,style:{opacity:.3,marginBottom:"0.75rem"}}),r.jsx("div",{style:{marginBottom:"0.25rem"},children:"No payments recorded"}),r.jsx("div",{style:{fontSize:"0.75rem"},children:"Payments will appear here once recorded"})]}),["SENT","PARTIALLY_PAID"].includes(e.status)&&r.jsxs("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"1rem"},onClick:()=>{const q=e.totalAmount-e.paidAmount;D({...E,amount:q.toFixed(2)}),s(e)},children:[r.jsx(Ul,{size:18})," Record Payment"]})]}),h==="attachments"&&r.jsx(Lm,{entityType:"INVOICE",entityId:e.id,title:"Invoice Documents"})]})]})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"560px"},onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Generate Invoice"}),r.jsx("button",{onClick:()=>i(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"1.5rem"},children:"Select delivered orders to include in the invoice"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer *"}),r.jsxs("select",{className:"form-select",value:H.customerId,onChange:q=>I({...H,customerId:q.target.value,selectedOrders:[]}),children:[r.jsx("option",{value:"",children:"Select a customer"}),S?.map(q=>r.jsx("option",{value:q.id,children:q.name},q.id))]})]}),H.customerId&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Select Delivered Orders *"}),r.jsx("div",{style:{maxHeight:"200px",overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:se.length>0?se.map(q=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",cursor:"pointer",borderBottom:"1px solid var(--border)",backgroundColor:H.selectedOrders.includes(q.id)?"rgba(59, 130, 246, 0.1)":void 0},children:[r.jsx("input",{type:"checkbox",checked:H.selectedOrders.includes(q.id),onChange:re=>{re.target.checked?I({...H,selectedOrders:[...H.selectedOrders,q.id]}):I({...H,selectedOrders:H.selectedOrders.filter(ue=>ue!==q.id)})},style:{width:"16px",height:"16px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:500,fontFamily:"monospace",fontSize:"0.8125rem"},children:q.orderNumber}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[q.product?.name," - ",q.requestedActivity," ",q.activityUnit]})]})]},q.id)):r.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No delivered orders for this customer"})}),H.selectedOrders.length>0&&r.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--primary)"},children:[H.selectedOrders.length," order(s) selected"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"VAT Rate (%)"}),r.jsx("input",{type:"number",className:"form-input",value:H.taxRate,onChange:q=>I({...H,taxRate:parseFloat(q.target.value)||0}),min:"0",max:"100",step:"0.5"}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Saudi Arabia standard VAT is 15%"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:G,disabled:F.isPending||H.selectedOrders.length===0,children:F.isPending?"Generating...":"Generate Invoice"})]})]})}),a&&r.jsx("div",{className:"modal-overlay",onClick:()=>s(null),children:r.jsxs("div",{className:"modal",style:{maxWidth:"440px"},onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Record Payment"}),r.jsx("button",{onClick:()=>s(null),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Invoice"}),r.jsx("span",{style:{fontWeight:500},children:a.invoiceNumber})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Outstanding"}),r.jsxs("span",{style:{fontWeight:600,color:"var(--danger)"},children:["$",(a.totalAmount-a.paidAmount).toFixed(2)]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Amount *"}),r.jsx("input",{type:"number",className:"form-input",value:E.amount,onChange:q=>D({...E,amount:q.target.value}),step:"0.01",placeholder:"Enter payment amount"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Method"}),r.jsxs("select",{className:"form-select",value:E.paymentMethod,onChange:q=>D({...E,paymentMethod:q.target.value}),children:[r.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),r.jsx("option",{value:"CHECK",children:"Check"}),r.jsx("option",{value:"CREDIT_CARD",children:"Credit Card"}),r.jsx("option",{value:"CASH",children:"Cash"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Reference Number"}),r.jsx("input",{type:"text",className:"form-input",value:E.referenceNumber,onChange:q=>D({...E,referenceNumber:q.target.value}),placeholder:"e.g., Check #, Transaction ID"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{className:"form-input",value:E.notes,onChange:q=>D({...E,notes:q.target.value}),rows:2,placeholder:"Optional notes"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>s(null),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:Y,disabled:B.isPending||!E.amount,children:B.isPending?"Recording...":"Record Payment"})]})]})})]})}const cD=[{key:"SUBMITTED",label:"Submitted",icon:ii},{key:"VALIDATED",label:"Validated",icon:yt},{key:"SCHEDULED",label:"Scheduled",icon:Wi},{key:"IN_PRODUCTION",label:"Production",icon:lo},{key:"QC_PENDING",label:"QC",icon:af},{key:"RELEASED",label:"Released",icon:Us},{key:"DISPATCHED",label:"Dispatched",icon:fn},{key:"DELIVERED",label:"Delivered",icon:Sr}],dD={DRAFT:{color:"#94a3b8",badge:"default",description:"Order created, awaiting submission"},SUBMITTED:{color:"#3b82f6",badge:"info",description:"Order submitted for validation"},VALIDATED:{color:"#06b6d4",badge:"info",description:"Order validated and approved"},SCHEDULED:{color:"#8b5cf6",badge:"info",description:"Scheduled for production"},IN_PRODUCTION:{color:"#f59e0b",badge:"warning",description:"Radiopharmaceutical being manufactured"},QC_PENDING:{color:"#f59e0b",badge:"warning",description:"Quality control in progress"},RELEASED:{color:"#22c55e",badge:"success",description:"Released by Qualified Person"},DISPATCHED:{color:"#3b82f6",badge:"info",description:"Shipped to customer"},DELIVERED:{color:"#22c55e",badge:"success",description:"Delivered successfully"},CANCELLED:{color:"#ef4444",badge:"danger",description:"Order cancelled"},REJECTED:{color:"#ef4444",badge:"danger",description:"Order rejected during validation"},FAILED_QC:{color:"#ef4444",badge:"danger",description:"Quality control failed"},REWORK:{color:"#f59e0b",badge:"warning",description:"Order being reworked"}},jpe={DRAFT:{action:"Submit Order",role:"Sales / Customer",description:"Review order details and submit for processing",link:"/orders"},SUBMITTED:{action:"Validate Order",role:"Sales Team",description:"Verify customer license, product permissions, and feasibility",link:"/orders"},VALIDATED:{action:"Schedule Production",role:"Production Planner",description:"Assign to production batch and schedule manufacturing",link:"/planner"},SCHEDULED:{action:"Start Production",role:"Production Team",description:"Begin radiopharmaceutical synthesis",link:"/batches"},IN_PRODUCTION:{action:"Complete Production",role:"Production Team",description:"Finish manufacturing and send to QC",link:"/batches"},QC_PENDING:{action:"Complete QC Testing",role:"QC Analyst",description:"Perform quality control tests on batch",link:"/qc"},RELEASED:{action:"Dispatch Shipment",role:"Logistics",description:"Create shipment and dispatch to customer",link:"/shipments"},DISPATCHED:{action:"Confirm Delivery",role:"Logistics / Customer",description:"Confirm order was received by customer",link:"/shipments"},DELIVERED:{action:"Complete",role:"-",description:"Order successfully completed"}};function vh(e,t){try{if(!e)return"-";const n=new Date(e);return isNaN(n.getTime())?"-":Ke(n,t)}catch{return"-"}}function wpe(){const{id:e}=nf(),t=Cn(),n=Ei(),i=Tr(),{user:a}=bl(),[s,l]=P.useState(!1),{data:d,isLoading:h}=Ye({queryKey:["order",e],queryFn:async()=>{const{data:_}=await xe.get(`/orders/${e}`);return _},enabled:!!e}),{data:f}=Ye({queryKey:["order-events",e],queryFn:async()=>{const{data:_}=await xe.get(`/orders/${e}/events`);return _},enabled:!!e});if(ft({mutationFn:async({status:_,comment:E})=>xe.post(`/orders/${e}/transition`,{status:_,comment:E}),onSuccess:(_,E)=>{i.invalidateQueries({queryKey:["order",e]}),i.invalidateQueries({queryKey:["order-events",e]}),n.success("Status Updated",`Order moved to ${E.status.replace("_"," ")}`)},onError:_=>{const E=Er(_);n.error("Update Failed",E?.userMessage||"Failed to update order status")}}),h)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});if(!d)return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t("/orders"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[r.jsx(pd,{size:18})," Back to Orders"]}),r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(In,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h3",{children:"Order Not Found"})]})]});const p=cD.findIndex(_=>_.key===d.status),g=["CANCELLED","REJECTED","FAILED_QC","DELIVERED"].includes(d.status),j=jpe[d.status],v=dD[d.status]||dD.DRAFT,b=(_,E)=>g&&d.status!=="DELIVERED"?"skipped":d.status===_?"current":p>=0&&E<p?"completed":(d.status==="DRAFT"&&E===0||p>=0&&E>p,"pending"),w=_=>_.toStatus==="DELIVERED"?r.jsx(Sr,{size:16}):_.toStatus==="DISPATCHED"?r.jsx(fn,{size:16}):_.toStatus==="RELEASED"?r.jsx(Us,{size:16}):_.toStatus?.includes("QC")?r.jsx(af,{size:16}):_.toStatus==="IN_PRODUCTION"?r.jsx(lo,{size:16}):_.toStatus==="SCHEDULED"?r.jsx(Wi,{size:16}):r.jsx(Dt,{size:16}),S=s?f:f?.slice(0,5);return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsxs("button",{onClick:()=>t("/orders"),className:"btn btn-secondary",children:[r.jsx(pd,{size:18})," Back to Orders"]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs(yr,{to:`/orders/${e}`,className:"btn btn-secondary",children:[r.jsx(ii,{size:18})," Edit Order"]}),r.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),children:[r.jsx(rS,{size:18})," Print"]})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:d.orderNumber}),r.jsx("span",{className:`badge badge-${v.badge}`,style:{fontSize:"0.875rem"},children:d.status.replace("_"," ")})]}),r.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:v.description})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Delivery"}),r.jsx("div",{style:{fontWeight:600},children:vh(d.deliveryDate,"MMM dd, yyyy")}),r.jsxs("div",{style:{fontSize:"0.875rem"},children:[vh(d.deliveryTimeStart,"HH:mm")," - ",vh(d.deliveryTimeEnd,"HH:mm")]})]})]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem 1.5rem",backgroundColor:"var(--bg-secondary)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Fo,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Customer"}),r.jsx("div",{style:{fontWeight:500},children:d.customer?.name})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Sr,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),r.jsx("div",{style:{fontWeight:500},children:d.product?.name})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Wl,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Activity"}),r.jsxs("div",{style:{fontWeight:500},children:[d.requestedActivity," ",d.activityUnit]})]})]}),d.numberOfDoses&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(lo,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Doses"}),r.jsx("div",{style:{fontWeight:500},children:d.numberOfDoses})]})]})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1.5rem"},children:"Order Journey"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"1rem"},children:[r.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",right:"40px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),cD.map((_,E)=>{const D=b(_.key,E),W=_.icon,K=f?.find(B=>B.toStatus===_.key);return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,flex:1},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:D==="completed"?"var(--success)":D==="current"?"var(--primary)":"var(--bg-tertiary)",color:D==="completed"||D==="current"?"white":"var(--text-muted)",border:D==="current"?"3px solid rgba(37, 99, 235, 0.3)":"none",transition:"all 0.2s"},children:D==="completed"?r.jsx(yt,{size:20}):r.jsx(W,{size:20})}),r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",fontWeight:D==="current"?600:400,color:D==="pending"?"var(--text-muted)":"var(--text-primary)",textAlign:"center"},children:_.label}),K&&r.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:vh(K.createdAt,"MMM dd HH:mm")})]},_.key)})]})]}),j&&!g&&r.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem",borderLeft:"4px solid var(--primary)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"WHAT HAPPENS NEXT"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"0.25rem"},children:j.action}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:j.description}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:[r.jsx(Vl,{size:12,style:{display:"inline",marginRight:"0.25rem"}}),"Responsible: ",r.jsx("strong",{children:j.role})]})]}),j.link&&d.status!=="DELIVERED"&&r.jsxs(yr,{to:j.link,className:"btn btn-primary",children:["Go to ",j.action.split(" ")[0]," ",r.jsx(bc,{size:16})]})]})}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Timeline"}),f?.length>5&&r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>l(!s),children:[s?r.jsx(gm,{size:14}):r.jsx(tu,{size:14}),s?"Show Less":`Show All (${f.length})`]})]}),r.jsx("div",{style:{padding:"1rem 1.5rem"},children:S?.length>0?r.jsxs("div",{style:{position:"relative",paddingLeft:"2rem"},children:[r.jsx("div",{style:{position:"absolute",left:"11px",top:"8px",bottom:"8px",width:"2px",backgroundColor:"var(--border)"}}),S.map((_,E)=>r.jsxs("div",{style:{position:"relative",paddingBottom:E<S.length-1?"1.25rem":0},children:[r.jsx("div",{style:{position:"absolute",left:"-2rem",top:"4px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:E===0?"var(--primary)":"var(--bg-tertiary)",color:E===0?"white":"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid var(--bg-primary)"},children:w(_)}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[r.jsxs("span",{style:{fontWeight:500},children:[_.fromStatus?`${_.fromStatus.replace("_"," ")}  `:"",_.toStatus.replace("_"," ")]}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:vh(_.createdAt,"MMM dd, yyyy HH:mm")})]}),_.changedByUser&&r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:["by ",_.changedByUser.firstName," ",_.changedByUser.lastName,_.role&&r.jsxs("span",{style:{color:"var(--text-muted)"},children:[" (",_.role,")"]})]}),_.changeNotes&&r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",marginTop:"0.25rem",fontStyle:"italic"},children:['"',_.changeNotes,'"']})]})]},_.id))]}):r.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"No timeline events yet"})})]}),d.batch&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Production & QC"})}),r.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Batch Number"}),r.jsx("div",{style:{fontWeight:500},children:d.batch.batchNumber})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Batch Status"}),r.jsx("span",{className:`badge badge-${d.batch.status==="RELEASED"?"success":"info"}`,children:d.batch.status.replace("_"," ")})]}),d.batch.qcResults?.length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"QC Tests"}),r.jsxs("div",{style:{fontWeight:500},children:[d.batch.qcResults.filter(_=>_.status==="PASSED").length," / ",d.batch.qcResults.length," Passed"]})]})]}),r.jsx("div",{style:{marginTop:"1rem"},children:r.jsxs(yr,{to:"/batches",className:"btn btn-secondary btn-sm",children:["View Batch Details ",r.jsx(bc,{size:14})]})})]})]}),d.shipment&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Shipment"})}),r.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Shipment Number"}),r.jsx("div",{style:{fontWeight:500},children:d.shipment.shipmentNumber})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Status"}),r.jsx("span",{className:`badge badge-${d.shipment.status==="DELIVERED"?"success":"info"}`,children:d.shipment.status})]}),d.shipment.dispatchedAt&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Dispatched At"}),r.jsx("div",{style:{fontWeight:500},children:vh(d.shipment.dispatchedAt,"MMM dd HH:mm")})]})]}),r.jsx("div",{style:{marginTop:"1rem"},children:r.jsxs(yr,{to:"/shipments",className:"btn btn-secondary btn-sm",children:["View Shipment Details ",r.jsx(bc,{size:14})]})})]})]}),e&&r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsx(Lm,{entityType:"ORDER",entityId:e,title:"Order Attachments"})}),a?.role==="Admin"&&r.jsx("div",{className:"card",style:{marginBottom:"1.5rem",backgroundColor:"var(--bg-tertiary)"},children:r.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem"},children:"ADMIN INFO"}),r.jsxs("div",{style:{fontSize:"0.8125rem"},children:[r.jsx("strong",{children:"Order ID:"})," ",d.id]}),r.jsxs("div",{style:{fontSize:"0.8125rem",marginTop:"0.25rem"},children:[r.jsx("strong",{children:"Created:"})," ",vh(d.createdAt,"MMM dd, yyyy HH:mm:ss")]}),r.jsx("div",{style:{marginTop:"0.5rem"},children:r.jsx(yr,{to:"/audit",className:"btn btn-secondary btn-sm",children:"View Audit Log"})})]})})]})}const uD=[{key:"PLANNED",label:"Planned",icon:Wi,includes:["PLANNED","SCHEDULED"]},{key:"IN_PRODUCTION",label:"Production",icon:lo,includes:["IN_PRODUCTION","PRODUCTION_COMPLETE"]},{key:"QC_PENDING",label:"QC",icon:wc,includes:["QC_PENDING","QC_IN_PROGRESS","QC_PASSED"]},{key:"QP_REVIEW",label:"QP Review",icon:Us,includes:["QP_REVIEW"]},{key:"RELEASED",label:"Released",icon:yt,includes:["RELEASED"]},{key:"DISPENSING_IN_PROGRESS",label:"Dispensing",icon:Tv,includes:["DISPENSING_IN_PROGRESS","DISPENSED"]},{key:"PACKED",label:"Packed",icon:wO,includes:["PACKED"]},{key:"DISPATCHED",label:"Dispatched",icon:fn,includes:["DISPATCHED","CLOSED"]}],Spe=["PLANNED","SCHEDULED","IN_PRODUCTION","PRODUCTION_COMPLETE","QC_PENDING","QC_IN_PROGRESS","QC_PASSED","QP_REVIEW","RELEASED","DISPENSING_IN_PROGRESS","DISPENSED","PACKED","DISPATCHED","CLOSED"],hD={PLANNED:{color:"#94a3b8",badge:"default",description:"Batch is planned and awaiting production start"},SCHEDULED:{color:"#64748b",badge:"secondary",description:"Batch is scheduled for production"},IN_PRODUCTION:{color:"#3b82f6",badge:"info",description:"Radiopharmaceutical synthesis in progress"},PRODUCTION_COMPLETE:{color:"#3b82f6",badge:"info",description:"Production completed, ready for QC"},QC_PENDING:{color:"#f59e0b",badge:"warning",description:"Awaiting quality control testing"},QC_IN_PROGRESS:{color:"#f59e0b",badge:"warning",description:"Quality control tests in progress"},QC_PASSED:{color:"#eab308",badge:"qc-passed",description:"All QC tests passed"},QP_REVIEW:{color:"#f97316",badge:"qp-passed",description:"Awaiting Qualified Person review"},RELEASED:{color:"#22c55e",badge:"released",description:"Released by QP for dispensing"},DISPENSING_IN_PROGRESS:{color:"#14b8a6",badge:"teal",description:"Dose units being dispensed"},DISPENSED:{color:"#14b8a6",badge:"teal",description:"All doses dispensed"},PACKED:{color:"#3b82f6",badge:"info",description:"Packaged and ready for dispatch"},DISPATCHED:{color:"#3b82f6",badge:"info",description:"Shipped to customer"},CLOSED:{color:"#dc2626",badge:"closed",description:"Batch completed"},ON_HOLD:{color:"#f59e0b",badge:"warning",description:"Batch on hold - requires investigation"},REJECTED:{color:"#ef4444",badge:"danger",description:"Batch rejected by QP"},FAILED_QC:{color:"#ef4444",badge:"danger",description:"Quality control failed"},CANCELLED:{color:"#ef4444",badge:"danger",description:"Batch cancelled"},DEVIATION_OPEN:{color:"#f59e0b",badge:"warning",description:"Deviation investigation in progress"}},Npe={PLANNED:{action:"Start Production",role:"Production",description:"Begin radiopharmaceutical synthesis",nextStatus:"IN_PRODUCTION"},SCHEDULED:{action:"Start Production",role:"Production",description:"Begin radiopharmaceutical synthesis",nextStatus:"IN_PRODUCTION"},IN_PRODUCTION:{action:"Complete Production",role:"Production",description:"Mark synthesis as complete",nextStatus:"PRODUCTION_COMPLETE"},PRODUCTION_COMPLETE:{action:"Start QC",role:"QC Analyst",description:"Begin quality control testing",nextStatus:"QC_PENDING"},QC_PENDING:{action:"Enter QC Results",role:"QC Analyst",description:"Perform and record QC test results",nextStatus:"QC_IN_PROGRESS"},QC_IN_PROGRESS:{action:"Complete QC",role:"QC Analyst",description:"Finalize QC testing",nextStatus:"QC_PASSED"},QC_PASSED:{action:"Submit for QP Review",role:"QC Analyst",description:"Send batch for QP approval",nextStatus:"QP_REVIEW"},QP_REVIEW:{action:"Release Batch",role:"Qualified Person",description:"Review and release batch with e-signature",nextStatus:"RELEASED"},RELEASED:{action:"Start Dispensing",role:"Dispensing",description:"Begin creating dose units",nextStatus:"DISPENSING_IN_PROGRESS"},DISPENSING_IN_PROGRESS:{action:"Complete Dispensing",role:"Dispensing",description:"Finish dispensing all doses",nextStatus:"DISPENSED"},DISPENSED:{action:"Pack for Shipment",role:"Logistics",description:"Package doses for transport",nextStatus:"PACKED"},PACKED:{action:"Dispatch",role:"Logistics",description:"Ship batch to customer",nextStatus:"DISPATCHED"},DISPATCHED:{action:"Close Batch",role:"Admin",description:"Close batch after delivery confirmation",nextStatus:"CLOSED"},CLOSED:{action:"Complete",role:"-",description:"Batch lifecycle complete"}};function xh(e,t){try{if(!e)return"-";const n=new Date(e);return isNaN(n.getTime())?"-":Ke(n,t)}catch{return"-"}}function _pe(){const{id:e}=nf(),t=Cn(),n=Ei(),i=Tr(),{user:a}=bl(),[s,l]=P.useState(!1),[d,h]=P.useState("overview"),{data:f,isLoading:p}=Ye({queryKey:["batch",e],queryFn:async()=>{const{data:F}=await xe.get(`/batches/${e}`);return F},enabled:!!e}),{data:g}=Ye({queryKey:["batch-events",e],queryFn:async()=>{const{data:F}=await xe.get(`/batches/${e}/events`);return F},enabled:!!e}),j=ft({mutationFn:async({status:F,note:H})=>xe.post(`/batches/${e}/transition`,{status:F,note:H}),onSuccess:(F,H)=>{i.invalidateQueries({queryKey:["batch",e]}),i.invalidateQueries({queryKey:["batch-events",e]}),n.success("Status Updated",`Batch moved to ${H.status.replace(/_/g," ")}`)},onError:F=>{const H=Er(F);n.error("Update Failed",H?.userMessage||"Failed to update batch status")}});if(p)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});if(!f)return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t("/batches"),className:"btn btn-secondary",style:{marginBottom:"1rem"},children:[r.jsx(pd,{size:18})," Back to Batches"]}),r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(In,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h3",{children:"Batch Not Found"})]})]});const v=uD.findIndex(F=>F.includes?.includes(f.status)||F.key===f.status);Spe.indexOf(f.status);const b=["ON_HOLD","REJECTED","FAILED_QC","CANCELLED","DEVIATION_OPEN"].includes(f.status),w=["CLOSED","CANCELLED"].includes(f.status),S=Npe[f.status],_=hD[f.status]||hD.PLANNED,E=(F,H)=>b?H<=v?"completed":"skipped":F.includes?.includes(f.status)?"current":f.status==="CLOSED"&&F.key==="DISPATCHED"||v>=0&&H<v?"completed":(v>=0&&H>v,"pending"),D=F=>F.toStatus==="DISPATCHED"?r.jsx(fn,{size:16}):F.toStatus==="RELEASED"?r.jsx(Us,{size:16}):F.toStatus?.includes("QC")||F.toStatus?.includes("QP")?r.jsx(wc,{size:16}):F.toStatus==="IN_PRODUCTION"?r.jsx(lo,{size:16}):F.toStatus?.includes("DISPENS")?r.jsx(Tv,{size:16}):F.toStatus==="PACKED"?r.jsx(wO,{size:16}):F.eventType==="MATERIAL_ADDED"?r.jsx(Sr,{size:16}):r.jsx(Dt,{size:16}),W=s?g:g?.slice(0,5),K=f.doseUnits?.length||0,B=f.doseUnits?.filter(F=>F.status==="DISPENSED").length||0;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsxs("button",{onClick:()=>t("/batches"),className:"btn btn-secondary",children:[r.jsx(pd,{size:18})," Back to Batches"]}),r.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:r.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),children:[r.jsx(rS,{size:18})," Print"]})})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:f.batchNumber}),r.jsx("span",{className:`badge badge-${_.badge}`,style:{fontSize:"0.875rem"},children:f.status.replace(/_/g," ")}),b&&r.jsxs("span",{className:"badge badge-danger",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(vr,{size:12})," Exception"]})]}),r.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:_.description})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Planned Start"}),r.jsx("div",{style:{fontWeight:600},children:xh(f.plannedStartTime,"MMM dd, yyyy HH:mm")})]})]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",padding:"1rem 1.5rem",backgroundColor:"var(--bg-secondary)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Sr,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),r.jsx("div",{style:{fontWeight:500},children:f.product?.name})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Wl,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Target Activity"}),r.jsxs("div",{style:{fontWeight:500},children:[f.targetActivity," ",f.activityUnit]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(HU,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Orders"}),r.jsx("div",{style:{fontWeight:500},children:f.orders?.length||0})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Tv,{size:20,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Doses"}),r.jsxs("div",{style:{fontWeight:500},children:[B," / ",K]})]})]})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)"},children:["overview","orders","doses","qc","release","logistics"].map(F=>r.jsx("button",{onClick:()=>h(F),className:"btn",style:{borderRadius:0,borderBottom:d===F?"2px solid var(--primary)":"2px solid transparent",fontWeight:d===F?600:400,padding:"0.75rem 1rem",background:"transparent"},children:F.charAt(0).toUpperCase()+F.slice(1)},F))}),d==="overview"&&r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1.5rem"},children:"Batch Journey"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"2rem"},children:[r.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",right:"40px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),uD.map((F,H)=>{const I=E(F,H),R=F.icon,Y=g?.find(G=>F.includes?.includes(G.toStatus)||G.toStatus===F.key);return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1,flex:1},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:I==="completed"?"var(--success)":I==="current"?"var(--primary)":I==="skipped"?"var(--danger-light, #fecaca)":"var(--bg-tertiary)",color:I==="completed"||I==="current"?"white":I==="skipped"?"var(--danger)":"var(--text-muted)",border:I==="current"?"3px solid rgba(37, 99, 235, 0.3)":"none",transition:"all 0.2s"},children:I==="completed"?r.jsx(yt,{size:20}):I==="skipped"?r.jsx(x5,{size:16}):r.jsx(R,{size:20})}),r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",fontWeight:I==="current"?600:400,color:I==="pending"||I==="skipped"?"var(--text-muted)":"var(--text-primary)",textAlign:"center"},children:F.label}),Y&&r.jsx("div",{style:{fontSize:"0.625rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:xh(Y.createdAt,"MMM dd HH:mm")})]},F.key)})]}),S&&!w&&r.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.25rem",borderLeft:`4px solid ${b?"var(--danger)":"var(--primary)"}`,background:"var(--bg-secondary)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:b?"BATCH BLOCKED":"WHAT HAPPENS NEXT"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"0.25rem"},children:S.action}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:S.description}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:[r.jsx(Vl,{size:12,style:{display:"inline",marginRight:"0.25rem"}}),"Responsible: ",r.jsx("strong",{children:S.role})]})]}),S.nextStatus&&!b&&r.jsxs("button",{className:"btn btn-primary",onClick:()=>j.mutate({status:S.nextStatus}),disabled:j.isPending,children:[r.jsx(fd,{size:16})," ",S.action]})]})}),r.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Timeline",g?.length>5&&r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>l(!s),children:[s?r.jsx(gm,{size:14}):r.jsx(tu,{size:14}),s?"Show Less":`Show All (${g.length})`]})]}),W?.length>0?r.jsxs("div",{style:{position:"relative",paddingLeft:"2rem"},children:[r.jsx("div",{style:{position:"absolute",left:"11px",top:"8px",bottom:"8px",width:"2px",backgroundColor:"var(--border)"}}),W.map((F,H)=>r.jsxs("div",{style:{position:"relative",paddingBottom:H<W.length-1?"1.25rem":0},children:[r.jsx("div",{style:{position:"absolute",left:"-2rem",top:"4px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:H===0?"var(--primary)":"var(--bg-tertiary)",color:H===0?"white":"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid var(--bg-primary)"},children:D(F)}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[r.jsxs("span",{style:{fontWeight:500},children:[F.fromStatus?`${F.fromStatus.replace(/_/g," ")}  `:"",F.toStatus?.replace(/_/g," ")||F.eventType.replace(/_/g," ")]}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:xh(F.createdAt,"MMM dd, yyyy HH:mm")})]}),F.actor&&r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:["by ",F.actor.firstName," ",F.actor.lastName,F.actorRole&&r.jsxs("span",{style:{color:"var(--text-muted)"},children:[" (",F.actorRole,")"]})]}),F.note&&r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",marginTop:"0.25rem",fontStyle:"italic"},children:['"',F.note,'"']})]})]},F.id))]}):r.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"No timeline events yet"})]}),d==="orders"&&r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Linked Orders"}),f.orders?.length>0?r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order No"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:f.orders.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:F.orderNumber})}),r.jsx("td",{children:F.customer?.name}),r.jsxs("td",{children:[F.requestedActivity," ",F.activityUnit]}),r.jsx("td",{children:xh(F.deliveryDate,"MMM dd")}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-info",children:F.status})}),r.jsx("td",{children:r.jsx(yr,{to:`/orders/${F.id}/journey`,className:"btn btn-secondary btn-sm",children:"View Journey"})})]},F.id))})]}):r.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No orders linked to this batch"})]}),d==="doses"&&r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Dose Units"}),f.doseUnits?.length>0?r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Dose ID"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Patient Ref"}),r.jsx("th",{children:"Dispensed At"})]})}),r.jsx("tbody",{children:f.doseUnits.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:F.doseNumber||F.id.slice(0,8)})}),r.jsxs("td",{children:[F.activity," ",F.activityUnit]}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${F.status==="DISPENSED"?"success":"default"}`,children:F.status})}),r.jsx("td",{children:F.patientReference||"-"}),r.jsx("td",{children:F.dispensedAt?xh(F.dispensedAt,"MMM dd HH:mm"):"-"})]},F.id))})]}):r.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[r.jsx(Tv,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),r.jsx("p",{children:"No dose units created yet"}),f.status==="RELEASED"&&r.jsx(yr,{to:"/dispensing",className:"btn btn-primary",children:"Create Dose Units"})]})]}),d==="qc"&&r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"QC Results"}),f.qcResults?.length>0?r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Test"}),r.jsx("th",{children:"Result"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Tested By"}),r.jsx("th",{children:"Tested At"})]})}),r.jsx("tbody",{children:f.qcResults.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:F.template?.testName})}),r.jsx("td",{children:F.numericResult||F.textResult||"-"}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${F.passed?"success":F.passed===!1?"danger":"default"}`,children:F.passed?"PASSED":F.passed===!1?"FAILED":"PENDING"})}),r.jsx("td",{children:F.testedBy?`${F.testedBy.firstName} ${F.testedBy.lastName}`:"-"}),r.jsx("td",{children:F.testedAt?xh(F.testedAt,"MMM dd HH:mm"):"-"})]},F.id))})]}):r.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[r.jsx(wc,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),r.jsx("p",{children:"No QC results yet"}),["QC_PENDING","QC_IN_PROGRESS"].includes(f.status)&&r.jsx(yr,{to:"/qc",className:"btn btn-primary",children:"Enter QC Results"})]})]}),d==="release"&&r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"QP Release"}),f.batchReleases?.length>0?r.jsx("div",{children:f.batchReleases.map(F=>r.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem",borderLeft:"4px solid var(--success)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:600},children:["Released by ",F.releasedBy?.firstName," ",F.releasedBy?.lastName]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:xh(F.signatureTimestamp,"MMM dd, yyyy HH:mm:ss")}),F.reason&&r.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:F.reason})]}),r.jsx("div",{children:r.jsx("span",{className:"badge badge-success",children:F.releaseType})})]})},F.id))}):r.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[r.jsx(Us,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),r.jsx("p",{children:"Batch not yet released"}),f.status==="QP_REVIEW"&&r.jsx(yr,{to:"/release",className:"btn btn-primary",children:"Go to QP Release"})]})]}),d==="logistics"&&r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Logistics & Shipment"}),f.orders?.some(F=>F.shipmentId)?r.jsx("div",{children:f.orders.filter(F=>F.shipmentId).map(F=>r.jsxs("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{style:{fontWeight:600},children:["Order: ",F.orderNumber]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Shipment ID: ",F.shipmentId]}),r.jsx(yr,{to:"/shipments",className:"btn btn-secondary btn-sm",style:{marginTop:"0.5rem"},children:"View Shipment"})]},F.id))}):r.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:[r.jsx(fn,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),r.jsx("p",{children:"No shipments created yet"}),["DISPENSED","PACKED"].includes(f.status)&&r.jsx(yr,{to:"/shipments",className:"btn btn-primary",children:"Create Shipment"})]})]}),e&&r.jsx(Lm,{entityType:"BATCH",entityId:e,title:"Batch Attachments"})]})]})}function Cpe(){const{user:e}=bl(),t=Cn(),{data:n,isLoading:i,isError:a,error:s,refetch:l,isFetching:d}=Ye({queryKey:["portal-orders"],queryFn:async()=>{const{data:b}=await xe.get("/orders",{params:{limit:20}});return b}}),{data:h}=Ye({queryKey:["portal-invoices"],queryFn:async()=>{const{data:b}=await xe.get("/invoices",{params:{limit:5}});return b}});if(a)return r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(vr,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load dashboard"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:s instanceof Error?s.message:"An error occurred while loading your dashboard."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>l(),children:"Try Again"})]});if(i)return r.jsxs("div",{style:{padding:"2rem"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(b=>r.jsx("div",{className:"card skeleton",style:{height:"100px"}},b))}),r.jsx("div",{className:"card skeleton",style:{height:"120px",marginBottom:"1.5rem"}}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2].map(b=>r.jsx("div",{className:"card skeleton",style:{height:"300px"}},b))})]});const f={totalOrders:n?.length||0,activeOrders:n?.filter(b=>!["DELIVERED","CANCELLED","REJECTED"].includes(b.status)).length||0,deliveredOrders:n?.filter(b=>b.status==="DELIVERED").length||0,pendingInvoices:h?.filter(b=>["SENT","PARTIALLY_PAID"].includes(b.status)).length||0},p=(n||[]).reduce((b,w)=>(b[w.status]=(b[w.status]||0)+1,b),{}),g=[{id:"submitted",label:"Submitted",count:p.SUBMITTED||0,color:"blue",linkTo:"/portal/orders?status=SUBMITTED"},{id:"confirmed",label:"Confirmed",count:p.VALIDATED||0,color:"blue",linkTo:"/portal/orders?status=VALIDATED"},{id:"scheduled",label:"Scheduled",count:p.SCHEDULED||0,color:"blue",linkTo:"/portal/orders?status=SCHEDULED"},{id:"in_production",label:"In Production",count:p.IN_PRODUCTION||0,color:"yellow",linkTo:"/portal/orders?status=IN_PRODUCTION"},{id:"dispatched",label:"Dispatched",count:p.DISPATCHED||0,color:"teal",linkTo:"/portal/orders?status=DISPATCHED"},{id:"delivered",label:"Delivered",count:p.DELIVERED||0,color:"green",linkTo:"/portal/orders?status=DELIVERED"}],j=(n||[]).filter(b=>{const w=new Date(b.deliveryDate),S=new Date;return w.toDateString()===S.toDateString()&&!["DELIVERED","CANCELLED"].includes(b.status)}).map(b=>({id:b.id,identifier:b.orderNumber,title:b.product?.name||"Unknown Product",eta:b.deliveryDate,status:b.status,nextAction:"Track",linkTo:`/portal/orders/${b.id}/journey`})),v=(n||[]).filter(b=>b.status==="DISPATCHED").map(b=>({id:b.id,identifier:b.orderNumber,title:b.product?.name||"Unknown Product",subtitle:"In Transit",eta:b.deliveryDate,status:b.status,nextAction:"Track Shipment",linkTo:`/portal/orders/${b.id}/journey`}));return r.jsxs("div",{children:[r.jsx(Mm,{title:`Welcome back, ${e?.firstName}!`,subtitle:"Manage your radiopharmaceutical orders and track deliveries",lastRefreshed:new Date,onRefresh:()=>l(),isRefreshing:d,actions:r.jsxs(yr,{to:"/portal/orders/new",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Lr,{size:18})," Place New Order"]})}),e?.customerName&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",backgroundColor:"rgba(13, 148, 136, 0.1)",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid rgba(13, 148, 136, 0.2)"},children:[r.jsx(Fo,{size:18,style:{color:"#0d9488"}}),r.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Viewing portal for: "}),r.jsx("span",{style:{fontWeight:600,color:"#0d9488"},children:e.customerName})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Orders",value:f.totalOrders,icon:r.jsx(ru,{size:20}),color:"primary",linkTo:"/portal/orders"}),r.jsx(lt,{title:"In Progress",value:f.activeOrders,icon:r.jsx(Dt,{size:20}),color:"warning",linkTo:"/portal/orders?active=true"}),r.jsx(lt,{title:"Delivered",value:f.deliveredOrders,icon:r.jsx(yt,{size:20}),color:"success",linkTo:"/portal/orders?status=DELIVERED"}),r.jsx(lt,{title:"Pending Invoices",value:f.pendingInvoices,icon:r.jsx($h,{size:20}),color:f.pendingInvoices>0?"danger":"info",linkTo:"/portal/invoices"})]}),r.jsx(UO,{title:"My Orders Journey",stages:g}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(dd,{title:"Arriving Today",items:j,viewAllLink:"/portal/orders?due=today",maxItems:5,icon:r.jsx(Sr,{size:18,style:{color:"#0d9488"}}),accentColor:"#0d9488",emptyMessage:"No orders arriving today"}),r.jsx(dd,{title:"In Transit",items:v,viewAllLink:"/portal/orders?status=DISPATCHED",maxItems:5,icon:r.jsx(fn,{size:18,style:{color:"#0891b2"}}),accentColor:"#0891b2",emptyMessage:"No orders in transit"})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Recent Orders"}),r.jsx(yr,{to:"/portal/orders",className:"btn btn-sm btn-secondary",children:"View All"})]}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order #"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Delivery"}),r.jsx("th",{children:"Status"})]})}),r.jsxs("tbody",{children:[n?.slice(0,5).map(b=>r.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>t(`/portal/orders/${b.id}/journey`),children:[r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:b.orderNumber}),r.jsx("td",{children:b.product?.name}),r.jsx("td",{style:{fontSize:"0.875rem"},children:Ke(new Date(b.deliveryDate),"MMM d")}),r.jsx("td",{children:r.jsx(Wn,{status:b.status,size:"sm"})})]},b.id)),(!n||n.length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No orders yet. Place your first order!"})})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem"},children:"Recent Invoices"}),r.jsx(yr,{to:"/portal/invoices",className:"btn btn-sm btn-secondary",children:"View All"})]}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Invoice #"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Status"})]})}),r.jsxs("tbody",{children:[h?.slice(0,5).map(b=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.8125rem"},children:b.invoiceNumber}),r.jsx("td",{style:{fontSize:"0.875rem"},children:Ke(new Date(b.invoiceDate),"MMM d, yyyy")}),r.jsxs("td",{style:{fontWeight:500},children:["$",b.totalAmount?.toFixed(2)]}),r.jsx("td",{children:r.jsx(Wn,{status:b.status,size:"sm"})})]},b.id)),(!h||h.length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No invoices yet"})})]})]})]})]})]})}function Ape(){const[e,t]=P.useState(""),{data:n,isLoading:i}=Ye({queryKey:["portal-orders",e],queryFn:async()=>{const l={};e&&(l.status=e);const{data:d}=await xe.get("/orders",{params:l});return d}}),a=l=>({DRAFT:"default",SUBMITTED:"info",VALIDATED:"info",SCHEDULED:"info",IN_PRODUCTION:"warning",QC_PENDING:"warning",RELEASED:"success",DISPATCHED:"info",DELIVERED:"success",CANCELLED:"danger",REJECTED:"danger"})[l]||"default",s=l=>{switch(l){case"DELIVERED":return r.jsx(yt,{size:16,style:{color:"var(--success)"}});case"DISPATCHED":return r.jsx(fn,{size:16,style:{color:"var(--primary)"}});case"CANCELLED":case"REJECTED":return r.jsx(pi,{size:16,style:{color:"var(--danger)"}});default:return r.jsx(Dt,{size:16,style:{color:"var(--warning)"}})}};return i?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Orders"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"View and track all your radiopharmaceutical orders"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs("select",{className:"form-select",style:{width:"auto"},value:e,onChange:l=>t(l.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"DRAFT",children:"Draft"}),r.jsx("option",{value:"SUBMITTED",children:"Submitted"}),r.jsx("option",{value:"VALIDATED",children:"Validated"}),r.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),r.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),r.jsx("option",{value:"RELEASED",children:"Released"}),r.jsx("option",{value:"DISPATCHED",children:"Dispatched"}),r.jsx("option",{value:"DELIVERED",children:"Delivered"})]}),r.jsxs(yr,{to:"/portal/orders/new",className:"btn btn-primary",children:[r.jsx(Lr,{size:18})," Place Order"]})]})]}),r.jsx("div",{className:"card",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order #"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Activity"}),r.jsx("th",{children:"Delivery Date"}),r.jsx("th",{children:"Delivery Time"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Created"}),r.jsx("th",{style:{width:"80px"},children:"Track"})]})}),r.jsxs("tbody",{children:[n?.map(l=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Sr,{size:16,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{fontFamily:"monospace",fontWeight:500},children:l.orderNumber})]})}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:l.product?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:l.product?.radionuclide})]}),r.jsxs("td",{style:{fontWeight:500},children:[l.requestedActivity," ",l.activityUnit]}),r.jsx("td",{children:Ke(new Date(l.deliveryDate),"MMM d, yyyy")}),r.jsxs("td",{children:[Ke(new Date(l.deliveryTimeStart),"HH:mm")," - ",Ke(new Date(l.deliveryTimeEnd),"HH:mm")]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s(l.status),r.jsx("span",{className:`badge badge-${a(l.status)}`,children:l.status.replace("_"," ")})]})}),r.jsx("td",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:Ke(new Date(l.createdAt),"MMM d, yyyy")}),r.jsx("td",{children:r.jsx(yr,{to:`/portal/orders/${l.id}/journey`,className:"btn btn-sm btn-outline",title:"Track Order",children:r.jsx(Fs,{size:14})})})]},l.id)),(!n||n.length===0)&&r.jsx("tr",{children:r.jsxs("td",{colSpan:8,style:{textAlign:"center",padding:"3rem"},children:[r.jsx(Sr,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"No orders found"}),r.jsxs(yr,{to:"/portal/orders/new",className:"btn btn-primary",children:[r.jsx(Lr,{size:16})," Place Your First Order"]})]})})]})]})})]})}function Epe(){const e=Cn(),t=Tr(),{user:n}=bl(),[i,a]=P.useState(1),[s,l]=P.useState({productId:"",requestedActivity:"",activityUnit:"mCi",deliveryDate:Ke(Fl(new Date,2),"yyyy-MM-dd"),deliveryTimeStart:"09:00",deliveryTimeEnd:"10:00",priority:"NORMAL",notes:""}),[d,h]=P.useState(""),[f,p]=P.useState(!1),{data:g}=Ye({queryKey:["portal-profile"],queryFn:async()=>{const{data:_}=await xe.get("/portal/profile");return _}}),{data:j}=Ye({queryKey:["products"],queryFn:async()=>{const{data:_}=await xe.get("/products");return _}}),v=j?.find(_=>_.id===s.productId),b=ft({mutationFn:async _=>xe.post("/orders",_),onSuccess:()=>{t.invalidateQueries({queryKey:["portal-orders"]}),p(!0),setTimeout(()=>{e("/portal/orders")},2e3)},onError:_=>{h(_.response?.data?.error||"Failed to create order")}}),w=()=>{if(!s.productId||!s.requestedActivity){h("Please fill in all required fields");return}const _=new Date(s.deliveryDate);b.mutate({productId:s.productId,requestedActivity:parseFloat(s.requestedActivity),activityUnit:s.activityUnit,deliveryDate:_.toISOString(),deliveryTimeStart:new Date(`${s.deliveryDate}T${s.deliveryTimeStart}`).toISOString(),deliveryTimeEnd:new Date(`${s.deliveryDate}T${s.deliveryTimeEnd}`).toISOString(),priority:s.priority,notes:s.notes||void 0})};if(f)return r.jsx("div",{style:{maxWidth:"600px",margin:"4rem auto",textAlign:"center"},children:r.jsxs("div",{className:"card",style:{padding:"3rem"},children:[r.jsx(yt,{size:64,style:{color:"var(--success)",marginBottom:"1.5rem"}}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.5rem"},children:"Order Submitted!"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Your order has been submitted successfully and is pending approval."}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Redirecting to your orders..."})]})});const S=g?.nameEn||g?.name||n?.customerName||"Your Facility";return r.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Place New Order"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Order radiopharmaceuticals for your facility"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.25rem",backgroundColor:"rgba(13, 148, 136, 0.1)",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid rgba(13, 148, 136, 0.2)"},children:[r.jsx(Fo,{size:20,style:{color:"#0d9488"}}),r.jsxs("div",{children:[r.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Ordering as: "}),r.jsx("span",{style:{fontWeight:600,color:"#0d9488"},children:S})]})]}),r.jsx("div",{style:{display:"flex",marginBottom:"2rem",gap:"0.5rem"},children:[1,2,3].map(_=>r.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",backgroundColor:i>=_?"#0d9488":"var(--border)",transition:"background-color 0.3s"}},_))}),d&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",marginBottom:"1.5rem",color:"var(--danger)"},children:[r.jsx(In,{size:20}),d]}),r.jsxs("div",{className:"card",style:{padding:"2rem"},children:[i===1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[r.jsx(Sr,{size:24,style:{color:"#0d9488"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem"},children:"Select Product"})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[r.jsx("label",{children:"Product *"}),r.jsxs("select",{className:"form-select",value:s.productId,onChange:_=>l({...s,productId:_.target.value}),style:{fontSize:"1rem",padding:"0.875rem"},children:[r.jsx("option",{value:"",children:"Choose a radiopharmaceutical..."}),j?.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (",_.radionuclide,")"]},_.id))]})]}),v&&r.jsx("div",{style:{backgroundColor:"var(--background-secondary)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Type"}),r.jsx("div",{style:{fontWeight:500},children:v.productType})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Half-Life"}),r.jsxs("div",{style:{fontWeight:500},children:[v.halfLifeMinutes," min"]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Standard Dose"}),r.jsxs("div",{style:{fontWeight:500},children:[v.standardDose," ",v.doseUnit]})]})]})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Requested Activity *"}),r.jsx("input",{type:"number",className:"form-input",value:s.requestedActivity,onChange:_=>l({...s,requestedActivity:_.target.value}),placeholder:"e.g., 10",step:"0.1",style:{fontSize:"1rem",padding:"0.875rem"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Unit"}),r.jsxs("select",{className:"form-select",value:s.activityUnit,onChange:_=>l({...s,activityUnit:_.target.value}),style:{fontSize:"1rem",padding:"0.875rem"},children:[r.jsx("option",{value:"mCi",children:"mCi"}),r.jsx("option",{value:"MBq",children:"MBq"}),r.jsx("option",{value:"GBq",children:"GBq"})]})]})]})]}),i===2&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[r.jsx(Wi,{size:24,style:{color:"#0d9488"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem"},children:"Delivery Schedule"})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[r.jsx("label",{children:"Delivery Date *"}),r.jsx("input",{type:"date",className:"form-input",value:s.deliveryDate,onChange:_=>l({...s,deliveryDate:_.target.value}),min:Ke(Fl(new Date,1),"yyyy-MM-dd"),style:{fontSize:"1rem",padding:"0.875rem"}})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Delivery Window Start *"}),r.jsx("input",{type:"time",className:"form-input",value:s.deliveryTimeStart,onChange:_=>l({...s,deliveryTimeStart:_.target.value}),style:{fontSize:"1rem",padding:"0.875rem"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Delivery Window End *"}),r.jsx("input",{type:"time",className:"form-input",value:s.deliveryTimeEnd,onChange:_=>l({...s,deliveryTimeEnd:_.target.value}),style:{fontSize:"1rem",padding:"0.875rem"}})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Priority"}),r.jsxs("select",{className:"form-select",value:s.priority,onChange:_=>l({...s,priority:_.target.value}),style:{fontSize:"1rem",padding:"0.875rem"},children:[r.jsx("option",{value:"NORMAL",children:"Normal"}),r.jsx("option",{value:"URGENT",children:"Urgent"}),r.jsx("option",{value:"STAT",children:"STAT (Emergency)"})]})]})]}),i===3&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[r.jsx(yt,{size:24,style:{color:"#0d9488"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem"},children:"Review & Submit"})]}),r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"1.5rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsx("h4",{style:{fontWeight:600,marginBottom:"1rem"},children:"Order Summary"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Product"}),r.jsx("div",{style:{fontWeight:500},children:v?.name})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Activity"}),r.jsxs("div",{style:{fontWeight:500},children:[s.requestedActivity," ",s.activityUnit]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Delivery Date"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(s.deliveryDate),"MMMM d, yyyy")})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Delivery Time"}),r.jsxs("div",{style:{fontWeight:500},children:[s.deliveryTimeStart," - ",s.deliveryTimeEnd]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Priority"}),r.jsx("div",{style:{fontWeight:500},children:s.priority})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Special Instructions (Optional)"}),r.jsx("textarea",{className:"form-input",value:s.notes,onChange:_=>l({...s,notes:_.target.value}),rows:3,placeholder:"Any special delivery instructions or patient-specific requirements...",style:{fontSize:"1rem",padding:"0.875rem"}})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid var(--border)"},children:[i>1?r.jsx("button",{className:"btn btn-outline",onClick:()=>a(i-1),style:{padding:"0.75rem 1.5rem"},children:"Back"}):r.jsx("button",{className:"btn btn-outline",onClick:()=>e("/portal/orders"),style:{padding:"0.75rem 1.5rem"},children:"Cancel"}),i<3?r.jsx("button",{className:"btn btn-primary",onClick:()=>{if(h(""),i===1&&(!s.productId||!s.requestedActivity)){h("Please select a product and enter activity");return}a(i+1)},style:{padding:"0.75rem 1.5rem",backgroundColor:"#0d9488"},children:"Continue"}):r.jsx("button",{className:"btn btn-primary",onClick:w,disabled:b.isPending,style:{padding:"0.75rem 1.5rem",backgroundColor:"#0d9488"},children:b.isPending?"Submitting...":"Submit Order"})]})]})]})}function Tpe(){const e=Tr(),[t,n]=P.useState(null),[i,a]=P.useState(""),[s,l]=P.useState(!1),[d,h]=P.useState({amount:"",paymentMethod:"BANK_TRANSFER",reference:"",notes:"",proofFile:null}),f=P.useRef(null),{data:p,isLoading:g}=Ye({queryKey:["portal-invoices",i],queryFn:async()=>{const K={};i&&(K.status=i);const{data:B}=await xe.get("/portal/invoices",{params:K});return B}}),{data:j,refetch:v}=Ye({queryKey:["portal-invoice-detail",t?.id],queryFn:async()=>{if(!t?.id)return null;const{data:K}=await xe.get(`/portal/invoices/${t.id}`);return K},enabled:!!t?.id}),b=ft({mutationFn:async K=>{const{data:B}=await xe.post("/portal/payments",K,{headers:{"Content-Type":"multipart/form-data"}});return B},onSuccess:()=>{Ur.success("Payment submitted successfully! Awaiting confirmation."),e.invalidateQueries({queryKey:["portal-invoices"]}),v(),l(!1),h({amount:"",paymentMethod:"BANK_TRANSFER",reference:"",notes:"",proofFile:null})},onError:K=>{Ur.error(K.response?.data?.error||"Failed to submit payment")}}),w=()=>{if(!t||!d.amount){Ur.error("Please enter payment amount");return}const K=new FormData;K.append("invoiceId",t.id),K.append("amount",d.amount),K.append("paymentMethod",d.paymentMethod),K.append("reference",d.reference),K.append("notes",d.notes),d.proofFile&&K.append("proofFile",d.proofFile),b.mutate(K)},S={total:p?.reduce((K,B)=>K+B.totalAmount,0)||0,paid:p?.reduce((K,B)=>K+B.paidAmount,0)||0,outstanding:p?.reduce((K,B)=>K+(B.totalAmount-B.paidAmount),0)||0,overdue:p?.filter(K=>K.status==="OVERDUE"||["SENT","PARTIALLY_PAID"].includes(K.status)&&new Date(K.dueDate)<new Date).length||0},_=(K,B)=>["SENT","PARTIALLY_PAID"].includes(K)&&new Date(B)<new Date?"danger":{DRAFT:"default",SENT:"warning",PAID:"success",PARTIALLY_PAID:"warning",OVERDUE:"danger",CANCELLED:"danger"}[K]||"default",E=K=>{const B={PENDING:{color:"warning",icon:Dt},CONFIRMED:{color:"success",icon:yt},REJECTED:{color:"danger",icon:pi}},{color:F,icon:H}=B[K]||{color:"default",icon:Dt};return r.jsxs("span",{className:`badge badge-${F}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(H,{size:12}),K]})},D=t?t.totalAmount-t.paidAmount:0,W=t&&["SENT","PARTIALLY_PAID"].includes(t.status)&&D>0;return g?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Invoices"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"View and manage your billing history"})]}),r.jsxs("select",{className:"form-select",style:{width:"auto"},value:i,onChange:K=>a(K.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"SENT",children:"Pending"}),r.jsx("option",{value:"PAID",children:"Paid"}),r.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),r.jsx("option",{value:"OVERDUE",children:"Overdue"})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx($h,{size:20,style:{color:"#0d9488"}})}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:600},children:["SAR ",S.total.toLocaleString()]}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Total Billed"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(yt,{size:20,style:{color:"var(--success)"}})}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--success)"},children:["SAR ",S.paid.toLocaleString()]}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Paid"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(234, 179, 8, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Ul,{size:20,style:{color:"var(--warning)"}})}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--warning)"},children:["SAR ",S.outstanding.toLocaleString()]}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Outstanding"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(In,{size:20,style:{color:"var(--danger)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--danger)"},children:S.overdue}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Overdue"})]})]})})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:t?"1fr 420px":"1fr",gap:"1.5rem"},children:[r.jsx("div",{className:"card",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Invoice #"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Due Date"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Paid"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"60px"},children:"View"})]})}),r.jsxs("tbody",{children:[p?.map(K=>{const B=["SENT","PARTIALLY_PAID"].includes(K.status)&&new Date(K.dueDate)<new Date;return r.jsxs("tr",{style:{cursor:"pointer",backgroundColor:t?.id===K.id?"var(--background-secondary)":void 0},onClick:()=>n(K),children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:K.invoiceNumber}),r.jsx("td",{children:Ke(new Date(K.invoiceDate),"MMM d, yyyy")}),r.jsx("td",{style:{color:B?"var(--danger)":void 0},children:Ke(new Date(K.dueDate),"MMM d, yyyy")}),r.jsxs("td",{style:{fontWeight:500},children:["SAR ",K.totalAmount.toLocaleString()]}),r.jsxs("td",{style:{color:K.paidAmount>0?"var(--success)":"var(--text-muted)"},children:["SAR ",K.paidAmount.toLocaleString()]}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${_(K.status,K.dueDate)}`,children:B?"OVERDUE":K.status})}),r.jsx("td",{onClick:F=>F.stopPropagation(),children:r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>n(K),children:r.jsx(Pa,{size:14})})})]},K.id)}),(!p||p.length===0)&&r.jsx("tr",{children:r.jsxs("td",{colSpan:7,style:{textAlign:"center",padding:"3rem"},children:[r.jsx($h,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),r.jsx("p",{style:{color:"var(--text-muted)"},children:"No invoices found"})]})})]})]})}),t&&r.jsxs("div",{className:"card",style:{maxHeight:"calc(100vh - 240px)",overflowY:"auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingBottom:"1rem",borderBottom:"1px solid var(--border)",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:["Invoice ",t.invoiceNumber]}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:Ke(new Date(t.invoiceDate),"MMMM d, yyyy")})]}),r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>n(null),children:r.jsx(hn,{size:14})})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Due Date"}),r.jsx("div",{style:{fontWeight:500,marginTop:"0.25rem"},children:Ke(new Date(t.dueDate),"MMM d, yyyy")})]}),r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Status"}),r.jsx("div",{style:{marginTop:"0.25rem"},children:r.jsx("span",{className:`badge badge-${_(t.status,t.dueDate)}`,children:t.status})})]})]}),r.jsx("div",{style:{backgroundColor:"#0d9488",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"Total Amount"}),r.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:600},children:["SAR ",t.totalAmount.toLocaleString()]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"Balance Due"}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:500},children:["SAR ",D.toLocaleString()]})]})]})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[r.jsxs("a",{href:`/api/invoice-pdf/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{flex:W?1:void 0},children:[r.jsx(aH,{size:16,style:{marginRight:"0.5rem"}}),"Download PDF"]}),W&&r.jsxs("button",{className:"btn btn-primary",style:{flex:1},onClick:()=>{h(K=>({...K,amount:D.toString()})),l(!0)},children:[r.jsx(Ul,{size:16,style:{marginRight:"0.5rem"}}),"Submit Payment"]})]}),r.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Line Items"}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:(j?.items||t.items)?.map(K=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontSize:"0.875rem"},children:K.description}),r.jsx("td",{children:K.quantity}),r.jsxs("td",{style:{fontWeight:500},children:["SAR ",K.lineTotal?.toLocaleString()]})]},K.id))})]}),j?.vatBreakdown&&r.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"var(--background-secondary)",borderRadius:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Subtotal"}),r.jsxs("span",{children:["SAR ",j.vatBreakdown.subtotal?.toLocaleString()]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{color:"var(--text-muted)"},children:["VAT (",j.vatBreakdown.vatRate,"%)"]}),r.jsxs("span",{children:["SAR ",j.vatBreakdown.vatAmount?.toLocaleString()]})]}),j.vatBreakdown.discount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--success)"},children:"Discount"}),r.jsxs("span",{style:{color:"var(--success)"},children:["- SAR ",j.vatBreakdown.discount?.toLocaleString()]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,borderTop:"1px solid var(--border)",paddingTop:"0.5rem"},children:[r.jsx("span",{children:"Grand Total"}),r.jsxs("span",{children:["SAR ",j.vatBreakdown.grandTotal?.toLocaleString()]})]})]}),j?.paymentRequests?.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("h4",{style:{fontWeight:600,marginTop:"1.5rem",marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Payment Requests"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:j.paymentRequests.map(K=>r.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--background-secondary)",borderRadius:"0.5rem",borderLeft:`3px solid ${K.status==="CONFIRMED"?"var(--success)":K.status==="REJECTED"?"var(--danger)":"var(--warning)"}`},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem"},children:[r.jsxs("span",{style:{fontWeight:500},children:["SAR ",K.amount.toLocaleString()]}),E(K.status)]}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[Ke(new Date(K.submittedAt),"MMM d, yyyy HH:mm")," via ",K.paymentMethod.replace("_"," ")]}),K.reference&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Ref: ",K.reference]}),K.status==="REJECTED"&&K.rejectReason&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--danger)",marginTop:"0.25rem"},children:["Reason: ",K.rejectReason]})]},K.id))})]}),(j?.payments?.length>0||t.payments?.length>0)&&r.jsxs(r.Fragment,{children:[r.jsx("h4",{style:{fontWeight:600,marginTop:"1.5rem",marginBottom:"0.75rem",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-muted)"},children:"Confirmed Payments"}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Method"}),r.jsx("th",{children:"Amount"})]})}),r.jsx("tbody",{children:(j?.payments||t.payments).map(K=>r.jsxs("tr",{children:[r.jsx("td",{children:Ke(new Date(K.paymentDate),"MMM d, yyyy")}),r.jsx("td",{children:K.paymentMethod.replace("_"," ")}),r.jsxs("td",{style:{fontWeight:500,color:"var(--success)"},children:["SAR ",K.amount.toLocaleString()]})]},K.id))})]})]})]})]}),s&&r.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:r.jsxs("div",{className:"modal",onClick:K=>K.stopPropagation(),style:{maxWidth:"480px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Submit Payment"}),r.jsx("button",{className:"modal-close",onClick:()=>l(!1),children:r.jsx(hn,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Invoice"}),r.jsx("div",{style:{fontWeight:600},children:t?.invoiceNumber}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Balance Due: SAR ",D.toLocaleString()]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Amount (SAR) *"}),r.jsx("input",{type:"number",className:"form-input",value:d.amount,onChange:K=>h(B=>({...B,amount:K.target.value})),max:D,step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Method *"}),r.jsxs("select",{className:"form-select",value:d.paymentMethod,onChange:K=>h(B=>({...B,paymentMethod:K.target.value})),children:[r.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),r.jsx("option",{value:"CREDIT_CARD",children:"Credit Card"}),r.jsx("option",{value:"CASH",children:"Cash"}),r.jsx("option",{value:"CHEQUE",children:"Cheque"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Transaction Reference"}),r.jsx("input",{type:"text",className:"form-input",value:d.reference,onChange:K=>h(B=>({...B,reference:K.target.value})),placeholder:"e.g., Bank transfer reference number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Proof (Optional)"}),r.jsx("input",{type:"file",ref:f,style:{display:"none"},accept:".png,.jpg,.jpeg,.pdf",onChange:K=>{const B=K.target.files?.[0];if(B){if(B.size>10*1024*1024){Ur.error("File size must be less than 10MB");return}h(F=>({...F,proofFile:B}))}}}),r.jsx("div",{onClick:()=>f.current?.click(),style:{border:"2px dashed var(--border)",borderRadius:"0.5rem",padding:"1.5rem",textAlign:"center",cursor:"pointer",backgroundColor:d.proofFile?"rgba(13, 148, 136, 0.05)":void 0},children:d.proofFile?r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[r.jsx(ii,{size:20,style:{color:"#0d9488"}}),r.jsx("span",{children:d.proofFile.name}),r.jsx("button",{className:"btn btn-sm btn-outline",onClick:K=>{K.stopPropagation(),h(B=>({...B,proofFile:null}))},children:r.jsx(hn,{size:14})})]}):r.jsxs(r.Fragment,{children:[r.jsx(vm,{size:24,style:{color:"var(--text-muted)",marginBottom:"0.5rem"}}),r.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:["Click to upload payment proof",r.jsx("br",{}),r.jsx("span",{style:{fontSize:"0.75rem"},children:"PNG, JPG or PDF up to 10MB"})]})]})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{className:"form-textarea",value:d.notes,onChange:K=>h(B=>({...B,notes:K.target.value})),placeholder:"Any additional notes for finance team",rows:2})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:()=>l(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:w,disabled:b.isPending||!d.amount,children:b.isPending?"Submitting...":"Submit Payment"})]})]})})]})}function Ppe(){const{id:e}=nf(),{data:t,isLoading:n,error:i}=Ye({queryKey:["portal-order-journey",e],queryFn:async()=>{const{data:b}=await xe.get(`/journey/orders/${e}/journey`);return b},enabled:!!e});if(n)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});if(i||!t)return r.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[r.jsx(In,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h3",{style:{marginBottom:"0.5rem"},children:"Order Not Found"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"The order you're looking for doesn't exist or you don't have access to it."}),r.jsx(yr,{to:"/portal/orders",className:"btn btn-primary",children:"Back to Orders"})]});const{order:a,events:s,milestones:l}=t,d=s.filter(b=>!["QC_TEST_ENTERED","BATCH_ASSIGNED"].includes(b.type)&&b.actorRole!=="QC Analyst").map(b=>({...b,actor:void 0,actorRole:void 0})),h=l.filter(b=>["SUBMITTED","SCHEDULED","IN_PRODUCTION","RELEASED","DISPATCHED","DELIVERED"].includes(b.key)).map(b=>({...b,label:b.key==="IN_PRODUCTION"?"Processing":b.label})),f=()=>h.map(b=>({key:b.key,label:b.label,completed:b.completed})),p=()=>{const b=f();for(let w=b.length-1;w>=0;w--)if(b[w].completed)return b[w].key;return b[0]?.key||"SUBMITTED"},g=()=>d.map(b=>{let w=b.title;return b.type==="STATUS_CHANGE"&&b.toStatus&&(w={SUBMITTED:"Order submitted",VALIDATED:"Order validated",SCHEDULED:"Production scheduled",IN_PRODUCTION:"Processing started",QC_PENDING:"Quality check in progress",QC_PASSED:"Quality check passed",QP_REVIEW:"Final review in progress",RELEASED:"Order ready for dispatch",DISPATCHED:"Order dispatched",IN_TRANSIT:"In transit",DELIVERED:"Delivered"}[b.toStatus]||b.title),{id:b.id,type:b.type,title:w,description:b.type==="CREATED"?`Order ${a.orderNumber}`:void 0,timestamp:b.timestamp,severity:b.severity}}),v=(()=>{const b=s.filter(_=>_.entityType==="shipment");if(b.length===0)return null;const w=b.find(_=>_.type==="DISPATCHED"),S=b.find(_=>_.type==="DELIVERED");return{dispatched:w,delivered:S}})();return r.jsxs("div",{children:[r.jsxs(yr,{to:"/portal/orders",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",textDecoration:"none",marginBottom:"1rem",fontSize:"0.875rem"},children:[r.jsx(pd,{size:16})," Back to Orders"]}),r.jsx("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"1.5rem"},children:r.jsxs("div",{children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:["Order ",a.orderNumber,r.jsx(Wn,{status:a.status})]}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Track the progress of your order"})]})}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",marginBottom:"1.25rem"},children:"Order Progress"}),r.jsx(qO,{steps:f(),currentStep:p()})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 320px",gap:"1.5rem"},children:[r.jsx("div",{children:r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Timeline"})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(AV,{events:g(),maxVisible:20})})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Order Details"})}),r.jsx("div",{style:{padding:"1rem 1.5rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Sr,{size:18,style:{color:"var(--text-muted)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Product"}),r.jsx("div",{style:{fontWeight:500},children:a.product})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Wl,{size:18,style:{color:"var(--text-muted)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Requested Activity"}),r.jsx("div",{style:{fontWeight:500},children:a.activity||"N/A"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Wi,{size:18,style:{color:"var(--text-muted)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Date"}),r.jsx("div",{style:{fontWeight:500},children:a.deliveryTime?Ke(new Date(a.deliveryTime),"MMM d, yyyy HH:mm"):"N/A"})]})]})]})})]}),v&&r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(fn,{size:18,style:{color:"var(--primary)"}}),"Shipment Tracking"]})}),r.jsx("div",{style:{padding:"1rem 1.5rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v.dispatched&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(yt,{size:18,style:{color:"var(--success)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Dispatched"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(v.dispatched.timestamp),"MMM d, yyyy HH:mm")})]})]}),v.delivered?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(yt,{size:18,style:{color:"var(--success)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(v.delivered.timestamp),"MMM d, yyyy HH:mm")})]})]}):v.dispatched?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:"rgba(234, 179, 8, 0.1)",borderRadius:"var(--radius)"},children:[r.jsx(Dt,{size:18,style:{color:"var(--warning)"}}),r.jsx("div",{style:{fontWeight:500,color:"var(--warning)"},children:"In Transit"})]}):null]})})]}),r.jsx("div",{className:"card",style:{backgroundColor:"rgba(13, 148, 136, 0.05)",border:"1px solid rgba(13, 148, 136, 0.2)"},children:r.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(eS,{size:18,style:{color:"#0d9488"}}),r.jsx("h4",{style:{fontWeight:600,fontSize:"0.875rem",margin:0,color:"#0d9488"},children:"Need Help?"})]}),r.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",margin:0},children:"If you have questions about your order, please contact our support team."})]})})]})]})]})}var Wp={exports:{}};var kpe=Wp.exports,fD;function Dpe(){return fD||(fD=1,(function(e,t){(function(n,i){i(t)})(kpe,(function(n){var i="1.9.4";function a(u){var y,C,O,ee;for(C=1,O=arguments.length;C<O;C++){ee=arguments[C];for(y in ee)u[y]=ee[y]}return u}var s=Object.create||(function(){function u(){}return function(y){return u.prototype=y,new u}})();function l(u,y){var C=Array.prototype.slice;if(u.bind)return u.bind.apply(u,C.call(arguments,1));var O=C.call(arguments,2);return function(){return u.apply(y,O.length?O.concat(C.call(arguments)):arguments)}}var d=0;function h(u){return"_leaflet_id"in u||(u._leaflet_id=++d),u._leaflet_id}function f(u,y,C){var O,ee,fe,Ce;return Ce=function(){O=!1,ee&&(fe.apply(C,ee),ee=!1)},fe=function(){O?ee=arguments:(u.apply(C,arguments),setTimeout(Ce,y),O=!0)},fe}function p(u,y,C){var O=y[1],ee=y[0],fe=O-ee;return u===O&&C?u:((u-ee)%fe+fe)%fe+ee}function g(){return!1}function j(u,y){if(y===!1)return u;var C=Math.pow(10,y===void 0?6:y);return Math.round(u*C)/C}function v(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function b(u){return v(u).split(/\s+/)}function w(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var C in y)u.options[C]=y[C];return u.options}function S(u,y,C){var O=[];for(var ee in u)O.push(encodeURIComponent(C?ee.toUpperCase():ee)+"="+encodeURIComponent(u[ee]));return(!y||y.indexOf("?")===-1?"?":"&")+O.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function E(u,y){return u.replace(_,function(C,O){var ee=y[O];if(ee===void 0)throw new Error("No value provided for variable "+C);return typeof ee=="function"&&(ee=ee(y)),ee})}var D=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function W(u,y){for(var C=0;C<u.length;C++)if(u[C]===y)return C;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var F=0;function H(u){var y=+new Date,C=Math.max(0,16-(y-F));return F=y+C,window.setTimeout(u,C)}var I=window.requestAnimationFrame||B("RequestAnimationFrame")||H,R=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function Y(u,y,C){if(C&&I===H)u.call(y);else return I.call(window,l(u,y))}function G(u){u&&R.call(window,u)}var ae={__proto__:null,extend:a,create:s,bind:l,get lastId(){return d},stamp:h,throttle:f,wrapNum:p,falseFn:g,formatNum:j,trim:v,splitWords:b,setOptions:w,getParamString:S,template:E,isArray:D,indexOf:W,emptyImageUrl:K,requestFn:I,cancelFn:R,requestAnimFrame:Y,cancelAnimFrame:G};function se(){}se.extend=function(u){var y=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=y.__super__=this.prototype,O=s(C);O.constructor=y,y.prototype=O;for(var ee in this)Object.prototype.hasOwnProperty.call(this,ee)&&ee!=="prototype"&&ee!=="__super__"&&(y[ee]=this[ee]);return u.statics&&a(y,u.statics),u.includes&&(Ne(u.includes),a.apply(null,[O].concat(u.includes))),a(O,u),delete O.statics,delete O.includes,O.options&&(O.options=C.options?s(C.options):{},a(O.options,u.options)),O._initHooks=[],O.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var fe=0,Ce=O._initHooks.length;fe<Ce;fe++)O._initHooks[fe].call(this)}},y},se.include=function(u){var y=this.prototype.options;return a(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},se.mergeOptions=function(u){return a(this.prototype.options,u),this},se.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),C=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function Ne(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=D(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(u,y,C){if(typeof u=="object")for(var O in u)this._on(O,u[O],y);else{u=b(u);for(var ee=0,fe=u.length;ee<fe;ee++)this._on(u[ee],y,C)}return this},off:function(u,y,C){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var O in u)this._off(O,u[O],y);else{u=b(u);for(var ee=arguments.length===1,fe=0,Ce=u.length;fe<Ce;fe++)ee?this._off(u[fe]):this._off(u[fe],y,C)}return this},_on:function(u,y,C,O){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,C)===!1){C===this&&(C=void 0);var ee={fn:y,ctx:C};O&&(ee.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ee)}},_off:function(u,y,C){var O,ee,fe;if(this._events&&(O=this._events[u],!!O)){if(arguments.length===1){if(this._firingCount)for(ee=0,fe=O.length;ee<fe;ee++)O[ee].fn=g;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var Ce=this._listens(u,y,C);if(Ce!==!1){var Me=O[Ce];this._firingCount&&(Me.fn=g,this._events[u]=O=O.slice()),O.splice(Ce,1)}}},fire:function(u,y,C){if(!this.listens(u,C))return this;var O=a({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ee=this._events[u];if(ee){this._firingCount=this._firingCount+1||1;for(var fe=0,Ce=ee.length;fe<Ce;fe++){var Me=ee[fe],Ue=Me.fn;Me.once&&this.off(u,Ue,Me.ctx),Ue.call(Me.ctx||this,O)}this._firingCount--}}return C&&this._propagateEvent(O),this},listens:function(u,y,C,O){typeof u!="string"&&console.warn('"string" type argument expected');var ee=y;typeof y!="function"&&(O=!!y,ee=void 0,C=void 0);var fe=this._events&&this._events[u];if(fe&&fe.length&&this._listens(u,ee,C)!==!1)return!0;if(O){for(var Ce in this._eventParents)if(this._eventParents[Ce].listens(u,y,C,O))return!0}return!1},_listens:function(u,y,C){if(!this._events)return!1;var O=this._events[u]||[];if(!y)return!!O.length;C===this&&(C=void 0);for(var ee=0,fe=O.length;ee<fe;ee++)if(O[ee].fn===y&&O[ee].ctx===C)return ee;return!1},once:function(u,y,C){if(typeof u=="object")for(var O in u)this._on(O,u[O],y,!0);else{u=b(u);for(var ee=0,fe=u.length;ee<fe;ee++)this._on(u[ee],y,C,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[h(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[h(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,a({layer:u.target,propagatedFrom:u.target},u),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var ie=se.extend(z);function q(u,y,C){this.x=C?Math.round(u):u,this.y=C?Math.round(y):y}var re=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(u){return this.clone()._add(ue(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(ue(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new q(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new q(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(u){u=ue(u);var y=u.x-this.x,C=u.y-this.y;return Math.sqrt(y*y+C*C)},equals:function(u){return u=ue(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=ue(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+j(this.x)+", "+j(this.y)+")"}};function ue(u,y,C){return u instanceof q?u:D(u)?new q(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new q(u.x,u.y):new q(u,y,C)}function Q(u,y){if(u)for(var C=y?[u,y]:u,O=0,ee=C.length;O<ee;O++)this.extend(C[O])}Q.prototype={extend:function(u){var y,C;if(!u)return this;if(u instanceof q||typeof u[0]=="number"||"x"in u)y=C=ue(u);else if(u=V(u),y=u.min,C=u.max,!y||!C)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=C.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(u){return ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return ue(this.min.x,this.max.y)},getTopRight:function(){return ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,C;return typeof u[0]=="number"||u instanceof q?u=ue(u):u=V(u),u instanceof Q?(y=u.min,C=u.max):y=C=u,y.x>=this.min.x&&C.x<=this.max.x&&y.y>=this.min.y&&C.y<=this.max.y},intersects:function(u){u=V(u);var y=this.min,C=this.max,O=u.min,ee=u.max,fe=ee.x>=y.x&&O.x<=C.x,Ce=ee.y>=y.y&&O.y<=C.y;return fe&&Ce},overlaps:function(u){u=V(u);var y=this.min,C=this.max,O=u.min,ee=u.max,fe=ee.x>y.x&&O.x<C.x,Ce=ee.y>y.y&&O.y<C.y;return fe&&Ce},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,C=this.max,O=Math.abs(y.x-C.x)*u,ee=Math.abs(y.y-C.y)*u;return V(ue(y.x-O,y.y-ee),ue(C.x+O,C.y+ee))},equals:function(u){return u?(u=V(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function V(u,y){return!u||u instanceof Q?u:new Q(u,y)}function ne(u,y){if(u)for(var C=y?[u,y]:u,O=0,ee=C.length;O<ee;O++)this.extend(C[O])}ne.prototype={extend:function(u){var y=this._southWest,C=this._northEast,O,ee;if(u instanceof de)O=u,ee=u;else if(u instanceof ne){if(O=u._southWest,ee=u._northEast,!O||!ee)return this}else return u?this.extend(Z(u)||$(u)):this;return!y&&!C?(this._southWest=new de(O.lat,O.lng),this._northEast=new de(ee.lat,ee.lng)):(y.lat=Math.min(O.lat,y.lat),y.lng=Math.min(O.lng,y.lng),C.lat=Math.max(ee.lat,C.lat),C.lng=Math.max(ee.lng,C.lng)),this},pad:function(u){var y=this._southWest,C=this._northEast,O=Math.abs(y.lat-C.lat)*u,ee=Math.abs(y.lng-C.lng)*u;return new ne(new de(y.lat-O,y.lng-ee),new de(C.lat+O,C.lng+ee))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof de||"lat"in u?u=Z(u):u=$(u);var y=this._southWest,C=this._northEast,O,ee;return u instanceof ne?(O=u.getSouthWest(),ee=u.getNorthEast()):O=ee=u,O.lat>=y.lat&&ee.lat<=C.lat&&O.lng>=y.lng&&ee.lng<=C.lng},intersects:function(u){u=$(u);var y=this._southWest,C=this._northEast,O=u.getSouthWest(),ee=u.getNorthEast(),fe=ee.lat>=y.lat&&O.lat<=C.lat,Ce=ee.lng>=y.lng&&O.lng<=C.lng;return fe&&Ce},overlaps:function(u){u=$(u);var y=this._southWest,C=this._northEast,O=u.getSouthWest(),ee=u.getNorthEast(),fe=ee.lat>y.lat&&O.lat<C.lat,Ce=ee.lng>y.lng&&O.lng<C.lng;return fe&&Ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=$(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $(u,y){return u instanceof ne?u:new ne(u,y)}function de(u,y,C){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,C!==void 0&&(this.alt=+C)}de.prototype={equals:function(u,y){if(!u)return!1;u=Z(u);var C=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return C<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+j(this.lat,u)+", "+j(this.lng,u)+")"},distanceTo:function(u){return oe.distance(this,Z(u))},wrap:function(){return oe.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,C=y/Math.cos(Math.PI/180*this.lat);return $([this.lat-y,this.lng-C],[this.lat+y,this.lng+C])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function Z(u,y,C){return u instanceof de?u:D(u)&&typeof u[0]!="object"?u.length===3?new de(u[0],u[1],u[2]):u.length===2?new de(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new de(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new de(u,y,C)}var ge={latLngToPoint:function(u,y){var C=this.projection.project(u),O=this.scale(y);return this.transformation._transform(C,O)},pointToLatLng:function(u,y){var C=this.scale(y),O=this.transformation.untransform(u,C);return this.projection.unproject(O)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,C=this.scale(u),O=this.transformation.transform(y.min,C),ee=this.transformation.transform(y.max,C);return new Q(O,ee)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?p(u.lng,this.wrapLng,!0):u.lng,C=this.wrapLat?p(u.lat,this.wrapLat,!0):u.lat,O=u.alt;return new de(C,y,O)},wrapLatLngBounds:function(u){var y=u.getCenter(),C=this.wrapLatLng(y),O=y.lat-C.lat,ee=y.lng-C.lng;if(O===0&&ee===0)return u;var fe=u.getSouthWest(),Ce=u.getNorthEast(),Me=new de(fe.lat-O,fe.lng-ee),Ue=new de(Ce.lat-O,Ce.lng-ee);return new ne(Me,Ue)}},oe=a({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var C=Math.PI/180,O=u.lat*C,ee=y.lat*C,fe=Math.sin((y.lat-u.lat)*C/2),Ce=Math.sin((y.lng-u.lng)*C/2),Me=fe*fe+Math.cos(O)*Math.cos(ee)*Ce*Ce,Ue=2*Math.atan2(Math.sqrt(Me),Math.sqrt(1-Me));return this.R*Ue}}),X=6378137,_e={R:X,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,C=this.MAX_LATITUDE,O=Math.max(Math.min(C,u.lat),-C),ee=Math.sin(O*y);return new q(this.R*u.lng*y,this.R*Math.log((1+ee)/(1-ee))/2)},unproject:function(u){var y=180/Math.PI;return new de((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:(function(){var u=X*Math.PI;return new Q([-u,-u],[u,u])})()};function Ie(u,y,C,O){if(D(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=C,this._d=O}Ie.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new q((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function De(u,y,C,O){return new Ie(u,y,C,O)}var ut=a({},oe,{code:"EPSG:3857",projection:_e,transformation:(function(){var u=.5/(Math.PI*_e.R);return De(u,.5,-u,.5)})()}),ht=a({},ut,{code:"EPSG:900913"});function be(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function ct(u,y){var C="",O,ee,fe,Ce,Me,Ue;for(O=0,fe=u.length;O<fe;O++){for(Me=u[O],ee=0,Ce=Me.length;ee<Ce;ee++)Ue=Me[ee],C+=(ee?"L":"M")+Ue.x+" "+Ue.y;C+=y?gt.svg?"z":"x":""}return C||"M0 0"}var Gt=document.documentElement.style,Pt="ActiveXObject"in window,st=Pt&&!document.addEventListener,qt="msLaunchUri"in navigator&&!("documentMode"in document),vt=Ir("webkit"),Ht=Ir("android"),Bt=Ir("android 2")||Ir("android 3"),lr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Nr=Ht&&Ir("Google")&&lr<537&&!("AudioNode"in window),rr=!!window.opera,jr=!qt&&Ir("chrome"),dr=Ir("gecko")&&!vt&&!rr&&!Pt,Tt=!jr&&Ir("safari"),nr=Ir("phantom"),kt="OTransition"in Gt,$n=navigator.platform.indexOf("Win")===0,xr=Pt&&"transition"in Gt,Wt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Bt,Xt="MozPerspective"in Gt,_r=!window.L_DISABLE_3D&&(xr||Wt||Xt)&&!kt&&!nr,Ot=typeof orientation<"u"||Ir("mobile"),mn=Ot&&vt,Qt=Ot&&Wt,Jt=!window.PointerEvent&&window.MSPointerEvent,en=!!(window.PointerEvent||Jt),cr="ontouchstart"in window||!!window.TouchEvent,It=!window.L_NO_TOUCH&&(cr||en),Rr=Ot&&rr,Ws=Ot&&dr,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fo=(function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",g,y),window.removeEventListener("testPassiveEventSupport",g,y)}catch{}return u})(),vs=(function(){return!!document.createElement("canvas").getContext})(),zt=!!(document.createElementNS&&be("svg").createSVGRect),$o=!!zt&&(function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),mo=!zt&&(function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}})(),Ya=navigator.platform.indexOf("Mac")===0,Za=navigator.platform.indexOf("Linux")===0;function Ir(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var gt={ie:Pt,ielt9:st,edge:qt,webkit:vt,android:Ht,android23:Bt,androidStock:Nr,opera:rr,chrome:jr,gecko:dr,safari:Tt,phantom:nr,opera12:kt,win:$n,ie3d:xr,webkit3d:Wt,gecko3d:Xt,any3d:_r,mobile:Ot,mobileWebkit:mn,mobileWebkit3d:Qt,msPointer:Jt,pointer:en,touch:It,touchNative:cr,mobileOpera:Rr,mobileGecko:Ws,retina:ia,passiveEvents:fo,canvas:vs,svg:zt,vml:mo,inlineSvg:$o,mac:Ya,linux:Za},bi=gt.msPointer?"MSPointerDown":"pointerdown",Vo=gt.msPointer?"MSPointerMove":"pointermove",aa=gt.msPointer?"MSPointerUp":"pointerup",tn=gt.msPointer?"MSPointerCancel":"pointercancel",yn={touchstart:bi,touchmove:Vo,touchend:aa,touchcancel:tn},$i={touchstart:go,touchmove:po,touchend:po,touchcancel:po},Pi={},Xa=!1;function Jl(u,y,C){return y==="touchstart"&&Ks(),$i[y]?(C=$i[y].bind(this,C),u.addEventListener(yn[y],C,!1),C):(console.warn("wrong event specified:",y),g)}function $s(u,y,C){if(!yn[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(yn[y],C,!1)}function Vs(u){Pi[u.pointerId]=u}function jl(u){Pi[u.pointerId]&&(Pi[u.pointerId]=u)}function xs(u){delete Pi[u.pointerId]}function Ks(){Xa||(document.addEventListener(bi,Vs,!0),document.addEventListener(Vo,jl,!0),document.addEventListener(aa,xs,!0),document.addEventListener(tn,xs,!0),Xa=!0)}function po(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var C in Pi)y.touches.push(Pi[C]);y.changedTouches=[y],u(y)}}function go(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&pn(y),po(u,y)}function Vn(u){var y={},C,O;for(O in u)C=u[O],y[O]=C&&C.bind?C.bind(u):C;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var jd=200;function Ja(u,y){u.addEventListener("dblclick",y);var C=0,O;function ee(fe){if(fe.detail!==1){O=fe.detail;return}if(!(fe.pointerType==="mouse"||fe.sourceCapabilities&&!fe.sourceCapabilities.firesTouchEvents)){var Ce=rs(fe);if(!(Ce.some(function(Ue){return Ue instanceof HTMLLabelElement&&Ue.attributes.for})&&!Ce.some(function(Ue){return Ue instanceof HTMLInputElement||Ue instanceof HTMLSelectElement}))){var Me=Date.now();Me-C<=jd?(O++,O===2&&y(Vn(fe))):O=1,C=Me}}}return u.addEventListener("click",ee),{dblclick:y,simDblclick:ee}}function Gs(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var Qs=ec(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ko=ec(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mc=Ko==="webkitTransition"||Ko==="OTransition"?Ko+"End":"transitionend";function Lc(u){return typeof u=="string"?document.getElementById(u):u}function wl(u,y){var C=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!C||C==="auto")&&document.defaultView){var O=document.defaultView.getComputedStyle(u,null);C=O?O[y]:null}return C==="auto"?null:C}function ir(u,y,C){var O=document.createElement(u);return O.className=y||"",C&&C.appendChild(O),O}function Hr(u){var y=u.parentNode;y&&y.removeChild(u)}function La(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Cr(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function yo(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function bs(u,y){if(u.classList!==void 0)return u.classList.contains(y);var C=Bn(u);return C.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(C)}function er(u,y){if(u.classList!==void 0)for(var C=b(y),O=0,ee=C.length;O<ee;O++)u.classList.add(C[O]);else if(!bs(u,y)){var fe=Bn(u);Vi(u,(fe?fe+" ":"")+y)}}function vn(u,y){u.classList!==void 0?u.classList.remove(y):Vi(u,v((" "+Bn(u)+" ").replace(" "+y+" "," ")))}function Vi(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function Bn(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Wr(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Rc(u,y)}function Rc(u,y){var C=!1,O="DXImageTransform.Microsoft.Alpha";try{C=u.filters.item(O)}catch{if(y===1)return}y=Math.round(y*100),C?(C.Enabled=y!==100,C.Opacity=y):u.style.filter+=" progid:"+O+"(opacity="+y+")"}function ec(u){for(var y=document.documentElement.style,C=0;C<u.length;C++)if(u[C]in y)return u[C];return!1}function Ys(u,y,C){var O=y||new q(0,0);u.style[Qs]=(gt.ie3d?"translate("+O.x+"px,"+O.y+"px)":"translate3d("+O.x+"px,"+O.y+"px,0)")+(C?" scale("+C+")":"")}function kr(u,y){u._leaflet_pos=y,gt.any3d?Ys(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Zs(u){return u._leaflet_pos||new q(0,0)}var Go,ga,Qo;if("onselectstart"in document)Go=function(){dt(window,"selectstart",pn)},ga=function(){Kr(window,"selectstart",pn)};else{var Sl=ec(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Go=function(){if(Sl){var u=document.documentElement.style;Qo=u[Sl],u[Sl]="none"}},ga=function(){Sl&&(document.documentElement.style[Sl]=Qo,Qo=void 0)}}function Ic(){dt(window,"dragstart",pn)}function tc(){Kr(window,"dragstart",pn)}var Nl,zc;function sa(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Ra(),Nl=u,zc=u.style.outlineStyle,u.style.outlineStyle="none",dt(window,"keydown",Ra))}function Ra(){Nl&&(Nl.style.outlineStyle=zc,Nl=void 0,zc=void 0,Kr(window,"keydown",Ra))}function vo(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Yo(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var _l={__proto__:null,TRANSFORM:Qs,TRANSITION:Ko,TRANSITION_END:Mc,get:Lc,getStyle:wl,create:ir,remove:Hr,empty:La,toFront:Cr,toBack:yo,hasClass:bs,addClass:er,removeClass:vn,setClass:Vi,getClass:Bn,setOpacity:Wr,testProp:ec,setTransform:Ys,setPosition:kr,getPosition:Zs,get disableTextSelection(){return Go},get enableTextSelection(){return ga},disableImageDrag:Ic,enableImageDrag:tc,preventOutline:sa,restoreOutline:Ra,getSizedParentNode:vo,getScale:Yo};function dt(u,y,C,O){if(y&&typeof y=="object")for(var ee in y)ji(u,ee,y[ee],C);else{y=b(y);for(var fe=0,Ce=y.length;fe<Ce;fe++)ji(u,y[fe],C,O)}return this}var es="_leaflet_events";function Kr(u,y,C,O){if(arguments.length===1)wd(u),delete u[es];else if(y&&typeof y=="object")for(var ee in y)rc(u,ee,y[ee],C);else if(y=b(y),arguments.length===2)wd(u,function(Me){return W(y,Me)!==-1});else for(var fe=0,Ce=y.length;fe<Ce;fe++)rc(u,y[fe],C,O);return this}function wd(u,y){for(var C in u[es]){var O=C.split(/\d/)[0];(!y||y(O))&&rc(u,O,null,null,C)}}var ya={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ji(u,y,C,O){var ee=y+h(C)+(O?"_"+h(O):"");if(u[es]&&u[es][ee])return this;var fe=function(Me){return C.call(O||u,Me||window.event)},Ce=fe;!gt.touchNative&&gt.pointer&&y.indexOf("touch")===0?fe=Jl(u,y,fe):gt.touch&&y==="dblclick"?fe=Ja(u,fe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(ya[y]||y,fe,gt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(fe=function(Me){Me=Me||window.event,js(u,Me)&&Ce(Me)},u.addEventListener(ya[y],fe,!1)):u.addEventListener(y,Ce,!1):u.attachEvent("on"+y,fe),u[es]=u[es]||{},u[es][ee]=fe}function rc(u,y,C,O,ee){ee=ee||y+h(C)+(O?"_"+h(O):"");var fe=u[es]&&u[es][ee];if(!fe)return this;!gt.touchNative&&gt.pointer&&y.indexOf("touch")===0?$s(u,y,fe):gt.touch&&y==="dblclick"?Gs(u,fe):"removeEventListener"in u?u.removeEventListener(ya[y]||y,fe,!1):u.detachEvent("on"+y,fe),u[es][ee]=null}function ts(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function va(u){return ji(u,"wheel",ts),this}function Xs(u){return dt(u,"mousedown touchstart dblclick contextmenu",ts),u._leaflet_disable_click=!0,this}function pn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function xo(u){return pn(u),ts(u),this}function rs(u){if(u.composedPath)return u.composedPath();for(var y=[],C=u.target;C;)y.push(C),C=C.parentNode;return y}function nc(u,y){if(!y)return new q(u.clientX,u.clientY);var C=Yo(y),O=C.boundingClientRect;return new q((u.clientX-O.left)/C.x-y.clientLeft,(u.clientY-O.top)/C.y-y.clientTop)}var Bc=gt.linux&&gt.chrome?window.devicePixelRatio:gt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wi(u){return gt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Bc:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function js(u,y){var C=y.relatedTarget;if(!C)return!0;try{for(;C&&C!==u;)C=C.parentNode}catch{return!1}return C!==u}var ws={__proto__:null,on:dt,off:Kr,stopPropagation:ts,disableScrollPropagation:va,disableClickPropagation:Xs,preventDefault:pn,stop:xo,getPropagationPath:rs,getMousePosition:nc,getWheelDelta:wi,isExternalTarget:js,addListener:dt,removeListener:Kr},bo=ie.extend({run:function(u,y,C,O){this.stop(),this._el=u,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(O||.5,.2),this._startPos=Zs(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,C=this._duration*1e3;y<C?this._runFrame(this._easeOut(y/C),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var C=this._startPos.add(this._offset.multiplyBy(u));y&&C._round(),kr(this._el,C),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),mr=ie.extend({options:{crs:ut,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=w(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(Z(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ko&&gt.any3d&&!gt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),dt(this._proxy,Mc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,C){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(Z(u),y,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=a({animate:C.animate},C.zoom),C.pan=a({animate:C.animate,duration:C.duration},C.pan));var O=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,C.zoom):this._tryAnimatedPan(u,C.pan);if(O)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,C.pan&&C.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,C){var O=this.getZoomScale(y),ee=this.getSize().divideBy(2),fe=u instanceof q?u:this.latLngToContainerPoint(u),Ce=fe.subtract(ee).multiplyBy(1-1/O),Me=this.containerPointToLatLng(ee.add(Ce));return this.setView(Me,y,{zoom:C})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():$(u);var C=ue(y.paddingTopLeft||y.padding||[0,0]),O=ue(y.paddingBottomRight||y.padding||[0,0]),ee=this.getBoundsZoom(u,!1,C.add(O));if(ee=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ee):ee,ee===1/0)return{center:u.getCenter(),zoom:ee};var fe=O.subtract(C).divideBy(2),Ce=this.project(u.getSouthWest(),ee),Me=this.project(u.getNorthEast(),ee),Ue=this.unproject(Ce.add(Me).divideBy(2).add(fe),ee);return{center:Ue,zoom:ee}},fitBounds:function(u,y){if(u=$(u),!u.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(u,y);return this.setView(C.center,C.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=ue(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){er(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,C,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,C){if(C=C||{},C.animate===!1||!gt.any3d)return this.setView(u,y,C);this._stop();var O=this.project(this.getCenter()),ee=this.project(u),fe=this.getSize(),Ce=this._zoom;u=Z(u),y=y===void 0?Ce:y;var Me=Math.max(fe.x,fe.y),Ue=Me*this.getZoomScale(Ce,y),tt=ee.distanceTo(O)||1,mt=1.42,_t=mt*mt;function pr(nn){var li=nn?-1:1,cc=nn?Ue:Me,dh=Ue*Ue-Me*Me+li*_t*_t*tt*tt,Gc=2*cc*_t*tt,Qc=dh/Gc,ol=Math.sqrt(Qc*Qc+1)-Qc,To=ol<1e-9?-18:Math.log(ol);return To}function Zi(nn){return(Math.exp(nn)-Math.exp(-nn))/2}function Yn(nn){return(Math.exp(nn)+Math.exp(-nn))/2}function ds(nn){return Zi(nn)/Yn(nn)}var Gr=pr(0);function Qr(nn){return Me*(Yn(Gr)/Yn(Gr+mt*nn))}function Pr(nn){return Me*(Yn(Gr)*ds(Gr+mt*nn)-Zi(Gr))/_t}function Sa(nn){return 1-Math.pow(1-nn,1.5)}var Un=Date.now(),Ts=(pr(1)-Gr)/mt,kl=C.duration?1e3*C.duration:1e3*Ts*.8;function Su(){var nn=(Date.now()-Un)/kl,li=Sa(nn)*Ts;nn<=1?(this._flyToFrame=Y(Su,this),this._move(this.unproject(O.add(ee.subtract(O).multiplyBy(Pr(li)/tt)),Ce),this.getScaleZoom(Me/Qr(li),Ce),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),Su.call(this),this},flyToBounds:function(u,y){var C=this._getBoundsCenterZoom(u,y);return this.flyTo(C.center,C.zoom,y)},setMaxBounds:function(u){return u=$(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var C=this.getCenter(),O=this._limitCenter(C,this._zoom,$(u));return C.equals(O)||this.panTo(O,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var C=ue(y.paddingTopLeft||y.padding||[0,0]),O=ue(y.paddingBottomRight||y.padding||[0,0]),ee=this.project(this.getCenter()),fe=this.project(u),Ce=this.getPixelBounds(),Me=V([Ce.min.add(C),Ce.max.subtract(O)]),Ue=Me.getSize();if(!Me.contains(fe)){this._enforcingBounds=!0;var tt=fe.subtract(Me.getCenter()),mt=Me.extend(fe).getSize().subtract(Ue);ee.x+=tt.x<0?-mt.x:mt.x,ee.y+=tt.y<0?-mt.y:mt.y,this.panTo(this.unproject(ee),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=a({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),O=y.divideBy(2).round(),ee=C.divideBy(2).round(),fe=O.subtract(ee);return!fe.x&&!fe.y?this:(u.animate&&u.pan?this.panBy(fe):(u.pan&&this._rawPanBy(fe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=a({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=l(this._handleGeolocationResponse,this),C=l(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,C,u):navigator.geolocation.getCurrentPosition(y,C,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,C=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,C=u.coords.longitude,O=new de(y,C),ee=O.toBounds(u.coords.accuracy*2),fe=this._locateOptions;if(fe.setView){var Ce=this.getBoundsZoom(ee);this.setView(O,fe.maxZoom?Math.min(Ce,fe.maxZoom):Ce)}var Me={latlng:O,bounds:ee,timestamp:u.timestamp};for(var Ue in u.coords)typeof u.coords[Ue]=="number"&&(Me[Ue]=u.coords[Ue]);this.fire("locationfound",Me)}},addHandler:function(u,y){if(!y)return this;var C=this[u]=new y(this);return this._handlers.push(C),this.options[u]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Hr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Hr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var C="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),O=ir("div",C,y||this._mapPane);return u&&(this._panes[u]=O),O},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),C=this.unproject(u.getTopRight());return new ne(y,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,C){u=$(u),C=ue(C||[0,0]);var O=this.getZoom()||0,ee=this.getMinZoom(),fe=this.getMaxZoom(),Ce=u.getNorthWest(),Me=u.getSouthEast(),Ue=this.getSize().subtract(C),tt=V(this.project(Me,O),this.project(Ce,O)).getSize(),mt=gt.any3d?this.options.zoomSnap:1,_t=Ue.x/tt.x,pr=Ue.y/tt.y,Zi=y?Math.max(_t,pr):Math.min(_t,pr);return O=this.getScaleZoom(Zi,O),mt&&(O=Math.round(O/(mt/100))*(mt/100),O=y?Math.ceil(O/mt)*mt:Math.floor(O/mt)*mt),Math.max(ee,Math.min(fe,O))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var C=this._getTopLeftPoint(u,y);return new Q(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var C=this.options.crs;return y=y===void 0?this._zoom:y,C.scale(u)/C.scale(y)},getScaleZoom:function(u,y){var C=this.options.crs;y=y===void 0?this._zoom:y;var O=C.zoom(u*C.scale(y));return isNaN(O)?1/0:O},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(Z(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(ue(u),y)},layerPointToLatLng:function(u){var y=ue(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(Z(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(Z(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds($(u))},distance:function(u,y){return this.options.crs.distance(Z(u),Z(y))},containerPointToLayerPoint:function(u){return ue(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return ue(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(ue(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(u)))},mouseEventToContainerPoint:function(u){return nc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Lc(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");dt(y,"scroll",this._onScroll,this),this._containerId=h(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt.any3d,er(u,"leaflet-container"+(gt.touch?" leaflet-touch":"")+(gt.retina?" leaflet-retina":"")+(gt.ielt9?" leaflet-oldie":"")+(gt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=wl(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kr(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(er(u.markerPane,"leaflet-zoom-hide"),er(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,C){kr(this._mapPane,new q(0,0));var O=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ee=this._zoom!==y;this._moveStart(ee,C)._move(u,y)._moveEnd(ee),this.fire("viewreset"),O&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,C,O){y===void 0&&(y=this._zoom);var ee=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),O?C&&C.pinch&&this.fire("zoom",C):((ee||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){kr(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[h(this._container)]=this;var y=u?Kr:dt;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),gt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var C=[],O,ee=y==="mouseout"||y==="mouseover",fe=u.target||u.srcElement,Ce=!1;fe;){if(O=this._targets[h(fe)],O&&(y==="click"||y==="preclick")&&this._draggableMoved(O)){Ce=!0;break}if(O&&O.listens(y,!0)&&(ee&&!js(fe,u)||(C.push(O),ee))||fe===this._container)break;fe=fe.parentNode}return!C.length&&!Ce&&!ee&&this.listens(y,!0)&&(C=[this]),C},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var C=u.type;C==="mousedown"&&sa(y),this._fireDOMEvent(u,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,C){if(u.type==="click"){var O=a({},u);O.type="preclick",this._fireDOMEvent(O,O.type,C)}var ee=this._findEventTargets(u,y);if(C){for(var fe=[],Ce=0;Ce<C.length;Ce++)C[Ce].listens(y,!0)&&fe.push(C[Ce]);ee=fe.concat(ee)}if(ee.length){y==="contextmenu"&&pn(u);var Me=ee[0],Ue={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var tt=Me.getLatLng&&(!Me._radius||Me._radius<=10);Ue.containerPoint=tt?this.latLngToContainerPoint(Me.getLatLng()):this.mouseEventToContainerPoint(u),Ue.layerPoint=this.containerPointToLayerPoint(Ue.containerPoint),Ue.latlng=tt?Me.getLatLng():this.layerPointToLatLng(Ue.layerPoint)}for(Ce=0;Ce<ee.length;Ce++)if(ee[Ce].fire(y,Ue,!0),Ue.originalEvent._stopped||ee[Ce].options.bubblingMouseEvents===!1&&W(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Zs(this._mapPane)||new q(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var C=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var C=this.getSize()._divideBy(2);return this.project(u,y)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,C){var O=this._getNewPixelOrigin(C,y);return this.project(u,y)._subtract(O)},_latLngBoundsToNewLayerBounds:function(u,y,C){var O=this._getNewPixelOrigin(C,y);return V([this.project(u.getSouthWest(),y)._subtract(O),this.project(u.getNorthWest(),y)._subtract(O),this.project(u.getSouthEast(),y)._subtract(O),this.project(u.getNorthEast(),y)._subtract(O)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,C){if(!C)return u;var O=this.project(u,y),ee=this.getSize().divideBy(2),fe=new Q(O.subtract(ee),O.add(ee)),Ce=this._getBoundsOffset(fe,C,y);return Math.abs(Ce.x)<=1&&Math.abs(Ce.y)<=1?u:this.unproject(O.add(Ce),y)},_limitOffset:function(u,y){if(!y)return u;var C=this.getPixelBounds(),O=new Q(C.min.add(u),C.max.add(u));return u.add(this._getBoundsOffset(O,y))},_getBoundsOffset:function(u,y,C){var O=V(this.project(y.getNorthEast(),C),this.project(y.getSouthWest(),C)),ee=O.min.subtract(u.min),fe=O.max.subtract(u.max),Ce=this._rebound(ee.x,-fe.x),Me=this._rebound(ee.y,-fe.y);return new q(Ce,Me)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),C=this.getMaxZoom(),O=gt.any3d?this.options.zoomSnap:1;return O&&(u=Math.round(u/O)*O),Math.max(y,Math.min(C,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var C=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,y),!0)},_createAnimProxy:function(){var u=this._proxy=ir("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var C=Qs,O=this._proxy.style[C];Ys(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),O===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Hr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();Ys(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var O=this.getZoomScale(y),ee=this._getCenterOffset(u)._divideBy(1-1/O);return C.animate!==!0&&!this.getSize().contains(ee)?!1:(Y(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,C,O){this._mapPane&&(C&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,er(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:O}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ic(u,y){return new mr(u,y)}var Si=se.extend({options:{position:"topright"},initialize:function(u){w(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),C=this.getPosition(),O=u._controlCorners[C];return er(y,"leaflet-control"),C.indexOf("bottom")!==-1?O.insertBefore(y,O.firstChild):O.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Hr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ns=function(u){return new Si(u)};mr.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",C=this._controlContainer=ir("div",y+"control-container",this._container);function O(ee,fe){var Ce=y+ee+" "+y+fe;u[ee+fe]=ir("div",Ce,C)}O("top","left"),O("top","right"),O("bottom","left"),O("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Hr(this._controlCorners[u]);Hr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Cl=Si.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,C,O){return C<O?-1:O<C?1:0}},initialize:function(u,y,C){w(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var O in u)this._addLayer(u[O],O);for(O in y)this._addLayer(y[O],O,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Si.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(h(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){er(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(er(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):vn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=ir("div",u),C=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Xs(y),va(y);var O=this._section=ir("section",u+"-list");C&&(this._map.on("click",this.collapse,this),dt(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ee=this._layersLink=ir("a",u+"-toggle",y);ee.href="#",ee.title="Layers",ee.setAttribute("role","button"),dt(ee,{keydown:function(fe){fe.keyCode===13&&this._expandSafely()},click:function(fe){pn(fe),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=ir("div",u+"-base",O),this._separator=ir("div",u+"-separator",O),this._overlaysList=ir("div",u+"-overlays",O),y.appendChild(O)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&h(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,C){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:C}),this.options.sortLayers&&this._layers.sort(l(function(O,ee){return this.options.sortFunction(O.layer,ee.layer,O.name,ee.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;La(this._baseLayersList),La(this._overlaysList),this._layerControlInputs=[];var u,y,C,O,ee=0;for(C=0;C<this._layers.length;C++)O=this._layers[C],this._addItem(O),y=y||O.overlay,u=u||!O.overlay,ee+=O.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ee>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(h(u.target)),C=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;C&&this._map.fire(C,y)},_createRadioElement:function(u,y){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",O=document.createElement("div");return O.innerHTML=C,O.firstChild},_addItem:function(u){var y=document.createElement("label"),C=this._map.hasLayer(u.layer),O;u.overlay?(O=document.createElement("input"),O.type="checkbox",O.className="leaflet-control-layers-selector",O.defaultChecked=C):O=this._createRadioElement("leaflet-base-layers_"+h(this),C),this._layerControlInputs.push(O),O.layerId=h(u.layer),dt(O,"click",this._onInputClick,this);var ee=document.createElement("span");ee.innerHTML=" "+u.name;var fe=document.createElement("span");y.appendChild(fe),fe.appendChild(O),fe.appendChild(ee);var Ce=u.overlay?this._overlaysList:this._baseLayersList;return Ce.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,C,O=[],ee=[];this._handlingClick=!0;for(var fe=u.length-1;fe>=0;fe--)y=u[fe],C=this._getLayer(y.layerId).layer,y.checked?O.push(C):y.checked||ee.push(C);for(fe=0;fe<ee.length;fe++)this._map.hasLayer(ee[fe])&&this._map.removeLayer(ee[fe]);for(fe=0;fe<O.length;fe++)this._map.hasLayer(O[fe])||this._map.addLayer(O[fe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,C,O=this._map.getZoom(),ee=u.length-1;ee>=0;ee--)y=u[ee],C=this._getLayer(y.layerId).layer,y.disabled=C.options.minZoom!==void 0&&O<C.options.minZoom||C.options.maxZoom!==void 0&&O>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,dt(u,"click",pn),this.expand();var y=this;setTimeout(function(){Kr(u,"click",pn),y._preventClick=!1})}}),Sd=function(u,y,C){return new Cl(u,y,C)},Js=Si.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",C=ir("div",y+" leaflet-bar"),O=this.options;return this._zoomInButton=this._createButton(O.zoomInText,O.zoomInTitle,y+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(O.zoomOutText,O.zoomOutTitle,y+"-out",C,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,C,O,ee){var fe=ir("a",C,O);return fe.innerHTML=u,fe.href="#",fe.title=y,fe.setAttribute("role","button"),fe.setAttribute("aria-label",y),Xs(fe),dt(fe,"click",xo),dt(fe,"click",ee,this),dt(fe,"click",this._refocusOnMap,this),fe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";vn(this._zoomInButton,y),vn(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(er(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(er(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});mr.mergeOptions({zoomControl:!0}),mr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Js,this.addControl(this.zoomControl))});var Zo=function(u){return new Js(u)},Nd=Si.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",C=ir("div",y),O=this.options;return this._addScales(O,y+"-line",C),u.on(O.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),C},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,C){u.metric&&(this._mScale=ir("div",y,C)),u.imperial&&(this._iScale=ir("div",y,C))},_update:function(){var u=this._map,y=u.getSize().y/2,C=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(C)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),C=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,C,y/u)},_updateImperial:function(u){var y=u*3.2808399,C,O,ee;y>5280?(C=y/5280,O=this._getRoundNum(C),this._updateScale(this._iScale,O+" mi",O/C)):(ee=this._getRoundNum(y),this._updateScale(this._iScale,ee+" ft",ee/y))},_updateScale:function(u,y,C){u.style.width=Math.round(this.options.maxWidth*C)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),C=u/y;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,y*C}}),Xo=function(u){return new Nd(u)},bu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',M=Si.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(gt.inlineSvg?bu+" ":"")+"Leaflet</a>"},initialize:function(u){w(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=ir("div","leaflet-control-attribution"),Xs(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var C=[];this.options.prefix&&C.push(this.options.prefix),u.length&&C.push(u.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});mr.mergeOptions({attributionControl:!0}),mr.addInitHook(function(){this.options.attributionControl&&new M().addTo(this)});var le=function(u){return new M(u)};Si.Layers=Cl,Si.Zoom=Js,Si.Scale=Nd,Si.Attribution=M,ns.layers=Sd,ns.zoom=Zo,ns.scale=Xo,ns.attribution=le;var je=se.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});je.addTo=function(u,y){return u.addHandler(y,this),this};var Ee={Events:z},Oe=gt.touch?"touchstart mousedown":"mousedown",Ge=ie.extend({options:{clickTolerance:3},initialize:function(u,y,C,O){w(this,O),this._element=u,this._dragStartTarget=y||u,this._preventOutline=C},enable:function(){this._enabled||(dt(this._dragStartTarget,Oe,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ge._dragging===this&&this.finishDrag(!0),Kr(this._dragStartTarget,Oe,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!bs(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){Ge._dragging===this&&this.finishDrag();return}if(!(Ge._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(Ge._dragging=this,this._preventOutline&&sa(this._element),Ic(),Go(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,C=vo(this._element);this._startPoint=new q(y.clientX,y.clientY),this._startPos=Zs(this._element),this._parentScale=Yo(C);var O=u.type==="mousedown";dt(document,O?"mousemove":"touchmove",this._onMove,this),dt(document,O?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,C=new q(y.clientX,y.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,pn(u),this._moved||(this.fire("dragstart"),this._moved=!0,er(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),er(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),kr(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){vn(document.body,"leaflet-dragging"),this._lastTarget&&(vn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Kr(document,"mousemove touchmove",this._onMove,this),Kr(document,"mouseup touchend touchcancel",this._onUp,this),tc(),ga();var y=this._moved&&this._moving;this._moving=!1,Ge._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function at(u,y,C){var O,ee=[1,4,2,8],fe,Ce,Me,Ue,tt,mt,_t,pr;for(fe=0,mt=u.length;fe<mt;fe++)u[fe]._code=Ki(u[fe],y);for(Me=0;Me<4;Me++){for(_t=ee[Me],O=[],fe=0,mt=u.length,Ce=mt-1;fe<mt;Ce=fe++)Ue=u[fe],tt=u[Ce],Ue._code&_t?tt._code&_t||(pr=Ss(tt,Ue,_t,y,C),pr._code=Ki(pr,y),O.push(pr)):(tt._code&_t&&(pr=Ss(tt,Ue,_t,y,C),pr._code=Ki(pr,y),O.push(pr)),O.push(Ue));u=O}return u}function jt(u,y){var C,O,ee,fe,Ce,Me,Ue,tt,mt;if(!u||u.length===0)throw new Error("latlngs not passed");Gi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var _t=Z([0,0]),pr=$(u),Zi=pr.getNorthWest().distanceTo(pr.getSouthWest())*pr.getNorthEast().distanceTo(pr.getNorthWest());Zi<1700&&(_t=Nt(u));var Yn=u.length,ds=[];for(C=0;C<Yn;C++){var Gr=Z(u[C]);ds.push(y.project(Z([Gr.lat-_t.lat,Gr.lng-_t.lng])))}for(Me=Ue=tt=0,C=0,O=Yn-1;C<Yn;O=C++)ee=ds[C],fe=ds[O],Ce=ee.y*fe.x-fe.y*ee.x,Ue+=(ee.x+fe.x)*Ce,tt+=(ee.y+fe.y)*Ce,Me+=Ce*3;Me===0?mt=ds[0]:mt=[Ue/Me,tt/Me];var Qr=y.unproject(ue(mt));return Z([Qr.lat+_t.lat,Qr.lng+_t.lng])}function Nt(u){for(var y=0,C=0,O=0,ee=0;ee<u.length;ee++){var fe=Z(u[ee]);y+=fe.lat,C+=fe.lng,O++}return Z([y/O,C/O])}var Yt={__proto__:null,clipPolygon:at,polygonCenter:jt,centroid:Nt};function ar(u,y){if(!y||!u.length)return u.slice();var C=y*y;return u=Ni(u,C),u=Kn(u,C),u}function Dr(u,y,C){return Math.sqrt(el(u,y,C,!0))}function On(u,y,C){return el(u,y,C)}function Kn(u,y){var C=u.length,O=typeof Uint8Array<"u"?Uint8Array:Array,ee=new O(C);ee[0]=ee[C-1]=1,rn(u,ee,y,0,C-1);var fe,Ce=[];for(fe=0;fe<C;fe++)ee[fe]&&Ce.push(u[fe]);return Ce}function rn(u,y,C,O,ee){var fe=0,Ce,Me,Ue;for(Me=O+1;Me<=ee-1;Me++)Ue=el(u[Me],u[O],u[ee],!0),Ue>fe&&(Ce=Me,fe=Ue);fe>C&&(y[Ce]=1,rn(u,y,C,O,Ce),rn(u,y,C,Ce,ee))}function Ni(u,y){for(var C=[u[0]],O=1,ee=0,fe=u.length;O<fe;O++)Jo(u[O],u[ee])>y&&(C.push(u[O]),ee=O);return ee<fe-1&&C.push(u[fe-1]),C}var Gn;function ki(u,y,C,O,ee){var fe=O?Gn:Ki(u,C),Ce=Ki(y,C),Me,Ue,tt;for(Gn=Ce;;){if(!(fe|Ce))return[u,y];if(fe&Ce)return!1;Me=fe||Ce,Ue=Ss(u,y,Me,C,ee),tt=Ki(Ue,C),Me===fe?(u=Ue,fe=tt):(y=Ue,Ce=tt)}}function Ss(u,y,C,O,ee){var fe=y.x-u.x,Ce=y.y-u.y,Me=O.min,Ue=O.max,tt,mt;return C&8?(tt=u.x+fe*(Ue.y-u.y)/Ce,mt=Ue.y):C&4?(tt=u.x+fe*(Me.y-u.y)/Ce,mt=Me.y):C&2?(tt=Ue.x,mt=u.y+Ce*(Ue.x-u.x)/fe):C&1&&(tt=Me.x,mt=u.y+Ce*(Me.x-u.x)/fe),new q(tt,mt,ee)}function Ki(u,y){var C=0;return u.x<y.min.x?C|=1:u.x>y.max.x&&(C|=2),u.y<y.min.y?C|=4:u.y>y.max.y&&(C|=8),C}function Jo(u,y){var C=y.x-u.x,O=y.y-u.y;return C*C+O*O}function el(u,y,C,O){var ee=y.x,fe=y.y,Ce=C.x-ee,Me=C.y-fe,Ue=Ce*Ce+Me*Me,tt;return Ue>0&&(tt=((u.x-ee)*Ce+(u.y-fe)*Me)/Ue,tt>1?(ee=C.x,fe=C.y):tt>0&&(ee+=Ce*tt,fe+=Me*tt)),Ce=u.x-ee,Me=u.y-fe,O?Ce*Ce+Me*Me:new q(ee,fe)}function Gi(u){return!D(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function eo(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Gi(u)}function Ns(u,y){var C,O,ee,fe,Ce,Me,Ue,tt;if(!u||u.length===0)throw new Error("latlngs not passed");Gi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var mt=Z([0,0]),_t=$(u),pr=_t.getNorthWest().distanceTo(_t.getSouthWest())*_t.getNorthEast().distanceTo(_t.getNorthWest());pr<1700&&(mt=Nt(u));var Zi=u.length,Yn=[];for(C=0;C<Zi;C++){var ds=Z(u[C]);Yn.push(y.project(Z([ds.lat-mt.lat,ds.lng-mt.lng])))}for(C=0,O=0;C<Zi-1;C++)O+=Yn[C].distanceTo(Yn[C+1])/2;if(O===0)tt=Yn[0];else for(C=0,fe=0;C<Zi-1;C++)if(Ce=Yn[C],Me=Yn[C+1],ee=Ce.distanceTo(Me),fe+=ee,fe>O){Ue=(fe-O)/ee,tt=[Me.x-Ue*(Me.x-Ce.x),Me.y-Ue*(Me.y-Ce.y)];break}var Gr=y.unproject(ue(tt));return Z([Gr.lat+mt.lat,Gr.lng+mt.lng])}var ac={__proto__:null,simplify:ar,pointToSegmentDistance:Dr,closestPointOnSegment:On,clipSegment:ki,_getEdgeIntersection:Ss,_getBitCode:Ki,_sqClosestPointOnSegment:el,isFlat:Gi,_flat:eo,polylineCenter:Ns},to={project:function(u){return new q(u.lng,u.lat)},unproject:function(u){return new de(u.y,u.x)},bounds:new Q([-180,-90],[180,90])},ai={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,C=this.R,O=u.lat*y,ee=this.R_MINOR/C,fe=Math.sqrt(1-ee*ee),Ce=fe*Math.sin(O),Me=Math.tan(Math.PI/4-O/2)/Math.pow((1-Ce)/(1+Ce),fe/2);return O=-C*Math.log(Math.max(Me,1e-10)),new q(u.lng*y*C,O)},unproject:function(u){for(var y=180/Math.PI,C=this.R,O=this.R_MINOR/C,ee=Math.sqrt(1-O*O),fe=Math.exp(-u.y/C),Ce=Math.PI/2-2*Math.atan(fe),Me=0,Ue=.1,tt;Me<15&&Math.abs(Ue)>1e-7;Me++)tt=ee*Math.sin(Ce),tt=Math.pow((1-tt)/(1+tt),ee/2),Ue=Math.PI/2-2*Math.atan(fe*tt)-Ce,Ce+=Ue;return new de(Ce*y,u.x*y/C)}},Al={__proto__:null,LonLat:to,Mercator:ai,SphericalMercator:_e},El=a({},oe,{code:"EPSG:3395",projection:ai,transformation:(function(){var u=.5/(Math.PI*ai.R);return De(u,.5,-u,.5)})()}),sc=a({},oe,{code:"EPSG:4326",projection:to,transformation:De(1/180,1,-1/180,.5)}),jo=a({},ge,{projection:to,transformation:De(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var C=y.lng-u.lng,O=y.lat-u.lat;return Math.sqrt(C*C+O*O)},infinite:!0});ge.Earth=oe,ge.EPSG3395=El,ge.EPSG3857=ut,ge.EPSG900913=ht,ge.EPSG4326=sc,ge.Simple=jo;var xn=ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[h(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[h(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var C=this.getEvents();y.on(C,this),this.once("remove",function(){y.off(C,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});mr.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=h(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=h(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return h(u)in this._layers},eachLayer:function(u,y){for(var C in this._layers)u.call(y,this._layers[C]);return this},_addLayers:function(u){u=u?D(u)?u:[u]:[];for(var y=0,C=u.length;y<C;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[h(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=h(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,C=this._getZoomSpan();for(var O in this._zoomBoundLayers){var ee=this._zoomBoundLayers[O].options;u=ee.minZoom===void 0?u:Math.min(u,ee.minZoom),y=ee.maxZoom===void 0?y:Math.max(y,ee.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ia=xn.extend({initialize:function(u,y){w(this,y),this._layers={};var C,O;if(u)for(C=0,O=u.length;C<O;C++)this.addLayer(u[C])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),C,O;for(C in this._layers)O=this._layers[C],O[u]&&O[u].apply(O,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var C in this._layers)u.call(y,this._layers[C]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return h(u)}}),Fc=function(u,y){return new Ia(u,y)},is=Ia.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Ia.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Ia.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ne;for(var y in this._layers){var C=this._layers[y];u.extend(C.getBounds?C.getBounds():C.getLatLng())}return u}}),as=function(u,y){return new is(u,y)},oa=se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){w(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var C=this._getIconUrl(u);if(!C){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var O=this._createImg(C,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(O,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(O.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),O},_setIconStyles:function(u,y){var C=this.options,O=C[y+"Size"];typeof O=="number"&&(O=[O,O]);var ee=ue(O),fe=ue(y==="shadow"&&C.shadowAnchor||C.iconAnchor||ee&&ee.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(C.className||""),fe&&(u.style.marginLeft=-fe.x+"px",u.style.marginTop=-fe.y+"px"),ee&&(u.style.width=ee.x+"px",u.style.height=ee.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return gt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function tl(u){return new oa(u)}var rl=oa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof rl.imagePath!="string"&&(rl.imagePath=this._detectIconPath()),(this.options.imagePath||rl.imagePath)+oa.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(C,O,ee){var fe=O.exec(C);return fe&&fe[ee]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=ir("div","leaflet-default-icon-path",document.body),y=wl(u,"background-image")||wl(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),_s=je.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new Ge(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),er(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,C=y._map,O=this._marker.options.autoPanSpeed,ee=this._marker.options.autoPanPadding,fe=Zs(y._icon),Ce=C.getPixelBounds(),Me=C.getPixelOrigin(),Ue=V(Ce.min._subtract(Me).add(ee),Ce.max._subtract(Me).subtract(ee));if(!Ue.contains(fe)){var tt=ue((Math.max(Ue.max.x,fe.x)-Ue.max.x)/(Ce.max.x-Ue.max.x)-(Math.min(Ue.min.x,fe.x)-Ue.min.x)/(Ce.min.x-Ue.min.x),(Math.max(Ue.max.y,fe.y)-Ue.max.y)/(Ce.max.y-Ue.max.y)-(Math.min(Ue.min.y,fe.y)-Ue.min.y)/(Ce.min.y-Ue.min.y)).multiplyBy(O);C.panBy(tt,{animate:!1}),this._draggable._newPos._add(tt),this._draggable._startPos._add(tt),kr(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=Y(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,C=y._shadow,O=Zs(y._icon),ee=y._map.layerPointToLatLng(O);C&&kr(C,O),y._latlng=ee,u.latlng=ee,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),ro=xn.extend({options:{icon:new rl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){w(this,y),this._latlng=Z(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=Z(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=u.icon.createIcon(this._icon),O=!1;C!==this._icon&&(this._icon&&this._removeIcon(),O=!0,u.title&&(C.title=u.title),C.tagName==="IMG"&&(C.alt=u.alt||"")),er(C,y),u.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dt(C,"focus",this._panOnFocus,this);var ee=u.icon.createShadow(this._shadow),fe=!1;ee!==this._shadow&&(this._removeShadow(),fe=!0),ee&&(er(ee,y),ee.alt=""),this._shadow=ee,u.opacity<1&&this._updateOpacity(),O&&this.getPane().appendChild(this._icon),this._initInteraction(),ee&&fe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kr(this._icon,"focus",this._panOnFocus,this),Hr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Hr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&kr(this._icon,u),this._shadow&&kr(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(er(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_s)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _s(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Wr(this._icon,u),this._shadow&&Wr(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,C=y.iconSize?ue(y.iconSize):ue(0,0),O=y.iconAnchor?ue(y.iconAnchor):ue(0,0);u.panInside(this._latlng,{paddingTopLeft:O,paddingBottomRight:C.subtract(O)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function za(u,y){return new ro(u,y)}var Fn=xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return w(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ss=Fn.extend({options:{fill:!0,radius:10},initialize:function(u,y){w(this,y),this._latlng=Z(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=Z(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Fn.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,C=this._clickTolerance(),O=[u+C,y+C];this._pxBounds=new Q(this._point.subtract(O),this._point.add(O))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wo(u,y){return new ss(u,y)}var no=ss.extend({initialize:function(u,y,C){if(typeof y=="number"&&(y=a({},C,{radius:y})),w(this,y),this._latlng=Z(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Fn.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,C=this._map,O=C.options.crs;if(O.distance===oe.distance){var ee=Math.PI/180,fe=this._mRadius/oe.R/ee,Ce=C.project([y+fe,u]),Me=C.project([y-fe,u]),Ue=Ce.add(Me).divideBy(2),tt=C.unproject(Ue).lat,mt=Math.acos((Math.cos(fe*ee)-Math.sin(y*ee)*Math.sin(tt*ee))/(Math.cos(y*ee)*Math.cos(tt*ee)))/ee;(isNaN(mt)||mt===0)&&(mt=fe/Math.cos(Math.PI/180*y)),this._point=Ue.subtract(C.getPixelOrigin()),this._radius=isNaN(mt)?0:Ue.x-C.project([tt,u-mt]).x,this._radiusY=Ue.y-Ce.y}else{var _t=O.unproject(O.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(_t).x}this._updateBounds()}});function qc(u,y,C){return new no(u,y,C)}var Ba=Fn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){w(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,C=null,O=el,ee,fe,Ce=0,Me=this._parts.length;Ce<Me;Ce++)for(var Ue=this._parts[Ce],tt=1,mt=Ue.length;tt<mt;tt++){ee=Ue[tt-1],fe=Ue[tt];var _t=O(u,ee,fe,!0);_t<y&&(y=_t,C=O(u,ee,fe))}return C&&(C.distance=Math.sqrt(y)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ns(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=Z(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ne,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Gi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],C=Gi(u),O=0,ee=u.length;O<ee;O++)C?(y[O]=Z(u[O]),this._bounds.extend(y[O])):y[O]=this._convertLatLngs(u[O]);return y},_project:function(){var u=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new q(u,u);this._rawPxBounds&&(this._pxBounds=new Q([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,C){var O=u[0]instanceof de,ee=u.length,fe,Ce;if(O){for(Ce=[],fe=0;fe<ee;fe++)Ce[fe]=this._map.latLngToLayerPoint(u[fe]),C.extend(Ce[fe]);y.push(Ce)}else for(fe=0;fe<ee;fe++)this._projectLatlngs(u[fe],y,C)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,C,O,ee,fe,Ce,Me,Ue;for(C=0,ee=0,fe=this._rings.length;C<fe;C++)for(Ue=this._rings[C],O=0,Ce=Ue.length;O<Ce-1;O++)Me=ki(Ue[O],Ue[O+1],u,O,!0),Me&&(y[ee]=y[ee]||[],y[ee].push(Me[0]),(Me[1]!==Ue[O+1]||O===Ce-2)&&(y[ee].push(Me[1]),ee++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,C=0,O=u.length;C<O;C++)u[C]=ar(u[C],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var C,O,ee,fe,Ce,Me,Ue=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(C=0,fe=this._parts.length;C<fe;C++)for(Me=this._parts[C],O=0,Ce=Me.length,ee=Ce-1;O<Ce;ee=O++)if(!(!y&&O===0)&&Dr(u,Me[ee],Me[O])<=Ue)return!0;return!1}});function Qn(u,y){return new Ba(u,y)}Ba._flat=eo;var nl=Ba.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=Ba.prototype._convertLatLngs.call(this,u),C=y.length;return C>=2&&y[0]instanceof de&&y[0].equals(y[C-1])&&y.pop(),y},_setLatLngs:function(u){Ba.prototype._setLatLngs.call(this,u),Gi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,C=new q(y,y);if(u=new Q(u.min.subtract(C),u.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var O=0,ee=this._rings.length,fe;O<ee;O++)fe=at(this._rings[O],u,!0),fe.length&&this._parts.push(fe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,C,O,ee,fe,Ce,Me,Ue,tt;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(fe=0,Ue=this._parts.length;fe<Ue;fe++)for(C=this._parts[fe],Ce=0,tt=C.length,Me=tt-1;Ce<tt;Me=Ce++)O=C[Ce],ee=C[Me],O.y>u.y!=ee.y>u.y&&u.x<(ee.x-O.x)*(u.y-O.y)/(ee.y-O.y)+O.x&&(y=!y);return y||Ba.prototype._containsPoint.call(this,u,!0)}});function So(u,y){return new nl(u,y)}var Di=is.extend({initialize:function(u,y){w(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=D(u)?u:u.features,C,O,ee;if(y){for(C=0,O=y.length;C<O;C++)ee=y[C],(ee.geometries||ee.geometry||ee.features||ee.coordinates)&&this.addData(ee);return this}var fe=this.options;if(fe.filter&&!fe.filter(u))return this;var Ce=si(u,fe);return Ce?(Ce.feature=_o(u),Ce.defaultOptions=Ce.options,this.resetStyle(Ce),fe.onEachFeature&&fe.onEachFeature(u,Ce),this.addLayer(Ce)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=a({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function si(u,y){var C=u.type==="Feature"?u.geometry:u,O=C?C.coordinates:null,ee=[],fe=y&&y.pointToLayer,Ce=y&&y.coordsToLatLng||Tl,Me,Ue,tt,mt;if(!O&&!C)return null;switch(C.type){case"Point":return Me=Ce(O),No(fe,u,Me,y);case"MultiPoint":for(tt=0,mt=O.length;tt<mt;tt++)Me=Ce(O[tt]),ee.push(No(fe,u,Me,y));return new is(ee);case"LineString":case"MultiLineString":return Ue=il(O,C.type==="LineString"?0:1,Ce),new Ba(Ue,y);case"Polygon":case"MultiPolygon":return Ue=il(O,C.type==="Polygon"?1:2,Ce),new nl(Ue,y);case"GeometryCollection":for(tt=0,mt=C.geometries.length;tt<mt;tt++){var _t=si({geometry:C.geometries[tt],type:"Feature",properties:u.properties},y);_t&&ee.push(_t)}return new is(ee);case"FeatureCollection":for(tt=0,mt=C.features.length;tt<mt;tt++){var pr=si(C.features[tt],y);pr&&ee.push(pr)}return new is(ee);default:throw new Error("Invalid GeoJSON object.")}}function No(u,y,C,O){return u?u(y,C):new ro(C,O&&O.markersInheritOptions&&O)}function Tl(u){return new de(u[1],u[0],u[2])}function il(u,y,C){for(var O=[],ee=0,fe=u.length,Ce;ee<fe;ee++)Ce=y?il(u[ee],y-1,C):(C||Tl)(u[ee]),O.push(Ce);return O}function io(u,y){return u=Z(u),u.alt!==void 0?[j(u.lng,y),j(u.lat,y),j(u.alt,y)]:[j(u.lng,y),j(u.lat,y)]}function Cs(u,y,C,O){for(var ee=[],fe=0,Ce=u.length;fe<Ce;fe++)ee.push(y?Cs(u[fe],Gi(u[fe])?0:y-1,C,O):io(u[fe],O));return!y&&C&&ee.length>0&&ee.push(ee[0].slice()),ee}function xa(u,y){return u.feature?a({},u.feature,{geometry:y}):_o(y)}function _o(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var ba={toGeoJSON:function(u){return xa(this,{type:"Point",coordinates:io(this.getLatLng(),u)})}};ro.include(ba),no.include(ba),ss.include(ba),Ba.include({toGeoJSON:function(u){var y=!Gi(this._latlngs),C=Cs(this._latlngs,y?1:0,!1,u);return xa(this,{type:(y?"Multi":"")+"LineString",coordinates:C})}}),nl.include({toGeoJSON:function(u){var y=!Gi(this._latlngs),C=y&&!Gi(this._latlngs[0]),O=Cs(this._latlngs,C?2:y?1:0,!0,u);return y||(O=[O]),xa(this,{type:(C?"Multi":"")+"Polygon",coordinates:O})}}),Ia.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(C){y.push(C.toGeoJSON(u).geometry.coordinates)}),xa(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var C=y==="GeometryCollection",O=[];return this.eachLayer(function(ee){if(ee.toGeoJSON){var fe=ee.toGeoJSON(u);if(C)O.push(fe.geometry);else{var Ce=_o(fe);Ce.type==="FeatureCollection"?O.push.apply(O,Ce.features):O.push(Ce)}}}),C?xa(this,{geometries:O,type:"GeometryCollection"}):{type:"FeatureCollection",features:O}}});function Co(u,y){return new Di(u,y)}var la=Co,ja=xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,C){this._url=u,this._bounds=$(y),w(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(er(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Hr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Cr(this._image),this},bringToBack:function(){return this._map&&yo(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=$(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:ir("img");if(er(y,"leaflet-image-layer"),this._zoomAnimated&&er(y,"leaflet-zoom-animated"),this.options.className&&er(y,this.options.className),y.onselectstart=g,y.onmousemove=g,y.onload=l(this.fire,this,"load"),y.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Ys(this._image,C,y)},_reset:function(){var u=this._image,y=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=y.getSize();kr(u,y.min),u.style.width=C.x+"px",u.style.height=C.y+"px"},_updateOpacity:function(){Wr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),$r=function(u,y,C){return new ja(u,y,C)},Or=ja.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:ir("video");if(er(y,"leaflet-image-layer"),this._zoomAnimated&&er(y,"leaflet-zoom-animated"),this.options.className&&er(y,this.options.className),y.onselectstart=g,y.onmousemove=g,y.onloadeddata=l(this.fire,this,"load"),u){for(var C=y.getElementsByTagName("source"),O=[],ee=0;ee<C.length;ee++)O.push(C[ee].src);this._url=C.length>0?O:[y.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var fe=0;fe<this._url.length;fe++){var Ce=ir("source");Ce.src=this._url[fe],y.appendChild(Ce)}}});function gn(u,y,C){return new Or(u,y,C)}var qn=ja.extend({_initImage:function(){var u=this._image=this._url;er(u,"leaflet-image-layer"),this._zoomAnimated&&er(u,"leaflet-zoom-animated"),this.options.className&&er(u,this.options.className),u.onselectstart=g,u.onmousemove=g}});function Ao(u,y,C){return new qn(u,y,C)}var oi=xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof de||D(u))?(this._latlng=Z(u),w(this,y)):(w(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Wr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Wr(this._container,1),this.bringToFront(),this.options.interactive&&(er(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Wr(this._container,0),this._removeTimeout=setTimeout(l(Hr,void 0,this._container),200)):Hr(this._container),this.options.interactive&&(vn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=Z(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Cr(this._container),this},bringToBack:function(){return this._map&&yo(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof is){y=null;var C=this._source._layers;for(var O in C)if(C[O]._map){y=C[O];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=ue(this.options.offset),C=this._getAnchor();this._zoomAnimated?kr(this._container,u.add(C)):y=y.add(u).add(C);var O=this._containerBottom=-y.y,ee=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=O+"px",this._container.style.left=ee+"px"}},_getAnchor:function(){return[0,0]}});mr.include({_initOverlay:function(u,y,C,O){var ee=y;return ee instanceof u||(ee=new u(O).setContent(y)),C&&ee.setLatLng(C),ee}}),xn.include({_initOverlay:function(u,y,C,O){var ee=C;return ee instanceof u?(w(ee,O),ee._source=this):(ee=y&&!O?y:new u(O,this),ee.setContent(C)),ee}});var Eo=oi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,oi.prototype.openOn.call(this,u)},onAdd:function(u){oi.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fn||this._source.on("preclick",ts))},onRemove:function(u){oi.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fn||this._source.off("preclick",ts))},getEvents:function(){var u=oi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=ir("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=ir("div",u+"-content-wrapper",y);if(this._contentNode=ir("div",u+"-content",C),Xs(y),va(this._contentNode),dt(y,"contextmenu",ts),this._tipContainer=ir("div",u+"-tip-container",y),this._tip=ir("div",u+"-tip",this._tipContainer),this.options.closeButton){var O=this._closeButton=ir("a",u+"-close-button",y);O.setAttribute("role","button"),O.setAttribute("aria-label","Close popup"),O.href="#close",O.innerHTML='<span aria-hidden="true">&#215;</span>',dt(O,"click",function(ee){pn(ee),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var C=u.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),y.width=C+1+"px",y.whiteSpace="",y.height="";var O=u.offsetHeight,ee=this.options.maxHeight,fe="leaflet-popup-scrolled";ee&&O>ee?(y.height=ee+"px",er(u,fe)):vn(u,fe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),C=this._getAnchor();kr(this._container,y.add(C))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(wl(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+y,O=this._containerWidth,ee=new q(this._containerLeft,-C-this._containerBottom);ee._add(Zs(this._container));var fe=u.layerPointToContainerPoint(ee),Ce=ue(this.options.autoPanPadding),Me=ue(this.options.autoPanPaddingTopLeft||Ce),Ue=ue(this.options.autoPanPaddingBottomRight||Ce),tt=u.getSize(),mt=0,_t=0;fe.x+O+Ue.x>tt.x&&(mt=fe.x+O-tt.x+Ue.x),fe.x-mt-Me.x<0&&(mt=fe.x-Me.x),fe.y+C+Ue.y>tt.y&&(_t=fe.y+C-tt.y+Ue.y),fe.y-_t-Me.y<0&&(_t=fe.y-Me.y),(mt||_t)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([mt,_t]))}},_getAnchor:function(){return ue(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_d=function(u,y){return new Eo(u,y)};mr.mergeOptions({closePopupOnClick:!0}),mr.include({openPopup:function(u,y,C){return this._initOverlay(Eo,u,y,C).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),xn.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Eo,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof is||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){xo(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Fn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Uc=oi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){oi.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){oi.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=oi.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ir("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,C,O=this._map,ee=this._container,fe=O.latLngToContainerPoint(O.getCenter()),Ce=O.layerPointToContainerPoint(u),Me=this.options.direction,Ue=ee.offsetWidth,tt=ee.offsetHeight,mt=ue(this.options.offset),_t=this._getAnchor();Me==="top"?(y=Ue/2,C=tt):Me==="bottom"?(y=Ue/2,C=0):Me==="center"?(y=Ue/2,C=tt/2):Me==="right"?(y=0,C=tt/2):Me==="left"?(y=Ue,C=tt/2):Ce.x<fe.x?(Me="right",y=0,C=tt/2):(Me="left",y=Ue+(mt.x+_t.x)*2,C=tt/2),u=u.subtract(ue(y,C,!0)).add(mt).add(_t),vn(ee,"leaflet-tooltip-right"),vn(ee,"leaflet-tooltip-left"),vn(ee,"leaflet-tooltip-top"),vn(ee,"leaflet-tooltip-bottom"),er(ee,"leaflet-tooltip-"+Me),kr(ee,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Wr(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return ue(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yf=function(u,y){return new Uc(u,y)};mr.include({openTooltip:function(u,y,C){return this._initOverlay(Uc,u,y,C).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),xn.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Uc,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[y](C),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof is||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(dt(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),dt(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,C,O;this._tooltip.options.sticky&&u.originalEvent&&(C=this._map.mouseEventToContainerPoint(u.originalEvent),O=this._map.containerPointToLayerPoint(C),y=this._map.layerPointToLatLng(O)),this._tooltip.setLatLng(y)}});var lh=oa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),C=this.options;if(C.html instanceof Element?(La(y),y.appendChild(C.html)):y.innerHTML=C.html!==!1?C.html:"",C.bgPos){var O=ue(C.bgPos);y.style.backgroundPosition=-O.x+"px "+-O.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function vf(u){return new lh(u)}oa.Default=rl;var oc=xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){w(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Hr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Cr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof q?u:new q(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,C=-u(-1/0,1/0),O=0,ee=y.length,fe;O<ee;O++)fe=y[O].style.zIndex,y[O]!==this._container&&fe&&(C=u(C,+fe));isFinite(C)&&(this.options.zIndex=C+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!gt.ielt9){Wr(this._container,this.options.opacity);var u=+new Date,y=!1,C=!1;for(var O in this._tiles){var ee=this._tiles[O];if(!(!ee.current||!ee.loaded)){var fe=Math.min(1,(u-ee.loaded)/200);Wr(ee.el,fe),fe<1?y=!0:(ee.active?C=!0:this._onOpaqueTile(ee),ee.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),y&&(G(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ir("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===u?(this._levels[C].el.style.zIndex=y-Math.abs(u-C),this._onUpdateLevel(C)):(Hr(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var O=this._levels[u],ee=this._map;return O||(O=this._levels[u]={},O.el=ir("div","leaflet-tile-container leaflet-zoom-animated",this._container),O.el.style.zIndex=y,O.origin=ee.project(ee.unproject(ee.getPixelOrigin()),u).round(),O.zoom=u,this._setZoomTransform(O,ee.getCenter(),ee.getZoom()),g(O.el.offsetWidth),this._onCreateLevel(O)),this._level=O,O}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var u,y,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var O=y.coords;this._retainParent(O.x,O.y,O.z,O.z-5)||this._retainChildren(O.x,O.y,O.z,O.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Hr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,C,O){var ee=Math.floor(u/2),fe=Math.floor(y/2),Ce=C-1,Me=new q(+ee,+fe);Me.z=+Ce;var Ue=this._tileCoordsToKey(Me),tt=this._tiles[Ue];return tt&&tt.active?(tt.retain=!0,!0):(tt&&tt.loaded&&(tt.retain=!0),Ce>O?this._retainParent(ee,fe,Ce,O):!1)},_retainChildren:function(u,y,C,O){for(var ee=2*u;ee<2*u+2;ee++)for(var fe=2*y;fe<2*y+2;fe++){var Ce=new q(ee,fe);Ce.z=C+1;var Me=this._tileCoordsToKey(Ce),Ue=this._tiles[Me];if(Ue&&Ue.active){Ue.retain=!0;continue}else Ue&&Ue.loaded&&(Ue.retain=!0);C+1<O&&this._retainChildren(ee,fe,C+1,O)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,C,O){var ee=Math.round(y);this.options.maxZoom!==void 0&&ee>this.options.maxZoom||this.options.minZoom!==void 0&&ee<this.options.minZoom?ee=void 0:ee=this._clampZoom(ee);var fe=this.options.updateWhenZooming&&ee!==this._tileZoom;(!O||fe)&&(this._tileZoom=ee,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ee!==void 0&&this._update(u),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var C in this._levels)this._setZoomTransform(this._levels[C],u,y)},_setZoomTransform:function(u,y,C){var O=this._map.getZoomScale(C,u.zoom),ee=u.origin.multiplyBy(O).subtract(this._map._getNewPixelOrigin(y,C)).round();gt.any3d?Ys(u.el,ee,O):kr(u.el,ee)},_resetGrid:function(){var u=this._map,y=u.options.crs,C=this._tileSize=this.getTileSize(),O=this._tileZoom,ee=this._map.getPixelWorldBounds(this._tileZoom);ee&&(this._globalTileRange=this._pxBoundsToTileRange(ee)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],O).x/C.x),Math.ceil(u.project([0,y.wrapLng[1]],O).x/C.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],O).y/C.x),Math.ceil(u.project([y.wrapLat[1],0],O).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,C=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),O=y.getZoomScale(C,this._tileZoom),ee=y.project(u,this._tileZoom).floor(),fe=y.getSize().divideBy(O*2);return new Q(ee.subtract(fe),ee.add(fe))},_update:function(u){var y=this._map;if(y){var C=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var O=this._getTiledPixelBounds(u),ee=this._pxBoundsToTileRange(O),fe=ee.getCenter(),Ce=[],Me=this.options.keepBuffer,Ue=new Q(ee.getBottomLeft().subtract([Me,-Me]),ee.getTopRight().add([Me,-Me]));if(!(isFinite(ee.min.x)&&isFinite(ee.min.y)&&isFinite(ee.max.x)&&isFinite(ee.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var tt in this._tiles){var mt=this._tiles[tt].coords;(mt.z!==this._tileZoom||!Ue.contains(new q(mt.x,mt.y)))&&(this._tiles[tt].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(u,C);return}for(var _t=ee.min.y;_t<=ee.max.y;_t++)for(var pr=ee.min.x;pr<=ee.max.x;pr++){var Zi=new q(pr,_t);if(Zi.z=this._tileZoom,!!this._isValidTile(Zi)){var Yn=this._tiles[this._tileCoordsToKey(Zi)];Yn?Yn.current=!0:Ce.push(Zi)}}if(Ce.sort(function(Gr,Qr){return Gr.distanceTo(fe)-Qr.distanceTo(fe)}),Ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ds=document.createDocumentFragment();for(pr=0;pr<Ce.length;pr++)this._addTile(Ce[pr],ds);this._level.el.appendChild(ds)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var C=this._globalTileRange;if(!y.wrapLng&&(u.x<C.min.x||u.x>C.max.x)||!y.wrapLat&&(u.y<C.min.y||u.y>C.max.y))return!1}if(!this.options.bounds)return!0;var O=this._tileCoordsToBounds(u);return $(this.options.bounds).overlaps(O)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,C=this.getTileSize(),O=u.scaleBy(C),ee=O.add(C),fe=y.unproject(O,u.z),Ce=y.unproject(ee,u.z);return[fe,Ce]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),C=new ne(y[0],y[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),C=new q(+y[0],+y[1]);return C.z=+y[2],C},_removeTile:function(u){var y=this._tiles[u];y&&(Hr(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){er(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=g,u.onmousemove=g,gt.ielt9&&this.options.opacity<1&&Wr(u,this.options.opacity)},_addTile:function(u,y){var C=this._getTilePos(u),O=this._tileCoordsToKey(u),ee=this.createTile(this._wrapCoords(u),l(this._tileReady,this,u));this._initTile(ee),this.createTile.length<2&&Y(l(this._tileReady,this,u,null,ee)),kr(ee,C),this._tiles[O]={el:ee,coords:u,current:!0},y.appendChild(ee),this.fire("tileloadstart",{tile:ee,coords:u})},_tileReady:function(u,y,C){y&&this.fire("tileerror",{error:y,tile:C,coords:u});var O=this._tileCoordsToKey(u);C=this._tiles[O],C&&(C.loaded=+new Date,this._map._fadeAnimated?(Wr(C.el,0),G(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),y||(er(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),gt.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new q(this._wrapX?p(u.x,this._wrapX):u.x,this._wrapY?p(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new Q(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function ch(u){return new oc(u)}var As=oc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=w(this,y),y.detectRetina&&gt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var C=document.createElement("img");return dt(C,"load",l(this._tileOnLoad,this,y,C)),dt(C,"error",l(this._tileOnError,this,y,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(u),C},getTileUrl:function(u){var y={r:gt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=C),y["-y"]=C}return E(this._url,a(y,this.options))},_tileOnLoad:function(u,y){gt.ielt9?setTimeout(l(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,C){var O=this.options.errorTileUrl;O&&y.getAttribute("src")!==O&&(y.src=O),u(C,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,C=this.options.zoomReverse,O=this.options.zoomOffset;return C&&(u=y-u),u+O},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=g,y.onerror=g,!y.complete)){y.src=K;var C=this._tiles[u].coords;Hr(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:C})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",K),oc.prototype._removeTile.call(this,u)},_tileReady:function(u,y,C){if(!(!this._map||C&&C.getAttribute("src")===K))return oc.prototype._tileReady.call(this,u,y,C)}});function os(u,y){return new As(u,y)}var Hc=As.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var C=a({},this.defaultWmsParams);for(var O in y)O in this.options||(C[O]=y[O]);y=w(this,y);var ee=y.detectRetina&&gt.retina?2:1,fe=this.getTileSize();C.width=fe.x*ee,C.height=fe.y*ee,this.wmsParams=C},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,As.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),C=this._crs,O=V(C.project(y[0]),C.project(y[1])),ee=O.min,fe=O.max,Ce=(this._wmsVersion>=1.3&&this._crs===sc?[ee.y,ee.x,fe.y,fe.x]:[ee.x,ee.y,fe.x,fe.y]).join(","),Me=As.prototype.getTileUrl.call(this,u);return Me+S(this.wmsParams,Me,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ce},setParams:function(u,y){return a(this.wmsParams,u),y||this.redraw(),this}});function ls(u,y){return new Hc(u,y)}As.WMS=Hc,os.wms=ls;var wa=xn.extend({options:{padding:.1},initialize:function(u){w(this,u),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),er(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var C=this._map.getZoomScale(y,this._zoom),O=this._map.getSize().multiplyBy(.5+this.options.padding),ee=this._map.project(this._center,y),fe=O.multiplyBy(-C).add(ee).subtract(this._map._getNewPixelOrigin(u,y));gt.any3d?Ys(this._container,fe,C):kr(this._container,fe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),C=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new Q(C,C.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Cd=wa.extend({options:{tolerance:0},getEvents:function(){var u=wa.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");dt(u,"mousemove",this._onMouseMove,this),dt(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),dt(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,Hr(this._container),Kr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wa.prototype._update.call(this);var u=this._bounds,y=this._container,C=u.getSize(),O=gt.retina?2:1;kr(y,u.min),y.width=O*C.x,y.height=O*C.y,y.style.width=C.x+"px",y.style.height=C.y+"px",gt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){wa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[h(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,C=y.next,O=y.prev;C?C.prev=O:this._drawLast=O,O?O.next=C:this._drawFirst=C,delete u._order,delete this._layers[h(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),C=[],O,ee;for(ee=0;ee<y.length;ee++){if(O=Number(y[ee]),isNaN(O))return;C.push(O)}u.options._dashArray=C}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var C=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var O=this._drawFirst;O;O=O.next)u=O.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var C,O,ee,fe,Ce=u._parts,Me=Ce.length,Ue=this._ctx;if(Me){for(Ue.beginPath(),C=0;C<Me;C++){for(O=0,ee=Ce[C].length;O<ee;O++)fe=Ce[C][O],Ue[O?"lineTo":"moveTo"](fe.x,fe.y);y&&Ue.closePath()}this._fillStroke(Ue,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,C=this._ctx,O=Math.max(Math.round(u._radius),1),ee=(Math.max(Math.round(u._radiusY),1)||O)/O;ee!==1&&(C.save(),C.scale(1,ee)),C.beginPath(),C.arc(y.x,y.y/ee,O,0,Math.PI*2,!1),ee!==1&&C.restore(),this._fillStroke(C,u)}},_fillStroke:function(u,y){var C=y.options;C.fill&&(u.globalAlpha=C.fillOpacity,u.fillStyle=C.fillColor||C.color,u.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=C.opacity,u.lineWidth=C.weight,u.strokeStyle=C.color,u.lineCap=C.lineCap,u.lineJoin=C.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),C,O,ee=this._drawFirst;ee;ee=ee.next)C=ee.layer,C.options.interactive&&C._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(C))&&(O=C);this._fireEvent(O?[O]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(vn(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var C,O,ee=this._drawFirst;ee;ee=ee.next)C=ee.layer,C.options.interactive&&C._containsPoint(y)&&(O=C);O!==this._hoveredLayer&&(this._handleMouseOut(u),O&&(er(this._container,"leaflet-interactive"),this._fireEvent([O],u,"mouseover"),this._hoveredLayer=O)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,C){this._map._fireDOMEvent(y,C||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var C=y.next,O=y.prev;if(C)C.prev=O;else return;O?O.next=C:C&&(this._drawFirst=C),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var C=y.next,O=y.prev;if(O)O.next=C;else return;C?C.prev=O:O&&(this._drawLast=O),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Wc(u){return gt.canvas?new Cd(u):null}var al=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ju={_initContainer:function(){this._container=ir("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wa.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=al("shape");er(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=al("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[h(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;Hr(y),u.removeInteractiveTarget(y),delete this._layers[h(u)]},_updateStyle:function(u){var y=u._stroke,C=u._fill,O=u.options,ee=u._container;ee.stroked=!!O.stroke,ee.filled=!!O.fill,O.stroke?(y||(y=u._stroke=al("stroke")),ee.appendChild(y),y.weight=O.weight+"px",y.color=O.color,y.opacity=O.opacity,O.dashArray?y.dashStyle=D(O.dashArray)?O.dashArray.join(" "):O.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=O.lineCap.replace("butt","flat"),y.joinstyle=O.lineJoin):y&&(ee.removeChild(y),u._stroke=null),O.fill?(C||(C=u._fill=al("fill")),ee.appendChild(C),C.color=O.fillColor||O.color,C.opacity=O.fillOpacity):C&&(ee.removeChild(C),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),C=Math.round(u._radius),O=Math.round(u._radiusY||C);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+C+","+O+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){Cr(u._container)},_bringToBack:function(u){yo(u._container)}},Es=gt.vml?al:be,sl=wa.extend({_initContainer:function(){this._container=Es("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Es("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Hr(this._container),Kr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wa.prototype._update.call(this);var u=this._bounds,y=u.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,C.setAttribute("width",y.x),C.setAttribute("height",y.y)),kr(C,u.min),C.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=Es("path");u.options.className&&er(y,u.options.className),u.options.interactive&&er(y,"leaflet-interactive"),this._updateStyle(u),this._layers[h(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Hr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[h(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,C=u.options;y&&(C.stroke?(y.setAttribute("stroke",C.color),y.setAttribute("stroke-opacity",C.opacity),y.setAttribute("stroke-width",C.weight),y.setAttribute("stroke-linecap",C.lineCap),y.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?y.setAttribute("stroke-dasharray",C.dashArray):y.removeAttribute("stroke-dasharray"),C.dashOffset?y.setAttribute("stroke-dashoffset",C.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),C.fill?(y.setAttribute("fill",C.fillColor||C.color),y.setAttribute("fill-opacity",C.fillOpacity),y.setAttribute("fill-rule",C.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,ct(u._parts,y))},_updateCircle:function(u){var y=u._point,C=Math.max(Math.round(u._radius),1),O=Math.max(Math.round(u._radiusY),1)||C,ee="a"+C+","+O+" 0 1,0 ",fe=u._empty()?"M0 0":"M"+(y.x-C)+","+y.y+ee+C*2+",0 "+ee+-C*2+",0 ";this._setPath(u,fe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){Cr(u._path)},_bringToBack:function(u){yo(u._path)}});gt.vml&&sl.include(ju);function Qi(u){return gt.svg||gt.vml?new sl(u):null}mr.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Wc(u)||Qi(u)}});var Oi=nl.extend({initialize:function(u,y){nl.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=$(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function wu(u,y){return new Oi(u,y)}sl.create=Es,sl.pointsToPath=ct,Di.geometryToLayer=si,Di.coordsToLatLng=Tl,Di.coordsToLatLngs=il,Di.latLngToCoords=io,Di.latLngsToCoords=Cs,Di.getFeature=xa,Di.asFeature=_o,mr.mergeOptions({boxZoom:!0});var Yi=je.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Kr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Hr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Go(),Ic(),this._startPoint=this._map.mouseEventToContainerPoint(u),dt(document,{contextmenu:xo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=ir("div","leaflet-zoom-box",this._container),er(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new Q(this._point,this._startPoint),C=y.getSize();kr(this._box,y.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(Hr(this._box),vn(this._container,"leaflet-crosshair")),ga(),tc(),Kr(document,{contextmenu:xo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var y=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});mr.addInitHook("addHandler","boxZoom",Yi),mr.mergeOptions({doubleClickZoom:!0});var Ad=je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,C=y.getZoom(),O=y.options.zoomDelta,ee=u.originalEvent.shiftKey?C-O:C+O;y.options.doubleClickZoom==="center"?y.setZoom(ee):y.setZoomAround(u.containerPoint,ee)}});mr.addInitHook("addHandler","doubleClickZoom",Ad),mr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cs=je.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new Ge(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}er(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vn(this._map._container,"leaflet-grab"),vn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=$(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),C=this._initialWorldOffset,O=this._draggable._newPos.x,ee=(O-y+C)%u+y-C,fe=(O+y+C)%u-y-C,Ce=Math.abs(ee+C)<Math.abs(fe+C)?ee:fe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ce},_onDragEnd:function(u){var y=this._map,C=y.options,O=!C.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),O)y.fire("moveend");else{this._prunePositions(+new Date);var ee=this._lastPos.subtract(this._positions[0]),fe=(this._lastTime-this._times[0])/1e3,Ce=C.easeLinearity,Me=ee.multiplyBy(Ce/fe),Ue=Me.distanceTo([0,0]),tt=Math.min(C.inertiaMaxSpeed,Ue),mt=Me.multiplyBy(tt/Ue),_t=tt/(C.inertiaDeceleration*Ce),pr=mt.multiplyBy(-_t/2).round();!pr.x&&!pr.y?y.fire("moveend"):(pr=y._limitOffset(pr,y.options.maxBounds),Y(function(){y.panBy(pr,{duration:_t,easeLinearity:Ce,noMoveStart:!0,animate:!0})}))}}});mr.addInitHook("addHandler","dragging",cs),mr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $c=je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),dt(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Kr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,C=u.scrollTop||y.scrollTop,O=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(O,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},C=this.keyCodes,O,ee;for(O=0,ee=C.left.length;O<ee;O++)y[C.left[O]]=[-1*u,0];for(O=0,ee=C.right.length;O<ee;O++)y[C.right[O]]=[u,0];for(O=0,ee=C.down.length;O<ee;O++)y[C.down[O]]=[0,u];for(O=0,ee=C.up.length;O<ee;O++)y[C.up[O]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},C=this.keyCodes,O,ee;for(O=0,ee=C.zoomIn.length;O<ee;O++)y[C.zoomIn[O]]=u;for(O=0,ee=C.zoomOut.length;O<ee;O++)y[C.zoomOut[O]]=-u},_addHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Kr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,C=this._map,O;if(y in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(O=this._panKeys[y],u.shiftKey&&(O=ue(O).multiplyBy(3)),C.options.maxBounds&&(O=C._limitOffset(ue(O),C.options.maxBounds)),C.options.worldCopyJump){var ee=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(O)));C.panTo(ee)}else C.panBy(O)}else if(y in this._zoomKeys)C.setZoom(C.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;xo(u)}}});mr.addInitHook("addHandler","keyboard",$c),mr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var lc=je.extend({addHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Kr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=wi(u),C=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var O=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),O),xo(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),C=this._map.options.zoomSnap||0;u._stop();var O=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ee=4*Math.log(2/(1+Math.exp(-Math.abs(O))))/Math.LN2,fe=C?Math.ceil(ee/C)*C:ee,Ce=u._limitZoom(y+(this._delta>0?fe:-fe))-y;this._delta=0,this._startTime=null,Ce&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+Ce):u.setZoomAround(this._lastMousePos,y+Ce))}});mr.addInitHook("addHandler","scrollWheelZoom",lc);var Pl=600;mr.mergeOptions({tapHold:gt.touchNative&&gt.safari&&gt.mobile,tapTolerance:15});var Vc=je.extend({addHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Kr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new q(y.clientX,y.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(dt(document,"touchend",pn),dt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),Pl),dt(document,"touchend touchcancel contextmenu",this._cancel,this),dt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Kr(document,"touchend",pn),Kr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Kr(document,"touchend touchcancel contextmenu",this._cancel,this),Kr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new q(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var C=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});C._simulated=!0,y.target.dispatchEvent(C)}});mr.addInitHook("addHandler","tapHold",Vc),mr.mergeOptions({touchZoom:gt.touch,bounceAtZoomLimits:!0});var Ed=je.extend({addHooks:function(){er(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vn(this._map._container,"leaflet-touch-zoom"),Kr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var C=y.mouseEventToContainerPoint(u.touches[0]),O=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(C.add(O)._divideBy(2))),this._startDist=C.distanceTo(O),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend touchcancel",this._onTouchEnd,this),pn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,C=y.mouseEventToContainerPoint(u.touches[0]),O=y.mouseEventToContainerPoint(u.touches[1]),ee=C.distanceTo(O)/this._startDist;if(this._zoom=y.getScaleZoom(ee,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ee<1||this._zoom>y.getMaxZoom()&&ee>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ee===1)return}else{var fe=C._add(O)._divideBy(2)._subtract(this._centerPoint);if(ee===1&&fe.x===0&&fe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(fe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var Ce=l(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(Ce,this,!0),pn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),Kr(document,"touchmove",this._onTouchMove,this),Kr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});mr.addInitHook("addHandler","touchZoom",Ed),mr.BoxZoom=Yi,mr.DoubleClickZoom=Ad,mr.Drag=cs,mr.Keyboard=$c,mr.ScrollWheelZoom=lc,mr.TapHold=Vc,mr.TouchZoom=Ed,n.Bounds=Q,n.Browser=gt,n.CRS=ge,n.Canvas=Cd,n.Circle=no,n.CircleMarker=ss,n.Class=se,n.Control=Si,n.DivIcon=lh,n.DivOverlay=oi,n.DomEvent=ws,n.DomUtil=_l,n.Draggable=Ge,n.Evented=ie,n.FeatureGroup=is,n.GeoJSON=Di,n.GridLayer=oc,n.Handler=je,n.Icon=oa,n.ImageOverlay=ja,n.LatLng=de,n.LatLngBounds=ne,n.Layer=xn,n.LayerGroup=Ia,n.LineUtil=ac,n.Map=mr,n.Marker=ro,n.Mixin=Ee,n.Path=Fn,n.Point=q,n.PolyUtil=Yt,n.Polygon=nl,n.Polyline=Ba,n.Popup=Eo,n.PosAnimation=bo,n.Projection=Al,n.Rectangle=Oi,n.Renderer=wa,n.SVG=sl,n.SVGOverlay=qn,n.TileLayer=As,n.Tooltip=Uc,n.Transformation=Ie,n.Util=ae,n.VideoOverlay=Or,n.bind=l,n.bounds=V,n.canvas=Wc,n.circle=qc,n.circleMarker=wo,n.control=ns,n.divIcon=vf,n.extend=a,n.featureGroup=as,n.geoJSON=Co,n.geoJson=la,n.gridLayer=ch,n.icon=tl,n.imageOverlay=$r,n.latLng=Z,n.latLngBounds=$,n.layerGroup=Fc,n.map=ic,n.marker=za,n.point=ue,n.polygon=So,n.polyline=Qn,n.popup=_d,n.rectangle=wu,n.setOptions=w,n.stamp=h,n.svg=Qi,n.svgOverlay=Ao,n.tileLayer=os,n.tooltip=yf,n.transformation=De,n.version=i,n.videoOverlay=gn;var Kc=window.L;n.noConflict=function(){return window.L=Kc,this},window.L=n}))})(Wp,Wp.exports)),Wp.exports}var Ope=Dpe();const _h=Zl(Ope),mD=[24.7136,46.6753],Mpe=10,yv=_h.divIcon({className:"custom-marker",html:`<div style="
    background: #0d9488;
    width: 32px;
    height: 32px;
    border-radius: 50% 50% 50% 0;
    transform: rotate(-45deg);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    border: 2px solid white;
  ">
    <div style="transform: rotate(45deg); color: white; font-size: 14px;"></div>
  </div>`,iconSize:[32,32],iconAnchor:[16,32]});function Lpe({latitude:e,longitude:t,onLocationSelect:n,height:i="300px"}){const a=P.useRef(null),s=P.useRef(null),l=P.useRef(null),[d,h]=P.useState(!1),f=()=>{if(!navigator.geolocation){Ur.error("Geolocation is not supported by your browser");return}h(!0),navigator.geolocation.getCurrentPosition(p=>{const{latitude:g,longitude:j}=p.coords;s.current&&(l.current?l.current.setLatLng([g,j]):l.current=_h.marker([g,j],{icon:yv}).addTo(s.current),s.current.setView([g,j],16)),n(g,j),h(!1),Ur.success("Location detected successfully")},p=>{switch(h(!1),p.code){case p.PERMISSION_DENIED:Ur.error("Location access denied. Please enable location permissions.");break;case p.POSITION_UNAVAILABLE:Ur.error("Location information unavailable");break;case p.TIMEOUT:Ur.error("Location request timed out");break;default:Ur.error("Unable to get your location")}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})};return P.useEffect(()=>{if(!a.current||s.current)return;const p=e||mD[0],g=t||mD[1],j=e&&t?15:Mpe,v=_h.map(a.current).setView([p,g],j);return _h.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(v),e&&t&&(l.current=_h.marker([e,t],{icon:yv}).addTo(v)),v.on("click",b=>{const{lat:w,lng:S}=b.latlng;l.current?l.current.setLatLng([w,S]):l.current=_h.marker([w,S],{icon:yv}).addTo(v),n(w,S)}),s.current=v,()=>{s.current&&(s.current.remove(),s.current=null)}},[]),P.useEffect(()=>{s.current&&e&&t&&(l.current?l.current.setLatLng([e,t]):l.current=_h.marker([e,t],{icon:yv}).addTo(s.current),s.current.setView([e,t],15))},[e,t]),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("div",{ref:a,style:{height:i,width:"100%",borderRadius:"8px",border:"1px solid var(--border)",overflow:"hidden"}}),r.jsx("button",{type:"button",onClick:f,disabled:d,style:{position:"absolute",top:"10px",right:"10px",background:"white",border:"none",padding:"8px 12px",borderRadius:"6px",fontSize:"0.8125rem",fontWeight:500,color:"#0d9488",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",cursor:d?"wait":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseOver:p=>{d||(p.currentTarget.style.background="#0d9488",p.currentTarget.style.color="white")},onMouseOut:p=>{p.currentTarget.style.background="white",p.currentTarget.style.color="#0d9488"},children:d?r.jsxs(r.Fragment,{children:[r.jsx(Ch,{size:16,style:{animation:"spin 1s linear infinite"}}),"Locating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(QU,{size:16}),"Use My Location"]})}),r.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"8px",background:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"0.75rem",color:"var(--text-muted)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Fs,{size:14}),"Click on the map to select location"]}),r.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}function Rpe(){const e=Tr(),t=Ei(),[n,i]=P.useState({nameEn:"",nameAr:"",email:"",mobile:"",phone:"",fullAddress:"",postalCode:"",countryId:"",regionId:"",cityId:"",latitude:"",longitude:"",deliveryWindowStart:"",deliveryWindowEnd:"",preferredDeliveryTime:""}),[a,s]=P.useState([]),[l,d]=P.useState({}),[h,f]=P.useState(null),[p,g]=P.useState(!1),[j,v]=P.useState(!1),[b,w]=P.useState(""),S=P.useRef(null),_=P.useRef(null),{data:E,isLoading:D}=Ye({queryKey:["my-profile"],queryFn:async()=>{const{data:$}=await xe.get("/profile");return $}}),{data:W}=Ye({queryKey:["settings","countries"],queryFn:async()=>{const{data:$}=await xe.get("/settings/countries");return $}}),{data:K}=Ye({queryKey:["settings","regions",n.countryId],queryFn:async()=>{const $=n.countryId?{countryId:n.countryId}:{},{data:de}=await xe.get("/settings/regions",{params:$});return de}}),{data:B}=Ye({queryKey:["settings","cities",n.regionId],queryFn:async()=>{const $=n.regionId?{regionId:n.regionId}:{},{data:de}=await xe.get("/settings/cities",{params:$});return de},enabled:!!n.regionId}),{data:F}=Ye({queryKey:["location-photos"],queryFn:async()=>{const{data:$}=await xe.get("/profile/location-photos");return $}});P.useEffect(()=>{E&&(i({nameEn:E.nameEn||E.name||"",nameAr:E.nameAr||"",email:E.email||"",mobile:E.mobile||"",phone:E.phone||"",fullAddress:E.fullAddress||E.address||"",postalCode:E.postalCode||"",countryId:E.countryId||"",regionId:E.regionId||"",cityId:E.cityId||"",latitude:E.latitude?.toString()||"",longitude:E.longitude?.toString()||"",deliveryWindowStart:E.deliveryWindowStart||"",deliveryWindowEnd:E.deliveryWindowEnd||"",preferredDeliveryTime:E.preferredDeliveryTime||""}),E.contacts?.length>0&&s(E.contacts),E.logoUrl&&f(E.logoUrl))},[E]);const H=ft({mutationFn:async $=>(await xe.put("/profile",$)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["my-profile"]}),t.success("Profile updated successfully")},onError:$=>{const de=Er($);t.error(de?.userMessage||"Failed to save profile")}}),I=()=>{const $={};return n.nameEn?.trim()||($.nameEn="English name is required"),n.mobile?.trim()?/^(\+966|05)[0-9]{8,9}$/.test(n.mobile.replace(/\s/g,""))||($.mobile="Invalid Saudi mobile format (+9665xxxxxxxx or 05xxxxxxxx)"):$.mobile="Mobile number is required",n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&($.email="Invalid email format"),n.fullAddress?.trim()||($.fullAddress="Address is required"),d($),Object.keys($).length===0},R=()=>{if(!I()){t.error("Please fix the validation errors");return}H.mutate({...n,contacts:a})},Y=async $=>{const de=$.target.files?.[0];if(!de)return;if(de.size>5*1024*1024){t.error("Logo must be less than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(de.type)){t.error("Only PNG and JPG images are allowed");return}g(!0);const Z=new FormData;Z.append("logo",de);try{const{data:ge}=await xe.post("/profile/logo",Z,{headers:{"Content-Type":"multipart/form-data"}});f(ge.logoUrl),e.invalidateQueries({queryKey:["my-profile"]}),t.success("Logo uploaded successfully")}catch(ge){const oe=Er(ge);t.error(oe?.userMessage||"Failed to upload logo")}finally{g(!1)}},G=async()=>{try{await xe.delete("/profile/logo"),f(null),e.invalidateQueries({queryKey:["my-profile"]}),t.success("Logo removed")}catch($){const de=Er($);t.error(de?.userMessage||"Failed to remove logo")}},ae=()=>{s([...a,{name:"",title:"",email:"",phone:""}])},se=($,de,Z)=>{const ge=[...a];ge[$]={...ge[$],[de]:Z},s(ge)},Ne=$=>{s(a.filter((de,Z)=>Z!==$))},z=($,de)=>{i({...n,latitude:$.toFixed(6),longitude:de.toFixed(6)})},ie=async $=>{const de=$.target.files?.[0];if(!de)return;if(de.size>5*1024*1024){t.error("Photo must be less than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(de.type)){t.error("Only PNG and JPG images are allowed");return}v(!0);const Z=new FormData;Z.append("photo",de),Z.append("caption",b);try{await xe.post("/profile/location-photos",Z,{headers:{"Content-Type":"multipart/form-data"}}),e.invalidateQueries({queryKey:["location-photos"]}),w(""),t.success("Location photo uploaded")}catch(ge){const oe=Er(ge);t.error(oe?.userMessage||"Failed to upload photo")}finally{v(!1),_.current&&(_.current.value="")}},q=async $=>{try{await xe.delete(`/profile/location-photos/${$}`),e.invalidateQueries({queryKey:["location-photos"]}),t.success("Photo deleted")}catch(de){const Z=Er(de);t.error(Z?.userMessage||"Failed to delete photo")}};if(D)return r.jsx("div",{style:{padding:"2rem"},children:r.jsx("div",{className:"card skeleton",style:{height:"400px"}})});const re={background:"white",border:"1px solid var(--border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},ue={display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)",fontSize:"1rem",fontWeight:600,color:"#0d9488"},Q={display:"block",marginBottom:"0.375rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},V={width:"100%",padding:"0.625rem 0.875rem",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"0.875rem",transition:"border-color 0.15s ease"},ne={...V,borderColor:"var(--danger)"};return r.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Profile"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Manage your company information and contact details"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:R,disabled:H.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(eg,{size:18}),H.isPending?"Saving...":"Save Changes"]})]}),r.jsxs("div",{style:re,children:[r.jsxs("div",{style:ue,children:[r.jsx(Zw,{size:20}),"Company Information"]}),r.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{flex:"0 0 140px"},children:[r.jsx("div",{style:{width:"140px",height:"140px",borderRadius:"12px",border:"2px dashed var(--border)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f8fafc",overflow:"hidden",position:"relative"},children:h?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:h,alt:"Logo",style:{width:"100%",height:"100%",objectFit:"contain"}}),r.jsx("button",{onClick:G,style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0,0,0,0.5)",border:"none",borderRadius:"50%",padding:"4px",cursor:"pointer",color:"white"},children:r.jsx(hn,{size:14})})]}):r.jsxs(r.Fragment,{children:[r.jsx(v5,{size:32,style:{color:"var(--text-muted)",marginBottom:"0.5rem"}}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Company Logo"})]})}),r.jsx("input",{type:"file",ref:S,onChange:Y,accept:"image/png,image/jpeg,image/jpg",style:{display:"none"}}),r.jsxs("button",{onClick:()=>S.current?.click(),disabled:p,style:{width:"100%",marginTop:"0.5rem",padding:"0.5rem",fontSize:"0.75rem",border:"1px solid var(--border)",borderRadius:"6px",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[r.jsx(vm,{size:14}),p?"Uploading...":"Upload Logo"]})]}),r.jsx("div",{style:{flex:1},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Name (English) *"}),r.jsx("input",{type:"text",value:n.nameEn,onChange:$=>i({...n,nameEn:$.target.value}),style:l.nameEn?ne:V,placeholder:"Company name in English"}),l.nameEn&&r.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[r.jsx(In,{size:12})," ",l.nameEn]})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Name (Arabic)"}),r.jsx("input",{type:"text",value:n.nameAr,onChange:$=>i({...n,nameAr:$.target.value}),style:V,placeholder:"  ",dir:"rtl"})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Email"}),r.jsx("input",{type:"email",value:n.email,onChange:$=>i({...n,email:$.target.value}),style:l.email?ne:V,placeholder:"company@example.com"}),l.email&&r.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[r.jsx(In,{size:12})," ",l.email]})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Mobile *"}),r.jsx("input",{type:"tel",value:n.mobile,onChange:$=>i({...n,mobile:$.target.value}),style:l.mobile?ne:V,placeholder:"+966 5x xxx xxxx"}),l.mobile&&r.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[r.jsx(In,{size:12})," ",l.mobile]})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Phone (Landline)"}),r.jsx("input",{type:"tel",value:n.phone,onChange:$=>i({...n,phone:$.target.value}),style:V,placeholder:"+966 1x xxx xxxx"})]})]})})]})]}),r.jsxs("div",{style:re,children:[r.jsxs("div",{style:ue,children:[r.jsx(Fs,{size:20}),"Delivery Address"]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Full Address *"}),r.jsx("textarea",{value:n.fullAddress,onChange:$=>i({...n,fullAddress:$.target.value}),style:{...V,minHeight:"80px",resize:"vertical"},placeholder:"Complete delivery address"}),l.fullAddress&&r.jsxs("span",{style:{color:"var(--danger)",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[r.jsx(In,{size:12})," ",l.fullAddress]})]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Country"}),r.jsxs("select",{value:n.countryId,onChange:$=>i({...n,countryId:$.target.value,regionId:"",cityId:""}),style:V,children:[r.jsx("option",{value:"",children:"Select Country"}),W?.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Region"}),r.jsxs("select",{value:n.regionId,onChange:$=>i({...n,regionId:$.target.value,cityId:""}),style:V,disabled:!n.countryId,children:[r.jsx("option",{value:"",children:"Select Region"}),K?.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"City"}),r.jsxs("select",{value:n.cityId,onChange:$=>i({...n,cityId:$.target.value}),style:V,disabled:!n.regionId,children:[r.jsx("option",{value:"",children:"Select City"}),B?.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Postal Code"}),r.jsx("input",{type:"text",value:n.postalCode,onChange:$=>i({...n,postalCode:$.target.value}),style:V,placeholder:"12345"})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"GPS Latitude"}),r.jsx("input",{type:"text",value:n.latitude,onChange:$=>i({...n,latitude:$.target.value}),style:V,placeholder:"24.7136"})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"GPS Longitude"}),r.jsx("input",{type:"text",value:n.longitude,onChange:$=>i({...n,longitude:$.target.value}),style:V,placeholder:"46.6753"})]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:Q,children:"Select Location on Map"}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem"},children:"Click on the map to set your delivery location coordinates"}),r.jsx(Lpe,{latitude:n.latitude?parseFloat(n.latitude):null,longitude:n.longitude?parseFloat(n.longitude):null,onLocationSelect:z,height:"300px"})]})]}),r.jsxs("div",{style:re,children:[r.jsxs("div",{style:ue,children:[r.jsx(Kv,{size:20}),"Location Photos"]}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"1rem"},children:"Upload photos of your delivery location to help drivers identify your building"}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",alignItems:"flex-end"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:Q,children:"Caption (optional)"}),r.jsx("input",{type:"text",value:b,onChange:$=>w($.target.value),style:V,placeholder:"e.g., Front entrance, Loading dock"})]}),r.jsx("input",{type:"file",ref:_,onChange:ie,accept:"image/png,image/jpeg,image/jpg",style:{display:"none"}}),r.jsxs("button",{onClick:()=>_.current?.click(),disabled:j,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",border:"1px solid #0d9488",borderRadius:"8px",background:"#0d9488",color:"white",cursor:"pointer",fontSize:"0.875rem",whiteSpace:"nowrap"},children:[r.jsx(vm,{size:16}),j?"Uploading...":"Upload Photo"]})]}),F&&F.length>0?r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem"},children:F.map($=>r.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border)",background:"#f8fafc"},children:[r.jsx("img",{src:$.photoUrl,alt:$.caption||"Location photo",style:{width:"100%",height:"150px",objectFit:"cover"}}),r.jsx("button",{onClick:()=>q($.id),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.5)",border:"none",borderRadius:"50%",padding:"6px",cursor:"pointer",color:"white"},children:r.jsx(mi,{size:14})}),$.caption&&r.jsx("div",{style:{padding:"0.5rem",fontSize:"0.75rem",color:"var(--text-secondary)",background:"white",borderTop:"1px solid var(--border)"},children:$.caption})]},$.id))}):r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)",background:"#f8fafc",borderRadius:"8px",border:"1px dashed var(--border)"},children:[r.jsx(v5,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),r.jsx("p",{children:"No location photos uploaded yet"})]})]}),r.jsxs("div",{style:re,children:[r.jsxs("div",{style:ue,children:[r.jsx(hu,{size:20}),"Delivery Preferences"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Delivery Window Start"}),r.jsx("input",{type:"time",value:n.deliveryWindowStart,onChange:$=>i({...n,deliveryWindowStart:$.target.value}),style:V})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Delivery Window End"}),r.jsx("input",{type:"time",value:n.deliveryWindowEnd,onChange:$=>i({...n,deliveryWindowEnd:$.target.value}),style:V})]}),r.jsxs("div",{children:[r.jsx("label",{style:Q,children:"Preferred Delivery Time"}),r.jsx("input",{type:"time",value:n.preferredDeliveryTime,onChange:$=>i({...n,preferredDeliveryTime:$.target.value}),style:V})]})]})]}),r.jsxs("div",{style:re,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:600,color:"#0d9488"},children:[r.jsx(Vl,{size:20}),"Contact Persons"]}),r.jsxs("button",{onClick:ae,style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",fontSize:"0.875rem",border:"1px solid var(--border)",borderRadius:"6px",background:"white",cursor:"pointer"},children:[r.jsx(Lr,{size:16}),"Add Contact"]})]}),a.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:'No contact persons added. Click "Add Contact" to add one.'}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a.map(($,de)=>r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:"0.75rem",padding:"1rem",background:"#f8fafc",borderRadius:"8px",alignItems:"end"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{...Q,fontSize:"0.75rem"},children:"Name"}),r.jsx("input",{type:"text",value:$.name,onChange:Z=>se(de,"name",Z.target.value),style:V,placeholder:"Contact name"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{...Q,fontSize:"0.75rem"},children:"Title"}),r.jsx("input",{type:"text",value:$.title,onChange:Z=>se(de,"title",Z.target.value),style:V,placeholder:"Job title"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{...Q,fontSize:"0.75rem"},children:"Email"}),r.jsx("input",{type:"email",value:$.email,onChange:Z=>se(de,"email",Z.target.value),style:V,placeholder:"email@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{...Q,fontSize:"0.75rem"},children:"Phone"}),r.jsx("input",{type:"tel",value:$.phone,onChange:Z=>se(de,"phone",Z.target.value),style:V,placeholder:"+966 5x xxx xxxx"})]}),r.jsx("button",{onClick:()=>Ne(de),style:{padding:"0.625rem",border:"none",borderRadius:"6px",background:"#fee2e2",color:"var(--danger)",cursor:"pointer"},children:r.jsx(mi,{size:16})})]},de))})]}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",paddingBottom:"2rem"},children:r.jsxs("button",{className:"btn btn-primary",onClick:R,disabled:H.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(eg,{size:18}),H.isPending?"Saving...":"Save Changes"]})})]})}function Ipe(){const{user:e}=bl(),t=Cn(),n=Tr(),[i,a]=P.useState(0),[s,l]=P.useState(null),[d,h]=P.useState(""),[f,p]=P.useState(1),[g,j]=P.useState(10),[v,b]=P.useState(""),[w,S]=P.useState(""),[_,E]=P.useState("calendar"),[D,W]=P.useState(null),[K,B]=P.useState(0),F=Fl(Xv(new Date),i*7),H=Fl(F,13),{data:I,isLoading:R}=Ye({queryKey:["portal-capacity-calendar",F.toISOString()],queryFn:async()=>{const{data:ne}=await xe.get("/portal/capacity/calendar",{params:{startDate:F.toISOString(),endDate:H.toISOString()}});return ne}}),{data:Y,isLoading:G}=Ye({queryKey:["portal-available-products"],queryFn:async()=>{const{data:ne}=await xe.get("/portal/products/available");return ne}}),ae=ft({mutationFn:async ne=>{const{data:$}=await xe.post("/portal/reservations",ne);return $},onSuccess:ne=>{W(ne),B(ne.expiresInSeconds||900),E("confirm");const $=setInterval(()=>{B(de=>de<=1?(clearInterval($),0):de-1)},1e3)}}),se=ft({mutationFn:async()=>{const{data:ne}=await xe.post(`/portal/reservations/${D.id}/confirm`,{hospitalOrderReference:v,specialNotes:w});return ne},onSuccess:ne=>{n.invalidateQueries({queryKey:["portal-capacity-calendar"]}),n.invalidateQueries({queryKey:["portal-orders"]}),t(`/portal/orders/${ne.order.id}/journey`)}}),Ne=Y?.find(ne=>ne.id===d),z=Ne?Ne.dispensingMinutesPerDose*f:15*f,ie=ne=>{ne.availableMinutes<=0||(l(ne),E("details"))},q=()=>{!s||!d||ae.mutate({productId:d,windowId:s.id,requestedDate:s.date,requestedActivity:g,numberOfDoses:f,hospitalOrderReference:v})},re=()=>{se.mutate()},ue=ne=>{const $=Math.floor(ne/60),de=ne%60;return`${$}:${de.toString().padStart(2,"0")}`},Q=ne=>ne>=90?"var(--danger)":ne>=70?"var(--warning)":"var(--success)",V=(I||[]).reduce((ne,$)=>{const de=Ke(new Date($.date),"yyyy-MM-dd");return ne[de]||(ne[de]=[]),ne[de].push($),ne},{});return R||G?r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsx("div",{className:"card skeleton",style:{height:"80px",marginBottom:"1rem"}}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem"},children:Array.from({length:14}).map((ne,$)=>r.jsx("div",{className:"card skeleton",style:{height:"120px"}},$))})]}):r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Book Capacity"}),r.jsx("p",{style:{color:"var(--text-muted)"},children:e?.customerName&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Fo,{size:16})," Ordering as: ",e.customerName]})})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>a(ne=>ne-1),disabled:i===0,children:r.jsx(Yp,{size:18})}),r.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>a(0),children:"Today"}),r.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>a(ne=>ne+1),children:r.jsx(uu,{size:18})})]})]}),_==="calendar"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Wi,{size:20,style:{color:"var(--primary)"}}),r.jsxs("span",{style:{fontWeight:500},children:[Ke(F,"MMM d")," - ",Ke(H,"MMM d, yyyy")]}),r.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"1rem",fontSize:"0.85rem"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:"var(--success)"}}),"Available"]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:"var(--warning)"}}),"Limited"]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:"var(--danger)"}}),"Full"]})]})]})}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:Array.from({length:14}).map((ne,$)=>{const de=Fl(F,$),Z=Ke(de,"yyyy-MM-dd"),ge=V[Z]||[],oe=Ke(de,"yyyy-MM-dd")===Ke(new Date,"yyyy-MM-dd"),X=de<Xv(new Date);return r.jsxs("div",{className:"card",style:{padding:"0.75rem",opacity:X?.5:1,border:oe?"2px solid var(--primary)":void 0},children:[r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem",textAlign:"center"},children:[Ke(de,"EEE"),r.jsx("div",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)"},children:Ke(de,"d")})]}),ge.length===0?r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"center",padding:"1rem 0"},children:"No slots"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:ge.map(_e=>r.jsxs("button",{onClick:()=>!X&&ie(_e),disabled:X||_e.availableMinutes<=0,style:{padding:"0.5rem",borderRadius:"0.25rem",border:"none",background:_e.availableMinutes<=0?"var(--bg-muted)":"var(--bg-secondary)",cursor:X||_e.availableMinutes<=0?"not-allowed":"pointer",textAlign:"left",fontSize:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[r.jsx(Dt,{size:12}),Ke(new Date(_e.startTime),"HH:mm")," - ",Ke(new Date(_e.endTime),"HH:mm")]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("span",{style:{color:Q(_e.utilizationPercent)},children:[_e.availableMinutes," min"]}),r.jsx("div",{style:{width:"30px",height:"4px",background:"var(--bg-muted)",borderRadius:"2px",overflow:"hidden"},children:r.jsx("div",{style:{width:`${_e.utilizationPercent}%`,height:"100%",background:Q(_e.utilizationPercent)}})})]})]},_e.id))})]},$)})})]}),_==="details"&&s&&r.jsxs("div",{className:"card",style:{padding:"1.5rem",maxWidth:"600px",margin:"0 auto"},children:[r.jsxs("button",{className:"btn btn-ghost",onClick:()=>{E("calendar"),l(null)},style:{marginBottom:"1rem"},children:[r.jsx(Yp,{size:18})," Back to Calendar"]}),r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1rem"},children:"Reserve Capacity"}),r.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(Wi,{size:18,style:{color:"var(--primary)"}}),r.jsx("strong",{children:Ke(new Date(s.date),"EEEE, MMMM d, yyyy")})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Dt,{size:18,style:{color:"var(--primary)"}}),Ke(new Date(s.startTime),"HH:mm")," - ",Ke(new Date(s.endTime),"HH:mm"),r.jsxs("span",{style:{marginLeft:"auto",color:Q(s.utilizationPercent)},children:[s.availableMinutes," min available"]})]})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"form-label",children:"Product *"}),r.jsxs("select",{className:"form-control",value:d,onChange:ne=>h(ne.target.value),children:[r.jsx("option",{value:"",children:"Select a product..."}),Y?.map(ne=>r.jsxs("option",{value:ne.id,children:[ne.name," (",ne.code,") - ",ne.dispensingMinutesPerDose," min/dose"]},ne.id))]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Number of Doses *"}),r.jsx("input",{type:"number",className:"form-control",value:f,onChange:ne=>p(Math.max(1,parseInt(ne.target.value)||1)),min:1})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Requested Activity (mCi) *"}),r.jsx("input",{type:"number",className:"form-control",value:g,onChange:ne=>j(parseFloat(ne.target.value)||0),step:"0.1"})]})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"form-label",children:"Hospital Order Reference"}),r.jsx("input",{type:"text",className:"form-control",value:v,onChange:ne=>b(ne.target.value),placeholder:"Your internal reference number (optional)"}),r.jsx("small",{style:{color:"var(--text-muted)"},children:"This is used as a pseudonym - no patient identifiers"})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[r.jsx("label",{className:"form-label",children:"Special Notes"}),r.jsx("textarea",{className:"form-control",value:w,onChange:ne=>S(ne.target.value),rows:2,placeholder:"Any special requirements or notes..."})]}),d&&r.jsxs("div",{style:{background:"var(--bg-muted)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:500},children:[r.jsx(Qv,{size:18}),"Estimated Time: ",z," minutes"]}),z>s.availableMinutes&&r.jsxs("div",{style:{color:"var(--danger)",marginTop:"0.5rem",fontSize:"0.85rem"},children:[r.jsx(vr,{size:16,style:{marginRight:"0.25rem"}}),"Not enough capacity available in this window"]})]}),r.jsx("button",{className:"btn btn-primary",onClick:q,disabled:!d||z>s.availableMinutes||ae.isPending,style:{width:"100%"},children:ae.isPending?"Reserving...":"Reserve Capacity"})]}),_==="confirm"&&D&&r.jsxs("div",{className:"card",style:{padding:"1.5rem",maxWidth:"600px",margin:"0 auto"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[r.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--success-bg)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:r.jsx(yl,{size:32,style:{color:"var(--success)"}})}),r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Capacity Reserved!"}),r.jsxs("p",{style:{color:"var(--text-muted)"},children:["Reservation: ",D.reservationNumber]})]}),r.jsxs("div",{style:{background:K<120?"var(--danger-bg)":"var(--warning-bg)",padding:"1rem",borderRadius:"0.5rem",textAlign:"center",marginBottom:"1.5rem"},children:[r.jsx(Qv,{size:24,style:{marginBottom:"0.5rem",color:K<120?"var(--danger)":"var(--warning)"}}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:ue(K)}),r.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:"Confirm your order before the reservation expires"})]}),r.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:500,marginBottom:"0.75rem"},children:"Order Summary"}),r.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.9rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Product:"}),r.jsx("span",{children:D.product?.name})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Doses:"}),r.jsx("span",{children:D.numberOfDoses})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Activity:"}),r.jsxs("span",{children:[D.requestedActivity," mCi"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Delivery:"}),r.jsx("span",{children:Ke(new Date(D.requestedDate),"MMM d, yyyy")})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Reserved Time:"}),r.jsxs("span",{children:[D.estimatedMinutes," minutes"]})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{E("calendar"),W(null)},style:{flex:1},children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:re,disabled:K===0||se.isPending,style:{flex:2},children:se.isPending?"Creating Order...":"Confirm & Create Order"})]})]})]})}const pD=[{id:"countries",label:"Countries",icon:vH},{id:"cities",label:"Cities",icon:Fs},{id:"regions",label:"Regions",icon:HH},{id:"categories",label:"Categories",icon:kO},{id:"couriers",label:"Couriers",icon:fn},{id:"vehicles",label:"Vehicles",icon:SO},{id:"dose-units",label:"Dose Units",icon:Wl},{id:"product-types",label:"Product Types",icon:Sr},{id:"production-methods",label:"Production Methods",icon:Jw},{id:"currencies",label:"Currencies",icon:ax},{id:"attachments",label:"Attachment Types",icon:ym},{id:"notifications",label:"Notifications",icon:Rh,link:"/settings/notifications"}];function zpe(){const[e,t]=P.useState("countries"),[n,i]=P.useState(!1),[a,s]=P.useState(null),[l,d]=P.useState({}),h=Tr(),f=Cn(),{data:p}=Ye({queryKey:["settings","countries"],queryFn:async()=>{const{data:z}=await xe.get("/settings/countries");return z}}),{data:g}=Ye({queryKey:["settings","cities"],queryFn:async()=>{const{data:z}=await xe.get("/settings/cities");return z}}),{data:j}=Ye({queryKey:["settings","regions"],queryFn:async()=>{const{data:z}=await xe.get("/settings/regions");return z}}),{data:v}=Ye({queryKey:["settings","categories"],queryFn:async()=>{const{data:z}=await xe.get("/settings/categories");return z}}),{data:b}=Ye({queryKey:["settings","couriers"],queryFn:async()=>{const{data:z}=await xe.get("/settings/couriers");return z}}),{data:w}=Ye({queryKey:["settings","vehicles"],queryFn:async()=>{const{data:z}=await xe.get("/settings/vehicles");return z}}),{data:S}=Ye({queryKey:["settings","dose-units"],queryFn:async()=>{const{data:z}=await xe.get("/settings/dose-units");return z}}),{data:_}=Ye({queryKey:["settings","product-types"],queryFn:async()=>{const{data:z}=await xe.get("/settings/product-types");return z}}),{data:E}=Ye({queryKey:["settings","production-methods"],queryFn:async()=>{const{data:z}=await xe.get("/settings/production-methods");return z}}),{data:D}=Ye({queryKey:["settings","currencies"],queryFn:async()=>{const{data:z}=await xe.get("/settings/currencies");return z}}),W=ft({mutationFn:async({endpoint:z,data:ie})=>xe.post(`/settings/${z}`,ie),onSuccess:()=>{h.invalidateQueries({queryKey:["settings",e]}),i(!1),d({})}}),K=ft({mutationFn:async({endpoint:z,id:ie,data:q})=>xe.put(`/settings/${z}/${ie}`,q),onSuccess:()=>{h.invalidateQueries({queryKey:["settings",e]}),i(!1),s(null),d({})}}),B=ft({mutationFn:async({endpoint:z,id:ie})=>xe.delete(`/settings/${z}/${ie}`),onSuccess:()=>{h.invalidateQueries({queryKey:["settings",e]})}}),F=()=>{s(null),d({}),i(!0)},H=z=>{s(z),d(z),i(!0)},I=async z=>{confirm("Are you sure you want to delete this item?")&&B.mutate({endpoint:e,id:z})},R=()=>{a?K.mutate({endpoint:e,id:a.id,data:l}):W.mutate({endpoint:e,data:l})},Y=()=>{switch(e){case"countries":return p||[];case"cities":return g||[];case"regions":return j||[];case"categories":return v||[];case"couriers":return b||[];case"vehicles":return w||[];case"dose-units":return S||[];case"product-types":return _||[];case"production-methods":return E||[];case"currencies":return D||[];default:return[]}},G=()=>{const z=Y();switch(e){case"countries":return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Name (Arabic)"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:ie.code}),r.jsx("td",{children:ie.name}),r.jsx("td",{dir:"rtl",children:ie.nameAr||"-"}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"cities":return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Name (Arabic)"}),r.jsx("th",{children:"Region"}),r.jsx("th",{children:"Country"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:ie.code}),r.jsx("td",{children:ie.name}),r.jsx("td",{dir:"rtl",children:ie.nameAr||"-"}),r.jsx("td",{children:ie.region?.name||"-"}),r.jsx("td",{children:ie.country?.name||"-"}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"regions":return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Name (Arabic)"}),r.jsx("th",{children:"Country"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:ie.code}),r.jsx("td",{children:ie.name}),r.jsx("td",{dir:"rtl",children:ie.nameAr||"-"}),r.jsx("td",{children:ie.country?.name||"-"}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"couriers":return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Vehicles"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:ie.code}),r.jsx("td",{children:ie.name}),r.jsx("td",{children:ie.phone||"-"}),r.jsx("td",{children:ie.email||"-"}),r.jsx("td",{children:ie.vehicles?.length||0}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"vehicles":return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Plate Number"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Model"}),r.jsx("th",{children:"Capacity"}),r.jsx("th",{children:"Courier"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:ie.plateNumber}),r.jsx("td",{children:ie.vehicleType}),r.jsx("td",{children:ie.model||"-"}),r.jsx("td",{children:ie.capacity||"-"}),r.jsx("td",{children:ie.courier?.name||"-"}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"currencies":return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Symbol"}),r.jsx("th",{children:"Exchange Rate"}),r.jsx("th",{children:"Default"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:600},children:ie.code}),r.jsx("td",{children:ie.name}),r.jsx("td",{style:{fontSize:"1.125rem"},children:ie.symbol}),r.jsx("td",{children:ie.exchangeRate.toFixed(4)}),r.jsx("td",{children:ie.isDefault&&r.jsx("span",{className:"badge badge-info",children:"Default"})}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),!ie.isDefault&&r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:7,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]});case"attachments":return r.jsxs("div",{style:{padding:"3rem",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:[r.jsx(ym,{size:48,style:{color:"var(--primary)",marginBottom:"1rem"}}),r.jsx("h3",{style:{margin:"0 0 0.5rem"},children:"Attachment Type Settings"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:"Configure allowed file types, extensions, and size limits for attachments."}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>f("/settings/attachments"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:["Manage Attachment Types",r.jsx(Zp,{size:16})]})]});default:return r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(ie=>r.jsxs("tr",{children:[r.jsx("td",{style:{fontFamily:"monospace",fontWeight:500},children:ie.code}),r.jsx("td",{children:ie.name}),r.jsx("td",{children:ie.description||ie.symbol||"-"}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${ie.isActive?"success":"default"}`,children:ie.isActive?"Active":"Inactive"})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(ie),title:"Edit",children:r.jsx(Ku,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>I(ie.id),title:"Delete",children:r.jsx(mi,{size:14})})]})})]},ie.id)),z.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:"No records found"})})]})]})}},ae=()=>{switch(e){case"countries":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value.toUpperCase()}),placeholder:"e.g., SA, AE, US",maxLength:3})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"e.g., Saudi Arabia"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (Arabic)"}),r.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:l.nameAr||"",onChange:z=>d({...l,nameAr:z.target.value}),placeholder:"e.g.,   "})]})]});case"cities":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Country *"}),r.jsxs("select",{className:"form-select",value:l.countryId||"",onChange:z=>d({...l,countryId:z.target.value,regionId:""}),children:[r.jsx("option",{value:"",children:"Select Country"}),p?.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Region *"}),r.jsxs("select",{className:"form-select",value:l.regionId||"",onChange:z=>d({...l,regionId:z.target.value}),children:[r.jsx("option",{value:"",children:"Select Region"}),j?.filter(z=>z.countryId===l.countryId).map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value.toUpperCase()}),placeholder:"e.g., JED, RUH"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"e.g., Jeddah"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (Arabic)"}),r.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:l.nameAr||"",onChange:z=>d({...l,nameAr:z.target.value}),placeholder:"e.g., "})]})]});case"regions":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Country *"}),r.jsxs("select",{className:"form-select",value:l.countryId||"",onChange:z=>d({...l,countryId:z.target.value}),children:[r.jsx("option",{value:"",children:"Select Country"}),p?.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value.toUpperCase()}),placeholder:"e.g., WEST, CENT"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"e.g., Western Region"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (Arabic)"}),r.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:l.nameAr||"",onChange:z=>d({...l,nameAr:z.target.value}),placeholder:"e.g.,  "})]})]});case"couriers":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value.toUpperCase()}),placeholder:"e.g., COR001"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"e.g., Express Medical Courier"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Phone"}),r.jsx("input",{type:"text",className:"form-input",value:l.phone||"",onChange:z=>d({...l,phone:z.target.value}),placeholder:"e.g., +966 12 345 6789"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:l.email||"",onChange:z=>d({...l,email:z.target.value}),placeholder:"e.g., courier@example.com"})]})]});case"vehicles":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Courier"}),r.jsxs("select",{className:"form-select",value:l.courierId||"",onChange:z=>d({...l,courierId:z.target.value||null}),children:[r.jsx("option",{value:"",children:"No Courier"}),b?.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Plate Number *"}),r.jsx("input",{type:"text",className:"form-input",value:l.plateNumber||"",onChange:z=>d({...l,plateNumber:z.target.value.toUpperCase()}),placeholder:"e.g., ABC 1234"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Vehicle Type *"}),r.jsxs("select",{className:"form-select",value:l.vehicleType||"",onChange:z=>d({...l,vehicleType:z.target.value}),children:[r.jsx("option",{value:"",children:"Select Type"}),r.jsx("option",{value:"Van",children:"Van"}),r.jsx("option",{value:"Car",children:"Car"}),r.jsx("option",{value:"Truck",children:"Truck"}),r.jsx("option",{value:"Motorcycle",children:"Motorcycle"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Model"}),r.jsx("input",{type:"text",className:"form-input",value:l.model||"",onChange:z=>d({...l,model:z.target.value}),placeholder:"e.g., Toyota Hiace 2024"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Capacity"}),r.jsx("input",{type:"text",className:"form-input",value:l.capacity||"",onChange:z=>d({...l,capacity:z.target.value}),placeholder:"e.g., 50 packages"})]})]});case"currencies":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value.toUpperCase()}),placeholder:"e.g., SAR, USD, EUR",maxLength:3})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"e.g., Saudi Riyal"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Symbol *"}),r.jsx("input",{type:"text",className:"form-input",value:l.symbol||"",onChange:z=>d({...l,symbol:z.target.value}),placeholder:"e.g., ., $, ",maxLength:5})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Exchange Rate (to SAR) *"}),r.jsx("input",{type:"number",className:"form-input",value:l.exchangeRate||1,onChange:z=>d({...l,exchangeRate:parseFloat(z.target.value)}),step:"0.0001",min:"0"}),r.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Rate relative to SAR (SAR = 1.0000)"})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:l.isDefault||!1,onChange:z=>d({...l,isDefault:z.target.checked})}),r.jsx("span",{className:"form-label",style:{marginBottom:0},children:"Set as default currency"})]})})]});case"dose-units":return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value}),placeholder:"e.g., mCi, MBq, GBq"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"e.g., Millicurie"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Symbol *"}),r.jsx("input",{type:"text",className:"form-input",value:l.symbol||"",onChange:z=>d({...l,symbol:z.target.value}),placeholder:"e.g., mCi"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("input",{type:"text",className:"form-input",value:l.description||"",onChange:z=>d({...l,description:z.target.value}),placeholder:"e.g., Unit of radioactivity"})]})]});default:return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:l.code||"",onChange:z=>d({...l,code:z.target.value.toUpperCase()}),placeholder:"Enter code"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:l.name||"",onChange:z=>d({...l,name:z.target.value}),placeholder:"Enter name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (Arabic)"}),r.jsx("input",{type:"text",className:"form-input",dir:"rtl",value:l.nameAr||"",onChange:z=>d({...l,nameAr:z.target.value}),placeholder:"Enter Arabic name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{className:"form-input",value:l.description||"",onChange:z=>d({...l,description:z.target.value}),placeholder:"Enter description",rows:2})]})]})}},se=pD.find(z=>z.id===e),Ne=se?.icon||nS;return r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Settings"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Configure lookup tables and system master data"})]})}),r.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[r.jsx("div",{className:"card",style:{width:"220px",padding:"0.5rem",flexShrink:0},children:r.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:pD.map(z=>{const ie=z.icon,q=e===z.id,re=z;return r.jsxs("button",{onClick:()=>{re.link?f(re.link):t(z.id)},className:q?"btn btn-primary":"btn btn-secondary",style:{justifyContent:"flex-start",width:"100%",fontWeight:q?600:400},children:[r.jsx(ie,{size:16}),z.label,re.link&&r.jsx(Zp,{size:12,style:{marginLeft:"auto"}})]},z.id)})})}),r.jsxs("div",{className:"card",style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:[r.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ne,{size:18}),se?.label]}),r.jsxs("button",{className:"btn btn-primary",onClick:F,children:[r.jsx(Lr,{size:18}),"Add New"]})]}),r.jsx("div",{style:{overflow:"auto"},children:G()})]})]}),n&&r.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:r.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),style:{maxWidth:"500px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{style:{fontWeight:600,margin:0,fontSize:"1.125rem"},children:[a?"Edit":"Add New"," ",se?.label.replace(/ies$/,"y").replace(/s$/,"")]}),r.jsx("button",{className:"btn btn-sm",onClick:()=>i(!1),style:{padding:"0.375rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:r.jsx(hn,{size:18})})]}),r.jsxs("div",{className:"modal-body",children:[ae(),a&&r.jsx("div",{className:"form-group",style:{marginTop:"1.25rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"0.75rem 1rem",background:l.isActive!==!1?"rgba(34, 197, 94, 0.08)":"rgba(239, 68, 68, 0.08)",borderRadius:"var(--radius)",border:`1px solid ${l.isActive!==!1?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:[r.jsx("input",{type:"checkbox",checked:l.isActive!==!1,onChange:z=>d({...l,isActive:z.target.checked}),style:{width:"18px",height:"18px",cursor:"pointer"}}),r.jsx("span",{style:{fontWeight:500,color:l.isActive!==!1?"var(--success)":"var(--danger)"},children:l.isActive!==!1?"Active":"Inactive"})]})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:R,disabled:W.isPending||K.isPending,children:W.isPending||K.isPending?"Saving...":"Save"})]})]})})]})}function Bpe(){const e=Cn(),{data:t,isLoading:n,isError:i,error:a,refetch:s,isFetching:l}=Ye({queryKey:["dashboard-qc"],queryFn:async()=>{const{data:h}=await xe.get("/dashboard/qc");return h},refetchInterval:6e4});if(i)return r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(vr,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load QC dashboard"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return r.jsxs("div",{style:{padding:"2rem"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(h=>r.jsx("div",{className:"card skeleton",style:{height:"100px"}},h))}),r.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const d=[{id:"qc_failed",type:"error",icon:"qc_failed",title:"QC Failed Batches",count:t?.kpis?.qcFailed||0,linkTo:"/batches?status=FAILED_QC"}];return r.jsxs("div",{children:[r.jsx(Mm,{title:"QC Dashboard",subtitle:"Quality control queue and batch testing overview",lastRefreshed:t?.lastRefreshed?new Date(t.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:l,actions:r.jsx("button",{className:"btn btn-secondary",onClick:()=>e("/"),children:"Back to Overview"})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Awaiting Samples",value:t?.kpis?.awaitingSamples||0,icon:r.jsx(lo,{size:20}),color:"warning",linkTo:"/qc?status=QC_PENDING"}),r.jsx(lt,{title:"QC In Progress",value:t?.kpis?.qcInProgress||0,icon:r.jsx(Dt,{size:20}),color:"info",linkTo:"/qc?status=QC_IN_PROGRESS"}),r.jsx(lt,{title:"QC Failed",value:t?.kpis?.qcFailed||0,icon:r.jsx(pi,{size:20}),color:t?.kpis?.qcFailed>0?"danger":void 0,linkTo:"/batches?status=FAILED_QC"}),r.jsx(lt,{title:"Nearing Deadline",value:t?.kpis?.nearingDeadline||0,icon:r.jsx(vr,{size:20}),color:t?.kpis?.nearingDeadline>0?"warning":void 0,linkTo:"/qc?urgent=true"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsx(dd,{title:"QC Queue - Prioritized by Delivery Urgency",items:t?.queue||[],viewAllLink:"/qc",maxItems:10,icon:r.jsx(lo,{size:18,style:{color:"#d97706"}}),accentColor:"#d97706",emptyMessage:"No batches awaiting QC testing"}),r.jsx(Ag,{title:"QC Exceptions",items:d})]})]})}function Fpe(){const e=Cn(),{data:t,isLoading:n,isError:i,error:a,refetch:s,isFetching:l}=Ye({queryKey:["dashboard-qp"],queryFn:async()=>{const{data:h}=await xe.get("/dashboard/qp");return h},refetchInterval:6e4});if(i)return r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(In,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load QP dashboard"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return r.jsxs("div",{style:{padding:"2rem"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(h=>r.jsx("div",{className:"card skeleton",style:{height:"100px"}},h))}),r.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const d=[{id:"on_hold",type:"warning",icon:"on_hold",title:"On Hold Batches",count:t?.kpis?.onHold||0,linkTo:"/batches?status=ON_HOLD"},{id:"rejected",type:"error",icon:"qc_failed",title:"Rejected Batches",count:t?.kpis?.rejected||0,linkTo:"/batches?status=REJECTED"}];return r.jsxs("div",{children:[r.jsx(Mm,{title:"QP Release Dashboard",subtitle:"Batch release queue and QP approval overview",lastRefreshed:t?.lastRefreshed?new Date(t.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:l,actions:r.jsx("button",{className:"btn btn-secondary",onClick:()=>e("/"),children:"Back to Overview"})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Awaiting QP Release",value:t?.kpis?.awaitingQP||0,icon:r.jsx(Us,{size:20}),color:"warning",linkTo:"/release?status=QC_PASSED"}),r.jsx(lt,{title:"On Hold",value:t?.kpis?.onHold||0,icon:r.jsx(In,{size:20}),color:t?.kpis?.onHold>0?"warning":void 0,linkTo:"/batches?status=ON_HOLD"}),r.jsx(lt,{title:"Released Today",value:t?.kpis?.releasedToday||0,icon:r.jsx(yt,{size:20}),color:"success",linkTo:"/batches?status=RELEASED&today=true"}),r.jsx(lt,{title:"Rejected",value:t?.kpis?.rejected||0,icon:r.jsx(pi,{size:20}),color:t?.kpis?.rejected>0?"danger":void 0,linkTo:"/batches?status=REJECTED"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsx(dd,{title:"QP Release Queue",items:t?.queue||[],viewAllLink:"/release",maxItems:10,icon:r.jsx(Us,{size:18,style:{color:"#7c3aed"}}),accentColor:"#7c3aed",emptyMessage:"No batches awaiting QP release"}),r.jsx(Ag,{title:"Release Exceptions",items:d})]})]})}function qpe(){const e=Cn(),{data:t,isLoading:n,isError:i,error:a,refetch:s,isFetching:l}=Ye({queryKey:["dashboard-dispensing"],queryFn:async()=>{const{data:h}=await xe.get("/dashboard/dispensing");return h},refetchInterval:6e4});if(i)return r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(vr,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load Dispensing dashboard"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return r.jsxs("div",{style:{padding:"2rem"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4].map(h=>r.jsx("div",{className:"card skeleton",style:{height:"100px"}},h))}),r.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const d=[{id:"blocked",type:"warning",icon:"on_hold",title:"Blocked (Not Released)",count:t?.kpis?.blocked||0,linkTo:"/batches?status=ON_HOLD,FAILED_QC"}];return r.jsxs("div",{children:[r.jsx(Mm,{title:"Dispensing Dashboard",subtitle:"Dose dispensing queue and progress tracking",lastRefreshed:t?.lastRefreshed?new Date(t.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:l,actions:r.jsx("button",{className:"btn btn-secondary",onClick:()=>e("/"),children:"Back to Overview"})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Ready to Dispense",value:t?.kpis?.readyToDispense||0,icon:r.jsx(Sr,{size:20}),color:"success",linkTo:"/dispensing?ready=true"}),r.jsx(lt,{title:"Dispensing In Progress",value:t?.kpis?.dispensingInProgress||0,icon:r.jsx(fd,{size:20}),color:"info",linkTo:"/dispensing?status=DISPENSING_IN_PROGRESS"}),r.jsx(lt,{title:"Blocked",value:t?.kpis?.blocked||0,icon:r.jsx(iW,{size:20}),color:t?.kpis?.blocked>0?"warning":void 0,linkTo:"/batches?status=ON_HOLD,FAILED_QC"}),r.jsx(lt,{title:"Dispensed Today",value:t?.kpis?.dispensedToday||0,icon:r.jsx(yt,{size:20}),color:"success",linkTo:"/dispensing?dispensed=today"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsx(dd,{title:"Dispensing Queue",items:t?.queue||[],viewAllLink:"/dispensing",maxItems:10,icon:r.jsx(Sr,{size:18,style:{color:"#0d9488"}}),accentColor:"#0d9488",emptyMessage:"No batches ready for dispensing"}),r.jsx(Ag,{title:"Dispensing Exceptions",items:d})]})]})}function Upe(){const e=Cn(),{data:t,isLoading:n,isError:i,error:a,refetch:s,isFetching:l}=Ye({queryKey:["dashboard-logistics"],queryFn:async()=>{const{data:h}=await xe.get("/dashboard/logistics");return h},refetchInterval:6e4});if(i)return r.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center"},children:[r.jsx(vr,{size:48,style:{color:"var(--danger)",marginBottom:"1rem"}}),r.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Failed to load Logistics dashboard"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:a instanceof Error?a.message:"An error occurred."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>s(),children:"Try Again"})]});if(n)return r.jsxs("div",{style:{padding:"2rem"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[1,2,3,4,5].map(h=>r.jsx("div",{className:"card skeleton",style:{height:"100px"}},h))}),r.jsx("div",{className:"card skeleton",style:{height:"400px"}})]});const d=[{id:"delayed",type:"error",icon:"delay",title:"Delayed Shipments",count:t?.kpis?.delayed||0,linkTo:"/shipments?status=DELAYED"}];return r.jsxs("div",{children:[r.jsx(Mm,{title:"Logistics Dashboard",subtitle:"Shipment tracking and delivery management",lastRefreshed:t?.lastRefreshed?new Date(t.lastRefreshed):void 0,onRefresh:()=>s(),isRefreshing:l,actions:r.jsx("button",{className:"btn btn-secondary",onClick:()=>e("/"),children:"Back to Overview"})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Ready to Pack",value:t?.kpis?.readyToPack||0,icon:r.jsx(Sr,{size:20}),linkTo:"/shipments?status=CREATED"}),r.jsx(lt,{title:"Ready to Dispatch",value:t?.kpis?.readyToDispatch||0,icon:r.jsx(qo,{size:20}),color:"info",linkTo:"/shipments?status=ASSIGNED"}),r.jsx(lt,{title:"In Transit",value:t?.kpis?.inTransit||0,icon:r.jsx(fn,{size:20}),color:"warning",linkTo:"/shipments?status=IN_TRANSIT"}),r.jsx(lt,{title:"Delayed",value:t?.kpis?.delayed||0,icon:r.jsx(vr,{size:20}),color:t?.kpis?.delayed>0?"danger":void 0,linkTo:"/shipments?status=DELAYED"}),r.jsx(lt,{title:"Delivered Today",value:t?.kpis?.deliveredToday||0,icon:r.jsx(yt,{size:20}),color:"success",linkTo:"/shipments?delivered=today"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsx(dd,{title:"Logistics Queue",items:t?.queue||[],viewAllLink:"/shipments",maxItems:10,icon:r.jsx(fn,{size:18,style:{color:"#0891b2"}}),accentColor:"#0891b2",emptyMessage:"No shipments in queue"}),r.jsx(Ag,{title:"Logistics Exceptions",items:d})]})]})}const Hpe="SAR",Wpe="en-SA";function Zf(e,t=Hpe,n=Wpe){return e==null?`${t} 0.00`:new Intl.NumberFormat(n,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function $pe(){const e=Tr(),[t,n]=P.useState("PENDING"),[i,a]=P.useState(null),[s,l]=P.useState(!1),[d,h]=P.useState(""),{data:f}=Ye({queryKey:["payment-stats"],queryFn:async()=>{const{data:_}=await xe.get("/payments/stats");return _}}),{data:p,isLoading:g}=Ye({queryKey:["payment-requests",t],queryFn:async()=>{const _={limit:50};t&&(_.status=t);const{data:E}=await xe.get("/payments",{params:_});return E.data}}),{data:j,refetch:v}=Ye({queryKey:["payment-request-detail",i?.id],queryFn:async()=>{if(!i?.id)return null;const{data:_}=await xe.get(`/payments/${i.id}`);return _},enabled:!!i?.id}),b=ft({mutationFn:async _=>{const{data:E}=await xe.post(`/payments/${_}/confirm`);return E},onSuccess:_=>{Ur.success("Payment confirmed! Receipt voucher generated."),e.invalidateQueries({queryKey:["payment-requests"]}),e.invalidateQueries({queryKey:["payment-stats"]}),v(),a(null)},onError:_=>{Ur.error(_.response?.data?.error||"Failed to confirm payment")}}),w=ft({mutationFn:async({id:_,reason:E})=>{const{data:D}=await xe.post(`/payments/${_}/reject`,{reason:E});return D},onSuccess:()=>{Ur.success("Payment rejected"),e.invalidateQueries({queryKey:["payment-requests"]}),e.invalidateQueries({queryKey:["payment-stats"]}),l(!1),h(""),a(null)},onError:_=>{Ur.error(_.response?.data?.error||"Failed to reject payment")}}),S=_=>{const E={PENDING:{color:"warning",icon:Dt},CONFIRMED:{color:"success",icon:yt},REJECTED:{color:"danger",icon:pi}},{color:D,icon:W}=E[_]||{color:"default",icon:Dt};return r.jsxs("span",{className:`badge badge-${D}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(W,{size:12}),_]})};return g?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.25rem"},children:"Payment Approvals"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Review and process customer payment submissions"})]})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:t==="PENDING"?"2px solid var(--warning)":void 0},onClick:()=>n("PENDING"),children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(234, 179, 8, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Dt,{size:20,style:{color:"var(--warning)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600},children:f?.pending||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Pending Review"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:t==="CONFIRMED"?"2px solid var(--success)":void 0},onClick:()=>n("CONFIRMED"),children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(yt,{size:20,style:{color:"var(--success)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--success)"},children:f?.confirmed||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Confirmed"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.25rem",cursor:"pointer",border:t==="REJECTED"?"2px solid var(--danger)":void 0},onClick:()=>n("REJECTED"),children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(pi,{size:20,style:{color:"var(--danger)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--danger)"},children:f?.rejected||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Rejected"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(13, 148, 136, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Ul,{size:20,style:{color:"#0d9488"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:600},children:Zf(f?.totalPendingAmount||0)}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Pending Amount"})]})]})})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:i?"1fr 450px":"1fr",gap:"1.5rem"},children:[r.jsx("div",{className:"card",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Invoice"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Method"}),r.jsx("th",{children:"Submitted"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"60px"},children:"Action"})]})}),r.jsxs("tbody",{children:[p?.map(_=>r.jsxs("tr",{style:{cursor:"pointer",backgroundColor:i?.id===_.id?"var(--background-secondary)":void 0},onClick:()=>a(_),children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:_.invoice?.customer?.nameEn||_.invoice?.customer?.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:_.invoice?.customer?.code})]}),r.jsx("td",{style:{fontFamily:"monospace"},children:_.invoice?.invoiceNumber}),r.jsx("td",{style:{fontWeight:500},children:Zf(_.amount)}),r.jsx("td",{children:_.paymentMethod?.replace("_"," ")}),r.jsx("td",{children:Ke(new Date(_.submittedAt),"MMM d, HH:mm")}),r.jsx("td",{children:S(_.status)}),r.jsx("td",{onClick:E=>E.stopPropagation(),children:r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>a(_),children:r.jsx(Pa,{size:14})})})]},_.id)),(!p||p.length===0)&&r.jsx("tr",{children:r.jsxs("td",{colSpan:7,style:{textAlign:"center",padding:"3rem"},children:[r.jsx(Ul,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),r.jsx("p",{style:{color:"var(--text-muted)"},children:"No payment requests found"})]})})]})]})}),i&&r.jsxs("div",{className:"card",style:{maxHeight:"calc(100vh - 240px)",overflowY:"auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingBottom:"1rem",borderBottom:"1px solid var(--border)",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"1.125rem",marginBottom:"0.25rem"},children:"Payment Request"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:j?.invoice?.customer?.nameEn||j?.invoice?.customer?.name})]}),r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>a(null),children:r.jsx(hn,{size:14})})]}),r.jsxs("div",{style:{backgroundColor:"var(--primary)",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"Payment Amount"}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:Zf(i.amount)})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Invoice"}),r.jsx("div",{style:{fontWeight:500,marginTop:"0.25rem",fontFamily:"monospace"},children:j?.invoice?.invoiceNumber})]}),r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Method"}),r.jsx("div",{style:{fontWeight:500,marginTop:"0.25rem"},children:i.paymentMethod?.replace("_"," ")})]}),r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Submitted"}),r.jsx("div",{style:{fontWeight:500,marginTop:"0.25rem"},children:Ke(new Date(i.submittedAt),"MMM d, yyyy HH:mm")})]}),r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Status"}),r.jsx("div",{style:{marginTop:"0.25rem"},children:S(i.status)})]})]}),i.reference&&r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Reference"}),r.jsx("div",{style:{fontFamily:"monospace",backgroundColor:"var(--background-secondary)",padding:"0.5rem",borderRadius:"0.25rem"},children:i.reference})]}),i.notes&&r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Notes"}),r.jsx("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.5rem",borderRadius:"0.25rem",fontSize:"0.875rem"},children:i.notes})]}),i.proofUrl&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Payment Proof"}),r.jsxs("a",{href:i.proofUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ii,{size:16}),"View Proof",r.jsx(Zp,{size:14})]})]}),j?.invoice&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Invoice Summary"}),r.jsxs("div",{style:{backgroundColor:"var(--background-secondary)",padding:"0.75rem",borderRadius:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Total Amount"}),r.jsx("span",{children:Zf(j.invoice.totalAmount)})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-muted)"},children:"Already Paid"}),r.jsx("span",{style:{color:"var(--success)"},children:Zf(j.invoice.paidAmount)})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid var(--border)",paddingTop:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:500},children:"Balance After This Payment"}),r.jsx("span",{style:{fontWeight:500},children:Zf(Math.max(0,j.invoice.totalAmount-j.invoice.paidAmount-i.amount))})]})]})]}),i.status==="REJECTED"&&i.rejectReason&&r.jsxs("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--danger)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--danger)",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Rejection Reason"}),r.jsx("div",{style:{color:"var(--danger)"},children:i.rejectReason})]}),i.status==="PENDING"&&r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{className:"btn btn-success",style:{flex:1},onClick:()=>b.mutate(i.id),disabled:b.isPending,children:[r.jsx(yl,{size:16,style:{marginRight:"0.5rem"}}),b.isPending?"Confirming...":"Confirm Payment"]}),r.jsxs("button",{className:"btn btn-danger",style:{flex:1},onClick:()=>l(!0),disabled:w.isPending,children:[r.jsx(hn,{size:16,style:{marginRight:"0.5rem"}}),"Reject"]})]}),i.reviewedBy&&r.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[i.status==="CONFIRMED"?"Confirmed":"Rejected"," by ",i.reviewedBy?.fullName||i.reviewedBy?.username,i.reviewedAt&&` on ${Ke(new Date(i.reviewedAt),"MMM d, yyyy HH:mm")}`]})]})]}),s&&r.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:r.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Reject Payment"}),r.jsx("button",{className:"modal-close",onClick:()=>l(!1),children:r.jsx(hn,{size:20})})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Rejection Reason *"}),r.jsx("textarea",{className:"form-textarea",value:d,onChange:_=>h(_.target.value),placeholder:"Please provide a reason for rejection",rows:3,required:!0})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:()=>l(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-danger",onClick:()=>w.mutate({id:i.id,reason:d}),disabled:!d||w.isPending,children:w.isPending?"Rejecting...":"Reject Payment"})]})]})})]})}function Vpe(){const e=Tr(),[t,n]=P.useState(!1),[i,a]=P.useState(null),[s,l]=P.useState({name:"",extensions:"",mimeTypes:"",maxSizeMB:5,isActive:!0}),{data:d,isLoading:h}=Ye({queryKey:["attachment-types"],queryFn:async()=>{const{data:w}=await xe.get("/attachments/types");return w}}),f=ft({mutationFn:async w=>{i?await xe.put(`/attachments/types/${i.id}`,w):await xe.post("/attachments/types",w)},onSuccess:()=>{e.invalidateQueries({queryKey:["attachment-types"]}),Ur.success(i?"Type updated":"Type created"),j()},onError:()=>{Ur.error("Failed to save attachment type")}}),p=ft({mutationFn:async w=>{await xe.delete(`/attachments/types/${w}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["attachment-types"]}),Ur.success("Type deleted")},onError:()=>{Ur.error("Cannot delete type with existing attachments")}}),g=w=>{w?(a(w),l({name:w.name,extensions:w.extensions.join(", "),mimeTypes:w.mimeTypes.join(", "),maxSizeMB:w.maxSizeMB,isActive:w.isActive})):(a(null),l({name:"",extensions:"",mimeTypes:"",maxSizeMB:5,isActive:!0})),n(!0)},j=()=>{n(!1),a(null)},v=w=>{w.preventDefault();const S={name:s.name.trim(),extensions:s.extensions.split(",").map(_=>_.trim().toLowerCase().replace(/^\./,"")).filter(Boolean),mimeTypes:s.mimeTypes.split(",").map(_=>_.trim()).filter(Boolean),maxSizeMB:Number(s.maxSizeMB),isActive:s.isActive};f.mutate(S)},b=[{label:"PDF Documents",value:"pdf",mime:"application/pdf"},{label:"Images (JPG)",value:"jpg, jpeg",mime:"image/jpeg"},{label:"Images (PNG)",value:"png",mime:"image/png"},{label:"Word Documents",value:"doc, docx",mime:"application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{label:"Excel Files",value:"xls, xlsx",mime:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{label:"Text Files",value:"txt",mime:"text/plain"}];return r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Attachment Types"}),r.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Configure allowed file types and extensions for attachments"})]}),r.jsxs("button",{onClick:()=>g(),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:[r.jsx(Lr,{size:18}),"Add Type"]})]}),r.jsx("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",border:"1px solid var(--border)",overflow:"hidden"},children:h?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading..."}):d?.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[r.jsx(hH,{size:48,style:{color:"var(--text-muted)",opacity:.5,marginBottom:"1rem"}}),r.jsx("h3",{style:{margin:"0 0 0.5rem"},children:"No attachment types defined"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"All file types are currently allowed. Add types to restrict uploads."}),r.jsx("button",{onClick:()=>g(),style:{padding:"0.5rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Add First Type"})]}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[r.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600},children:"Name"}),r.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600},children:"Extensions"}),r.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600},children:"Max Size"}),r.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"center",fontWeight:600},children:"Status"}),r.jsx("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600},children:"Actions"})]})}),r.jsx("tbody",{children:d?.map(w=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[r.jsx("td",{style:{padding:"0.875rem 1rem",fontWeight:500},children:w.name}),r.jsx("td",{style:{padding:"0.875rem 1rem"},children:r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:w.extensions.map(S=>r.jsxs("span",{style:{padding:"0.125rem 0.5rem",background:"var(--primary)",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontFamily:"monospace"},children:[".",S]},S))})}),r.jsxs("td",{style:{padding:"0.875rem 1rem"},children:[w.maxSizeMB," MB"]}),r.jsx("td",{style:{padding:"0.875rem 1rem",textAlign:"center"},children:r.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500,background:w.isActive?"rgba(34, 197, 94, 0.1)":"rgba(156, 163, 175, 0.1)",color:w.isActive?"#22c55e":"#9ca3af"},children:w.isActive?"Active":"Inactive"})}),r.jsx("td",{style:{padding:"0.875rem 1rem",textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>g(w),style:{padding:"0.375rem",background:"none",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer"},children:r.jsx($l,{size:16})}),r.jsx("button",{onClick:()=>{confirm("Delete this attachment type?")&&p.mutate(w.id)},style:{padding:"0.375rem",background:"none",border:"1px solid #ef4444",borderRadius:"6px",cursor:"pointer",color:"#ef4444"},children:r.jsx(mi,{size:16})})]})})]},w.id))})]})}),r.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[r.jsx("h4",{style:{margin:"0 0 0.5rem",fontSize:"0.875rem"},children:"How it works"}),r.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"When no types are defined, all file types up to 5MB are allowed. Once you add types, only files matching the defined extensions will be accepted. The maximum file size limit of 5MB applies globally."})]}),t&&r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",width:"100%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h3",{style:{margin:0},children:[i?"Edit":"Add"," Attachment Type"]}),r.jsx("button",{onClick:j,style:{background:"none",border:"none",cursor:"pointer"},children:r.jsx(hn,{size:20})})]}),r.jsxs("form",{onSubmit:v,style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Type Name *"}),r.jsx("input",{type:"text",value:s.name,onChange:w=>l({...s,name:w.target.value}),placeholder:"e.g., Documents, Images, Certificates",required:!0,style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Allowed Extensions"}),r.jsx("input",{type:"text",value:s.extensions,onChange:w=>l({...s,extensions:w.target.value}),placeholder:"pdf, doc, docx, jpg, png",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Comma-separated list of extensions (without dots)"})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500,fontSize:"0.875rem"},children:"Quick Add"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.375rem"},children:b.map(w=>r.jsxs("button",{type:"button",onClick:()=>{const S=s.extensions.split(",").map(B=>B.trim()).filter(Boolean),_=w.value.split(",").map(B=>B.trim()),E=[...new Set([...S,..._])],D=s.mimeTypes.split(",").map(B=>B.trim()).filter(Boolean),W=w.mime.split(",").map(B=>B.trim()),K=[...new Set([...D,...W])];l({...s,extensions:E.join(", "),mimeTypes:K.join(", ")})},style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"4px",cursor:"pointer"},children:["+ ",w.label]},w.label))})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"MIME Types (optional)"}),r.jsx("input",{type:"text",value:s.mimeTypes,onChange:w=>l({...s,mimeTypes:w.target.value}),placeholder:"application/pdf, image/jpeg",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"monospace"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Max Size (MB)"}),r.jsx("input",{type:"number",value:s.maxSizeMB,onChange:w=>l({...s,maxSizeMB:Number(w.target.value)}),min:.1,max:5,step:.5,style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.375rem",fontWeight:500,fontSize:"0.875rem"},children:"Status"}),r.jsxs("select",{value:s.isActive?"active":"inactive",onChange:w=>l({...s,isActive:w.target.value==="active"}),style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"0.875rem"},children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingTop:"0.5rem"},children:[r.jsx("button",{type:"button",onClick:j,style:{padding:"0.625rem 1rem",background:"none",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer"},children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:f.isPending,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:[r.jsx(eg,{size:16}),f.isPending?"Saving...":"Save"]})]})]})]})})]})}function Kpe(){const e=Tr(),[t,n]=P.useState(null),{data:i,isLoading:a,refetch:s}=Ye({queryKey:["demo-status"],queryFn:async()=>{const{data:f}=await xe.get("/admin/demo/status");return f}}),l=ft({mutationFn:async({action:f,payload:p})=>{const{data:g}=await xe.post(`/admin/demo/actions/${f}`,p||{});return g},onSuccess:f=>{n({success:!0,message:f.message}),e.invalidateQueries({queryKey:["demo-status"]}),setTimeout(()=>n(null),5e3)},onError:f=>{n({success:!1,message:f.response?.data?.error||"Action failed"}),setTimeout(()=>n(null),5e3)}}),d=ft({mutationFn:async f=>{const{data:p}=await xe.post("/admin/demo/seed",{mode:f});return p},onSuccess:f=>{n({success:!0,message:f.message}),e.invalidateQueries({queryKey:["demo-status"]})},onError:f=>{n({success:!1,message:f.response?.data?.error||"Seed failed"})}}),h=f=>({DELIVERED:"#22c55e",PAID:"#22c55e",CLOSED_ARCHIVED:"#6b7280",IN_TRANSIT:"#3b82f6",ISSUED_POSTED:"#f59e0b",PARTIALLY_PAID:"#f59e0b",DISPATCHED:"#8b5cf6"})[f]||"#6b7280";return a?r.jsx("div",{className:"page-container",children:r.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[r.jsx(Gv,{size:24,className:"spin",style:{margin:"0 auto 1rem"}}),r.jsx("p",{children:"Loading demo status..."})]})}):r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"page-title",children:"Demo Actions Panel"}),r.jsx("p",{className:"page-subtitle",children:"Quick actions for live demonstrations"})]}),r.jsxs("button",{className:"btn btn-secondary",onClick:()=>s(),children:[r.jsx(Gv,{size:16}),"Refresh Status"]})]}),t&&r.jsx("div",{className:`alert ${t.success?"alert-success":"alert-error"}`,style:{marginBottom:"1.5rem"},children:t.message}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",children:[r.jsxs("h3",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(OO,{size:20,style:{color:"#f59e0b"}}),"Demo Mode"]}),r.jsx("div",{style:{padding:"1rem",background:i?.demoMode==="LIVE_DEMO"?"#fef3c7":"#d1fae5",borderRadius:"0.5rem",textAlign:"center",fontWeight:600,fontSize:"1.25rem"},children:i?.demoMode||"Unknown"}),r.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-primary",style:{flex:1},onClick:()=>d.mutate("LIVE_DEMO"),disabled:d.isPending,children:"Seed Live Demo"}),r.jsx("button",{className:"btn btn-secondary",style:{flex:1},onClick:()=>d.mutate("FULLY_COMPLETED"),disabled:d.isPending,children:"Seed Completed"})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Current Journey Status"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{children:["Order ",i?.mainJourney.order?.number||"-"]}),r.jsx("span",{className:"badge",style:{background:h(i?.mainJourney.order?.status||""),color:"white"},children:i?.mainJourney.order?.status||"N/A"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{children:["Shipment ",i?.mainJourney.shipment?.number||"-"]}),r.jsx("span",{className:"badge",style:{background:h(i?.mainJourney.shipment?.status||""),color:"white"},children:i?.mainJourney.shipment?.status||"N/A"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{children:["Invoice ",i?.mainJourney.invoice?.number||"-"]}),r.jsx("span",{className:"badge",style:{background:h(i?.mainJourney.invoice?.status||""),color:"white"},children:i?.mainJourney.invoice?.status||"N/A"})]}),i?.mainJourney.invoice&&r.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.5rem"},children:["Paid: SAR ",i.mainJourney.invoice.paidAmount.toLocaleString()," / Remaining: SAR ",i.mainJourney.invoice.remainingAmount.toLocaleString()]})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Quick Demo Actions"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[r.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("mark-arrived")?"#3b82f6":"#e5e7eb",color:i?.availableActions.includes("mark-arrived")?"white":"#9ca3af",cursor:i?.availableActions.includes("mark-arrived")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("mark-arrived")||l.isPending,onClick:()=>l.mutate({action:"mark-arrived"}),children:[r.jsx(Sr,{size:32}),r.jsx("span",{style:{fontWeight:600},children:"Mark Arrived"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Shipment arrives at destination"})]}),r.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("mark-delivered")?"#22c55e":"#e5e7eb",color:i?.availableActions.includes("mark-delivered")?"white":"#9ca3af",cursor:i?.availableActions.includes("mark-delivered")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("mark-delivered")||l.isPending,onClick:()=>l.mutate({action:"mark-delivered"}),children:[r.jsx(fn,{size:32}),r.jsx("span",{style:{fontWeight:600},children:"Mark Delivered"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Complete delivery with POD"})]}),r.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("create-payment-request")?"#f59e0b":"#e5e7eb",color:i?.availableActions.includes("create-payment-request")?"white":"#9ca3af",cursor:i?.availableActions.includes("create-payment-request")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("create-payment-request")||l.isPending,onClick:()=>l.mutate({action:"create-payment-request",payload:{isPartial:!0}}),children:[r.jsx(Ul,{size:32}),r.jsx("span",{style:{fontWeight:600},children:"Submit Payment"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Create partial payment request"})]}),r.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("confirm-payment")?"#8b5cf6":"#e5e7eb",color:i?.availableActions.includes("confirm-payment")?"white":"#9ca3af",cursor:i?.availableActions.includes("confirm-payment")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("confirm-payment")||l.isPending,onClick:()=>l.mutate({action:"confirm-payment"}),children:[r.jsx(yt,{size:32}),r.jsx("span",{style:{fontWeight:600},children:"Confirm Payment"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Finance confirms & generates receipt"})]}),r.jsxs("button",{className:"btn",style:{padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",background:i?.availableActions.includes("close-invoice")?"#6b7280":"#e5e7eb",color:i?.availableActions.includes("close-invoice")?"white":"#9ca3af",cursor:i?.availableActions.includes("close-invoice")?"pointer":"not-allowed"},disabled:!i?.availableActions.includes("close-invoice")||l.isPending,onClick:()=>l.mutate({action:"close-invoice"}),children:[r.jsx(nU,{size:32}),r.jsx("span",{style:{fontWeight:600},children:"Close Invoice"}),r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Archive paid invoice"})]})]})]}),r.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[r.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(fn,{size:20,style:{color:"#3b82f6"}}),"Logistics Demo Data"]}),r.jsx("p",{style:{marginBottom:"1rem",color:"#6b7280",fontSize:"0.875rem"},children:"Create shipments ready for driver assignment to test the logistics workflow."}),r.jsxs("button",{className:"btn btn-primary",style:{padding:"1rem 2rem",display:"flex",alignItems:"center",gap:"0.75rem"},disabled:l.isPending,onClick:()=>l.mutate({action:"create-logistics-shipments"}),children:[r.jsx(Sr,{size:20}),r.jsx("span",{style:{fontWeight:600},children:"Create Shipments for Driver Assignment"})]}),r.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#eff6ff",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[r.jsx("strong",{children:"This will create:"}),r.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.25rem",lineHeight:1.8},children:[r.jsx("li",{children:"3 shipments with PACKED status (ready for driver assignment)"}),r.jsx("li",{children:"Each with an associated order and realistic delivery address"}),r.jsx("li",{children:"One marked as URGENT priority"})]}),r.jsxs("div",{style:{marginTop:"0.75rem",color:"#1d4ed8"},children:["After creation, go to ",r.jsx("strong",{children:"Logistics  Shipments"})," to assign drivers."]})]})]}),r.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Demo Credentials"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.75rem",color:"#374151"},children:"Internal Users"}),r.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.75"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"admin@demo.com"})," - Admin"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"orderdesk@demo.com"})," - Order Desk"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"planner@demo.com"})," - Planner"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"qc@demo.com"})," - QC Analyst"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"qp@demo.com"})," - QP"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"logistics@demo.com"})," - Logistics"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"finance@demo.com"})," - Finance"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"driver1@demo.com"})," - Driver"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.75rem",color:"#374151"},children:"Customer Portal"}),r.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.75"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"portal1@hospitaldemo.com"})," - Al Noor Hospital"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"portal2@hospitaldemo.com"})," - Al Noor Hospital (Billing)"]})]}),r.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#fef3c7",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[r.jsx("strong",{children:"Password for all:"})," demo123"]})]})]})]})]})}function Gpe(){const[e,t]=P.useState(!1),[n,i]=P.useState(null),[a,s]=P.useState(""),[l,d]=P.useState(""),h=Tr(),f=Ei(),{data:p,isLoading:g}=Ye({queryKey:["drivers",a,l],queryFn:async()=>{const _={};a&&(_.search=a),l&&(_.status=l);const{data:E}=await xe.get("/drivers",{params:_});return E}}),j=ft({mutationFn:async _=>xe.post("/drivers",_),onSuccess:()=>{h.invalidateQueries({queryKey:["drivers"]}),t(!1),i(null),f.success("Driver Created","New driver has been added successfully")},onError:_=>{const E=Er(_);f.error("Creation Failed",E?.userMessage||"Failed to create driver")}}),v=ft({mutationFn:async({id:_,data:E})=>xe.put(`/drivers/${_}`,E),onSuccess:()=>{h.invalidateQueries({queryKey:["drivers"]}),t(!1),i(null),f.success("Driver Updated","Driver information has been updated")},onError:_=>{const E=Er(_);f.error("Update Failed",E?.userMessage||"Failed to update driver")}}),b=ft({mutationFn:async _=>xe.delete(`/drivers/${_}`),onSuccess:()=>{h.invalidateQueries({queryKey:["drivers"]}),f.success("Driver Removed","Driver has been removed or deactivated")},onError:_=>{const E=Er(_);f.error("Delete Failed",E?.userMessage||"Failed to remove driver")}}),w=_=>{_.preventDefault();const E=new FormData(_.currentTarget),D={fullName:E.get("fullName"),mobile:E.get("mobile"),email:E.get("email")||null,nationalId:E.get("nationalId")||null,driverLicenseNo:E.get("driverLicenseNo")||null,licenseExpiryDate:E.get("licenseExpiryDate")||null,vehicleType:E.get("vehicleType"),vehiclePlateNo:E.get("vehiclePlateNo")||null,vehicleModel:E.get("vehicleModel")||null,status:E.get("status")||"ACTIVE",createUserAccount:E.get("createUserAccount")==="on",userPassword:E.get("userPassword")||null};n?v.mutate({id:n.id,data:D}):j.mutate(D)},S={total:p?.length||0,active:p?.filter(_=>_.status==="ACTIVE").length||0,inactive:p?.filter(_=>_.status==="INACTIVE").length||0,onRoute:p?.filter(_=>_.inTransit>0).length||0};return g?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"Driver Management"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"Manage delivery drivers, vehicles, and availability"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>{i(null),t(!0)},children:[r.jsx(Lr,{size:16}),"Add Driver"]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Drivers",value:S.total,icon:r.jsx(Vl,{size:20}),color:"primary",onClick:()=>d(""),selected:!l}),r.jsx(lt,{title:"Active",value:S.active,icon:r.jsx(yt,{size:20}),color:"success",onClick:()=>d("ACTIVE"),selected:l==="ACTIVE"}),r.jsx(lt,{title:"Inactive",value:S.inactive,icon:r.jsx(pi,{size:20}),color:"default",onClick:()=>d("INACTIVE"),selected:l==="INACTIVE"}),r.jsx(lt,{title:"On Route",value:S.onRoute,icon:r.jsx(fn,{size:20}),color:"info"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(ho,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search by name, mobile, email, or plate number...",className:"form-input",style:{paddingLeft:"2.25rem"},value:a,onChange:_=>s(_.target.value)})]}),r.jsxs("select",{className:"form-select",style:{width:"150px"},value:l,onChange:_=>d(_.target.value),children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Drivers (",p?.length||0,")"]})}),p?.length>0?r.jsxs("table",{className:"table",style:{marginBottom:0},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Driver"}),r.jsx("th",{children:"Contact"}),r.jsx("th",{children:"Vehicle"}),r.jsx("th",{children:"Workload"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px",textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:p.map(_=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:600},children:_.fullName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500},children:_.fullName}),_.driverLicenseNo&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["License: ",_.driverLicenseNo]})]})]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[r.jsx(hu,{size:12}),_.mobile]}),_.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[r.jsx(Xp,{size:12}),_.email]})]})}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(SO,{size:14}),_.vehicleType]}),_.vehiclePlateNo&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[_.vehiclePlateNo," ",_.vehicleModel&&` ${_.vehicleModel}`]})]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[_.inTransit>0?r.jsxs("span",{className:"badge badge-info",children:[_.inTransit," in transit"]}):r.jsx("span",{className:"badge badge-default",children:"Available"}),_.assignedToday>0&&r.jsxs("span",{className:"badge badge-warning",children:[_.assignedToday," today"]})]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${_.status==="ACTIVE"?"badge-success":"badge-default"}`,children:_.status})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>{i(_),t(!0)},title:"Edit",children:r.jsx(Pv,{size:14})}),r.jsx("button",{className:"btn btn-sm btn-outline",style:{color:"var(--danger)"},onClick:()=>{confirm(`Are you sure you want to ${_._count?.shipments>0?"deactivate":"delete"} this driver?`)&&b.mutate(_.id)},title:"Remove",children:r.jsx(mi,{size:14})})]})})]},_.id))})]}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No drivers found",message:"Add your first driver to start assigning shipments",icon:"user"})})]}),e&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:n?"Edit Driver":"Add Driver"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{t(!1),i(null)},children:""})]}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsx("label",{className:"form-label",children:"Full Name *"}),r.jsx("input",{type:"text",name:"fullName",className:"form-input",required:!0,defaultValue:n?.fullName||""})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label",children:"Status"}),r.jsxs("select",{name:"status",className:"form-select",defaultValue:n?.status||"ACTIVE",children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Mobile *"}),r.jsx("input",{type:"tel",name:"mobile",className:"form-input",required:!0,placeholder:"+966 5xx xxx xxxx",defaultValue:n?.mobile||""})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",className:"form-input",defaultValue:n?.email||""})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"National ID / Iqama"}),r.jsx("input",{type:"text",name:"nationalId",className:"form-input",defaultValue:n?.nationalId||""})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Driver License No"}),r.jsx("input",{type:"text",name:"driverLicenseNo",className:"form-input",defaultValue:n?.driverLicenseNo||""})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"License Expiry Date"}),r.jsx("input",{type:"date",name:"licenseExpiryDate",className:"form-input",defaultValue:n?.licenseExpiryDate?Ke(new Date(n.licenseExpiryDate),"yyyy-MM-dd"):""})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"1rem 0",paddingTop:"1rem"},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem"},children:"Vehicle Information"}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Vehicle Type"}),r.jsxs("select",{name:"vehicleType",className:"form-select",defaultValue:n?.vehicleType||"CAR",children:[r.jsx("option",{value:"CAR",children:"Car"}),r.jsx("option",{value:"VAN",children:"Van"}),r.jsx("option",{value:"MOTORCYCLE",children:"Motorcycle"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Plate Number"}),r.jsx("input",{type:"text",name:"vehiclePlateNo",className:"form-input",placeholder:"ABC 1234",defaultValue:n?.vehiclePlateNo||""})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Vehicle Model"}),r.jsx("input",{type:"text",name:"vehicleModel",className:"form-input",placeholder:"e.g., Toyota Hilux 2023",defaultValue:n?.vehicleModel||""})]})]}),!n&&r.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"1rem 0",paddingTop:"1rem"},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.75rem"},children:"Portal Access"}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",name:"createUserAccount"}),r.jsx("span",{children:"Create user account for driver portal access"})]}),r.jsxs("div",{className:"form-group",style:{marginTop:"0.75rem"},children:[r.jsx("label",{className:"form-label",children:"Initial Password"}),r.jsx("input",{type:"password",name:"userPassword",className:"form-input",placeholder:"Leave empty for default: driver123"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t(!1),i(null)},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j.isPending||v.isPending,children:j.isPending||v.isPending?"Saving...":n?"Update Driver":"Add Driver"})]})]})]})})]})}const Mw=[{status:"PACKED",label:"Packed",icon:Sr},{status:"ASSIGNED_TO_DRIVER",label:"Assigned",icon:om},{status:"ACCEPTED_BY_DRIVER",label:"Accepted",icon:yt},{status:"PICKED_UP",label:"Picked Up",icon:fn},{status:"IN_TRANSIT",label:"In Transit",icon:qo},{status:"ARRIVED",label:"Arrived",icon:Fs},{status:"DELIVERED",label:"Delivered",icon:yt}],Qpe=Mw.map(e=>e.status);function Ype(){const{id:e}=nf(),[t,n]=P.useState(!1),i=Tr(),a=Ei(),{data:s,isLoading:l}=Ye({queryKey:["shipment",e],queryFn:async()=>{const{data:v}=await xe.get(`/shipments/${e}`);return v},enabled:!!e}),{data:d}=Ye({queryKey:["drivers"],queryFn:async()=>{const{data:v}=await xe.get("/drivers");return v}}),h=ft({mutationFn:async v=>xe.post(`/shipments/${e}/assign-driver`,v),onSuccess:()=>{i.invalidateQueries({queryKey:["shipment",e]}),n(!1),a.success("Driver Assigned","Driver has been assigned to the shipment")},onError:v=>{const b=Er(v);a.error("Assignment Failed",b?.userMessage||"Failed to assign driver")}}),f=v=>{v.preventDefault();const b=new FormData(v.currentTarget);h.mutate({driverId:b.get("driverId"),scheduledPickupAt:b.get("scheduledPickupAt"),scheduledDeliveryAt:b.get("scheduledDeliveryAt"),driverNotes:b.get("driverNotes")})},p=()=>!s||["DELIVERY_FAILED","RETURNED","CANCELLED","DELAYED"].includes(s.status)?-1:Qpe.indexOf(s.status),g=v=>({PACKED:Sr,ASSIGNED_TO_DRIVER:om,ACCEPTED:yt,PICKED_UP:fn,IN_TRANSIT:qo,ARRIVED:Fs,DELIVERED:yt,DELIVERY_FAILED:vr,CHECKPOINT:Fs,SCHEDULED:Wi,STATUS_CHANGE:Dt})[v]||Dt;if(l)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});if(!s)return r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsx("h3",{children:"Shipment not found"}),r.jsx(yr,{to:"/shipments",className:"btn btn-primary",style:{marginTop:"1rem"},children:"Back to Shipments"})]});const j=p();return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(yr,{to:"/shipments",className:"btn btn-secondary btn-sm",children:r.jsx(pd,{size:16})}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:600,margin:0},children:["Shipment ",s.shipmentNumber]}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:s.customer?.nameEn||s.customer?.name})]}),r.jsx(Wn,{status:s.status,size:"md"}),s.priority==="URGENT"&&r.jsx("span",{className:"badge badge-danger",children:"Urgent"})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1.5rem"},children:"Shipment Journey"}),["DELIVERY_FAILED","CANCELLED","DELAYED"].includes(s.status)&&r.jsxs("div",{style:{backgroundColor:s.status==="CANCELLED"?"var(--bg-secondary)":"var(--danger-light)",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(vr,{size:20,color:s.status==="CANCELLED"?"var(--text-muted)":"var(--danger)"}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:500,color:s.status==="CANCELLED"?"var(--text-muted)":"var(--danger)"},children:[s.status==="DELIVERY_FAILED"&&"Delivery Failed",s.status==="CANCELLED"&&"Shipment Cancelled",s.status==="DELAYED"&&"Shipment Delayed"]}),s.driverNotes&&r.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem"},children:s.driverNotes})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"1rem"},children:[r.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",right:"40px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),r.jsx("div",{style:{position:"absolute",top:"20px",left:"40px",width:j>=0?`${j/(Mw.length-1)*100}%`:"0%",maxWidth:"calc(100% - 80px)",height:"2px",backgroundColor:"var(--primary)",zIndex:1,transition:"width 0.3s ease"}}),Mw.map((v,b)=>{const w=j>=b,S=j===b,_=v.icon;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:2,flex:1},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:w?"var(--primary)":"var(--bg-secondary)",border:S?"3px solid var(--primary)":"2px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",color:w?"white":"var(--text-muted)",transition:"all 0.3s ease"},children:r.jsx(_,{size:18})}),r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",fontWeight:S?600:400,color:w?"var(--text-primary)":"var(--text-muted)",textAlign:"center"},children:v.label})]},v.status)})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0},children:"Driver"}),["PACKED","ASSIGNED_TO_DRIVER","DELIVERY_FAILED"].includes(s.status)&&r.jsxs("button",{className:"btn btn-sm btn-outline",onClick:()=>n(!0),children:[r.jsx(om,{size:14}),s.driver?"Reassign":"Assign"]})]}),s.driver?r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:600,fontSize:"1.25rem"},children:s.driver.fullName.charAt(0).toUpperCase()}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:s.driver.fullName}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:[r.jsx(hu,{size:14}),r.jsx("a",{href:`tel:${s.driver.mobile}`,children:s.driver.mobile})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-muted)"},children:[r.jsx(fn,{size:14}),s.driver.vehicleType,"  ",s.driver.vehiclePlateNo]})]})]}):r.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No driver assigned yet"})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Delivery Details"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(Vl,{size:16,style:{marginTop:"2px",color:"var(--text-muted)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Customer"}),r.jsx("div",{children:s.customer?.nameEn||s.customer?.name})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(Fs,{size:16,style:{marginTop:"2px",color:"var(--text-muted)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Address"}),r.jsx("div",{children:s.deliveryAddress||s.customer?.address||"Not specified"}),s.customer?.city&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:s.customer.city})]})]}),(s.scheduledPickupAt||s.scheduledDeliveryAt)&&r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(Wi,{size:16,style:{marginTop:"2px",color:"var(--text-muted)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Schedule"}),s.scheduledPickupAt&&r.jsxs("div",{children:["Pickup: ",Ke(new Date(s.scheduledPickupAt),"MMM dd, HH:mm")]}),s.scheduledDeliveryAt&&r.jsxs("div",{children:["Delivery: ",Ke(new Date(s.scheduledDeliveryAt),"MMM dd, HH:mm")]})]})]})]})]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Timeline"}),s.events?.length>0?r.jsxs("div",{style:{position:"relative"},children:[r.jsx("div",{style:{position:"absolute",left:"15px",top:"24px",bottom:"24px",width:"2px",backgroundColor:"var(--border)"}}),s.events.map((v,b)=>{const w=g(v.eventType);return r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:b<s.events.length-1?"1.5rem":0,position:"relative"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--bg-primary)",border:"2px solid var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:r.jsx(w,{size:14,color:"var(--primary)"})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:500},children:v.eventType.replace(/_/g," ")}),v.notes&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:v.notes}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[Ke(new Date(v.createdAt),"MMM dd, yyyy HH:mm"),v.driver&&`  by ${v.driver.fullName}`]})]})]},v.id)})]}):r.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No events recorded yet"})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:["Orders (",s.orders?.length||0,")"]}),s.orders?.map(v=>r.jsx("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.5rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs(yr,{to:`/orders/${v.id}`,style:{fontWeight:500,color:"var(--primary)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.orderNumber,r.jsx(Zp,{size:12})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:v.product?.name})]}),r.jsx(Wn,{status:v.status,size:"sm"})]})},v.id))]}),e&&r.jsx(Lm,{entityType:"SHIPMENT",entityId:e,title:"Shipment Attachments"})]}),s.proofOfDelivery&&r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Proof of Delivery"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Receiver"}),r.jsx("div",{style:{fontWeight:500},children:s.proofOfDelivery.receiverName}),s.proofOfDelivery.receiverMobile&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:s.proofOfDelivery.receiverMobile})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Delivered At"}),r.jsx("div",{children:Ke(new Date(s.proofOfDelivery.deliveredAt),"MMM dd, yyyy HH:mm")})]}),s.proofOfDelivery.gpsLat&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"GPS Location"}),r.jsxs("div",{children:[s.proofOfDelivery.gpsLat.toFixed(6),", ",s.proofOfDelivery.gpsLng.toFixed(6)]})]})]}),(s.proofOfDelivery.signatureFileUrl||s.proofOfDelivery.photos?.length>0)&&r.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[s.proofOfDelivery.signatureFileUrl&&r.jsxs("div",{style:{border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Signature"}),r.jsx("img",{src:s.proofOfDelivery.signatureFileUrl,alt:"Signature",style:{maxWidth:"150px",maxHeight:"80px"}})]}),s.proofOfDelivery.photos?.map((v,b)=>r.jsxs("div",{style:{border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"0.5rem",textAlign:"center"},children:[r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:[r.jsx(v5,{size:12,style:{display:"inline",marginRight:"0.25rem"}}),"Photo ",b+1]}),r.jsx("img",{src:v.fileUrl,alt:`Delivery photo ${b+1}`,style:{maxWidth:"150px",maxHeight:"100px",objectFit:"cover"}})]},v.id))]}),s.proofOfDelivery.notes&&r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Notes"}),r.jsx("div",{children:s.proofOfDelivery.notes})]})]}),t&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Assign Driver"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n(!1),children:""})]}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Driver *"}),r.jsxs("select",{name:"driverId",className:"form-select",required:!0,defaultValue:s.driver?.id||"",children:[r.jsx("option",{value:"",children:"Select Driver"}),d?.filter(v=>v.status==="ACTIVE").map(v=>r.jsxs("option",{value:v.id,children:[v.fullName," - ",v.vehicleType," (",v.vehiclePlateNo,")"]},v.id))]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Pickup Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledPickupAt",className:"form-input",defaultValue:s.scheduledPickupAt?Ke(new Date(s.scheduledPickupAt),"yyyy-MM-dd'T'HH:mm"):""})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Time"}),r.jsx("input",{type:"datetime-local",name:"scheduledDeliveryAt",className:"form-input",defaultValue:s.scheduledDeliveryAt?Ke(new Date(s.scheduledDeliveryAt),"yyyy-MM-dd'T'HH:mm"):""})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes for Driver"}),r.jsx("textarea",{name:"driverNotes",className:"form-textarea",rows:2,placeholder:"Special instructions...",defaultValue:s.driverNotes||""})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h.isPending,children:h.isPending?"Assigning...":"Assign Driver"})]})]})]})})]})}const Zpe={ORDER:ru,BATCH:lo,SHIPMENT:fn,INVOICE:$h,APPROVAL:af,ALERT:In,INFO:eS},Xpe={ORDER:"#3b82f6",BATCH:"#8b5cf6",SHIPMENT:"#f59e0b",INVOICE:"#10b981",APPROVAL:"#ec4899",ALERT:"#ef4444",INFO:"#6b7280"};function gD(e,t){if(!e||!t)return null;switch(e.toLowerCase()){case"order":return`/orders/${t}/journey`;case"batch":return`/batches/${t}/journey`;case"shipment":return`/shipments/${t}`;case"invoice":return"/invoices";case"customer":return"/customers";case"approval":return"/approvals";case"payment":return"/payments";case"product":return"/products";default:return null}}function Jpe(){const e=Cn(),t=Tr(),[n,i]=P.useState("all"),[a,s]=P.useState(""),[l,d]=P.useState(1),h=20,{data:f,isLoading:p}=Ye({queryKey:["all-notifications",n,l],queryFn:async()=>{const E=new URLSearchParams;n==="unread"&&E.append("unreadOnly","true"),E.append("limit",h.toString()),E.append("page",l.toString());const{data:D}=await xe.get(`/notifications?${E.toString()}`);return D}}),g=ft({mutationFn:async E=>{await xe.patch(`/notifications/${E}/read`)},onSuccess:()=>{t.invalidateQueries({queryKey:["all-notifications"]}),t.invalidateQueries({queryKey:["notifications"]})}}),j=ft({mutationFn:async()=>{await xe.patch("/notifications/read-all")},onSuccess:()=>{t.invalidateQueries({queryKey:["all-notifications"]}),t.invalidateQueries({queryKey:["notifications"]})}}),v=E=>{E.isRead||g.mutate(E.id);const D=gD(E.relatedType,E.relatedId);D&&e(D)},b=f?.notifications||[],w=f?.unreadCount||0,S=b.filter(E=>!(n==="read"&&!E.isRead||a&&E.type!==a)),_=[...new Set(b.map(E=>E.type))];return p?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Rh,{size:28,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Notification Center"}),r.jsxs("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:[w," unread notification",w!==1?"s":""]})]})]}),w>0&&r.jsxs("button",{onClick:()=>j.mutate(),disabled:j.isPending,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(PU,{size:16}),"Mark All as Read"]})]}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(sf,{size:16,style:{color:"var(--text-muted)"}}),r.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:"Filter:"})]}),r.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","unread","read"].map(E=>r.jsx("button",{onClick:()=>{i(E),d(1)},style:{padding:"0.375rem 0.75rem",borderRadius:"6px",border:"none",background:n===E?"var(--primary)":"var(--bg-secondary)",color:n===E?"white":"var(--text-primary)",fontSize:"0.8rem",fontWeight:500,cursor:"pointer",textTransform:"capitalize"},children:E},E))}),_.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{width:"1px",height:"24px",background:"var(--border)",margin:"0 0.5rem"}}),r.jsxs("select",{value:a,onChange:E=>s(E.target.value),className:"form-select",style:{fontSize:"0.8rem",padding:"0.375rem 0.75rem",minWidth:"140px"},children:[r.jsx("option",{value:"",children:"All Types"}),_.map(E=>r.jsx("option",{value:E,children:E},E))]})]})]})}),r.jsx("div",{className:"card",style:{overflow:"hidden"},children:S.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:[r.jsx(Rh,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:500,marginBottom:"0.5rem"},children:"No notifications"}),r.jsx("div",{style:{fontSize:"0.875rem"},children:n!=="all"?`No ${n} notifications to display.`:"You're all caught up!"})]}):S.map((E,D)=>{const W=Zpe[E.type]||Rh,K=Xpe[E.type]||"#6b7280",B=!!gD(E.relatedType,E.relatedId);return r.jsx("div",{onClick:()=>v(E),style:{padding:"1rem 1.25rem",borderBottom:D<S.length-1?"1px solid var(--border)":"none",background:E.isRead?"transparent":"rgba(59, 130, 246, 0.03)",cursor:B?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:F=>{B&&(F.currentTarget.style.background="var(--bg-secondary)")},onMouseLeave:F=>{F.currentTarget.style.background=E.isRead?"transparent":"rgba(59, 130, 246, 0.03)"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:`${K}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(W,{size:20,style:{color:K}})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"0.25rem"},children:[r.jsx("div",{style:{fontWeight:E.isRead?500:600,fontSize:"0.925rem",color:(E.isRead,"var(--text-primary)")},children:E.title}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[!E.isRead&&r.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--primary)"}}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",whiteSpace:"nowrap"},children:Ke(new Date(E.createdAt),"MMM dd, yyyy HH:mm")})]})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",lineHeight:1.5,marginBottom:"0.5rem"},children:E.message}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{display:"inline-block",padding:"0.2rem 0.5rem",borderRadius:"4px",background:`${K}15`,color:K,fontSize:"0.7rem",fontWeight:600,textTransform:"uppercase"},children:E.type}),B&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:"var(--primary)"},children:[r.jsx(Zp,{size:12}),"View Details"]}),!E.isRead&&r.jsxs("button",{onClick:F=>{F.stopPropagation(),g.mutate(E.id)},style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",border:"none",background:"none",color:"var(--text-muted)",fontSize:"0.75rem",cursor:"pointer",marginLeft:"auto"},children:[r.jsx(yl,{size:12}),"Mark as read"]})]})]})]})},E.id)})}),f&&f.totalPages>1&&r.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>d(E=>Math.max(1,E-1)),disabled:l===1,style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 1rem",border:"1px solid var(--border)",borderRadius:"6px",background:l===1?"var(--bg-secondary)":"white",color:l===1?"var(--text-muted)":"var(--text-primary)",cursor:l===1?"not-allowed":"pointer",fontSize:"0.875rem"},children:[r.jsx(Yp,{size:16}),"Previous"]}),r.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:["Page ",f.page," of ",f.totalPages]}),r.jsxs("button",{onClick:()=>d(E=>Math.min(f.totalPages,E+1)),disabled:l===f.totalPages,style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 1rem",border:"1px solid var(--border)",borderRadius:"6px",background:l===f.totalPages?"var(--bg-secondary)":"white",color:l===f.totalPages?"var(--text-muted)":"var(--text-primary)",cursor:l===f.totalPages?"not-allowed":"pointer",fontSize:"0.875rem"},children:["Next",r.jsx(uu,{size:16})]})]}),r.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.875rem"},children:["Showing ",S.length," of ",f?.totalCount||0," notifications"]})]})}function ege(){const e=Tr(),[t,n]=P.useState(!1),[i,a]=P.useState(null),[s,l]=P.useState({name:"",description:"",permissionIds:[]}),{data:d,isLoading:h}=Ye({queryKey:["roles"],queryFn:async()=>{const{data:S}=await xe.get("/roles");return S}}),{data:f}=Ye({queryKey:["permissions"],queryFn:async()=>{const{data:S}=await xe.get("/roles/permissions/all");return S}}),p=ft({mutationFn:async S=>{const{data:_}=await xe.post("/roles",S);return _},onSuccess:()=>{e.invalidateQueries({queryKey:["roles"]}),v()}}),g=ft({mutationFn:async({id:S,data:_})=>{const{data:E}=await xe.put(`/roles/${S}`,_);return E},onSuccess:()=>{e.invalidateQueries({queryKey:["roles"]}),v()}}),j=S=>{S?(a(S),l({name:S.name,description:S.description||"",permissionIds:S.permissions.map(_=>_.id)})):(a(null),l({name:"",description:"",permissionIds:[]})),n(!0)},v=()=>{n(!1),a(null),l({name:"",description:"",permissionIds:[]})},b=S=>{S.preventDefault(),i?g.mutate({id:i.id,data:s}):p.mutate(s)},w=S=>{l(_=>({..._,permissionIds:_.permissionIds.includes(S)?_.permissionIds.filter(E=>E!==S):[..._.permissionIds,S]}))};return h?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx(Us,{size:28,style:{color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0},children:"Role Management"}),r.jsx("p",{style:{color:"var(--text-muted)",margin:0,fontSize:"0.875rem"},children:"Manage system roles and their permissions"})]})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>j(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Lr,{size:16}),"Add Role"]})]}),r.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:d?.map(S=>r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"var(--primary-light)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Us,{size:20,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,margin:0},children:S.name}),S.description&&r.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0,marginTop:"0.25rem"},children:S.description})]})]}),r.jsx("button",{onClick:()=>j(S),style:{background:"none",border:"none",padding:"0.5rem",cursor:"pointer",color:"var(--text-muted)",borderRadius:"6px"},children:r.jsx(Ku,{size:16})})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(TH,{size:14,style:{color:"var(--text-muted)"}}),r.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:500,color:"var(--text-muted)"},children:["Permissions (",S.permissions.length,")"]})]}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.375rem"},children:[S.permissions.length===0?r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontStyle:"italic"},children:"No permissions assigned"}):S.permissions.slice(0,5).map(_=>r.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"4px",background:"var(--bg-secondary)",fontSize:"0.7rem",fontWeight:500},children:_.name},_.id)),S.permissions.length>5&&r.jsxs("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"4px",background:"var(--primary-light)",color:"var(--primary)",fontSize:"0.7rem",fontWeight:500},children:["+",S.permissions.length-5," more"]})]})]})]},S.id))}),d?.length===0&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(Ih,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"1rem"}}),r.jsx("p",{style:{color:"var(--text-muted)"},children:"No roles found. Create your first role to get started."})]}),t&&r.jsx("div",{className:"modal-overlay",onClick:v,children:r.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{maxWidth:"500px",width:"100%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:i?"Edit Role":"Create New Role"}),r.jsx("button",{className:"modal-close",onClick:v,children:r.jsx(hn,{size:20})})]}),r.jsxs("form",{onSubmit:b,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Role Name *"}),r.jsx("input",{type:"text",className:"form-input",value:s.name,onChange:S=>l({...s,name:S.target.value}),placeholder:"e.g., Manager, Supervisor",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{className:"form-input",value:s.description,onChange:S=>l({...s,description:S.target.value}),placeholder:"Brief description of this role",rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Permissions"}),r.jsx("div",{style:{border:"1px solid var(--border)",borderRadius:"8px",maxHeight:"250px",overflow:"auto"},children:f?.length===0?r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)"},children:"No permissions available"}):f?.map(S=>r.jsxs("div",{onClick:()=>w(S.id),style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",borderBottom:"1px solid var(--border)",background:s.permissionIds.includes(S.id)?"rgba(59, 130, 246, 0.05)":"transparent"},children:[r.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:s.permissionIds.includes(S.id)?"none":"2px solid var(--border)",background:s.permissionIds.includes(S.id)?"var(--primary)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:s.permissionIds.includes(S.id)&&r.jsx(yl,{size:14,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:S.name}),S.description&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:S.description})]})]},S.id))}),r.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[s.permissionIds.length," permission(s) selected"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:v,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p.isPending||g.isPending,children:i?"Update Role":"Create Role"})]})]})]})})]})}function tge(){const{data:e,isLoading:t}=Ye({queryKey:["driver-dashboard"],queryFn:async()=>{const{data:i}=await xe.get("/driver/dashboard");return i}});if(t)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});const n=e?.stats||{};return r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:["Welcome, ",e?.driver?.fullName||"Driver"]}),r.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:[e?.driver?.vehicleType,"  ",e?.driver?.vehiclePlateNo]})]}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Assigned Today",value:n.assignedToday||0,icon:r.jsx(Sr,{size:20}),color:"primary"}),r.jsx(lt,{title:"Awaiting Accept",value:n.awaitingAcceptance||0,icon:r.jsx(Dt,{size:20}),color:"warning"}),r.jsx(lt,{title:"In Transit",value:n.inTransit||0,icon:r.jsx(fn,{size:20}),color:"info"}),r.jsx(lt,{title:"Delivered Today",value:n.deliveredToday||0,icon:r.jsx(yt,{size:20}),color:"success"}),r.jsx(lt,{title:"Failed",value:n.failed||0,icon:r.jsx(vr,{size:20}),color:"danger"})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:"Upcoming Deliveries"}),r.jsxs(yr,{to:"/driver/shipments",className:"btn btn-sm btn-outline",children:["View All",r.jsx(bc,{size:14})]})]}),e?.nextDeliveries?.length>0?r.jsx("div",{style:{padding:"1rem"},children:e.nextDeliveries.map(i=>r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600,fontFamily:"monospace"},children:i.shipmentNumber}),r.jsx(Wn,{status:i.status,size:"sm"}),i.priority==="URGENT"&&r.jsx("span",{className:"badge badge-danger",children:"Urgent"})]}),r.jsx("div",{style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:i.customer?.nameEn||i.customer?.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Fs,{size:12}),i.customer?.city||"N/A"]}),i.scheduledDeliveryAt&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Dt,{size:12}),Ke(new Date(i.scheduledDeliveryAt),"HH:mm")]}),r.jsxs("span",{children:[i.orders?.length||0," orders"]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.customer?.mobile&&r.jsx("a",{href:`tel:${i.customer.mobile}`,className:"btn btn-sm btn-outline",children:r.jsx(hu,{size:14})}),r.jsxs(yr,{to:`/driver/shipments/${i.id}`,className:"btn btn-sm btn-primary",children:["Open",r.jsx(bc,{size:14})]})]})]},i.id))}):r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No pending deliveries"})]})]})}function rge(){const[e,t]=P.useState({}),n=Tr(),i=Ei(),{data:a,isLoading:s}=Ye({queryKey:["driver-shipments",e],queryFn:async()=>{const{data:d}=await xe.get("/driver/shipments",{params:e});return d}}),l=ft({mutationFn:async d=>xe.post(`/driver/shipments/${d}/accept`),onSuccess:()=>{n.invalidateQueries({queryKey:["driver-shipments"]}),i.success("Accepted","Shipment accepted successfully")},onError:d=>{const h=Er(d);i.error("Failed",h?.userMessage||"Failed to accept shipment")}});return s?r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.25rem"},children:"My Shipments"}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:"View and manage your assigned deliveries"})]})}),r.jsx("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[r.jsx(ho,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search shipment...",className:"form-input",style:{paddingLeft:"2.25rem"},value:e.search||"",onChange:d=>t(h=>({...h,search:d.target.value}))})]}),r.jsxs("select",{className:"form-select",style:{width:"180px"},value:e.status||"",onChange:d=>t(h=>({...h,status:d.target.value})),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"ASSIGNED_TO_DRIVER",children:"Awaiting Accept"}),r.jsx("option",{value:"ACCEPTED_BY_DRIVER",children:"Accepted"}),r.jsx("option",{value:"PICKED_UP",children:"Picked Up"}),r.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),r.jsx("option",{value:"ARRIVED",children:"Arrived"}),r.jsx("option",{value:"DELIVERED",children:"Delivered"}),r.jsx("option",{value:"DELIVERY_FAILED",children:"Failed"})]})]})}),r.jsxs("div",{className:"card",children:[r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("h3",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:["Shipments (",a?.length||0,")"]})}),a?.length>0?r.jsx("div",{style:{padding:"1rem"},children:a.map(d=>r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.75rem",border:d.status==="ASSIGNED_TO_DRIVER"?"2px solid var(--warning)":"none"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[r.jsx("span",{style:{fontWeight:600,fontFamily:"monospace"},children:d.shipmentNumber}),r.jsx(Wn,{status:d.status,size:"sm"}),d.priority==="URGENT"&&r.jsx("span",{className:"badge badge-danger",children:"Urgent"})]}),r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500},children:d.customer?.nameEn||d.customer?.name})]}),r.jsxs("div",{style:{textAlign:"right",fontSize:"0.75rem",color:"var(--text-muted)"},children:[d.orders?.length||0," orders"]})]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",marginBottom:"0.75rem"},children:r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--text-muted)"},children:[r.jsx(Fs,{size:14}),d.deliveryAddress||d.customer?.address||"N/A"]})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.75rem"},children:[d.scheduledDeliveryAt&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Dt,{size:12}),"Deliver by ",Ke(new Date(d.scheduledDeliveryAt),"MMM dd, HH:mm")]}),d.customer?.city&&r.jsx("span",{children:d.customer.city})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[d.customer?.mobile&&r.jsxs("a",{href:`tel:${d.customer.mobile}`,className:"btn btn-sm btn-outline",children:[r.jsx(hu,{size:14}),"Call"]}),d.status==="ASSIGNED_TO_DRIVER"&&r.jsxs("button",{className:"btn btn-sm btn-success",onClick:()=>l.mutate(d.id),disabled:l.isPending,children:[r.jsx(yt,{size:14}),"Accept"]}),r.jsxs(yr,{to:`/driver/shipments/${d.id}`,className:"btn btn-sm btn-primary",children:["Open",r.jsx(bc,{size:14})]})]})]},d.id))}):r.jsx("div",{style:{padding:"2rem"},children:r.jsx(Bs,{title:"No shipments found",message:"You have no assigned shipments at this time",icon:"truck"})})]})]})}const t5=[{status:"ASSIGNED_TO_DRIVER",label:"Assigned"},{status:"ACCEPTED_BY_DRIVER",label:"Accepted"},{status:"PICKED_UP",label:"Picked Up"},{status:"IN_TRANSIT",label:"In Transit"},{status:"ARRIVED",label:"Arrived"},{status:"DELIVERED",label:"Delivered"}];function nge(){const{id:e}=nf(),t=Cn(),[n,i]=P.useState(!1),[a,s]=P.useState(!1),[l,d]=P.useState(null),[h,f]=P.useState(!1),p=P.useRef(null),g=P.useRef(null),j=Tr(),v=Ei(),{data:b,isLoading:w}=Ye({queryKey:["driver-shipment",e],queryFn:async()=>{const{data:G}=await xe.get(`/driver/shipments/${e}`);return G},enabled:!!e}),S=ft({mutationFn:async()=>xe.post(`/driver/shipments/${e}/accept`),onSuccess:()=>{j.invalidateQueries({queryKey:["driver-shipment",e]}),v.success("Accepted","Shipment accepted")},onError:G=>{const ae=Er(G);v.error("Failed",ae?.userMessage||"Failed to accept")}}),_=ft({mutationFn:async()=>xe.post(`/driver/shipments/${e}/pickup`,{latitude:l?.lat,longitude:l?.lng}),onSuccess:()=>{j.invalidateQueries({queryKey:["driver-shipment",e]}),v.success("Picked Up","Shipment picked up")},onError:G=>{const ae=Er(G);v.error("Failed",ae?.userMessage||"Failed to confirm pickup")}}),E=ft({mutationFn:async()=>xe.post(`/driver/shipments/${e}/transit`,{latitude:l?.lat,longitude:l?.lng}),onSuccess:()=>{j.invalidateQueries({queryKey:["driver-shipment",e]}),v.success("In Transit","Started transit")},onError:G=>{const ae=Er(G);v.error("Failed",ae?.userMessage||"Failed to start transit")}}),D=ft({mutationFn:async()=>xe.post(`/driver/shipments/${e}/arrived`,{latitude:l?.lat,longitude:l?.lng}),onSuccess:()=>{j.invalidateQueries({queryKey:["driver-shipment",e]}),v.success("Arrived","Marked as arrived")},onError:G=>{const ae=Er(G);v.error("Failed",ae?.userMessage||"Failed to mark arrived")}}),W=ft({mutationFn:async G=>xe.post(`/driver/shipments/${e}/deliver`,G,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:()=>{j.invalidateQueries({queryKey:["driver-shipment",e]}),i(!1),v.success("Delivered","Delivery confirmed with proof"),t("/driver/shipments")},onError:G=>{const ae=Er(G);v.error("Failed",ae?.userMessage||"Failed to confirm delivery")}}),K=ft({mutationFn:async G=>xe.post(`/driver/shipments/${e}/fail`,G),onSuccess:()=>{j.invalidateQueries({queryKey:["driver-shipment",e]}),s(!1),v.success("Reported","Delivery failure reported")},onError:G=>{const ae=Er(G);v.error("Failed",ae?.userMessage||"Failed to report")}}),B=()=>{if(!navigator.geolocation){v.error("Error","Geolocation is not supported");return}f(!0),navigator.geolocation.getCurrentPosition(G=>{d({lat:G.coords.latitude,lng:G.coords.longitude}),f(!1),v.success("Location","GPS location captured")},G=>{f(!1),v.error("Error","Failed to get location: "+G.message)},{enableHighAccuracy:!0,timeout:1e4})},F=G=>{G.preventDefault();const ae=new FormData(G.currentTarget);if(!ae.get("receiverName")?.trim()){v.error("Required","Receiver name is required");return}if(!l){v.error("Required","Please capture GPS location before confirming delivery");return}ae.append("latitude",l.lat.toString()),ae.append("longitude",l.lng.toString());const Ne=p.current?.files;if(!Ne||Ne.length===0){v.error("Required","Please upload at least one delivery photo");return}for(let ie=0;ie<Ne.length;ie++)ae.append("photos",Ne[ie]);const z=g.current?.files?.[0];z&&ae.append("signature",z),W.mutate(ae)},H=G=>{G.preventDefault();const ae=new FormData(G.currentTarget);K.mutate({reasonCode:ae.get("reasonCode"),notes:ae.get("notes"),latitude:l?.lat,longitude:l?.lng})},I=()=>b?t5.findIndex(G=>G.status===b.status):-1;if(w)return r.jsx("div",{className:"loading-overlay",children:r.jsx("div",{className:"spinner"})});if(!b)return r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsx("h3",{children:"Shipment not found"}),r.jsx(yr,{to:"/driver/shipments",className:"btn btn-primary",style:{marginTop:"1rem"},children:"Back to Shipments"})]});const R=I(),Y=["DELIVERED","DELIVERY_FAILED","CANCELLED","RETURNED"].includes(b.status);return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(yr,{to:"/driver/shipments",className:"btn btn-secondary btn-sm",children:r.jsx(pd,{size:16})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,margin:0},children:b.shipmentNumber}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:b.customer?.nameEn||b.customer?.name})]}),r.jsx(Wn,{status:b.status,size:"md"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",marginBottom:"1rem"},children:[r.jsx("div",{style:{position:"absolute",top:"15px",left:"30px",right:"30px",height:"2px",backgroundColor:"var(--border)",zIndex:0}}),r.jsx("div",{style:{position:"absolute",top:"15px",left:"30px",width:R>=0?`${R/(t5.length-1)*100}%`:"0%",maxWidth:"calc(100% - 60px)",height:"2px",backgroundColor:"var(--primary)",zIndex:1}}),t5.map((G,ae)=>{const se=R>=ae,Ne=R===ae;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:2,flex:1},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:se?"var(--primary)":"var(--bg-secondary)",border:Ne?"3px solid var(--primary)":"2px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",color:se?"white":"var(--text-muted)",fontSize:"0.75rem",fontWeight:600},children:se?r.jsx(yt,{size:14}):ae+1}),r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.625rem",fontWeight:Ne?600:400,color:se?"var(--text-primary)":"var(--text-muted)",textAlign:"center"},children:G.label})]},G.status)})]})}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Delivery Information"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(Fs,{size:18,style:{marginTop:"2px",color:"var(--primary)"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Address"}),r.jsx("div",{style:{fontWeight:500},children:b.deliveryAddress||b.customer?.address||"Not specified"}),b.customer?.city&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:b.customer.city}),b.deliveryLat&&r.jsxs("a",{href:`https://www.google.com/maps?q=${b.deliveryLat},${b.deliveryLng}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline",style:{marginTop:"0.5rem"},children:[r.jsx(YH,{size:14}),"Navigate"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(hu,{size:18,style:{marginTop:"2px",color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Contact"}),r.jsx("a",{href:`tel:${b.customer?.mobile||b.customer?.phone}`,style:{fontWeight:500},children:b.customer?.mobile||b.customer?.phone||"N/A"})]})]}),b.scheduledDeliveryAt&&r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(Dt,{size:18,style:{marginTop:"2px",color:"var(--primary)"}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Deliver By"}),r.jsx("div",{style:{fontWeight:500},children:Ke(new Date(b.scheduledDeliveryAt),"MMM dd, HH:mm")})]})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:["Orders (",b.orders?.length||0,")"]}),b.orders?.map(G=>r.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:500},children:G.orderNumber}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:G.product?.name})]},G.id)),b.driverNotes&&r.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"var(--warning-light)",borderRadius:"var(--radius)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--warning)",fontWeight:600},children:"Instructions"}),r.jsx("div",{style:{fontSize:"0.875rem"},children:b.driverNotes})]})]})]}),!Y&&r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Actions"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:[r.jsxs("button",{className:"btn btn-secondary",onClick:B,disabled:h,children:[r.jsx(Fs,{size:16}),h?"Getting Location...":l?"Location Captured":"Capture Location"]}),l&&r.jsxs("span",{style:{display:"flex",alignItems:"center",fontSize:"0.75rem",color:"var(--success)"},children:[r.jsx(yt,{size:14,style:{marginRight:"0.25rem"}}),l.lat.toFixed(4),", ",l.lng.toFixed(4)]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[b.status==="ASSIGNED_TO_DRIVER"&&r.jsxs("button",{className:"btn btn-success",onClick:()=>S.mutate(),disabled:S.isPending,children:[r.jsx(yt,{size:16}),"Accept Shipment"]}),b.status==="ACCEPTED_BY_DRIVER"&&r.jsxs("button",{className:"btn btn-primary",onClick:()=>_.mutate(),disabled:_.isPending,children:[r.jsx(Sr,{size:16}),"Confirm Pickup"]}),b.status==="PICKED_UP"&&r.jsxs("button",{className:"btn btn-primary",onClick:()=>E.mutate(),disabled:E.isPending,children:[r.jsx(fn,{size:16}),"Start Transit"]}),b.status==="IN_TRANSIT"&&r.jsxs("button",{className:"btn btn-primary",onClick:()=>D.mutate(),disabled:D.isPending,children:[r.jsx(Fs,{size:16}),"Mark Arrived"]}),["ARRIVED","IN_TRANSIT"].includes(b.status)&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"btn btn-success",onClick:()=>i(!0),children:[r.jsx(yt,{size:16}),"Complete Delivery"]}),r.jsxs("button",{className:"btn btn-danger",onClick:()=>s(!0),children:[r.jsx(vr,{size:16}),"Report Failed"]})]})]})]}),b.proofOfDelivery&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem"},children:"Proof of Delivery"}),r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Receiver"}),r.jsx("div",{style:{fontWeight:500},children:b.proofOfDelivery.receiverName})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivered At"}),r.jsx("div",{children:Ke(new Date(b.proofOfDelivery.deliveredAt),"MMM dd, HH:mm")})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"GPS"}),r.jsxs("div",{children:[b.proofOfDelivery.gpsLat?.toFixed(4),", ",b.proofOfDelivery.gpsLng?.toFixed(4)]})]})]})]}),n&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Confirm Delivery"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(!1),children:""})]}),r.jsxs("form",{onSubmit:F,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Receiver Name *"}),r.jsx("input",{type:"text",name:"receiverName",className:"form-input",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Receiver Mobile"}),r.jsx("input",{type:"tel",name:"receiverMobile",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Delivery Photos *"}),r.jsx("input",{type:"file",ref:p,accept:"image/*",multiple:!0,className:"form-input"}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"At least one photo required"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Signature Image"}),r.jsx("input",{type:"file",ref:g,accept:"image/*",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{name:"notes",className:"form-textarea",rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"GPS Location *"}),l?r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--success)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",backgroundColor:"var(--success-light)",borderRadius:"var(--radius)"},children:[r.jsx(yt,{size:14}),l.lat.toFixed(4),", ",l.lng.toFixed(4)]}):r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--danger)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",backgroundColor:"var(--danger-light)",borderRadius:"var(--radius)"},children:[r.jsx(vr,{size:14}),'GPS not captured - use "Capture Location" button first']})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-success",disabled:W.isPending,children:W.isPending?"Confirming...":"Confirm Delivery"})]})]})]})}),a&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Report Delivery Failed"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>s(!1),children:""})]}),r.jsxs("form",{onSubmit:H,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Reason *"}),r.jsxs("select",{name:"reasonCode",className:"form-select",required:!0,children:[r.jsx("option",{value:"",children:"Select Reason"}),r.jsx("option",{value:"CUSTOMER_NOT_AVAILABLE",children:"Customer not available"}),r.jsx("option",{value:"WRONG_ADDRESS",children:"Wrong address"}),r.jsx("option",{value:"CUSTOMER_REFUSED",children:"Customer refused"}),r.jsx("option",{value:"ACCESS_ISSUE",children:"Access issue"}),r.jsx("option",{value:"OTHER",children:"Other"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes"}),r.jsx("textarea",{name:"notes",className:"form-textarea",rows:3,placeholder:"Additional details..."})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-danger",disabled:K.isPending,children:K.isPending?"Reporting...":"Report Failed"})]})]})]})})]})}const r5=[{value:"RAW_MATERIAL",label:"Raw Material"},{value:"CONSUMABLE",label:"Consumable"},{value:"REAGENT",label:"Reagent"},{value:"PACKAGING",label:"Packaging"},{value:"RADIOISOTOPE",label:"Radioisotope"},{value:"TARGET_MATERIAL",label:"Target Material"},{value:"SOLVENT",label:"Solvent"},{value:"BUFFER",label:"Buffer"},{value:"FILTER",label:"Filter"},{value:"CONTAINER",label:"Container"},{value:"EXCIPIENT",label:"Excipient"},{value:"REFERENCE_STANDARD",label:"Reference Standard"}],vv=[{value:"ACTIVE",label:"Active",color:"var(--success)"},{value:"INACTIVE",label:"Inactive",color:"var(--text-muted)"},{value:"DISCONTINUED",label:"Discontinued",color:"var(--error)"},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"var(--warning)"}];function ige(){const[e,t]=P.useState(!1),[n,i]=P.useState(null),[a,s]=P.useState(""),[l,d]=P.useState(""),[h,f]=P.useState(""),p=Tr(),g=Ei(),{data:j,isLoading:v}=Ye({queryKey:["materials",a,l,h],queryFn:async()=>{const F=new URLSearchParams;a&&F.append("category",a),l&&F.append("status",l),h&&F.append("search",h);const{data:H}=await xe.get(`/materials?${F.toString()}`);return H}}),{data:b}=Ye({queryKey:["suppliers"],queryFn:async()=>{const{data:F}=await xe.get("/suppliers");return F}}),w=ft({mutationFn:async F=>n?xe.put(`/materials/${n.id}`,F):xe.post("/materials",F),onSuccess:()=>{p.invalidateQueries({queryKey:["materials"]}),t(!1),i(null),g.success(n?"Material Updated":"Material Created",n?"Material details have been updated":"New material has been added")},onError:F=>{const H=Er(F);g.error("Error",H?.userMessage||"Failed to save material")}}),S=ft({mutationFn:async F=>xe.delete(`/materials/${F}`),onSuccess:()=>{p.invalidateQueries({queryKey:["materials"]}),g.success("Material Deleted","Material has been removed")},onError:F=>{const H=Er(F);g.error("Error",H?.userMessage||"Failed to delete material")}}),_=F=>{F.preventDefault();const H=new FormData(F.currentTarget);w.mutate({code:H.get("code"),name:H.get("name"),nameAr:H.get("nameAr")||null,description:H.get("description")||null,category:H.get("category"),unit:H.get("unit"),minStockLevel:parseFloat(H.get("minStockLevel"))||0,reorderPoint:parseFloat(H.get("reorderPoint"))||0,reorderQuantity:parseFloat(H.get("reorderQuantity"))||0,leadTimeDays:parseInt(H.get("leadTimeDays"))||7,shelfLifeDays:parseInt(H.get("shelfLifeDays"))||null,storageConditions:H.get("storageConditions")||null,handlingInstructions:H.get("handlingInstructions")||null,hazardClass:H.get("hazardClass")||null,casNumber:H.get("casNumber")||null,supplierId:H.get("supplierId")||null,unitCost:parseFloat(H.get("unitCost"))||null,currency:H.get("currency")||"SAR",status:H.get("status")||"ACTIVE",requiresQC:H.get("requiresQC")==="on",isRadioactive:H.get("isRadioactive")==="on",halfLifeMinutes:parseFloat(H.get("halfLifeMinutes"))||null})},E=F=>r5.find(H=>H.value===F)?.label||F,D=F=>({color:vv.find(I=>I.value===F)?.color||"var(--text-muted)"}),W=j?.filter(F=>F.status==="ACTIVE").length||0,K=j?.filter(F=>F.isRadioactive).length||0;return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{children:"Materials"}),r.jsx("p",{className:"text-muted",children:"Manage raw materials, reagents, and consumables"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>t(!0),children:[r.jsx(Lr,{size:20}),"Add Material"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Materials",value:j?.length||0,icon:r.jsx(Sr,{size:24}),color:"primary"}),r.jsx(lt,{title:"Active",value:W,icon:r.jsx(wc,{size:24}),color:"success"}),r.jsx(lt,{title:"Radioactive",value:K,icon:r.jsx(sm,{size:24}),color:"warning"}),r.jsx(lt,{title:"Low Stock",value:0,icon:r.jsx(vr,{size:24}),color:"danger"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[r.jsx(ho,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search materials...",value:h,onChange:F=>f(F.target.value),className:"form-input",style:{paddingLeft:"40px"}})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(sf,{size:18,style:{color:"var(--text-muted)"}}),r.jsxs("select",{value:a,onChange:F=>s(F.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Categories"}),r5.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))]}),r.jsxs("select",{value:l,onChange:F=>d(F.target.value),className:"form-select",style:{minWidth:"130px"},children:[r.jsx("option",{value:"",children:"All Statuses"}),vv.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))]})]})]})}),r.jsx("div",{className:"card",children:v?r.jsx("div",{className:"loading-spinner",style:{padding:"3rem",textAlign:"center"},children:"Loading..."}):j?.length===0?r.jsx(Bs,{icon:"package",title:"No Materials Found",message:h||a||l?"No materials match your search criteria":"Get started by adding your first material",ctaLabel:!h&&!a&&!l?"Add Material":void 0,onCta:!h&&!a&&!l?()=>t(!0):void 0}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Unit"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Used In"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:j?.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("code",{style:{fontWeight:600},children:F.code}),F.isRadioactive&&r.jsx("span",{title:"Radioactive",children:r.jsx(sm,{size:14,style:{color:"var(--warning)"}})})]})}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500},children:F.name}),F.nameAr&&r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",direction:"rtl"},children:F.nameAr})]})}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:{background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:E(F.category)})}),r.jsx("td",{children:F.unit}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:{background:`${D(F.status).color}20`,color:D(F.status).color},children:vv.find(H=>H.value===F.status)?.label||F.status})}),r.jsx("td",{children:F.supplier?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Fo,{size:14,style:{color:"var(--text-muted)"}}),F.supplier.name]}):r.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),r.jsx("td",{children:r.jsxs("span",{style:{color:F._count?.recipeComponents>0?"var(--primary)":"var(--text-muted)"},children:[F._count?.recipeComponents||0," recipes"]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{i(F),t(!0)},title:"Edit",children:r.jsx($l,{size:14})}),F._count?.recipeComponents===0&&r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{confirm("Are you sure you want to delete this material?")&&S.mutate(F.id)},title:"Delete",style:{color:"var(--error)"},children:r.jsx(mi,{size:14})})]})})]},F.id))})]})})}),e&&r.jsx("div",{className:"modal-overlay",onClick:()=>{t(!1),i(null)},children:r.jsxs("div",{className:"modal",onClick:F=>F.stopPropagation(),style:{maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:n?"Edit Material":"Add Material"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{t(!1),i(null)},children:r.jsx(hn,{size:20})})]}),r.jsxs("form",{onSubmit:_,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Material Code *"}),r.jsx("input",{type:"text",name:"code",className:"form-input",defaultValue:n?.code||"",required:!0,placeholder:"e.g., MAT-001"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Category *"}),r.jsx("select",{name:"category",className:"form-select",defaultValue:n?.category||"RAW_MATERIAL",required:!0,children:r5.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (English) *"}),r.jsx("input",{type:"text",name:"name",className:"form-input",defaultValue:n?.name||"",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name (Arabic)"}),r.jsx("input",{type:"text",name:"nameAr",className:"form-input",defaultValue:n?.nameAr||"",dir:"rtl"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-input",rows:2,defaultValue:n?.description||""})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Unit *"}),r.jsx("input",{type:"text",name:"unit",className:"form-input",defaultValue:n?.unit||"",required:!0,placeholder:"e.g., mL, g, pcs"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Status"}),r.jsx("select",{name:"status",className:"form-select",defaultValue:n?.status||"ACTIVE",children:vv.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Supplier"}),r.jsxs("select",{name:"supplierId",className:"form-select",defaultValue:n?.supplierId||"",children:[r.jsx("option",{value:"",children:"Select Supplier"}),b?.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Min Stock Level"}),r.jsx("input",{type:"number",name:"minStockLevel",className:"form-input",defaultValue:n?.minStockLevel||0,min:"0",step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Reorder Point"}),r.jsx("input",{type:"number",name:"reorderPoint",className:"form-input",defaultValue:n?.reorderPoint||0,min:"0",step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Reorder Qty"}),r.jsx("input",{type:"number",name:"reorderQuantity",className:"form-input",defaultValue:n?.reorderQuantity||0,min:"0",step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lead Time (days)"}),r.jsx("input",{type:"number",name:"leadTimeDays",className:"form-input",defaultValue:n?.leadTimeDays||7,min:"0"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Shelf Life (days)"}),r.jsx("input",{type:"number",name:"shelfLifeDays",className:"form-input",defaultValue:n?.shelfLifeDays||"",min:"0"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Unit Cost"}),r.jsx("input",{type:"number",name:"unitCost",className:"form-input",defaultValue:n?.unitCost||"",min:"0",step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Currency"}),r.jsxs("select",{name:"currency",className:"form-select",defaultValue:n?.currency||"SAR",children:[r.jsx("option",{value:"SAR",children:"SAR"}),r.jsx("option",{value:"USD",children:"USD"}),r.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Storage Conditions"}),r.jsx("input",{type:"text",name:"storageConditions",className:"form-input",defaultValue:n?.storageConditions||"",placeholder:"e.g., 2-8C, Room Temperature"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Hazard Class"}),r.jsx("input",{type:"text",name:"hazardClass",className:"form-input",defaultValue:n?.hazardClass||""})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"CAS Number"}),r.jsx("input",{type:"text",name:"casNumber",className:"form-input",defaultValue:n?.casNumber||"",placeholder:"e.g., 7732-18-5"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Handling Instructions"}),r.jsx("textarea",{name:"handlingInstructions",className:"form-input",rows:2,defaultValue:n?.handlingInstructions||""})]}),r.jsxs("div",{style:{display:"flex",gap:"2rem",marginTop:"1rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",name:"requiresQC",defaultChecked:n?.requiresQC||!1}),"Requires QC"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",name:"isRadioactive",defaultChecked:n?.isRadioactive||!1}),r.jsx(sm,{size:16,style:{color:"var(--warning)"}}),"Radioactive Material"]})]}),r.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[r.jsx("label",{className:"form-label",children:"Half-Life (minutes) - for radioactive materials"}),r.jsx("input",{type:"number",name:"halfLifeMinutes",className:"form-input",defaultValue:n?.halfLifeMinutes||"",min:"0",step:"0.01"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t(!1),i(null)},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w.isPending,children:w.isPending?"Saving...":n?"Update Material":"Create Material"})]})]})]})})]})}function F7({isOpen:e,onClose:t,onSuccess:n,scope:i,entityType:a,entityId:s,title:l="Electronic Signature Required",description:d,metadata:h}){const[f,p]=P.useState(""),[g,j]=P.useState(""),[v,b]=P.useState(""),[w,S]=P.useState(""),{data:_}=Ye({queryKey:["esignature-meanings",i],queryFn:async()=>{const{data:B}=await xe.get(`/esignatures/meanings/${i}`);return B},enabled:e}),E=ft({mutationFn:async()=>{const{data:B}=await xe.post("/esignatures/sign",{password:f,scope:i,entityType:a,entityId:s,meaning:g,comment:v||void 0,metadata:h});return B},onSuccess:B=>{Ur.success("Signed successfully"),p(""),j(""),b(""),S(""),n(B.signature),t()},onError:B=>{S(B.response?.data?.error||"Signature failed")}}),D=B=>{if(B.preventDefault(),S(""),!f){S("Password is required for authentication");return}if(!g){S("Please select the meaning of your signature");return}E.mutate()},W=()=>{p(""),j(""),b(""),S(""),t()};if(!e)return null;const K={BATCH_RELEASE:"Batch Release",QC_APPROVAL:"QC Approval",DEVIATION_APPROVAL:"Deviation Approval",MASTERDATA_CHANGE:"Master Data Change",RECIPE_ACTIVATION:"Recipe Activation",PO_APPROVAL:"Purchase Order Approval",FINANCIAL_APPROVAL:"Financial Approval",DISPENSING_APPROVAL:"Dispensing Approval"};return r.jsx("div",{className:"modal-overlay",onClick:W,children:r.jsxs("div",{className:"modal",style:{maxWidth:"480px"},onClick:B=>B.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--primary) 0%, #1e40af 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Jp,{size:20,style:{color:"white"}})}),r.jsxs("div",{children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:l}),r.jsx("span",{className:"badge badge-primary",style:{fontSize:"0.6875rem",marginTop:"0.25rem"},children:K[i]||i})]})]}),r.jsx("button",{onClick:W,style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("form",{onSubmit:D,children:[r.jsxs("div",{className:"modal-body",children:[d&&r.jsx("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",marginBottom:"1.25rem",fontSize:"0.875rem",color:"var(--text-muted)"},children:d}),r.jsxs("div",{style:{padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius)",marginBottom:"1.25rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(x5,{size:18,style:{color:"var(--primary)",flexShrink:0,marginTop:"2px"}}),r.jsxs("div",{style:{fontSize:"0.8125rem"},children:[r.jsx("strong",{children:"GMP Compliance Notice"}),r.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:"This action requires your electronic signature. Your password will be verified and the signature will be permanently recorded with timestamp."})]})]}),w&&r.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--danger)",fontSize:"0.875rem"},children:[r.jsx(In,{size:16}),w]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Meaning of Signature *"}),r.jsxs("select",{className:"form-select",value:g,onChange:B=>j(B.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select the meaning of your signature"}),_?.map((B,F)=>r.jsx("option",{value:B,children:B},F))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Comment / Reason (Optional)"}),r.jsx("textarea",{className:"form-textarea",value:v,onChange:B=>b(B.target.value),placeholder:"Add any additional comments or reasons...",rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(x5,{size:14,style:{marginRight:"0.375rem"}}),"Enter Your Password to Sign *"]}),r.jsx("input",{type:"password",className:"form-input",value:f,onChange:B=>p(B.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password"})]}),r.jsxs("div",{style:{padding:"0.625rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(yt,{size:14,style:{color:"var(--success)"}}),"Signature will be timestamped: ",new Date().toLocaleString()]})]}),r.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid var(--border)",padding:"1rem 1.5rem"},children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:W,disabled:E.isPending,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E.isPending||!f||!g,style:{minWidth:"140px"},children:E.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Ch,{size:16,className:"animate-spin"}),"Signing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Jp,{size:16}),"Sign & Confirm"]})})]})]})]})})}const yD={BATCH_RELEASE:{bg:"rgba(34, 197, 94, 0.1)",color:"var(--success)"},QC_APPROVAL:{bg:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},DEVIATION_APPROVAL:{bg:"rgba(234, 179, 8, 0.1)",color:"var(--warning)"},MASTERDATA_CHANGE:{bg:"rgba(168, 85, 247, 0.1)",color:"#a855f7"},RECIPE_ACTIVATION:{bg:"rgba(16, 185, 129, 0.1)",color:"#10b981"},PO_APPROVAL:{bg:"rgba(20, 184, 166, 0.1)",color:"#14b8a6"},FINANCIAL_APPROVAL:{bg:"rgba(99, 102, 241, 0.1)",color:"#6366f1"},DISPENSING_APPROVAL:{bg:"rgba(249, 115, 22, 0.1)",color:"#f97316"}},vD={BATCH_RELEASE:"Batch Release",QC_APPROVAL:"QC Approval",DEVIATION_APPROVAL:"Deviation Approval",MASTERDATA_CHANGE:"Master Data Change",RECIPE_ACTIVATION:"Recipe Activation",PO_APPROVAL:"PO Approval",FINANCIAL_APPROVAL:"Financial Approval",DISPENSING_APPROVAL:"Dispensing"};function age({entityType:e,entityId:t,scope:n,title:i="Electronic Signatures",compact:a=!1}){const{data:s,isLoading:l}=Ye({queryKey:["esignatures",e,t,n],queryFn:async()=>{const d=n?`?scope=${n}`:"",{data:h}=await xe.get(`/esignatures/entity/${e}/${t}${d}`);return h},enabled:!!t});return l?r.jsx("div",{style:{padding:a?"0.75rem":"1rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.875rem"},children:"Loading signatures..."}):!s||s.length===0?a?r.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",fontStyle:"italic"},children:"No signatures recorded"}):r.jsxs("div",{style:{padding:"1.5rem",textAlign:"center",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius)"},children:[r.jsx(Jp,{size:24,style:{opacity:.3,marginBottom:"0.5rem"}}),r.jsx("div",{style:{fontSize:"0.875rem"},children:"No electronic signatures recorded"})]}):a?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:s.map(d=>{const h=yD[d.scope]||{bg:"var(--bg-secondary)",color:"var(--text)"};return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:h.bg,borderRadius:"var(--radius)",fontSize:"0.75rem"},children:[r.jsx(yt,{size:14,style:{color:h.color,flexShrink:0}}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("span",{style:{fontWeight:500},children:d.signedBy.name}),r.jsx("span",{style:{color:"var(--text-muted)",marginLeft:"0.375rem"},children:Ke(new Date(d.signedAt),"MMM d, HH:mm")})]}),r.jsx("span",{className:"badge",style:{background:h.bg,color:h.color,fontSize:"0.625rem"},children:vD[d.scope]||d.scope})]},d.id)})}):r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border)"},children:[r.jsx(Jp,{size:18,style:{color:"var(--primary)"}}),r.jsx("h3",{style:{fontWeight:600,fontSize:"0.9375rem",margin:0},children:i}),r.jsxs("span",{className:"badge badge-default",style:{marginLeft:"auto"},children:[s.length," signature",s.length!==1?"s":""]})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(d=>{const h=yD[d.scope]||{bg:"var(--bg-secondary)",color:"var(--text)"};return r.jsxs("div",{style:{padding:"0.875rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",borderLeft:`3px solid ${h.color}`},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:h.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Vl,{size:14,style:{color:h.color}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.875rem"},children:d.signedBy.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:d.signedBy.email})]})]}),r.jsx("span",{className:"badge",style:{background:h.bg,color:h.color,fontSize:"0.6875rem"},children:vD[d.scope]||d.scope})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"0.8125rem",marginBottom:"0.375rem"},children:[r.jsx(ii,{size:14,style:{color:"var(--text-muted)"}}),r.jsx("span",{children:d.meaning})]}),d.comment&&r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",fontStyle:"italic",marginBottom:"0.375rem",paddingLeft:"1.25rem"},children:['"',d.comment,'"']}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[r.jsx(Dt,{size:12}),Ke(new Date(d.signedAt),"MMMM d, yyyy 'at' HH:mm:ss")]})]},d.id)})})]})}const xv=[{value:"DRAFT",label:"Draft",color:"var(--text-muted)",icon:ii},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"var(--warning)",icon:Dt},{value:"ACTIVE",label:"Active",color:"var(--success)",icon:yt},{value:"SUPERSEDED",label:"Superseded",color:"var(--text-muted)",icon:kH},{value:"OBSOLETE",label:"Obsolete",color:"var(--error)",icon:In}];function sge(){const[e,t]=P.useState(!1),[n,i]=P.useState(null),[a,s]=P.useState(null),[l,d]=P.useState(""),[h,f]=P.useState(""),[p,g]=P.useState(""),[j,v]=P.useState(!1),[b,w]=P.useState(null),[S,_]=P.useState({}),E=Tr(),D=Ei(),{data:W,isLoading:K}=Ye({queryKey:["recipes",l,h,p],queryFn:async()=>{const ue=new URLSearchParams;l&&ue.append("status",l),h&&ue.append("productId",h),p&&ue.append("search",p);const{data:Q}=await xe.get(`/recipes?${ue.toString()}`);return Q}}),{data:B}=Ye({queryKey:["products"],queryFn:async()=>{const{data:ue}=await xe.get("/products");return ue}}),{data:F}=Ye({queryKey:["materials"],queryFn:async()=>{const{data:ue}=await xe.get("/materials?status=ACTIVE");return ue}}),{data:H}=Ye({queryKey:["recipe",a?.id],queryFn:async()=>{if(!a?.id)return null;const{data:ue}=await xe.get(`/recipes/${a.id}`);return ue},enabled:!!a?.id}),I=ft({mutationFn:async ue=>n?xe.put(`/recipes/${n.id}`,ue):xe.post("/recipes",ue),onSuccess:()=>{E.invalidateQueries({queryKey:["recipes"]}),t(!1),i(null),D.success(n?"Recipe Updated":"Recipe Created",n?"Recipe details have been updated":"New recipe has been created")},onError:ue=>{const Q=Er(ue);D.error("Error",Q?.userMessage||"Failed to save recipe")}}),R=ft({mutationFn:async ue=>xe.post(`/recipes/${ue}/submit-for-approval`),onSuccess:()=>{E.invalidateQueries({queryKey:["recipes"]}),D.success("Submitted","Recipe has been submitted for approval")},onError:ue=>{const Q=Er(ue);D.error("Error",Q?.userMessage||"Failed to submit recipe")}}),Y=ft({mutationFn:async({id:ue,signatureId:Q})=>xe.post(`/recipes/${ue}/activate`,{signatureId:Q}),onSuccess:()=>{E.invalidateQueries({queryKey:["recipes"]}),w(null),D.success("Recipe Activated","Recipe is now active and can be used in production")},onError:ue=>{const Q=Er(ue);D.error("Error",Q?.userMessage||"Failed to activate recipe")}}),G=ft({mutationFn:async ue=>xe.post(`/recipes/${ue}/create-new-version`),onSuccess:ue=>{E.invalidateQueries({queryKey:["recipes"]}),D.success("New Version Created",`Version ${ue.data.version} has been created as a draft`)},onError:ue=>{const Q=Er(ue);D.error("Error",Q?.userMessage||"Failed to create new version")}}),ae=ft({mutationFn:async ue=>xe.delete(`/recipes/${ue}`),onSuccess:()=>{E.invalidateQueries({queryKey:["recipes"]}),D.success("Recipe Deleted","Recipe has been removed")},onError:ue=>{const Q=Er(ue);D.error("Error",Q?.userMessage||"Failed to delete recipe")}}),se=ue=>{ue.preventDefault();const Q=new FormData(ue.currentTarget),V=Q.get("componentsJson"),ne=Q.get("stepsJson");I.mutate({code:Q.get("code"),name:Q.get("name"),productId:Q.get("productId"),description:Q.get("description")||null,yieldQuantity:parseFloat(Q.get("yieldQuantity")),yieldUnit:Q.get("yieldUnit"),yieldTolerance:parseFloat(Q.get("yieldTolerance"))||5,synthesisTimeMinutes:parseInt(Q.get("synthesisTimeMinutes"))||null,totalTimeMinutes:parseInt(Q.get("totalTimeMinutes"))||null,specialInstructions:Q.get("specialInstructions")||null,safetyPrecautions:Q.get("safetyPrecautions")||null,equipmentRequirements:Q.get("equipmentRequirements")||null,qualityNotes:Q.get("qualityNotes")||null,components:V?JSON.parse(V):[],steps:ne?JSON.parse(ne):[]})},Ne=ue=>{const Q=xv.find(V=>V.value===ue);return{color:Q?.color||"var(--text-muted)",Icon:Q?.icon||ii}},z=W?.filter(ue=>ue.status==="ACTIVE").length||0,ie=W?.filter(ue=>ue.status==="DRAFT").length||0,q=W?.filter(ue=>ue.status==="PENDING_APPROVAL").length||0,re=ue=>{_(Q=>({...Q,[ue]:!Q[ue]}))};return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{children:"Recipes & BOM"}),r.jsx("p",{className:"text-muted",children:"Manage product recipes and bills of materials"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>t(!0),children:[r.jsx(Lr,{size:20}),"Create Recipe"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsx(lt,{title:"Total Recipes",value:W?.length||0,icon:r.jsx(ii,{size:24}),color:"primary"}),r.jsx(lt,{title:"Active",value:z,icon:r.jsx(yt,{size:24}),color:"success"}),r.jsx(lt,{title:"Drafts",value:ie,icon:r.jsx($l,{size:24}),color:"default"}),r.jsx(lt,{title:"Pending Approval",value:q,icon:r.jsx(Dt,{size:24}),color:"warning"})]}),r.jsx("div",{className:"card",style:{marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[r.jsx(ho,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search recipes...",value:p,onChange:ue=>g(ue.target.value),className:"form-input",style:{paddingLeft:"40px"}})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(sf,{size:18,style:{color:"var(--text-muted)"}}),r.jsxs("select",{value:h,onChange:ue=>f(ue.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Products"}),B?.map(ue=>r.jsx("option",{value:ue.id,children:ue.name},ue.id))]}),r.jsxs("select",{value:l,onChange:ue=>d(ue.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Statuses"}),xv.map(ue=>r.jsx("option",{value:ue.value,children:ue.label},ue.value))]})]})]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr 400px":"1fr",gap:"1.5rem"},children:[r.jsx("div",{className:"card",children:K?r.jsx("div",{className:"loading-spinner",style:{padding:"3rem",textAlign:"center"},children:"Loading..."}):W?.length===0?r.jsx(Bs,{icon:"package",title:"No Recipes Found",message:p||l||h?"No recipes match your search criteria":"Get started by creating your first recipe",ctaLabel:!p&&!l&&!h?"Create Recipe":void 0,onCta:!p&&!l&&!h?()=>t(!0):void 0}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Recipe"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Version"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Components"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:W?.map(ue=>{const{color:Q,Icon:V}=Ne(ue.status);return r.jsxs("tr",{onClick:()=>s(ue),style:{cursor:"pointer",background:a?.id===ue.id?"var(--bg-hover)":void 0},children:[r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("code",{style:{fontWeight:600},children:ue.code}),r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:ue.name})]})}),r.jsx("td",{children:r.jsx("span",{style:{background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.85rem"},children:ue.product?.name})}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},children:["v",ue.version]})}),r.jsx("td",{children:r.jsxs("span",{className:"badge",style:{background:`${Q}20`,color:Q,display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(V,{size:14}),xv.find(ne=>ne.value===ue.status)?.label]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Sr,{size:14,style:{color:"var(--text-muted)"}}),ue._count?.components||0,r.jsx("span",{style:{color:"var(--text-muted)",margin:"0 0.25rem"},children:"|"}),r.jsx(RH,{size:14,style:{color:"var(--text-muted)"}}),ue._count?.steps||0]})}),r.jsx("td",{onClick:ne=>ne.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[ue.status==="DRAFT"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{i(ue),t(!0)},title:"Edit",children:r.jsx($l,{size:14})}),r.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>R.mutate(ue.id),title:"Submit for Approval",disabled:R.isPending,children:r.jsx(qo,{size:14})}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{confirm("Delete this draft recipe?")&&ae.mutate(ue.id)},title:"Delete",style:{color:"var(--error)"},children:r.jsx(mi,{size:14})})]}),ue.status==="PENDING_APPROVAL"&&r.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{w(ue),v(!0)},title:"Activate with E-Signature",children:[r.jsx(Jp,{size:14})," Activate"]}),(ue.status==="ACTIVE"||ue.status==="SUPERSEDED")&&r.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>G.mutate(ue.id),title:"Create New Version",disabled:G.isPending,children:[r.jsx(_O,{size:14})," New Version"]})]})})]},ue.id)})})]})})}),a&&H&&r.jsxs("div",{className:"card",style:{position:"sticky",top:"1rem",maxHeight:"calc(100vh - 200px)",overflow:"auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h3",{style:{margin:0},children:[H.code," v",H.version]}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>s(null),children:r.jsx(hn,{size:16})})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Product"}),r.jsx("div",{style:{fontWeight:500},children:H.product?.name})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Status"}),r.jsx("span",{className:"badge",style:{background:`${Ne(H.status).color}20`,color:Ne(H.status).color},children:xv.find(ue=>ue.value===H.status)?.label})]}),H.description&&r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Description"}),r.jsx("div",{children:H.description})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Yield"}),r.jsxs("div",{style:{fontWeight:500},children:[H.yieldQuantity," ",H.yieldUnit]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Tolerance"}),r.jsxs("div",{children:["",H.yieldTolerance,"%"]})]})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"1rem",marginTop:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",marginBottom:"0.5rem"},onClick:()=>re(H.id),children:[S[H.id]?r.jsx(tu,{size:16}):r.jsx(uu,{size:16}),r.jsxs("h4",{style:{margin:0},children:["Bill of Materials (",H.components?.length||0,")"]})]}),S[H.id]&&r.jsx("div",{style:{marginLeft:"1.5rem"},children:H.components?.length===0?r.jsx("div",{style:{color:"var(--text-muted)",fontStyle:"italic"},children:"No components defined"}):H.components?.map(ue=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500},children:ue.material?.name}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:[ue.material?.code,ue.isCritical&&r.jsx("span",{style:{color:"var(--error)",marginLeft:"0.5rem"},children:"Critical"})]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("div",{style:{fontWeight:500},children:[ue.quantity," ",ue.unit]}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:["",ue.tolerancePercent,"%"]})]})]},ue.id))})]}),H.steps?.length>0&&r.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"1rem",marginTop:"1rem"},children:[r.jsxs("h4",{style:{marginBottom:"0.5rem"},children:["Process Steps (",H.steps.length,")"]}),H.steps.map(ue=>r.jsxs("div",{style:{padding:"0.5rem",marginBottom:"0.5rem",background:"var(--bg-secondary)",borderRadius:"4px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{background:"var(--primary)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600},children:ue.stepNumber}),r.jsx("span",{style:{fontWeight:500},children:ue.title}),ue.qualityCheckpoint&&r.jsx("span",{title:"QC Checkpoint",children:r.jsx(yt,{size:14,style:{color:"var(--success)"}})})]}),r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginLeft:"32px"},children:ue.description})]},ue.id))]}),H.activatedAt&&r.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"1rem",marginTop:"1rem"},children:[r.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Activation"}),r.jsxs("div",{style:{fontSize:"0.85rem"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Activated By:"})," ",H.activatedBy?.firstName," ",H.activatedBy?.lastName]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",new Date(H.activatedAt).toLocaleString()]})]}),H.activationSignatureId&&r.jsx("div",{style:{marginTop:"1rem"},children:r.jsx(age,{entityType:"Recipe",entityId:H.id,compact:!0})})]})]})]}),e&&r.jsx(oge,{recipe:n,products:B||[],materials:F||[],onClose:()=>{t(!1),i(null)},onSubmit:se,isPending:I.isPending}),j&&b&&r.jsx(F7,{isOpen:j,onClose:()=>{v(!1),w(null)},onSuccess:ue=>{Y.mutate({id:b.id,signatureId:ue.id}),v(!1)},scope:"RECIPE_ACTIVATION",entityType:"Recipe",entityId:b.id,title:"Activate Recipe",description:`You are about to activate recipe ${b.code} v${b.version}. This will make it the active recipe for production and supersede any previous active version.`})]})}function oge({recipe:e,products:t,materials:n,onClose:i,onSubmit:a,isPending:s}){const[l,d]=P.useState(e?.components||[]),[h,f]=P.useState(e?.steps||[]),p=()=>{d([...l,{materialId:"",quantity:0,unit:"",tolerancePercent:5,isOptional:!1,isCritical:!1}])},g=(S,_,E)=>{const D=[...l];if(D[S]={...D[S],[_]:E},_==="materialId"){const W=n.find(K=>K.id===E);W&&(D[S].unit=W.unit)}d(D)},j=S=>{d(l.filter((_,E)=>E!==S))},v=()=>{f([...h,{stepNumber:h.length+1,title:"",description:"",durationMinutes:null,qualityCheckpoint:!1}])},b=(S,_,E)=>{const D=[...h];D[S]={...D[S],[_]:E},f(D)},w=S=>{const _=h.filter((E,D)=>D!==S).map((E,D)=>({...E,stepNumber:D+1}));f(_)};return r.jsx("div",{className:"modal-overlay",onClick:i,children:r.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:e?"Edit Recipe":"Create Recipe"}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:i,children:r.jsx(hn,{size:20})})]}),r.jsxs("form",{onSubmit:S=>{S.preventDefault();const _=S.currentTarget,E=document.createElement("input");E.type="hidden",E.name="componentsJson",E.value=JSON.stringify(l),_.appendChild(E);const D=document.createElement("input");D.type="hidden",D.name="stepsJson",D.value=JSON.stringify(h),_.appendChild(D),a(S)},children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Recipe Code *"}),r.jsx("input",{type:"text",name:"code",className:"form-input",defaultValue:e?.code||"",required:!0,placeholder:"e.g., RCP-FDG-001",disabled:!!e})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Name *"}),r.jsx("input",{type:"text",name:"name",className:"form-input",defaultValue:e?.name||"",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Product *"}),r.jsxs("select",{name:"productId",className:"form-select",defaultValue:e?.productId||"",required:!0,disabled:!!e,children:[r.jsx("option",{value:"",children:"Select Product"}),t.map(S=>r.jsxs("option",{value:S.id,children:[S.code," - ",S.name]},S.id))]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-input",rows:2,defaultValue:e?.description||""})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Yield Quantity *"}),r.jsx("input",{type:"number",name:"yieldQuantity",className:"form-input",defaultValue:e?.yieldQuantity||"",required:!0,min:"0",step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Yield Unit *"}),r.jsx("input",{type:"text",name:"yieldUnit",className:"form-input",defaultValue:e?.yieldUnit||"mCi",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Tolerance %"}),r.jsx("input",{type:"number",name:"yieldTolerance",className:"form-input",defaultValue:e?.yieldTolerance||5,min:"0",step:"0.1"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Synthesis Time (min)"}),r.jsx("input",{type:"number",name:"synthesisTimeMinutes",className:"form-input",defaultValue:e?.synthesisTimeMinutes||"",min:"0"})]})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",marginTop:"1.5rem",paddingTop:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0},children:"Bill of Materials"}),r.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:p,children:[r.jsx(Lr,{size:16})," Add Material"]})]}),l.length===0?r.jsx("div",{style:{color:"var(--text-muted)",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:'No materials added yet. Click "Add Material" to add components.'}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:l.map((S,_)=>r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr auto",gap:"0.5rem",alignItems:"end",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Material"}),r.jsxs("select",{className:"form-select",value:S.materialId,onChange:E=>g(_,"materialId",E.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Select Material"}),n.map(E=>r.jsxs("option",{value:E.id,children:[E.code," - ",E.name]},E.id))]})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:E=>g(_,"quantity",parseFloat(E.target.value)),required:!0,min:"0",step:"0.01"})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Unit"}),r.jsx("input",{type:"text",className:"form-input",value:S.unit,onChange:E=>g(_,"unit",E.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Critical"}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("input",{type:"checkbox",checked:S.isCritical,onChange:E=>g(_,"isCritical",E.target.checked)}),"Yes"]})]}),r.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>j(_),style:{color:"var(--error)"},children:r.jsx(mi,{size:14})})]},_))})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",marginTop:"1.5rem",paddingTop:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0},children:"Process Steps"}),r.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:v,children:[r.jsx(Lr,{size:16})," Add Step"]})]}),h.length===0?r.jsx("div",{style:{color:"var(--text-muted)",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:'No steps defined yet. Click "Add Step" to add process steps.'}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.map((S,_)=>r.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{background:"var(--primary)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600},children:_+1}),r.jsx("input",{type:"text",className:"form-input",placeholder:"Step title",value:S.title,onChange:E=>b(_,"title",E.target.value),style:{flex:1},required:!0}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem",whiteSpace:"nowrap"},children:[r.jsx("input",{type:"checkbox",checked:S.qualityCheckpoint,onChange:E=>b(_,"qualityCheckpoint",E.target.checked)}),"QC Checkpoint"]}),r.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>w(_),style:{color:"var(--error)"},children:r.jsx(mi,{size:14})})]}),r.jsx("textarea",{className:"form-input",placeholder:"Step description",value:S.description,onChange:E=>b(_,"description",E.target.value),rows:2})]},_))})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",marginTop:"1.5rem",paddingTop:"1.5rem"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Additional Information"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Equipment Requirements"}),r.jsx("textarea",{name:"equipmentRequirements",className:"form-input",rows:2,defaultValue:e?.equipmentRequirements||""})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Safety Precautions"}),r.jsx("textarea",{name:"safetyPrecautions",className:"form-input",rows:2,defaultValue:e?.safetyPrecautions||""})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Quality Notes"}),r.jsx("textarea",{name:"qualityNotes",className:"form-input",rows:2,defaultValue:e?.qualityNotes||""})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Saving...":e?"Update Recipe":"Create Recipe"})]})]})]})})}const zp=[{value:"ACTIVE",label:"Active",color:"var(--success)"},{value:"ON_HOLD",label:"On Hold",color:"var(--warning)"},{value:"BLOCKED",label:"Blocked",color:"var(--error)"},{value:"PENDING",label:"Pending",color:"var(--text-muted)"}];function lge(){const e=Tr(),t=Ei(),[n,i]=P.useState(""),[a,s]=P.useState(""),[l,d]=P.useState(!1),[h,f]=P.useState(!1),[p,g]=P.useState(null),[j,v]=P.useState(null),[b,w]=P.useState({code:"",name:"",nameAr:"",email:"",phone:"",mobile:"",website:"",taxNumber:"",vatNumber:"",crNumber:"",bankName:"",bankBranch:"",bankAccountName:"",bankAccountNumber:"",bankIban:"",bankSwift:"",address:"",city:"",region:"",country:"Saudi Arabia",postalCode:"",paymentTermsDays:30,status:"ACTIVE"}),{data:S}=Ye({queryKey:["supplier-stats"],queryFn:async()=>{const{data:R}=await xe.get("/suppliers/stats");return R}}),{data:_=[],isLoading:E}=Ye({queryKey:["suppliers",n,a],queryFn:async()=>{const R=new URLSearchParams;n&&R.append("search",n),a&&R.append("status",a);const{data:Y}=await xe.get(`/suppliers?${R}`);return Y}}),{data:D}=Ye({queryKey:["supplier",j?.id],queryFn:async()=>{const{data:R}=await xe.get(`/suppliers/${j?.id}`);return R},enabled:!!j?.id}),W=ft({mutationFn:async R=>(await xe.post("/suppliers",R)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["suppliers"]}),e.invalidateQueries({queryKey:["supplier-stats"]}),t.success("Supplier created successfully"),B()},onError:R=>{t.error(R.message)}}),K=ft({mutationFn:async R=>(await xe.put(`/suppliers/${p?.id}`,R)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["suppliers"]}),e.invalidateQueries({queryKey:["supplier-stats"]}),t.success("Supplier updated successfully"),B()},onError:R=>{t.error(R.message)}}),B=()=>{d(!1),g(null),w({code:"",name:"",nameAr:"",email:"",phone:"",mobile:"",website:"",taxNumber:"",vatNumber:"",crNumber:"",bankName:"",bankBranch:"",bankAccountName:"",bankAccountNumber:"",bankIban:"",bankSwift:"",address:"",city:"",region:"",country:"Saudi Arabia",postalCode:"",paymentTermsDays:30,status:"ACTIVE"})},F=R=>{g(R),w({code:R.code,name:R.name,nameAr:R.nameAr||"",email:R.email||"",phone:R.phone||"",mobile:R.mobile||"",website:R.website||"",taxNumber:R.taxNumber||"",vatNumber:R.vatNumber||"",crNumber:R.crNumber||"",bankName:R.bankName||"",bankBranch:"",bankAccountName:"",bankAccountNumber:"",bankIban:R.bankIban||"",bankSwift:"",address:R.address||"",city:R.city||"",region:R.region||"",country:R.country||"Saudi Arabia",postalCode:R.postalCode||"",paymentTermsDays:R.paymentTermsDays||30,status:R.status}),d(!0)},H=R=>{R.preventDefault(),p?K.mutate(b):W.mutate(b)},I=R=>zp.find(G=>G.value===R)?.color||"var(--text-muted)";return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"page-title",children:"Suppliers"}),r.jsx("p",{className:"page-subtitle",children:"Manage vendor and supplier information"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>d(!0),children:[r.jsx(Lr,{size:16})," Add Supplier"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--primary)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(Vl,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:S?.total||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Total Suppliers"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--success)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(yl,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:S?.active||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Active"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--warning)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(In,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:S?.onHold||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"On Hold"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--error)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(hn,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:S?.blocked||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Blocked"})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"filter-bar",children:[r.jsxs("div",{className:"search-box",children:[r.jsx(ho,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search suppliers...",value:n,onChange:R=>i(R.target.value)})]}),r.jsxs("select",{value:a,onChange:R=>s(R.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Statuses"}),zp.map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))]})]}),E?r.jsx("div",{className:"loading-spinner",children:"Loading..."}):_.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[r.jsx(ru,{style:{fontSize:"3rem",color:"var(--text-muted)",marginBottom:"1rem"}}),r.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No suppliers found"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Add your first supplier to get started"}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>d(!0),children:[r.jsx(Lr,{size:16})," Add Supplier"]})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact"}),r.jsx("th",{children:"City"}),r.jsx("th",{children:"Payment Terms"}),r.jsx("th",{children:"POs"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:_.map(R=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:R.code})}),r.jsxs("td",{children:[r.jsx("div",{children:R.name}),R.nameAr&&r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:R.nameAr})]}),r.jsxs("td",{children:[R.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[r.jsx(Xp,{size:12})," ",R.email]}),R.phone&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[r.jsx(hu,{size:12})," ",R.phone]})]}),r.jsx("td",{children:R.city||"-"}),r.jsxs("td",{children:[R.paymentTermsDays," days"]}),r.jsx("td",{children:R._count?.purchaseOrders||0}),r.jsx("td",{children:r.jsx("span",{className:"status-badge",style:{backgroundColor:I(R.status)+"20",color:I(R.status)},children:zp.find(Y=>Y.value===R.status)?.label||R.status})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"icon-button",onClick:()=>{v(R),f(!0)},title:"View Details",children:r.jsx(Pa,{size:16})}),r.jsx("button",{className:"icon-button",onClick:()=>F(R),title:"Edit",children:r.jsx($l,{size:16})})]})})]},R.id))})]})})]}),l&&r.jsx("div",{className:"modal-overlay",onClick:B,children:r.jsx("div",{className:"modal",style:{maxWidth:"50rem"},onClick:R=>R.stopPropagation(),children:r.jsxs("form",{onSubmit:H,children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:p?"Edit Supplier":"Add Supplier"}),r.jsx("button",{type:"button",onClick:B,style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Supplier Code *"}),r.jsx("input",{type:"text",value:b.code,onChange:R=>w({...b,code:R.target.value}),required:!0,disabled:!!p,placeholder:"e.g., SUP-001"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Status"}),r.jsx("select",{value:b.status,onChange:R=>w({...b,status:R.target.value}),children:zp.map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name (English) *"}),r.jsx("input",{type:"text",value:b.name,onChange:R=>w({...b,name:R.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name (Arabic)"}),r.jsx("input",{type:"text",value:b.nameAr,onChange:R=>w({...b,nameAr:R.target.value}),dir:"rtl"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email"}),r.jsx("input",{type:"email",value:b.email,onChange:R=>w({...b,email:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Phone"}),r.jsx("input",{type:"text",value:b.phone,onChange:R=>w({...b,phone:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Mobile"}),r.jsx("input",{type:"text",value:b.mobile,onChange:R=>w({...b,mobile:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Website"}),r.jsx("input",{type:"url",value:b.website,onChange:R=>w({...b,website:R.target.value})})]})]}),r.jsx("h4",{style:{marginTop:"1.5rem",marginBottom:"0.75rem"},children:"Tax & Registration"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Tax Number"}),r.jsx("input",{type:"text",value:b.taxNumber,onChange:R=>w({...b,taxNumber:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"VAT Number"}),r.jsx("input",{type:"text",value:b.vatNumber,onChange:R=>w({...b,vatNumber:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"CR Number"}),r.jsx("input",{type:"text",value:b.crNumber,onChange:R=>w({...b,crNumber:R.target.value})})]})]}),r.jsx("h4",{style:{marginTop:"1.5rem",marginBottom:"0.75rem"},children:"Bank Information"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Bank Name"}),r.jsx("input",{type:"text",value:b.bankName,onChange:R=>w({...b,bankName:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"IBAN"}),r.jsx("input",{type:"text",value:b.bankIban,onChange:R=>w({...b,bankIban:R.target.value}),placeholder:"SA..."})]})]}),r.jsx("h4",{style:{marginTop:"1.5rem",marginBottom:"0.75rem"},children:"Address"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsx("label",{children:"Address"}),r.jsx("input",{type:"text",value:b.address,onChange:R=>w({...b,address:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"City"}),r.jsx("input",{type:"text",value:b.city,onChange:R=>w({...b,city:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Region"}),r.jsx("input",{type:"text",value:b.region,onChange:R=>w({...b,region:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Country"}),r.jsx("input",{type:"text",value:b.country,onChange:R=>w({...b,country:R.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Postal Code"}),r.jsx("input",{type:"text",value:b.postalCode,onChange:R=>w({...b,postalCode:R.target.value})})]})]}),r.jsx("h4",{style:{marginTop:"1.5rem",marginBottom:"0.75rem"},children:"Payment Terms"}),r.jsxs("div",{className:"form-group",style:{maxWidth:"200px"},children:[r.jsx("label",{children:"Payment Terms (Days)"}),r.jsx("input",{type:"number",value:b.paymentTermsDays,onChange:R=>w({...b,paymentTermsDays:parseInt(R.target.value)||30}),min:0})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:B,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:W.isPending||K.isPending,children:W.isPending||K.isPending?"Saving...":p?"Update":"Create"})]})]})})}),h&&D&&r.jsx("div",{className:"modal-overlay",onClick:()=>f(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"50rem"},onClick:R=>R.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Supplier Details"}),r.jsx("button",{type:"button",onClick:()=>f(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[r.jsxs("div",{children:[r.jsxs("h4",{style:{marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Vl,{size:16})," General Information"]}),r.jsxs("div",{className:"detail-list",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Code:"})," ",D.code]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",D.name]}),D.nameAr&&r.jsxs("div",{children:[r.jsx("strong",{children:"Arabic Name:"})," ",D.nameAr]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:"status-badge",style:{backgroundColor:I(D.status)+"20",color:I(D.status)},children:zp.find(R=>R.value===D.status)?.label})]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{style:{marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Xp,{size:16})," Contact"]}),r.jsxs("div",{className:"detail-list",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Email:"})," ",D.email||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",D.phone||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Mobile:"})," ",D.mobile||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Website:"})," ",D.website||"-"]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{style:{marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Fs,{size:16})," Address"]}),r.jsxs("div",{className:"detail-list",children:[r.jsx("div",{children:D.address||"-"}),r.jsx("div",{children:[D.city,D.region,D.country].filter(Boolean).join(", ")||"-"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Postal Code:"})," ",D.postalCode||"-"]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{style:{marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ii,{size:16})," Tax & Financial"]}),r.jsxs("div",{className:"detail-list",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Tax Number:"})," ",D.taxNumber||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"VAT Number:"})," ",D.vatNumber||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"CR Number:"})," ",D.crNumber||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Payment Terms:"})," ",D.paymentTermsDays," days"]})]})]})]}),D.contacts&&D.contacts.length>0&&r.jsxs("div",{style:{marginTop:"1.5rem"},children:[r.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Contacts"}),r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Title"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Primary"})]})}),r.jsx("tbody",{children:D.contacts.map(R=>r.jsxs("tr",{children:[r.jsx("td",{children:R.name}),r.jsx("td",{children:R.title||"-"}),r.jsx("td",{children:R.email||"-"}),r.jsx("td",{children:R.phone||"-"}),r.jsx("td",{children:R.isPrimary?r.jsx(yl,{color:"var(--success)"}):"-"})]},R.id))})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(!1),children:"Close"}),r.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{f(!1),D&&F(D)},children:[r.jsx($l,{size:16})," Edit"]})]})]})}),r.jsx("style",{children:`
        .detail-list {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          font-size: 0.9rem;
        }
      `})]})}const bv=[{value:"DRAFT",label:"Draft",color:"var(--text-muted)"},{value:"PENDING_APPROVAL",label:"Pending Approval",color:"var(--warning)"},{value:"APPROVED",label:"Approved",color:"var(--info)"},{value:"SENT",label:"Sent",color:"var(--primary)"},{value:"ACKNOWLEDGED",label:"Acknowledged",color:"var(--primary)"},{value:"PARTIALLY_RECEIVED",label:"Partially Received",color:"var(--warning)"},{value:"RECEIVED",label:"Received",color:"var(--success)"},{value:"CLOSED",label:"Closed",color:"var(--text-muted)"},{value:"CANCELLED",label:"Cancelled",color:"var(--error)"}];function cge(){const e=Tr(),t=Ei(),[n,i]=P.useState(""),[a,s]=P.useState(""),[l,d]=P.useState(""),[h,f]=P.useState(!1),[p,g]=P.useState(!1),[j,v]=P.useState(!1),[b,w]=P.useState(null),[S,_]=P.useState(null),[E,D]=P.useState({poNumber:"",supplierId:"",expectedDate:"",paymentTermsDays:30,deliveryTerms:"",shippingAddress:"",notes:""}),[W,K]=P.useState([{lineNumber:1,itemCode:"",itemName:"",orderedQty:1,unit:"EA",unitPrice:0}]),{data:B}=Ye({queryKey:["po-stats"],queryFn:async()=>{const{data:Z}=await xe.get("/purchase-orders/stats");return Z}}),{data:F=[],isLoading:H}=Ye({queryKey:["purchase-orders",n,a,l],queryFn:async()=>{const Z=new URLSearchParams;n&&Z.append("search",n),a&&Z.append("status",a),l&&Z.append("supplierId",l);const{data:ge}=await xe.get(`/purchase-orders?${Z}`);return ge}}),{data:I=[]}=Ye({queryKey:["suppliers-list"],queryFn:async()=>{const{data:Z}=await xe.get("/suppliers?status=ACTIVE");return Z}}),{data:R}=Ye({queryKey:["purchase-order",S?.id],queryFn:async()=>{const{data:Z}=await xe.get(`/purchase-orders/${S?.id}`);return Z},enabled:!!S?.id}),{data:Y}=Ye({queryKey:["po-next-number"],queryFn:async()=>{const{data:Z}=await xe.get("/purchase-orders/next-number");return Z},enabled:h&&!b}),G=ft({mutationFn:async Z=>(await xe.post("/purchase-orders",Z)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["purchase-orders"]}),e.invalidateQueries({queryKey:["po-stats"]}),e.invalidateQueries({queryKey:["po-next-number"]}),t.success("Purchase order created successfully"),z()},onError:Z=>{t.error(Z.message)}}),ae=ft({mutationFn:async Z=>(await xe.put(`/purchase-orders/${b?.id}`,Z)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["purchase-orders"]}),e.invalidateQueries({queryKey:["po-stats"]}),t.success("Purchase order updated successfully"),z()},onError:Z=>{t.error(Z.message)}}),se=ft({mutationFn:async({id:Z,action:ge,data:oe})=>(await xe.post(`/purchase-orders/${Z}/${ge}`,oe||{})).data,onSuccess:(Z,ge)=>{e.invalidateQueries({queryKey:["purchase-orders"]}),e.invalidateQueries({queryKey:["po-stats"]}),e.invalidateQueries({queryKey:["purchase-order",ge.id]}),t.success(`Purchase order ${ge.action} successfully`)},onError:Z=>{t.error(Z.message)}}),Ne=ft({mutationFn:async Z=>(await xe.delete(`/purchase-orders/${Z}`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["purchase-orders"]}),e.invalidateQueries({queryKey:["po-stats"]}),t.success("Purchase order deleted successfully")},onError:Z=>{t.error(Z.message)}}),z=()=>{f(!1),w(null),D({poNumber:"",supplierId:"",expectedDate:"",paymentTermsDays:30,deliveryTerms:"",shippingAddress:"",notes:""}),K([{lineNumber:1,itemCode:"",itemName:"",orderedQty:1,unit:"EA",unitPrice:0}])},ie=Z=>{w(Z),D({poNumber:Z.poNumber,supplierId:Z.supplierId,expectedDate:Z.expectedDate?Z.expectedDate.split("T")[0]:"",paymentTermsDays:Z.paymentTermsDays,deliveryTerms:Z.deliveryTerms||"",shippingAddress:Z.shippingAddress||"",notes:Z.notes||""}),K(Z.items.map((ge,oe)=>({...ge,lineNumber:oe+1}))),f(!0)},q=Z=>{Z.preventDefault();const ge=W.filter(X=>X.itemCode&&X.itemName&&X.orderedQty>0);if(ge.length===0){t.error("Please add at least one valid item");return}const oe={...E,poNumber:E.poNumber||Y?.poNumber,items:ge};b?ae.mutate(oe):G.mutate(oe)},re=()=>{K([...W,{lineNumber:W.length+1,itemCode:"",itemName:"",orderedQty:1,unit:"EA",unitPrice:0}])},ue=Z=>{W.length>1&&K(W.filter((ge,oe)=>oe!==Z).map((ge,oe)=>({...ge,lineNumber:oe+1})))},Q=(Z,ge,oe)=>{const X=[...W];X[Z][ge]=oe,K(X)},V=Z=>bv.find(oe=>oe.value===Z)?.color||"var(--text-muted)",ne=(Z,ge="SAR")=>new Intl.NumberFormat("en-SA",{style:"currency",currency:ge}).format(Z),$=()=>{const Z=W.reduce((oe,X)=>oe+X.orderedQty*X.unitPrice,0),ge=Z*.15;return{subtotal:Z,tax:ge,total:Z+ge}},de=async Z=>{S&&(await se.mutateAsync({id:S.id,action:"approve",data:{signatureId:Z.id}}),v(!1))};return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"page-title",children:"Purchase Orders"}),r.jsx("p",{className:"page-subtitle",children:"Manage procurement and supplier orders"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>f(!0),children:[r.jsx(Lr,{size:16})," Create PO"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--primary)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(ii,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:B?.total||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Total POs"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--warning)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(NO,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:B?.pendingApproval||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Pending Approval"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--info)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(qo,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:B?.sent||0}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Sent to Suppliers"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{color:"var(--success)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.jsx(ax,{size:16})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600},children:ne(Number(B?.totalValue)||0)}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Total Value"})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"filter-bar",children:[r.jsxs("div",{className:"search-box",children:[r.jsx(ho,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search PO number or supplier...",value:n,onChange:Z=>i(Z.target.value)})]}),r.jsxs("select",{value:a,onChange:Z=>s(Z.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Statuses"}),bv.map(Z=>r.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),r.jsxs("select",{value:l,onChange:Z=>d(Z.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Suppliers"}),I.map(Z=>r.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),H?r.jsx("div",{className:"loading-spinner",children:"Loading..."}):F.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[r.jsx(ii,{style:{fontSize:"3rem",color:"var(--text-muted)",marginBottom:"1rem"}}),r.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No purchase orders found"}),r.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Create your first purchase order"}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>f(!0),children:[r.jsx(Lr,{size:16})," Create PO"]})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"PO Number"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Order Date"}),r.jsx("th",{children:"Expected"}),r.jsx("th",{children:"Items"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:F.map(Z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:Z.poNumber})}),r.jsxs("td",{children:[r.jsx("div",{children:Z.supplier?.name}),r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:Z.supplier?.code})]}),r.jsx("td",{children:new Date(Z.orderDate).toLocaleDateString()}),r.jsx("td",{children:Z.expectedDate?new Date(Z.expectedDate).toLocaleDateString():"-"}),r.jsx("td",{children:Z._count?.items||0}),r.jsx("td",{children:ne(Number(Z.totalAmount),Z.currencyCode)}),r.jsx("td",{children:r.jsx("span",{className:"status-badge",style:{backgroundColor:V(Z.status)+"20",color:V(Z.status)},children:bv.find(ge=>ge.value===Z.status)?.label||Z.status})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{className:"icon-button",onClick:()=>{_(Z),g(!0)},title:"View Details",children:r.jsx(Pa,{size:16})}),["DRAFT","PENDING_APPROVAL"].includes(Z.status)&&r.jsx("button",{className:"icon-button",onClick:()=>ie(Z),title:"Edit",children:r.jsx($l,{size:16})}),Z.status==="DRAFT"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"icon-button",onClick:()=>se.mutate({id:Z.id,action:"submit"}),title:"Submit for Approval",children:r.jsx(qo,{size:16})}),r.jsx("button",{className:"icon-button",onClick:()=>{confirm("Delete this purchase order?")&&Ne.mutate(Z.id)},title:"Delete",children:r.jsx(mi,{size:16})})]}),Z.status==="PENDING_APPROVAL"&&r.jsx("button",{className:"icon-button",onClick:()=>{_(Z),v(!0)},title:"Approve",style:{color:"var(--success)"},children:r.jsx(yl,{size:16})}),Z.status==="APPROVED"&&r.jsx("button",{className:"icon-button",onClick:()=>se.mutate({id:Z.id,action:"send"}),title:"Send to Supplier",children:r.jsx(fn,{size:16})})]})})]},Z.id))})]})})]}),h&&r.jsx("div",{className:"modal-overlay",onClick:z,children:r.jsx("div",{className:"modal",style:{maxWidth:"60rem"},onClick:Z=>Z.stopPropagation(),children:r.jsxs("form",{onSubmit:q,children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:b?"Edit Purchase Order":"Create Purchase Order"}),r.jsx("button",{type:"button",onClick:z,style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"PO Number"}),r.jsx("input",{type:"text",value:E.poNumber||Y?.poNumber||"",onChange:Z=>D({...E,poNumber:Z.target.value}),disabled:!!b,placeholder:"Auto-generated"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Supplier *"}),r.jsxs("select",{value:E.supplierId,onChange:Z=>D({...E,supplierId:Z.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Select Supplier"}),I.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.name," (",Z.code,")"]},Z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Expected Delivery"}),r.jsx("input",{type:"date",value:E.expectedDate,onChange:Z=>D({...E,expectedDate:Z.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Payment Terms (Days)"}),r.jsx("input",{type:"number",value:E.paymentTermsDays,onChange:Z=>D({...E,paymentTermsDays:parseInt(Z.target.value)||30}),min:0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Delivery Terms"}),r.jsx("input",{type:"text",value:E.deliveryTerms,onChange:Z=>D({...E,deliveryTerms:Z.target.value}),placeholder:"e.g., FOB, CIF"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Shipping Address"}),r.jsx("input",{type:"text",value:E.shippingAddress,onChange:Z=>D({...E,shippingAddress:Z.target.value})})]})]}),r.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Line Items"}),r.jsx("div",{className:"table-container",style:{marginBottom:"1rem"},children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40px"},children:"#"}),r.jsx("th",{children:"Item Code *"}),r.jsx("th",{children:"Item Name *"}),r.jsx("th",{style:{width:"80px"},children:"Qty *"}),r.jsx("th",{style:{width:"80px"},children:"Unit"}),r.jsx("th",{style:{width:"120px"},children:"Unit Price *"}),r.jsx("th",{style:{width:"120px"},children:"Total"}),r.jsx("th",{style:{width:"40px"}})]})}),r.jsx("tbody",{children:W.map((Z,ge)=>r.jsxs("tr",{children:[r.jsx("td",{children:Z.lineNumber}),r.jsx("td",{children:r.jsx("input",{type:"text",value:Z.itemCode,onChange:oe=>Q(ge,"itemCode",oe.target.value),style:{width:"100%"}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:Z.itemName,onChange:oe=>Q(ge,"itemName",oe.target.value),style:{width:"100%"}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:Z.orderedQty,onChange:oe=>Q(ge,"orderedQty",parseFloat(oe.target.value)||0),min:0,step:"0.01",style:{width:"100%"}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:Z.unit,onChange:oe=>Q(ge,"unit",oe.target.value),style:{width:"100%"}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:Z.unitPrice,onChange:oe=>Q(ge,"unitPrice",parseFloat(oe.target.value)||0),min:0,step:"0.01",style:{width:"100%"}})}),r.jsx("td",{style:{textAlign:"right"},children:ne(Z.orderedQty*Z.unitPrice)}),r.jsx("td",{children:r.jsx("button",{type:"button",className:"icon-button",onClick:()=>ue(ge),disabled:W.length===1,children:r.jsx(hn,{size:16})})})]},ge))}),r.jsxs("tfoot",{children:[r.jsxs("tr",{children:[r.jsx("td",{colSpan:6,style:{textAlign:"right"},children:r.jsx("strong",{children:"Subtotal:"})}),r.jsx("td",{style:{textAlign:"right"},children:ne($().subtotal)}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:6,style:{textAlign:"right"},children:r.jsx("strong",{children:"VAT (15%):"})}),r.jsx("td",{style:{textAlign:"right"},children:ne($().tax)}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:6,style:{textAlign:"right"},children:r.jsx("strong",{children:"Total:"})}),r.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:ne($().total)}),r.jsx("td",{})]})]})]})}),r.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:re,children:[r.jsx(Lr,{size:16})," Add Item"]}),r.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[r.jsx("label",{children:"Notes"}),r.jsx("textarea",{value:E.notes,onChange:Z=>D({...E,notes:Z.target.value}),rows:3})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:z,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:G.isPending||ae.isPending,children:G.isPending||ae.isPending?"Saving...":b?"Update":"Create"})]})]})})}),p&&R&&r.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:r.jsxs("div",{className:"modal",style:{maxWidth:"60rem"},onClick:Z=>Z.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{style:{fontWeight:600,margin:0},children:"Purchase Order Details"}),r.jsx("button",{type:"button",onClick:()=>g(!1),style:{background:"var(--bg-secondary)",border:"none",borderRadius:"var(--radius)",padding:"0.375rem",cursor:"pointer",fontSize:"1.25rem",lineHeight:1},children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.5rem"},children:"PO Information"}),r.jsxs("div",{children:[r.jsx("strong",{children:"PO Number:"})," ",R.poNumber]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Order Date:"})," ",new Date(R.orderDate).toLocaleDateString()]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Expected:"})," ",R.expectedDate?new Date(R.expectedDate).toLocaleDateString():"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:"status-badge",style:{backgroundColor:V(R.status)+"20",color:V(R.status)},children:bv.find(Z=>Z.value===R.status)?.label})]})]}),r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Supplier"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",R.supplier?.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Code:"})," ",R.supplier?.code]})]}),r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Totals"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Subtotal:"})," ",ne(Number(R.subtotal))]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Tax:"})," ",ne(Number(R.taxAmount))]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Total:"})," ",ne(Number(R.totalAmount))]})]})]}),r.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Line Items"}),r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"#"}),r.jsx("th",{children:"Item Code"}),r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Ordered"}),r.jsx("th",{children:"Received"}),r.jsx("th",{children:"Unit"}),r.jsx("th",{children:"Unit Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:R.items?.map(Z=>r.jsxs("tr",{children:[r.jsx("td",{children:Z.lineNumber}),r.jsx("td",{children:Z.itemCode}),r.jsx("td",{children:Z.itemName}),r.jsx("td",{children:Z.orderedQty}),r.jsx("td",{children:Z.receivedQty||0}),r.jsx("td",{children:Z.unit}),r.jsx("td",{children:ne(Number(Z.unitPrice))}),r.jsx("td",{children:ne(Number(Z.totalPrice))})]},Z.id))})]}),R.notes&&r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx("h4",{children:"Notes"}),r.jsx("p",{style:{whiteSpace:"pre-wrap"},children:R.notes})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Close"}),["DRAFT","PENDING_APPROVAL"].includes(R.status)&&r.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{g(!1),ie(R)},children:[r.jsx($l,{size:16})," Edit"]})]})]})}),j&&S&&r.jsx(F7,{isOpen:j,onClose:()=>v(!1),scope:"PO_APPROVAL",entityType:"PURCHASE_ORDER",entityId:S.id,title:`Approve Purchase Order ${S.poNumber}`,description:`I approve this purchase order for ${ne(Number(S.totalAmount))}`,onSuccess:de})]})}const n5=[{value:"RAW_MATERIALS",label:"Raw Materials"},{value:"QUARANTINE",label:"Quarantine"},{value:"PRODUCTION",label:"Production"},{value:"FINISHED_GOODS",label:"Finished Goods"},{value:"COLD_STORAGE",label:"Cold Storage"},{value:"RADIOACTIVE",label:"Radioactive"},{value:"WASTE",label:"Waste"}],Bp=[{value:"ACTIVE",label:"Active",color:"#22c55e"},{value:"INACTIVE",label:"Inactive",color:"#94a3b8"},{value:"MAINTENANCE",label:"Maintenance",color:"#f59e0b"}];function dge(){const[e,t]=P.useState([]),[n,i]=P.useState(null),[a,s]=P.useState(!0),[l,d]=P.useState(""),[h,f]=P.useState(""),[p,g]=P.useState(""),[j,v]=P.useState(!1),[b,w]=P.useState(!1),[S,_]=P.useState(null),[E,D]=P.useState(null),[W,K]=P.useState(!1),[B,F]=P.useState(null),[H,I]=P.useState({code:"",name:"",nameAr:"",type:"RAW_MATERIALS",status:"ACTIVE",description:"",address:"",temperatureMin:"",temperatureMax:"",humidityMin:"",humidityMax:"",isRadioactive:!1,requiresQC:!0}),[R,Y]=P.useState({code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",bin:"",capacity:"",capacityUnit:"",isActive:!0});P.useEffect(()=>{G()},[h,p,l]);const G=async()=>{try{s(!0);const $=new URLSearchParams;h&&$.append("status",h),p&&$.append("type",p),l&&$.append("search",l);const[de,Z]=await Promise.all([xe.get(`/warehouses?${$}`),xe.get("/warehouses/stats")]);t(de.data),i(Z.data)}catch($){console.error("Error fetching warehouses:",$)}finally{s(!1)}},ae=async $=>{$.preventDefault();try{S?await xe.put(`/warehouses/${S.id}`,H):await xe.post("/warehouses",H),v(!1),ie(),G()}catch(de){console.error("Error saving warehouse:",de)}},se=async $=>{if(confirm("Are you sure you want to delete this warehouse?"))try{await xe.delete(`/warehouses/${$}`),G()}catch(de){alert(de.response?.data?.error||"Failed to delete warehouse")}},Ne=$=>{_($),I({code:$.code,name:$.name,nameAr:$.nameAr||"",type:$.type,status:$.status,description:$.description||"",address:$.address||"",temperatureMin:$.temperatureMin?.toString()||"",temperatureMax:$.temperatureMax?.toString()||"",humidityMin:$.humidityMin?.toString()||"",humidityMax:$.humidityMax?.toString()||"",isRadioactive:$.isRadioactive,requiresQC:$.requiresQC}),v(!0)},z=async $=>{try{const de=await xe.get(`/warehouses/${$.id}`);_(de.data),w(!0)}catch(de){console.error("Error fetching warehouse details:",de)}},ie=()=>{_(null),I({code:"",name:"",nameAr:"",type:"RAW_MATERIALS",status:"ACTIVE",description:"",address:"",temperatureMin:"",temperatureMax:"",humidityMin:"",humidityMax:"",isRadioactive:!1,requiresQC:!0})},q=$=>{_($),F(null),Y({code:"",name:"",zone:"",aisle:"",rack:"",shelf:"",bin:"",capacity:"",capacityUnit:"",isActive:!0}),K(!0)},re=($,de)=>{_($),F(de),Y({code:de.code,name:de.name,zone:de.zone||"",aisle:de.aisle||"",rack:de.rack||"",shelf:de.shelf||"",bin:de.bin||"",capacity:de.capacity?.toString()||"",capacityUnit:de.capacityUnit||"",isActive:de.isActive}),K(!0)},ue=async $=>{if($.preventDefault(),!!S)try{if(B?await xe.put(`/warehouses/${S.id}/locations/${B.id}`,R):await xe.post(`/warehouses/${S.id}/locations`,R),K(!1),G(),b){const de=await xe.get(`/warehouses/${S.id}`);_(de.data)}}catch(de){console.error("Error saving location:",de)}},Q=async($,de)=>{if(confirm("Are you sure you want to delete this location?"))try{if(await xe.delete(`/warehouses/${$}/locations/${de}`),G(),b&&S){const Z=await xe.get(`/warehouses/${S.id}`);_(Z.data)}}catch(Z){alert(Z.response?.data?.error||"Failed to delete location")}},V=$=>{const de=Bp.find(Z=>Z.value===$);return{backgroundColor:`${de?.color}20`,color:de?.color}},ne=$=>n5.find(de=>de.value===$)?.label||$;return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{children:"Warehouses"}),r.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Manage warehouse locations and storage areas"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>{ie(),v(!0)},children:[r.jsx(Lr,{size:18})," Add Warehouse"]})]}),n&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--primary)"},children:n.total}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Total"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#22c55e"},children:n.active}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Active"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#f59e0b"},children:n.maintenance}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Maintenance"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#6366f1"},children:n.totalLocations}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Locations"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#0ea5e9"},children:n.totalStockItems}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Stock Items"})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[r.jsx(ho,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search warehouses...",value:l,onChange:$=>d($.target.value),className:"form-input",style:{paddingLeft:"2.5rem"}})]}),r.jsxs("select",{value:h,onChange:$=>f($.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Statuses"}),Bp.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))]}),r.jsxs("select",{value:p,onChange:$=>g($.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Types"}),n5.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))]})]}),a?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading..."}):e.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[r.jsx(DO,{size:48,style:{marginBottom:"1rem",opacity:.5}}),r.jsx("p",{children:"No warehouses found"})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40px"}}),r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Locations"}),r.jsx("th",{children:"Stock Items"}),r.jsx("th",{children:"Temperature"}),r.jsx("th",{style:{width:"120px"},children:"Actions"})]})}),r.jsx("tbody",{children:e.map($=>r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>D(E===$.id?null:$.id),children:E===$.id?r.jsx(gm,{size:16}):r.jsx(tu,{size:16})})}),r.jsx("td",{children:r.jsx("strong",{children:$.code})}),r.jsxs("td",{children:[r.jsx("div",{children:$.name}),$.nameAr&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:$.nameAr})]}),r.jsx("td",{children:ne($.type)}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:V($.status),children:Bp.find(de=>de.value===$.status)?.label})}),r.jsx("td",{children:$._count.locations}),r.jsx("td",{children:$._count.stockItems}),r.jsx("td",{children:$.temperatureMin!==null&&$.temperatureMax!==null?r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(kW,{size:14}),$.temperatureMin,"C - ",$.temperatureMax,"C"]}):"-"}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>z($),title:"View",children:r.jsx(Pa,{size:16})}),r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>Ne($),title:"Edit",children:r.jsx(Pv,{size:16})}),r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>se($.id),title:"Delete",children:r.jsx(mi,{size:16})})]})})]},$.id),E===$.id&&r.jsx("tr",{children:r.jsxs("td",{colSpan:9,style:{padding:"1rem",backgroundColor:"var(--bg-secondary)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[r.jsxs("strong",{children:["Locations (",$._count.locations,")"]}),r.jsxs("button",{className:"btn btn-sm",onClick:()=>q($),children:[r.jsx(Lr,{size:14})," Add Location"]})]}),$.locations&&$.locations.length>0?r.jsxs("table",{className:"data-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Zone"}),r.jsx("th",{children:"Aisle/Rack/Shelf"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:$.locations.map(de=>r.jsxs("tr",{children:[r.jsx("td",{children:de.code}),r.jsx("td",{children:de.name}),r.jsx("td",{children:de.zone||"-"}),r.jsx("td",{children:[de.aisle,de.rack,de.shelf].filter(Boolean).join(" / ")||"-"}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:{backgroundColor:de.isActive?"#dcfce7":"#fee2e2",color:de.isActive?"#166534":"#991b1b"},children:de.isActive?"Active":"Inactive"})}),r.jsxs("td",{children:[r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>re($,de),children:r.jsx(Pv,{size:14})}),r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>Q($.id,de.id),children:r.jsx(mi,{size:14})})]})]},de.id))})]}):r.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No locations defined"})]})})]}))})]})})]}),j&&r.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:r.jsxs("div",{className:"modal",onClick:$=>$.stopPropagation(),style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:S?"Edit Warehouse":"Add Warehouse"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>v(!1),children:""})]}),r.jsxs("form",{onSubmit:ae,children:[r.jsx("div",{className:"modal-body",children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:H.code,onChange:$=>I({...H,code:$.target.value}),required:!0,disabled:!!S})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Status"}),r.jsx("select",{className:"form-select",value:H.status,onChange:$=>I({...H,status:$.target.value}),children:Bp.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:H.name,onChange:$=>I({...H,name:$.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name (Arabic)"}),r.jsx("input",{type:"text",className:"form-input",value:H.nameAr,onChange:$=>I({...H,nameAr:$.target.value}),dir:"rtl"})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsx("label",{children:"Type"}),r.jsx("select",{className:"form-select",value:H.type,onChange:$=>I({...H,type:$.target.value}),children:n5.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{className:"form-input",value:H.description,onChange:$=>I({...H,description:$.target.value}),rows:2})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsx("label",{children:"Address"}),r.jsx("input",{type:"text",className:"form-input",value:H.address,onChange:$=>I({...H,address:$.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Temperature Min (C)"}),r.jsx("input",{type:"number",className:"form-input",value:H.temperatureMin,onChange:$=>I({...H,temperatureMin:$.target.value}),step:"0.1"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Temperature Max (C)"}),r.jsx("input",{type:"number",className:"form-input",value:H.temperatureMax,onChange:$=>I({...H,temperatureMax:$.target.value}),step:"0.1"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Humidity Min (%)"}),r.jsx("input",{type:"number",className:"form-input",value:H.humidityMin,onChange:$=>I({...H,humidityMin:$.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Humidity Max (%)"}),r.jsx("input",{type:"number",className:"form-input",value:H.humidityMax,onChange:$=>I({...H,humidityMax:$.target.value})})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"checkbox",checked:H.isRadioactive,onChange:$=>I({...H,isRadioactive:$.target.checked})}),"Radioactive Storage"]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("input",{type:"checkbox",checked:H.requiresQC,onChange:$=>I({...H,requiresQC:$.target.checked})}),"Requires QC"]})})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>v(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:S?"Update":"Create"})]})]})]})}),b&&S&&r.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:r.jsxs("div",{className:"modal",onClick:$=>$.stopPropagation(),style:{maxWidth:"800px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Warehouse Details - ",S.code]}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>w(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Name"}),r.jsx("div",{children:S.name}),S.nameAr&&r.jsx("div",{style:{color:"var(--text-muted)"},children:S.nameAr})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Type"}),r.jsx("div",{children:ne(S.type)})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Status"}),r.jsx("span",{className:"badge",style:V(S.status),children:Bp.find($=>$.value===S.status)?.label})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Address"}),r.jsx("div",{children:S.address||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Temperature Range"}),r.jsx("div",{children:S.temperatureMin!==null&&S.temperatureMax!==null?`${S.temperatureMin}C - ${S.temperatureMax}C`:"Not specified"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Humidity Range"}),r.jsx("div",{children:S.humidityMin!==null&&S.humidityMax!==null?`${S.humidityMin}% - ${S.humidityMax}%`:"Not specified"})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h3",{children:["Locations (",S.locations?.length||0,")"]}),r.jsxs("button",{className:"btn btn-sm",onClick:()=>q(S),children:[r.jsx(Lr,{size:14})," Add Location"]})]}),S.locations&&S.locations.length>0?r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Zone"}),r.jsx("th",{children:"Aisle"}),r.jsx("th",{children:"Rack"}),r.jsx("th",{children:"Shelf"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:S.locations.map($=>r.jsxs("tr",{children:[r.jsx("td",{children:$.code}),r.jsx("td",{children:$.name}),r.jsx("td",{children:$.zone||"-"}),r.jsx("td",{children:$.aisle||"-"}),r.jsx("td",{children:$.rack||"-"}),r.jsx("td",{children:$.shelf||"-"}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:{backgroundColor:$.isActive?"#dcfce7":"#fee2e2",color:$.isActive?"#166534":"#991b1b"},children:$.isActive?"Active":"Inactive"})}),r.jsxs("td",{children:[r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>re(S,$),children:r.jsx(Pv,{size:14})}),r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>Q(S.id,$.id),children:r.jsx(mi,{size:14})})]})]},$.id))})]}):r.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No locations defined"})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn",onClick:()=>w(!1),children:"Close"})})]})}),W&&r.jsx("div",{className:"modal-overlay",onClick:()=>K(!1),children:r.jsxs("div",{className:"modal",onClick:$=>$.stopPropagation(),style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:B?"Edit Location":"Add Location"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>K(!1),children:""})]}),r.jsxs("form",{onSubmit:ue,children:[r.jsx("div",{className:"modal-body",children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Code *"}),r.jsx("input",{type:"text",className:"form-input",value:R.code,onChange:$=>Y({...R,code:$.target.value}),required:!0,disabled:!!B})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:R.name,onChange:$=>Y({...R,name:$.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Zone"}),r.jsx("input",{type:"text",className:"form-input",value:R.zone,onChange:$=>Y({...R,zone:$.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Aisle"}),r.jsx("input",{type:"text",className:"form-input",value:R.aisle,onChange:$=>Y({...R,aisle:$.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Rack"}),r.jsx("input",{type:"text",className:"form-input",value:R.rack,onChange:$=>Y({...R,rack:$.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Shelf"}),r.jsx("input",{type:"text",className:"form-input",value:R.shelf,onChange:$=>Y({...R,shelf:$.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Bin"}),r.jsx("input",{type:"text",className:"form-input",value:R.bin,onChange:$=>Y({...R,bin:$.target.value})})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1.5rem"},children:[r.jsx("input",{type:"checkbox",checked:R.isActive,onChange:$=>Y({...R,isActive:$.target.checked})}),"Active"]})})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>K(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:B?"Update":"Create"})]})]})]})})]})}const jv=[{value:"DRAFT",label:"Draft",color:"#94a3b8"},{value:"PENDING_QC",label:"Pending QC",color:"#f59e0b"},{value:"APPROVED",label:"Approved",color:"#22c55e"},{value:"PARTIALLY_APPROVED",label:"Partial",color:"#3b82f6"},{value:"REJECTED",label:"Rejected",color:"#ef4444"}];function uge(){const[e,t]=P.useState([]),[n,i]=P.useState(null),[a,s]=P.useState([]),[l,d]=P.useState([]),[h,f]=P.useState(!0),[p,g]=P.useState(""),[j,v]=P.useState(""),[b,w]=P.useState(!1),[S,_]=P.useState(!1),[E,D]=P.useState(!1),[W,K]=P.useState(null),[B,F]=P.useState(null),[H,I]=P.useState(null),[R,Y]=P.useState({poId:"",deliveryNoteNumber:"",notes:"",items:[]}),[G,ae]=P.useState({acceptedQty:0,rejectedQty:0,rejectionReason:"",warehouseId:"",binLocation:""});P.useEffect(()=>{se(),Ne()},[j,p]);const se=async()=>{try{f(!0);const Z=new URLSearchParams;j&&Z.append("status",j),p&&Z.append("search",p);const[ge,oe,X]=await Promise.all([xe.get(`/grn?${Z}`),xe.get("/grn/stats"),xe.get("/grn/pending-pos")]);t(ge.data),i(oe.data),s(X.data)}catch(Z){console.error("Error fetching GRNs:",Z)}finally{f(!1)}},Ne=async()=>{try{const Z=await xe.get("/warehouses?status=ACTIVE");d(Z.data)}catch(Z){console.error("Error fetching warehouses:",Z)}},z=Z=>{F(Z),Y({poId:Z.id,deliveryNoteNumber:"",notes:"",items:Z.items.map(ge=>({poItemId:ge.id,itemCode:ge.itemCode,itemName:ge.itemName,orderedQty:ge.orderedQty,alreadyReceived:ge.receivedQty,receivedQty:ge.orderedQty-ge.receivedQty,unit:ge.unit,lotNumber:"",batchNumber:"",expiryDate:"",manufacturingDate:"",warehouseId:"",binLocation:"",notes:""}))})},ie=async Z=>{Z.preventDefault();try{const ge={poId:R.poId,deliveryNoteNumber:R.deliveryNoteNumber,notes:R.notes,items:R.items.filter(oe=>oe.receivedQty>0).map(oe=>({poItemId:oe.poItemId,receivedQty:oe.receivedQty,unit:oe.unit,lotNumber:oe.lotNumber,batchNumber:oe.batchNumber,expiryDate:oe.expiryDate||null,manufacturingDate:oe.manufacturingDate||null,warehouseId:oe.warehouseId||null,binLocation:oe.binLocation,notes:oe.notes}))};await xe.post("/grn",ge),w(!1),F(null),se()}catch(ge){alert(ge.response?.data?.error||"Failed to create GRN")}},q=async Z=>{try{const ge=await xe.get(`/grn/${Z.id}`);K(ge.data),_(!0)}catch(ge){console.error("Error fetching GRN details:",ge)}},re=async Z=>{try{if(await xe.post(`/grn/${Z.id}/submit`),se(),S){const ge=await xe.get(`/grn/${Z.id}`);K(ge.data)}}catch(ge){alert(ge.response?.data?.error||"Failed to submit GRN")}},ue=Z=>{I(Z),ae({acceptedQty:Z.receivedQty,rejectedQty:0,rejectionReason:"",warehouseId:Z.warehouseId||"",binLocation:Z.binLocation||""}),D(!0)},Q=async Z=>{if(Z.preventDefault(),!(!W||!H))try{await xe.post(`/grn/${W.id}/approve-item/${H.id}`,G),D(!1);const ge=await xe.get(`/grn/${W.id}`);K(ge.data),se()}catch(ge){alert(ge.response?.data?.error||"Failed to complete QC")}},V=async()=>{if(W)try{await xe.post(`/grn/${W.id}/complete`);const Z=await xe.get(`/grn/${W.id}`);K(Z.data),se()}catch(Z){alert(Z.response?.data?.error||"Failed to complete GRN")}},ne=async()=>{if(W)try{await xe.post(`/grn/${W.id}/post-to-stock`),alert("GRN posted to stock successfully"),se()}catch(Z){alert(Z.response?.data?.error||"Failed to post to stock")}},$=Z=>{const ge=jv.find(oe=>oe.value===Z);return{backgroundColor:`${ge?.color}20`,color:ge?.color}},de=Z=>({QUARANTINE:{bg:"#fef3c7",color:"#92400e"},RELEASED:{bg:"#dcfce7",color:"#166534"},REJECTED:{bg:"#fee2e2",color:"#991b1b"}})[Z]||{bg:"#f1f5f9",color:"#475569"};return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{children:"Goods Receiving"}),r.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Receive goods from purchase orders"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>w(!0),children:[r.jsx(Lr,{size:18})," Receive Goods"]})]}),n&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--primary)"},children:n.total}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Total"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#94a3b8"},children:n.draft}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Draft"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#f59e0b"},children:n.pendingQC}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Pending QC"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#22c55e"},children:n.approved}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Approved"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#0ea5e9"},children:n.receivedToday}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Today"})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[r.jsx(ho,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search GRN or PO number...",value:p,onChange:Z=>g(Z.target.value),className:"form-input",style:{paddingLeft:"2.5rem"}})]}),r.jsxs("select",{value:j,onChange:Z=>v(Z.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Statuses"}),jv.map(Z=>r.jsx("option",{value:Z.value,children:Z.label},Z.value))]})]}),h?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading..."}):e.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[r.jsx(Sr,{size:48,style:{marginBottom:"1rem",opacity:.5}}),r.jsx("p",{children:"No goods receiving notes found"})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"GRN #"}),r.jsx("th",{children:"PO #"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Received Date"}),r.jsx("th",{children:"Delivery Note"}),r.jsx("th",{children:"Items"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"100px"},children:"Actions"})]})}),r.jsx("tbody",{children:e.map(Z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:Z.grnNumber})}),r.jsx("td",{children:Z.purchaseOrder?.poNumber||"-"}),r.jsx("td",{children:Z.supplier?.name||"-"}),r.jsx("td",{children:new Date(Z.receivedDate).toLocaleDateString()}),r.jsx("td",{children:Z.deliveryNoteNumber||"-"}),r.jsx("td",{children:Z._count?.items||0}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:$(Z.status),children:jv.find(ge=>ge.value===Z.status)?.label})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>q(Z),title:"View",children:r.jsx(Pa,{size:16})}),Z.status==="DRAFT"&&r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>re(Z),title:"Submit for QC",children:r.jsx(qo,{size:16})})]})})]},Z.id))})]})})]}),b&&r.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:r.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Receive Goods"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>w(!1),children:""})]}),B?r.jsxs("form",{onSubmit:ie,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px"},children:[r.jsxs("strong",{children:["PO: ",B.poNumber]})," - ",B.supplier.name,r.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",style:{marginLeft:"1rem"},onClick:()=>F(null),children:"Change"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Delivery Note Number"}),r.jsx("input",{type:"text",className:"form-input",value:R.deliveryNoteNumber,onChange:Z=>Y({...R,deliveryNoteNumber:Z.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Notes"}),r.jsx("input",{type:"text",className:"form-input",value:R.notes,onChange:Z=>Y({...R,notes:Z.target.value})})]})]}),r.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Items to Receive"}),r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{className:"data-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Ordered"}),r.jsx("th",{children:"Already Recv"}),r.jsx("th",{children:"Receiving Qty"}),r.jsx("th",{children:"Lot #"}),r.jsx("th",{children:"Batch #"}),r.jsx("th",{children:"Expiry"}),r.jsx("th",{children:"Warehouse"})]})}),r.jsx("tbody",{children:R.items.map((Z,ge)=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:r.jsx("strong",{children:Z.itemCode})}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Z.itemName})]}),r.jsxs("td",{children:[Z.orderedQty," ",Z.unit]}),r.jsx("td",{children:Z.alreadyReceived}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"form-input",style:{width:"80px"},value:Z.receivedQty,onChange:oe=>{const X=[...R.items];X[ge].receivedQty=parseFloat(oe.target.value)||0,Y({...R,items:X})},min:0,max:Z.orderedQty-Z.alreadyReceived})}),r.jsx("td",{children:r.jsx("input",{type:"text",className:"form-input",style:{width:"100px"},value:Z.lotNumber,onChange:oe=>{const X=[...R.items];X[ge].lotNumber=oe.target.value,Y({...R,items:X})}})}),r.jsx("td",{children:r.jsx("input",{type:"text",className:"form-input",style:{width:"100px"},value:Z.batchNumber,onChange:oe=>{const X=[...R.items];X[ge].batchNumber=oe.target.value,Y({...R,items:X})}})}),r.jsx("td",{children:r.jsx("input",{type:"date",className:"form-input",style:{width:"130px"},value:Z.expiryDate,onChange:oe=>{const X=[...R.items];X[ge].expiryDate=oe.target.value,Y({...R,items:X})}})}),r.jsx("td",{children:r.jsxs("select",{className:"form-select",style:{width:"150px"},value:Z.warehouseId,onChange:oe=>{const X=[...R.items];X[ge].warehouseId=oe.target.value,Y({...R,items:X})},children:[r.jsx("option",{value:"",children:"Select..."}),l.map(oe=>r.jsxs("option",{value:oe.id,children:[oe.code," - ",oe.name]},oe.id))]})})]},Z.poItemId))})]})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>w(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create GRN"})]})]}):r.jsxs("div",{className:"modal-body",children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Select Purchase Order"}),a.length===0?r.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No pending purchase orders available for receiving"}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"PO #"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Items"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:a.map(Z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:Z.poNumber})}),r.jsx("td",{children:Z.supplier.name}),r.jsx("td",{children:Z.status}),r.jsx("td",{children:Z.items.length}),r.jsx("td",{children:r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>z(Z),children:"Select"})})]},Z.id))})]})]})]})}),S&&W&&r.jsx("div",{className:"modal-overlay",onClick:()=>_(!1),children:r.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["GRN Details - ",W.grnNumber]}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>_(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"PO Number"}),r.jsx("div",{children:W.purchaseOrder?.poNumber})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Supplier"}),r.jsx("div",{children:W.supplier?.name})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Status"}),r.jsx("span",{className:"badge",style:$(W.status),children:jv.find(Z=>Z.value===W.status)?.label})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Received Date"}),r.jsx("div",{children:new Date(W.receivedDate).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Delivery Note"}),r.jsx("div",{children:W.deliveryNoteNumber||"-"})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h3",{children:["Items (",W.items.length,")"]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[W.status==="DRAFT"&&r.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>re(W),children:[r.jsx(qo,{size:14})," Submit for QC"]}),W.status==="PENDING_QC"&&W.items.every(Z=>Z.status!=="QUARANTINE")&&r.jsxs("button",{className:"btn btn-primary btn-sm",onClick:V,children:[r.jsx(ix,{size:14})," Complete GRN"]}),["APPROVED","PARTIALLY_APPROVED"].includes(W.status)&&r.jsxs("button",{className:"btn btn-success btn-sm",onClick:ne,children:[r.jsx(Sr,{size:14})," Post to Stock"]})]})]}),r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Received"}),r.jsx("th",{children:"Accepted"}),r.jsx("th",{children:"Rejected"}),r.jsx("th",{children:"Lot/Batch"}),r.jsx("th",{children:"Expiry"}),r.jsx("th",{children:"Status"}),W.status==="PENDING_QC"&&r.jsx("th",{children:"QC"})]})}),r.jsx("tbody",{children:W.items.map(Z=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:r.jsx("strong",{children:Z.poItem?.itemCode})}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Z.poItem?.itemName})]}),r.jsxs("td",{children:[Z.receivedQty," ",Z.unit]}),r.jsx("td",{style:{color:"#22c55e"},children:Z.acceptedQty}),r.jsx("td",{style:{color:"#ef4444"},children:Z.rejectedQty}),r.jsxs("td",{children:[r.jsx("div",{children:Z.lotNumber||"-"}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Z.batchNumber})]}),r.jsx("td",{children:Z.expiryDate?new Date(Z.expiryDate).toLocaleDateString():"-"}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:de(Z.status),children:Z.status})}),W.status==="PENDING_QC"&&r.jsx("td",{children:Z.status==="QUARANTINE"&&r.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>ue(Z),children:"QC"})})]},Z.id))})]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn",onClick:()=>_(!1),children:"Close"})})]})}),E&&H&&r.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:r.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxWidth:"500px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"QC Review"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>D(!1),children:""})]}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"1rem"},children:[r.jsx("strong",{children:H.poItem?.itemCode})," - ",H.poItem?.itemName,r.jsxs("div",{style:{marginTop:"0.5rem",color:"var(--text-muted)"},children:["Received Qty: ",H.receivedQty," ",H.unit]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Accepted Qty"}),r.jsx("input",{type:"number",className:"form-input",value:G.acceptedQty,onChange:Z=>{const ge=parseFloat(Z.target.value)||0;ae({...G,acceptedQty:ge,rejectedQty:H.receivedQty-ge})},min:0,max:H.receivedQty})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Rejected Qty"}),r.jsx("input",{type:"number",className:"form-input",value:G.rejectedQty,onChange:Z=>{const ge=parseFloat(Z.target.value)||0;ae({...G,rejectedQty:ge,acceptedQty:H.receivedQty-ge})},min:0,max:H.receivedQty})]})]}),G.rejectedQty>0&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Rejection Reason *"}),r.jsx("textarea",{className:"form-input",value:G.rejectionReason,onChange:Z=>ae({...G,rejectionReason:Z.target.value}),required:G.rejectedQty>0,rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Warehouse"}),r.jsxs("select",{className:"form-select",value:G.warehouseId,onChange:Z=>ae({...G,warehouseId:Z.target.value}),children:[r.jsx("option",{value:"",children:"Select warehouse..."}),l.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.code," - ",Z.name]},Z.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Bin Location"}),r.jsx("input",{type:"text",className:"form-input",value:G.binLocation,onChange:Z=>ae({...G,binLocation:Z.target.value})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>D(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Complete QC"})]})]})]})})]})}const wv=[{value:"AVAILABLE",label:"Available",color:"#22c55e"},{value:"QUARANTINE",label:"Quarantine",color:"#f59e0b"},{value:"RESERVED",label:"Reserved",color:"#3b82f6"},{value:"ON_HOLD",label:"On Hold",color:"#94a3b8"},{value:"EXPIRED",label:"Expired",color:"#ef4444"},{value:"REJECTED",label:"Rejected",color:"#dc2626"}],i5=[{value:"RECEIPT",label:"Receipt",color:"#22c55e"},{value:"ISSUE",label:"Issue",color:"#ef4444"},{value:"TRANSFER_IN",label:"Transfer In",color:"#3b82f6"},{value:"TRANSFER_OUT",label:"Transfer Out",color:"#f59e0b"},{value:"ADJUSTMENT_IN",label:"Adjustment +",color:"#22c55e"},{value:"ADJUSTMENT_OUT",label:"Adjustment -",color:"#ef4444"},{value:"RETURN",label:"Return",color:"#8b5cf6"},{value:"SCRAP",label:"Scrap",color:"#dc2626"}];function hge(){const[e,t]=P.useState([]),[n,i]=P.useState([]),[a,s]=P.useState([]),[l,d]=P.useState(null),[h,f]=P.useState(!0),[p,g]=P.useState("stock"),[j,v]=P.useState(""),[b,w]=P.useState(""),[S,_]=P.useState(""),[E,D]=P.useState(!1),[W,K]=P.useState(!1),[B,F]=P.useState(!1),[H,I]=P.useState(!1),[R,Y]=P.useState(null),[G,ae]=P.useState({adjustmentQty:0,reason:"",notes:""}),[se,Ne]=P.useState({toWarehouseId:"",toLocationId:"",quantity:0,reason:"",notes:""});P.useEffect(()=>{z(),q()},[b,S,j,E]),P.useEffect(()=>{p==="movements"&&ie()},[p,b]);const z=async()=>{try{f(!0);const oe=new URLSearchParams;b&&oe.append("warehouseId",b),S&&oe.append("status",S),j&&oe.append("search",j),E&&oe.append("lowStock","true");const[X,_e]=await Promise.all([xe.get(`/stock?${oe}`),xe.get("/stock/stats")]);t(X.data),d(_e.data)}catch(oe){console.error("Error fetching stock:",oe)}finally{f(!1)}},ie=async()=>{try{const oe=new URLSearchParams;b&&oe.append("warehouseId",b);const X=await xe.get(`/stock/movements?${oe}`);i(X.data)}catch(oe){console.error("Error fetching movements:",oe)}},q=async()=>{try{const oe=await xe.get("/warehouses?status=ACTIVE");s(oe.data)}catch(oe){console.error("Error fetching warehouses:",oe)}},re=async oe=>{try{const X=await xe.get(`/stock/${oe.id}`);Y(X.data),K(!0)}catch(X){console.error("Error fetching stock details:",X)}},ue=oe=>{Y(oe),ae({adjustmentQty:0,reason:"",notes:""}),F(!0)},Q=async oe=>{if(oe.preventDefault(),!!R)try{await xe.post("/stock/adjust",{stockItemId:R.id,...G}),F(!1),z()}catch(X){alert(X.response?.data?.error||"Failed to adjust stock")}},V=oe=>{Y(oe),Ne({toWarehouseId:"",toLocationId:"",quantity:oe.availableQty,reason:"",notes:""}),I(!0)},ne=async oe=>{if(oe.preventDefault(),!!R)try{await xe.post("/stock/transfer",{stockItemId:R.id,...se}),I(!1),z()}catch(X){alert(X.response?.data?.error||"Failed to transfer stock")}},$=oe=>{const X=wv.find(_e=>_e.value===oe);return{backgroundColor:`${X?.color}20`,color:X?.color}},de=oe=>{const X=i5.find(_e=>_e.value===oe);return{backgroundColor:`${X?.color}20`,color:X?.color}},Z=oe=>oe.material.minStockLevel>0&&oe.availableQty<oe.material.minStockLevel,ge=oe=>{if(!oe.expiryDate)return!1;const X=new Date(oe.expiryDate),_e=new Date;return _e.setDate(_e.getDate()+30),X<=_e&&X>new Date};return r.jsxs("div",{className:"page-container",children:[r.jsx("div",{className:"page-header",children:r.jsxs("div",{children:[r.jsx("h1",{children:"Inventory"}),r.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.25rem"},children:"Track stock levels and movements"})]})}),l&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--primary)"},children:l.totalItems}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Total Items"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#22c55e"},children:l.available}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Available"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#f59e0b"},children:l.quarantine}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Quarantine"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#ef4444"},children:l.lowStockCount}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Low Stock"})]}),r.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"#8b5cf6"},children:l.expiringSoon}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Expiring Soon"})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",borderBottom:"1px solid var(--border)",paddingBottom:"1rem"},children:[r.jsxs("button",{className:`btn ${p==="stock"?"btn-primary":""}`,onClick:()=>g("stock"),children:[r.jsx(Sr,{size:16})," Stock Items"]}),r.jsxs("button",{className:`btn ${p==="movements"?"btn-primary":""}`,onClick:()=>g("movements"),children:[r.jsx(Cb,{size:16})," Movements"]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[r.jsx(ho,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),r.jsx("input",{type:"text",placeholder:"Search by material, lot, or batch...",value:j,onChange:oe=>v(oe.target.value),className:"form-input",style:{paddingLeft:"2.5rem"}})]}),r.jsxs("select",{value:b,onChange:oe=>w(oe.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Warehouses"}),a.map(oe=>r.jsxs("option",{value:oe.id,children:[oe.code," - ",oe.name]},oe.id))]}),p==="stock"&&r.jsxs(r.Fragment,{children:[r.jsxs("select",{value:S,onChange:oe=>_(oe.target.value),className:"form-select",style:{minWidth:"150px"},children:[r.jsx("option",{value:"",children:"All Statuses"}),wv.map(oe=>r.jsx("option",{value:oe.value,children:oe.label},oe.value))]}),r.jsxs("button",{className:`btn ${E?"btn-warning":""}`,onClick:()=>D(!E),children:[r.jsx(vr,{size:16})," Low Stock"]})]})]}),p==="stock"&&(h?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading..."}):e.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[r.jsx(Sr,{size:48,style:{marginBottom:"1rem",opacity:.5}}),r.jsx("p",{children:"No stock items found"})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Material"}),r.jsx("th",{children:"Warehouse"}),r.jsx("th",{children:"Lot/Batch"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Reserved"}),r.jsx("th",{children:"Available"}),r.jsx("th",{children:"Expiry"}),r.jsx("th",{children:"Status"}),r.jsx("th",{style:{width:"120px"},children:"Actions"})]})}),r.jsx("tbody",{children:e.map(oe=>r.jsxs("tr",{style:{backgroundColor:Z(oe)?"#fef2f2":void 0},children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:oe.material.code}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:oe.material.name})]}),Z(oe)&&r.jsx(vr,{size:14,color:"#ef4444"})]})}),r.jsxs("td",{children:[r.jsx("div",{children:oe.warehouse.code}),oe.location&&r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:oe.location.code})]}),r.jsxs("td",{children:[r.jsx("div",{children:oe.lotNumber||"-"}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:oe.batchNumber||""})]}),r.jsxs("td",{children:[oe.quantity," ",oe.unit]}),r.jsx("td",{style:{color:"#3b82f6"},children:oe.reservedQty}),r.jsx("td",{style:{color:"#22c55e",fontWeight:600},children:oe.availableQty}),r.jsx("td",{children:oe.expiryDate?r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:ge(oe)?"#f59e0b":void 0},children:[ge(oe)&&r.jsx(Dt,{size:14}),new Date(oe.expiryDate).toLocaleDateString()]}):"-"}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:$(oe.status),children:wv.find(X=>X.value===oe.status)?.label})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>re(oe),title:"View",children:r.jsx(Pa,{size:16})}),r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>ue(oe),title:"Adjust",children:r.jsx(iS,{size:16})}),oe.availableQty>0&&r.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>V(oe),title:"Transfer",children:r.jsx(Cb,{size:16})})]})})]},oe.id))})]})})),p==="movements"&&(n.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[r.jsx(Cb,{size:48,style:{marginBottom:"1rem",opacity:.5}}),r.jsx("p",{children:"No stock movements found"})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Movement #"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Material"}),r.jsx("th",{children:"Warehouse"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Reference"}),r.jsx("th",{children:"Reason"})]})}),r.jsx("tbody",{children:n.map(oe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:oe.movementNumber})}),r.jsx("td",{children:new Date(oe.performedAt).toLocaleString()}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:de(oe.type),children:i5.find(X=>X.value===oe.type)?.label})}),r.jsxs("td",{children:[r.jsx("div",{children:oe.stockItem.material.code}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:oe.stockItem.material.name})]}),r.jsx("td",{children:oe.warehouse.code}),r.jsxs("td",{style:{fontWeight:600,color:oe.type.includes("IN")||oe.type==="RECEIPT"?"#22c55e":"#ef4444"},children:[oe.type.includes("IN")||oe.type==="RECEIPT"?"+":"-",oe.quantity," ",oe.unit]}),r.jsx("td",{children:oe.referenceType&&oe.referenceNumber?r.jsxs("span",{children:[oe.referenceType,": ",oe.referenceNumber]}):"-"}),r.jsx("td",{children:oe.reason||"-"})]},oe.id))})]})}))]}),W&&R&&r.jsx("div",{className:"modal-overlay",onClick:()=>K(!1),children:r.jsxs("div",{className:"modal",onClick:oe=>oe.stopPropagation(),style:{maxWidth:"700px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Stock Item Details"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>K(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Material"}),r.jsxs("div",{children:[r.jsx("strong",{children:R.material.code})," - ",R.material.name]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Warehouse"}),r.jsxs("div",{children:[R.warehouse.code," - ",R.warehouse.name]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Lot Number"}),r.jsx("div",{children:R.lotNumber||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Batch Number"}),r.jsx("div",{children:R.batchNumber||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Total Quantity"}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:700},children:[R.quantity," ",R.unit]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Available"}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"#22c55e"},children:[R.availableQty," ",R.unit]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Reserved"}),r.jsxs("div",{children:[R.reservedQty," ",R.unit]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Status"}),r.jsx("span",{className:"badge",style:$(R.status),children:wv.find(oe=>oe.value===R.status)?.label})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Manufacturing Date"}),r.jsx("div",{children:R.manufacturingDate?new Date(R.manufacturingDate).toLocaleDateString():"-"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Expiry Date"}),r.jsx("div",{children:R.expiryDate?new Date(R.expiryDate).toLocaleDateString():"-"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Received Date"}),r.jsx("div",{children:R.receivedDate?new Date(R.receivedDate).toLocaleDateString():"-"})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Unit Cost"}),r.jsx("div",{children:R.unitCost?`SAR ${R.unitCost.toFixed(2)}`:"-"})]})]}),R.movements&&R.movements.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("h4",{style:{marginTop:"1.5rem",marginBottom:"0.5rem"},children:"Recent Movements"}),r.jsxs("table",{className:"data-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Reason"})]})}),r.jsx("tbody",{children:R.movements.slice(0,10).map(oe=>r.jsxs("tr",{children:[r.jsx("td",{children:new Date(oe.performedAt).toLocaleString()}),r.jsx("td",{children:r.jsx("span",{className:"badge",style:de(oe.type),children:i5.find(X=>X.value===oe.type)?.label})}),r.jsxs("td",{children:[oe.quantity," ",oe.unit]}),r.jsx("td",{children:oe.reason||"-"})]},oe.id))})]})]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn",onClick:()=>K(!1),children:"Close"})})]})}),B&&R&&r.jsx("div",{className:"modal-overlay",onClick:()=>F(!1),children:r.jsxs("div",{className:"modal",onClick:oe=>oe.stopPropagation(),style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Adjust Stock"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>F(!1),children:""})]}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"1rem"},children:[r.jsx("strong",{children:R.material.code})," - ",R.material.name,r.jsxs("div",{style:{marginTop:"0.5rem",color:"var(--text-muted)"},children:["Current: ",R.quantity," ",R.unit," (Available: ",R.availableQty,")"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Adjustment Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:G.adjustmentQty,onChange:oe=>ae({...G,adjustmentQty:parseFloat(oe.target.value)||0}),step:"0.01"}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:"Positive for increase, negative for decrease"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Reason *"}),r.jsxs("select",{className:"form-select",value:G.reason,onChange:oe=>ae({...G,reason:oe.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Select reason..."}),r.jsx("option",{value:"Physical count correction",children:"Physical count correction"}),r.jsx("option",{value:"Damage/Scrap",children:"Damage/Scrap"}),r.jsx("option",{value:"Expired",children:"Expired"}),r.jsx("option",{value:"System error correction",children:"System error correction"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Notes"}),r.jsx("textarea",{className:"form-input",value:G.notes,onChange:oe=>ae({...G,notes:oe.target.value}),rows:2})]}),r.jsxs("div",{style:{padding:"0.75rem",backgroundColor:G.adjustmentQty>=0?"#dcfce7":"#fee2e2",borderRadius:"8px"},children:[r.jsx("strong",{children:"New Quantity: "}),R.quantity+G.adjustmentQty," ",R.unit]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>F(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:G.adjustmentQty===0,children:"Adjust Stock"})]})]})]})}),H&&R&&r.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:r.jsxs("div",{className:"modal",onClick:oe=>oe.stopPropagation(),style:{maxWidth:"450px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Transfer Stock"}),r.jsx("button",{className:"btn btn-ghost",onClick:()=>I(!1),children:""})]}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"1rem"},children:[r.jsx("strong",{children:R.material.code})," - ",R.material.name,r.jsxs("div",{style:{marginTop:"0.5rem",color:"var(--text-muted)"},children:["From: ",R.warehouse.code," - ",R.warehouse.name]}),r.jsxs("div",{style:{color:"var(--text-muted)"},children:["Available: ",R.availableQty," ",R.unit]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"To Warehouse *"}),r.jsxs("select",{className:"form-select",value:se.toWarehouseId,onChange:oe=>Ne({...se,toWarehouseId:oe.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Select warehouse..."}),a.filter(oe=>oe.id!==R.warehouseId).map(oe=>r.jsxs("option",{value:oe.id,children:[oe.code," - ",oe.name]},oe.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Quantity *"}),r.jsx("input",{type:"number",className:"form-input",value:se.quantity,onChange:oe=>Ne({...se,quantity:parseFloat(oe.target.value)||0}),min:.01,max:R.availableQty,step:"0.01",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Reason"}),r.jsx("input",{type:"text",className:"form-input",value:se.reason,onChange:oe=>Ne({...se,reason:oe.target.value}),placeholder:"e.g., Production requirement"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Notes"}),r.jsx("textarea",{className:"form-input",value:se.notes,onChange:oe=>Ne({...se,notes:oe.target.value}),rows:2})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>I(!1),children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!se.toWarehouseId||se.quantity<=0,children:"Transfer"})]})]})]})})]})}const xD=[{value:"DRAFT",label:"Draft",color:"#94a3b8"},{value:"IN_PROGRESS",label:"In Progress",color:"#3b82f6"},{value:"PENDING_REVIEW",label:"Pending Review",color:"#f59e0b"},{value:"APPROVED",label:"Approved",color:"#22c55e"},{value:"REJECTED",label:"Rejected",color:"#ef4444"},{value:"CANCELLED",label:"Cancelled",color:"#6b7280"}],fge=[{value:"PENDING",label:"Pending",color:"#94a3b8"},{value:"IN_PROGRESS",label:"In Progress",color:"#3b82f6"},{value:"COMPLETED",label:"Completed",color:"#22c55e"},{value:"SKIPPED",label:"Skipped",color:"#6b7280"},{value:"FAILED",label:"Failed",color:"#ef4444"},{value:"ON_HOLD",label:"On Hold",color:"#f59e0b"}];function mge(){const[e,t]=P.useState([]),[n,i]=P.useState({total:0,draft:0,inProgress:0,pendingReview:0,approved:0,rejected:0}),[a,s]=P.useState(!0),[l,d]=P.useState(""),[h,f]=P.useState(""),[p,g]=P.useState(1),[j,v]=P.useState(1),[b,w]=P.useState(null),[S,_]=P.useState([]),[E,D]=P.useState(null),[W,K]=P.useState(!1),[B,F]=P.useState(!1),[H,I]=P.useState([]),[R,Y]=P.useState([]),[G,ae]=P.useState({batchId:"",recipeId:"",notes:""}),[se,Ne]=P.useState(!1);P.useEffect(()=>{z(),ie()},[l,h,p]);const z=async()=>{try{s(!0);const X={page:p,limit:15};l&&(X.search=l),h&&(X.status=h);const _e=await xe.get("/batch-records",{params:X});t(_e.data.records),v(_e.data.totalPages)}catch(X){console.error("Error fetching batch records:",X)}finally{s(!1)}},ie=async()=>{try{const _e=(await xe.get("/batch-records",{params:{limit:1e3}})).data.records;i({total:_e.length,draft:_e.filter(Ie=>Ie.status==="DRAFT").length,inProgress:_e.filter(Ie=>Ie.status==="IN_PROGRESS").length,pendingReview:_e.filter(Ie=>Ie.status==="PENDING_REVIEW").length,approved:_e.filter(Ie=>Ie.status==="APPROVED").length,rejected:_e.filter(Ie=>Ie.status==="REJECTED").length})}catch(X){console.error("Error fetching stats:",X)}},q=async X=>{try{const[_e,Ie]=await Promise.all([xe.get(`/batch-records/${X}`),xe.get(`/batch-records/${X}/kpis`)]);w(_e.data),_(_e.data.steps||[]),D(Ie.data),K(!0)}catch(_e){console.error("Error fetching record detail:",_e)}},re=async()=>{try{const[X,_e]=await Promise.all([xe.get("/batches",{params:{limit:100}}),xe.get("/recipes",{params:{status:"ACTIVE",limit:100}})]);I(X.data.batches||[]),Y(_e.data.recipes||[]),ae({batchId:"",recipeId:"",notes:""}),F(!0)}catch(X){console.error("Error loading form data:",X)}},ue=async()=>{if(!(!G.batchId||!G.recipeId))try{Ne(!0),await xe.post("/batch-records",G),F(!1),z(),ie()}catch(X){alert(X.response?.data?.error||"Failed to create batch record")}finally{Ne(!1)}},Q=async()=>{if(b)try{await xe.post(`/batch-records/${b.id}/start`),q(b.id),z(),ie()}catch(X){alert(X.response?.data?.error||"Failed to start batch record")}},V=async X=>{if(b)try{await xe.post(`/batch-records/${b.id}/steps/${X}/start`),q(b.id)}catch(_e){alert(_e.response?.data?.error||"Failed to start step")}},ne=async X=>{if(b)try{await xe.post(`/batch-records/${b.id}/steps/${X}/complete`,{}),q(b.id)}catch(_e){alert(_e.response?.data?.error||"Failed to complete step")}},$=async()=>{if(b)try{await xe.post(`/batch-records/${b.id}/complete`,{}),q(b.id),z(),ie()}catch(X){alert(X.response?.data?.error||"Failed to complete batch record")}},de=async()=>{if(b)try{await xe.post(`/batch-records/${b.id}/review`,{meaning:"Reviewed and verified"}),q(b.id),z(),ie()}catch(X){alert(X.response?.data?.error||"Failed to review batch record")}},Z=async()=>{if(b)try{await xe.post(`/batch-records/${b.id}/approve`,{meaning:"Approved for release"}),q(b.id),z(),ie()}catch(X){alert(X.response?.data?.error||"Failed to approve batch record")}},ge=X=>{const _e=xD.find(Ie=>Ie.value===X);return r.jsx("span",{style:{backgroundColor:_e?.color||"#94a3b8"},className:"px-2 py-1 rounded text-white text-xs font-medium",children:_e?.label||X})},oe=X=>{const _e=fge.find(Ie=>Ie.value===X);return r.jsx("span",{style:{backgroundColor:_e?.color||"#94a3b8"},className:"px-2 py-1 rounded text-white text-xs font-medium",children:_e?.label||X})};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jw,{className:"w-8 h-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manufacturing Execution"}),r.jsx("p",{className:"text-gray-600",children:"Electronic Batch Records (eBR) for production control"})]})]}),r.jsxs("button",{onClick:re,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(Lr,{className:"w-5 h-5"}),"New Batch Record"]})]}),r.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-gray-400",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-gray-500",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Draft"}),r.jsx("p",{className:"text-2xl font-bold text-gray-600",children:n.draft})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.inProgress})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-yellow-500",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:n.pendingReview})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.approved})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-red-500",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:n.rejected})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-4 border-b flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search by record number or batch...",value:l,onChange:X=>{d(X.target.value),g(1)},className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:h,onChange:X=>{f(X.target.value),g(1)},className:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"All Statuses"}),xD.map(X=>r.jsx("option",{value:X.value,children:X.label},X.value))]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Record #"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Batch"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Product"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Recipe"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Progress"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Created"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:a?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"Loading..."})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No batch records found"})}):e.map(X=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-blue-600",children:X.recordNumber}),r.jsx("td",{className:"px-4 py-3",children:X.batch?.batchNumber}),r.jsx("td",{className:"px-4 py-3",children:X.batch?.product?.name}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("span",{className:"text-sm",children:[X.recipe?.code," v",X.recipeVersion]})}),r.jsx("td",{className:"px-4 py-3",children:ge(X.status)}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Wl,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"text-sm",children:[X._count?.steps||0," steps"]}),(X._count?.deviations||0)>0&&r.jsxs("span",{className:"flex items-center gap-1 text-red-600 text-xs",children:[r.jsx(vr,{className:"w-3 h-3"}),X._count?.deviations]})]})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(X.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{onClick:()=>q(X.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:r.jsx(Pa,{className:"w-4 h-4"})})})]},X.id))})]})}),j>1&&r.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[r.jsx("button",{onClick:()=>g(X=>Math.max(1,X-1)),disabled:p===1,className:"px-4 py-2 border rounded disabled:opacity-50",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",p," of ",j]}),r.jsx("button",{onClick:()=>g(X=>Math.min(j,X+1)),disabled:p===j,className:"px-4 py-2 border rounded disabled:opacity-50",children:"Next"})]})]}),B&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[r.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Create Batch Record"}),r.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch *"}),r.jsxs("select",{value:G.batchId,onChange:X=>ae({...G,batchId:X.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select batch..."}),H.map(X=>r.jsxs("option",{value:X.id,children:[X.batchNumber," - ",X.product?.name]},X.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipe *"}),r.jsxs("select",{value:G.recipeId,onChange:X=>ae({...G,recipeId:X.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select recipe..."}),R.map(X=>r.jsxs("option",{value:X.id,children:[X.code," - ",X.name," (v",X.version,")"]},X.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:G.notes,onChange:X=>ae({...G,notes:X.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",rows:3})]})]}),r.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:ue,disabled:se||!G.batchId||!G.recipeId,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:se?"Creating...":"Create Record"})]})]})}),W&&b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-gray-50",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:b.recordNumber}),r.jsxs("p",{className:"text-sm text-gray-600",children:[b.batch?.batchNumber," - ",b.batch?.product?.name]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[ge(b.status),r.jsx("button",{onClick:()=>K(!1),className:"ml-4 text-gray-400 hover:text-gray-600 text-xl",children:""})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[E&&r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(Wl,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Progress"})]}),r.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[E.progress?.percentage||0,"%"]}),r.jsxs("p",{className:"text-xs text-blue-600",children:[E.progress?.completed,"/",E.progress?.total," steps"]})]}),r.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[r.jsx(Dt,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Duration"})]}),r.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[E.timing?.actualMinutes||0," min"]}),r.jsxs("p",{className:"text-xs text-purple-600",children:["Expected: ",E.timing?.expectedMinutes||0," min"]})]}),r.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Materials"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-700",children:E.materials?.itemsConsumed||0}),r.jsx("p",{className:"text-xs text-green-600",children:"Items consumed"})]}),r.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-1",children:[r.jsx(QW,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Equipment"})]}),r.jsx("p",{className:"text-2xl font-bold text-orange-700",children:E.equipment?.itemsUsed||0}),r.jsx("p",{className:"text-xs text-orange-600",children:"Items used"})]}),r.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(qp,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Deviations"})]}),r.jsx("p",{className:"text-2xl font-bold text-red-700",children:E.deviations?.total||0}),r.jsxs("p",{className:"text-xs text-red-600",children:[E.deviations?.open||0," open"]})]})]}),r.jsxs("div",{className:"bg-white border rounded-lg",children:[r.jsx("div",{className:"p-3 border-b bg-gray-50",children:r.jsx("h3",{className:"font-semibold",children:"Production Steps"})}),r.jsx("div",{className:"divide-y",children:S.map(X=>r.jsxs("div",{className:"p-3 flex items-center justify-between hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium",children:X.sequence}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-medium",children:[X.stepNumber,": ",X.stepName]}),X.isQualityCheckpoint&&r.jsx("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"QC"}),X.requiresVerification&&r.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"Verify"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:X.description||X.category})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[X.expectedDuration&&r.jsxs("span",{className:"text-sm text-gray-500",children:["~",X.expectedDuration," min"]}),oe(X.status),b.status==="IN_PROGRESS"&&X.status==="PENDING"&&r.jsx("button",{onClick:()=>V(X.id),className:"p-1.5 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",children:r.jsx(fd,{className:"w-4 h-4"})}),b.status==="IN_PROGRESS"&&X.status==="IN_PROGRESS"&&r.jsx("button",{onClick:()=>ne(X.id),className:"p-1.5 bg-green-100 text-green-600 rounded hover:bg-green-200",children:r.jsx(yt,{className:"w-4 h-4"})})]})]},X.id))})]})]}),r.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[b.startedBy&&r.jsxs("span",{children:["Started by: ",b.startedBy.firstName," ",b.startedBy.lastName]}),b.approvedBy&&r.jsxs("span",{className:"ml-4",children:["Approved by: ",b.approvedBy.firstName," ",b.approvedBy.lastName]})]}),r.jsxs("div",{className:"flex gap-2",children:[b.status==="DRAFT"&&r.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[r.jsx(fd,{className:"w-4 h-4"}),"Start Production"]}),b.status==="IN_PROGRESS"&&E?.progress?.percentage===100&&r.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(yt,{className:"w-4 h-4"}),"Complete Production"]}),b.status==="PENDING_REVIEW"&&!b.reviewedAt&&r.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:[r.jsx(Pa,{className:"w-4 h-4"}),"Review Record"]}),b.status==="PENDING_REVIEW"&&b.reviewedAt&&r.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(yt,{className:"w-4 h-4"}),"Approve Record"]})]})]})]})})]})}const bD=[{value:"OPEN",label:"Open",color:"#94a3b8"},{value:"PHASE_1_LAB_INVESTIGATION",label:"Phase 1 Investigation",color:"#3b82f6"},{value:"PHASE_1_COMPLETE",label:"Phase 1 Complete",color:"#8b5cf6"},{value:"PHASE_2_FULL_INVESTIGATION",label:"Phase 2 Investigation",color:"#f59e0b"},{value:"PHASE_2_COMPLETE",label:"Phase 2 Complete",color:"#ec4899"},{value:"CAPA_PROPOSED",label:"CAPA Proposed",color:"#06b6d4"},{value:"CAPA_APPROVED",label:"CAPA Approved",color:"#10b981"},{value:"CAPA_IMPLEMENTING",label:"CAPA Implementing",color:"#84cc16"},{value:"CLOSED_CONFIRMED",label:"Closed (Confirmed)",color:"#22c55e"},{value:"CLOSED_INVALIDATED",label:"Closed (Invalidated)",color:"#6b7280"},{value:"CLOSED_INCONCLUSIVE",label:"Closed (Inconclusive)",color:"#a855f7"}],Sv=[{value:"OOS",label:"Out of Specification",color:"#ef4444"},{value:"OOT",label:"Out of Trend",color:"#f59e0b"},{value:"OOE",label:"Out of Expectation",color:"#3b82f6"}],a5=[{value:"LOW",label:"Low",color:"#94a3b8"},{value:"MEDIUM",label:"Medium",color:"#3b82f6"},{value:"HIGH",label:"High",color:"#f59e0b"},{value:"CRITICAL",label:"Critical",color:"#ef4444"}];function pge(){const[e,t]=P.useState([]),[n,i]=P.useState(null),[a,s]=P.useState(!0),[l,d]=P.useState(""),[h,f]=P.useState(""),[p,g]=P.useState(""),[j,v]=P.useState(""),[b,w]=P.useState(1),[S,_]=P.useState(1),[E,D]=P.useState(!1),[W,K]=P.useState(!1),[B,F]=P.useState(null),[H,I]=P.useState([]),[R,Y]=P.useState({batchId:"",caseType:"OOS",priority:"MEDIUM",testName:"",testMethod:"",specMin:"",specMax:"",actualValue:"",unit:"",deviationPercent:"",initialDescription:"",dueDate:""}),G=async()=>{try{const X=new URLSearchParams({page:b.toString(),limit:"20"});h&&X.append("status",h),p&&X.append("caseType",p),j&&X.append("priority",j);const _e=await xe.get(`/oos-investigations?${X}`);t(_e.data.cases),_(_e.data.totalPages)}catch(X){console.error("Failed to fetch OOS cases:",X)}},ae=async()=>{try{const X=await xe.get("/oos-investigations/stats");i(X.data)}catch(X){console.error("Failed to fetch stats:",X)}},se=async()=>{try{const X=await xe.get("/batches");I(X.data.slice(0,100))}catch(X){console.error("Failed to fetch batches:",X)}};P.useEffect(()=>{(async()=>(s(!0),await Promise.all([G(),ae(),se()]),s(!1)))()},[b,h,p,j]);const Ne=async()=>{try{await xe.post("/oos-investigations",R),D(!1),Y({batchId:"",caseType:"OOS",priority:"MEDIUM",testName:"",testMethod:"",specMin:"",specMax:"",actualValue:"",unit:"",deviationPercent:"",initialDescription:"",dueDate:""}),G(),ae()}catch(X){console.error("Failed to create OOS case:",X)}},z=async X=>{try{const _e=await xe.get(`/oos-investigations/${X}`);F(_e.data),K(!0)}catch(_e){console.error("Failed to fetch case details:",_e)}},ie=async X=>{try{await xe.post(`/oos-investigations/${X}/start-phase1`,{}),z(X),G(),ae()}catch(_e){console.error("Failed to start Phase 1:",_e)}},q=async(X,_e)=>{try{await xe.post(`/oos-investigations/${X}/complete-phase1`,{conclusion:"Phase 1 investigation completed",proceedToPhase2:_e}),z(X),G(),ae()}catch(Ie){console.error("Failed to complete Phase 1:",Ie)}},re=async X=>{try{await xe.post(`/oos-investigations/${X}/start-phase2`,{}),z(X),G(),ae()}catch(_e){console.error("Failed to start Phase 2:",_e)}},ue=async X=>{try{await xe.post(`/oos-investigations/${X}/complete-phase2`,{conclusion:"Phase 2 investigation completed",rootCause:"Root cause identified during investigation"}),z(X),G(),ae()}catch(_e){console.error("Failed to complete Phase 2:",_e)}},Q=async X=>{try{await xe.post(`/oos-investigations/${X}/propose-capa`,{rootCause:"Root cause identified",correctiveAction:"Corrective actions to be taken",preventiveAction:"Preventive measures to implement"}),z(X),G(),ae()}catch(_e){console.error("Failed to propose CAPA:",_e)}},V=async X=>{try{await xe.post(`/oos-investigations/${X}/approve-capa`,{signatureMeaning:"I approve this CAPA for implementation"}),z(X),G(),ae()}catch(_e){console.error("Failed to approve CAPA:",_e)}},ne=async X=>{try{await xe.post(`/oos-investigations/${X}/start-implementation`,{}),z(X),G(),ae()}catch(_e){console.error("Failed to start implementation:",_e)}},$=async(X,_e)=>{try{await xe.post(`/oos-investigations/${X}/close`,{closureType:_e,finalConclusion:`Case closed as ${_e}`,signatureMeaning:`I confirm the closure of this OOS case as ${_e}`}),z(X),G(),ae()}catch(Ie){console.error("Failed to close case:",Ie)}},de=X=>{const _e=bD.find(Ie=>Ie.value===X);return r.jsx("span",{style:{backgroundColor:_e?.color||"#94a3b8"},className:"px-2 py-1 rounded text-white text-xs font-medium",children:_e?.label||X})},Z=X=>{const _e=Sv.find(Ie=>Ie.value===X);return r.jsx("span",{style:{backgroundColor:_e?.color||"#94a3b8"},className:"px-2 py-1 rounded text-white text-xs font-medium",children:_e?.label||X})},ge=X=>{const _e=a5.find(Ie=>Ie.value===X);return r.jsx("span",{style:{backgroundColor:_e?.color||"#94a3b8"},className:"px-2 py-1 rounded text-white text-xs font-medium",children:_e?.label||X})},oe=e.filter(X=>X.caseNumber.toLowerCase().includes(l.toLowerCase())||X.testName.toLowerCase().includes(l.toLowerCase())||X.batch?.batchNumber?.toLowerCase().includes(l.toLowerCase())||X.batch?.product?.name?.toLowerCase().includes(l.toLowerCase()));return a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(vr,{className:"w-8 h-8 text-red-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"OOS/OOT Investigations"}),r.jsx("p",{className:"text-gray-500",children:"Manage out-of-specification and out-of-trend investigations"})]})]}),r.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:[r.jsx(Lr,{className:"w-4 h-4"}),"Open New Case"]})]}),n&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Wl,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Open Cases"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n.openCases})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-red-500",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(XH,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Overdue"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n.overdue})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Closed (30d)"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n.recentClosures})]}),Sv.map(X=>{const _e=n.byType.find(Ie=>Ie.caseType===X.value)?._count.id||0;return r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",style:{borderLeftWidth:"4px",borderLeftColor:X.color},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qp,{className:"w-5 h-5",style:{color:X.color}}),r.jsx("span",{className:"text-sm text-gray-500",children:X.label})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:_e})]},X.value)})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-4 border-b flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[r.jsx(ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by case number, test name, or batch...",value:l,onChange:X=>d(X.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),r.jsxs("select",{value:h,onChange:X=>{f(X.target.value),w(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"",children:"All Statuses"}),bD.map(X=>r.jsx("option",{value:X.value,children:X.label},X.value))]}),r.jsxs("select",{value:p,onChange:X=>{g(X.target.value),w(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"",children:"All Types"}),Sv.map(X=>r.jsx("option",{value:X.value,children:X.label},X.value))]}),r.jsxs("select",{value:j,onChange:X=>{v(X.target.value),w(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"",children:"All Priorities"}),a5.map(X=>r.jsx("option",{value:X.value,children:X.label},X.value))]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Case"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Batch"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opened"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:oe.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No OOS/OOT cases found"})}):oe.map(X=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"font-medium text-gray-900",children:X.caseNumber})}),r.jsx("td",{className:"px-4 py-3",children:Z(X.caseType)}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:X.batch?.batchNumber}),r.jsx("p",{className:"text-xs text-gray-500",children:X.batch?.product?.name})]})}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("span",{className:"text-gray-900",children:X.testName}),X.actualValue&&X.specMin&&X.specMax&&r.jsxs("p",{className:"text-xs text-gray-500",children:[X.actualValue," ",X.unit," (Spec: ",X.specMin,"-",X.specMax,")"]})]}),r.jsx("td",{className:"px-4 py-3",children:ge(X.priority)}),r.jsx("td",{className:"px-4 py-3",children:de(X.status)}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"text-sm text-gray-500",children:new Date(X.openedAt).toLocaleDateString()})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{onClick:()=>z(X.id),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"View Details",children:r.jsx(Pa,{className:"w-4 h-4"})})})]},X.id))})]})}),S>1&&r.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[r.jsx("button",{onClick:()=>w(X=>Math.max(1,X-1)),disabled:b===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",b," of ",S]}),r.jsx("button",{onClick:()=>w(X=>Math.min(S,X+1)),disabled:b===S,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),E&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsx("h2",{className:"text-xl font-semibold",children:"Open New OOS/OOT Investigation"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch *"}),r.jsxs("select",{value:R.batchId,onChange:X=>Y({...R,batchId:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"",children:"Select Batch"}),H.map(X=>r.jsxs("option",{value:X.id,children:[X.batchNumber," - ",X.product?.name]},X.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Case Type *"}),r.jsx("select",{value:R.caseType,onChange:X=>Y({...R,caseType:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500",children:Sv.map(X=>r.jsx("option",{value:X.value,children:X.label},X.value))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority *"}),r.jsx("select",{value:R.priority,onChange:X=>Y({...R,priority:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500",children:a5.map(X=>r.jsx("option",{value:X.value,children:X.label},X.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),r.jsx("input",{type:"date",value:R.dueDate,onChange:X=>Y({...R,dueDate:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name *"}),r.jsx("input",{type:"text",value:R.testName,onChange:X=>Y({...R,testName:X.target.value}),placeholder:"e.g., Radiochemical Purity",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Method"}),r.jsx("input",{type:"text",value:R.testMethod,onChange:X=>Y({...R,testMethod:X.target.value}),placeholder:"e.g., HPLC",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spec Min"}),r.jsx("input",{type:"number",step:"0.01",value:R.specMin,onChange:X=>Y({...R,specMin:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spec Max"}),r.jsx("input",{type:"number",step:"0.01",value:R.specMax,onChange:X=>Y({...R,specMax:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Actual Value"}),r.jsx("input",{type:"number",step:"0.01",value:R.actualValue,onChange:X=>Y({...R,actualValue:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),r.jsx("input",{type:"text",value:R.unit,onChange:X=>Y({...R,unit:X.target.value}),placeholder:"e.g., %",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Description *"}),r.jsx("textarea",{value:R.initialDescription,onChange:X=>Y({...R,initialDescription:X.target.value}),rows:4,placeholder:"Describe the observed deviation...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"})]})]}),r.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Ne,disabled:!R.batchId||!R.testName||!R.initialDescription,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Open Case"})]})]})}),W&&B&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:B.caseNumber}),r.jsxs("p",{className:"text-gray-500",children:[B.batch?.batchNumber," - ",B.batch?.product?.name]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Z(B.caseType),ge(B.priority),de(B.status)]})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(qp,{className:"w-5 h-5"}),"Test Details"]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Test Name:"})," ",B.testName]}),B.testMethod&&r.jsxs("p",{children:[r.jsx("strong",{children:"Method:"})," ",B.testMethod]}),B.specMin!==null&&B.specMax!==null&&r.jsxs("p",{children:[r.jsx("strong",{children:"Specification:"})," ",B.specMin," - ",B.specMax," ",B.unit]}),B.actualValue!==null&&r.jsxs("p",{children:[r.jsx("strong",{children:"Actual Value:"})," ",B.actualValue," ",B.unit]}),B.deviationPercent!==null&&r.jsxs("p",{children:[r.jsx("strong",{children:"Deviation:"})," ",B.deviationPercent?.toFixed(2),"%"]})]}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Initial Description"}),r.jsx("p",{className:"text-gray-600",children:B.initialDescription}),B.rootCause&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Root Cause"}),r.jsx("p",{className:"text-gray-600",children:B.rootCause})]}),B.correctiveAction&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Corrective Action"}),r.jsx("p",{className:"text-gray-600",children:B.correctiveAction})]}),B.preventiveAction&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Preventive Action"}),r.jsx("p",{className:"text-gray-600",children:B.preventiveAction})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Wl,{className:"w-5 h-5"}),"Investigation Progress"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`p-3 rounded-lg border ${B.status==="OPEN"?"border-blue-500 bg-blue-50":B.phase1StartedAt?"border-green-500 bg-green-50":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"Phase 1: Lab Investigation"}),B.phase1CompletedAt?r.jsx(yt,{className:"w-5 h-5 text-green-600"}):B.phase1StartedAt?r.jsx(Dt,{className:"w-5 h-5 text-blue-600"}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Pending"})]}),B.phase1Investigator&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Investigator: ",B.phase1Investigator.firstName," ",B.phase1Investigator.lastName]}),B.phase1Conclusion&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:B.phase1Conclusion})]}),r.jsxs("div",{className:`p-3 rounded-lg border ${B.status.includes("PHASE_2")?"border-blue-500 bg-blue-50":B.phase2StartedAt?"border-green-500 bg-green-50":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"Phase 2: Full Investigation"}),B.phase2CompletedAt?r.jsx(yt,{className:"w-5 h-5 text-green-600"}):B.phase2StartedAt?r.jsx(Dt,{className:"w-5 h-5 text-blue-600"}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Pending"})]}),B.phase2Lead&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Lead: ",B.phase2Lead.firstName," ",B.phase2Lead.lastName]}),B.phase2Conclusion&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:B.phase2Conclusion})]}),r.jsx("div",{className:`p-3 rounded-lg border ${B.status.includes("CAPA")?"border-blue-500 bg-blue-50":B.correctiveAction?"border-green-500 bg-green-50":"border-gray-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"CAPA"}),B.status==="CAPA_IMPLEMENTING"||B.status.startsWith("CLOSED")?r.jsx(yt,{className:"w-5 h-5 text-green-600"}):B.status.includes("CAPA")?r.jsx(Dt,{className:"w-5 h-5 text-blue-600"}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Pending"})]})}),r.jsxs("div",{className:`p-3 rounded-lg border ${B.status.startsWith("CLOSED")?"border-green-500 bg-green-50":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"Closure"}),B.closedAt?r.jsx(yt,{className:"w-5 h-5 text-green-600"}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Pending"})]}),B.closureType&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Type: ",B.closureType]}),B.finalConclusion&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:B.finalConclusion})]})]}),r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2 mt-6",children:[r.jsx(Dt,{className:"w-5 h-5"}),"Available Actions"]}),r.jsxs("div",{className:"space-y-2",children:[B.status==="OPEN"&&r.jsxs("button",{onClick:()=>ie(B.id),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(fd,{className:"w-4 h-4"}),"Start Phase 1 Investigation"]}),B.status==="PHASE_1_LAB_INVESTIGATION"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>q(B.id,!0),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(bc,{className:"w-4 h-4"}),"Complete & Proceed to Phase 2"]}),r.jsxs("button",{onClick:()=>q(B.id,!1),className:"w-full flex items-center justify-center gap-2 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50",children:[r.jsx(pi,{className:"w-4 h-4"}),"Invalidate Case"]})]}),B.status==="PHASE_1_COMPLETE"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>re(B.id),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(fd,{className:"w-4 h-4"}),"Start Phase 2 Investigation"]}),r.jsxs("button",{onClick:()=>Q(B.id),className:"w-full flex items-center justify-center gap-2 bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700",children:[r.jsx(qp,{className:"w-4 h-4"}),"Propose CAPA (Skip Phase 2)"]})]}),B.status==="PHASE_2_FULL_INVESTIGATION"&&r.jsxs("button",{onClick:()=>ue(B.id),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(yt,{className:"w-4 h-4"}),"Complete Phase 2"]}),B.status==="PHASE_2_COMPLETE"&&r.jsxs("button",{onClick:()=>Q(B.id),className:"w-full flex items-center justify-center gap-2 bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700",children:[r.jsx(qp,{className:"w-4 h-4"}),"Propose CAPA"]}),B.status==="CAPA_PROPOSED"&&r.jsxs("button",{onClick:()=>V(B.id),className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[r.jsx(yt,{className:"w-4 h-4"}),"Approve CAPA"]}),B.status==="CAPA_APPROVED"&&r.jsxs("button",{onClick:()=>ne(B.id),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(fd,{className:"w-4 h-4"}),"Start Implementation"]}),B.status==="CAPA_IMPLEMENTING"&&r.jsxs("button",{onClick:()=>$(B.id,"CONFIRMED"),className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[r.jsx(yt,{className:"w-4 h-4"}),"Close Case (Confirmed)"]}),["PHASE_1_COMPLETE","PHASE_2_COMPLETE"].includes(B.status)&&r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{onClick:()=>$(B.id,"CONFIRMED"),className:"flex-1 flex items-center justify-center gap-2 bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm",children:"Close Confirmed"}),r.jsx("button",{onClick:()=>$(B.id,"INVALIDATED"),className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 text-sm",children:"Invalidate"}),r.jsx("button",{onClick:()=>$(B.id,"INCONCLUSIVE"),className:"flex-1 flex items-center justify-center gap-2 bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 text-sm",children:"Inconclusive"})]})]})]})]}),B.timeline&&B.timeline.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Timeline"}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:B.timeline.map(X=>r.jsxs("div",{className:"flex items-start gap-3 p-2 bg-gray-50 rounded",children:[r.jsx(Dt,{className:"w-4 h-4 text-gray-400 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:X.action.replace(/_/g," ")}),r.jsx("p",{className:"text-xs text-gray-500",children:X.description}),r.jsx("p",{className:"text-xs text-gray-400",children:new Date(X.createdAt).toLocaleString()})]})]},X.id))})]})]}),r.jsx("div",{className:"p-6 border-t flex justify-end",children:r.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Close"})})]})})]})}const Fp=[{value:"email",label:"Email Only"},{value:"sms",label:"SMS Only"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email,sms",label:"Email + SMS"},{value:"email,whatsapp",label:"Email + WhatsApp"},{value:"email,sms,whatsapp",label:"All Channels"}];function gge(){const e=Tr(),[t,n]=P.useState({}),[i,a]=P.useState(""),[s,l]=P.useState(null),{data:d,isLoading:h}=Ye({queryKey:["notification-settings"],queryFn:async()=>{const{data:w}=await xe.get("/notification-settings");return w}}),{data:f}=Ye({queryKey:["notification-status"],queryFn:async()=>{const{data:w}=await xe.get("/notification-settings/status");return w}});P.useEffect(()=>{if(d){const w={};Object.entries(d).forEach(([S,_])=>{w[_.key]=_.value}),n(w)}},[d]);const p=ft({mutationFn:async w=>{await xe.put("/notification-settings",w)},onSuccess:()=>{Ur.success("Settings saved successfully"),e.invalidateQueries({queryKey:["notification-settings"]})},onError:()=>{Ur.error("Failed to save settings")}}),g=()=>{p.mutate(t)},j=async()=>{l("email");try{const{data:w}=await xe.get("/notification-settings/test/email");Ur.success(w.message||"Test email sent")}catch(w){Ur.error(w.response?.data?.error||"Email test failed")}l(null)},v=async()=>{if(!i){Ur.error("Please enter a phone number");return}l("sms");try{const{data:w}=await xe.get(`/notification-settings/test/sms?to=${encodeURIComponent(i)}`);Ur.success(w.message||"Test SMS sent")}catch(w){Ur.error(w.response?.data?.error||"SMS test failed")}l(null)},b=async()=>{if(!i){Ur.error("Please enter a phone number");return}l("whatsapp");try{const{data:w}=await xe.get(`/notification-settings/test/whatsapp?to=${encodeURIComponent(i)}`);Ur.success(w.message||"Test WhatsApp sent")}catch(w){Ur.error(w.response?.data?.error||"WhatsApp test failed")}l(null)};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ch,{className:"w-8 h-8 animate-spin text-blue-600"})}):r.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(nS,{className:"w-8 h-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),r.jsx("p",{className:"text-gray-500",children:"Configure email, SMS, and WhatsApp notifications"})]})]}),r.jsxs("button",{onClick:g,disabled:p.isPending,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p.isPending?r.jsx(Ch,{className:"w-4 h-4 animate-spin"}):r.jsx(eg,{className:"w-4 h-4"}),"Save Changes"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xp,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Email"})]}),f?.email.connected?r.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-sm",children:[r.jsx(yt,{className:"w-4 h-4"})," Connected"]}):r.jsxs("span",{className:"flex items-center gap-1 text-red-600 text-sm",children:[r.jsx(pi,{className:"w-4 h-4"})," Disconnected"]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Provider: ",f?.email.provider||"Resend"]}),r.jsxs("button",{onClick:j,disabled:s==="email",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700",children:[s==="email"?r.jsx(Ch,{className:"w-3 h-3 animate-spin"}):r.jsx(Eb,{className:"w-3 h-3"}),"Send Test"]})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hu,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"font-medium",children:"SMS"})]}),f?.sms.connected?r.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-sm",children:[r.jsx(yt,{className:"w-4 h-4"})," Connected"]}):r.jsxs("span",{className:"flex items-center gap-1 text-red-600 text-sm",children:[r.jsx(pi,{className:"w-4 h-4"})," Disconnected"]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Provider: ",f?.sms.provider||"Twilio"]}),f?.sms.phoneNumber&&r.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["From: ",f.sms.phoneNumber]}),r.jsxs("button",{onClick:v,disabled:s==="sms"||!f?.sms.connected,className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 disabled:text-gray-400",children:[s==="sms"?r.jsx(Ch,{className:"w-3 h-3 animate-spin"}):r.jsx(Eb,{className:"w-3 h-3"}),"Send Test"]})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(VH,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"font-medium",children:"WhatsApp"})]}),f?.whatsapp.connected?r.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-sm",children:[r.jsx(yt,{className:"w-4 h-4"})," Connected"]}):r.jsxs("span",{className:"flex items-center gap-1 text-red-600 text-sm",children:[r.jsx(pi,{className:"w-4 h-4"})," Disconnected"]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Provider: ",f?.whatsapp.provider||"Twilio"]}),f?.whatsapp.phoneNumber&&r.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["From: ",f.whatsapp.phoneNumber]}),r.jsxs("button",{onClick:b,disabled:s==="whatsapp"||!f?.whatsapp.connected,className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 disabled:text-gray-400",children:[s==="whatsapp"?r.jsx(Ch,{className:"w-3 h-3 animate-spin"}):r.jsx(Eb,{className:"w-3 h-3"}),"Send Test"]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4 mb-6",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Test Phone Number"}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Enter a phone number to test SMS and WhatsApp (include country code, e.g., +1234567890)"}),r.jsx("input",{type:"tel",value:i,onChange:w=>a(w.target.value),placeholder:"+1234567890",className:"w-full max-w-xs px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),r.jsxs("div",{className:"bg-white rounded-lg border mb-6",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold",children:"Channel Settings"})}),r.jsx("div",{className:"p-4 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:t.notification_email_enabled===!0||t.notification_email_enabled==="true",onChange:w=>n({...t,notification_email_enabled:w.target.checked}),className:"w-5 h-5 text-blue-600 rounded"}),r.jsx("span",{children:"Enable Email Notifications"})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:t.notification_sms_enabled===!0||t.notification_sms_enabled==="true",onChange:w=>n({...t,notification_sms_enabled:w.target.checked}),className:"w-5 h-5 text-blue-600 rounded"}),r.jsx("span",{children:"Enable SMS Notifications"})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:t.notification_whatsapp_enabled===!0||t.notification_whatsapp_enabled==="true",onChange:w=>n({...t,notification_whatsapp_enabled:w.target.checked}),className:"w-5 h-5 text-blue-600 rounded"}),r.jsx("span",{children:"Enable WhatsApp Notifications"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg border mb-6",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold",children:"Email Settings"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sender Email Address"}),r.jsx("input",{type:"email",value:t.notification_email_from_address||"",onChange:w=>n({...t,notification_email_from_address:w.target.value}),className:"w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"noreply@radiopharma.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sender Display Name"}),r.jsx("input",{type:"text",value:t.notification_email_from_name||"",onChange:w=>n({...t,notification_email_from_name:w.target.value}),className:"w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"RadioPharma OMS"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border",children:[r.jsxs("div",{className:"p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Event Channel Configuration"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configure which channels to use for different notification types"})]}),r.jsx("div",{className:"p-4 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Notifications"}),r.jsx("select",{value:t.notification_order_events||"email",onChange:w=>n({...t,notification_order_events:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:Fp.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Order status updates, confirmations"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch/Production Notifications"}),r.jsx("select",{value:t.notification_batch_events||"email",onChange:w=>n({...t,notification_batch_events:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:Fp.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Production status, QC results, batch releases"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Notifications"}),r.jsx("select",{value:t.notification_delivery_events||"email,sms",onChange:w=>n({...t,notification_delivery_events:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:Fp.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Shipment dispatched, delivery updates, ETA changes"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approval Notifications"}),r.jsx("select",{value:t.notification_approval_events||"email",onChange:w=>n({...t,notification_approval_events:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:Fp.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Pending approvals, approval/rejection outcomes"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Notifications"}),r.jsx("select",{value:t.notification_invoice_events||"email",onChange:w=>n({...t,notification_invoice_events:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:Fp.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Invoice generated, payment reminders, receipts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Channel"}),r.jsxs("select",{value:t.notification_default_channel||"email",onChange:w=>n({...t,notification_default_channel:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"sms",children:"SMS"}),r.jsx("option",{value:"whatsapp",children:"WhatsApp"}),r.jsx("option",{value:"all",children:"All Channels"})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Fallback channel for uncategorized notifications"})]})]})})]})]})}function yge({children:e}){const{user:t,isAuthenticated:n,isLoading:i}=bl();return i?r.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:r.jsx("div",{className:"spinner"})}):n?t?.role!=="Customer"?r.jsx(Mh,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Mh,{to:"/login",replace:!0})}function vge({children:e}){const{user:t,isAuthenticated:n,isLoading:i}=bl();return i?r.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:r.jsx("div",{className:"spinner"})}):n?t?.role!=="Driver"?r.jsx(Mh,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Mh,{to:"/login",replace:!0})}function xge({children:e}){const{user:t,isAuthenticated:n,isLoading:i}=bl();return i?r.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:r.jsx("div",{className:"spinner"})}):n?t?.role==="Customer"?r.jsx(Mh,{to:"/portal",replace:!0}):t?.role==="Driver"?r.jsx(Mh,{to:"/driver",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Mh,{to:"/login",replace:!0})}function bge(){const{checkAuth:e,isLoading:t}=bl();return P.useEffect(()=>{e()},[e]),t?r.jsx("div",{className:"loading-overlay",style:{height:"100vh"},children:r.jsx("div",{className:"spinner"})}):r.jsx(XW,{children:r.jsxs(By,{children:[r.jsx(Lt,{path:"/login",element:r.jsx(jV,{})}),r.jsx(Lt,{path:"/portal/*",element:r.jsx(yge,{children:r.jsx(xV,{children:r.jsxs(By,{children:[r.jsx(Lt,{path:"/",element:r.jsx(Cpe,{})}),r.jsx(Lt,{path:"/orders",element:r.jsx(Ape,{})}),r.jsx(Lt,{path:"/orders/new",element:r.jsx(Epe,{})}),r.jsx(Lt,{path:"/orders/:id/journey",element:r.jsx(Ppe,{})}),r.jsx(Lt,{path:"/book-capacity",element:r.jsx(Ipe,{})}),r.jsx(Lt,{path:"/invoices",element:r.jsx(Tpe,{})}),r.jsx(Lt,{path:"/profile",element:r.jsx(Rpe,{})})]})})})}),r.jsx(Lt,{path:"/driver/*",element:r.jsx(vge,{children:r.jsx(bV,{children:r.jsxs(By,{children:[r.jsx(Lt,{path:"/",element:r.jsx(tge,{})}),r.jsx(Lt,{path:"/shipments",element:r.jsx(rge,{})}),r.jsx(Lt,{path:"/shipments/:id",element:r.jsx(nge,{})})]})})})}),r.jsx(Lt,{path:"/*",element:r.jsx(xge,{children:r.jsx(vV,{children:r.jsxs(By,{children:[r.jsx(Lt,{path:"/",element:r.jsx(MV,{})}),r.jsx(Lt,{path:"/dashboard/qc",element:r.jsx(Bpe,{})}),r.jsx(Lt,{path:"/dashboard/qp",element:r.jsx(Fpe,{})}),r.jsx(Lt,{path:"/dashboard/dispensing",element:r.jsx(qpe,{})}),r.jsx(Lt,{path:"/dashboard/logistics",element:r.jsx(Upe,{})}),r.jsx(Lt,{path:"/customers",element:r.jsx(IV,{})}),r.jsx(Lt,{path:"/customers/new",element:r.jsx(CE,{})}),r.jsx(Lt,{path:"/customers/:id/edit",element:r.jsx(CE,{})}),r.jsx(Lt,{path:"/products",element:r.jsx(wK,{})}),r.jsx(Lt,{path:"/materials",element:r.jsx(ige,{})}),r.jsx(Lt,{path:"/recipes",element:r.jsx(sge,{})}),r.jsx(Lt,{path:"/suppliers",element:r.jsx(lge,{})}),r.jsx(Lt,{path:"/purchase-orders",element:r.jsx(cge,{})}),r.jsx(Lt,{path:"/warehouses",element:r.jsx(dge,{})}),r.jsx(Lt,{path:"/grn",element:r.jsx(uge,{})}),r.jsx(Lt,{path:"/inventory",element:r.jsx(hge,{})}),r.jsx(Lt,{path:"/manufacturing",element:r.jsx(mge,{})}),r.jsx(Lt,{path:"/oos-investigations",element:r.jsx(pge,{})}),r.jsx(Lt,{path:"/orders",element:r.jsx(SK,{})}),r.jsx(Lt,{path:"/orders/new",element:r.jsx(TE,{})}),r.jsx(Lt,{path:"/orders/:id",element:r.jsx(TE,{})}),r.jsx(Lt,{path:"/orders/:id/journey",element:r.jsx(wpe,{})}),r.jsx(Lt,{path:"/planner",element:r.jsx(_K,{})}),r.jsx(Lt,{path:"/batches",element:r.jsx(AK,{})}),r.jsx(Lt,{path:"/batches/:id/journey",element:r.jsx(_pe,{})}),r.jsx(Lt,{path:"/qc",element:r.jsx(EK,{})}),r.jsx(Lt,{path:"/release",element:r.jsx(DK,{})}),r.jsx(Lt,{path:"/shipments",element:r.jsx(OK,{})}),r.jsx(Lt,{path:"/shipments/:id",element:r.jsx(Ype,{})}),r.jsx(Lt,{path:"/drivers",element:r.jsx(Gpe,{})}),r.jsx(Lt,{path:"/users",element:r.jsx(MK,{})}),r.jsx(Lt,{path:"/reports",element:r.jsx(Yue,{})}),r.jsx(Lt,{path:"/audit",element:r.jsx(Zue,{})}),r.jsx(Lt,{path:"/approvals",element:r.jsx(Xue,{})}),r.jsx(Lt,{path:"/dispensing",element:r.jsx(Jue,{})}),r.jsx(Lt,{path:"/availability",element:r.jsx(ehe,{})}),r.jsx(Lt,{path:"/reservations",element:r.jsx(rhe,{})}),r.jsx(Lt,{path:"/contracts",element:r.jsx(nhe,{})}),r.jsx(Lt,{path:"/invoices",element:r.jsx(bpe,{})}),r.jsx(Lt,{path:"/payments",element:r.jsx($pe,{})}),r.jsx(Lt,{path:"/settings",element:r.jsx(zpe,{})}),r.jsx(Lt,{path:"/settings/attachments",element:r.jsx(Vpe,{})}),r.jsx(Lt,{path:"/settings/notifications",element:r.jsx(gge,{})}),r.jsx(Lt,{path:"/admin/demo",element:r.jsx(Kpe,{})}),r.jsx(Lt,{path:"/notifications",element:r.jsx(Jpe,{})}),r.jsx(Lt,{path:"/roles",element:r.jsx(ege,{})})]})})})})]})})}const jge=new i9({defaultOptions:{queries:{staleTime:300*1e3,retry:1}}});aB.createRoot(document.getElementById("root")).render(r.jsx(rm.StrictMode,{children:r.jsx(a9,{client:jge,children:r.jsx(_F,{children:r.jsx(bge,{})})})}));export{_n as _,wge as c,Zl as g};
